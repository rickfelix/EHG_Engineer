# Stage 9: Canonical Definition (from stages.yaml)

**Purpose**: Full YAML definition from authoritative source (stages.yaml).

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:365-409 "id: 9, title: Gap Analysis & Market Opportunity"

---

## Full YAML Definition

```yaml
- id: 9
  title: Gap Analysis & Market Opportunity Modeling
  description: Identify capability gaps and model market opportunities.
  depends_on:
    - 8
  inputs:
    - Current capabilities
    - Market requirements
    - Competitor analysis
  outputs:
    - Gap analysis report
    - Opportunity matrix
    - Capability roadmap
  metrics:
    - Gap coverage
    - Opportunity size
    - Capability score
  gates:
    entry:
      - Decomposition complete
      - Market analyzed
    exit:
      - Gaps identified
      - Opportunities prioritized
      - Roadmap defined
  substages:
    - id: '9.1'
      title: Capability Assessment
      done_when:
        - Current state documented
        - Required capabilities listed
    - id: '9.2'
      title: Gap Identification
      done_when:
        - Gaps catalogued
        - Severity assessed
        - Priority assigned
    - id: '9.3'
      title: Opportunity Modeling
      done_when:
        - Opportunities mapped
        - Market size estimated
        - ROI projected
  notes:
    progression_mode: Manual → Assisted → Auto (suggested)
```

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:365-409 "Full Stage 9 definition"

---

## Field Definitions

### Core Attributes
- **id**: 9 (unique stage identifier)
- **title**: Gap Analysis & Market Opportunity Modeling
- **description**: Single-line summary of stage purpose
- **depends_on**: [8] - Problem Decomposition Engine must complete first

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:365-369 "id: 9, title: Gap Analysis"

### Inputs (3)
1. **Current capabilities**: Organization's existing skill sets, tools, processes
2. **Market requirements**: Customer needs, industry standards, competitive baselines
3. **Competitor analysis**: Competitive landscape, feature parity requirements

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:371-374 "inputs: Current capabilities, Market requirements"

### Outputs (3)
1. **Gap analysis report**: Structured document listing capability gaps with severity/priority
2. **Opportunity matrix**: 2D matrix (e.g., impact vs effort) prioritizing opportunities
3. **Capability roadmap**: Timeline for closing gaps (build, buy, partner, hire)

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:375-378 "outputs: Gap analysis report, Opportunity matrix"

### Metrics (3)
1. **Gap coverage**: % of identified gaps addressed in capability roadmap
2. **Opportunity size**: Market TAM/SAM/SOM estimates for prioritized opportunities
3. **Capability score**: Composite score (0-100) of organization readiness

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:379-382 "metrics: Gap coverage, Opportunity size, Capability score"

### Quality Gates

**Entry Gates** (2):
1. **Decomposition complete**: Stage 8 WBS finalized
2. **Market analyzed**: Sufficient market research completed

**Exit Gates** (3):
1. **Gaps identified**: All capability gaps documented
2. **Opportunities prioritized**: Opportunities ranked by ROI/strategic fit
3. **Roadmap defined**: Clear plan to address gaps

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:383-391 "gates: entry [Decomposition complete], exit [Gaps identified]"

### Substages (3)

**9.1 Capability Assessment**
- Current state documented
- Required capabilities listed

**9.2 Gap Identification**
- Gaps catalogued
- Severity assessed
- Priority assigned

**9.3 Opportunity Modeling**
- Opportunities mapped
- Market size estimated
- ROI projected

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:392-407 "substages: 9.1, 9.2, 9.3"

### Notes
- **progression_mode**: Manual → Assisted → Auto (suggested)
  - Indicates stage should evolve from manual process to AI-assisted to fully automated

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:408-409 "progression_mode: Manual → Assisted → Auto"

---

## Sources Table

| Source | Repo | Commit | Path | Lines | Purpose |
|--------|------|--------|------|-------|---------|
| stages.yaml | EHG_Engineer | 6ef8cf4 | docs/workflow/stages.yaml | 365-409 | Authoritative stage definition |

---

<!-- Generated by Claude Code Phase 5 | EHG_Engineer@6ef8cf4 | 2025-11-05 -->
