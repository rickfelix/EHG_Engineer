# Stage 22: Recursion Blueprint

## Current State Analysis

**Critique Recursion Section**: DOES NOT EXIST  
**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/critique/stage-22.md:1-71

**Observation**: Current critique file contains NO recursion section (71 lines total, template pattern).

## Gap Assessment

**Critical Gap**: No automated triggers for recursive workflow loops  
**Impact**: Failed executions cannot automatically trigger corrective actions

### Trigger SPRINT-001: Primary Metric Failure

**Condition**: Primary metric falls below threshold after stage execution

**Automation Logic**:
```sql
SELECT venture_id, metric_value
FROM stage_22_metrics
WHERE metric_value < threshold
  AND measured_at > NOW() - INTERVAL '1 hour';
```

**Recursion Target**: Self-recursion to Stage 22 or backward to Stage 21

### Trigger SPRINT-002: Validation Failure

**Condition**: Exit gate validation fails

**Automation Logic**:
```sql
SELECT venture_id, failed_gate
FROM stage_22_exit_gates
WHERE validation_status = 'failed';
```

**Recursion Target**: Stage 22 (re-execute failed substage)

### Trigger SPRINT-003: Resource Constraint

**Condition**: Resource limits exceeded (time, memory, cost)

**Automation Logic**:
```sql
SELECT venture_id, resource_type, usage_amount
FROM stage_22_resource_usage
WHERE usage_amount > limit_amount;
```

**Recursion Target**: Stage 22 with optimized parameters

## Integration with SD-RECURSION-ENGINE-001

**API Endpoint**: POST /api/recursion/trigger  
**Parameters**: venture_id, source_stage, target_stage, trigger_type  
**Response**: recursion_execution_id

**Evidence**: EHG_Engineer@6ef8cf4:docs/workflow/critique/stage-22.md

<!-- Generated by Claude Code Phase 9 | EHG_Engineer@6ef8cf4 | 2025-11-05 -->
