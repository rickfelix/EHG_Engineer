# Stage 4: Canonical Definition

**Source**: EHG_Engineer@6ef8cf4:docs/workflow/stages.yaml:135-182

## YAML Definition

```yaml
- id: 4
  title: Competitive Intelligence & Market Defense
  description: Analyze competitive landscape and establish market positioning strategy.
  depends_on:
    - 3
  inputs:
    - Market research
    - Competitor data
    - Industry reports
  outputs:
    - Competitive analysis
    - Market positioning
    - Defense strategy
  metrics:
    - Market coverage
    - Competitor identification
    - Differentiation score
  gates:
    entry:
      - Validation complete
      - Market defined
    exit:
      - Competitors analyzed
      - Positioning defined
      - Moat identified
  substages:
    - id: '4.1'
      title: Competitor Identification
      done_when:
        - Direct competitors listed
        - Indirect competitors mapped
    - id: '4.2'
      title: Feature Comparison
      done_when:
        - Feature matrix complete
        - Gaps identified
    - id: '4.3'
      title: Market Positioning
      done_when:
        - USP defined
        - Differentiation strategy set
    - id: '4.4'
      title: Defense Strategy
      done_when:
        - Competitive moat defined
        - IP strategy outlined
  notes:
    progression_mode: Manual → Assisted → Auto (suggested)
```

---

## Field Breakdown

| Field | Value | Notes |
|-------|-------|-------|
| `id` | 4 | Unique stage identifier |
| `title` | Competitive Intelligence & Market Defense | Short name |
| `description` | "Analyze competitive landscape..." | Purpose statement |
| `depends_on` | [3] | Requires Stage 3 (Comprehensive Validation) completion |
| `inputs` | 3 items | Market research, competitor data, industry reports |
| `outputs` | 3 items | Competitive analysis, market positioning, defense strategy |
| `metrics` | 3 items | Market coverage, competitor identification, differentiation score |
| `gates.entry` | 2 criteria | Validation complete, market defined |
| `gates.exit` | 3 criteria | Competitors analyzed, positioning defined, moat identified |
| `substages` | 4 substages | Competitor ID, feature comparison, positioning, defense |
| `notes.progression_mode` | Manual → Assisted → Auto | Automation roadmap |

---

## Sources Table

| Source | Repo | Commit | Path | Lines |
|--------|------|--------|------|-------|
| Full YAML | EHG_Engineer | 6ef8cf4 | docs/workflow/stages.yaml | 135-182 |

<!-- Generated by Claude Code Phase 3 | EHG_Engineer@6ef8cf4 | 2025-11-05 -->
