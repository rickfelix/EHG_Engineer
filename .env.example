# EHG_Engineer Environment Configuration Example
# Copy this file to .env and add your actual values

# Supabase Configuration (Required)
NEXT_PUBLIC_SUPABASE_URL=your-supabase-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key

# Supabase Service Role Key (Optional - Server-Side Scripts Only)
# ⚠️  SECURITY WARNING: This key bypasses ALL RLS policies
# - NEVER expose to client-side code
# - NEVER commit to version control
# - Only use in server-side scripts
#
# USE THIS KEY FOR:
# - Reading protected data (handoffs, sub-agent results) in scripts
# - Server-side operations requiring authenticated access
# - Bypassing RLS policies for admin operations
#
# GET YOUR KEY FROM: Supabase Dashboard > Project Settings > API > service_role key
# SCRIPTS: Use createSupabaseServiceClient() from scripts/lib/supabase-connection.js
#
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# EHG Application Database (For EHG app scripts)
# Only needed if scripts need to access EHG app database
EHG_SUPABASE_URL=https://liapbndqlqxdcgpwntbv.supabase.co
EHG_SUPABASE_ANON_KEY=your-ehg-anon-key
EHG_SUPABASE_SERVICE_ROLE_KEY=your-ehg-service-role-key

# Project Configuration
LEO_PROTOCOL_VERSION=3.1.5.9
PROJECT_NAME=EHG_Engineer

# Vision QA System - AI Provider Configuration
# At least one API key is required for Vision QA to function

# OpenAI API Key (Required for GPT-5, GPT-4 models)
# Get your key from: https://platform.openai.com/api-keys
# Pricing: https://openai.com/pricing
OPENAI_API_KEY=sk-...

# Anthropic API Key (Optional - for Claude models)
# Get your key from: https://console.anthropic.com/settings/keys
# Pricing: https://www.anthropic.com/pricing
ANTHROPIC_API_KEY=sk-ant-...

# Vision QA Configuration (Optional)
AI_PROVIDER=openai              # 'openai' or 'anthropic' (default: openai)
AI_MODEL=auto                   # 'auto' for automatic model selection (recommended)

# Optional: Set specific model if you don't want auto-selection
# AI_MODEL=gpt-5                # Most accurate, highest cost
# AI_MODEL=gpt-5-mini           # Balanced performance/cost (default for most tests)
# AI_MODEL=gpt-5-nano           # Cheapest, good for smoke tests
# AI_MODEL=claude-sonnet-3.7    # Best for accessibility testing

# Optional: Default cost limits for Vision QA
# VISION_QA_DEFAULT_COST_LIMIT=2.00
# VISION_QA_MAX_ITERATIONS=30
# VISION_QA_CONSENSUS_RUNS=1

# Development Environment (Optional)
NODE_ENV=development
DEBUG=vision-qa:*              # Enable debug logging for Vision QA

# RLS Policy Verification (Security Infrastructure)
# Connection string for rls_auditor role - read-only access to pg_policies
# Format: postgresql://rls_auditor:[PASSWORD]@[HOST]:[PORT]/[DATABASE]
# Security: SELECT-only on pg_policies and information_schema.tables
# Rotation: Every 90 days (documented in database/migrations/create-rls-auditor-role.sql)
# Usage: scripts/verify-rls-policies.js and GitHub Actions workflow
SUPABASE_RLS_AUDITOR_URL=postgresql://rls_auditor:your-rls-auditor-password@your-host.pooler.supabase.com:5432/postgres