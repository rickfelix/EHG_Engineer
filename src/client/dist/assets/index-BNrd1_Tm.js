var r1=Object.defineProperty;var n1=(e,t,r)=>t in e?r1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Oc=(e,t,r)=>n1(e,typeof t!="symbol"?t+"":t,r);function s1(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Fx={exports:{}},sc={},zx={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=Symbol.for("react.element"),a1=Symbol.for("react.portal"),o1=Symbol.for("react.fragment"),l1=Symbol.for("react.strict_mode"),c1=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),d1=Symbol.for("react.context"),h1=Symbol.for("react.forward_ref"),f1=Symbol.for("react.suspense"),m1=Symbol.for("react.memo"),p1=Symbol.for("react.lazy"),Xm=Symbol.iterator;function g1(e){return e===null||typeof e!="object"?null:(e=Xm&&e[Xm]||e["@@iterator"],typeof e=="function"?e:null)}var Ux={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bx=Object.assign,Vx={};function Si(e,t,r){this.props=e,this.context=t,this.refs=Vx,this.updater=r||Ux}Si.prototype.isReactComponent={};Si.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Si.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hx(){}Hx.prototype=Si.prototype;function Bh(e,t,r){this.props=e,this.context=t,this.refs=Vx,this.updater=r||Ux}var Vh=Bh.prototype=new Hx;Vh.constructor=Bh;Bx(Vh,Si.prototype);Vh.isPureReactComponent=!0;var Qm=Array.isArray,qx=Object.prototype.hasOwnProperty,Hh={current:null},Wx={key:!0,ref:!0,__self:!0,__source:!0};function Gx(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)qx.call(t,n)&&!Wx.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:so,type:e,key:i,ref:o,props:s,_owner:Hh.current}}function x1(e,t){return{$$typeof:so,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qh(e){return typeof e=="object"&&e!==null&&e.$$typeof===so}function y1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ym=/\/+/g;function Mc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?y1(""+e.key):t.toString(36)}function Zo(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case so:case a1:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Mc(o,0):n,Qm(s)?(r="",e!=null&&(r=e.replace(Ym,"$&/")+"/"),Zo(s,t,r,"",function(u){return u})):s!=null&&(qh(s)&&(s=x1(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ym,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Qm(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Mc(i,l);o+=Zo(i,t,r,c,s)}else if(c=g1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Mc(i,l++),o+=Zo(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function So(e,t,r){if(e==null)return e;var n=[],s=0;return Zo(e,n,"","",function(i){return t.call(r,i,s++)}),n}function v1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rt={current:null},el={transition:null},b1={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:el,ReactCurrentOwner:Hh};function Kx(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:So,forEach:function(e,t,r){So(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return So(e,function(){t++}),t},toArray:function(e){return So(e,function(t){return t})||[]},only:function(e){if(!qh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=Si;ve.Fragment=o1;ve.Profiler=c1;ve.PureComponent=Bh;ve.StrictMode=l1;ve.Suspense=f1;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b1;ve.act=Kx;ve.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Bx({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Hh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)qx.call(t,c)&&!Wx.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:so,type:e.type,key:s,ref:i,props:n,_owner:o}};ve.createContext=function(e){return e={$$typeof:d1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:u1,_context:e},e.Consumer=e};ve.createElement=Gx;ve.createFactory=function(e){var t=Gx.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:h1,render:e}};ve.isValidElement=qh;ve.lazy=function(e){return{$$typeof:p1,_payload:{_status:-1,_result:e},_init:v1}};ve.memo=function(e,t){return{$$typeof:m1,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=el.transition;el.transition={};try{e()}finally{el.transition=t}};ve.unstable_act=Kx;ve.useCallback=function(e,t){return Rt.current.useCallback(e,t)};ve.useContext=function(e){return Rt.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return Rt.current.useDeferredValue(e)};ve.useEffect=function(e,t){return Rt.current.useEffect(e,t)};ve.useId=function(){return Rt.current.useId()};ve.useImperativeHandle=function(e,t,r){return Rt.current.useImperativeHandle(e,t,r)};ve.useInsertionEffect=function(e,t){return Rt.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return Rt.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return Rt.current.useMemo(e,t)};ve.useReducer=function(e,t,r){return Rt.current.useReducer(e,t,r)};ve.useRef=function(e){return Rt.current.useRef(e)};ve.useState=function(e){return Rt.current.useState(e)};ve.useSyncExternalStore=function(e,t,r){return Rt.current.useSyncExternalStore(e,t,r)};ve.useTransition=function(){return Rt.current.useTransition()};ve.version="18.3.1";zx.exports=ve;var w=zx.exports;const zr=Uh(w),w1=s1({__proto__:null,default:zr},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1=w,j1=Symbol.for("react.element"),S1=Symbol.for("react.fragment"),N1=Object.prototype.hasOwnProperty,_1=k1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C1={key:!0,ref:!0,__self:!0,__source:!0};function Jx(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)N1.call(t,n)&&!C1.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:j1,type:e,key:i,ref:o,props:s,_owner:_1.current}}sc.Fragment=S1;sc.jsx=Jx;sc.jsxs=Jx;Fx.exports=sc;var a=Fx.exports,Yu={},Xx={exports:{}},rr={},Qx={exports:{}},Yx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,B){var S=A.length;A.push(B);e:for(;0<S;){var te=S-1>>>1,le=A[te];if(0<s(le,B))A[te]=B,A[S]=le,S=te;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var B=A[0],S=A.pop();if(S!==B){A[0]=S;e:for(var te=0,le=A.length,_=le>>>1;te<_;){var Ne=2*(te+1)-1,at=A[Ne],be=Ne+1,pt=A[be];if(0>s(at,S))be<le&&0>s(pt,at)?(A[te]=pt,A[be]=S,te=be):(A[te]=at,A[Ne]=S,te=Ne);else if(be<le&&0>s(pt,S))A[te]=pt,A[be]=S,te=be;else break e}}return B}function s(A,B){var S=A.sortIndex-B.sortIndex;return S!==0?S:A.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(A){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=A)n(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function j(A){if(v=!1,p(A),!g)if(r(c)!==null)g=!0,W(T);else{var B=r(u);B!==null&&U(j,B.startTime-A)}}function T(A,B){g=!1,v&&(v=!1,y(E),E=-1),f=!0;var S=m;try{for(p(B),h=r(c);h!==null&&(!(h.expirationTime>B)||A&&!P());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var le=te(h.expirationTime<=B);B=e.unstable_now(),typeof le=="function"?h.callback=le:h===r(c)&&n(c),p(B)}else n(c);h=r(c)}if(h!==null)var _=!0;else{var Ne=r(u);Ne!==null&&U(j,Ne.startTime-B),_=!1}return _}finally{h=null,m=S,f=!1}}var N=!1,C=null,E=-1,D=5,R=-1;function P(){return!(e.unstable_now()-R<D)}function O(){if(C!==null){var A=e.unstable_now();R=A;var B=!0;try{B=C(!0,A)}finally{B?K():(N=!1,C=null)}}else N=!1}var K;if(typeof x=="function")K=function(){x(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,M=I.port2;I.port1.onmessage=O,K=function(){M.postMessage(null)}}else K=function(){b(O,0)};function W(A){C=A,N||(N=!0,K())}function U(A,B){E=b(function(){A(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,W(T))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var S=m;m=B;try{return A()}finally{m=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,B){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var S=m;m=A;try{return B()}finally{m=S}},e.unstable_scheduleCallback=function(A,B,S){var te=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?te+S:te):S=te,A){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=S+le,A={id:d++,callback:B,priorityLevel:A,startTime:S,expirationTime:le,sortIndex:-1},S>te?(A.sortIndex=S,t(u,A),r(c)===null&&A===r(u)&&(v?(y(E),E=-1):v=!0,U(j,S-te))):(A.sortIndex=le,t(c,A),g||f||(g=!0,W(T))),A},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(A){var B=m;return function(){var S=m;m=B;try{return A.apply(this,arguments)}finally{m=S}}}})(Yx);Qx.exports=Yx;var T1=Qx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1=w,er=T1;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zx=new Set,Ea={};function js(e,t){di(e,t),di(e+"Capture",t)}function di(e,t){for(Ea[e]=t,e=0;e<t.length;e++)Zx.add(t[e])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zu=Object.prototype.hasOwnProperty,P1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zm={},ep={};function A1(e){return Zu.call(ep,e)?!0:Zu.call(Zm,e)?!1:P1.test(e)?ep[e]=!0:(Zm[e]=!0,!1)}function I1(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R1(e,t,r,n){if(t===null||typeof t>"u"||I1(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dt(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mt[e]=new Dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mt[t]=new Dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mt[e]=new Dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mt[e]=new Dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mt[e]=new Dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mt[e]=new Dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mt[e]=new Dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mt[e]=new Dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mt[e]=new Dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wh=/[\-:]([a-z])/g;function Gh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wh,Gh);mt[t]=new Dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wh,Gh);mt[t]=new Dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wh,Gh);mt[t]=new Dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Kh(e,t,r,n){var s=mt.hasOwnProperty(t)?mt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(R1(t,r,s,n)&&(r=null),n||s===null?A1(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var hn=E1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,No=Symbol.for("react.element"),Fs=Symbol.for("react.portal"),zs=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),ed=Symbol.for("react.profiler"),ey=Symbol.for("react.provider"),ty=Symbol.for("react.context"),Xh=Symbol.for("react.forward_ref"),td=Symbol.for("react.suspense"),rd=Symbol.for("react.suspense_list"),Qh=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),ry=Symbol.for("react.offscreen"),tp=Symbol.iterator;function Bi(e){return e===null||typeof e!="object"?null:(e=tp&&e[tp]||e["@@iterator"],typeof e=="function"?e:null)}var ze=Object.assign,$c;function ra(e){if($c===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$c=t&&t[1]||""}return`
`+$c+e}var Fc=!1;function zc(e,t){if(!e||Fc)return"";Fc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Fc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ra(e):""}function D1(e){switch(e.tag){case 5:return ra(e.type);case 16:return ra("Lazy");case 13:return ra("Suspense");case 19:return ra("SuspenseList");case 0:case 2:case 15:return e=zc(e.type,!1),e;case 11:return e=zc(e.type.render,!1),e;case 1:return e=zc(e.type,!0),e;default:return""}}function nd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zs:return"Fragment";case Fs:return"Portal";case ed:return"Profiler";case Jh:return"StrictMode";case td:return"Suspense";case rd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ty:return(e.displayName||"Context")+".Consumer";case ey:return(e._context.displayName||"Context")+".Provider";case Xh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qh:return t=e.displayName||null,t!==null?t:nd(e.type)||"Memo";case bn:t=e._payload,e=e._init;try{return nd(e(t))}catch{}}return null}function L1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nd(t);case 8:return t===Jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Un(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ny(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function O1(e){var t=ny(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _o(e){e._valueTracker||(e._valueTracker=O1(e))}function sy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ny(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function vl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sd(e,t){var r=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function rp(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Un(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function iy(e,t){t=t.checked,t!=null&&Kh(e,"checked",t,!1)}function id(e,t){iy(e,t);var r=Un(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ad(e,t.type,r):t.hasOwnProperty("defaultValue")&&ad(e,t.type,Un(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function np(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ad(e,t,r){(t!=="number"||vl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var na=Array.isArray;function ri(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Un(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function od(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sp(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(H(92));if(na(r)){if(1<r.length)throw Error(H(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Un(r)}}function ay(e,t){var r=Un(t.value),n=Un(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ip(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function oy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ld(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?oy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Co,ly=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Co=Co||document.createElement("div"),Co.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Co.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pa(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var la={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M1=["Webkit","ms","Moz","O"];Object.keys(la).forEach(function(e){M1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),la[t]=la[e]})});function cy(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||la.hasOwnProperty(e)&&la[e]?(""+t).trim():t+"px"}function uy(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=cy(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var $1=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cd(e,t){if(t){if($1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function ud(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dd=null;function Yh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hd=null,ni=null,si=null;function ap(e){if(e=oo(e)){if(typeof hd!="function")throw Error(H(280));var t=e.stateNode;t&&(t=cc(t),hd(e.stateNode,e.type,t))}}function dy(e){ni?si?si.push(e):si=[e]:ni=e}function hy(){if(ni){var e=ni,t=si;if(si=ni=null,ap(e),t)for(e=0;e<t.length;e++)ap(t[e])}}function fy(e,t){return e(t)}function my(){}var Uc=!1;function py(e,t,r){if(Uc)return e(t,r);Uc=!0;try{return fy(e,t,r)}finally{Uc=!1,(ni!==null||si!==null)&&(my(),hy())}}function Aa(e,t){var r=e.stateNode;if(r===null)return null;var n=cc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(H(231,t,typeof r));return r}var fd=!1;if(sn)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){fd=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{fd=!1}function F1(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var ca=!1,bl=null,wl=!1,md=null,z1={onError:function(e){ca=!0,bl=e}};function U1(e,t,r,n,s,i,o,l,c){ca=!1,bl=null,F1.apply(z1,arguments)}function B1(e,t,r,n,s,i,o,l,c){if(U1.apply(this,arguments),ca){if(ca){var u=bl;ca=!1,bl=null}else throw Error(H(198));wl||(wl=!0,md=u)}}function Ss(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function op(e){if(Ss(e)!==e)throw Error(H(188))}function V1(e){var t=e.alternate;if(!t){if(t=Ss(e),t===null)throw Error(H(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return op(s),e;if(i===n)return op(s),t;i=i.sibling}throw Error(H(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?e:t}function xy(e){return e=V1(e),e!==null?yy(e):null}function yy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yy(e);if(t!==null)return t;e=e.sibling}return null}var vy=er.unstable_scheduleCallback,lp=er.unstable_cancelCallback,H1=er.unstable_shouldYield,q1=er.unstable_requestPaint,We=er.unstable_now,W1=er.unstable_getCurrentPriorityLevel,Zh=er.unstable_ImmediatePriority,by=er.unstable_UserBlockingPriority,kl=er.unstable_NormalPriority,G1=er.unstable_LowPriority,wy=er.unstable_IdlePriority,ic=null,Ur=null;function K1(e){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(ic,e,void 0,(e.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:Q1,J1=Math.log,X1=Math.LN2;function Q1(e){return e>>>=0,e===0?32:31-(J1(e)/X1|0)|0}var To=64,Eo=4194304;function sa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jl(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=sa(l):(i&=o,i!==0&&(n=sa(i)))}else o=r&~s,o!==0?n=sa(o):i!==0&&(n=sa(i));if(n===0)return 0;if(t!==0&&t!==n&&(t&s)===0&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Nr(t),s=1<<r,n|=e[r],t&=~s;return n}function Y1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z1(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Nr(i),l=1<<o,c=s[o];c===-1?((l&r)===0||(l&n)!==0)&&(s[o]=Y1(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function pd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ky(){var e=To;return To<<=1,(To&4194240)===0&&(To=64),e}function Bc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function io(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nr(t),e[t]=r}function ej(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Nr(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function ef(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Nr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var _e=0;function jy(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Sy,tf,Ny,_y,Cy,gd=!1,Po=[],An=null,In=null,Rn=null,Ia=new Map,Ra=new Map,kn=[],tj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cp(e,t){switch(e){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Ia.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(t.pointerId)}}function Hi(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=oo(t),t!==null&&tf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function rj(e,t,r,n,s){switch(t){case"focusin":return An=Hi(An,e,t,r,n,s),!0;case"dragenter":return In=Hi(In,e,t,r,n,s),!0;case"mouseover":return Rn=Hi(Rn,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Ia.set(i,Hi(Ia.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ra.set(i,Hi(Ra.get(i)||null,e,t,r,n,s)),!0}return!1}function Ty(e){var t=os(e.target);if(t!==null){var r=Ss(t);if(r!==null){if(t=r.tag,t===13){if(t=gy(r),t!==null){e.blockedOn=t,Cy(e.priority,function(){Ny(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=xd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);dd=n,r.target.dispatchEvent(n),dd=null}else return t=oo(r),t!==null&&tf(t),e.blockedOn=r,!1;t.shift()}return!0}function up(e,t,r){tl(e)&&r.delete(t)}function nj(){gd=!1,An!==null&&tl(An)&&(An=null),In!==null&&tl(In)&&(In=null),Rn!==null&&tl(Rn)&&(Rn=null),Ia.forEach(up),Ra.forEach(up)}function qi(e,t){e.blockedOn===t&&(e.blockedOn=null,gd||(gd=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,nj)))}function Da(e){function t(s){return qi(s,e)}if(0<Po.length){qi(Po[0],e);for(var r=1;r<Po.length;r++){var n=Po[r];n.blockedOn===e&&(n.blockedOn=null)}}for(An!==null&&qi(An,e),In!==null&&qi(In,e),Rn!==null&&qi(Rn,e),Ia.forEach(t),Ra.forEach(t),r=0;r<kn.length;r++)n=kn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<kn.length&&(r=kn[0],r.blockedOn===null);)Ty(r),r.blockedOn===null&&kn.shift()}var ii=hn.ReactCurrentBatchConfig,Sl=!0;function sj(e,t,r,n){var s=_e,i=ii.transition;ii.transition=null;try{_e=1,rf(e,t,r,n)}finally{_e=s,ii.transition=i}}function ij(e,t,r,n){var s=_e,i=ii.transition;ii.transition=null;try{_e=4,rf(e,t,r,n)}finally{_e=s,ii.transition=i}}function rf(e,t,r,n){if(Sl){var s=xd(e,t,r,n);if(s===null)Yc(e,t,n,Nl,r),cp(e,n);else if(rj(s,e,t,r,n))n.stopPropagation();else if(cp(e,n),t&4&&-1<tj.indexOf(e)){for(;s!==null;){var i=oo(s);if(i!==null&&Sy(i),i=xd(e,t,r,n),i===null&&Yc(e,t,n,Nl,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Yc(e,t,n,null,r)}}var Nl=null;function xd(e,t,r,n){if(Nl=null,e=Yh(n),e=os(e),e!==null)if(t=Ss(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gy(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Nl=e,null}function Ey(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W1()){case Zh:return 1;case by:return 4;case kl:case G1:return 16;case wy:return 536870912;default:return 16}default:return 16}}var Nn=null,nf=null,rl=null;function Py(){if(rl)return rl;var e,t=nf,r=t.length,n,s="value"in Nn?Nn.value:Nn.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return rl=s.slice(e,1<n?1-n:void 0)}function nl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ao(){return!0}function dp(){return!1}function nr(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ao:dp,this.isPropagationStopped=dp,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ao)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ao)},persist:function(){},isPersistent:Ao}),t}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sf=nr(Ni),ao=ze({},Ni,{view:0,detail:0}),aj=nr(ao),Vc,Hc,Wi,ac=ze({},ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:af,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wi&&(Wi&&e.type==="mousemove"?(Vc=e.screenX-Wi.screenX,Hc=e.screenY-Wi.screenY):Hc=Vc=0,Wi=e),Vc)},movementY:function(e){return"movementY"in e?e.movementY:Hc}}),hp=nr(ac),oj=ze({},ac,{dataTransfer:0}),lj=nr(oj),cj=ze({},ao,{relatedTarget:0}),qc=nr(cj),uj=ze({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),dj=nr(uj),hj=ze({},Ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fj=nr(hj),mj=ze({},Ni,{data:0}),fp=nr(mj),pj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xj[e])?!!t[e]:!1}function af(){return yj}var vj=ze({},ao,{key:function(e){if(e.key){var t=pj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=nl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:af,charCode:function(e){return e.type==="keypress"?nl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bj=nr(vj),wj=ze({},ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=nr(wj),kj=ze({},ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:af}),jj=nr(kj),Sj=ze({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nj=nr(Sj),_j=ze({},ac,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cj=nr(_j),Tj=[9,13,27,32],of=sn&&"CompositionEvent"in window,ua=null;sn&&"documentMode"in document&&(ua=document.documentMode);var Ej=sn&&"TextEvent"in window&&!ua,Ay=sn&&(!of||ua&&8<ua&&11>=ua),pp=" ",gp=!1;function Iy(e,t){switch(e){case"keyup":return Tj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ry(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Us=!1;function Pj(e,t){switch(e){case"compositionend":return Ry(t);case"keypress":return t.which!==32?null:(gp=!0,pp);case"textInput":return e=t.data,e===pp&&gp?null:e;default:return null}}function Aj(e,t){if(Us)return e==="compositionend"||!of&&Iy(e,t)?(e=Py(),rl=nf=Nn=null,Us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ay&&t.locale!=="ko"?null:t.data;default:return null}}var Ij={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ij[e.type]:t==="textarea"}function Dy(e,t,r,n){dy(n),t=_l(t,"onChange"),0<t.length&&(r=new sf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var da=null,La=null;function Rj(e){qy(e,0)}function oc(e){var t=Hs(e);if(sy(t))return e}function Dj(e,t){if(e==="change")return t}var Ly=!1;if(sn){var Wc;if(sn){var Gc="oninput"in document;if(!Gc){var yp=document.createElement("div");yp.setAttribute("oninput","return;"),Gc=typeof yp.oninput=="function"}Wc=Gc}else Wc=!1;Ly=Wc&&(!document.documentMode||9<document.documentMode)}function vp(){da&&(da.detachEvent("onpropertychange",Oy),La=da=null)}function Oy(e){if(e.propertyName==="value"&&oc(La)){var t=[];Dy(t,La,e,Yh(e)),py(Rj,t)}}function Lj(e,t,r){e==="focusin"?(vp(),da=t,La=r,da.attachEvent("onpropertychange",Oy)):e==="focusout"&&vp()}function Oj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oc(La)}function Mj(e,t){if(e==="click")return oc(t)}function $j(e,t){if(e==="input"||e==="change")return oc(t)}function Fj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tr=typeof Object.is=="function"?Object.is:Fj;function Oa(e,t){if(Tr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Zu.call(t,s)||!Tr(e[s],t[s]))return!1}return!0}function bp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wp(e,t){var r=bp(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=bp(r)}}function My(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?My(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $y(){for(var e=window,t=vl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=vl(e.document)}return t}function lf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zj(e){var t=$y(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&My(r.ownerDocument.documentElement,r)){if(n!==null&&lf(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=wp(r,i);var o=wp(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Uj=sn&&"documentMode"in document&&11>=document.documentMode,Bs=null,yd=null,ha=null,vd=!1;function kp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vd||Bs==null||Bs!==vl(n)||(n=Bs,"selectionStart"in n&&lf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ha&&Oa(ha,n)||(ha=n,n=_l(yd,"onSelect"),0<n.length&&(t=new sf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Bs)))}function Io(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vs={animationend:Io("Animation","AnimationEnd"),animationiteration:Io("Animation","AnimationIteration"),animationstart:Io("Animation","AnimationStart"),transitionend:Io("Transition","TransitionEnd")},Kc={},Fy={};sn&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function lc(e){if(Kc[e])return Kc[e];if(!Vs[e])return e;var t=Vs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Fy)return Kc[e]=t[r];return e}var zy=lc("animationend"),Uy=lc("animationiteration"),By=lc("animationstart"),Vy=lc("transitionend"),Hy=new Map,jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qn(e,t){Hy.set(e,t),js(t,[e])}for(var Jc=0;Jc<jp.length;Jc++){var Xc=jp[Jc],Bj=Xc.toLowerCase(),Vj=Xc[0].toUpperCase()+Xc.slice(1);qn(Bj,"on"+Vj)}qn(zy,"onAnimationEnd");qn(Uy,"onAnimationIteration");qn(By,"onAnimationStart");qn("dblclick","onDoubleClick");qn("focusin","onFocus");qn("focusout","onBlur");qn(Vy,"onTransitionEnd");di("onMouseEnter",["mouseout","mouseover"]);di("onMouseLeave",["mouseout","mouseover"]);di("onPointerEnter",["pointerout","pointerover"]);di("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hj=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function Sp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,B1(n,t,void 0,e),e.currentTarget=null}function qy(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Sp(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Sp(s,l,u),i=c}}}if(wl)throw e=md,wl=!1,md=null,e}function Ae(e,t){var r=t[Sd];r===void 0&&(r=t[Sd]=new Set);var n=e+"__bubble";r.has(n)||(Wy(t,e,2,!1),r.add(n))}function Qc(e,t,r){var n=0;t&&(n|=4),Wy(r,e,n,t)}var Ro="_reactListening"+Math.random().toString(36).slice(2);function Ma(e){if(!e[Ro]){e[Ro]=!0,Zx.forEach(function(r){r!=="selectionchange"&&(Hj.has(r)||Qc(r,!1,e),Qc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ro]||(t[Ro]=!0,Qc("selectionchange",!1,t))}}function Wy(e,t,r,n){switch(Ey(t)){case 1:var s=sj;break;case 4:s=ij;break;default:s=rf}r=s.bind(null,t,r,e),s=void 0,!fd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Yc(e,t,r,n,s){var i=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=os(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}py(function(){var u=i,d=Yh(r),h=[];e:{var m=Hy.get(e);if(m!==void 0){var f=sf,g=e;switch(e){case"keypress":if(nl(r)===0)break e;case"keydown":case"keyup":f=bj;break;case"focusin":g="focus",f=qc;break;case"focusout":g="blur",f=qc;break;case"beforeblur":case"afterblur":f=qc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=lj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=jj;break;case zy:case Uy:case By:f=dj;break;case Vy:f=Nj;break;case"scroll":f=aj;break;case"wheel":f=Cj;break;case"copy":case"cut":case"paste":f=fj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=mp}var v=(t&4)!==0,b=!v&&e==="scroll",y=v?m!==null?m+"Capture":null:m;v=[];for(var x=u,p;x!==null;){p=x;var j=p.stateNode;if(p.tag===5&&j!==null&&(p=j,y!==null&&(j=Aa(x,y),j!=null&&v.push($a(x,j,p)))),b)break;x=x.return}0<v.length&&(m=new f(m,g,null,r,d),h.push({event:m,listeners:v}))}}if((t&7)===0){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&r!==dd&&(g=r.relatedTarget||r.fromElement)&&(os(g)||g[an]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(g=r.relatedTarget||r.toElement,f=u,g=g?os(g):null,g!==null&&(b=Ss(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(v=hp,j="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=mp,j="onPointerLeave",y="onPointerEnter",x="pointer"),b=f==null?m:Hs(f),p=g==null?m:Hs(g),m=new v(j,x+"leave",f,r,d),m.target=b,m.relatedTarget=p,j=null,os(d)===u&&(v=new v(y,x+"enter",g,r,d),v.target=p,v.relatedTarget=b,j=v),b=j,f&&g)t:{for(v=f,y=g,x=0,p=v;p;p=Ps(p))x++;for(p=0,j=y;j;j=Ps(j))p++;for(;0<x-p;)v=Ps(v),x--;for(;0<p-x;)y=Ps(y),p--;for(;x--;){if(v===y||y!==null&&v===y.alternate)break t;v=Ps(v),y=Ps(y)}v=null}else v=null;f!==null&&Np(h,m,f,v,!1),g!==null&&b!==null&&Np(h,b,g,v,!0)}}e:{if(m=u?Hs(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var T=Dj;else if(xp(m))if(Ly)T=$j;else{T=Oj;var N=Lj}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=Mj);if(T&&(T=T(e,u))){Dy(h,T,r,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&ad(m,"number",m.value)}switch(N=u?Hs(u):window,e){case"focusin":(xp(N)||N.contentEditable==="true")&&(Bs=N,yd=u,ha=null);break;case"focusout":ha=yd=Bs=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,kp(h,r,d);break;case"selectionchange":if(Uj)break;case"keydown":case"keyup":kp(h,r,d)}var C;if(of)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Us?Iy(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Ay&&r.locale!=="ko"&&(Us||E!=="onCompositionStart"?E==="onCompositionEnd"&&Us&&(C=Py()):(Nn=d,nf="value"in Nn?Nn.value:Nn.textContent,Us=!0)),N=_l(u,E),0<N.length&&(E=new fp(E,e,null,r,d),h.push({event:E,listeners:N}),C?E.data=C:(C=Ry(r),C!==null&&(E.data=C)))),(C=Ej?Pj(e,r):Aj(e,r))&&(u=_l(u,"onBeforeInput"),0<u.length&&(d=new fp("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=C))}qy(h,t)})}function $a(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _l(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Aa(e,r),i!=null&&n.unshift($a(e,i,s)),i=Aa(e,t),i!=null&&n.push($a(e,i,s))),e=e.return}return n}function Ps(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Np(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Aa(r,i),c!=null&&o.unshift($a(r,c,l))):s||(c=Aa(r,i),c!=null&&o.push($a(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var qj=/\r\n?/g,Wj=/\u0000|\uFFFD/g;function _p(e){return(typeof e=="string"?e:""+e).replace(qj,`
`).replace(Wj,"")}function Do(e,t,r){if(t=_p(t),_p(e)!==t&&r)throw Error(H(425))}function Cl(){}var bd=null,wd=null;function kd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jd=typeof setTimeout=="function"?setTimeout:void 0,Gj=typeof clearTimeout=="function"?clearTimeout:void 0,Cp=typeof Promise=="function"?Promise:void 0,Kj=typeof queueMicrotask=="function"?queueMicrotask:typeof Cp<"u"?function(e){return Cp.resolve(null).then(e).catch(Jj)}:jd;function Jj(e){setTimeout(function(){throw e})}function Zc(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Da(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Da(t)}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var _i=Math.random().toString(36).slice(2),Mr="__reactFiber$"+_i,Fa="__reactProps$"+_i,an="__reactContainer$"+_i,Sd="__reactEvents$"+_i,Xj="__reactListeners$"+_i,Qj="__reactHandles$"+_i;function os(e){var t=e[Mr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[an]||r[Mr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Tp(e);e!==null;){if(r=e[Mr])return r;e=Tp(e)}return t}e=r,r=e.parentNode}return null}function oo(e){return e=e[Mr]||e[an],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function cc(e){return e[Fa]||null}var Nd=[],qs=-1;function Wn(e){return{current:e}}function Ie(e){0>qs||(e.current=Nd[qs],Nd[qs]=null,qs--)}function Ee(e,t){qs++,Nd[qs]=e.current,e.current=t}var Bn={},St=Wn(Bn),Bt=Wn(!1),xs=Bn;function hi(e,t){var r=e.type.contextTypes;if(!r)return Bn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Vt(e){return e=e.childContextTypes,e!=null}function Tl(){Ie(Bt),Ie(St)}function Ep(e,t,r){if(St.current!==Bn)throw Error(H(168));Ee(St,t),Ee(Bt,r)}function Gy(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(H(108,L1(e)||"Unknown",s));return ze({},r,n)}function El(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bn,xs=St.current,Ee(St,e),Ee(Bt,Bt.current),!0}function Pp(e,t,r){var n=e.stateNode;if(!n)throw Error(H(169));r?(e=Gy(e,t,xs),n.__reactInternalMemoizedMergedChildContext=e,Ie(Bt),Ie(St),Ee(St,e)):Ie(Bt),Ee(Bt,r)}var Zr=null,uc=!1,eu=!1;function Ky(e){Zr===null?Zr=[e]:Zr.push(e)}function Yj(e){uc=!0,Ky(e)}function Gn(){if(!eu&&Zr!==null){eu=!0;var e=0,t=_e;try{var r=Zr;for(_e=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Zr=null,uc=!1}catch(s){throw Zr!==null&&(Zr=Zr.slice(e+1)),vy(Zh,Gn),s}finally{_e=t,eu=!1}}return null}var Ws=[],Gs=0,Pl=null,Al=0,or=[],lr=0,ys=null,tn=1,rn="";function es(e,t){Ws[Gs++]=Al,Ws[Gs++]=Pl,Pl=e,Al=t}function Jy(e,t,r){or[lr++]=tn,or[lr++]=rn,or[lr++]=ys,ys=e;var n=tn;e=rn;var s=32-Nr(n)-1;n&=~(1<<s),r+=1;var i=32-Nr(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,tn=1<<32-Nr(t)+s|r<<s|n,rn=i+e}else tn=1<<i|r<<s|n,rn=e}function cf(e){e.return!==null&&(es(e,1),Jy(e,1,0))}function uf(e){for(;e===Pl;)Pl=Ws[--Gs],Ws[Gs]=null,Al=Ws[--Gs],Ws[Gs]=null;for(;e===ys;)ys=or[--lr],or[lr]=null,rn=or[--lr],or[lr]=null,tn=or[--lr],or[lr]=null}var Zt=null,Qt=null,De=!1,Sr=null;function Xy(e,t){var r=dr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ap(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zt=e,Qt=Dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zt=e,Qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ys!==null?{id:tn,overflow:rn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=dr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Zt=e,Qt=null,!0):!1;default:return!1}}function _d(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cd(e){if(De){var t=Qt;if(t){var r=t;if(!Ap(e,t)){if(_d(e))throw Error(H(418));t=Dn(r.nextSibling);var n=Zt;t&&Ap(e,t)?Xy(n,r):(e.flags=e.flags&-4097|2,De=!1,Zt=e)}}else{if(_d(e))throw Error(H(418));e.flags=e.flags&-4097|2,De=!1,Zt=e}}}function Ip(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zt=e}function Lo(e){if(e!==Zt)return!1;if(!De)return Ip(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kd(e.type,e.memoizedProps)),t&&(t=Qt)){if(_d(e))throw Qy(),Error(H(418));for(;t;)Xy(e,t),t=Dn(t.nextSibling)}if(Ip(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qt=Dn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qt=null}}else Qt=Zt?Dn(e.stateNode.nextSibling):null;return!0}function Qy(){for(var e=Qt;e;)e=Dn(e.nextSibling)}function fi(){Qt=Zt=null,De=!1}function df(e){Sr===null?Sr=[e]:Sr.push(e)}var Zj=hn.ReactCurrentBatchConfig;function Gi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,e))}return e}function Oo(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rp(e){var t=e._init;return t(e._payload)}function Yy(e){function t(y,x){if(e){var p=y.deletions;p===null?(y.deletions=[x],y.flags|=16):p.push(x)}}function r(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function n(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=$n(y,x),y.index=0,y.sibling=null,y}function i(y,x,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<x?(y.flags|=2,x):p):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,x,p,j){return x===null||x.tag!==6?(x=ou(p,y.mode,j),x.return=y,x):(x=s(x,p),x.return=y,x)}function c(y,x,p,j){var T=p.type;return T===zs?d(y,x,p.props.children,j,p.key):x!==null&&(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bn&&Rp(T)===x.type)?(j=s(x,p.props),j.ref=Gi(y,x,p),j.return=y,j):(j=ul(p.type,p.key,p.props,null,y.mode,j),j.ref=Gi(y,x,p),j.return=y,j)}function u(y,x,p,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==p.containerInfo||x.stateNode.implementation!==p.implementation?(x=lu(p,y.mode,j),x.return=y,x):(x=s(x,p.children||[]),x.return=y,x)}function d(y,x,p,j,T){return x===null||x.tag!==7?(x=fs(p,y.mode,j,T),x.return=y,x):(x=s(x,p),x.return=y,x)}function h(y,x,p){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ou(""+x,y.mode,p),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case No:return p=ul(x.type,x.key,x.props,null,y.mode,p),p.ref=Gi(y,null,x),p.return=y,p;case Fs:return x=lu(x,y.mode,p),x.return=y,x;case bn:var j=x._init;return h(y,j(x._payload),p)}if(na(x)||Bi(x))return x=fs(x,y.mode,p,null),x.return=y,x;Oo(y,x)}return null}function m(y,x,p,j){var T=x!==null?x.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return T!==null?null:l(y,x,""+p,j);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case No:return p.key===T?c(y,x,p,j):null;case Fs:return p.key===T?u(y,x,p,j):null;case bn:return T=p._init,m(y,x,T(p._payload),j)}if(na(p)||Bi(p))return T!==null?null:d(y,x,p,j,null);Oo(y,p)}return null}function f(y,x,p,j,T){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(p)||null,l(x,y,""+j,T);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case No:return y=y.get(j.key===null?p:j.key)||null,c(x,y,j,T);case Fs:return y=y.get(j.key===null?p:j.key)||null,u(x,y,j,T);case bn:var N=j._init;return f(y,x,p,N(j._payload),T)}if(na(j)||Bi(j))return y=y.get(p)||null,d(x,y,j,T,null);Oo(x,j)}return null}function g(y,x,p,j){for(var T=null,N=null,C=x,E=x=0,D=null;C!==null&&E<p.length;E++){C.index>E?(D=C,C=null):D=C.sibling;var R=m(y,C,p[E],j);if(R===null){C===null&&(C=D);break}e&&C&&R.alternate===null&&t(y,C),x=i(R,x,E),N===null?T=R:N.sibling=R,N=R,C=D}if(E===p.length)return r(y,C),De&&es(y,E),T;if(C===null){for(;E<p.length;E++)C=h(y,p[E],j),C!==null&&(x=i(C,x,E),N===null?T=C:N.sibling=C,N=C);return De&&es(y,E),T}for(C=n(y,C);E<p.length;E++)D=f(C,y,E,p[E],j),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?E:D.key),x=i(D,x,E),N===null?T=D:N.sibling=D,N=D);return e&&C.forEach(function(P){return t(y,P)}),De&&es(y,E),T}function v(y,x,p,j){var T=Bi(p);if(typeof T!="function")throw Error(H(150));if(p=T.call(p),p==null)throw Error(H(151));for(var N=T=null,C=x,E=x=0,D=null,R=p.next();C!==null&&!R.done;E++,R=p.next()){C.index>E?(D=C,C=null):D=C.sibling;var P=m(y,C,R.value,j);if(P===null){C===null&&(C=D);break}e&&C&&P.alternate===null&&t(y,C),x=i(P,x,E),N===null?T=P:N.sibling=P,N=P,C=D}if(R.done)return r(y,C),De&&es(y,E),T;if(C===null){for(;!R.done;E++,R=p.next())R=h(y,R.value,j),R!==null&&(x=i(R,x,E),N===null?T=R:N.sibling=R,N=R);return De&&es(y,E),T}for(C=n(y,C);!R.done;E++,R=p.next())R=f(C,y,E,R.value,j),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?E:R.key),x=i(R,x,E),N===null?T=R:N.sibling=R,N=R);return e&&C.forEach(function(O){return t(y,O)}),De&&es(y,E),T}function b(y,x,p,j){if(typeof p=="object"&&p!==null&&p.type===zs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case No:e:{for(var T=p.key,N=x;N!==null;){if(N.key===T){if(T=p.type,T===zs){if(N.tag===7){r(y,N.sibling),x=s(N,p.props.children),x.return=y,y=x;break e}}else if(N.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bn&&Rp(T)===N.type){r(y,N.sibling),x=s(N,p.props),x.ref=Gi(y,N,p),x.return=y,y=x;break e}r(y,N);break}else t(y,N);N=N.sibling}p.type===zs?(x=fs(p.props.children,y.mode,j,p.key),x.return=y,y=x):(j=ul(p.type,p.key,p.props,null,y.mode,j),j.ref=Gi(y,x,p),j.return=y,y=j)}return o(y);case Fs:e:{for(N=p.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===p.containerInfo&&x.stateNode.implementation===p.implementation){r(y,x.sibling),x=s(x,p.children||[]),x.return=y,y=x;break e}else{r(y,x);break}else t(y,x);x=x.sibling}x=lu(p,y.mode,j),x.return=y,y=x}return o(y);case bn:return N=p._init,b(y,x,N(p._payload),j)}if(na(p))return g(y,x,p,j);if(Bi(p))return v(y,x,p,j);Oo(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,x!==null&&x.tag===6?(r(y,x.sibling),x=s(x,p),x.return=y,y=x):(r(y,x),x=ou(p,y.mode,j),x.return=y,y=x),o(y)):r(y,x)}return b}var mi=Yy(!0),Zy=Yy(!1),Il=Wn(null),Rl=null,Ks=null,hf=null;function ff(){hf=Ks=Rl=null}function mf(e){var t=Il.current;Ie(Il),e._currentValue=t}function Td(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ai(e,t){Rl=e,hf=Ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(zt=!0),e.firstContext=null)}function gr(e){var t=e._currentValue;if(hf!==e)if(e={context:e,memoizedValue:t,next:null},Ks===null){if(Rl===null)throw Error(H(308));Ks=e,Rl.dependencies={lanes:0,firstContext:e}}else Ks=Ks.next=e;return t}var ls=null;function pf(e){ls===null?ls=[e]:ls.push(e)}function ev(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,pf(t)):(r.next=s.next,s.next=r),t.interleaved=r,on(e,n)}function on(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var wn=!1;function gf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ln(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(we&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,on(e,r)}return s=n.interleaved,s===null?(t.next=t,pf(n)):(t.next=s.next,s.next=t),n.interleaved=t,on(e,r)}function sl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ef(e,r)}}function Dp(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Dl(e,t,r,n){var s=e.updateQueue;wn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(m=t,f=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(f,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(f,h,m):g,m==null)break e;h=ze({},h,m);break e;case 2:wn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);bs|=o,e.lanes=o,e.memoizedState=h}}function Lp(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(H(191,s));s.call(n)}}}var lo={},Br=Wn(lo),za=Wn(lo),Ua=Wn(lo);function cs(e){if(e===lo)throw Error(H(174));return e}function xf(e,t){switch(Ee(Ua,t),Ee(za,e),Ee(Br,lo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ld(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ld(t,e)}Ie(Br),Ee(Br,t)}function pi(){Ie(Br),Ie(za),Ie(Ua)}function rv(e){cs(Ua.current);var t=cs(Br.current),r=ld(t,e.type);t!==r&&(Ee(za,e),Ee(Br,r))}function yf(e){za.current===e&&(Ie(Br),Ie(za))}var Oe=Wn(0);function Ll(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tu=[];function vf(){for(var e=0;e<tu.length;e++)tu[e]._workInProgressVersionPrimary=null;tu.length=0}var il=hn.ReactCurrentDispatcher,ru=hn.ReactCurrentBatchConfig,vs=0,$e=null,tt=null,st=null,Ol=!1,fa=!1,Ba=0,eS=0;function vt(){throw Error(H(321))}function bf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Tr(e[r],t[r]))return!1;return!0}function wf(e,t,r,n,s,i){if(vs=i,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,il.current=e===null||e.memoizedState===null?sS:iS,e=r(n,s),fa){i=0;do{if(fa=!1,Ba=0,25<=i)throw Error(H(301));i+=1,st=tt=null,t.updateQueue=null,il.current=aS,e=r(n,s)}while(fa)}if(il.current=Ml,t=tt!==null&&tt.next!==null,vs=0,st=tt=$e=null,Ol=!1,t)throw Error(H(300));return e}function kf(){var e=Ba!==0;return Ba=0,e}function Rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?$e.memoizedState=st=e:st=st.next=e,st}function xr(){if(tt===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=st===null?$e.memoizedState:st.next;if(t!==null)st=t,tt=e;else{if(e===null)throw Error(H(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},st===null?$e.memoizedState=st=e:st=st.next=e}return st}function Va(e,t){return typeof t=="function"?t(e):t}function nu(e){var t=xr(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=tt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((vs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,$e.lanes|=d,bs|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Tr(n,t.memoizedState)||(zt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,$e.lanes|=i,bs|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function su(e){var t=xr(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Tr(i,t.memoizedState)||(zt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function nv(){}function sv(e,t){var r=$e,n=xr(),s=t(),i=!Tr(n.memoizedState,s);if(i&&(n.memoizedState=s,zt=!0),n=n.queue,jf(ov.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||st!==null&&st.memoizedState.tag&1){if(r.flags|=2048,Ha(9,av.bind(null,r,n,s,t),void 0,null),it===null)throw Error(H(349));(vs&30)!==0||iv(r,t,s)}return s}function iv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function av(e,t,r,n){t.value=r,t.getSnapshot=n,lv(t)&&cv(e)}function ov(e,t,r){return r(function(){lv(t)&&cv(e)})}function lv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Tr(e,r)}catch{return!0}}function cv(e){var t=on(e,1);t!==null&&_r(t,e,1,-1)}function Op(e){var t=Rr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:e},t.queue=e,e=e.dispatch=nS.bind(null,$e,e),[t.memoizedState,e]}function Ha(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function uv(){return xr().memoizedState}function al(e,t,r,n){var s=Rr();$e.flags|=e,s.memoizedState=Ha(1|t,r,void 0,n===void 0?null:n)}function dc(e,t,r,n){var s=xr();n=n===void 0?null:n;var i=void 0;if(tt!==null){var o=tt.memoizedState;if(i=o.destroy,n!==null&&bf(n,o.deps)){s.memoizedState=Ha(t,r,i,n);return}}$e.flags|=e,s.memoizedState=Ha(1|t,r,i,n)}function Mp(e,t){return al(8390656,8,e,t)}function jf(e,t){return dc(2048,8,e,t)}function dv(e,t){return dc(4,2,e,t)}function hv(e,t){return dc(4,4,e,t)}function fv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mv(e,t,r){return r=r!=null?r.concat([e]):null,dc(4,4,fv.bind(null,t,e),r)}function Sf(){}function pv(e,t){var r=xr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&bf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function gv(e,t){var r=xr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&bf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function xv(e,t,r){return(vs&21)===0?(e.baseState&&(e.baseState=!1,zt=!0),e.memoizedState=r):(Tr(r,t)||(r=ky(),$e.lanes|=r,bs|=r,e.baseState=!0),t)}function tS(e,t){var r=_e;_e=r!==0&&4>r?r:4,e(!0);var n=ru.transition;ru.transition={};try{e(!1),t()}finally{_e=r,ru.transition=n}}function yv(){return xr().memoizedState}function rS(e,t,r){var n=Mn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},vv(e))bv(t,r);else if(r=ev(e,t,r,n),r!==null){var s=At();_r(r,e,n,s),wv(r,t,n)}}function nS(e,t,r){var n=Mn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(vv(e))bv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Tr(l,o)){var c=t.interleaved;c===null?(s.next=s,pf(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=ev(e,t,s,n),r!==null&&(s=At(),_r(r,e,n,s),wv(r,t,n))}}function vv(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function bv(e,t){fa=Ol=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function wv(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ef(e,r)}}var Ml={readContext:gr,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},sS={readContext:gr,useCallback:function(e,t){return Rr().memoizedState=[e,t===void 0?null:t],e},useContext:gr,useEffect:Mp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,al(4194308,4,fv.bind(null,t,e),r)},useLayoutEffect:function(e,t){return al(4194308,4,e,t)},useInsertionEffect:function(e,t){return al(4,2,e,t)},useMemo:function(e,t){var r=Rr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Rr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=rS.bind(null,$e,e),[n.memoizedState,e]},useRef:function(e){var t=Rr();return e={current:e},t.memoizedState=e},useState:Op,useDebugValue:Sf,useDeferredValue:function(e){return Rr().memoizedState=e},useTransition:function(){var e=Op(!1),t=e[0];return e=tS.bind(null,e[1]),Rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=$e,s=Rr();if(De){if(r===void 0)throw Error(H(407));r=r()}else{if(r=t(),it===null)throw Error(H(349));(vs&30)!==0||iv(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Mp(ov.bind(null,n,i,e),[e]),n.flags|=2048,Ha(9,av.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Rr(),t=it.identifierPrefix;if(De){var r=rn,n=tn;r=(n&~(1<<32-Nr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ba++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=eS++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iS={readContext:gr,useCallback:pv,useContext:gr,useEffect:jf,useImperativeHandle:mv,useInsertionEffect:dv,useLayoutEffect:hv,useMemo:gv,useReducer:nu,useRef:uv,useState:function(){return nu(Va)},useDebugValue:Sf,useDeferredValue:function(e){var t=xr();return xv(t,tt.memoizedState,e)},useTransition:function(){var e=nu(Va)[0],t=xr().memoizedState;return[e,t]},useMutableSource:nv,useSyncExternalStore:sv,useId:yv,unstable_isNewReconciler:!1},aS={readContext:gr,useCallback:pv,useContext:gr,useEffect:jf,useImperativeHandle:mv,useInsertionEffect:dv,useLayoutEffect:hv,useMemo:gv,useReducer:su,useRef:uv,useState:function(){return su(Va)},useDebugValue:Sf,useDeferredValue:function(e){var t=xr();return tt===null?t.memoizedState=e:xv(t,tt.memoizedState,e)},useTransition:function(){var e=su(Va)[0],t=xr().memoizedState;return[e,t]},useMutableSource:nv,useSyncExternalStore:sv,useId:yv,unstable_isNewReconciler:!1};function wr(e,t){if(e&&e.defaultProps){t=ze({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ed(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ze({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var hc={isMounted:function(e){return(e=e._reactInternals)?Ss(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=At(),s=Mn(e),i=nn(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ln(e,i,s),t!==null&&(_r(t,e,s,n),sl(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=At(),s=Mn(e),i=nn(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ln(e,i,s),t!==null&&(_r(t,e,s,n),sl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=At(),n=Mn(e),s=nn(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ln(e,s,n),t!==null&&(_r(t,e,n,r),sl(t,e,n))}};function $p(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Oa(r,n)||!Oa(s,i):!0}function kv(e,t,r){var n=!1,s=Bn,i=t.contextType;return typeof i=="object"&&i!==null?i=gr(i):(s=Vt(t)?xs:St.current,n=t.contextTypes,i=(n=n!=null)?hi(e,s):Bn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fp(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&hc.enqueueReplaceState(t,t.state,null)}function Pd(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},gf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=gr(i):(i=Vt(t)?xs:St.current,s.context=hi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ed(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&hc.enqueueReplaceState(s,s.state,null),Dl(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function gi(e,t){try{var r="",n=t;do r+=D1(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function iu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ad(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var oS=typeof WeakMap=="function"?WeakMap:Map;function jv(e,t,r){r=nn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Fl||(Fl=!0,Ud=n),Ad(e,t)},r}function Sv(e,t,r){r=nn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Ad(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ad(e,t),typeof n!="function"&&(On===null?On=new Set([this]):On.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function zp(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new oS;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=wS.bind(null,e,t,r),t.then(e,e))}function Up(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Bp(e,t,r,n,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=nn(-1,1),t.tag=2,Ln(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var lS=hn.ReactCurrentOwner,zt=!1;function Tt(e,t,r,n){t.child=e===null?Zy(t,null,r,n):mi(t,e.child,r,n)}function Vp(e,t,r,n,s){r=r.render;var i=t.ref;return ai(t,s),n=wf(e,t,r,n,i,s),r=kf(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ln(e,t,s)):(De&&r&&cf(t),t.flags|=1,Tt(e,t,n,s),t.child)}function Hp(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!If(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Nv(e,t,i,n,s)):(e=ul(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,(e.lanes&s)===0){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Oa,r(o,n)&&e.ref===t.ref)return ln(e,t,s)}return t.flags|=1,e=$n(i,n),e.ref=t.ref,e.return=t,t.child=e}function Nv(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Oa(i,n)&&e.ref===t.ref)if(zt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)(e.flags&131072)!==0&&(zt=!0);else return t.lanes=e.lanes,ln(e,t,s)}return Id(e,t,r,n,s)}function _v(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Xs,Xt),Xt|=r;else{if((r&1073741824)===0)return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(Xs,Xt),Xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ee(Xs,Xt),Xt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ee(Xs,Xt),Xt|=n;return Tt(e,t,s,r),t.child}function Cv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Id(e,t,r,n,s){var i=Vt(r)?xs:St.current;return i=hi(t,i),ai(t,s),r=wf(e,t,r,n,i,s),n=kf(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ln(e,t,s)):(De&&n&&cf(t),t.flags|=1,Tt(e,t,r,s),t.child)}function qp(e,t,r,n,s){if(Vt(r)){var i=!0;El(t)}else i=!1;if(ai(t,s),t.stateNode===null)ol(e,t),kv(t,r,n),Pd(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=gr(u):(u=Vt(r)?xs:St.current,u=hi(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Fp(t,o,n,u),wn=!1;var m=t.memoizedState;o.state=m,Dl(t,n,o,s),c=t.memoizedState,l!==n||m!==c||Bt.current||wn?(typeof d=="function"&&(Ed(t,r,d,n),c=t.memoizedState),(l=wn||$p(t,r,l,n,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,tv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:wr(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=gr(c):(c=Vt(r)?xs:St.current,c=hi(t,c));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&Fp(t,o,n,c),wn=!1,m=t.memoizedState,o.state=m,Dl(t,n,o,s);var g=t.memoizedState;l!==h||m!==g||Bt.current||wn?(typeof f=="function"&&(Ed(t,r,f,n),g=t.memoizedState),(u=wn||$p(t,r,u,n,m,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Rd(e,t,r,n,i,s)}function Rd(e,t,r,n,s,i){Cv(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Pp(t,r,!1),ln(e,t,i);n=t.stateNode,lS.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=mi(t,e.child,null,i),t.child=mi(t,null,l,i)):Tt(e,t,l,i),t.memoizedState=n.state,s&&Pp(t,r,!0),t.child}function Tv(e){var t=e.stateNode;t.pendingContext?Ep(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ep(e,t.context,!1),xf(e,t.containerInfo)}function Wp(e,t,r,n,s){return fi(),df(s),t.flags|=256,Tt(e,t,r,n),t.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Ld(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ev(e,t,r){var n=t.pendingProps,s=Oe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ee(Oe,s&1),e===null)return Cd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},(n&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pc(o,n,0,null),e=fs(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ld(r),t.memoizedState=Dd,e):Nf(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return cS(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return(o&1)===0&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=$n(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$n(l,i):(i=fs(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Ld(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Dd,n}return i=e.child,e=i.sibling,n=$n(i,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Nf(e,t){return t=pc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mo(e,t,r,n){return n!==null&&df(n),mi(t,e.child,null,r),e=Nf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cS(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=iu(Error(H(422))),Mo(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=pc({mode:"visible",children:n.children},s,0,null),i=fs(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,(t.mode&1)!==0&&mi(t,e.child,null,o),t.child.memoizedState=Ld(o),t.memoizedState=Dd,i);if((t.mode&1)===0)return Mo(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(H(419)),n=iu(i,n,void 0),Mo(e,t,o,n)}if(l=(o&e.childLanes)!==0,zt||l){if(n=it,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(n.suspendedLanes|o))!==0?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,on(e,s),_r(n,e,s,-1))}return Af(),n=iu(Error(H(421))),Mo(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=kS.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Qt=Dn(s.nextSibling),Zt=t,De=!0,Sr=null,e!==null&&(or[lr++]=tn,or[lr++]=rn,or[lr++]=ys,tn=e.id,rn=e.overflow,ys=t),t=Nf(t,n.children),t.flags|=4096,t)}function Gp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Td(e.return,t,r)}function au(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Pv(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Tt(e,t,n.children,r),n=Oe.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gp(e,r,t);else if(e.tag===19)Gp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ee(Oe,n),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ll(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),au(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ll(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}au(t,!0,r,null,i);break;case"together":au(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ol(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ln(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),bs|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,r=$n(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=$n(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function uS(e,t,r){switch(t.tag){case 3:Tv(t),fi();break;case 5:rv(t);break;case 1:Vt(t.type)&&El(t);break;case 4:xf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ee(Il,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ee(Oe,Oe.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Ev(e,t,r):(Ee(Oe,Oe.current&1),e=ln(e,t,r),e!==null?e.sibling:null);Ee(Oe,Oe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return Pv(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Oe,Oe.current),n)break;return null;case 22:case 23:return t.lanes=0,_v(e,t,r)}return ln(e,t,r)}var Av,Od,Iv,Rv;Av=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Od=function(){};Iv=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,cs(Br.current);var i=null;switch(r){case"input":s=sd(e,s),n=sd(e,n),i=[];break;case"select":s=ze({},s,{value:void 0}),n=ze({},n,{value:void 0}),i=[];break;case"textarea":s=od(e,s),n=od(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Cl)}cd(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ea.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ea.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ae("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Rv=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ki(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function dS(e,t,r){var n=t.pendingProps;switch(uf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return Vt(t.type)&&Tl(),bt(t),null;case 3:return n=t.stateNode,pi(),Ie(Bt),Ie(St),vf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Lo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Sr!==null&&(Hd(Sr),Sr=null))),Od(e,t),bt(t),null;case 5:yf(t);var s=cs(Ua.current);if(r=t.type,e!==null&&t.stateNode!=null)Iv(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(H(166));return bt(t),null}if(e=cs(Br.current),Lo(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Mr]=t,n[Fa]=i,e=(t.mode&1)!==0,r){case"dialog":Ae("cancel",n),Ae("close",n);break;case"iframe":case"object":case"embed":Ae("load",n);break;case"video":case"audio":for(s=0;s<ia.length;s++)Ae(ia[s],n);break;case"source":Ae("error",n);break;case"img":case"image":case"link":Ae("error",n),Ae("load",n);break;case"details":Ae("toggle",n);break;case"input":rp(n,i),Ae("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",n);break;case"textarea":sp(n,i),Ae("invalid",n)}cd(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Do(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Do(n.textContent,l,e),s=["children",""+l]):Ea.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ae("scroll",n)}switch(r){case"input":_o(n),np(n,i,!0);break;case"textarea":_o(n),ip(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Cl)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=oy(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Mr]=t,e[Fa]=n,Av(e,t,!1,!1),t.stateNode=e;e:{switch(o=ud(r,n),r){case"dialog":Ae("cancel",e),Ae("close",e),s=n;break;case"iframe":case"object":case"embed":Ae("load",e),s=n;break;case"video":case"audio":for(s=0;s<ia.length;s++)Ae(ia[s],e);s=n;break;case"source":Ae("error",e),s=n;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),s=n;break;case"details":Ae("toggle",e),s=n;break;case"input":rp(e,n),s=sd(e,n),Ae("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ze({},n,{value:void 0}),Ae("invalid",e);break;case"textarea":sp(e,n),s=od(e,n),Ae("invalid",e);break;default:s=n}cd(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?uy(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ly(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Pa(e,c):typeof c=="number"&&Pa(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ea.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ae("scroll",e):c!=null&&Kh(e,i,c,o))}switch(r){case"input":_o(e),np(e,n,!1);break;case"textarea":_o(e),ip(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Un(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ri(e,!!n.multiple,i,!1):n.defaultValue!=null&&ri(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Cl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bt(t),null;case 6:if(e&&t.stateNode!=null)Rv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(H(166));if(r=cs(Ua.current),cs(Br.current),Lo(t)){if(n=t.stateNode,r=t.memoizedProps,n[Mr]=t,(i=n.nodeValue!==r)&&(e=Zt,e!==null))switch(e.tag){case 3:Do(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Do(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Mr]=t,t.stateNode=n}return bt(t),null;case 13:if(Ie(Oe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&Qt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Qy(),fi(),t.flags|=98560,i=!1;else if(i=Lo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(H(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[Mr]=t}else fi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;bt(t),i=!1}else Sr!==null&&(Hd(Sr),Sr=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Oe.current&1)!==0?rt===0&&(rt=3):Af())),t.updateQueue!==null&&(t.flags|=4),bt(t),null);case 4:return pi(),Od(e,t),e===null&&Ma(t.stateNode.containerInfo),bt(t),null;case 10:return mf(t.type._context),bt(t),null;case 17:return Vt(t.type)&&Tl(),bt(t),null;case 19:if(Ie(Oe),i=t.memoizedState,i===null)return bt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ki(i,!1);else{if(rt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Ll(e),o!==null){for(t.flags|=128,Ki(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ee(Oe,Oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&We()>xi&&(t.flags|=128,n=!0,Ki(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ll(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ki(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return bt(t),null}else 2*We()-i.renderingStartTime>xi&&r!==1073741824&&(t.flags|=128,n=!0,Ki(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=We(),t.sibling=null,r=Oe.current,Ee(Oe,n?r&1|2:r&1),t):(bt(t),null);case 22:case 23:return Pf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(Xt&1073741824)!==0&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function hS(e,t){switch(uf(t),t.tag){case 1:return Vt(t.type)&&Tl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pi(),Ie(Bt),Ie(St),vf(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return yf(t),null;case 13:if(Ie(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));fi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Oe),null;case 4:return pi(),null;case 10:return mf(t.type._context),null;case 22:case 23:return Pf(),null;case 24:return null;default:return null}}var $o=!1,wt=!1,fS=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Js(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ve(e,t,n)}else r.current=null}function Md(e,t,r){try{r()}catch(n){Ve(e,t,n)}}var Kp=!1;function mS(e,t){if(bd=Sl,e=$y(),lf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===n&&(c=o),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(wd={focusedElem:e,selectionRange:r},Sl=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var g=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,b=g.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:wr(t.type,v),b);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(j){Ve(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return g=Kp,Kp=!1,g}function ma(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Md(t,r,i)}s=s.next}while(s!==n)}}function fc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function $d(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Dv(e){var t=e.alternate;t!==null&&(e.alternate=null,Dv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mr],delete t[Fa],delete t[Sd],delete t[Xj],delete t[Qj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lv(e){return e.tag===5||e.tag===3||e.tag===4}function Jp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Cl));else if(n!==4&&(e=e.child,e!==null))for(Fd(e,t,r),e=e.sibling;e!==null;)Fd(e,t,r),e=e.sibling}function zd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(zd(e,t,r),e=e.sibling;e!==null;)zd(e,t,r),e=e.sibling}var dt=null,kr=!1;function mn(e,t,r){for(r=r.child;r!==null;)Ov(e,t,r),r=r.sibling}function Ov(e,t,r){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(ic,r)}catch{}switch(r.tag){case 5:wt||Js(r,t);case 6:var n=dt,s=kr;dt=null,mn(e,t,r),dt=n,kr=s,dt!==null&&(kr?(e=dt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):dt.removeChild(r.stateNode));break;case 18:dt!==null&&(kr?(e=dt,r=r.stateNode,e.nodeType===8?Zc(e.parentNode,r):e.nodeType===1&&Zc(e,r),Da(e)):Zc(dt,r.stateNode));break;case 4:n=dt,s=kr,dt=r.stateNode.containerInfo,kr=!0,mn(e,t,r),dt=n,kr=s;break;case 0:case 11:case 14:case 15:if(!wt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!==0||(i&4)!==0)&&Md(r,t,o),s=s.next}while(s!==n)}mn(e,t,r);break;case 1:if(!wt&&(Js(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ve(r,t,l)}mn(e,t,r);break;case 21:mn(e,t,r);break;case 22:r.mode&1?(wt=(n=wt)||r.memoizedState!==null,mn(e,t,r),wt=n):mn(e,t,r);break;default:mn(e,t,r)}}function Xp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fS),t.forEach(function(n){var s=jS.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function vr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:dt=l.stateNode,kr=!1;break e;case 3:dt=l.stateNode.containerInfo,kr=!0;break e;case 4:dt=l.stateNode.containerInfo,kr=!0;break e}l=l.return}if(dt===null)throw Error(H(160));Ov(i,o,s),dt=null,kr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ve(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Mv(t,e),t=t.sibling}function Mv(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vr(t,e),Ar(e),n&4){try{ma(3,e,e.return),fc(3,e)}catch(v){Ve(e,e.return,v)}try{ma(5,e,e.return)}catch(v){Ve(e,e.return,v)}}break;case 1:vr(t,e),Ar(e),n&512&&r!==null&&Js(r,r.return);break;case 5:if(vr(t,e),Ar(e),n&512&&r!==null&&Js(r,r.return),e.flags&32){var s=e.stateNode;try{Pa(s,"")}catch(v){Ve(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&iy(s,i),ud(l,o);var u=ud(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?uy(s,h):d==="dangerouslySetInnerHTML"?ly(s,h):d==="children"?Pa(s,h):Kh(s,d,h,u)}switch(l){case"input":id(s,i);break;case"textarea":ay(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ri(s,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?ri(s,!!i.multiple,i.defaultValue,!0):ri(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fa]=i}catch(v){Ve(e,e.return,v)}}break;case 6:if(vr(t,e),Ar(e),n&4){if(e.stateNode===null)throw Error(H(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Ve(e,e.return,v)}}break;case 3:if(vr(t,e),Ar(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Da(t.containerInfo)}catch(v){Ve(e,e.return,v)}break;case 4:vr(t,e),Ar(e);break;case 13:vr(t,e),Ar(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Tf=We())),n&4&&Xp(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(wt=(u=wt)||d,vr(t,e),wt=u):vr(t,e),Ar(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&(e.mode&1)!==0)for(Z=e,d=e.child;d!==null;){for(h=Z=d;Z!==null;){switch(m=Z,f=m.child,m.tag){case 0:case 11:case 14:case 15:ma(4,m,m.return);break;case 1:Js(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Ve(n,r,v)}}break;case 5:Js(m,m.return);break;case 22:if(m.memoizedState!==null){Yp(h);continue}}f!==null?(f.return=m,Z=f):Yp(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cy("display",o))}catch(v){Ve(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Ve(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vr(t,e),Ar(e),n&4&&Xp(e);break;case 21:break;default:vr(t,e),Ar(e)}}function Ar(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Lv(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Pa(s,""),n.flags&=-33);var i=Jp(e);zd(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Jp(e);Fd(e,l,o);break;default:throw Error(H(161))}}catch(c){Ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pS(e,t,r){Z=e,$v(e)}function $v(e,t,r){for(var n=(e.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||$o;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||wt;l=$o;var u=wt;if($o=o,(wt=c)&&!u)for(Z=s;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?Zp(s):c!==null?(c.return=o,Z=c):Zp(s);for(;i!==null;)Z=i,$v(i),i=i.sibling;Z=s,$o=l,wt=u}Qp(e)}else(s.subtreeFlags&8772)!==0&&i!==null?(i.return=s,Z=i):Qp(e)}}function Qp(e){for(;Z!==null;){var t=Z;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:wt||fc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!wt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:wr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Lp(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Lp(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Da(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}wt||t.flags&512&&$d(t)}catch(m){Ve(t,t.return,m)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function Yp(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function Zp(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fc(4,t)}catch(c){Ve(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Ve(t,s,c)}}var i=t.return;try{$d(t)}catch(c){Ve(t,i,c)}break;case 5:var o=t.return;try{$d(t)}catch(c){Ve(t,o,c)}}}catch(c){Ve(t,t.return,c)}if(t===e){Z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Z=l;break}Z=t.return}}var gS=Math.ceil,$l=hn.ReactCurrentDispatcher,_f=hn.ReactCurrentOwner,fr=hn.ReactCurrentBatchConfig,we=0,it=null,Ye=null,ft=0,Xt=0,Xs=Wn(0),rt=0,qa=null,bs=0,mc=0,Cf=0,pa=null,$t=null,Tf=0,xi=1/0,Qr=null,Fl=!1,Ud=null,On=null,Fo=!1,_n=null,zl=0,ga=0,Bd=null,ll=-1,cl=0;function At(){return(we&6)!==0?We():ll!==-1?ll:ll=We()}function Mn(e){return(e.mode&1)===0?1:(we&2)!==0&&ft!==0?ft&-ft:Zj.transition!==null?(cl===0&&(cl=ky()),cl):(e=_e,e!==0||(e=window.event,e=e===void 0?16:Ey(e.type)),e)}function _r(e,t,r,n){if(50<ga)throw ga=0,Bd=null,Error(H(185));io(e,r,n),((we&2)===0||e!==it)&&(e===it&&((we&2)===0&&(mc|=r),rt===4&&jn(e,ft)),Ht(e,n),r===1&&we===0&&(t.mode&1)===0&&(xi=We()+500,uc&&Gn()))}function Ht(e,t){var r=e.callbackNode;Z1(e,t);var n=jl(e,e===it?ft:0);if(n===0)r!==null&&lp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&lp(r),t===1)e.tag===0?Yj(e0.bind(null,e)):Ky(e0.bind(null,e)),Kj(function(){(we&6)===0&&Gn()}),r=null;else{switch(jy(n)){case 1:r=Zh;break;case 4:r=by;break;case 16:r=kl;break;case 536870912:r=wy;break;default:r=kl}r=Wv(r,Fv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Fv(e,t){if(ll=-1,cl=0,(we&6)!==0)throw Error(H(327));var r=e.callbackNode;if(oi()&&e.callbackNode!==r)return null;var n=jl(e,e===it?ft:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=Ul(e,n);else{t=n;var s=we;we|=2;var i=Uv();(it!==e||ft!==t)&&(Qr=null,xi=We()+500,hs(e,t));do try{vS();break}catch(l){zv(e,l)}while(!0);ff(),$l.current=i,we=s,Ye!==null?t=0:(it=null,ft=0,t=rt)}if(t!==0){if(t===2&&(s=pd(e),s!==0&&(n=s,t=Vd(e,s))),t===1)throw r=qa,hs(e,0),jn(e,n),Ht(e,We()),r;if(t===6)jn(e,n);else{if(s=e.current.alternate,(n&30)===0&&!xS(s)&&(t=Ul(e,n),t===2&&(i=pd(e),i!==0&&(n=i,t=Vd(e,i))),t===1))throw r=qa,hs(e,0),jn(e,n),Ht(e,We()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(H(345));case 2:ts(e,$t,Qr);break;case 3:if(jn(e,n),(n&130023424)===n&&(t=Tf+500-We(),10<t)){if(jl(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){At(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=jd(ts.bind(null,e,$t,Qr),t);break}ts(e,$t,Qr);break;case 4:if(jn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Nr(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=We()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*gS(n/1960))-n,10<n){e.timeoutHandle=jd(ts.bind(null,e,$t,Qr),n);break}ts(e,$t,Qr);break;case 5:ts(e,$t,Qr);break;default:throw Error(H(329))}}}return Ht(e,We()),e.callbackNode===r?Fv.bind(null,e):null}function Vd(e,t){var r=pa;return e.current.memoizedState.isDehydrated&&(hs(e,t).flags|=256),e=Ul(e,t),e!==2&&(t=$t,$t=r,t!==null&&Hd(t)),e}function Hd(e){$t===null?$t=e:$t.push.apply($t,e)}function xS(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Tr(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jn(e,t){for(t&=~Cf,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Nr(t),n=1<<r;e[r]=-1,t&=~n}}function e0(e){if((we&6)!==0)throw Error(H(327));oi();var t=jl(e,0);if((t&1)===0)return Ht(e,We()),null;var r=Ul(e,t);if(e.tag!==0&&r===2){var n=pd(e);n!==0&&(t=n,r=Vd(e,n))}if(r===1)throw r=qa,hs(e,0),jn(e,t),Ht(e,We()),r;if(r===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ts(e,$t,Qr),Ht(e,We()),null}function Ef(e,t){var r=we;we|=1;try{return e(t)}finally{we=r,we===0&&(xi=We()+500,uc&&Gn())}}function ws(e){_n!==null&&_n.tag===0&&(we&6)===0&&oi();var t=we;we|=1;var r=fr.transition,n=_e;try{if(fr.transition=null,_e=1,e)return e()}finally{_e=n,fr.transition=r,we=t,(we&6)===0&&Gn()}}function Pf(){Xt=Xs.current,Ie(Xs)}function hs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Gj(r)),Ye!==null)for(r=Ye.return;r!==null;){var n=r;switch(uf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Tl();break;case 3:pi(),Ie(Bt),Ie(St),vf();break;case 5:yf(n);break;case 4:pi();break;case 13:Ie(Oe);break;case 19:Ie(Oe);break;case 10:mf(n.type._context);break;case 22:case 23:Pf()}r=r.return}if(it=e,Ye=e=$n(e.current,null),ft=Xt=t,rt=0,qa=null,Cf=mc=bs=0,$t=pa=null,ls!==null){for(t=0;t<ls.length;t++)if(r=ls[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ls=null}return e}function zv(e,t){do{var r=Ye;try{if(ff(),il.current=Ml,Ol){for(var n=$e.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ol=!1}if(vs=0,st=tt=$e=null,fa=!1,Ba=0,_f.current=null,r===null||r.return===null){rt=1,qa=t,Ye=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=ft,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if((d.mode&1)===0&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Up(o);if(f!==null){f.flags&=-257,Bp(f,o,l,i,t),f.mode&1&&zp(i,u,t),t=f,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if((t&1)===0){zp(i,u,t),Af();break e}c=Error(H(426))}}else if(De&&l.mode&1){var b=Up(o);if(b!==null){(b.flags&65536)===0&&(b.flags|=256),Bp(b,o,l,i,t),df(gi(c,l));break e}}i=c=gi(c,l),rt!==4&&(rt=2),pa===null?pa=[i]:pa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=jv(i,c,t);Dp(i,y);break e;case 1:l=c;var x=i.type,p=i.stateNode;if((i.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(On===null||!On.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=Sv(i,l,t);Dp(i,j);break e}}i=i.return}while(i!==null)}Vv(r)}catch(T){t=T,Ye===r&&r!==null&&(Ye=r=r.return);continue}break}while(!0)}function Uv(){var e=$l.current;return $l.current=Ml,e===null?Ml:e}function Af(){(rt===0||rt===3||rt===2)&&(rt=4),it===null||(bs&268435455)===0&&(mc&268435455)===0||jn(it,ft)}function Ul(e,t){var r=we;we|=2;var n=Uv();(it!==e||ft!==t)&&(Qr=null,hs(e,t));do try{yS();break}catch(s){zv(e,s)}while(!0);if(ff(),we=r,$l.current=n,Ye!==null)throw Error(H(261));return it=null,ft=0,rt}function yS(){for(;Ye!==null;)Bv(Ye)}function vS(){for(;Ye!==null&&!H1();)Bv(Ye)}function Bv(e){var t=qv(e.alternate,e,Xt);e.memoizedProps=e.pendingProps,t===null?Vv(e):Ye=t,_f.current=null}function Vv(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=dS(r,t,Xt),r!==null){Ye=r;return}}else{if(r=hS(r,t),r!==null){r.flags&=32767,Ye=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,Ye=null;return}}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);rt===0&&(rt=5)}function ts(e,t,r){var n=_e,s=fr.transition;try{fr.transition=null,_e=1,bS(e,t,r,n)}finally{fr.transition=s,_e=n}return null}function bS(e,t,r,n){do oi();while(_n!==null);if((we&6)!==0)throw Error(H(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ej(e,i),e===it&&(Ye=it=null,ft=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Fo||(Fo=!0,Wv(kl,function(){return oi(),null})),i=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||i){i=fr.transition,fr.transition=null;var o=_e;_e=1;var l=we;we|=4,_f.current=null,mS(e,r),Mv(r,e),zj(wd),Sl=!!bd,wd=bd=null,e.current=r,pS(r),q1(),we=l,_e=o,fr.transition=i}else e.current=r;if(Fo&&(Fo=!1,_n=e,zl=s),i=e.pendingLanes,i===0&&(On=null),K1(r.stateNode),Ht(e,We()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Fl)throw Fl=!1,e=Ud,Ud=null,e;return(zl&1)!==0&&e.tag!==0&&oi(),i=e.pendingLanes,(i&1)!==0?e===Bd?ga++:(ga=0,Bd=e):ga=0,Gn(),null}function oi(){if(_n!==null){var e=jy(zl),t=fr.transition,r=_e;try{if(fr.transition=null,_e=16>e?16:e,_n===null)var n=!1;else{if(e=_n,_n=null,zl=0,(we&6)!==0)throw Error(H(331));var s=we;for(we|=4,Z=e.current;Z!==null;){var i=Z,o=i.child;if((Z.flags&16)!==0){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:ma(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var m=d.sibling,f=d.return;if(Dv(d),d===u){Z=null;break}if(m!==null){m.return=f,Z=m;break}Z=f}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Z=i}}if((i.subtreeFlags&2064)!==0&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:ma(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Z=y;break e}Z=i.return}}var x=e.current;for(Z=x;Z!==null;){o=Z;var p=o.child;if((o.subtreeFlags&2064)!==0&&p!==null)p.return=o,Z=p;else e:for(o=x;Z!==null;){if(l=Z,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:fc(9,l)}}catch(T){Ve(l,l.return,T)}if(l===o){Z=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Z=j;break e}Z=l.return}}if(we=s,Gn(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(ic,e)}catch{}n=!0}return n}finally{_e=r,fr.transition=t}}return!1}function t0(e,t,r){t=gi(r,t),t=jv(e,t,1),e=Ln(e,t,1),t=At(),e!==null&&(io(e,1,t),Ht(e,t))}function Ve(e,t,r){if(e.tag===3)t0(e,e,r);else for(;t!==null;){if(t.tag===3){t0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(On===null||!On.has(n))){e=gi(r,e),e=Sv(t,e,1),t=Ln(t,e,1),e=At(),t!==null&&(io(t,1,e),Ht(t,e));break}}t=t.return}}function wS(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=At(),e.pingedLanes|=e.suspendedLanes&r,it===e&&(ft&r)===r&&(rt===4||rt===3&&(ft&130023424)===ft&&500>We()-Tf?hs(e,0):Cf|=r),Ht(e,t)}function Hv(e,t){t===0&&((e.mode&1)===0?t=1:(t=Eo,Eo<<=1,(Eo&130023424)===0&&(Eo=4194304)));var r=At();e=on(e,t),e!==null&&(io(e,t,r),Ht(e,r))}function kS(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Hv(e,r)}function jS(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(t),Hv(e,r)}var qv;qv=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bt.current)zt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return zt=!1,uS(e,t,r);zt=(e.flags&131072)!==0}else zt=!1,De&&(t.flags&1048576)!==0&&Jy(t,Al,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ol(e,t),e=t.pendingProps;var s=hi(t,St.current);ai(t,r),s=wf(null,t,n,e,s,r);var i=kf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vt(n)?(i=!0,El(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gf(t),s.updater=hc,t.stateNode=s,s._reactInternals=t,Pd(t,n,e,r),t=Rd(null,t,n,!0,i,r)):(t.tag=0,De&&i&&cf(t),Tt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ol(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=NS(n),e=wr(n,e),s){case 0:t=Id(null,t,n,e,r);break e;case 1:t=qp(null,t,n,e,r);break e;case 11:t=Vp(null,t,n,e,r);break e;case 14:t=Hp(null,t,n,wr(n.type,e),r);break e}throw Error(H(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:wr(n,s),Id(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:wr(n,s),qp(e,t,n,s,r);case 3:e:{if(Tv(t),e===null)throw Error(H(387));n=t.pendingProps,i=t.memoizedState,s=i.element,tv(e,t),Dl(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=gi(Error(H(423)),t),t=Wp(e,t,n,r,s);break e}else if(n!==s){s=gi(Error(H(424)),t),t=Wp(e,t,n,r,s);break e}else for(Qt=Dn(t.stateNode.containerInfo.firstChild),Zt=t,De=!0,Sr=null,r=Zy(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fi(),n===s){t=ln(e,t,r);break e}Tt(e,t,n,r)}t=t.child}return t;case 5:return rv(t),e===null&&Cd(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,kd(n,s)?o=null:i!==null&&kd(n,i)&&(t.flags|=32),Cv(e,t),Tt(e,t,o,r),t.child;case 6:return e===null&&Cd(t),null;case 13:return Ev(e,t,r);case 4:return xf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=mi(t,null,n,r):Tt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:wr(n,s),Vp(e,t,n,s,r);case 7:return Tt(e,t,t.pendingProps,r),t.child;case 8:return Tt(e,t,t.pendingProps.children,r),t.child;case 12:return Tt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ee(Il,n._currentValue),n._currentValue=o,i!==null)if(Tr(i.value,o)){if(i.children===s.children&&!Bt.current){t=ln(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=nn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Td(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Td(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ai(t,r),s=gr(s),n=n(s),t.flags|=1,Tt(e,t,n,r),t.child;case 14:return n=t.type,s=wr(n,t.pendingProps),s=wr(n.type,s),Hp(e,t,n,s,r);case 15:return Nv(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:wr(n,s),ol(e,t),t.tag=1,Vt(n)?(e=!0,El(t)):e=!1,ai(t,r),kv(t,n,s),Pd(t,n,s,r),Rd(null,t,n,!0,e,r);case 19:return Pv(e,t,r);case 22:return _v(e,t,r)}throw Error(H(156,t.tag))};function Wv(e,t){return vy(e,t)}function SS(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(e,t,r,n){return new SS(e,t,r,n)}function If(e){return e=e.prototype,!(!e||!e.isReactComponent)}function NS(e){if(typeof e=="function")return If(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xh)return 11;if(e===Qh)return 14}return 2}function $n(e,t){var r=e.alternate;return r===null?(r=dr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ul(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")If(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case zs:return fs(r.children,s,i,t);case Jh:o=8,s|=8;break;case ed:return e=dr(12,r,t,s|2),e.elementType=ed,e.lanes=i,e;case td:return e=dr(13,r,t,s),e.elementType=td,e.lanes=i,e;case rd:return e=dr(19,r,t,s),e.elementType=rd,e.lanes=i,e;case ry:return pc(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ey:o=10;break e;case ty:o=9;break e;case Xh:o=11;break e;case Qh:o=14;break e;case bn:o=16,n=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=dr(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function fs(e,t,r,n){return e=dr(7,e,n,t),e.lanes=r,e}function pc(e,t,r,n){return e=dr(22,e,n,t),e.elementType=ry,e.lanes=r,e.stateNode={isHidden:!1},e}function ou(e,t,r){return e=dr(6,e,null,t),e.lanes=r,e}function lu(e,t,r){return t=dr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _S(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bc(0),this.expirationTimes=Bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bc(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rf(e,t,r,n,s,i,o,l,c){return e=new _S(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=dr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(i),e}function CS(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Gv(e){if(!e)return Bn;e=e._reactInternals;e:{if(Ss(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var r=e.type;if(Vt(r))return Gy(e,r,t)}return t}function Kv(e,t,r,n,s,i,o,l,c){return e=Rf(r,n,!0,e,s,i,o,l,c),e.context=Gv(null),r=e.current,n=At(),s=Mn(r),i=nn(n,s),i.callback=t??null,Ln(r,i,s),e.current.lanes=s,io(e,s,n),Ht(e,n),e}function gc(e,t,r,n){var s=t.current,i=At(),o=Mn(s);return r=Gv(r),t.context===null?t.context=r:t.pendingContext=r,t=nn(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ln(s,t,o),e!==null&&(_r(e,s,o,i),sl(e,s,o)),o}function Bl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function r0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Df(e,t){r0(e,t),(e=e.alternate)&&r0(e,t)}function TS(){return null}var Jv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lf(e){this._internalRoot=e}xc.prototype.render=Lf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));gc(e,t,null,null)};xc.prototype.unmount=Lf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ws(function(){gc(null,e,null,null)}),t[an]=null}};function xc(e){this._internalRoot=e}xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_y();e={blockedOn:null,target:e,priority:t};for(var r=0;r<kn.length&&t!==0&&t<kn[r].priority;r++);kn.splice(r,0,e),r===0&&Ty(e)}};function Of(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function n0(){}function ES(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Bl(o);i.call(u)}}var o=Kv(t,n,e,0,null,!1,!1,"",n0);return e._reactRootContainer=o,e[an]=o.current,Ma(e.nodeType===8?e.parentNode:e),ws(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Bl(c);l.call(u)}}var c=Rf(e,0,!1,null,null,!1,!1,"",n0);return e._reactRootContainer=c,e[an]=c.current,Ma(e.nodeType===8?e.parentNode:e),ws(function(){gc(t,c,r,n)}),c}function vc(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Bl(o);l.call(c)}}gc(t,o,e,s)}else o=ES(r,t,e,s,n);return Bl(o)}Sy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=sa(t.pendingLanes);r!==0&&(ef(t,r|1),Ht(t,We()),(we&6)===0&&(xi=We()+500,Gn()))}break;case 13:ws(function(){var n=on(e,1);if(n!==null){var s=At();_r(n,e,1,s)}}),Df(e,1)}};tf=function(e){if(e.tag===13){var t=on(e,134217728);if(t!==null){var r=At();_r(t,e,134217728,r)}Df(e,134217728)}};Ny=function(e){if(e.tag===13){var t=Mn(e),r=on(e,t);if(r!==null){var n=At();_r(r,e,t,n)}Df(e,t)}};_y=function(){return _e};Cy=function(e,t){var r=_e;try{return _e=e,t()}finally{_e=r}};hd=function(e,t,r){switch(t){case"input":if(id(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=cc(n);if(!s)throw Error(H(90));sy(n),id(n,s)}}}break;case"textarea":ay(e,r);break;case"select":t=r.value,t!=null&&ri(e,!!r.multiple,t,!1)}};fy=Ef;my=ws;var PS={usingClientEntryPoint:!1,Events:[oo,Hs,cc,dy,hy,Ef]},Ji={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AS={bundleType:Ji.bundleType,version:Ji.version,rendererPackageName:Ji.rendererPackageName,rendererConfig:Ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xy(e),e===null?null:e.stateNode},findFiberByHostInstance:Ji.findFiberByHostInstance||TS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zo.isDisabled&&zo.supportsFiber)try{ic=zo.inject(AS),Ur=zo}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PS;rr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Of(t))throw Error(H(200));return CS(e,t,null,r)};rr.createRoot=function(e,t){if(!Of(e))throw Error(H(299));var r=!1,n="",s=Jv;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Rf(e,1,!1,null,null,r,!1,n,s),e[an]=t.current,Ma(e.nodeType===8?e.parentNode:e),new Lf(t)};rr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=xy(t),e=e===null?null:e.stateNode,e};rr.flushSync=function(e){return ws(e)};rr.hydrate=function(e,t,r){if(!yc(t))throw Error(H(200));return vc(null,e,t,!0,r)};rr.hydrateRoot=function(e,t,r){if(!Of(e))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Jv;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Kv(t,null,e,1,r??null,s,!1,i,o),e[an]=t.current,Ma(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new xc(t)};rr.render=function(e,t,r){if(!yc(t))throw Error(H(200));return vc(null,e,t,!1,r)};rr.unmountComponentAtNode=function(e){if(!yc(e))throw Error(H(40));return e._reactRootContainer?(ws(function(){vc(null,null,e,!1,function(){e._reactRootContainer=null,e[an]=null})}),!0):!1};rr.unstable_batchedUpdates=Ef;rr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!yc(r))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return vc(e,t,r,!1,n)};rr.version="18.3.1-next-f1338f8080-20240426";function Xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xv)}catch(e){console.error(e)}}Xv(),Xx.exports=rr;var IS=Xx.exports,s0=IS;Yu.createRoot=s0.createRoot,Yu.hydrateRoot=s0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wa.apply(this,arguments)}var Cn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cn||(Cn={}));const i0="popstate";function RS(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return qd("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Vl(s)}return LS(t,r,null,e)}function Fe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function DS(){return Math.random().toString(36).substr(2,8)}function a0(e,t){return{usr:e.state,key:e.key,idx:t}}function qd(e,t,r,n){return r===void 0&&(r=null),Wa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ci(t):t,{state:r,key:t&&t.key||n||DS()})}function Vl(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ci(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function LS(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Cn.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Wa({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Cn.Pop;let b=d(),y=b==null?null:b-u;u=b,c&&c({action:l,location:v.location,delta:y})}function m(b,y){l=Cn.Push;let x=qd(v.location,b,y);u=d()+1;let p=a0(x,u),j=v.createHref(x);try{o.pushState(p,"",j)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(j)}i&&c&&c({action:l,location:v.location,delta:1})}function f(b,y){l=Cn.Replace;let x=qd(v.location,b,y);u=d();let p=a0(x,u),j=v.createHref(x);o.replaceState(p,"",j),i&&c&&c({action:l,location:v.location,delta:0})}function g(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof b=="string"?b:Vl(b);return x=x.replace(/ $/,"%20"),Fe(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let v={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(i0,h),c=b,()=>{s.removeEventListener(i0,h),c=null}},createHref(b){return t(s,b)},createURL:g,encodeLocation(b){let y=g(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:f,go(b){return o.go(b)}};return v}var o0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(o0||(o0={}));function OS(e,t,r){return r===void 0&&(r="/"),MS(e,t,r)}function MS(e,t,r,n){let s=typeof t=="string"?Ci(t):t,i=yi(s.pathname||"/",r);if(i==null)return null;let o=Yv(e);$S(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=JS(i);l=GS(o[c],u)}return l}function Yv(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Fe(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Fn([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Fe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Yv(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:qS(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Zv(i.path))s(i,o,c)}),t}function Zv(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Zv(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function $S(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:WS(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const FS=/^:[\w-]+$/,zS=3,US=2,BS=1,VS=10,HS=-2,l0=e=>e==="*";function qS(e,t){let r=e.split("/"),n=r.length;return r.some(l0)&&(n+=HS),t&&(n+=US),r.filter(s=>!l0(s)).reduce((s,i)=>s+(FS.test(i)?zS:i===""?BS:VS),n)}function WS(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function GS(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Wd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Fn([i,h.pathname]),pathnameBase:ZS(Fn([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Fn([i,h.pathnameBase]))}return o}function Wd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=KS(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:f}=d;if(m==="*"){let v=l[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[h];return f&&!g?u[m]=void 0:u[m]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function KS(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Qv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function JS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function yi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function XS(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Ci(e):e;return{pathname:r?r.startsWith("/")?r:QS(r,t):t,search:e2(n),hash:t2(s)}}function QS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function cu(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YS(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Mf(e,t){let r=YS(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function $f(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Ci(e):(s=Wa({},e),Fe(!s.pathname||!s.pathname.includes("?"),cu("?","pathname","search",s)),Fe(!s.pathname||!s.pathname.includes("#"),cu("#","pathname","hash",s)),Fe(!s.search||!s.search.includes("#"),cu("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=XS(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Fn=e=>e.join("/").replace(/\/\/+/g,"/"),ZS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),e2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,t2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function r2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const eb=["post","put","patch","delete"];new Set(eb);const n2=["get",...eb];new Set(n2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ga.apply(this,arguments)}const bc=w.createContext(null),tb=w.createContext(null),fn=w.createContext(null),wc=w.createContext(null),Gr=w.createContext({outlet:null,matches:[],isDataRoute:!1}),rb=w.createContext(null);function s2(e,t){let{relative:r}=t===void 0?{}:t;Ti()||Fe(!1);let{basename:n,navigator:s}=w.useContext(fn),{hash:i,pathname:o,search:l}=kc(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Fn([n,o])),s.createHref({pathname:c,search:l,hash:i})}function Ti(){return w.useContext(wc)!=null}function Kr(){return Ti()||Fe(!1),w.useContext(wc).location}function nb(e){w.useContext(fn).static||w.useLayoutEffect(e)}function Ei(){let{isDataRoute:e}=w.useContext(Gr);return e?v2():i2()}function i2(){Ti()||Fe(!1);let e=w.useContext(bc),{basename:t,future:r,navigator:n}=w.useContext(fn),{matches:s}=w.useContext(Gr),{pathname:i}=Kr(),o=JSON.stringify(Mf(s,r.v7_relativeSplatPath)),l=w.useRef(!1);return nb(()=>{l.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=$f(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Fn([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}const a2=w.createContext(null);function o2(e){let t=w.useContext(Gr).outlet;return t&&w.createElement(a2.Provider,{value:e},t)}function Ff(){let{matches:e}=w.useContext(Gr),t=e[e.length-1];return t?t.params:{}}function kc(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=w.useContext(fn),{matches:s}=w.useContext(Gr),{pathname:i}=Kr(),o=JSON.stringify(Mf(s,n.v7_relativeSplatPath));return w.useMemo(()=>$f(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function l2(e,t){return c2(e,t)}function c2(e,t,r,n){Ti()||Fe(!1);let{navigator:s}=w.useContext(fn),{matches:i}=w.useContext(Gr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Kr(),d;if(t){var h;let b=typeof t=="string"?Ci(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Fe(!1),d=b}else d=u;let m=d.pathname||"/",f=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=OS(e,{pathname:f}),v=m2(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Fn([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Fn([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&v?w.createElement(wc.Provider,{value:{location:Ga({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Cn.Pop}},v):v}function u2(){let e=y2(),t=r2(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,null)}const d2=w.createElement(u2,null);class h2 extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(Gr.Provider,{value:this.props.routeContext},w.createElement(rb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f2(e){let{routeContext:t,match:r,children:n}=e,s=w.useContext(bc);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(Gr.Provider,{value:t},n)}function m2(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Fe(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:f}=r,g=h.route.loader&&m[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let f,g=!1,v=null,b=null;r&&(f=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||d2,c&&(u<0&&m===0?(b2("route-fallback"),g=!0,b=null):u===m&&(g=!0,b=h.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,m+1)),x=()=>{let p;return f?p=v:g?p=b:h.route.Component?p=w.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=d,w.createElement(f2,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:p})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?w.createElement(h2,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var sb=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(sb||{}),ib=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(ib||{});function p2(e){let t=w.useContext(bc);return t||Fe(!1),t}function g2(e){let t=w.useContext(tb);return t||Fe(!1),t}function x2(e){let t=w.useContext(Gr);return t||Fe(!1),t}function ab(e){let t=x2(),r=t.matches[t.matches.length-1];return r.route.id||Fe(!1),r.route.id}function y2(){var e;let t=w.useContext(rb),r=g2(),n=ab();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function v2(){let{router:e}=p2(sb.UseNavigateStable),t=ab(ib.UseNavigateStable),r=w.useRef(!1);return nb(()=>{r.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ga({fromRouteId:t},i)))},[e,t])}const c0={};function b2(e,t,r){c0[e]||(c0[e]=!0)}function w2(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function k2(e){let{to:t,replace:r,state:n,relative:s}=e;Ti()||Fe(!1);let{future:i,static:o}=w.useContext(fn),{matches:l}=w.useContext(Gr),{pathname:c}=Kr(),u=Ei(),d=$f(t,Mf(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return w.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function j2(e){return o2(e.context)}function ut(e){Fe(!1)}function S2(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Cn.Pop,navigator:i,static:o=!1,future:l}=e;Ti()&&Fe(!1);let c=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Ga({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Ci(n));let{pathname:d="/",search:h="",hash:m="",state:f=null,key:g="default"}=n,v=w.useMemo(()=>{let b=yi(d,c);return b==null?null:{location:{pathname:b,search:h,hash:m,state:f,key:g},navigationType:s}},[c,d,h,m,f,g,s]);return v==null?null:w.createElement(fn.Provider,{value:u},w.createElement(wc.Provider,{children:r,value:v}))}function N2(e){let{children:t,location:r}=e;return l2(Gd(t),r)}new Promise(()=>{});function Gd(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let i=[...t,s];if(n.type===w.Fragment){r.push.apply(r,Gd(n.props.children,i));return}n.type!==ut&&Fe(!1),!n.props.index||!n.props.children||Fe(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Gd(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hl.apply(this,arguments)}function ob(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function _2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function C2(e,t){return e.button===0&&(!t||t==="_self")&&!_2(e)}const T2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],E2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],P2="6";try{window.__reactRouterVersion=P2}catch{}const A2=w.createContext({isTransitioning:!1}),I2="startTransition",u0=w1[I2];function R2(e){let{basename:t,children:r,future:n,window:s}=e,i=w.useRef();i.current==null&&(i.current=RS({window:s,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=w.useCallback(h=>{u&&u0?u0(()=>c(h)):c(h)},[c,u]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>w2(n),[n]),w.createElement(S2,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const D2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ql=w.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=ob(t,T2),{basename:f}=w.useContext(fn),g,v=!1;if(typeof u=="string"&&L2.test(u)&&(g=u,D2))try{let p=new URL(window.location.href),j=u.startsWith("//")?new URL(p.protocol+u):new URL(u),T=yi(j.pathname,f);j.origin===p.origin&&T!=null?u=T+j.search+j.hash:v=!0}catch{}let b=s2(u,{relative:s}),y=$2(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function x(p){n&&n(p),p.defaultPrevented||y(p)}return w.createElement("a",Hl({},m,{href:g||b,onClick:v||i?n:x,ref:r,target:c}))}),O2=w.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=ob(t,E2),m=kc(c,{relative:h.relative}),f=Kr(),g=w.useContext(tb),{navigator:v,basename:b}=w.useContext(fn),y=g!=null&&F2(m)&&u===!0,x=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,p=f.pathname,j=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(p=p.toLowerCase(),j=j?j.toLowerCase():null,x=x.toLowerCase()),j&&b&&(j=yi(j,b)||j);const T=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=p===x||!o&&p.startsWith(x)&&p.charAt(T)==="/",C=j!=null&&(j===x||!o&&j.startsWith(x)&&j.charAt(x.length)==="/"),E={isActive:N,isPending:C,isTransitioning:y},D=N?n:void 0,R;typeof i=="function"?R=i(E):R=[i,N?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(E):l;return w.createElement(ql,Hl({},h,{"aria-current":D,className:R,ref:r,style:P,to:c,viewTransition:u}),typeof d=="function"?d(E):d)});var Kd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kd||(Kd={}));var d0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(d0||(d0={}));function M2(e){let t=w.useContext(bc);return t||Fe(!1),t}function $2(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ei(),u=Kr(),d=kc(e,{relative:o});return w.useCallback(h=>{if(C2(h,r)){h.preventDefault();let m=n!==void 0?n:Vl(u)===Vl(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function F2(e,t){t===void 0&&(t={});let r=w.useContext(A2);r==null&&Fe(!1);let{basename:n}=M2(Kd.useViewTransitionState),s=kc(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=yi(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=yi(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Wd(s.pathname,o)!=null||Wd(s.pathname,i)!=null}function z2(e,t={}){const r=w.useRef(null),n=w.useRef(null),s=w.useRef(0),i=t.maxReconnectAttempts||10,o=t.reconnectDelay||3e3,l=()=>{try{r.current=new WebSocket(e),r.current.onopen=c=>{console.log("WebSocket connected"),s.current=0,t.onOpen&&t.onOpen(c)},r.current.onmessage=c=>{t.onMessage&&t.onMessage(c)},r.current.onerror=c=>{console.error("WebSocket error:",c),t.onError&&t.onError(c)},r.current.onclose=c=>{console.log("WebSocket closed"),t.onClose&&t.onClose(c),s.current<i&&(s.current++,console.log(`Reconnecting... (attempt ${s.current}/${i})`),n.current=setTimeout(()=>{l()},o))}}catch(c){console.error("Failed to create WebSocket:",c)}};return w.useEffect(()=>(l(),()=>{n.current&&clearTimeout(n.current),r.current&&r.current.close()}),[e]),r.current}function lb(e,t){const[r,n]=w.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return w.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(r))}catch(i){console.error(`Error saving to localStorage key "${e}":`,i)}},[e,r]),[r,i=>{try{const o=i instanceof Function?i(r):i;n(o)}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}}]}function U2(){const[e,t]=lb("leo-dashboard-preferences",{theme:"light",sidebarCollapsed:!1,refreshInterval:3e4,notifications:!0,compactView:!1});return{preferences:e,updatePreference:(n,s)=>{t(i=>({...i,[n]:s}))}}}function uu(e,t){const[r,n]=lb(`leo-dashboard-${e}`,t);return[r,n,()=>{window.localStorage.removeItem(`leo-dashboard-${e}`),n(t)}]}const zf=w.createContext({});function Uf(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const Bf=typeof window<"u",cb=Bf?w.useLayoutEffect:w.useEffect,jc=w.createContext(null);function Vf(e,t){e.indexOf(t)===-1&&e.push(t)}function Hf(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const cn=(e,t,r)=>r>t?t:r<e?e:r;let qf=()=>{};const un={},ub=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function db(e){return typeof e=="object"&&e!==null}const hb=e=>/^0[^.\s]+$/u.test(e);function Wf(e){let t;return()=>(t===void 0&&(t=e()),t)}const mr=e=>e,B2=(e,t)=>r=>t(e(r)),co=(...e)=>e.reduce(B2),Ka=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class Gf{constructor(){this.subscriptions=[]}add(t){return Vf(this.subscriptions,t),()=>Hf(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vr=e=>e*1e3,hr=e=>e/1e3;function fb(e,t){return t?e*(1e3/t):0}const mb=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,V2=1e-7,H2=12;function q2(e,t,r,n,s){let i,o,l=0;do o=t+(r-t)/2,i=mb(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>V2&&++l<H2);return o}function uo(e,t,r,n){if(e===t&&r===n)return mr;const s=i=>q2(i,0,1,e,r);return i=>i===0||i===1?i:mb(s(i),t,n)}const pb=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,gb=e=>t=>1-e(1-t),xb=uo(.33,1.53,.69,.99),Kf=gb(xb),yb=pb(Kf),vb=e=>(e*=2)<1?.5*Kf(e):.5*(2-Math.pow(2,-10*(e-1))),Jf=e=>1-Math.sin(Math.acos(e)),bb=gb(Jf),wb=pb(Jf),W2=uo(.42,0,1,1),G2=uo(0,0,.58,1),kb=uo(.42,0,.58,1),K2=e=>Array.isArray(e)&&typeof e[0]!="number",jb=e=>Array.isArray(e)&&typeof e[0]=="number",J2={linear:mr,easeIn:W2,easeInOut:kb,easeOut:G2,circIn:Jf,circInOut:wb,circOut:bb,backIn:Kf,backInOut:yb,backOut:xb,anticipate:vb},X2=e=>typeof e=="string",h0=e=>{if(jb(e)){qf(e.length===4);const[t,r,n,s]=e;return uo(t,r,n,s)}else if(X2(e))return J2[e];return e},Uo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Q2(e,t){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,h=!1,m=!1)=>{const g=m&&s?r:n;return h&&o.add(d),g.has(d)||g.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const Y2=40;function Sb(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=Uo.reduce((p,j)=>(p[j]=Q2(i),p),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:m,render:f,postRender:g}=o,v=()=>{const p=un.useManualTiming?s.timestamp:performance.now();r=!1,un.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(p-s.timestamp,Y2),1)),s.timestamp=p,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),m.process(s),f.process(s),g.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(v))},b=()=>{r=!0,n=!0,s.isProcessing||e(v)};return{schedule:Uo.reduce((p,j)=>{const T=o[j];return p[j]=(N,C=!1,E=!1)=>(r||b(),T.schedule(N,C,E)),p},{}),cancel:p=>{for(let j=0;j<Uo.length;j++)o[Uo[j]].cancel(p)},state:s,steps:o}}const{schedule:Le,cancel:Vn,state:ht,steps:du}=Sb(typeof requestAnimationFrame<"u"?requestAnimationFrame:mr,!0);let dl;function Z2(){dl=void 0}const Ut={now:()=>(dl===void 0&&Ut.set(ht.isProcessing||un.useManualTiming?ht.timestamp:performance.now()),dl),set:e=>{dl=e,queueMicrotask(Z2)}},Nb=e=>t=>typeof t=="string"&&t.startsWith(e),Xf=Nb("--"),eN=Nb("var(--"),Qf=e=>eN(e)?tN.test(e.split("/*")[0].trim()):!1,tN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ja={...Pi,transform:e=>cn(0,1,e)},Bo={...Pi,default:1},xa=e=>Math.round(e*1e5)/1e5,Yf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rN(e){return e==null}const nN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zf=(e,t)=>r=>!!(typeof r=="string"&&nN.test(r)&&r.startsWith(e)||t&&!rN(r)&&Object.prototype.hasOwnProperty.call(r,t)),_b=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,l]=n.match(Yf);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},sN=e=>cn(0,255,e),hu={...Pi,transform:e=>Math.round(sN(e))},us={test:Zf("rgb","red"),parse:_b("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+hu.transform(e)+", "+hu.transform(t)+", "+hu.transform(r)+", "+xa(Ja.transform(n))+")"};function iN(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Jd={test:Zf("#"),parse:iN,transform:us.transform},ho=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),xn=ho("deg"),Hr=ho("%"),oe=ho("px"),aN=ho("vh"),oN=ho("vw"),f0={...Hr,parse:e=>Hr.parse(e)/100,transform:e=>Hr.transform(e*100)},Qs={test:Zf("hsl","hue"),parse:_b("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Hr.transform(xa(t))+", "+Hr.transform(xa(r))+", "+xa(Ja.transform(n))+")"},Qe={test:e=>us.test(e)||Jd.test(e)||Qs.test(e),parse:e=>us.test(e)?us.parse(e):Qs.test(e)?Qs.parse(e):Jd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?us.transform(e):Qs.transform(e),getAnimatableNone:e=>{const t=Qe.parse(e);return t.alpha=0,Qe.transform(t)}},lN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function cN(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Yf))==null?void 0:t.length)||0)+(((r=e.match(lN))==null?void 0:r.length)||0)>0}const Cb="number",Tb="color",uN="var",dN="var(",m0="${}",hN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xa(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(hN,c=>(Qe.test(c)?(n.color.push(i),s.push(Tb),r.push(Qe.parse(c))):c.startsWith(dN)?(n.var.push(i),s.push(uN),r.push(c)):(n.number.push(i),s.push(Cb),r.push(parseFloat(c))),++i,m0)).split(m0);return{values:r,split:l,indexes:n,types:s}}function Eb(e){return Xa(e).values}function Pb(e){const{split:t,types:r}=Xa(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const l=r[o];l===Cb?i+=xa(s[o]):l===Tb?i+=Qe.transform(s[o]):i+=s[o]}return i}}const fN=e=>typeof e=="number"?0:Qe.test(e)?Qe.getAnimatableNone(e):e;function mN(e){const t=Eb(e);return Pb(e)(t.map(fN))}const Hn={test:cN,parse:Eb,createTransformer:Pb,getAnimatableNone:mN};function fu(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function pN({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=fu(c,l,e+1/3),i=fu(c,l,e),o=fu(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Wl(e,t){return r=>r>0?t:e}const Me=(e,t,r)=>e+(t-e)*r,mu=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},gN=[Jd,us,Qs],xN=e=>gN.find(t=>t.test(e));function p0(e){const t=xN(e);if(!t)return!1;let r=t.parse(e);return t===Qs&&(r=pN(r)),r}const g0=(e,t)=>{const r=p0(e),n=p0(t);if(!r||!n)return Wl(e,t);const s={...r};return i=>(s.red=mu(r.red,n.red,i),s.green=mu(r.green,n.green,i),s.blue=mu(r.blue,n.blue,i),s.alpha=Me(r.alpha,n.alpha,i),us.transform(s))},Xd=new Set(["none","hidden"]);function yN(e,t){return Xd.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function vN(e,t){return r=>Me(e,t,r)}function em(e){return typeof e=="number"?vN:typeof e=="string"?Qf(e)?Wl:Qe.test(e)?g0:kN:Array.isArray(e)?Ab:typeof e=="object"?Qe.test(e)?g0:bN:Wl}function Ab(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>em(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function bN(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=em(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function wN(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][n[i]],l=e.values[o]??0;r[s]=l,n[i]++}return r}const kN=(e,t)=>{const r=Hn.createTransformer(t),n=Xa(e),s=Xa(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Xd.has(e)&&!s.values.length||Xd.has(t)&&!n.values.length?yN(e,t):co(Ab(wN(n,s),s.values),r):Wl(e,t)};function Ib(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Me(e,t,r):em(e)(e,t)}const jN=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Le.update(t,r),stop:()=>Vn(t),now:()=>ht.isProcessing?ht.timestamp:Ut.now()}},Rb=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Gl=2e4;function tm(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Gl;)t+=r,n=e.next(t);return t>=Gl?1/0:t}function SN(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(tm(n),Gl);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:hr(s)}}const NN=5;function Db(e,t,r){const n=Math.max(t-NN,0);return fb(r-e(n),t-n)}const Be={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pu=.001;function _N({duration:e=Be.duration,bounce:t=Be.bounce,velocity:r=Be.velocity,mass:n=Be.mass}){let s,i,o=1-t;o=cn(Be.minDamping,Be.maxDamping,o),e=cn(Be.minDuration,Be.maxDuration,hr(e)),o<1?(s=u=>{const d=u*o,h=d*e,m=d-r,f=Qd(u,o),g=Math.exp(-h);return pu-m/f*g},i=u=>{const h=u*o*e,m=h*r+r,f=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-h),v=Qd(Math.pow(u,2),o);return(-s(u)+pu>0?-1:1)*((m-f)*g)/v}):(s=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-pu+d*h},i=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=TN(s,i,l);if(e=Vr(e),isNaN(c))return{stiffness:Be.stiffness,damping:Be.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const CN=12;function TN(e,t,r){let n=r;for(let s=1;s<CN;s++)n=n-e(n)/t(n);return n}function Qd(e,t){return e*Math.sqrt(1-t*t)}const EN=["duration","bounce"],PN=["stiffness","damping","mass"];function x0(e,t){return t.some(r=>e[r]!==void 0)}function AN(e){let t={velocity:Be.velocity,stiffness:Be.stiffness,damping:Be.damping,mass:Be.mass,isResolvedFromDuration:!1,...e};if(!x0(e,PN)&&x0(e,EN))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*cn(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Be.mass,stiffness:s,damping:i}}else{const r=_N(e);t={...t,...r,mass:Be.mass},t.isResolvedFromDuration=!0}return t}function Kl(e=Be.visualDuration,t=Be.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:f}=AN({...r,velocity:-hr(r.velocity||0)}),g=m||0,v=u/(2*Math.sqrt(c*d)),b=o-i,y=hr(Math.sqrt(c/d)),x=Math.abs(b)<5;n||(n=x?Be.restSpeed.granular:Be.restSpeed.default),s||(s=x?Be.restDelta.granular:Be.restDelta.default);let p;if(v<1){const T=Qd(y,v);p=N=>{const C=Math.exp(-v*y*N);return o-C*((g+v*y*b)/T*Math.sin(T*N)+b*Math.cos(T*N))}}else if(v===1)p=T=>o-Math.exp(-y*T)*(b+(g+y*b)*T);else{const T=y*Math.sqrt(v*v-1);p=N=>{const C=Math.exp(-v*y*N),E=Math.min(T*N,300);return o-C*((g+v*y*b)*Math.sinh(E)+T*b*Math.cosh(E))/T}}const j={calculatedDuration:f&&h||null,next:T=>{const N=p(T);if(f)l.done=T>=h;else{let C=T===0?g:0;v<1&&(C=T===0?Vr(g):Db(p,T,N));const E=Math.abs(C)<=n,D=Math.abs(o-N)<=s;l.done=E&&D}return l.value=l.done?o:N,l},toString:()=>{const T=Math.min(tm(j),Gl),N=Rb(C=>j.next(T*C).value,T,30);return T+"ms "+N},toTransition:()=>{}};return j}Kl.applyToOptions=e=>{const t=SN(e,100,Kl);return e.ease=t.ease,e.duration=Vr(t.duration),e.type="keyframes",e};function Yd({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],m={done:!1,value:h},f=E=>l!==void 0&&E<l||c!==void 0&&E>c,g=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let v=r*t;const b=h+v,y=o===void 0?b:o(b);y!==b&&(v=y-h);const x=E=>-v*Math.exp(-E/n),p=E=>y+x(E),j=E=>{const D=x(E),R=p(E);m.done=Math.abs(D)<=u,m.value=m.done?y:R};let T,N;const C=E=>{f(m.value)&&(T=E,N=Kl({keyframes:[m.value,g(m.value)],velocity:Db(p,E,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:E=>{let D=!1;return!N&&T===void 0&&(D=!0,j(E),C(E)),T!==void 0&&E>=T?N.next(E-T):(!D&&j(E),m)}}}function IN(e,t,r){const n=[],s=r||un.mix||Ib,i=e.length-1;for(let o=0;o<i;o++){let l=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||mr:t;l=co(c,l)}n.push(l)}return n}function RN(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(qf(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=IN(t,n,s),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=Ka(e[h],e[h+1],d);return l[h](m)};return r?d=>u(cn(e[0],e[i-1],d)):u}function DN(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Ka(0,t,n);e.push(Me(r,1,s))}}function LN(e){const t=[0];return DN(t,e.length-1),t}function ON(e,t){return e.map(r=>r*t)}function MN(e,t){return e.map(()=>t||kb).splice(0,e.length-1)}function ya({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=K2(n)?n.map(h0):h0(n),i={done:!1,value:t[0]},o=ON(r&&r.length===t.length?r:LN(t),e),l=RN(o,t,{ease:Array.isArray(s)?s:MN(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const $N=e=>e!==null;function rm(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter($N),l=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const FN={decay:Yd,inertia:Yd,tween:ya,keyframes:ya,spring:Kl};function Lb(e){typeof e.type=="string"&&(e.type=FN[e.type])}class nm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const zN=e=>e/100;class sm extends nm{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:r}=this.options;r&&r.updatedAt!==Ut.now()&&this.tick(Ut.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Lb(t);const{type:r=ya,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=r||ya;c!==ya&&typeof l[0]!="number"&&(this.mixKeyframes=co(zN,Ib(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=tm(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:f,type:g,onUpdate:v,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let p=this.currentTime,j=n;if(h){const E=Math.min(this.currentTime,s)/l;let D=Math.floor(E),R=E%1;!R&&E>=1&&(R=1),R===1&&D--,D=Math.min(D,h+1),!!(D%2)&&(m==="reverse"?(R=1-R,f&&(R-=f/l)):m==="mirror"&&(j=o)),p=cn(0,1,R)*l}const T=x?{done:!1,value:d[0]}:j.next(p);i&&(T.value=i(T.value));let{done:N}=T;!x&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return C&&g!==Yd&&(T.value=rm(d,this.options,b,this.speed)),v&&v(T.value),C&&this.finish(),T}then(t,r){return this.finished.then(t,r)}get duration(){return hr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hr(t)}get time(){return hr(this.currentTime)}set time(t){var r;t=Vr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ut.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=hr(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=jN,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ut.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function UN(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const ds=e=>e*180/Math.PI,Zd=e=>{const t=ds(Math.atan2(e[1],e[0]));return eh(t)},BN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Zd,rotateZ:Zd,skewX:e=>ds(Math.atan(e[1])),skewY:e=>ds(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},eh=e=>(e=e%360,e<0&&(e+=360),e),y0=Zd,v0=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),b0=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),VN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:v0,scaleY:b0,scale:e=>(v0(e)+b0(e))/2,rotateX:e=>eh(ds(Math.atan2(e[6],e[5]))),rotateY:e=>eh(ds(Math.atan2(-e[2],e[0]))),rotateZ:y0,rotate:y0,skewX:e=>ds(Math.atan(e[4])),skewY:e=>ds(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function th(e){return e.includes("scale")?1:0}function rh(e,t){if(!e||e==="none")return th(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=VN,s=r;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=BN,s=l}if(!s)return th(t);const i=n[t],o=s[1].split(",").map(qN);return typeof i=="function"?i(o):o[i]}const HN=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return rh(r,t)};function qN(e){return parseFloat(e.trim())}const Ai=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ii=new Set(Ai),w0=e=>e===Pi||e===oe,WN=new Set(["x","y","z"]),GN=Ai.filter(e=>!WN.has(e));function KN(e){const t=[];return GN.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const ms={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>rh(t,"x"),y:(e,{transform:t})=>rh(t,"y")};ms.translateX=ms.x;ms.translateY=ms.y;const ps=new Set;let nh=!1,sh=!1,ih=!1;function Ob(){if(sh){const e=Array.from(ps).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=KN(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var l;(l=n.getValue(i))==null||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}sh=!1,nh=!1,ps.forEach(e=>e.complete(ih)),ps.clear()}function Mb(){ps.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(sh=!0)})}function JN(){ih=!0,Mb(),Ob(),ih=!1}class im{constructor(t,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ps.add(this),nh||(nh=!0,Le.read(Mb),Le.resolveKeyframes(Ob))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const l=n.readValue(r,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}UN(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ps.delete(this)}cancel(){this.state==="scheduled"&&(ps.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const XN=e=>e.startsWith("--");function QN(e,t,r){XN(t)?e.style.setProperty(t,r):e.style[t]=r}const YN=Wf(()=>window.ScrollTimeline!==void 0),ZN={};function e_(e,t){const r=Wf(e);return()=>ZN[t]??r()}const $b=e_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),aa=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,k0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:aa([0,.65,.55,1]),circOut:aa([.55,0,1,.45]),backIn:aa([.31,.01,.66,-.59]),backOut:aa([.33,1.53,.69,.99])};function Fb(e,t){if(e)return typeof e=="function"?$b()?Rb(e,t):"ease-out":jb(e)?aa(e):Array.isArray(e)?e.map(r=>Fb(r,t)||k0.easeOut):k0[e]}function t_(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const h=Fb(l,s);Array.isArray(h)&&(d.easing=h);const m={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(d,m)}function zb(e){return typeof e=="function"&&"applyToOptions"in e}function r_({type:e,...t}){return zb(e)&&$b()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class n_ extends nm{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,qf(typeof t.type!="string");const u=r_(t);this.animation=t_(r,n,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=rm(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):QN(r,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,n;const t=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return hr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hr(t)}get time(){return hr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Vr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&YN()?(this.animation.timeline=t,mr):r(this)}}const Ub={anticipate:vb,backInOut:yb,circInOut:wb};function s_(e){return e in Ub}function i_(e){typeof e.ease=="string"&&s_(e.ease)&&(e.ease=Ub[e.ease])}const j0=10;class a_ extends n_{constructor(t){i_(t),Lb(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const l=new sm({...o,autoplay:!1}),c=Vr(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-j0).value,l.sample(c).value,j0),l.stop()}}const S0=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Hn.test(e)||e==="0")&&!e.startsWith("url("));function o_(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function l_(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=S0(s,t),l=S0(i,t);return!o||!l?!1:o_(e)||(r==="spring"||zb(r))&&n}function ah(e){e.duration=0,e.type="keyframes"}const c_=new Set(["opacity","clipPath","filter","transform"]),u_=Wf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function d_(e){var d;const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:i,type:o}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return u_()&&r&&c_.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&i!==0&&o!=="inertia"}const h_=40;class f_ extends nm{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var g;super(),this.stop=()=>{var v,b;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Ut.now();const m={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...h},f=(d==null?void 0:d.KeyframeResolver)||im;this.keyframeResolver=new f(l,(v,b,y)=>this.onKeyframesResolved(v,b,m,!y),c,u,d),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=Ut.now(),l_(t,i,o,l)||((un.instantAnimations||!c)&&(d==null||d(rm(t,n,r))),t[0]=t[t.length-1],ah(n),n.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>h_?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},f=!u&&d_(m)?new a_({...m,element:m.motionValue.owner.current}):new sm(m);f.finished.then(()=>this.notifyFinished()).catch(mr),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),JN()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const m_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function p_(e){const t=m_.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function Bb(e,t,r=1){const[n,s]=p_(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return ub(o)?parseFloat(o):o}return Qf(s)?Bb(s,t,r+1):s}function am(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Vb=new Set(["width","height","top","left","right","bottom",...Ai]),g_={test:e=>e==="auto",parse:e=>e},Hb=e=>t=>t.test(e),qb=[Pi,oe,Hr,xn,oN,aN,g_],N0=e=>qb.find(Hb(e));function x_(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||hb(e):!0}const y_=new Set(["brightness","contrast","saturate","opacity"]);function v_(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Yf)||[];if(!n)return e;const s=r.replace(n,"");let i=y_.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const b_=/\b([a-z-]*)\(.*?\)/gu,oh={...Hn,getAnimatableNone:e=>{const t=e.match(b_);return t?t.map(v_).join(" "):e}},_0={...Pi,transform:Math.round},w_={rotate:xn,rotateX:xn,rotateY:xn,rotateZ:xn,scale:Bo,scaleX:Bo,scaleY:Bo,scaleZ:Bo,skew:xn,skewX:xn,skewY:xn,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:Ja,originX:f0,originY:f0,originZ:oe},om={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,backgroundPositionX:oe,backgroundPositionY:oe,...w_,zIndex:_0,fillOpacity:Ja,strokeOpacity:Ja,numOctaves:_0},k_={...om,color:Qe,backgroundColor:Qe,outlineColor:Qe,fill:Qe,stroke:Qe,borderColor:Qe,borderTopColor:Qe,borderRightColor:Qe,borderBottomColor:Qe,borderLeftColor:Qe,filter:oh,WebkitFilter:oh},Wb=e=>k_[e];function Gb(e,t){let r=Wb(e);return r!==oh&&(r=Hn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const j_=new Set(["auto","none","0"]);function S_(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!j_.has(i)&&Xa(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=Gb(r,s)}class N_ extends im{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Qf(u))){const d=Bb(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Vb.has(n)||t.length!==2)return;const[s,i]=t,o=N0(s),l=N0(i);if(o!==l)if(w0(o)&&w0(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else ms[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||x_(t[s]))&&n.push(s);n.length&&S_(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ms[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=ms[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function __(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=(r==null?void 0:r[e])??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Kb=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Jb(e){return db(e)&&"offsetHeight"in e}const C0=30,C_=e=>!isNaN(parseFloat(e));class T_{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const s=Ut.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Ut.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=C_(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Gf);const n=this.events[t].add(r);return t==="change"?()=>{n(),Le.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ut.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>C0)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,C0);return fb(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vi(e,t){return new T_(e,t)}const{schedule:lm}=Sb(queueMicrotask,!1),br={x:!1,y:!1};function Xb(){return br.x||br.y}function E_(e){return e==="x"||e==="y"?br[e]?null:(br[e]=!0,()=>{br[e]=!1}):br.x||br.y?null:(br.x=br.y=!0,()=>{br.x=br.y=!1})}function Qb(e,t){const r=__(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function T0(e){return!(e.pointerType==="touch"||Xb())}function P_(e,t,r={}){const[n,s,i]=Qb(e,r),o=l=>{if(!T0(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{T0(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const Yb=(e,t)=>t?e===t?!0:Yb(e,t.parentElement):!1,cm=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,A_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function I_(e){return A_.has(e.tagName)||e.tabIndex!==-1}const hl=new WeakSet;function E0(e){return t=>{t.key==="Enter"&&e(t)}}function gu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const R_=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=E0(()=>{if(hl.has(r))return;gu(r,"down");const s=E0(()=>{gu(r,"up")}),i=()=>gu(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function P0(e){return cm(e)&&!Xb()}function D_(e,t,r={}){const[n,s,i]=Qb(e,r),o=l=>{const c=l.currentTarget;if(!P0(l))return;hl.add(c);const u=t(c,l),d=(f,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),hl.has(c)&&hl.delete(c),P0(f)&&typeof u=="function"&&u(f,{success:g})},h=f=>{d(f,c===window||c===document||r.useGlobalTarget||Yb(c,f.target))},m=f=>{d(f,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",m,s)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),Jb(l)&&(l.addEventListener("focus",u=>R_(u,s)),!I_(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Zb(e){return db(e)&&"ownerSVGElement"in e}function L_(e){return Zb(e)&&e.tagName==="svg"}const kt=e=>!!(e&&e.getVelocity),O_=[...qb,Qe,Hn],M_=e=>O_.find(Hb(e)),um=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function A0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function $_(...e){return t=>{let r=!1;const n=e.map(s=>{const i=A0(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():A0(e[s],null)}}}}function F_(...e){return w.useCallback($_(...e),e)}class z_ extends w.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=Jb(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function U_({children:e,isPresent:t,anchorX:r,root:n}){const s=w.useId(),i=w.useRef(null),o=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=w.useContext(um),c=F_(i,e==null?void 0:e.ref);return w.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:m,right:f}=o.current;if(t||!i.current||!u||!d)return;const g=r==="left"?`left: ${m}`:`right: ${f}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");l&&(v.nonce=l);const b=n??document.head;return b.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${g}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(v)&&b.removeChild(v)}},[t]),a.jsx(z_,{isPresent:t,childRef:i,sizeRef:o,children:w.cloneElement(e,{ref:c})})}const B_=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const u=Uf(V_),d=w.useId();let h=!0,m=w.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:f=>{u.set(f,!0);for(const g of u.values())if(!g)return;n&&n()},register:f=>(u.set(f,!1),()=>u.delete(f))}),[r,u,n]);return i&&h&&(m={...m}),w.useMemo(()=>{u.forEach((f,g)=>u.set(g,!1))},[r]),w.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(e=a.jsx(U_,{isPresent:r,anchorX:l,root:c,children:e})),a.jsx(jc.Provider,{value:m,children:e})};function V_(){return new Map}function ew(e=!0){const t=w.useContext(jc);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=w.useId();w.useEffect(()=>{if(e)return s(i)},[e]);const o=w.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const Vo=e=>e.key||"";function I0(e){const t=[];return w.Children.forEach(e,r=>{w.isValidElement(r)&&t.push(r)}),t}const Dr=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=ew(o),h=w.useMemo(()=>I0(e),[e]),m=o&&!u?[]:h.map(Vo),f=w.useRef(!0),g=w.useRef(h),v=Uf(()=>new Map),[b,y]=w.useState(h),[x,p]=w.useState(h);cb(()=>{f.current=!1,g.current=h;for(let N=0;N<x.length;N++){const C=Vo(x[N]);m.includes(C)?v.delete(C):v.get(C)!==!0&&v.set(C,!1)}},[x,m.length,m.join("-")]);const j=[];if(h!==b){let N=[...h];for(let C=0;C<x.length;C++){const E=x[C],D=Vo(E);m.includes(D)||(N.splice(C,0,E),j.push(E))}return i==="wait"&&j.length&&(N=j),p(I0(N)),y(h),null}const{forceRender:T}=w.useContext(zf);return a.jsx(a.Fragment,{children:x.map(N=>{const C=Vo(N),E=o&&!u?!1:h===x||m.includes(C),D=()=>{if(v.has(C))v.set(C,!0);else return;let R=!0;v.forEach(P=>{P||(R=!1)}),R&&(T==null||T(),p(g.current),o&&(d==null||d()),n&&n())};return a.jsx(B_,{isPresent:E,initial:!f.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:E?void 0:D,anchorX:l,children:N},C)})})},tw=w.createContext({strict:!1}),R0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bi={};for(const e in R0)bi[e]={isEnabled:t=>R0[e].some(r=>!!t[r])};function H_(e){for(const t in e)bi[t]={...bi[t],...e[t]}}const q_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||q_.has(e)}let rw=e=>!Jl(e);function W_(e){typeof e=="function"&&(rw=t=>t.startsWith("on")?!Jl(t):e(t))}try{W_(require("@emotion/is-prop-valid").default)}catch{}function G_(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(rw(s)||r===!0&&Jl(s)||!t&&!Jl(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const Sc=w.createContext({});function Nc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Qa(e){return typeof e=="string"||Array.isArray(e)}const dm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hm=["initial",...dm];function _c(e){return Nc(e.animate)||hm.some(t=>Qa(e[t]))}function nw(e){return!!(_c(e)||e.variants)}function K_(e,t){if(_c(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Qa(r)?r:void 0,animate:Qa(n)?n:void 0}}return e.inherit!==!1?t:{}}function J_(e){const{initial:t,animate:r}=K_(e,w.useContext(Sc));return w.useMemo(()=>({initial:t,animate:r}),[D0(t),D0(r)])}function D0(e){return Array.isArray(e)?e.join(" "):e}const Ya={};function X_(e){for(const t in e)Ya[t]=e[t],Xf(t)&&(Ya[t].isCSSVariable=!0)}function sw(e,{layout:t,layoutId:r}){return Ii.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Ya[e]||e==="opacity")}const Q_={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Y_=Ai.length;function Z_(e,t,r){let n="",s=!0;for(let i=0;i<Y_;i++){const o=Ai[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=Kb(l,om[o]);if(!c){s=!1;const d=Q_[o]||o;n+=`${d}(${u}) `}r&&(t[o]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function fm(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(Ii.has(c)){o=!0;continue}else if(Xf(c)){s[c]=u;continue}else{const d=Kb(u,om[c]);c.startsWith("origin")?(l=!0,i[c]=d):n[c]=d}}if(t.transform||(o||r?n.transform=Z_(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;n.transformOrigin=`${c} ${u} ${d}`}}const mm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iw(e,t,r){for(const n in t)!kt(t[n])&&!sw(n,r)&&(e[n]=t[n])}function eC({transformTemplate:e},t){return w.useMemo(()=>{const r=mm();return fm(r,t,e),Object.assign({},r.vars,r.style)},[t])}function tC(e,t){const r=e.style||{},n={};return iw(n,r,e),Object.assign(n,eC(e,t)),n}function rC(e,t){const r={},n=tC(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const nC={offset:"stroke-dashoffset",array:"stroke-dasharray"},sC={offset:"strokeDashoffset",array:"strokeDasharray"};function iC(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?nC:sC;e[i.offset]=oe.transform(-n);const o=oe.transform(t),l=oe.transform(r);e[i.array]=`${o} ${l}`}function aw(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...l},c,u,d){if(fm(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&iC(h,s,i,o,!1)}const ow=()=>({...mm(),attrs:{}}),lw=e=>typeof e=="string"&&e.toLowerCase()==="svg";function aC(e,t,r,n){const s=w.useMemo(()=>{const i=ow();return aw(i,t,lw(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};iw(i,e.style,e),s.style={...i,...s.style}}return s}const oC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pm(e){return typeof e!="string"||e.includes("-")?!1:!!(oC.indexOf(e)>-1||/[A-Z]/u.test(e))}function lC(e,t,r,{latestValues:n},s,i=!1){const l=(pm(e)?aC:rC)(t,n,s,e),c=G_(t,typeof e=="string",i),u=e!==w.Fragment?{...c,...l,ref:r}:{},{children:d}=t,h=w.useMemo(()=>kt(d)?d.get():d,[d]);return w.createElement(e,{...u,children:h})}function L0(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function gm(e,t,r,n){if(typeof t=="function"){const[s,i]=L0(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=L0(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function fl(e){return kt(e)?e.get():e}function cC({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:uC(r,n,s,e),renderState:t()}}function uC(e,t,r,n){const s={},i=n(e,{});for(const m in i)s[m]=fl(i[m]);let{initial:o,animate:l}=e;const c=_c(e),u=nw(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!Nc(h)){const m=Array.isArray(h)?h:[h];for(let f=0;f<m.length;f++){const g=gm(e,m[f]);if(g){const{transitionEnd:v,transition:b,...y}=g;for(const x in y){let p=y[x];if(Array.isArray(p)){const j=d?p.length-1:0;p=p[j]}p!==null&&(s[x]=p)}for(const x in v)s[x]=v[x]}}}return s}const cw=e=>(t,r)=>{const n=w.useContext(Sc),s=w.useContext(jc),i=()=>cC(e,t,n,s);return r?i():Uf(i)};function xm(e,t,r){var i;const{style:n}=e,s={};for(const o in n)(kt(n[o])||t.style&&kt(t.style[o])||sw(o,e)||((i=r==null?void 0:r.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=n[o]);return s}const dC=cw({scrapeMotionValuesFromProps:xm,createRenderState:mm});function uw(e,t,r){const n=xm(e,t,r);for(const s in e)if(kt(e[s])||kt(t[s])){const i=Ai.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const hC=cw({scrapeMotionValuesFromProps:uw,createRenderState:ow}),fC=Symbol.for("motionComponentSymbol");function Ys(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function mC(e,t,r){return w.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Ys(r)&&(r.current=n))},[t])}const ym=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pC="framerAppearId",dw="data-"+ym(pC),hw=w.createContext({});function gC(e,t,r,n,s){var v,b;const{visualElement:i}=w.useContext(Sc),o=w.useContext(tw),l=w.useContext(jc),c=w.useContext(um).reducedMotion,u=w.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:i,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=w.useContext(hw);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&xC(u.current,r,s,h);const m=w.useRef(!1);w.useInsertionEffect(()=>{d&&m.current&&d.update(r,l)});const f=r[dw],g=w.useRef(!!f&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,f))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,f)));return cb(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),w.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,f)}),g.current=!1),d.enteringChildren=void 0)}),d}function xC(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:fw(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&Ys(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function fw(e){if(e)return e.options.allowProjection!==!1?e.projection:fw(e.parent)}function xu(e,{forwardMotionProps:t=!1}={},r,n){r&&H_(r);const s=pm(e)?hC:dC;function i(l,c){let u;const d={...w.useContext(um),...l,layoutId:yC(l)},{isStatic:h}=d,m=J_(l),f=s(l,h);if(!h&&Bf){vC();const g=bC(d);u=g.MeasureLayout,m.visualElement=gC(e,f,d,n,g.ProjectionNode)}return a.jsxs(Sc.Provider,{value:m,children:[u&&m.visualElement?a.jsx(u,{visualElement:m.visualElement,...d}):null,lC(e,l,mC(f,m.visualElement,c),f,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=w.forwardRef(i);return o[fC]=e,o}function yC({layoutId:e}){const t=w.useContext(zf).id;return t&&e!==void 0?t+"-"+e:e}function vC(e,t){w.useContext(tw).strict}function bC(e){const{drag:t,layout:r}=bi;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function wC(e,t){if(typeof Proxy>"u")return xu;const r=new Map,n=(i,o)=>xu(i,o,e,t),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,xu(o,void 0,e,t)),r.get(o))})}function mw({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function kC({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function jC(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function yu(e){return e===void 0||e===1}function lh({scale:e,scaleX:t,scaleY:r}){return!yu(e)||!yu(t)||!yu(r)}function rs(e){return lh(e)||pw(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function pw(e){return O0(e.x)||O0(e.y)}function O0(e){return e&&e!=="0%"}function Xl(e,t,r){const n=e-r,s=t*n;return r+s}function M0(e,t,r,n,s){return s!==void 0&&(e=Xl(e,s,n)),Xl(e,r,n)+t}function ch(e,t=0,r=1,n,s){e.min=M0(e.min,t,r,n,s),e.max=M0(e.max,t,r,n,s)}function gw(e,{x:t,y:r}){ch(e.x,t.translate,t.scale,t.originPoint),ch(e.y,r.translate,r.scale,r.originPoint)}const $0=.999999999999,F0=1.0000000000001;function SC(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ei(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,gw(e,o)),n&&rs(i.latestValues)&&ei(e,i.latestValues))}t.x<F0&&t.x>$0&&(t.x=1),t.y<F0&&t.y>$0&&(t.y=1)}function Zs(e,t){e.min=e.min+t,e.max=e.max+t}function z0(e,t,r,n,s=.5){const i=Me(e.min,e.max,s);ch(e,t,r,i,n)}function ei(e,t){z0(e.x,t.x,t.scaleX,t.scale,t.originX),z0(e.y,t.y,t.scaleY,t.scale,t.originY)}function xw(e,t){return mw(jC(e.getBoundingClientRect(),t))}function NC(e,t,r){const n=xw(e,r),{scroll:s}=t;return s&&(Zs(n.x,s.offset.x),Zs(n.y,s.offset.y)),n}const U0=()=>({translate:0,scale:1,origin:0,originPoint:0}),ti=()=>({x:U0(),y:U0()}),B0=()=>({min:0,max:0}),qe=()=>({x:B0(),y:B0()}),uh={current:null},yw={current:!1};function _C(){if(yw.current=!0,!!Bf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>uh.current=e.matches;e.addEventListener("change",t),t()}else uh.current=!1}const CC=new WeakMap;function TC(e,t,r){for(const n in t){const s=t[n],i=r[n];if(kt(s))e.addValue(n,s);else if(kt(i))e.addValue(n,vi(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,vi(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const V0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class EC{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=im,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ut.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Le.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=_c(r),this.isVariantNode=nw(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in h){const f=h[m];c[m]!==void 0&&kt(f)&&f.set(c[m])}}mount(t){var r;this.current=t,CC.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),yw.current||_C(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uh.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Vn(this.notifyUpdate),Vn(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Ii.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Le.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in bi){const r=bi[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<V0.length;n++){const s=V0[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=TC(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=vi(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(ub(n)||hb(n))?n=parseFloat(n):!M_(n)&&Hn.test(r)&&(n=Gb(t,r)),this.setBaseTarget(t,kt(n)?n.get():n)),kt(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var i;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=gm(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);o&&(n=o[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!kt(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Gf),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){lm.render(this.render)}}class vw extends EC{constructor(){super(...arguments),this.KeyframeResolver=N_}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;kt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function bw(e,{style:t,vars:r},n,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function PC(e){return window.getComputedStyle(e)}class AC extends vw{constructor(){super(...arguments),this.type="html",this.renderInstance=bw}readValueFromInstance(t,r){var n;if(Ii.has(r))return(n=this.projection)!=null&&n.isProjecting?th(r):HN(t,r);{const s=PC(t),i=(Xf(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return xw(t,r)}build(t,r,n){fm(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return xm(t,r,n)}}const ww=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IC(e,t,r,n){bw(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(ww.has(s)?s:ym(s),t.attrs[s])}class RC extends vw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qe}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Ii.has(r)){const n=Wb(r);return n&&n.default||0}return r=ww.has(r)?r:ym(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return uw(t,r,n)}build(t,r,n){aw(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){IC(t,r,n,s)}mount(t){this.isSVGTag=lw(t.tagName),super.mount(t)}}const DC=(e,t)=>pm(e)?new RC(t):new AC(t,{allowProjection:e!==w.Fragment});function li(e,t,r){const n=e.getProps();return gm(n,t,r!==void 0?r:n.custom,e)}const dh=e=>Array.isArray(e);function LC(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,vi(r))}function OC(e){return dh(e)?e[e.length-1]||0:e}function MC(e,t){const r=li(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const l=OC(i[o]);LC(e,o,l)}}function $C(e){return!!(kt(e)&&e.add)}function hh(e,t){const r=e.getValue("willChange");if($C(r))return r.add(t);if(!r&&un.WillChange){const n=new un.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function kw(e){return e.props[dw]}const FC=e=>e!==null;function zC(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(FC),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const UC={type:"spring",stiffness:500,damping:25,restSpeed:10},BC=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),VC={type:"keyframes",duration:.8},HC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qC=(e,{keyframes:t})=>t.length>2?VC:Ii.has(e)?e.startsWith("scale")?BC(t[1]):UC:HC;function WC({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const vm=(e,t,r,n={},s,i)=>o=>{const l=am(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Vr(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};WC(l)||Object.assign(d,qC(e,d)),d.duration&&(d.duration=Vr(d.duration)),d.repeatDelay&&(d.repeatDelay=Vr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(ah(d),d.delay===0&&(h=!0)),(un.instantAnimations||un.skipAnimations)&&(h=!0,ah(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const m=zC(d.keyframes,l);if(m!==void 0){Le.update(()=>{d.onUpdate(m),d.onComplete()});return}}return l.isSync?new sm(d):new f_(d)};function GC({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function jw(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(i=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),m=l[d];if(m===void 0||u&&GC(u,d))continue;const f={delay:r,...am(i||{},d)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===g&&!f.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const y=kw(e);if(y){const x=window.MotionHandoffAnimation(y,d,Le);x!==null&&(f.startTime=x,v=!0)}}hh(e,d),h.start(vm(d,h,m,e.shouldReduceMotion&&Vb.has(d)?{type:!1}:f,e,v));const b=h.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{Le.update(()=>{o&&MC(e,o)})}),c}function Sw(e,t,r,n=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),o=e.size,l=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:l-i*n}function fh(e,t,r={}){var c;const n=li(e,t,r.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(jw(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=s;return KC(e,t,u,d,h,m,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(r.delay)])}function KC(e,t,r=0,n=0,s=0,i=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(fh(c,t,{...o,delay:r+(typeof n=="function"?0:n)+Sw(e.variantChildren,c,n,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function JC(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>fh(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=fh(e,t,r);else{const s=typeof t=="function"?li(e,t,r.custom):t;n=Promise.all(jw(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function Nw(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const XC=hm.length;function _w(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?_w(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<XC;r++){const n=hm[r],s=e.props[n];(Qa(s)||s===!1)&&(t[n]=s)}return t}const QC=[...dm].reverse(),YC=dm.length;function ZC(e){return t=>Promise.all(t.map(({animation:r,options:n})=>JC(e,r,n)))}function e4(e){let t=ZC(e),r=H0(),n=!0;const s=c=>(u,d)=>{var m;const h=li(e,d,c==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:f,transitionEnd:g,...v}=h;u={...u,...v,...g}}return u};function i(c){t=c(e)}function o(c){const{props:u}=e,d=_w(e.parent)||{},h=[],m=new Set;let f={},g=1/0;for(let b=0;b<YC;b++){const y=QC[b],x=r[y],p=u[y]!==void 0?u[y]:d[y],j=Qa(p),T=y===c?x.isActive:null;T===!1&&(g=b);let N=p===d[y]&&p!==u[y]&&j;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),x.protectedKeys={...f},!x.isActive&&T===null||!p&&!x.prevProp||Nc(p)||typeof p=="boolean")continue;const C=t4(x.prevProp,p);let E=C||y===c&&x.isActive&&!N&&j||b>g&&j,D=!1;const R=Array.isArray(p)?p:[p];let P=R.reduce(s(y),{});T===!1&&(P={});const{prevResolvedValues:O={}}=x,K={...O,...P},I=U=>{E=!0,m.has(U)&&(D=!0,m.delete(U)),x.needsAnimating[U]=!0;const A=e.getValue(U);A&&(A.liveStyle=!1)};for(const U in K){const A=P[U],B=O[U];if(f.hasOwnProperty(U))continue;let S=!1;dh(A)&&dh(B)?S=!Nw(A,B):S=A!==B,S?A!=null?I(U):m.add(U):A!==void 0&&m.has(U)?I(U):x.protectedKeys[U]=!0}x.prevProp=p,x.prevResolvedValues=P,x.isActive&&(f={...f,...P}),n&&e.blockInitialAnimation&&(E=!1);const M=N&&C;E&&(!M||D)&&h.push(...R.map(U=>{const A={type:y};if(typeof U=="string"&&n&&!M&&e.manuallyAnimateOnMount&&e.parent){const{parent:B}=e,S=li(B,U);if(B.enteringChildren&&S){const{delayChildren:te}=S.transition||{};A.delay=Sw(B.enteringChildren,e,te)}}return{animation:U,options:A}}))}if(m.size){const b={};if(typeof u.initial!="boolean"){const y=li(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(b.transition=y.transition)}m.forEach(y=>{const x=e.getBaseTarget(y),p=e.getValue(y);p&&(p.liveStyle=!0),b[y]=x??null}),h.push({animation:b})}let v=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),n=!1,v?t(h):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var f;return(f=m.animationState)==null?void 0:f.setActive(c,u)}),r[c].isActive=u;const d=o(c);for(const m in r)r[m].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=H0(),n=!0}}}function t4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Nw(t,e):!1}function Qn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function H0(){return{animate:Qn(!0),whileInView:Qn(),whileHover:Qn(),whileTap:Qn(),whileDrag:Qn(),whileFocus:Qn(),exit:Qn()}}class Kn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class r4 extends Kn{constructor(t){super(t),t.animationState||(t.animationState=e4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Nc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let n4=0;class s4 extends Kn{constructor(){super(...arguments),this.id=n4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const i4={animation:{Feature:r4},exit:{Feature:s4}};function Za(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function fo(e){return{point:{x:e.pageX,y:e.pageY}}}const a4=e=>t=>cm(t)&&e(t,fo(t));function va(e,t,r,n){return Za(e,t,a4(r),n)}const Cw=1e-4,o4=1-Cw,l4=1+Cw,Tw=.01,c4=0-Tw,u4=0+Tw;function Pt(e){return e.max-e.min}function d4(e,t,r){return Math.abs(e-t)<=r}function q0(e,t,r,n=.5){e.origin=n,e.originPoint=Me(t.min,t.max,e.origin),e.scale=Pt(r)/Pt(t),e.translate=Me(r.min,r.max,e.origin)-e.originPoint,(e.scale>=o4&&e.scale<=l4||isNaN(e.scale))&&(e.scale=1),(e.translate>=c4&&e.translate<=u4||isNaN(e.translate))&&(e.translate=0)}function ba(e,t,r,n){q0(e.x,t.x,r.x,n?n.originX:void 0),q0(e.y,t.y,r.y,n?n.originY:void 0)}function W0(e,t,r){e.min=r.min+t.min,e.max=e.min+Pt(t)}function h4(e,t,r){W0(e.x,t.x,r.x),W0(e.y,t.y,r.y)}function G0(e,t,r){e.min=t.min-r.min,e.max=e.min+Pt(t)}function wa(e,t,r){G0(e.x,t.x,r.x),G0(e.y,t.y,r.y)}function ar(e){return[e("x"),e("y")]}const Ew=({current:e})=>e?e.ownerDocument.defaultView:null,K0=(e,t)=>Math.abs(e-t);function f4(e,t){const r=K0(e.x,t.x),n=K0(e.y,t.y);return Math.sqrt(r**2+n**2)}class Pw{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=bu(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=f4(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!g)return;const{point:v}=m,{timestamp:b}=ht;this.history.push({...v,timestamp:b});const{onStart:y,onMove:x}=this.handlers;f||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=vu(f,this.transformPagePoint),Le.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=bu(m.type==="pointercancel"?this.lastMoveEventInfo:vu(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,y),v&&v(m,y)},!cm(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const l=fo(t),c=vu(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=ht;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(t,bu(c,this.history)),this.removeListeners=co(va(this.contextWindow,"pointermove",this.handlePointerMove),va(this.contextWindow,"pointerup",this.handlePointerUp),va(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Vn(this.updatePoint)}}function vu(e,t){return t?{point:t(e.point)}:e}function J0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function bu({point:e},t){return{point:e,delta:J0(e,Aw(t)),offset:J0(e,m4(t)),velocity:p4(t,.1)}}function m4(e){return e[0]}function Aw(e){return e[e.length-1]}function p4(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=Aw(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Vr(t)));)r--;if(!n)return{x:0,y:0};const i=hr(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function g4(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Me(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Me(r,e,n.max):Math.min(e,r)),e}function X0(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function x4(e,{top:t,left:r,bottom:n,right:s}){return{x:X0(e.x,r,s),y:X0(e.y,t,n)}}function Q0(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function y4(e,t){return{x:Q0(e.x,t.x),y:Q0(e.y,t.y)}}function v4(e,t){let r=.5;const n=Pt(e),s=Pt(t);return s>n?r=Ka(t.min,t.max-n,e.min):n>s&&(r=Ka(e.min,e.max-s,t.min)),cn(0,1,r)}function b4(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const mh=.35;function w4(e=mh){return e===!1?e=0:e===!0&&(e=mh),{x:Y0(e,"left","right"),y:Y0(e,"top","bottom")}}function Y0(e,t,r){return{min:Z0(e,t),max:Z0(e,r)}}function Z0(e,t){return typeof e=="number"?e:e[t]||0}const k4=new WeakMap;class j4{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(fo(h).point)},o=(h,m)=>{const{drag:f,dragPropagation:g,onDragStart:v}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=E_(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ar(y=>{let x=this.getAxisMotionValue(y).get()||0;if(Hr.test(x)){const{projection:p}=this.visualElement;if(p&&p.layout){const j=p.layout.layoutBox[y];j&&(x=Pt(j)*(parseFloat(x)/100))}}this.originPoint[y]=x}),v&&Le.postRender(()=>v(h,m)),hh(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:v,onDrag:b}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:y}=m;if(g&&this.currentDirection===null){this.currentDirection=S4(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,y),this.updateAxis("y",m.point,y),this.visualElement.render(),b&&b(h,m)},c=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>ar(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Pw(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:Ew(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Le.postRender(()=>l(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Ho(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=g4(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Ys(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=x4(n.layoutBox,t):this.constraints=!1,this.elastic=w4(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ar(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=b4(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Ys(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=NC(n,s.root,this.visualElement.getTransformPagePoint());let o=y4(s.layout.layoutBox,i);if(r){const l=r(kC(o));this.hasMutatedConstraints=!!l,l&&(o=mw(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=ar(d=>{if(!Ho(d,r,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const m=s?200:1e6,f=s?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return hh(this.visualElement,t),n.start(vm(t,n,0,r,this.visualElement,!1))}stopAnimation(){ar(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ar(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ar(r=>{const{drag:n}=this.getProps();if(!Ho(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r];i.set(t[r]-Me(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Ys(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ar(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=v4({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ar(o=>{if(!Ho(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Me(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;k4.set(this.visualElement,this);const t=this.visualElement.current,r=va(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Ys(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Le.read(n);const o=Za(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(ar(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=mh,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Ho(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function S4(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class N4 extends Kn{constructor(t){super(t),this.removeGroupControls=mr,this.removeListeners=mr,this.controls=new j4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mr}unmount(){this.removeGroupControls(),this.removeListeners()}}const eg=e=>(t,r)=>{e&&Le.postRender(()=>e(t,r))};class _4 extends Kn{constructor(){super(...arguments),this.removePointerDownListener=mr}onPointerDown(t){this.session=new Pw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ew(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:eg(t),onStart:eg(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Le.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=va(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ml={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Xi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const r=tg(e,t.target.x),n=tg(e,t.target.y);return`${r}% ${n}%`}},C4={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Hn.parse(e);if(s.length>5)return n;const i=Hn.createTransformer(e),o=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=Me(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let wu=!1;class T4 extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;X_(E4),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),wu&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ml.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,wu=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Le.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),lm.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;wu=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Iw(e){const[t,r]=ew(),n=w.useContext(zf);return a.jsx(T4,{...e,layoutGroup:n,switchLayoutGroup:w.useContext(hw),isPresent:t,safeToRemove:r})}const E4={borderRadius:{...Xi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xi,borderTopRightRadius:Xi,borderBottomLeftRadius:Xi,borderBottomRightRadius:Xi,boxShadow:C4};function P4(e,t,r){const n=kt(e)?e:vi(e);return n.start(vm("",n,t,r)),n.animation}const A4=(e,t)=>e.depth-t.depth;class I4{constructor(){this.children=[],this.isDirty=!1}add(t){Vf(this.children,t),this.isDirty=!0}remove(t){Hf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(A4),this.isDirty=!1,this.children.forEach(t)}}function R4(e,t){const r=Ut.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(Vn(n),e(i-t))};return Le.setup(n,!0),()=>Vn(n)}const Rw=["TopLeft","TopRight","BottomLeft","BottomRight"],D4=Rw.length,rg=e=>typeof e=="string"?parseFloat(e):e,ng=e=>typeof e=="number"||oe.test(e);function L4(e,t,r,n,s,i){s?(e.opacity=Me(0,r.opacity??1,O4(n)),e.opacityExit=Me(t.opacity??1,0,M4(n))):i&&(e.opacity=Me(t.opacity??1,r.opacity??1,n));for(let o=0;o<D4;o++){const l=`border${Rw[o]}Radius`;let c=sg(t,l),u=sg(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||ng(c)===ng(u)?(e[l]=Math.max(Me(rg(c),rg(u),n),0),(Hr.test(u)||Hr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Me(t.rotate||0,r.rotate||0,n))}function sg(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const O4=Dw(0,.5,bb),M4=Dw(.5,.95,mr);function Dw(e,t,r){return n=>n<e?0:n>t?1:r(Ka(e,t,n))}function ig(e,t){e.min=t.min,e.max=t.max}function sr(e,t){ig(e.x,t.x),ig(e.y,t.y)}function ag(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function og(e,t,r,n,s){return e-=t,e=Xl(e,1/r,n),s!==void 0&&(e=Xl(e,1/s,n)),e}function $4(e,t=0,r=1,n=.5,s,i=e,o=e){if(Hr.test(t)&&(t=parseFloat(t),t=Me(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Me(i.min,i.max,n);e===i&&(l-=t),e.min=og(e.min,t,r,l,s),e.max=og(e.max,t,r,l,s)}function lg(e,t,[r,n,s],i,o){$4(e,t[r],t[n],t[s],t.scale,i,o)}const F4=["x","scaleX","originX"],z4=["y","scaleY","originY"];function cg(e,t,r,n){lg(e.x,t,F4,r?r.x:void 0,n?n.x:void 0),lg(e.y,t,z4,r?r.y:void 0,n?n.y:void 0)}function ug(e){return e.translate===0&&e.scale===1}function Lw(e){return ug(e.x)&&ug(e.y)}function dg(e,t){return e.min===t.min&&e.max===t.max}function U4(e,t){return dg(e.x,t.x)&&dg(e.y,t.y)}function hg(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Ow(e,t){return hg(e.x,t.x)&&hg(e.y,t.y)}function fg(e){return Pt(e.x)/Pt(e.y)}function mg(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class B4{constructor(){this.members=[]}add(t){Vf(this.members,t),t.scheduleRender()}remove(t){if(Hf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function V4(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:f,skewY:g}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),m&&(n+=`rotateY(${m}deg) `),f&&(n+=`skewX(${f}deg) `),g&&(n+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const ku=["","X","Y","Z"],H4=1e3;let q4=0;function ju(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Mw(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=kw(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Le,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Mw(n)}function $w({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=q4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(K4),this.nodes.forEach(Y4),this.nodes.forEach(Z4),this.nodes.forEach(J4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new I4)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Gf),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Zb(o)&&!L_(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const m=()=>this.root.updateBlockedByResize=!1;Le.read(()=>{h=window.innerWidth}),e(o,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,d&&d(),d=R4(m,250),ml.hasAnimatedSinceResize&&(ml.hasAnimatedSinceResize=!1,this.nodes.forEach(xg)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||sT,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=u.getProps(),y=!this.targetLayout||!Ow(this.targetLayout,f),x=!h&&m;if(this.options.layoutRoot||this.resumeFrom||x||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const p={...am(g,"layout"),onPlay:v,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(p.delay=0,p.type=!1),this.startAnimation(p),this.setAnimationOrigin(d,x)}else h||xg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Vn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eT),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Mw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pg);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(gg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Q4),this.nodes.forEach(W4),this.nodes.forEach(G4)):this.nodes.forEach(gg),this.clearAllSnapshots();const l=Ut.now();ht.delta=cn(0,1e3/60,l-ht.timestamp),ht.timestamp=l,ht.isProcessing=!0,du.update.process(ht),du.preRender.process(ht),du.render.process(ht),ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(X4),this.sharedNodes.forEach(tT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pt(this.snapshot.measuredBox.x)&&!Pt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Lw(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||rs(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),iT(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return qe();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(aT))){const{scroll:d}=this.root;d&&(Zs(l.x,d.offset.x),Zs(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=qe();if(sr(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&sr(l,o),Zs(l.x,h.offset.x),Zs(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=qe();sr(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ei(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),rs(d.latestValues)&&ei(c,d.latestValues)}return rs(this.latestValues)&&ei(c,this.latestValues),c}removeTransform(o){const l=qe();sr(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!rs(u.latestValues))continue;lh(u.latestValues)&&u.updateSnapshot();const d=qe(),h=u.measurePageBox();sr(d,h),cg(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return rs(this.latestValues)&&cg(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=ht.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),wa(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qe(),this.targetWithTransforms=qe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),h4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sr(this.target,this.layout.layoutBox),gw(this.target,this.targetDelta)):sr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),wa(this.relativeTargetOrigin,this.target,f.target),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||lh(this.parent.latestValues)||pw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ht.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;sr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;SC(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=qe());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ag(this.prevProjectionDelta.x,this.projectionDelta.x),ag(this.prevProjectionDelta.y,this.projectionDelta.y)),ba(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!mg(this.projectionDelta.x,this.prevProjectionDelta.x)||!mg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ti(),this.projectionDelta=ti(),this.projectionDeltaWithTransform=ti()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=ti();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=qe(),f=c?c.source:void 0,g=this.layout?this.layout.source:void 0,v=f!==g,b=this.getStack(),y=!b||b.members.length<=1,x=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(nT));this.animationProgress=0;let p;this.mixTargetDelta=j=>{const T=j/1e3;yg(h.x,o.x,T),yg(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wa(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rT(this.relativeTarget,this.relativeTargetOrigin,m,T),p&&U4(this.relativeTarget,p)&&(this.isProjectionDirty=!1),p||(p=qe()),sr(p,this.relativeTarget)),v&&(this.animationValues=d,L4(d,u,this.latestValues,T,x,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Vn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Le.update(()=>{ml.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vi(0)),this.currentAnimation=P4(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(H4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Fw(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||qe();const h=Pt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=Pt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}sr(l,c),ei(l,d),ba(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new B4),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&ju("z",o,u,this.animationValues);for(let d=0;d<ku.length;d++)ju(`rotate${ku[d]}`,o,u,this.animationValues),ju(`skew${ku[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=fl(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=fl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!rs(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=V4(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:m,y:f}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${f.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Ya){if(d[g]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:y}=Ya[g],x=h==="none"?d[g]:v(d[g],u);if(b){const p=b.length;for(let j=0;j<p;j++)o[b[j]]=x}else y?this.options.visualElement.renderState.vars[g]=x:o[g]=x}this.options.layoutId&&(o.pointerEvents=u===this?fl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(pg),this.root.sharedNodes.clear()}}}function W4(e){e.updateLayout()}function G4(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?ar(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],f=Pt(m);m.min=n[h].min,m.max=m.min+f}):Fw(i,t.layoutBox,n)&&ar(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],f=Pt(n[h]);m.max=m.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+f)});const l=ti();ba(l,n,t.layoutBox);const c=ti();o?ba(c,e.applyTransform(s,!0),t.measuredBox):ba(c,n,t.layoutBox);const u=!Lw(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:f}=h;if(m&&f){const g=qe();wa(g,t.layoutBox,m.layoutBox);const v=qe();wa(v,n,f.layoutBox),Ow(g,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function K4(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function J4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function X4(e){e.clearSnapshot()}function pg(e){e.clearMeasurements()}function gg(e){e.isLayoutDirty=!1}function Q4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function xg(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Y4(e){e.resolveTargetDelta()}function Z4(e){e.calcProjection()}function eT(e){e.resetSkewAndRotation()}function tT(e){e.removeLeadSnapshot()}function yg(e,t,r){e.translate=Me(t.translate,0,r),e.scale=Me(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function vg(e,t,r,n){e.min=Me(t.min,r.min,n),e.max=Me(t.max,r.max,n)}function rT(e,t,r,n){vg(e.x,t.x,r.x,n),vg(e.y,t.y,r.y,n)}function nT(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const sT={duration:.45,ease:[.4,0,.1,1]},bg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),wg=bg("applewebkit/")&&!bg("chrome/")?Math.round:mr;function kg(e){e.min=wg(e.min),e.max=wg(e.max)}function iT(e){kg(e.x),kg(e.y)}function Fw(e,t,r){return e==="position"||e==="preserve-aspect"&&!d4(fg(t),fg(r),.2)}function aT(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const oT=$w({attachResizeListener:(e,t)=>Za(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Su={current:void 0},zw=$w({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Su.current){const e=new oT({});e.mount(window),e.setOptions({layoutScroll:!0}),Su.current=e}return Su.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lT={pan:{Feature:_4},drag:{Feature:N4,ProjectionNode:zw,MeasureLayout:Iw}};function jg(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Le.postRender(()=>i(t,fo(t)))}class cT extends Kn{mount(){const{current:t}=this.node;t&&(this.unmount=P_(t,(r,n)=>(jg(this.node,n,"Start"),s=>jg(this.node,s,"End"))))}unmount(){}}class uT extends Kn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=co(Za(this.node.current,"focus",()=>this.onFocus()),Za(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Sg(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Le.postRender(()=>i(t,fo(t)))}class dT extends Kn{mount(){const{current:t}=this.node;t&&(this.unmount=D_(t,(r,n)=>(Sg(this.node,n,"Start"),(s,{success:i})=>Sg(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ph=new WeakMap,Nu=new WeakMap,hT=e=>{const t=ph.get(e.target);t&&t(e)},fT=e=>{e.forEach(hT)};function mT({root:e,...t}){const r=e||document;Nu.has(r)||Nu.set(r,{});const n=Nu.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(fT,{root:e,...t})),n[s]}function pT(e,t,r){const n=mT(t);return ph.set(e,r),n.observe(e),()=>{ph.delete(e),n.unobserve(e)}}const gT={some:0,all:1};class xT extends Kn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:gT[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(c)};return pT(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(yT(t,r))&&this.startObserver()}unmount(){}}function yT({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const vT={inView:{Feature:xT},tap:{Feature:dT},focus:{Feature:uT},hover:{Feature:cT}},bT={layout:{ProjectionNode:zw,MeasureLayout:Iw}},wT={...i4,...vT,...lT,...bT},xe=wC(wT,DC);var kT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J=(e,t)=>{const r=w.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>w.createElement("svg",{ref:u,...kT,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${jT(e)}`,...c},[...t.map(([d,h])=>w.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},bm=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),tr=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),It=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ST=J("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),yn=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ql=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),NT=J("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),_T=J("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),CT=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),TT=J("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),gh=J("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),ET=J("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),pl=J("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ke=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ka=J("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),ss=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ur=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Et=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),xh=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),PT=J("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),AT=J("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]),qr=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),wm=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),mo=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),IT=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),km=J("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),RT=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),DT=J("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),Ge=J("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Yl=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),jm=J("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),Uw=J("GitPullRequest",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]),LT=J("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),OT=J("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),_u=J("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Sm=J("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),$r=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),gl=J("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),MT=J("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Bw=J("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),en=J("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),$T=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),FT=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ng=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),zT=J("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),UT=J("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),wi=J("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Zl=J("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),BT=J("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),VT=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),HT=J("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Nm=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Cr=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),qT=J("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),gs=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Vw=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),_g=J("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),WT=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),GT=J("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ki=J("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),eo=J("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Hw=J("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),KT=J("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Tn=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),JT=J("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),to=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),En=J("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),ks=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),XT=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),qw=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ww=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),_m=J("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),dn=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),pr=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zn=J("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function QT({isCompact:e}){const r=Kr().pathname.split("/").filter(s=>s),n={"strategic-directives":"Strategic Directives",prds:"PRDs",handoffs:"Handoffs",context:"Context Monitor",progress:"Progress Tracker"};return a.jsxs("nav",{className:`flex items-center ${e?"py-1 px-2":"py-2 px-4"}`,children:[a.jsxs(ql,{to:"/",className:"flex items-center text-purple-100 hover:text-white transition-colors drop-shadow-sm",children:[a.jsx(Sm,{className:e?"w-3 h-3":"w-4 h-4"}),a.jsx("span",{className:`${e?"ml-1 text-xs":"ml-2 text-sm"}`,children:"Dashboard"})]}),r.map((s,i)=>{const o=`/${r.slice(0,i+1).join("/")}`,l=i===r.length-1,c=n[s]||s;return a.jsxs(zr.Fragment,{children:[a.jsx(Et,{className:`${e?"w-3 h-3 mx-1":"w-4 h-4 mx-2"} text-purple-200`}),l?a.jsx("span",{className:`${e?"text-xs":"text-sm"} font-medium text-white drop-shadow-sm`,children:c}):a.jsx(ql,{to:o,className:`${e?"text-xs":"text-sm"} text-purple-100 hover:text-white transition-colors drop-shadow-sm`,children:c})]},s)})]})}function Cm({onRefresh:e,isCompact:t=!1,isCollapsed:r=!1}){const[n,s]=w.useState("idle"),[i,o]=w.useState(""),[l,c]=w.useState(null),u=async()=>{console.log(" Manual Refresh: Starting database sync..."),s("refreshing"),o("Syncing with database...");try{const f=await fetch("/api/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"database"})});if(!f.ok)throw new Error("Database refresh failed");const g=await f.json();console.log(" Database refreshed:",g),e&&(console.log(" Triggering UI refresh..."),await e()),s("complete"),o(`Refreshed: ${g.sds||0} SDs, ${g.prds||0} PRDs`),c(new Date),setTimeout(()=>{s("idle"),o("")},3e3)}catch(f){console.error(" Refresh Error:",f),s("error"),o(`Failed: ${f.message}`),setTimeout(()=>{s("idle"),o("")},5e3)}},d=()=>{switch(n){case"refreshing":return a.jsx(mo,{className:"w-4 h-4 animate-spin"});case"complete":return a.jsx(ke,{className:"w-4 h-4 text-green-500"});case"error":return a.jsx(tr,{className:"w-4 h-4 text-red-500"});default:return a.jsx(Cr,{className:"w-4 h-4"})}},h=()=>{switch(n){case"refreshing":return"bg-blue-500 hover:bg-blue-600";case"complete":return"bg-green-500 hover:bg-green-600";case"error":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-600 hover:bg-gray-700"}},m=n==="refreshing";return a.jsxs("div",{className:"relative flex items-center",children:[a.jsxs(xe.button,{onClick:u,disabled:m,className:`
          flex items-center ${r?"justify-center w-full":""} transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
          ${h()} text-white rounded hover:opacity-90
          ${r?"px-2 py-2":t?"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm":"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base"}
        `,whileHover:{scale:m?1:1.05},whileTap:{scale:m?1:.95},title:r?"Manual Refresh - Sync with database":"Manually sync with database (automatic real-time updates are active)",children:[d(),!r&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:`${t?"ml-1":"ml-1 sm:ml-2"} hidden xs:inline`,children:[n==="idle"&&"Manual Refresh",n==="refreshing"&&"Syncing...",n==="complete"&&"Synced!",n==="error"&&"Failed"]}),a.jsxs("span",{className:"xs:hidden ml-1",children:[n==="idle"&&"",n==="refreshing"&&"",n==="complete"&&"",n==="error"&&""]})]})]}),a.jsx(Dr,{children:i&&!r&&a.jsx(xe.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`
              absolute left-full ml-4 top-1/2 transform -translate-y-1/2
              text-sm px-3 py-1 rounded-lg whitespace-nowrap z-50
              ${n==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":n==="complete"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}
              ${t?"text-xs px-2 py-0.5":""}
            `,children:i})}),a.jsx(Dr,{children:r&&i&&a.jsxs(xe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`
              absolute left-full ml-2 top-1/2 transform -translate-y-1/2
              text-xs px-2 py-1 rounded-lg whitespace-nowrap z-50 pointer-events-none
              ${n==="error"?"bg-red-900 text-red-200":n==="complete"?"bg-green-900 text-green-200":"bg-blue-900 text-blue-200"}
            `,children:[n==="refreshing"&&"Syncing",n==="complete"&&"Done!",n==="error"&&"Error"]})}),l&&n==="idle"&&a.jsxs("div",{className:`absolute left-full ml-4 top-full mt-1 text-gray-500 dark:text-gray-400 whitespace-nowrap ${t?"text-xs":"text-sm"}`,children:["Last refresh: ",l.toLocaleTimeString()]}),a.jsx("div",{className:"absolute -top-1 -right-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-400 rounded-full animate-ping"})]})})]})}const Gw=({className:e=""})=>{const t=()=>{const c=localStorage.getItem("theme");return c?c==="dark":!0},[r,n]=w.useState(t),[s,i]=w.useState(!1);w.useLayoutEffect(()=>{const c=document.documentElement;r?(c.classList.add("dark"),c.classList.remove("light"),localStorage.setItem("theme","dark")):(c.classList.remove("dark"),c.classList.add("light"),localStorage.setItem("theme","light"))},[r]),w.useEffect(()=>{const c=setTimeout(()=>{const u=document.documentElement,d=localStorage.getItem("theme");d!=="light"?(u.classList.add("dark"),u.classList.remove("light"),d||localStorage.setItem("theme","dark"),n(!0)):(u.classList.remove("dark"),u.classList.add("light"),n(!1))},10);return()=>clearTimeout(c)},[]);const o=c=>{const u=document.documentElement;c?(u.classList.add("dark"),u.classList.remove("light"),localStorage.setItem("theme","dark")):(u.classList.remove("dark"),u.classList.add("light"),localStorage.setItem("theme","light"))},l=()=>{if(s)return;i(!0);const c=!r;n(c),o(c),setTimeout(()=>i(!1),300)};return a.jsxs("button",{onClick:l,className:`
        relative flex items-center justify-center
        w-12 h-6 rounded-full transition-all duration-300 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${r?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-600"}
        ${s?"scale-95":"hover:scale-105"}
        ${e}
      `,title:r?"Switch to light mode":"Switch to dark mode","aria-label":r?"Switch to light mode":"Switch to dark mode",disabled:s,children:[a.jsx("div",{className:`
        absolute inset-0 rounded-full transition-all duration-300
        ${r?"bg-gradient-to-r from-blue-600 to-blue-500":"bg-gradient-to-r from-gray-300 to-gray-200"}
      `}),a.jsxs("div",{className:`
        relative w-5 h-5 rounded-full transition-all duration-300 ease-in-out transform
        bg-white dark:bg-gray-100 shadow-lg
        flex items-center justify-center
        ${r?"translate-x-3":"-translate-x-3"}
        ${s?"scale-90":""}
      `,children:[a.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${r?"opacity-100":"opacity-0"}
        `,children:a.jsx(UT,{className:"w-3 h-3 text-blue-600 dark:text-blue-500"})}),a.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${r?"opacity-0":"opacity-100"}
        `,children:a.jsx(KT,{className:"w-3 h-3 text-yellow-500"})})]}),a.jsx("div",{className:`
        absolute inset-0 rounded-full opacity-0 transition-opacity duration-300
        ${r?"bg-blue-400 group-hover:opacity-20":"bg-yellow-400 group-hover:opacity-20"}
        pointer-events-none
      `})]})};function YT(){const[e,t]=w.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return w.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(prefers-reduced-motion: reduce)"),n=s=>{t(s.matches)};if(r.addEventListener)return r.addEventListener("change",n),()=>r.removeEventListener("change",n);if(r.addListener)return r.addListener(n),()=>r.removeListener(n)},[]),e}const ZT={normal:200},Kw={easeOut:[0,0,.2,1],spring:{type:"spring",stiffness:300,damping:30}},eE={slideUp:{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:ZT.normal/1e3,ease:Kw.easeOut}}},tE={container:{animate:{transition:{staggerChildren:.05,delayChildren:.1}}}},Cg=Kw.spring,rE=eE.slideUp,nE=tE.container;function sE({state:e,isConnected:t,isSidebarCollapsed:r,setIsSidebarCollapsed:n,isCompactMode:s,setIsCompactMode:i,isMobileMenuOpen:o,setIsMobileMenuOpen:l,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h,setActiveSD:m}){var T;const f=YT(),g=Kr(),v=[{path:"/",icon:Sm,label:"Strategic Directives",tooltip:"Home"},{path:"/backlog",icon:wi,label:"Backlog",tooltip:"Backlog"},{path:"/uat-tests",icon:PT,label:"UAT Tests",tooltip:"UAT"}],b={expanded:{width:"16rem",transition:f?{duration:0}:Cg},collapsed:{width:"4rem",transition:f?{duration:0}:Cg}},y={rest:{scale:1,transition:{duration:.2}},hover:{scale:f?1:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:f?1:.98}},x={hidden:{opacity:0,x:-10,transition:{duration:.1}},visible:{opacity:1,x:0,transition:{duration:.2,delay:.5}}},p=g.pathname==="/directive-lab",j=s?"p-2 pt-16 md:pt-2":p?"p-0":"p-6 pt-20 md:pt-6";return a.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 relative",children:[a.jsx(xe.button,{onClick:()=>l(!o),className:"mobile-menu-button fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg md:hidden",whileHover:{scale:f?1:1.05},whileTap:{scale:f?1:.95},children:a.jsx(Dr,{mode:"wait",children:o?a.jsx(xe.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:f?0:.2},children:a.jsx(pr,{className:"w-6 h-6"})},"close"):a.jsx(xe.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:f?0:.2},children:a.jsx(FT,{className:"w-6 h-6"})},"menu")})}),a.jsx(Dr,{children:o&&a.jsx(xe.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>l(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:f?0:.2}})}),a.jsxs(xe.div,{className:`
          fixed md:static inset-y-0 left-0 bg-gradient-to-br from-purple-600 via-purple-700 to-blue-800 shadow-2xl 
          z-50 flex flex-col overflow-hidden transition-transform duration-300 ease-in-out
          md:transform-none backdrop-blur-xl
          ${o?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,initial:!1,animate:r?"collapsed":"expanded",variants:b,children:[a.jsxs("div",{className:`${s?"p-2":"p-4"} border-b border-purple-400/30 backdrop-blur-sm relative overflow-hidden`,children:[a.jsx(xe.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:f?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:f?0:4,repeat:1/0,ease:"linear"}}),a.jsxs("div",{className:`flex items-center ${r?"justify-center":"justify-between"}`,children:[a.jsx(Dr,{children:!r&&a.jsx(xe.h1,{className:"text-xl font-bold text-white relative z-10 drop-shadow-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:f?0:.15},children:"LEO Protocol"})}),a.jsx(xe.button,{onClick:()=>n(!r),className:"hidden md:block p-1 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/10 relative z-10",title:r?"Expand sidebar":"Collapse sidebar",whileHover:{scale:f?1:1.1},whileTap:{scale:f?1:.9},children:a.jsx(xe.div,{animate:{rotate:r?0:180},transition:{duration:f?0:.15},children:a.jsx(Et,{className:"w-5 h-5"})})})]}),a.jsx(Dr,{children:!r&&a.jsxs(xe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:f?0:.15},children:[a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx(xe.div,{className:`w-2 h-2 rounded-full mr-2 ${t?"bg-green-500":"bg-red-500"}`,animate:{scale:t?[1,1.2,1]:1},transition:{duration:2,repeat:t?1/0:0,repeatType:"loop"}}),a.jsx("span",{className:"text-sm text-purple-100 relative z-10",children:t?"Connected":"Disconnected"})]}),a.jsxs(xe.span,{className:"text-xs px-2 py-1 bg-white/20 text-white rounded-full inline-block mt-2 backdrop-blur-sm border border-white/20 relative z-10 font-medium",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:["v",((T=e.leoProtocol)==null?void 0:T.version)||"detecting..."]})]})})]}),a.jsxs("nav",{className:`flex-1 ${s?"p-2":"p-4"} relative`,children:[a.jsx(xe.div,{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"20px 20px"},animate:{backgroundPosition:f?"0px 0px":["0px 0px","20px 20px","0px 0px"]},transition:{duration:f?0:20,repeat:1/0,ease:"linear"}}),a.jsx(xe.ul,{className:"space-y-1",variants:nE,initial:"hidden",animate:"visible",children:v.map(({path:N,icon:C,label:E,tooltip:D},R)=>a.jsx(xe.li,{variants:rE,custom:R,children:a.jsx(O2,{to:N,className:({isActive:P})=>`block ${P?"active-nav-item":""}`,onClick:()=>l(!1),children:({isActive:P})=>a.jsxs(xe.div,{className:`flex items-center ${s?"p-1.5":"p-2"} rounded-lg transition-all duration-300 group relative backdrop-blur-sm ${P?"bg-white/25 text-white border border-white/30 shadow-lg backdrop-blur-md":"hover:bg-white/10 text-purple-100 hover:text-white border border-transparent hover:border-white/20"}`,variants:y,initial:"rest",whileHover:"hover",whileTap:"tap",layout:!0,children:[P&&!f&&a.jsxs(a.Fragment,{children:[a.jsx(xe.div,{className:"absolute inset-0 rounded-lg bg-white/30 blur-xl",initial:{opacity:0,scale:.8},animate:{opacity:.6,scale:1},transition:{duration:.3}}),a.jsx(xe.div,{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400/40 to-blue-400/40",animate:{background:["linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))","linear-gradient(to right, rgba(59, 130, 246, 0.4), rgba(168, 85, 247, 0.4))","linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]}),a.jsx(C,{className:`${s?"w-4 h-4":"w-5 h-5"} ${r?"":"mr-3"} relative z-10`}),a.jsx(Dr,{children:!r&&a.jsx(xe.span,{className:`${s?"text-sm":""} relative z-10`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:f?0:.2},children:E})}),a.jsxs(xe.span,{className:`absolute ${r?"left-full ml-2 top-1/2 transform -translate-y-1/2":"bottom-full mb-2 left-1/2 transform -translate-x-1/2"} px-2 py-1 bg-gray-900/90 backdrop-blur-md text-white text-xs rounded whitespace-nowrap pointer-events-none z-30 opacity-0 group-hover:opacity-100 transition-all duration-200 delay-300 border border-white/20 shadow-xl`,style:{visibility:"hidden"},animate:{opacity:0,visibility:"hidden"},whileHover:{opacity:1,visibility:"visible"},children:[D,a.jsx("div",{className:`absolute ${r?"right-full top-1/2 transform -translate-y-1/2 border-l-0 border-r-4 border-r-gray-900 dark:border-r-gray-700 border-t-4 border-b-4 border-t-transparent border-b-transparent":"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900 dark:border-t-gray-700 border-l-4 border-r-4 border-l-transparent border-r-transparent border-b-0"}`})]})]})})},N))})]}),a.jsxs(xe.div,{className:`border-t border-purple-400/30 ${s?"p-2":"p-4"} relative backdrop-blur-sm`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[a.jsxs(xe.button,{onClick:()=>i(!s),className:`w-full flex items-center ${s?"p-1.5":"p-2"} rounded-lg hover:bg-white/10 text-purple-100 hover:text-white transition-all duration-300 group relative border border-transparent hover:border-white/20 backdrop-blur-sm`,title:s?"Standard view":"Compact view",whileHover:{scale:f?1:1.02},whileTap:{scale:f?1:.98},children:[a.jsx(xe.div,{animate:{rotate:s?180:0},transition:{duration:f?0:.15},children:a.jsx(zT,{className:`${s?"w-4 h-4":"w-5 h-5"} ${r?"":"mr-3"}`})}),a.jsx(Dr,{children:!r&&a.jsx(xe.span,{className:s?"text-sm":"",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?"Standard View":"Compact View"})}),a.jsx(Dr,{children:r&&a.jsx(xe.span,{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap pointer-events-none z-10",variants:x,initial:"hidden",whileHover:"visible",exit:"hidden",children:s?"Standard":"Compact"})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-purple-400/30",children:a.jsx(Cm,{onRefresh:h,isCompact:s,isCollapsed:r})})]})]}),a.jsxs(xe.div,{className:"flex-1 flex flex-col overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:f?0:.08},style:{paddingTop:"env(safe-area-inset-top)"},children:[a.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-600 via-purple-700 to-blue-800 border-b border-purple-400/30 shadow-lg relative overflow-hidden backdrop-blur-xl",children:[a.jsx(xe.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:f?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:f?0:4,repeat:1/0,ease:"linear"}}),a.jsx(xe.div,{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"40px 40px"},animate:{backgroundPosition:f?"0px 0px":["0px 0px","40px 40px","0px 0px"]},transition:{duration:f?0:15,repeat:1/0,ease:"linear"}}),a.jsx("div",{className:"flex-1 relative z-10",children:a.jsx(QT,{isCompact:s})}),a.jsx("div",{className:"flex items-center px-4 py-2 relative z-10",children:a.jsx(Gw,{})})]}),a.jsx("main",{className:`flex-1 overflow-y-auto ${j}`,children:a.jsx(Dr,{children:a.jsx(xe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:f?0:.1,ease:"easeOut"},children:a.jsx(j2,{context:{state:e,isCompactMode:s,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h}})},g.pathname)})})]})]})}function iE(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const aE=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,oE=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,lE={};function Tg(e,t){return(lE.jsx?oE:aE).test(e)}const cE=/[ \t\n\f\r]/g;function uE(e){return typeof e=="object"?e.type==="text"?Eg(e.value):!1:Eg(e)}function Eg(e){return e.replace(cE,"")===""}class po{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}}po.prototype.normal={};po.prototype.property={};po.prototype.space=void 0;function Jw(e,t){const r={},n={};for(const s of e)Object.assign(r,s.property),Object.assign(n,s.normal);return new po(r,n,t)}function yh(e){return e.toLowerCase()}class Wt{constructor(t,r){this.attribute=r,this.property=t}}Wt.prototype.attribute="";Wt.prototype.booleanish=!1;Wt.prototype.boolean=!1;Wt.prototype.commaOrSpaceSeparated=!1;Wt.prototype.commaSeparated=!1;Wt.prototype.defined=!1;Wt.prototype.mustUseProperty=!1;Wt.prototype.number=!1;Wt.prototype.overloadedBoolean=!1;Wt.prototype.property="";Wt.prototype.spaceSeparated=!1;Wt.prototype.space=void 0;let dE=0;const pe=Ns(),Je=Ns(),vh=Ns(),q=Ns(),Te=Ns(),ci=Ns(),Jt=Ns();function Ns(){return 2**++dE}const bh=Object.freeze(Object.defineProperty({__proto__:null,boolean:pe,booleanish:Je,commaOrSpaceSeparated:Jt,commaSeparated:ci,number:q,overloadedBoolean:vh,spaceSeparated:Te},Symbol.toStringTag,{value:"Module"})),Cu=Object.keys(bh);class Tm extends Wt{constructor(t,r,n,s){let i=-1;if(super(t,r),Pg(this,"space",s),typeof n=="number")for(;++i<Cu.length;){const o=Cu[i];Pg(this,Cu[i],(n&bh[o])===bh[o])}}}Tm.prototype.defined=!0;function Pg(e,t,r){r&&(e[t]=r)}function Ri(e){const t={},r={};for(const[n,s]of Object.entries(e.properties)){const i=new Tm(n,e.transform(e.attributes||{},n),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[yh(n)]=n,r[yh(i.attribute)]=n}return new po(t,r,e.space)}const Xw=Ri({properties:{ariaActiveDescendant:null,ariaAtomic:Je,ariaAutoComplete:null,ariaBusy:Je,ariaChecked:Je,ariaColCount:q,ariaColIndex:q,ariaColSpan:q,ariaControls:Te,ariaCurrent:null,ariaDescribedBy:Te,ariaDetails:null,ariaDisabled:Je,ariaDropEffect:Te,ariaErrorMessage:null,ariaExpanded:Je,ariaFlowTo:Te,ariaGrabbed:Je,ariaHasPopup:null,ariaHidden:Je,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Te,ariaLevel:q,ariaLive:null,ariaModal:Je,ariaMultiLine:Je,ariaMultiSelectable:Je,ariaOrientation:null,ariaOwns:Te,ariaPlaceholder:null,ariaPosInSet:q,ariaPressed:Je,ariaReadOnly:Je,ariaRelevant:null,ariaRequired:Je,ariaRoleDescription:Te,ariaRowCount:q,ariaRowIndex:q,ariaRowSpan:q,ariaSelected:Je,ariaSetSize:q,ariaSort:null,ariaValueMax:q,ariaValueMin:q,ariaValueNow:q,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Qw(e,t){return t in e?e[t]:t}function Yw(e,t){return Qw(e,t.toLowerCase())}const hE=Ri({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ci,acceptCharset:Te,accessKey:Te,action:null,allow:null,allowFullScreen:pe,allowPaymentRequest:pe,allowUserMedia:pe,alt:null,as:null,async:pe,autoCapitalize:null,autoComplete:Te,autoFocus:pe,autoPlay:pe,blocking:Te,capture:null,charSet:null,checked:pe,cite:null,className:Te,cols:q,colSpan:null,content:null,contentEditable:Je,controls:pe,controlsList:Te,coords:q|ci,crossOrigin:null,data:null,dateTime:null,decoding:null,default:pe,defer:pe,dir:null,dirName:null,disabled:pe,download:vh,draggable:Je,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:pe,formTarget:null,headers:Te,height:q,hidden:vh,high:q,href:null,hrefLang:null,htmlFor:Te,httpEquiv:Te,id:null,imageSizes:null,imageSrcSet:null,inert:pe,inputMode:null,integrity:null,is:null,isMap:pe,itemId:null,itemProp:Te,itemRef:Te,itemScope:pe,itemType:Te,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:pe,low:q,manifest:null,max:null,maxLength:q,media:null,method:null,min:null,minLength:q,multiple:pe,muted:pe,name:null,nonce:null,noModule:pe,noValidate:pe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:pe,optimum:q,pattern:null,ping:Te,placeholder:null,playsInline:pe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:pe,referrerPolicy:null,rel:Te,required:pe,reversed:pe,rows:q,rowSpan:q,sandbox:Te,scope:null,scoped:pe,seamless:pe,selected:pe,shadowRootClonable:pe,shadowRootDelegatesFocus:pe,shadowRootMode:null,shape:null,size:q,sizes:null,slot:null,span:q,spellCheck:Je,src:null,srcDoc:null,srcLang:null,srcSet:null,start:q,step:null,style:null,tabIndex:q,target:null,title:null,translate:null,type:null,typeMustMatch:pe,useMap:null,value:Je,width:q,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Te,axis:null,background:null,bgColor:null,border:q,borderColor:null,bottomMargin:q,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:pe,declare:pe,event:null,face:null,frame:null,frameBorder:null,hSpace:q,leftMargin:q,link:null,longDesc:null,lowSrc:null,marginHeight:q,marginWidth:q,noResize:pe,noHref:pe,noShade:pe,noWrap:pe,object:null,profile:null,prompt:null,rev:null,rightMargin:q,rules:null,scheme:null,scrolling:Je,standby:null,summary:null,text:null,topMargin:q,valueType:null,version:null,vAlign:null,vLink:null,vSpace:q,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:pe,disableRemotePlayback:pe,prefix:null,property:null,results:q,security:null,unselectable:null},space:"html",transform:Yw}),fE=Ri({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Jt,accentHeight:q,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:q,amplitude:q,arabicForm:null,ascent:q,attributeName:null,attributeType:null,azimuth:q,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:q,by:null,calcMode:null,capHeight:q,className:Te,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:q,diffuseConstant:q,direction:null,display:null,dur:null,divisor:q,dominantBaseline:null,download:pe,dx:null,dy:null,edgeMode:null,editable:null,elevation:q,enableBackground:null,end:null,event:null,exponent:q,externalResourcesRequired:null,fill:null,fillOpacity:q,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ci,g2:ci,glyphName:ci,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:q,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:q,horizOriginX:q,horizOriginY:q,id:null,ideographic:q,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:q,k:q,k1:q,k2:q,k3:q,k4:q,kernelMatrix:Jt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:q,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:q,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:q,overlineThickness:q,paintOrder:null,panose1:null,path:null,pathLength:q,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Te,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:q,pointsAtY:q,pointsAtZ:q,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Jt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Jt,rev:Jt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Jt,requiredFeatures:Jt,requiredFonts:Jt,requiredFormats:Jt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:q,specularExponent:q,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:q,strikethroughThickness:q,string:null,stroke:null,strokeDashArray:Jt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:q,strokeOpacity:q,strokeWidth:null,style:null,surfaceScale:q,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Jt,tabIndex:q,tableValues:null,target:null,targetX:q,targetY:q,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Jt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:q,underlineThickness:q,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:q,values:null,vAlphabetic:q,vMathematical:q,vectorEffect:null,vHanging:q,vIdeographic:q,version:null,vertAdvY:q,vertOriginX:q,vertOriginY:q,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:q,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Qw}),Zw=Ri({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),ek=Ri({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Yw}),tk=Ri({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),mE={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},pE=/[A-Z]/g,Ag=/-[a-z]/g,gE=/^data[-\w.:]+$/i;function xE(e,t){const r=yh(t);let n=t,s=Wt;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&gE.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Ag,vE);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Ag.test(i)){let o=i.replace(pE,yE);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=Tm}return new s(n,t)}function yE(e){return"-"+e.toLowerCase()}function vE(e){return e.charAt(1).toUpperCase()}const bE=Jw([Xw,hE,Zw,ek,tk],"html"),Em=Jw([Xw,fE,Zw,ek,tk],"svg");function wE(e){return e.join(" ").trim()}var Pm={},Ig=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,kE=/\n/g,jE=/^\s*/,SE=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,NE=/^:\s*/,_E=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,CE=/^[;\s]*/,TE=/^\s+|\s+$/g,EE=`
`,Rg="/",Dg="*",is="",PE="comment",AE="declaration",IE=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function s(g){var v=g.match(kE);v&&(r+=v.length);var b=g.lastIndexOf(EE);n=~b?g.length-b:n+g.length}function i(){var g={line:r,column:n};return function(v){return v.position=new o(g),u(),v}}function o(g){this.start=g,this.end={line:r,column:n},this.source=t.source}o.prototype.content=e;function l(g){var v=new Error(t.source+":"+r+":"+n+": "+g);if(v.reason=g,v.filename=t.source,v.line=r,v.column=n,v.source=e,!t.silent)throw v}function c(g){var v=g.exec(e);if(v){var b=v[0];return s(b),e=e.slice(b.length),v}}function u(){c(jE)}function d(g){var v;for(g=g||[];v=h();)v!==!1&&g.push(v);return g}function h(){var g=i();if(!(Rg!=e.charAt(0)||Dg!=e.charAt(1))){for(var v=2;is!=e.charAt(v)&&(Dg!=e.charAt(v)||Rg!=e.charAt(v+1));)++v;if(v+=2,is===e.charAt(v-1))return l("End of comment missing");var b=e.slice(2,v-2);return n+=2,s(b),e=e.slice(v),n+=2,g({type:PE,comment:b})}}function m(){var g=i(),v=c(SE);if(v){if(h(),!c(NE))return l("property missing ':'");var b=c(_E),y=g({type:AE,property:Lg(v[0].replace(Ig,is)),value:b?Lg(b[0].replace(Ig,is)):is});return c(CE),y}}function f(){var g=[];d(g);for(var v;v=m();)v!==!1&&(g.push(v),d(g));return g}return u(),f()};function Lg(e){return e?e.replace(TE,is):is}var RE=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.default=LE;var DE=RE(IE);function LE(e,t){var r=null;if(!e||typeof e!="string")return r;var n=(0,DE.default)(e),s=typeof t=="function";return n.forEach(function(i){if(i.type==="declaration"){var o=i.property,l=i.value;s?t(o,l,i):l&&(r=r||{},r[o]=l)}}),r}var Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.camelCase=void 0;var OE=/^--[a-zA-Z0-9_-]+$/,ME=/-([a-z])/g,$E=/^[^-]+$/,FE=/^-(webkit|moz|ms|o|khtml)-/,zE=/^-(ms)-/,UE=function(e){return!e||$E.test(e)||OE.test(e)},BE=function(e,t){return t.toUpperCase()},Og=function(e,t){return"".concat(t,"-")},VE=function(e,t){return t===void 0&&(t={}),UE(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(zE,Og):e=e.replace(FE,Og),e.replace(ME,BE))};Cc.camelCase=VE;var HE=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},qE=HE(Pm),WE=Cc;function wh(e,t){var r={};return!e||typeof e!="string"||(0,qE.default)(e,function(n,s){n&&s&&(r[(0,WE.camelCase)(n,t)]=s)}),r}wh.default=wh;var GE=wh;const KE=Uh(GE),rk=nk("end"),Am=nk("start");function nk(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function JE(e){const t=Am(e),r=rk(e);if(t&&r)return{start:t,end:r}}function ja(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Mg(e.position):"start"in e||"end"in e?Mg(e):"line"in e||"column"in e?kh(e):""}function kh(e){return $g(e&&e.line)+":"+$g(e&&e.column)}function Mg(e){return kh(e&&e.start)+"-"+kh(e&&e.end)}function $g(e){return e&&typeof e=="number"?e:1}class Nt extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let s="",i={},o=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?s=t:!i.cause&&t&&(o=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof n=="string"){const c=n.indexOf(":");c===-1?i.ruleId=n:(i.source=n.slice(0,c),i.ruleId=n.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=ja(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Nt.prototype.file="";Nt.prototype.name="";Nt.prototype.reason="";Nt.prototype.message="";Nt.prototype.stack="";Nt.prototype.column=void 0;Nt.prototype.line=void 0;Nt.prototype.ancestors=void 0;Nt.prototype.cause=void 0;Nt.prototype.fatal=void 0;Nt.prototype.place=void 0;Nt.prototype.ruleId=void 0;Nt.prototype.source=void 0;const Im={}.hasOwnProperty,XE=new Map,QE=/[A-Z]/g,YE=new Set(["table","tbody","thead","tfoot","tr"]),ZE=new Set(["td","th"]),sk="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function eP(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=lP(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=oP(r,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Em:bE,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=ik(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function ik(e,t,r){if(t.type==="element")return tP(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return rP(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return sP(e,t,r);if(t.type==="mdxjsEsm")return nP(e,t);if(t.type==="root")return iP(e,t,r);if(t.type==="text")return aP(e,t)}function tP(e,t,r){const n=e.schema;let s=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(s=Em,e.schema=s),e.ancestors.push(t);const i=ok(e,t.tagName,!1),o=cP(e,t);let l=Dm(e,t);return YE.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!uE(c):!0})),ak(e,o,i,t),Rm(o,l),e.ancestors.pop(),e.schema=n,e.create(t,i,o,r)}function rP(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}ro(e,t.position)}function nP(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ro(e,t.position)}function sP(e,t,r){const n=e.schema;let s=n;t.name==="svg"&&n.space==="html"&&(s=Em,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:ok(e,t.name,!0),o=uP(e,t),l=Dm(e,t);return ak(e,o,i,t),Rm(o,l),e.ancestors.pop(),e.schema=n,e.create(t,i,o,r)}function iP(e,t,r){const n={};return Rm(n,Dm(e,t)),e.create(t,e.Fragment,n,r)}function aP(e,t){return t.value}function ak(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function Rm(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function oP(e,t,r){return n;function n(s,i,o,l){const u=Array.isArray(o.children)?r:t;return l?u(i,o,l):u(i,o)}}function lP(e,t){return r;function r(n,s,i,o){const l=Array.isArray(i.children),c=Am(n);return t(s,i,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function cP(e,t){const r={};let n,s;for(s in t.properties)if(s!=="children"&&Im.call(t.properties,s)){const i=dP(e,s,t.properties[s]);if(i){const[o,l]=i;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&ZE.has(t.tagName)?n=l:r[o]=l}}if(n){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function uP(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const i=n.data.estree.body[0];i.type;const o=i.expression;o.type;const l=o.properties[0];l.type,Object.assign(r,e.evaluater.evaluateExpression(l.argument))}else ro(e,t.position);else{const s=n.name;let i;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const l=n.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else ro(e,t.position);else i=n.value===null?!0:n.value;r[s]=i}return r}function Dm(e,t){const r=[];let n=-1;const s=e.passKeys?new Map:XE;for(;++n<t.children.length;){const i=t.children[n];let o;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;o=c+"-"+u,s.set(c,u+1)}}const l=ik(e,i,o);l!==void 0&&r.push(l)}return r}function dP(e,t,r){const n=xE(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?iE(r):wE(r)),n.property==="style"){let s=typeof r=="object"?r:hP(e,String(r));return e.stylePropertyNameCase==="css"&&(s=fP(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&n.space?mE[n.property]||n.property:n.attribute,r]}}function hP(e,t){try{return KE(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,s=new Nt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=sk+"#cannot-parse-style-attribute",s}}function ok(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,o;for(;++i<s.length;){const l=Tg(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}n=o}else n=Tg(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const s=n.value;return Im.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(n);ro(e)}function ro(e,t){const r=new Nt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=sk+"#cannot-handle-mdx-estrees-without-createevaluater",r}function fP(e){const t={};let r;for(r in e)Im.call(e,r)&&(t[mP(r)]=e[r]);return t}function mP(e){let t=e.replace(QE,pP);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function pP(e){return"-"+e.toLowerCase()}const Tu={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},gP={};function xP(e,t){const r=gP,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,s=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return lk(e,n,s)}function lk(e,t,r){if(yP(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Fg(e.children,t,r)}return Array.isArray(e)?Fg(e,t,r):""}function Fg(e,t,r){const n=[];let s=-1;for(;++s<e.length;)n[s]=lk(e[s],t,r);return n.join("")}function yP(e){return!!(e&&typeof e=="object")}const zg=document.createElement("i");function Lm(e){const t="&"+e+";";zg.innerHTML=t;const r=zg.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Wr(e,t,r,n){const s=e.length;let i=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(t,r),e.splice(...o);else for(r&&e.splice(t,r);i<n.length;)o=n.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function cr(e,t){return e.length>0?(Wr(e,e.length,0,t),e):t}const Ug={}.hasOwnProperty;function vP(e){const t={};let r=-1;for(;++r<e.length;)bP(t,e[r]);return t}function bP(e,t){let r;for(r in t){const s=(Ug.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let o;if(i)for(o in i){Ug.call(s,o)||(s[o]=[]);const l=i[o];wP(s[o],Array.isArray(l)?l:l?[l]:[])}}}function wP(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Wr(e,0,0,n)}function ck(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function ui(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Fr=Jn(/[A-Za-z]/),Yt=Jn(/[\dA-Za-z]/),kP=Jn(/[#-'*+\--9=?A-Z^-~]/);function jh(e){return e!==null&&(e<32||e===127)}const Sh=Jn(/\d/),jP=Jn(/[\dA-Fa-f]/),SP=Jn(/[!-/:-@[-`{-~]/);function ce(e){return e!==null&&e<-2}function qt(e){return e!==null&&(e<0||e===32)}function Se(e){return e===-2||e===-1||e===32}const NP=Jn(new RegExp("\\p{P}|\\p{S}","u")),_P=Jn(/\s/);function Jn(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Di(e){const t=[];let r=-1,n=0,s=0;for(;++r<e.length;){const i=e.charCodeAt(r);let o="";if(i===37&&Yt(e.charCodeAt(r+1))&&Yt(e.charCodeAt(r+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(r+1);i<56320&&l>56319&&l<57344?(o=String.fromCharCode(i,l),s=1):o=""}else o=String.fromCharCode(i);o&&(t.push(e.slice(n,r),encodeURIComponent(o)),n=r+s+1,o=""),s&&(r+=s,s=0)}return t.join("")+e.slice(n)}function Pe(e,t,r,n){const s=n?n-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return Se(c)?(e.enter(r),l(c)):t(c)}function l(c){return Se(c)&&i++<s?(e.consume(c),l):(e.exit(r),t(c))}}const CP={tokenize:TP};function TP(e){const t=e.attempt(this.parser.constructs.contentInitial,n,s);let r;return t;function n(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Pe(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=c),r=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return ce(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),o)}}const EP={tokenize:PP},Bg={tokenize:AP};function PP(e){const t=this,r=[];let n=0,s,i,o;return l;function l(p){if(n<r.length){const j=r[n];return t.containerState=j[1],e.attempt(j[0].continuation,c,u)(p)}return u(p)}function c(p){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&x();const j=t.events.length;let T=j,N;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){N=t.events[T][1].end;break}y(n);let C=j;for(;C<t.events.length;)t.events[C][1].end={...N},C++;return Wr(t.events,T+1,0,t.events.slice(j)),t.events.length=C,u(p)}return l(p)}function u(p){if(n===r.length){if(!s)return m(p);if(s.currentConstruct&&s.currentConstruct.concrete)return g(p);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Bg,d,h)(p)}function d(p){return s&&x(),y(n),m(p)}function h(p){return t.parser.lazy[t.now().line]=n!==r.length,o=t.now().offset,g(p)}function m(p){return t.containerState={},e.attempt(Bg,f,g)(p)}function f(p){return n++,r.push([t.currentConstruct,t.containerState]),m(p)}function g(p){if(p===null){s&&x(),y(0),e.consume(p);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),v(p)}function v(p){if(p===null){b(e.exit("chunkFlow"),!0),y(0),e.consume(p);return}return ce(p)?(e.consume(p),b(e.exit("chunkFlow")),n=0,t.interrupt=void 0,l):(e.consume(p),v)}function b(p,j){const T=t.sliceStream(p);if(j&&T.push(null),p.previous=i,i&&(i.next=p),i=p,s.defineSkip(p.start),s.write(T),t.parser.lazy[p.start.line]){let N=s.events.length;for(;N--;)if(s.events[N][1].start.offset<o&&(!s.events[N][1].end||s.events[N][1].end.offset>o))return;const C=t.events.length;let E=C,D,R;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){if(D){R=t.events[E][1].end;break}D=!0}for(y(n),N=C;N<t.events.length;)t.events[N][1].end={...R},N++;Wr(t.events,E+1,0,t.events.slice(C)),t.events.length=N}}function y(p){let j=r.length;for(;j-- >p;){const T=r[j];t.containerState=T[1],T[0].exit.call(t,e)}r.length=p}function x(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function AP(e,t,r){return Pe(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Vg(e){if(e===null||qt(e)||_P(e))return 1;if(NP(e))return 2}function Om(e,t,r){const n=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!n.includes(i)&&(t=i(t,r),n.push(i))}return t}const Nh={name:"attention",resolveAll:IP,tokenize:RP};function IP(e,t){let r=-1,n,s,i,o,l,c,u,d;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;c=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const h={...e[n][1].end},m={...e[r][1].start};Hg(h,-c),Hg(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[n][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:m},i={type:c>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[n][1].end={...o.start},e[r][1].start={...l.end},u=[],e[n][1].end.offset-e[n][1].start.offset&&(u=cr(u,[["enter",e[n][1],t],["exit",e[n][1],t]])),u=cr(u,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",i,t]]),u=cr(u,Om(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),u=cr(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[r][1].end.offset-e[r][1].start.offset?(d=2,u=cr(u,[["enter",e[r][1],t],["exit",e[r][1],t]])):d=0,Wr(e,n-1,r-n+3,u),r=n+u.length-d-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function RP(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,s=Vg(n);let i;return o;function o(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),d=Vg(c),h=!d||d===2&&s||r.includes(c),m=!s||s===2&&d||r.includes(n);return u._open=!!(i===42?h:h&&(s||!m)),u._close=!!(i===42?m:m&&(d||!h)),t(c)}}function Hg(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const DP={name:"autolink",tokenize:LP};function LP(e,t,r){let n=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return Fr(f)?(e.consume(f),o):f===64?r(f):u(f)}function o(f){return f===43||f===45||f===46||Yt(f)?(n=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),n=0,c):(f===43||f===45||f===46||Yt(f))&&n++<32?(e.consume(f),l):(n=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||jh(f)?r(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),d):kP(f)?(e.consume(f),u):r(f)}function d(f){return Yt(f)?h(f):r(f)}function h(f){return f===46?(e.consume(f),n=0,d):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||Yt(f))&&n++<63){const g=f===45?m:h;return e.consume(f),g}return r(f)}}const Tc={partial:!0,tokenize:OP};function OP(e,t,r){return n;function n(i){return Se(i)?Pe(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||ce(i)?t(i):r(i)}}const uk={continuation:{tokenize:$P},exit:FP,name:"blockQuote",tokenize:MP};function MP(e,t,r){const n=this;return s;function s(o){if(o===62){const l=n.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return r(o)}function i(o){return Se(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function $P(e,t,r){const n=this;return s;function s(o){return Se(o)?Pe(e,i,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(uk,t,r)(o)}}function FP(e){e.exit("blockQuote")}const dk={name:"characterEscape",tokenize:zP};function zP(e,t,r){return n;function n(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return SP(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const hk={name:"characterReference",tokenize:UP};function UP(e,t,r){const n=this;let s=0,i,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,o=Yt,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=jP,d):(e.enter("characterReferenceValue"),i=7,o=Sh,d(h))}function d(h){if(h===59&&s){const m=e.exit("characterReferenceValue");return o===Yt&&!Lm(n.sliceSerialize(m))?r(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&s++<i?(e.consume(h),d):r(h)}}const qg={partial:!0,tokenize:VP},Wg={concrete:!0,name:"codeFenced",tokenize:BP};function BP(e,t,r){const n=this,s={partial:!0,tokenize:T};let i=0,o=0,l;return c;function c(N){return u(N)}function u(N){const C=n.events[n.events.length-1];return i=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,l=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(N)}function d(N){return N===l?(o++,e.consume(N),d):o<3?r(N):(e.exit("codeFencedFenceSequence"),Se(N)?Pe(e,h,"whitespace")(N):h(N))}function h(N){return N===null||ce(N)?(e.exit("codeFencedFence"),n.interrupt?t(N):e.check(qg,v,j)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||ce(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(N)):Se(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Pe(e,f,"whitespace")(N)):N===96&&N===l?r(N):(e.consume(N),m)}function f(N){return N===null||ce(N)?h(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(N))}function g(N){return N===null||ce(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(N)):N===96&&N===l?r(N):(e.consume(N),g)}function v(N){return e.attempt(s,j,b)(N)}function b(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),y}function y(N){return i>0&&Se(N)?Pe(e,x,"linePrefix",i+1)(N):x(N)}function x(N){return N===null||ce(N)?e.check(qg,v,j)(N):(e.enter("codeFlowValue"),p(N))}function p(N){return N===null||ce(N)?(e.exit("codeFlowValue"),x(N)):(e.consume(N),p)}function j(N){return e.exit("codeFenced"),t(N)}function T(N,C,E){let D=0;return R;function R(M){return N.enter("lineEnding"),N.consume(M),N.exit("lineEnding"),P}function P(M){return N.enter("codeFencedFence"),Se(M)?Pe(N,O,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):O(M)}function O(M){return M===l?(N.enter("codeFencedFenceSequence"),K(M)):E(M)}function K(M){return M===l?(D++,N.consume(M),K):D>=o?(N.exit("codeFencedFenceSequence"),Se(M)?Pe(N,I,"whitespace")(M):I(M)):E(M)}function I(M){return M===null||ce(M)?(N.exit("codeFencedFence"),C(M)):E(M)}}}function VP(e,t,r){const n=this;return s;function s(o){return o===null?r(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}const Eu={name:"codeIndented",tokenize:qP},HP={partial:!0,tokenize:WP};function qP(e,t,r){const n=this;return s;function s(u){return e.enter("codeIndented"),Pe(e,i,"linePrefix",5)(u)}function i(u){const d=n.events[n.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):r(u)}function o(u){return u===null?c(u):ce(u)?e.attempt(HP,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||ce(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function WP(e,t,r){const n=this;return s;function s(o){return n.parser.lazy[n.now().line]?r(o):ce(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Pe(e,i,"linePrefix",5)(o)}function i(o){const l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):ce(o)?s(o):r(o)}}const GP={name:"codeText",previous:JP,resolve:KP,tokenize:XP};function KP(e){let t=e.length-4,r=3,n,s;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)s===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(s=n):(n===t||e[n][1].type==="lineEnding")&&(e[s][1].type="codeTextData",n!==s+2&&(e[s][1].end=e[n-1][1].end,e.splice(s+2,n-s-2),t-=n-s-2,n=s+2),s=void 0);return e}function JP(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function XP(e,t,r){let n=0,s,i;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),n++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?r(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(i=e.enter("codeTextSequence"),s=0,d(h)):ce(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||ce(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),s++,d):s===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",u(h))}}class QP{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const s=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&Qi(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Qi(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Qi(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Qi(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Qi(this.left,r.reverse())}}}function Qi(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function fk(e){const t={};let r=-1,n,s,i,o,l,c,u;const d=new QP(e);for(;++r<d.length;){for(;r in t;)r=t[r];if(n=d.get(r),r&&n[1].type==="chunkFlow"&&d.get(r-1)[1].type==="listItemPrefix"&&(c=n[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,YP(d,r)),r=t[r],u=!0);else if(n[1]._container){for(i=r,s=void 0;i--;)if(o=d.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(n[1].end={...d.get(s)[1].start},l=d.slice(s,r),l.unshift(n),d.splice(s,r-s+1,l))}}return Wr(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function YP(e,t){const r=e.get(t)[1],n=e.get(t)[2];let s=t-1;const i=[];let o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,h,m=-1,f=r,g=0,v=0;const b=[v];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(d=n.sliceStream(f),f.next||d.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=r;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(v=m+1,b.push(v),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):b.pop(),m=b.length;m--;){const y=l.slice(b[m],b[m+1]),x=i.pop();c.push([x,x+y.length-1]),e.splice(x,2,y)}for(c.reverse(),m=-1;++m<c.length;)u[g+c[m][0]]=g+c[m][1],g+=c[m][1]-c[m][0]-1;return u}const ZP={resolve:t5,tokenize:r5},e5={partial:!0,tokenize:n5};function t5(e){return fk(e),e}function r5(e,t){let r;return n;function n(l){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):ce(l)?e.check(e5,o,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,s}}function n5(e,t,r){const n=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Pe(e,i,"linePrefix")}function i(o){if(o===null||ce(o))return r(o);const l=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(n.parser.constructs.flow,r,t)(o)}}function mk(e,t,r,n,s,i,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(y){return y===60?(e.enter(n),e.enter(s),e.enter(i),e.consume(y),e.exit(i),m):y===null||y===32||y===41||jh(y)?r(y):(e.enter(n),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function m(y){return y===62?(e.enter(i),e.consume(y),e.exit(i),e.exit(s),e.exit(n),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===62?(e.exit("chunkString"),e.exit(l),m(y)):y===null||y===60||ce(y)?r(y):(e.consume(y),y===92?g:f)}function g(y){return y===60||y===62||y===92?(e.consume(y),f):f(y)}function v(y){return!d&&(y===null||y===41||qt(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(n),t(y)):d<u&&y===40?(e.consume(y),d++,v):y===41?(e.consume(y),d--,v):y===null||y===32||y===40||jh(y)?r(y):(e.consume(y),y===92?b:v)}function b(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function pk(e,t,r,n,s,i){const o=this;let l=0,c;return u;function u(f){return e.enter(n),e.enter(s),e.consume(f),e.exit(s),e.enter(i),d}function d(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?r(f):f===93?(e.exit(i),e.enter(s),e.consume(f),e.exit(s),e.exit(n),t):ce(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||ce(f)||l++>999?(e.exit("chunkString"),d(f)):(e.consume(f),c||(c=!Se(f)),f===92?m:h)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,h):h(f)}}function gk(e,t,r,n,s,i){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(n),e.enter(s),e.consume(m),e.exit(s),o=m===40?41:m,c):r(m)}function c(m){return m===o?(e.enter(s),e.consume(m),e.exit(s),e.exit(n),t):(e.enter(i),u(m))}function u(m){return m===o?(e.exit(i),c(o)):m===null?r(m):ce(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Pe(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===o||m===null||ce(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?h:d)}function h(m){return m===o||m===92?(e.consume(m),d):d(m)}}function Sa(e,t){let r;return n;function n(s){return ce(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),r=!0,n):Se(s)?Pe(e,n,r?"linePrefix":"lineSuffix")(s):t(s)}}const s5={name:"definition",tokenize:a5},i5={partial:!0,tokenize:o5};function a5(e,t,r){const n=this;let s;return i;function i(f){return e.enter("definition"),o(f)}function o(f){return pk.call(n,e,l,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=ui(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):r(f)}function c(f){return qt(f)?Sa(e,u)(f):u(f)}function u(f){return mk(e,d,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return e.attempt(i5,h,h)(f)}function h(f){return Se(f)?Pe(e,m,"whitespace")(f):m(f)}function m(f){return f===null||ce(f)?(e.exit("definition"),n.parser.defined.push(s),t(f)):r(f)}}function o5(e,t,r){return n;function n(l){return qt(l)?Sa(e,s)(l):r(l)}function s(l){return gk(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return Se(l)?Pe(e,o,"whitespace")(l):o(l)}function o(l){return l===null||ce(l)?t(l):r(l)}}const l5={name:"hardBreakEscape",tokenize:c5};function c5(e,t,r){return n;function n(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return ce(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const u5={name:"headingAtx",resolve:d5,tokenize:h5};function d5(e,t){let r=e.length-2,n=3,s,i;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(s={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},i={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Wr(e,n,r-n+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function h5(e,t,r){let n=0;return s;function s(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&n++<6?(e.consume(d),o):d===null||qt(d)?(e.exit("atxHeadingSequence"),l(d)):r(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||ce(d)?(e.exit("atxHeading"),t(d)):Se(d)?Pe(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||qt(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const f5=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Gg=["pre","script","style","textarea"],m5={concrete:!0,name:"htmlFlow",resolveTo:x5,tokenize:y5},p5={partial:!0,tokenize:b5},g5={partial:!0,tokenize:v5};function x5(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function y5(e,t,r){const n=this;let s,i,o,l,c;return u;function u(_){return d(_)}function d(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),h}function h(_){return _===33?(e.consume(_),m):_===47?(e.consume(_),i=!0,v):_===63?(e.consume(_),s=3,n.interrupt?t:S):Fr(_)?(e.consume(_),o=String.fromCharCode(_),b):r(_)}function m(_){return _===45?(e.consume(_),s=2,f):_===91?(e.consume(_),s=5,l=0,g):Fr(_)?(e.consume(_),s=4,n.interrupt?t:S):r(_)}function f(_){return _===45?(e.consume(_),n.interrupt?t:S):r(_)}function g(_){const Ne="CDATA[";return _===Ne.charCodeAt(l++)?(e.consume(_),l===Ne.length?n.interrupt?t:O:g):r(_)}function v(_){return Fr(_)?(e.consume(_),o=String.fromCharCode(_),b):r(_)}function b(_){if(_===null||_===47||_===62||qt(_)){const Ne=_===47,at=o.toLowerCase();return!Ne&&!i&&Gg.includes(at)?(s=1,n.interrupt?t(_):O(_)):f5.includes(o.toLowerCase())?(s=6,Ne?(e.consume(_),y):n.interrupt?t(_):O(_)):(s=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(_):i?x(_):p(_))}return _===45||Yt(_)?(e.consume(_),o+=String.fromCharCode(_),b):r(_)}function y(_){return _===62?(e.consume(_),n.interrupt?t:O):r(_)}function x(_){return Se(_)?(e.consume(_),x):R(_)}function p(_){return _===47?(e.consume(_),R):_===58||_===95||Fr(_)?(e.consume(_),j):Se(_)?(e.consume(_),p):R(_)}function j(_){return _===45||_===46||_===58||_===95||Yt(_)?(e.consume(_),j):T(_)}function T(_){return _===61?(e.consume(_),N):Se(_)?(e.consume(_),T):p(_)}function N(_){return _===null||_===60||_===61||_===62||_===96?r(_):_===34||_===39?(e.consume(_),c=_,C):Se(_)?(e.consume(_),N):E(_)}function C(_){return _===c?(e.consume(_),c=null,D):_===null||ce(_)?r(_):(e.consume(_),C)}function E(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||qt(_)?T(_):(e.consume(_),E)}function D(_){return _===47||_===62||Se(_)?p(_):r(_)}function R(_){return _===62?(e.consume(_),P):r(_)}function P(_){return _===null||ce(_)?O(_):Se(_)?(e.consume(_),P):r(_)}function O(_){return _===45&&s===2?(e.consume(_),W):_===60&&s===1?(e.consume(_),U):_===62&&s===4?(e.consume(_),te):_===63&&s===3?(e.consume(_),S):_===93&&s===5?(e.consume(_),B):ce(_)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(p5,le,K)(_)):_===null||ce(_)?(e.exit("htmlFlowData"),K(_)):(e.consume(_),O)}function K(_){return e.check(g5,I,le)(_)}function I(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),M}function M(_){return _===null||ce(_)?K(_):(e.enter("htmlFlowData"),O(_))}function W(_){return _===45?(e.consume(_),S):O(_)}function U(_){return _===47?(e.consume(_),o="",A):O(_)}function A(_){if(_===62){const Ne=o.toLowerCase();return Gg.includes(Ne)?(e.consume(_),te):O(_)}return Fr(_)&&o.length<8?(e.consume(_),o+=String.fromCharCode(_),A):O(_)}function B(_){return _===93?(e.consume(_),S):O(_)}function S(_){return _===62?(e.consume(_),te):_===45&&s===2?(e.consume(_),S):O(_)}function te(_){return _===null||ce(_)?(e.exit("htmlFlowData"),le(_)):(e.consume(_),te)}function le(_){return e.exit("htmlFlow"),t(_)}}function v5(e,t,r){const n=this;return s;function s(o){return ce(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):r(o)}function i(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}function b5(e,t,r){return n;function n(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Tc,t,r)}}const w5={name:"htmlText",tokenize:k5};function k5(e,t,r){const n=this;let s,i,o;return l;function l(S){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(S),c}function c(S){return S===33?(e.consume(S),u):S===47?(e.consume(S),T):S===63?(e.consume(S),p):Fr(S)?(e.consume(S),E):r(S)}function u(S){return S===45?(e.consume(S),d):S===91?(e.consume(S),i=0,g):Fr(S)?(e.consume(S),x):r(S)}function d(S){return S===45?(e.consume(S),f):r(S)}function h(S){return S===null?r(S):S===45?(e.consume(S),m):ce(S)?(o=h,U(S)):(e.consume(S),h)}function m(S){return S===45?(e.consume(S),f):h(S)}function f(S){return S===62?W(S):S===45?m(S):h(S)}function g(S){const te="CDATA[";return S===te.charCodeAt(i++)?(e.consume(S),i===te.length?v:g):r(S)}function v(S){return S===null?r(S):S===93?(e.consume(S),b):ce(S)?(o=v,U(S)):(e.consume(S),v)}function b(S){return S===93?(e.consume(S),y):v(S)}function y(S){return S===62?W(S):S===93?(e.consume(S),y):v(S)}function x(S){return S===null||S===62?W(S):ce(S)?(o=x,U(S)):(e.consume(S),x)}function p(S){return S===null?r(S):S===63?(e.consume(S),j):ce(S)?(o=p,U(S)):(e.consume(S),p)}function j(S){return S===62?W(S):p(S)}function T(S){return Fr(S)?(e.consume(S),N):r(S)}function N(S){return S===45||Yt(S)?(e.consume(S),N):C(S)}function C(S){return ce(S)?(o=C,U(S)):Se(S)?(e.consume(S),C):W(S)}function E(S){return S===45||Yt(S)?(e.consume(S),E):S===47||S===62||qt(S)?D(S):r(S)}function D(S){return S===47?(e.consume(S),W):S===58||S===95||Fr(S)?(e.consume(S),R):ce(S)?(o=D,U(S)):Se(S)?(e.consume(S),D):W(S)}function R(S){return S===45||S===46||S===58||S===95||Yt(S)?(e.consume(S),R):P(S)}function P(S){return S===61?(e.consume(S),O):ce(S)?(o=P,U(S)):Se(S)?(e.consume(S),P):D(S)}function O(S){return S===null||S===60||S===61||S===62||S===96?r(S):S===34||S===39?(e.consume(S),s=S,K):ce(S)?(o=O,U(S)):Se(S)?(e.consume(S),O):(e.consume(S),I)}function K(S){return S===s?(e.consume(S),s=void 0,M):S===null?r(S):ce(S)?(o=K,U(S)):(e.consume(S),K)}function I(S){return S===null||S===34||S===39||S===60||S===61||S===96?r(S):S===47||S===62||qt(S)?D(S):(e.consume(S),I)}function M(S){return S===47||S===62||qt(S)?D(S):r(S)}function W(S){return S===62?(e.consume(S),e.exit("htmlTextData"),e.exit("htmlText"),t):r(S)}function U(S){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),A}function A(S){return Se(S)?Pe(e,B,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):B(S)}function B(S){return e.enter("htmlTextData"),o(S)}}const Mm={name:"labelEnd",resolveAll:_5,resolveTo:C5,tokenize:T5},j5={tokenize:E5},S5={tokenize:P5},N5={tokenize:A5};function _5(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const s=n.type==="labelImage"?4:2;n.type="data",t+=s}}return e.length!==r.length&&Wr(e,0,e.length,r),e}function C5(e,t){let r=e.length,n=0,s,i,o,l;for(;r--;)if(s=e[r][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[r][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[r][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=r,s.type!=="labelLink")){n=2;break}}else s.type==="labelEnd"&&(o=r);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[i+n+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=cr(l,e.slice(i+1,i+n+3)),l=cr(l,[["enter",d,t]]),l=cr(l,Om(t.parser.constructs.insideSpan.null,e.slice(i+n+4,o-3),t)),l=cr(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=cr(l,e.slice(o+1)),l=cr(l,[["exit",c,t]]),Wr(e,i,e.length,l),e}function T5(e,t,r){const n=this;let s=n.events.length,i,o;for(;s--;)if((n.events[s][1].type==="labelImage"||n.events[s][1].type==="labelLink")&&!n.events[s][1]._balanced){i=n.events[s][1];break}return l;function l(m){return i?i._inactive?h(m):(o=n.parser.defined.includes(ui(n.sliceSerialize({start:i.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):r(m)}function c(m){return m===40?e.attempt(j5,d,o?d:h)(m):m===91?e.attempt(S5,d,o?u:h)(m):o?d(m):h(m)}function u(m){return e.attempt(N5,d,h)(m)}function d(m){return t(m)}function h(m){return i._balanced=!0,r(m)}}function E5(e,t,r){return n;function n(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return qt(h)?Sa(e,i)(h):i(h)}function i(h){return h===41?d(h):mk(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return qt(h)?Sa(e,c)(h):d(h)}function l(h){return r(h)}function c(h){return h===34||h===39||h===40?gk(e,u,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return qt(h)?Sa(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):r(h)}}function P5(e,t,r){const n=this;return s;function s(l){return pk.call(n,e,i,o,"reference","referenceMarker","referenceString")(l)}function i(l){return n.parser.defined.includes(ui(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(l):r(l)}function o(l){return r(l)}}function A5(e,t,r){return n;function n(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const I5={name:"labelStartImage",resolveAll:Mm.resolveAll,tokenize:R5};function R5(e,t,r){const n=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):r(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(l):t(l)}}const D5={name:"labelStartLink",resolveAll:Mm.resolveAll,tokenize:L5};function L5(e,t,r){const n=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):t(o)}}const Pu={name:"lineEnding",tokenize:O5};function O5(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Pe(e,t,"linePrefix")}}const xl={name:"thematicBreak",tokenize:M5};function M5(e,t,r){let n=0,s;return i;function i(u){return e.enter("thematicBreak"),o(u)}function o(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):n>=3&&(u===null||ce(u))?(e.exit("thematicBreak"),t(u)):r(u)}function c(u){return u===s?(e.consume(u),n++,c):(e.exit("thematicBreakSequence"),Se(u)?Pe(e,l,"whitespace")(u):l(u))}}const Mt={continuation:{tokenize:U5},exit:V5,name:"list",tokenize:z5},$5={partial:!0,tokenize:H5},F5={partial:!0,tokenize:B5};function z5(e,t,r){const n=this,s=n.events[n.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(f){const g=n.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!n.containerState.marker||f===n.containerState.marker:Sh(f)){if(n.containerState.type||(n.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(xl,r,u)(f):u(f);if(!n.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return r(f)}function c(f){return Sh(f)&&++o<10?(e.consume(f),c):(!n.interrupt||o<2)&&(n.containerState.marker?f===n.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):r(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||f,e.check(Tc,n.interrupt?r:d,e.attempt($5,m,h))}function d(f){return n.containerState.initialBlankLine=!0,i++,m(f)}function h(f){return Se(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):r(f)}function m(f){return n.containerState.size=i+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function U5(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(Tc,s,i);function s(l){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Pe(e,t,"listItemIndent",n.containerState.size+1)(l)}function i(l){return n.containerState.furtherBlankLines||!Se(l)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(l)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(F5,t,o)(l))}function o(l){return n.containerState._closeFlow=!0,n.interrupt=void 0,Pe(e,e.attempt(Mt,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function B5(e,t,r){const n=this;return Pe(e,s,"listItemIndent",n.containerState.size+1);function s(i){const o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?t(i):r(i)}}function V5(e){e.exit(this.containerState.type)}function H5(e,t,r){const n=this;return Pe(e,s,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=n.events[n.events.length-1];return!Se(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const Kg={name:"setextUnderline",resolveTo:q5,tokenize:W5};function q5(e,t){let r=e.length,n,s,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(s=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const o={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=o,e.push(["exit",o,t]),e}function W5(e,t,r){const n=this;let s;return i;function i(u){let d=n.events.length,h;for(;d--;)if(n.events[d][1].type!=="lineEnding"&&n.events[d][1].type!=="linePrefix"&&n.events[d][1].type!=="content"){h=n.events[d][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||h)?(e.enter("setextHeadingLine"),s=u,o(u)):r(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Se(u)?Pe(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||ce(u)?(e.exit("setextHeadingLine"),t(u)):r(u)}}const G5={tokenize:K5};function K5(e){const t=this,r=e.attempt(Tc,n,e.attempt(this.parser.constructs.flowInitial,s,Pe(e,e.attempt(this.parser.constructs.flow,s,e.attempt(ZP,s)),"linePrefix")));return r;function n(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const J5={resolveAll:yk()},X5=xk("string"),Q5=xk("text");function xk(e){return{resolveAll:yk(e==="text"?Y5:void 0),tokenize:t};function t(r){const n=this,s=this.parser.constructs[e],i=r.attempt(s,o,l);return o;function o(d){return u(d)?i(d):l(d)}function l(d){if(d===null){r.consume(d);return}return r.enter("data"),r.consume(d),c}function c(d){return u(d)?(r.exit("data"),i(d)):(r.consume(d),c)}function u(d){if(d===null)return!0;const h=s[d];let m=-1;if(h)for(;++m<h.length;){const f=h[m];if(!f.previous||f.previous.call(n,n.previous))return!0}return!1}}}function yk(e){return t;function t(r,n){let s=-1,i;for(;++s<=r.length;)i===void 0?r[s]&&r[s][1].type==="data"&&(i=s,s++):(!r[s]||r[s][1].type!=="data")&&(s!==i+2&&(r[i][1].end=r[s-1][1].end,r.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(r,n):r}}function Y5(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],s=t.sliceStream(n);let i=s.length,o=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(l=0),l){const u={type:r===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:n.start._bufferIndex+o,_index:n.start._index+i,line:n.end.line,column:n.end.column-l,offset:n.end.offset-l},end:{...n.end}};n.end={...u.start},n.start.offset===n.end.offset?Object.assign(n,u):(e.splice(r,0,["enter",u,t],["exit",u,t]),r+=2)}r++}return e}const Z5={42:Mt,43:Mt,45:Mt,48:Mt,49:Mt,50:Mt,51:Mt,52:Mt,53:Mt,54:Mt,55:Mt,56:Mt,57:Mt,62:uk},e3={91:s5},t3={[-2]:Eu,[-1]:Eu,32:Eu},r3={35:u5,42:xl,45:[Kg,xl],60:m5,61:Kg,95:xl,96:Wg,126:Wg},n3={38:hk,92:dk},s3={[-5]:Pu,[-4]:Pu,[-3]:Pu,33:I5,38:hk,42:Nh,60:[DP,w5],91:D5,92:[l5,dk],93:Mm,95:Nh,96:GP},i3={null:[Nh,J5]},a3={null:[42,95]},o3={null:[]},l3=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:a3,contentInitial:e3,disable:o3,document:Z5,flow:r3,flowInitial:t3,insideSpan:i3,string:n3,text:s3},Symbol.toStringTag,{value:"Module"}));function c3(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const s={},i=[];let o=[],l=[];const c={attempt:C(T),check:C(N),consume:x,enter:p,exit:j,interrupt:C(N,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function h(P){return o=cr(o,P),b(),o[o.length-1]!==null?[]:(E(t,0),u.events=Om(i,u.events,u),u.events)}function m(P,O){return d3(f(P),O)}function f(P){return u3(o,P)}function g(){const{_bufferIndex:P,_index:O,line:K,column:I,offset:M}=n;return{_bufferIndex:P,_index:O,line:K,column:I,offset:M}}function v(P){s[P.line]=P.column,R()}function b(){let P;for(;n._index<o.length;){const O=o[n._index];if(typeof O=="string")for(P=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===P&&n._bufferIndex<O.length;)y(O.charCodeAt(n._bufferIndex));else y(O)}}function y(P){d=d(P)}function x(P){ce(P)?(n.line++,n.column=1,n.offset+=P===-3?2:1,R()):P!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),u.previous=P}function p(P,O){const K=O||{};return K.type=P,K.start=g(),u.events.push(["enter",K,u]),l.push(K),K}function j(P){const O=l.pop();return O.end=g(),u.events.push(["exit",O,u]),O}function T(P,O){E(P,O.from)}function N(P,O){O.restore()}function C(P,O){return K;function K(I,M,W){let U,A,B,S;return Array.isArray(I)?le(I):"tokenize"in I?le([I]):te(I);function te(be){return pt;function pt(_t){const yr=_t!==null&&be[_t],ot=_t!==null&&be.null,Ze=[...Array.isArray(yr)?yr:yr?[yr]:[],...Array.isArray(ot)?ot:ot?[ot]:[]];return le(Ze)(_t)}}function le(be){return U=be,A=0,be.length===0?W:_(be[A])}function _(be){return pt;function pt(_t){return S=D(),B=be,be.partial||(u.currentConstruct=be),be.name&&u.parser.constructs.disable.null.includes(be.name)?at():be.tokenize.call(O?Object.assign(Object.create(u),O):u,c,Ne,at)(_t)}}function Ne(be){return P(B,S),M}function at(be){return S.restore(),++A<U.length?_(U[A]):W}}}function E(P,O){P.resolveAll&&!i.includes(P)&&i.push(P),P.resolve&&Wr(u.events,O,u.events.length-O,P.resolve(u.events.slice(O),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function D(){const P=g(),O=u.previous,K=u.currentConstruct,I=u.events.length,M=Array.from(l);return{from:I,restore:W};function W(){n=P,u.previous=O,u.currentConstruct=K,u.events.length=I,l=M,R()}}function R(){n.line in s&&n.column<2&&(n.column=s[n.line],n.offset+=s[n.line]-1)}}function u3(e,t){const r=t.start._index,n=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let o;if(r===s)o=[e[r].slice(n,i)];else{if(o=e.slice(r,s),n>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(n):o.shift()}i>0&&o.push(e[s].slice(0,i))}return o}function d3(e,t){let r=-1;const n=[];let s;for(;++r<e.length;){const i=e[r];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,n.push(o)}return n.join("")}function h3(e){const n={constructs:vP([l3,...(e||{}).extensions||[]]),content:s(CP),defined:[],document:s(EP),flow:s(G5),lazy:{},string:s(X5),text:s(Q5)};return n;function s(i){return o;function o(l){return c3(n,i,l)}}}function f3(e){for(;!fk(e););return e}const Jg=/[\0\t\n\r]/g;function m3(){let e=1,t="",r=!0,n;return s;function s(i,o,l){const c=[];let u,d,h,m,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),h=0,t="",r&&(i.charCodeAt(0)===65279&&h++,r=void 0);h<i.length;){if(Jg.lastIndex=h,u=Jg.exec(i),m=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(m),!u){t=i.slice(h);break}if(f===10&&h===m&&n)c.push(-3),n=void 0;else switch(n&&(c.push(-5),n=void 0),h<m&&(c.push(i.slice(h,m)),e+=m-h),f){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:n=!0,e=1}h=m+1}return l&&(n&&c.push(-5),t&&c.push(t),c.push(null)),c}}const p3=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function g3(e){return e.replace(p3,x3)}function x3(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const s=r.charCodeAt(1),i=s===120||s===88;return ck(r.slice(i?2:1),i?16:10)}return Lm(r)||e}const vk={}.hasOwnProperty;function y3(e,t,r){return typeof t!="string"&&(r=t,t=void 0),v3(r)(f3(h3(r).document().write(m3()(e,t,!0))))}function v3(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ae),autolinkProtocol:D,autolinkEmail:D,atxHeading:i(gt),blockQuote:i(ot),characterEscape:D,characterReference:D,codeFenced:i(Ze),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(Ze,o),codeText:i(X,o),codeTextData:D,data:D,codeFlowValue:D,definition:i(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(Er),hardBreakEscape:i(Lt),hardBreakTrailing:i(Lt),htmlFlow:i(L,o),htmlFlowData:D,htmlText:i(L,o),htmlTextData:D,image:i(Y),label:o,link:i(ae),listItem:i(xt),listItemValue:m,listOrdered:i(He,h),listUnordered:i(He),paragraph:i(Mi),reference:_,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(gt),strong:i(Gt),thematicBreak:i($i)},exit:{atxHeading:c(),atxHeadingSequence:T,autolink:c(),autolinkEmail:yr,autolinkProtocol:_t,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:at,characterReferenceMarkerNumeric:at,characterReferenceValue:be,characterReference:pt,codeFenced:c(b),codeFencedFence:v,codeFencedFenceInfo:f,codeFencedFenceMeta:g,codeFlowValue:R,codeIndented:c(y),codeText:c(M),codeTextData:R,data:R,definition:c(),definitionDestinationString:j,definitionLabelString:x,definitionTitleString:p,emphasis:c(),hardBreakEscape:c(O),hardBreakTrailing:c(O),htmlFlow:c(K),htmlFlowData:R,htmlText:c(I),htmlTextData:R,image:c(U),label:B,labelText:A,lineEnding:P,link:c(W),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Ne,resourceDestinationString:S,resourceTitleString:te,resource:le,setextHeading:c(E),setextHeadingLineSequence:C,setextHeadingText:N,strong:c(),thematicBreak:c()}};bk(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(F){let G={type:"root",children:[]};const k={stack:[G],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:r},V=[];let re=-1;for(;++re<F.length;)if(F[re][1].type==="listOrdered"||F[re][1].type==="listUnordered")if(F[re][0]==="enter")V.push(re);else{const ge=V.pop();re=s(F,ge,re)}for(re=-1;++re<F.length;){const ge=t[F[re][0]];vk.call(ge,F[re][1].type)&&ge[F[re][1].type].call(Object.assign({sliceSerialize:F[re][2].sliceSerialize},k),F[re][1])}if(k.tokenStack.length>0){const ge=k.tokenStack[k.tokenStack.length-1];(ge[1]||Xg).call(k,void 0,ge[0])}for(G.position={start:pn(F.length>0?F[0][1].start:{line:1,column:1,offset:0}),end:pn(F.length>0?F[F.length-2][1].end:{line:1,column:1,offset:0})},re=-1;++re<t.transforms.length;)G=t.transforms[re](G)||G;return G}function s(F,G,k){let V=G-1,re=-1,ge=!1,me,je,Ue,$;for(;++V<=k;){const z=F[V];switch(z[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{z[0]==="enter"?re++:re--,$=void 0;break}case"lineEndingBlank":{z[0]==="enter"&&(me&&!$&&!re&&!Ue&&(Ue=V),$=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:$=void 0}if(!re&&z[0]==="enter"&&z[1].type==="listItemPrefix"||re===-1&&z[0]==="exit"&&(z[1].type==="listUnordered"||z[1].type==="listOrdered")){if(me){let ne=V;for(je=void 0;ne--;){const ee=F[ne];if(ee[1].type==="lineEnding"||ee[1].type==="lineEndingBlank"){if(ee[0]==="exit")continue;je&&(F[je][1].type="lineEndingBlank",ge=!0),ee[1].type="lineEnding",je=ne}else if(!(ee[1].type==="linePrefix"||ee[1].type==="blockQuotePrefix"||ee[1].type==="blockQuotePrefixWhitespace"||ee[1].type==="blockQuoteMarker"||ee[1].type==="listItemIndent"))break}Ue&&(!je||Ue<je)&&(me._spread=!0),me.end=Object.assign({},je?F[je][1].start:z[1].end),F.splice(je||V,0,["exit",me,z[2]]),V++,k++}if(z[1].type==="listItemPrefix"){const ne={type:"listItem",_spread:!1,start:Object.assign({},z[1].start),end:void 0};me=ne,F.splice(V,0,["enter",ne,z[2]]),V++,k++,Ue=void 0,$=!0}}}return F[G][1]._spread=ge,k}function i(F,G){return k;function k(V){l.call(this,F(V),V),G&&G.call(this,V)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(F,G,k){this.stack[this.stack.length-1].children.push(F),this.stack.push(F),this.tokenStack.push([G,k||void 0]),F.position={start:pn(G.start),end:void 0}}function c(F){return G;function G(k){F&&F.call(this,k),u.call(this,k)}}function u(F,G){const k=this.stack.pop(),V=this.tokenStack.pop();if(V)V[0].type!==F.type&&(G?G.call(this,F,V[0]):(V[1]||Xg).call(this,F,V[0]));else throw new Error("Cannot close `"+F.type+"` ("+ja({start:F.start,end:F.end})+"): its not open");k.position.end=pn(F.end)}function d(){return xP(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(F){if(this.data.expectingFirstListItemValue){const G=this.stack[this.stack.length-2];G.start=Number.parseInt(this.sliceSerialize(F),10),this.data.expectingFirstListItemValue=void 0}}function f(){const F=this.resume(),G=this.stack[this.stack.length-1];G.lang=F}function g(){const F=this.resume(),G=this.stack[this.stack.length-1];G.meta=F}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const F=this.resume(),G=this.stack[this.stack.length-1];G.value=F.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const F=this.resume(),G=this.stack[this.stack.length-1];G.value=F.replace(/(\r?\n|\r)$/g,"")}function x(F){const G=this.resume(),k=this.stack[this.stack.length-1];k.label=G,k.identifier=ui(this.sliceSerialize(F)).toLowerCase()}function p(){const F=this.resume(),G=this.stack[this.stack.length-1];G.title=F}function j(){const F=this.resume(),G=this.stack[this.stack.length-1];G.url=F}function T(F){const G=this.stack[this.stack.length-1];if(!G.depth){const k=this.sliceSerialize(F).length;G.depth=k}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function C(F){const G=this.stack[this.stack.length-1];G.depth=this.sliceSerialize(F).codePointAt(0)===61?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function D(F){const k=this.stack[this.stack.length-1].children;let V=k[k.length-1];(!V||V.type!=="text")&&(V=lt(),V.position={start:pn(F.start),end:void 0},k.push(V)),this.stack.push(V)}function R(F){const G=this.stack.pop();G.value+=this.sliceSerialize(F),G.position.end=pn(F.end)}function P(F){const G=this.stack[this.stack.length-1];if(this.data.atHardBreak){const k=G.children[G.children.length-1];k.position.end=pn(F.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(G.type)&&(D.call(this,F),R.call(this,F))}function O(){this.data.atHardBreak=!0}function K(){const F=this.resume(),G=this.stack[this.stack.length-1];G.value=F}function I(){const F=this.resume(),G=this.stack[this.stack.length-1];G.value=F}function M(){const F=this.resume(),G=this.stack[this.stack.length-1];G.value=F}function W(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=G,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function U(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=G,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function A(F){const G=this.sliceSerialize(F),k=this.stack[this.stack.length-2];k.label=g3(G),k.identifier=ui(G).toLowerCase()}function B(){const F=this.stack[this.stack.length-1],G=this.resume(),k=this.stack[this.stack.length-1];if(this.data.inReference=!0,k.type==="link"){const V=F.children;k.children=V}else k.alt=G}function S(){const F=this.resume(),G=this.stack[this.stack.length-1];G.url=F}function te(){const F=this.resume(),G=this.stack[this.stack.length-1];G.title=F}function le(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function Ne(F){const G=this.resume(),k=this.stack[this.stack.length-1];k.label=G,k.identifier=ui(this.sliceSerialize(F)).toLowerCase(),this.data.referenceType="full"}function at(F){this.data.characterReferenceType=F.type}function be(F){const G=this.sliceSerialize(F),k=this.data.characterReferenceType;let V;k?(V=ck(G,k==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):V=Lm(G);const re=this.stack[this.stack.length-1];re.value+=V}function pt(F){const G=this.stack.pop();G.position.end=pn(F.end)}function _t(F){R.call(this,F);const G=this.stack[this.stack.length-1];G.url=this.sliceSerialize(F)}function yr(F){R.call(this,F);const G=this.stack[this.stack.length-1];G.url="mailto:"+this.sliceSerialize(F)}function ot(){return{type:"blockquote",children:[]}}function Ze(){return{type:"code",lang:null,meta:null,value:""}}function X(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Er(){return{type:"emphasis",children:[]}}function gt(){return{type:"heading",depth:0,children:[]}}function Lt(){return{type:"break"}}function L(){return{type:"html",value:""}}function Y(){return{type:"image",title:null,url:"",alt:null}}function ae(){return{type:"link",title:null,url:"",children:[]}}function He(F){return{type:"list",ordered:F.type==="listOrdered",start:null,spread:F._spread,children:[]}}function xt(F){return{type:"listItem",spread:F._spread,checked:null,children:[]}}function Mi(){return{type:"paragraph",children:[]}}function Gt(){return{type:"strong",children:[]}}function lt(){return{type:"text",value:""}}function $i(){return{type:"thematicBreak"}}}function pn(e){return{line:e.line,column:e.column,offset:e.offset}}function bk(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?bk(e,n):b3(e,n)}}function b3(e,t){let r;for(r in t)if(vk.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function Xg(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ja({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ja({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ja({start:t.start,end:t.end})+") is still open")}function w3(e){const t=this;t.parser=r;function r(n){return y3(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function k3(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function j3(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function S3(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function N3(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function _3(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function C3(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),s=Di(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let o,l=e.footnoteCounts.get(n);l===void 0?(l=0,e.footnoteOrder.push(n),o=e.footnoteOrder.length):o=i+1,l+=1,e.footnoteCounts.set(n,l);const c={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+s,id:r+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function T3(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function E3(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function wk(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=n:s.push({type:"text",value:n}),s}function P3(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return wk(e,t);const s={src:Di(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function A3(e,t){const r={src:Di(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function I3(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function R3(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return wk(e,t);const s={href:Di(n.url||"")};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function D3(e,t){const r={href:Di(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function L3(e,t,r){const n=e.all(t),s=r?O3(r):kk(t),i={},o=[];if(typeof t.checked=="boolean"){const d=n[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},n.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<n.length;){const d=n[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?o.push(...d.children):o.push(d)}const c=n[n.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,u),e.applyData(t,u)}function O3(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=kk(r[n])}return t}function kk(e){const t=e.spread;return t??e.children.length>1}function M3(e,t){const r={},n=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++s<n.length;){const o=n[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,i),e.applyData(t,i)}function $3(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function F3(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function z3(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function U3(e,t){const r=e.all(t),n=r.shift(),s=[];if(n){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],o),s.push(o)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},l=Am(t.children[1]),c=rk(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function B3(e,t,r){const n=r?r.children:void 0,i=(n?n.indexOf(t):1)===0?"th":"td",o=r&&r.type==="table"?r.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],m={},f=o?o[c]:void 0;f&&(m.align=f);let g={type:"element",tagName:i,properties:m,children:[]};h&&(g.children=e.all(h),e.patch(h,g),g=e.applyData(h,g)),u.push(g)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function V3(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const Qg=9,Yg=32;function H3(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),s=0;const i=[];for(;n;)i.push(Zg(t.slice(s,n.index),s>0,!0),n[0]),s=n.index+n[0].length,n=r.exec(t);return i.push(Zg(t.slice(s),s>0,!1)),i.join("")}function Zg(e,t,r){let n=0,s=e.length;if(t){let i=e.codePointAt(n);for(;i===Qg||i===Yg;)n++,i=e.codePointAt(n)}if(r){let i=e.codePointAt(s-1);for(;i===Qg||i===Yg;)s--,i=e.codePointAt(s-1)}return s>n?e.slice(n,s):""}function q3(e,t){const r={type:"text",value:H3(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function W3(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const G3={blockquote:k3,break:j3,code:S3,delete:N3,emphasis:_3,footnoteReference:C3,heading:T3,html:E3,imageReference:P3,image:A3,inlineCode:I3,linkReference:R3,link:D3,listItem:L3,list:M3,paragraph:$3,root:F3,strong:z3,table:U3,tableCell:V3,tableRow:B3,text:q3,thematicBreak:W3,toml:qo,yaml:qo,definition:qo,footnoteDefinition:qo};function qo(){}const jk=-1,Ec=0,Na=1,ec=2,$m=3,Fm=4,zm=5,Um=6,Sk=7,Nk=8,ex=typeof self=="object"?self:globalThis,K3=(e,t)=>{const r=(s,i)=>(e.set(i,s),s),n=s=>{if(e.has(s))return e.get(s);const[i,o]=t[s];switch(i){case Ec:case jk:return r(o,s);case Na:{const l=r([],s);for(const c of o)l.push(n(c));return l}case ec:{const l=r({},s);for(const[c,u]of o)l[n(c)]=n(u);return l}case $m:return r(new Date(o),s);case Fm:{const{source:l,flags:c}=o;return r(new RegExp(l,c),s)}case zm:{const l=r(new Map,s);for(const[c,u]of o)l.set(n(c),n(u));return l}case Um:{const l=r(new Set,s);for(const c of o)l.add(n(c));return l}case Sk:{const{name:l,message:c}=o;return r(new ex[l](c),s)}case Nk:return r(BigInt(o),s);case"BigInt":return r(Object(BigInt(o)),s);case"ArrayBuffer":return r(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return r(new DataView(l),o)}}return r(new ex[i](o),s)};return n},tx=e=>K3(new Map,e)(0),As="",{toString:J3}={},{keys:X3}=Object,Yi=e=>{const t=typeof e;if(t!=="object"||!e)return[Ec,t];const r=J3.call(e).slice(8,-1);switch(r){case"Array":return[Na,As];case"Object":return[ec,As];case"Date":return[$m,As];case"RegExp":return[Fm,As];case"Map":return[zm,As];case"Set":return[Um,As];case"DataView":return[Na,r]}return r.includes("Array")?[Na,r]:r.includes("Error")?[Sk,r]:[ec,r]},Wo=([e,t])=>e===Ec&&(t==="function"||t==="symbol"),Q3=(e,t,r,n)=>{const s=(o,l)=>{const c=n.push(o)-1;return r.set(l,c),c},i=o=>{if(r.has(o))return r.get(o);let[l,c]=Yi(o);switch(l){case Ec:{let d=o;switch(c){case"bigint":l=Nk,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([jk],o)}return s([l,d],o)}case Na:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),s([c,[...m]],o)}const d=[],h=s([l,d],o);for(const m of o)d.push(i(m));return h}case ec:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return i(o.toJSON());const d=[],h=s([l,d],o);for(const m of X3(o))(e||!Wo(Yi(o[m])))&&d.push([i(m),i(o[m])]);return h}case $m:return s([l,o.toISOString()],o);case Fm:{const{source:d,flags:h}=o;return s([l,{source:d,flags:h}],o)}case zm:{const d=[],h=s([l,d],o);for(const[m,f]of o)(e||!(Wo(Yi(m))||Wo(Yi(f))))&&d.push([i(m),i(f)]);return h}case Um:{const d=[],h=s([l,d],o);for(const m of o)(e||!Wo(Yi(m)))&&d.push(i(m));return h}}const{message:u}=o;return s([l,{name:c,message:u}],o)};return i},rx=(e,{json:t,lossy:r}={})=>{const n=[];return Q3(!(t||r),!!t,new Map,n)(e),n},tc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?tx(rx(e,t)):structuredClone(e):(e,t)=>tx(rx(e,t));function Y3(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function Z3(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function eA(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||Y3,n=e.options.footnoteBackLabel||Z3,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),m=Di(h.toLowerCase());let f=0;const g=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++f<=v;){g.length>0&&g.push({type:"text",value:" "});let x=typeof r=="string"?r:r(c,f);typeof x=="string"&&(x={type:"text",value:x}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(c,f),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const b=d[d.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const x=b.children[b.children.length-1];x&&x.type==="text"?x.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...g)}else d.push(...g);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(d,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...tc(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const _k=(function(e){if(e==null)return sA;if(typeof e=="function")return Pc(e);if(typeof e=="object")return Array.isArray(e)?tA(e):rA(e);if(typeof e=="string")return nA(e);throw new Error("Expected function, string, or object as test")});function tA(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=_k(e[r]);return Pc(n);function n(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function rA(e){const t=e;return Pc(r);function r(n){const s=n;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function nA(e){return Pc(t);function t(r){return r&&r.type===e}}function Pc(e){return t;function t(r,n,s){return!!(iA(r)&&e.call(this,r,typeof n=="number"?n:void 0,s||void 0))}}function sA(){return!0}function iA(e){return e!==null&&typeof e=="object"&&"type"in e}const Ck=[],aA=!0,nx=!1,oA="skip";function lA(e,t,r,n){let s;typeof t=="function"&&typeof r!="function"?(n=r,r=t):s=t;const i=_k(s),o=n?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=Ck,g,v,b;if((!t||i(c,u,d[d.length-1]||void 0))&&(f=cA(r(c,d)),f[0]===nx))return f;if("children"in c&&c.children){const y=c;if(y.children&&f[0]!==oA)for(v=(n?y.children.length:-1)+o,b=d.concat(y);v>-1&&v<y.children.length;){const x=y.children[v];if(g=l(x,v,b)(),g[0]===nx)return g;v=typeof g[1]=="number"?g[1]:v+o}}return f}}}function cA(e){return Array.isArray(e)?e:typeof e=="number"?[aA,e]:e==null?Ck:[e]}function Tk(e,t,r,n){let s,i,o;typeof t=="function"&&typeof r!="function"?(i=void 0,o=t,s=r):(i=t,o=r,s=n),lA(e,i,l,s);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return o(c,h,d)}}const _h={}.hasOwnProperty,uA={};function dA(e,t){const r=t||uA,n=new Map,s=new Map,i=new Map,o={...G3,...r.handlers},l={all:u,applyData:fA,definitionById:n,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:c,options:r,patch:hA,wrap:pA};return Tk(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?n:s,m=String(d.identifier).toUpperCase();h.has(m)||h.set(m,d)}}),l;function c(d,h){const m=d.type,f=l.handlers[m];if(_h.call(l.handlers,m)&&f)return f(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in d){const{children:v,...b}=d,y=tc(b);return y.children=l.all(d),y}return tc(d)}return(l.options.unknownHandler||mA)(l,d,h)}function u(d){const h=[];if("children"in d){const m=d.children;let f=-1;for(;++f<m.length;){const g=l.one(m[f],d);if(g){if(f&&m[f-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=sx(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=sx(v.value))}Array.isArray(g)?h.push(...g):h.push(g)}}}return h}}function hA(e,t){e.position&&(t.position=JE(e))}function fA(e,t){let r=t;if(e&&e.data){const n=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const o="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:o}}r.type==="element"&&i&&Object.assign(r.properties,tc(i)),"children"in r&&r.children&&s!==null&&s!==void 0&&(r.children=s)}return r}function mA(e,t){const r=t.data||{},n="value"in t&&!(_h.call(r,"hProperties")||_h.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pA(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function sx(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function ix(e,t){const r=dA(e,t),n=r.one(e,void 0),s=eA(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function gA(e,t){return e&&"run"in e?async function(r,n){const s=ix(r,{file:n,...t});await e.run(s,n)}:function(r,n){return ix(r,{file:n,...e||t})}}function ax(e){if(e)throw e}var yl=Object.prototype.hasOwnProperty,Ek=Object.prototype.toString,ox=Object.defineProperty,lx=Object.getOwnPropertyDescriptor,cx=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Ek.call(t)==="[object Array]"},ux=function(t){if(!t||Ek.call(t)!=="[object Object]")return!1;var r=yl.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&yl.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var s;for(s in t);return typeof s>"u"||yl.call(t,s)},dx=function(t,r){ox&&r.name==="__proto__"?ox(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},hx=function(t,r){if(r==="__proto__")if(yl.call(t,r)){if(lx)return lx(t,r).value}else return;return t[r]},xA=function e(){var t,r,n,s,i,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(r in t)n=hx(l,r),s=hx(t,r),l!==s&&(d&&s&&(ux(s)||(i=cx(s)))?(i?(i=!1,o=n&&cx(n)?n:[]):o=n&&ux(n)?n:{},dx(l,{name:r,newValue:e(d,o,s)})):typeof s<"u"&&dx(l,{name:r,newValue:s}));return l};const Au=Uh(xA);function Ch(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function yA(){const e=[],t={run:r,use:n};return t;function r(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...u){const d=e[++i];let h=-1;if(c){o(c);return}for(;++h<s.length;)(u[h]===null||u[h]===void 0)&&(u[h]=s[h]);s=u,d?vA(d,l)(...u):o(null,...u)}}function n(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function vA(e,t){let r;return n;function n(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&r)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(o,...l){r||(r=!0,t(o,...l))}function i(o){s(null,o)}}const Lr={basename:bA,dirname:wA,extname:kA,join:jA,sep:"/"};function bA(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');go(e);let r=0,n=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){r=s+1;break}}else n<0&&(i=!0,n=s+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){r=s+1;break}}else o<0&&(i=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(n=s):(l=-1,n=o));return r===n?n=o:n<0&&(n=e.length),e.slice(r,n)}function wA(e){if(go(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function kA(e){go(e);let t=e.length,r=-1,n=0,s=-1,i=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){n=t+1;break}continue}r<0&&(o=!0,r=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||r<0||i===0||i===1&&s===r-1&&s===n+1?"":e.slice(s,r)}function jA(...e){let t=-1,r;for(;++t<e.length;)go(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":SA(r)}function SA(e){go(e);const t=e.codePointAt(0)===47;let r=NA(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function NA(e,t){let r="",n=0,s=-1,i=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(c=r.lastIndexOf("/"),c!==r.length-1){c<0?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),s=o,i=0;continue}}else if(r.length>0){r="",n=0,s=o,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(s+1,o):r=e.slice(s+1,o),n=o-s-1;s=o,i=0}else l===46&&i>-1?i++:i=-1}return r}function go(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const _A={cwd:CA};function CA(){return"/"}function Th(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function TA(e){if(typeof e=="string")e=new URL(e);else if(!Th(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return EA(e)}function EA(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Iu=["history","path","basename","stem","extname","dirname"];class Pk{constructor(t){let r;t?Th(t)?r={path:t}:typeof t=="string"||PA(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":_A.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<Iu.length;){const i=Iu[n];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let s;for(s in r)Iu.includes(s)||(this[s]=r[s])}get basename(){return typeof this.path=="string"?Lr.basename(this.path):void 0}set basename(t){Du(t,"basename"),Ru(t,"basename"),this.path=Lr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Lr.dirname(this.path):void 0}set dirname(t){fx(this.basename,"dirname"),this.path=Lr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Lr.extname(this.path):void 0}set extname(t){if(Ru(t,"extname"),fx(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Lr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Th(t)&&(t=TA(t)),Du(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Lr.basename(this.path,this.extname):void 0}set stem(t){Du(t,"stem"),Ru(t,"stem"),this.path=Lr.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const s=this.message(t,r,n);throw s.fatal=!0,s}info(t,r,n){const s=this.message(t,r,n);return s.fatal=void 0,s}message(t,r,n){const s=new Nt(t,r,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Ru(e,t){if(e&&e.includes(Lr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Lr.sep+"`")}function Du(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function fx(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function PA(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const AA=(function(e){const n=this.constructor.prototype,s=n[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,n),i}),IA={}.hasOwnProperty;class Bm extends AA{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=yA()}copy(){const t=new Bm;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(Au(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(Mu("data",this.frozen),this.namespace[t]=r,this):IA.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Mu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const s=r.call(t,...n);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=Go(t),n=this.parser||this.Parser;return Lu("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),Lu("process",this.parser||this.Parser),Ou("process",this.compiler||this.Compiler),r?s(void 0,r):new Promise(s);function s(i,o){const l=Go(t),c=n.parse(l);n.run(c,l,function(d,h,m){if(d||!h||!m)return u(d);const f=h,g=n.stringify(f,m);LA(g)?m.value=g:m.result=g,u(d,m)});function u(d,h){d||!h?o(d):i?i(h):r(void 0,h)}}}processSync(t){let r=!1,n;return this.freeze(),Lu("processSync",this.parser||this.Parser),Ou("processSync",this.compiler||this.Compiler),this.process(t,s),px("processSync","process",r),n;function s(i,o){r=!0,ax(i),n=o}}run(t,r,n){mx(t),this.freeze();const s=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?i(void 0,n):new Promise(i);function i(o,l){const c=Go(r);s.run(t,c,u);function u(d,h,m){const f=h||t;d?l(d):o?o(f):n(void 0,f,m)}}}runSync(t,r){let n=!1,s;return this.run(t,r,i),px("runSync","run",n),s;function i(o,l){ax(o),s=l,n=!0}}stringify(t,r){this.freeze();const n=Go(r),s=this.compiler||this.Compiler;return Ou("stringify",s),mx(t),s(t,n)}use(t,...r){const n=this.attachers,s=this.namespace;if(Mu("use",this.frozen),t!=null)if(typeof t=="function")c(t,r);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Au(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];i(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,m=-1;for(;++h<n.length;)if(n[h][0]===u){m=h;break}if(m===-1)n.push([u,...d]);else if(d.length>0){let[f,...g]=d;const v=n[m][1];Ch(v)&&Ch(f)&&(f=Au(!0,v,f)),n[m]=[u,f,...g]}}}}const RA=new Bm().freeze();function Lu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Ou(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Mu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function mx(e){if(!Ch(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function px(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Go(e){return DA(e)?e:new Pk(e)}function DA(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function LA(e){return typeof e=="string"||OA(e)}function OA(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const MA="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",gx=[],xx={allowDangerousHtml:!0},$A=/^(https?|ircs?|mailto|xmpp)$/i,FA=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Eh(e){const t=zA(e),r=UA(e);return BA(t.runSync(t.parse(r),r),e)}function zA(e){const t=e.rehypePlugins||gx,r=e.remarkPlugins||gx,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...xx}:xx;return RA().use(w3).use(r).use(gA,n).use(t)}function UA(e){const t=e.children||"",r=new Pk;return typeof t=="string"&&(r.value=t),r}function BA(e,t){const r=t.allowedElements,n=t.allowElement,s=t.components,i=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||VA;for(const d of FA)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+MA+d.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Tk(e,u),eP(e,{Fragment:a.Fragment,components:s,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function u(d,h,m){if(d.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let f;for(f in Tu)if(Object.hasOwn(Tu,f)&&Object.hasOwn(d.properties,f)){const g=d.properties[f],v=Tu[f];(v===null||v.includes(d.tagName))&&(d.properties[f]=c(String(g||""),f,d))}}if(d.type==="element"){let f=r?!r.includes(d.tagName):i?i.includes(d.tagName):!1;if(!f&&n&&typeof h=="number"&&(f=!n(d,h,m)),f&&m&&typeof h=="number")return l&&d.children?m.children.splice(h,1,...d.children):m.children.splice(h,1),h}}}function VA(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||r!==-1&&t>r||n!==-1&&t>n||$A.test(e.slice(0,t))?e:""}function $u({strategicDirectives:e,onUpdateChecklist:t,onSetActiveSD:r,currentSD:n,isCompact:s,detailMode:i,onRefresh:o,onUpdateStatus:l}){const{id:c}=Ff(),u=Ei(),[d,h]=w.useState(null),[m,f]=w.useState("list"),[g,v]=w.useState(null),[b,y]=w.useState(()=>localStorage.getItem("sd-filter-migration-v2")?localStorage.getItem("sd-status-filter")||"active,draft":(localStorage.setItem("sd-filter-migration-v2","true"),localStorage.setItem("sd-status-filter","active,draft"),localStorage.setItem("sd-priority-filter","critical,high"),localStorage.setItem("sd-application-filter","EHG"),"active,draft")),[x,p]=w.useState(""),[j,T]=w.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-priority-filter")||"critical,high"),[N,C]=w.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-application-filter")||"EHG"),[E,D]=w.useState(null),[R,P]=w.useState(!1),[O,K]=w.useState(!1),[I,M]=w.useState(()=>{const k=localStorage.getItem("sd-sort-levels");return k?JSON.parse(k):[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}]}),[W,U]=w.useState(()=>{const k=localStorage.getItem("sd-saved-sorts");return k?JSON.parse(k):{"Strategic Priority":[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],Default:[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],"WSJF Priority":[{field:"wsjf_score",direction:"desc",label:"WSJF Score"},{field:"status",direction:"asc",label:"Status"},{field:"created_at",direction:"desc",label:"Created Date"}],"Progress Tracking":[{field:"progress",direction:"asc",label:"Progress"},{field:"priority",direction:"desc",label:"Priority"},{field:"title",direction:"asc",label:"Title"}],"Recent Activity":[{field:"updated_at",direction:"desc",label:"Last Updated"},{field:"status",direction:"asc",label:"Status"}]}}),[A,B]=w.useState(""),[S,te]=w.useState(!1),[le,_]=w.useState("all"),[Ne,at]=w.useState(null),[be,pt]=w.useState(null);w.useEffect(()=>{localStorage.setItem("sd-status-filter",b)},[b]),w.useEffect(()=>{localStorage.setItem("sd-priority-filter",j)},[j]),w.useEffect(()=>{localStorage.setItem("sd-application-filter",N)},[N]),w.useEffect(()=>{localStorage.setItem("sd-sort-levels",JSON.stringify(I))},[I]),w.useEffect(()=>{localStorage.setItem("sd-saved-sorts",JSON.stringify(W))},[W]),w.useEffect(()=>{if(i&&c){console.log("Detail mode - Looking for SD with id:",c),console.log("Available SDs count:",e.length),e.length>0&&console.log("First few SDs:",e.slice(0,3).map(V=>({id:V.id,title:V.title})));const k=e.find(V=>V.id===c);k?(console.log("Found SD:",k.id,k.title),v(k),f("detail"),document.title=`${k.title||k.id} - LEO Protocol Dashboard`):e.length>0?(console.warn(`SD with id '${c}' not found in ${e.length} directives, redirecting to list`),u("/strategic-directives",{replace:!0})):console.log("Waiting for strategic directives to load...")}else i||(f("list"),v(null),document.title="Strategic Directives - LEO Protocol Dashboard")},[c,i,e,u]);const _t=k=>{h(d===k?null:k)},yr=k=>{navigator.clipboard.writeText(k),D(k),setTimeout(()=>D(null),2e3)},ot=()=>{p(""),T("all"),y("all"),C("all"),_("all")},Ze=()=>{P(!1)},X=x||j!=="all"||b!=="all"||N!=="all"||le!=="all",Ke=k=>{switch(k==null?void 0:k.toLowerCase()){case"critical":return"border-l-4 border-l-red-500";case"high":return"border-l-4 border-l-orange-500";case"medium":return"border-l-4 border-l-yellow-500";case"low":return"border-l-4 border-l-gray-400";default:return"border-l-4 border-l-gray-300"}},Er=k=>k===100?"bg-gradient-to-r from-green-400 to-green-600 animate-pulse":k>=76?"bg-gradient-to-r from-blue-400 to-blue-600":k>=51?"bg-gradient-to-r from-yellow-400 to-yellow-600":k>=26?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gradient-to-r from-red-400 to-red-600",gt=(k,V)=>{const re=e.find(ge=>ge.id===k);re&&re.checklist&&re.checklist[V]&&t(k,V,!re.checklist[V].checked)},Lt=k=>{if(!k||!k.id){console.error("Invalid SD for navigation:",k);return}try{u(`/strategic-directives/${k.id}`)}catch(V){console.error("Navigation error:",V)}},[L,Y]=w.useState({}),[ae,He]=w.useState(new Set),[xt,Mi]=w.useState(new Set),Gt=async(k,V=!1)=>{if(!(!V&&L[k]&&L[k].summary)&&!ae.has(k)){He(re=>new Set(re).add(k));try{const re=`/api/strategic-directives/${k}/backlog-summary${V?"?force_refresh=true":""}`,ge=await fetch(re),me=await ge.json();ge.ok?Y(je=>({...je,[k]:{...me,timestamp:Date.now()}})):(console.warn(`Failed to fetch backlog summary for ${k}:`,me.error),Y(je=>({...je,[k]:{summary:me.fallback||"Backlog summary unavailable.",itemCount:0,cached:!1}})))}catch(re){console.error("Error fetching backlog summary:",re),Y(ge=>({...ge,[k]:{summary:"Unable to load backlog summary.",itemCount:0,cached:!1}}))}finally{He(re=>{const ge=new Set(re);return ge.delete(k),ge})}}};if(m==="detail"&&g)return a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>u("/strategic-directives"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[a.jsx(Et,{className:"w-4 h-4 mr-1"}),"Back to List"]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:[g.id,": ",g.title||"Untitled"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:g.metadata&&Object.entries(g.metadata).map(([k,V])=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:k}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:typeof V=="object"?JSON.stringify(V,null,2):String(V)})]},k))}),a.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:a.jsx(Eh,{children:g.content||"No content available"})}),g.checklist&&g.checklist.length>0&&a.jsxs("div",{className:"border-t pt-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Requirements Checklist"}),a.jsx("div",{className:"space-y-2",children:g.checklist.map((k,V)=>a.jsxs("label",{className:"flex items-start p-3 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:k.checked,onChange:()=>gt(g.id,V),className:"mt-1 mr-3 w-5 h-5 text-primary-600 rounded focus:ring-primary-500"}),a.jsx("span",{className:`flex-1 ${k.checked?"line-through text-gray-500":""}`,children:k.text})]},V))})]}),g.prds&&g.prds.length>0&&a.jsxs("div",{className:"border-t pt-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(Ge,{className:"w-5 h-5 mr-2 text-blue-600"}),"Product Requirements Documents (",g.prds.length,")"]}),a.jsx("div",{className:"space-y-4",children:g.prds.map(k=>a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:k.title}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["ID: ",k.id]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k.status==="approved"?"bg-green-100 text-green-800":k.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:k.status}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k.priority==="high"?"bg-red-100 text-red-800":k.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:k.priority})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("strong",{children:"Phase:"})," ",k.phase]}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("strong",{children:"Progress:"})," ",k.progress,"%"]})]}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("strong",{children:"Created:"})," ",new Date(k.createdAt).toLocaleDateString()]})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:a.jsxs("button",{onClick:()=>u(`/prds/${k.id}`),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center",children:["View Full PRD ",a.jsx(Et,{className:"w-4 h-4 ml-1"})]})})]},k.id))})]}),g.executionSequences&&g.executionSequences.length>0&&a.jsxs("div",{className:"border-t pt-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(Tn,{className:"w-5 h-5 mr-2 text-green-600"}),"Execution Sequence Steps (",g.executionSequences.length,")"]}),a.jsx("div",{className:"space-y-3",children:g.executionSequences.map(k=>a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${k.status==="completed"?"bg-green-500 text-white":k.status==="in_progress"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:k.sequenceNumber}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:k.description}),a.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-green-700 dark:text-green-300",children:[a.jsxs("span",{children:[a.jsx("strong",{children:"Executor:"})," ",k.executorRole]}),k.completedAt&&a.jsxs("span",{children:[a.jsx("strong",{children:"Completed:"})," ",new Date(k.completedAt).toLocaleDateString()]})]})]})]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k.status==="completed"?"bg-green-100 text-green-800":k.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:k.status})]})},k.id))})]})]})]});if(m==="detail"&&!g)return a.jsx("div",{className:"p-6 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading strategic directive..."})]})});const lt=e.filter(k=>{var Ue,$,z,ne,ee;let V=!0;if(b!=="all"){const Q=(Ue=k.status)==null?void 0:Ue.toLowerCase();V=(b.includes(",")?b.split(","):[b]).some(ue=>ue==="active"?Q==="active":ue==="draft"?Q==="draft":ue==="deferred"?Q==="deferred":ue==="on_hold"?Q==="on_hold":ue==="cancelled"?Q==="cancelled":ue==="archived"?Q==="archived"||Q==="completed"||Q==="complete":!1)}let re=!0;if(x){const Q=x.toLowerCase();re=(($=k.id)==null?void 0:$.toLowerCase().includes(Q))||((z=k.title)==null?void 0:z.toLowerCase().includes(Q))||((ne=k.description)==null?void 0:ne.toLowerCase().includes(Q))}let ge=!0;j!=="all"&&(ge=(j.includes(",")?j.split(","):[j]).some(de=>{var ue;return((ue=k.priority)==null?void 0:ue.toLowerCase())===de.toLowerCase()}));let me=!0;N!=="all"&&(me=k.targetApplication===N);let je=!0;return le!=="all"&&(je=((ee=k.category)==null?void 0:ee.toLowerCase())===le.toLowerCase()),V&&re&&ge&&me&&je}),F=((k,V)=>[...k].sort((re,ge)=>{var me,je;if(re.is_working_on&&re.progress>=100)return 1;if(ge.is_working_on&&ge.progress>=100)return-1;for(const Ue of V){let $=re[Ue.field],z=ge[Ue.field];if(Ue.field==="priority"){const ee={critical:1,high:2,medium:3,low:4,minimal:5};$=ee[$==null?void 0:$.toLowerCase()]||999,z=ee[z==null?void 0:z.toLowerCase()]||999}else if(Ue.field==="status"){const ee={active:1,draft:2,in_progress:3,pending_approval:4,completed:5};$=ee[$==null?void 0:$.toLowerCase()]||999,z=ee[z==null?void 0:z.toLowerCase()]||999}else if(Ue.field==="wsjf_score"){if($==null){const ee=(me=re.priority)==null?void 0:me.toLowerCase();$=ee==="critical"?100:ee==="high"?75:ee==="medium"?50:25}if(z==null){const ee=(je=ge.priority)==null?void 0:je.toLowerCase();z=ee==="critical"?100:ee==="high"?75:ee==="medium"?50:25}}else if(Ue.field==="id"){const ee=$==null?void 0:$.match(/SD-(\d+)/),Q=z==null?void 0:z.match(/SD-(\d+)/);$=ee?parseInt(ee[1],10):999999,z=Q?parseInt(Q[1],10):999999}else Ue.field==="sequenceRank"&&($=typeof $=="number"?$:parseInt($,10)||999999,z=typeof z=="number"?z:parseInt(z,10)||999999);$==null&&($=Ue.direction==="asc"?999999:-999999),z==null&&(z=Ue.direction==="asc"?999999:-999999);let ne=0;if($<z?ne=-1:$>z&&(ne=1),ne!==0)return Ue.direction==="asc"?ne:-ne}return 0}))(lt,I),G=k=>{const V=k==null?void 0:k.toLowerCase();return V==="archived"||V==="completed"||V==="complete"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 transition-all duration-200 hover:scale-105",children:[a.jsx(wi,{className:"w-3 h-3 mr-1"}),"Archived"]}):V==="draft"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 transition-all duration-200 hover:scale-105",children:[a.jsx(Zl,{className:"w-3 h-3 mr-1"}),"Draft"]}):V==="on_hold"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400 transition-all duration-200 hover:scale-105",children:[a.jsx(tr,{className:"w-3 h-3 mr-1"}),"On Hold"]}):V==="cancelled"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 transition-all duration-200 hover:scale-105",children:[a.jsx(pr,{className:"w-3 h-3 mr-1"}),"Cancelled"]}):a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 transition-all duration-200 hover:scale-105",children:[a.jsx(zn,{className:"w-3 h-3 mr-1 animate-pulse"}),"Active"]})};return a.jsxs("div",{className:s?"p-3":"p-6",children:[a.jsxs("div",{className:s?"mb-3":"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{children:a.jsxs("h1",{className:`${s?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white flex items-center`,children:[a.jsx(eo,{className:"w-6 h-6 mr-2 text-primary-500 animate-pulse"}),"Strategic Directives"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cm,{onRefresh:o,isCompact:s}),a.jsxs("button",{onClick:()=>u("/directive-lab?mode=quick"),className:`flex items-center ${s?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[a.jsx(_m,{className:`${s?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]})]})]}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Vw,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 ${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx("input",{type:"text",placeholder:"Search by ID, title, or description...",value:x,onChange:k=>p(k.target.value),className:`w-full ${s?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200`}),x&&a.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(pr,{className:`${s?"w-4 h-4":"w-5 h-5"}`})})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[a.jsxs("button",{onClick:()=>P(!R),className:`flex items-center gap-2 ${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 w-full justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[R?a.jsx(ur,{className:`${s?"w-4 h-4":"w-5 h-5"}`}):a.jsx(Et,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx(Yl,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx("span",{className:"font-medium",children:"Filters"})]}),a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:[lt.length," of ",e.length,lt.filter(k=>k.rolled_triage).length>0&&a.jsxs("span",{className:"ml-1",children:["(",lt.filter(k=>k.rolled_triage==="High").length,"H /",lt.filter(k=>k.rolled_triage==="Medium").length,"M /",lt.filter(k=>k.rolled_triage==="Low").length,"L /",lt.filter(k=>k.rolled_triage==="Future").length,"F)"]})]})})]}),R&&a.jsxs("div",{className:"mt-4 bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg transition-all duration-300 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Status"}),a.jsxs("select",{value:b,onChange:k=>y(k.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"active,draft",children:"Active & Draft (Default)"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"draft",children:"Draft Only"}),a.jsx("option",{value:"deferred",children:"Deferred"}),a.jsx("option",{value:"on_hold",children:"On Hold"}),a.jsx("option",{value:"cancelled",children:"Cancelled"}),a.jsx("option",{value:"archived",children:"Archived/Completed"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Priority"}),a.jsxs("select",{value:j,onChange:k=>T(k.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Priorities"}),a.jsx("option",{value:"critical,high",children:"Critical & High (Default)"}),a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Application"}),a.jsxs("select",{value:N,onChange:k=>C(k.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Applications"}),a.jsx("option",{value:"EHG",children:"EHG (Default)"}),a.jsx("option",{value:"EHG_ENGINEER",children:"EHG Engineer"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Category"}),a.jsxs("select",{value:le,onChange:k=>_(k.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Categories"}),[...new Set(e.map(k=>k.category).filter(Boolean))].map(k=>a.jsx("option",{value:k,children:k},k))]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-600",children:[a.jsx("div",{className:"flex items-center gap-2",children:X&&a.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 flex items-center gap-1`,children:[a.jsx(Yl,{className:"w-4 h-4"}),"Filtering applied"]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[X&&a.jsxs("button",{onClick:ot,className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-2 font-medium border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500`,children:[a.jsx(pr,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Clear All"]}),a.jsxs("button",{onClick:Ze,className:`${s?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"} bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg transform hover:scale-105`,children:[a.jsx(xh,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Done"]})]})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3 mt-3",children:[a.jsxs("button",{onClick:()=>K(!O),className:`flex items-center gap-2 ${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 w-full justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[O?a.jsx(ur,{className:`${s?"w-4 h-4":"w-5 h-5"}`}):a.jsx(Et,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx(NT,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx("span",{className:"font-medium",children:"Sorting"})]}),a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:`${s?"text-xs":"text-sm"} text-blue-600 dark:text-blue-400 font-medium`,children:I.map(k=>k.label).join("  ")})})]}),O&&a.jsxs("div",{className:"mt-4 bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg transition-all duration-300 animate-in slide-in-from-top-2",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{onChange:k=>{const V=W[k.target.value];V&&M(V)},className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg`,children:[a.jsx("option",{value:"",children:"Load Preset..."}),Object.keys(W).map(k=>a.jsx("option",{value:k,children:k},k))]}),a.jsxs("button",{onClick:()=>te(!0),className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center gap-2`,children:[a.jsx(gs,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Save Current"]}),a.jsxs("button",{onClick:()=>M([{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}]),className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center gap-2`,children:[a.jsx(qT,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Reset"]})]})}),a.jsx("div",{className:"space-y-3",children:I.map((k,V)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-600",children:[a.jsx(OT,{className:`${s?"w-4 h-4":"w-5 h-5"} text-gray-400 cursor-move`}),a.jsxs("span",{className:`${s?"text-xs":"text-sm"} font-medium text-gray-500 dark:text-gray-400 w-20`,children:[V===0?"Primary":V===1?"Secondary":V===2?"Tertiary":`Level ${V+1}`,":"]}),a.jsxs("select",{value:k.field,onChange:re=>{const ge=[...I],me={wsjf_score:"WSJF Score",priority:"Priority",status:"Status",progress:"Progress",sequenceRank:"Sequence Rank",created_at:"Created Date",updated_at:"Last Updated",title:"Title",id:"ID",readiness:"Ready Score",must_have_count:"Story Count"};ge[V]={...k,field:re.target.value,label:me[re.target.value]||re.target.value},M(ge)},className:`flex-1 ${s?"px-3 py-2 text-xs":"px-4 py-2.5 text-sm"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg`,children:[a.jsx("option",{value:"wsjf_score",children:"WSJF Score"}),a.jsx("option",{value:"priority",children:"Priority"}),a.jsx("option",{value:"status",children:"Status"}),a.jsx("option",{value:"progress",children:"Progress"}),a.jsx("option",{value:"sequenceRank",children:"Sequence Rank"}),a.jsx("option",{value:"created_at",children:"Created Date"}),a.jsx("option",{value:"updated_at",children:"Last Updated"}),a.jsx("option",{value:"title",children:"Title"}),a.jsx("option",{value:"id",children:"ID"}),a.jsx("option",{value:"readiness",children:"Ready Score"}),a.jsx("option",{value:"must_have_count",children:"Story Count"})]}),a.jsxs("button",{onClick:()=>{const re=[...I];re[V]={...k,direction:k.direction==="asc"?"desc":"asc"},M(re)},className:`${s?"px-3 py-2":"px-4 py-2.5"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2`,children:[k.direction==="asc"?a.jsx(_T,{className:`${s?"w-3 h-3":"w-4 h-4"}`}):a.jsx(ST,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),a.jsx("span",{className:`${s?"text-xs":"text-sm"}`,children:k.direction==="asc"?"Ascending":"Descending"})]}),I.length>1&&a.jsx("button",{onClick:()=>{M(I.filter((re,ge)=>ge!==V))},className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:a.jsx(to,{className:`${s?"w-4 h-4":"w-5 h-5"}`})})]},V))}),I.length<5&&a.jsxs("button",{onClick:()=>{M([...I,{field:"priority",direction:"desc",label:"Priority"}])},className:`mt-3 ${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-gray-400 dark:hover:border-gray-500 w-full flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400`,children:[a.jsx(Nm,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Add Sort Level"]}),a.jsxs("button",{onClick:()=>{const k=[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}];M(k),localStorage.setItem("sd-sort-levels",JSON.stringify(k));const V={"Strategic Priority":[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],Default:[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],"WSJF Priority":[{field:"wsjf_score",direction:"desc",label:"WSJF Score"},{field:"status",direction:"asc",label:"Status"},{field:"created_at",direction:"desc",label:"Created Date"}],"Progress Tracking":[{field:"progress",direction:"asc",label:"Progress"},{field:"priority",direction:"desc",label:"Priority"},{field:"title",direction:"asc",label:"Title"}],"Recent Activity":[{field:"updated_at",direction:"desc",label:"Last Updated"},{field:"status",direction:"asc",label:"Status"}]};U(V),localStorage.setItem("sd-saved-sorts",JSON.stringify(V))},className:`mt-3 ${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-blue-600 text-white rounded-lg hover:bg-blue-700 w-full flex items-center justify-center gap-2`,children:[a.jsx(Cr,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Reset to Strategic Priority Sort"]}),S&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Save Sort Configuration"}),a.jsx("input",{type:"text",value:A,onChange:k=>B(k.target.value),placeholder:"Enter preset name...",className:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-lg mb-4",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{onClick:()=>{te(!1),B("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"}),a.jsx("button",{onClick:()=>{A&&(U({...W,[A]:I}),te(!1),B(""))},className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:"Save"})]})]})}),a.jsx("div",{className:"flex items-center justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("button",{onClick:()=>K(!1),className:`${s?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"} bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg transform hover:scale-105`,children:[a.jsx(xh,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Apply Sorting"]})})]})]})]})]}),lt.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[a.jsx(Ge,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e.length===0?"No strategic directives found":`No ${b==="all"?"":b} directives found`})]}):a.jsx("div",{className:"space-y-4",children:F.map(k=>{var V,re,ge;return a.jsx("div",{className:`group bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${Ke(k.priority)}`,children:a.jsxs("div",{className:`${s?"p-3":"p-6"} relative`,children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:()=>_t(k.id),className:"mr-2 p-1 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/20 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 transform hover:scale-105","aria-label":d===k.id?"Collapse":"Expand",children:a.jsx(Et,{className:`w-4 h-4 transition-transform duration-200 ease-in-out ${d===k.id?"rotate-90":""}`})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{className:"inline-flex items-center group",children:[a.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-mono text-lg font-bold",children:k.id}),a.jsx("button",{onClick:me=>{me.stopPropagation(),yr(k.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-2",title:"Copy ID",children:E===k.id?a.jsx(ka,{className:"w-3 h-3 text-green-500"}):a.jsx(wm,{className:"w-3 h-3 text-gray-500"})})]})}),a.jsx("h2",{className:`${s?"text-base":"text-xl"} font-semibold text-gray-900 dark:text-white ${s?"line-clamp-2":""}`,children:k.title||"Untitled"})]})]}),a.jsxs("div",{className:`${s?"mt-2":"mt-4"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 flex items-center`,children:["Progress",k.progressTrend&&(k.progressTrend>0?a.jsx(ks,{className:"w-3 h-3 ml-1 text-green-500"}):a.jsx(En,{className:"w-3 h-3 ml-1 text-red-500"}))]}),a.jsxs("span",{className:`${s?"text-xs":"text-sm"} font-semibold flex items-center`,children:[k.progress,"%",k.progress===100&&a.jsx(eo,{className:"w-3 h-3 ml-1 text-green-500 animate-pulse"})]})]}),a.jsx("div",{className:`w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${s?"h-2":"h-3"} shadow-inner`,children:a.jsx("div",{className:`${s?"h-2":"h-3"} rounded-full transition-all duration-1000 ease-out ${Er(k.progress)}`,style:{width:`${k.progress}%`,boxShadow:k.progress===100?"0 0 10px rgba(34, 197, 94, 0.5)":"none"}})})]})]}),a.jsxs("div",{className:`${s?"ml-2":"ml-4"} flex flex-col items-end ${s?"space-y-1":"space-y-2"}`,children:[a.jsx("div",{className:`flex ${s?"space-x-1":"space-x-2"}`,children:n===k.id?a.jsxs("button",{disabled:!0,className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-green-500 text-white rounded flex items-center`,children:[a.jsx(Tn,{className:`${s?"w-3 h-3":"w-4 h-4"} mr-1`}),s?" Working":" Working On"]}):a.jsxs("button",{onClick:()=>r&&r(k.id),className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center`,children:[a.jsx(Tn,{className:`${s?"w-3 h-3":"w-4 h-4"} ${s?"":"mr-1"} animate-pulse`}),s?"Work On":"Work On This"]})}),a.jsxs("div",{className:`${s?"mt-2 gap-1":"mt-3 gap-2"} flex flex-wrap items-end justify-end`,children:[a.jsxs("div",{className:"relative inline-block",children:[a.jsxs("button",{onClick:me=>{me.stopPropagation(),pt(be===k.id?null:k.id)},className:"group flex items-center gap-1 hover:opacity-80 transition-opacity",children:[G(k.status),a.jsx(Zl,{className:"w-3 h-3 text-gray-500 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),be===k.id&&a.jsx("div",{className:"absolute left-0 mt-1 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:a.jsx("div",{className:"py-1",children:["active","draft","on_hold","cancelled","archived"].map(me=>a.jsxs("button",{onClick:je=>{je.stopPropagation(),l&&l(k.id,me),pt(null)},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${k.status===me?"bg-gray-50 dark:bg-gray-700/50 text-primary-600":"text-gray-700 dark:text-gray-200"}`,children:[a.jsx("span",{className:"capitalize",children:me}),k.status===me&&a.jsx(ka,{className:"w-3 h-3"})]},me))})})]}),k.targetApplication&&a.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`,children:k.targetApplication.replace("_"," ")}),a.jsxs("button",{onClick:me=>{me.stopPropagation(),u(`/backlog?sd=${k.sd_id||k.id}`)},className:`flex items-center ${s?"px-2 py-0.5 text-xs":"px-2 py-1 text-xs"} transition-all duration-200 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded`,title:`${k.total_backlog_items||k.total_items||k.backlog_count||0} backlog items`,children:[a.jsx(wi,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),a.jsx("span",{className:"ml-1 text-xs",children:k.total_backlog_items||k.total_items||k.backlog_count||0})]}),(k.priority||k.rolled_triage)&&a.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`,children:s?((re=(V=k.priority)==null?void 0:V[0])==null?void 0:re.toUpperCase())||((ge=k.rolled_triage)==null?void 0:ge[0]):`${k.priority||k.rolled_triage}`}),k.category&&a.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:k.category})]}),k.checklist&&k.checklist.length>0&&a.jsx("div",{className:"text-sm text-gray-600",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(ka,{className:"w-4 h-4 mr-1"}),k.checklist.filter(me=>me.checked).length,"/",k.checklist.length]})})]})]}),k.hasBacklogItems&&a.jsxs("div",{className:`${s?"mt-3":"mt-4"} pt-3 border-t border-gray-200 dark:border-gray-700`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("button",{onClick:()=>{Mi(me=>{const je=new Set(me);return je.has(k.id)?je.delete(k.id):je.add(k.id),je})},className:`${s?"text-xs":"text-sm"} font-medium text-gray-700 dark:text-gray-300 flex items-center hover:text-purple-600 dark:hover:text-purple-400 transition-colors`,children:[xt.has(k.id)?a.jsx(Et,{className:"w-4 h-4 mr-1"}):a.jsx(ur,{className:"w-4 h-4 mr-1"}),a.jsx(gh,{className:"w-4 h-4 mr-1"}),"Backlog Overview"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[L[k.id]&&!xt.has(k.id)&&a.jsx("button",{onClick:()=>Gt(k.id,!0),disabled:ae.has(k.id),className:`p-1 text-gray-500 hover:text-purple-600 dark:text-gray-400 dark:hover:text-purple-400 transition-colors ${ae.has(k.id)?"opacity-50 cursor-not-allowed":""}`,title:"Refresh summary",children:a.jsx(Cr,{className:`w-4 h-4 ${ae.has(k.id)?"animate-spin":""}`})}),a.jsx("span",{className:`${s?"text-xs":"text-sm"} bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-2 py-1 rounded-full`,children:k.backlogItemCount})]})]}),!xt.has(k.id)&&a.jsx(a.Fragment,{children:L[k.id]?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:`${s?"text-xs":"text-sm"} text-gray-700 dark:text-gray-300 leading-relaxed`,children:L[k.id].summary}),(L[k.id].generated_at||L[k.id].from_database)&&a.jsx("div",{className:"flex items-center justify-between mt-2",children:a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[L[k.id].from_database&&a.jsxs(a.Fragment,{children:[a.jsx(mo,{className:"w-3 h-3 mr-1"}),"Stored in database"]}),L[k.id].generated_at&&a.jsxs("span",{className:"ml-2",children:["Generated: ",new Date(L[k.id].generated_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})}),a.jsxs("div",{className:`flex items-center space-x-2 ${s?"text-xs":"text-sm"}`,children:[a.jsxs("span",{className:"text-red-600 dark:text-red-400",children:[" ",k.h_count," High"]}),a.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[" ",k.m_count," Medium"]}),a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[" ",k.l_count," Low"]}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",k.future_count," Future"]})]}),L[k.id].generated_at&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:["Generated: ",new Date(L[k.id].generated_at).toLocaleString()]})]}):a.jsx("div",{className:"space-y-2",children:ae.has(k.id)?a.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 flex items-center`,children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-purple-500 mr-2"}),"Generating AI summary..."]}):a.jsxs("button",{onClick:()=>Gt(k.id),className:`inline-flex items-center ${s?"text-xs px-2 py-1":"text-sm px-3 py-1"} bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/30 dark:hover:bg-purple-800/30 text-purple-800 dark:text-purple-300 rounded transition-colors`,children:[a.jsx(gh,{className:"w-3 h-3 mr-1"}),"Generate AI Summary"]})})})]}),d===k.id&&a.jsxs("div",{className:"mt-6 border-t pt-6",children:[(k.h_count>0||k.m_count>0||k.l_count>0||k.future_count>0)&&a.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[a.jsx(Ge,{className:"w-4 h-4 mr-2 text-blue-600"}),"Backlog Details"]}),a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["H: ",k.h_count||0,"  M: ",k.m_count||0,"  L: ",k.l_count||0,k.future_count>0&&`  Future: ${k.future_count}`,k.must_have_count>0&&`  Must-have: ${k.must_have_count}`]})]})}),k.checklist&&k.checklist.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[a.jsx(Tn,{className:"w-5 h-5 mr-2"}),"Requirements Checklist"]}),a.jsxs("div",{className:"space-y-2",children:[k.checklist.slice(0,5).map((me,je)=>a.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:me.checked,onChange:()=>gt(k.id,je),className:"mr-3 w-4 h-4 text-primary-600 rounded"}),a.jsx("span",{className:`${me.checked?"line-through text-gray-500":""}`,children:me.text})]},je)),k.checklist&&k.checklist.length>5&&a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",k.checklist.length-5," more items"]})]})]}),a.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Content Preview"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded max-h-64 overflow-y-auto",children:a.jsx(Eh,{children:k.content.substring(0,500)+(k.content.length>500?"...":"")})}),a.jsx("span",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"Full content available in detail view"})]})]}),d===k.id&&a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-wrap gap-2 justify-between items-center",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.storyCount>0?a.jsxs(ql,{to:`/stories/${k.sdKey}`,className:"inline-flex items-center px-3 py-1.5 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:[" View ",k.storyCount," Stories"]}):a.jsx("button",{onClick:()=>generateStoriesForSD(k.sdKey),className:"inline-flex items-center px-3 py-1.5 text-sm text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 border border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-all duration-200",children:" Generate Stories"}),k.checklist&&k.checklist.length>0&&a.jsxs("button",{onClick:()=>Lt(k),className:"inline-flex items-center px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200",children:[" View All ",k.checklist.length," Tasks"]}),a.jsx("button",{onClick:()=>Lt(k),className:"inline-flex items-center px-3 py-1.5 text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 border border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all duration-200",children:" Full Document"})]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated ",new Date(k.updatedAt).toLocaleDateString()]})]})})]})},k.id)})})]})}function yx({prds:e,isCompact:t,detailMode:r}){const{id:n}=Ff(),s=Ei(),[i,o]=w.useState("list"),[l,c]=w.useState(null);w.useEffect(()=>{if(r&&n){const d=e.find(h=>h.id===n);d?(c(d),o("detail"),document.title=`${d.title||d.id} - LEO Protocol Dashboard`):(console.warn(`PRD with id '${n}' not found, redirecting to list`),s("/prds",{replace:!0}))}else r||(o("list"),c(null),document.title="PRDs - LEO Protocol Dashboard")},[n,r,e,s]);const u=d=>{if(!d||!d.id){console.error("Invalid PRD for navigation:",d);return}try{s(`/prds/${d.id}`)}catch(h){console.error("Navigation error:",h)}};return i==="detail"&&l?a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>s("/prds"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[a.jsx(Et,{className:"w-4 h-4 mr-1 rotate-180"}),"Back to PRDs"]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:l.directiveTitle&&`Strategic Directive: ${l.directiveTitle}`})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.status})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Priority"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.priority})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.phase})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),a.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[l.progress,"%"]})]})]}),a.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:a.jsx(Eh,{children:l.content||"No content available"})}),l.checklist&&l.checklist.length>0&&a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Implementation Checklist"}),a.jsx("div",{className:"space-y-2",children:l.checklist.map((d,h)=>a.jsxs("div",{className:"flex items-start p-3 rounded bg-gray-50 dark:bg-gray-700",children:[d.checked?a.jsx(ka,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}):a.jsx(Hw,{className:"w-5 h-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0"}),a.jsx("span",{className:`flex-1 ${d.checked?"line-through text-gray-500":""}`,children:d.text}),d.phase&&a.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded ml-2",children:d.phase})]},h))})]})]})]}):a.jsxs("div",{className:t?"p-3":"p-6",children:[a.jsx("div",{className:t?"mb-3":"mb-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:`${t?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white`,children:"PRDs"}),a.jsx("p",{className:`text-gray-600 dark:text-gray-400 ${t?"text-sm mt-1":"mt-2"}`,children:"Product Requirements Documents - Technical implementation details"})]})})}),e.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[a.jsx(Ge,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No PRDs found"})]}):a.jsx("div",{className:"space-y-4",children:e.map(d=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Ge,{className:"w-6 h-6 text-blue-600 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.directiveTitle&&`SD: ${d.directiveTitle}`}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:d.description}),a.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.priority==="high"?"bg-red-100 text-red-800":d.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:d.priority}),a.jsxs("span",{className:"text-xs text-gray-500",children:["Phase: ",d.phase]}),a.jsxs("span",{className:"text-xs text-gray-500",children:["Progress: ",d.progress,"%"]})]})]})]})}),a.jsx("div",{className:"ml-4 flex flex-col items-end space-y-2",children:a.jsx("button",{onClick:()=>u(d),className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors",children:"View Full"})})]})})},d.id))})]})}const Re=({children:e,variant:t="primary",size:r="medium",disabled:n=!1,loading:s=!1,onClick:i,type:o="button",fullWidth:l=!1,icon:c,iconPosition:u="left",ariaLabel:d,className:h="",...m})=>{const f=`
    inline-flex items-center justify-center
    font-medium transition-all duration-200
    rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    min-h-[44px] min-w-[44px]
  `,g={small:"px-3 py-1.5 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"},v={primary:`
      bg-blue-600 dark:bg-blue-600 text-white dark:text-white
      hover:bg-blue-700 dark:hover:bg-blue-700 active:bg-blue-800 dark:active:bg-blue-800
      focus:ring-blue-500 dark:focus:ring-blue-400
    `,secondary:`
      bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100
      hover:bg-gray-300 dark:hover:bg-gray-600 active:bg-gray-400 dark:active:bg-gray-500
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,ghost:`
      bg-transparent dark:bg-transparent text-gray-700 dark:text-gray-300
      hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,danger:`
      bg-red-600 dark:bg-red-600 text-white dark:text-white
      hover:bg-red-700 dark:hover:bg-red-700 active:bg-red-800 dark:active:bg-red-800
      focus:ring-red-500 dark:focus:ring-red-400
    `,success:`
      bg-green-600 dark:bg-green-600 text-white dark:text-white
      hover:bg-green-700 dark:hover:bg-green-700 active:bg-green-800 dark:active:bg-green-800
      focus:ring-green-500 dark:focus:ring-green-400
    `},b=l?"w-full":"",y=`
    ${f}
    ${g[r]}
    ${v[t]}
    ${b}
    ${h}
  `.trim().replace(/\s+/g," "),x=p=>{!n&&!s&&i&&i(p)};return a.jsxs("button",{type:o,className:y,disabled:n||s,onClick:x,"aria-label":d||(typeof e=="string"?e:void 0),"aria-busy":s,"aria-disabled":n||s,...m,children:[s&&a.jsx(Bw,{className:"w-4 h-4 mr-2 animate-spin"}),!s&&c&&u==="left"&&a.jsx(c,{className:"w-4 h-4 mr-2"}),e,!s&&c&&u==="right"&&a.jsx(c,{className:"w-4 h-4 ml-2"})]})},Ko=({type:e="text",label:t,name:r,value:n,onChange:s,onBlur:i,placeholder:o,required:l=!1,disabled:c=!1,error:u,success:d,helpText:h,validationPattern:m,minLength:f,maxLength:g,rows:v=4,options:b=[],autoComplete:y,className:x="",fullWidth:p=!0,showCharCount:j=!1,...T})=>{const[N,C]=w.useState(!1),[E,D]=w.useState(!1),[R,P]=w.useState("");w.useEffect(()=>{E&&m&&(new RegExp(m).test(n)?P(""):P("Invalid format"))},[n,m,E]);const I=`
    w-full px-4 py-3 
    border rounded-lg transition-all duration-200
    text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400
    min-h-[48px]
    focus:outline-none focus:ring-2 focus:ring-offset-1
    disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-60
    bg-white dark:bg-gray-700
   ${u||R?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400 focus:border-red-500 dark:focus:border-red-400":d?"border-green-500 dark:border-green-400 focus:ring-green-500 dark:focus:ring-green-400 focus:border-green-500 dark:focus:border-green-400":N?"border-blue-500 dark:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400"} ${x}`,M=()=>{C(!0)},W=_=>{C(!1),D(!0),i&&i(_)},U=_=>{s&&s(_),E||D(!0)},A=`input-${r||Math.random().toString(36).substr(2,9)}`,B=`${A}-error`,S=`${A}-help`,te=()=>{switch(e){case"textarea":return a.jsx("textarea",{id:A,name:r,value:n,onChange:U,onFocus:M,onBlur:W,placeholder:o,required:l,disabled:c,rows:v,minLength:f,maxLength:g,className:I,"aria-invalid":!!(u||R),"aria-describedby":`${u||R?B:""} ${h?S:""}`,...T});case"select":return a.jsxs("select",{id:A,name:r,value:n,onChange:U,onFocus:M,onBlur:W,required:l,disabled:c,className:I,"aria-invalid":!!(u||R),"aria-describedby":`${u||R?B:""} ${h?S:""}`,...T,children:[a.jsx("option",{value:"",children:"Select an option"}),b.map(_=>a.jsx("option",{value:_.value,children:_.label},_.value))]});default:return a.jsx("input",{id:A,type:e,name:r,value:n,onChange:U,onFocus:M,onBlur:W,placeholder:o,required:l,disabled:c,minLength:f,maxLength:g,autoComplete:y,className:I,"aria-invalid":!!(u||R),"aria-describedby":`${u||R?B:""} ${h?S:""}`,...T})}},le=p?"w-full":"";return a.jsxs("div",{className:`${le} mb-4`,children:[t&&a.jsxs("label",{htmlFor:A,className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",children:[t,l&&a.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[te(),a.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:[d&&!u&&!R&&a.jsx(ss,{className:"w-5 h-5 text-green-500","aria-label":"Valid input"}),(u||R)&&a.jsx(pr,{className:"w-5 h-5 text-red-500","aria-label":"Invalid input"})]})]}),j&&g&&a.jsxs("div",{className:"mt-1 text-sm text-right text-gray-500 dark:text-gray-400",children:[(n==null?void 0:n.length)||0," / ",g]}),(u||R)&&a.jsxs("div",{id:B,className:"mt-2 flex items-start text-sm text-red-600 dark:text-red-400",role:"alert",children:[a.jsx(tr,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),u||R]}),h&&!(u||R)&&a.jsxs("div",{id:S,className:"mt-2 flex items-start text-sm text-gray-600 dark:text-gray-400",children:[a.jsx($r,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),h]})]})},HA=({steps:e=[],currentStep:t=1,orientation:r="horizontal",showTimeEstimates:n=!0,showStepNumbers:s=!0,compact:i=!1,hideLabelsOnMobile:o=!1,onStepClick:l,className:c=""})=>{const u=(t-1)/(e.length-1)*100,d=e.reduce((y,x)=>y+(x.timeEstimate||0),0),h=e.slice(0,t-1).reduce((y,x)=>y+(x.timeEstimate||0),0),m=y=>{if(y<60)return`${y} min`;const x=Math.floor(y/60),p=y%60;return p>0?`${x}h ${p}m`:`${x}h`},f=y=>y<t-1?"completed":y===t-1?"current":y===t?"upcoming":"locked",g=(y,x)=>{switch(y){case"completed":return a.jsx(ss,{className:"w-4 h-4"});case"current":return s?x:null;case"upcoming":return s?x:null;case"locked":return a.jsx($T,{className:"w-3 h-3"});default:return x}},v=y=>{const x=f(y);l&&(x==="completed"||x==="current")&&l(y+1)},b=y=>{const x=f(y);return l&&(x==="completed"||x==="current")};return r==="vertical"?a.jsxs("div",{className:`${c}`,children:[n&&!i&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),a.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`},role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"})}),a.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-600 dark:text-gray-400",children:[a.jsxs("span",{children:[m(h)," completed"]}),a.jsxs("span",{children:[m(d-h)," remaining"]})]})]}),a.jsx("div",{className:"relative",children:e.map((y,x)=>{const p=f(x),j=x===e.length-1;return a.jsxs("div",{className:"flex items-start mb-8 last:mb-0",children:[!j&&a.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),a.jsx("button",{onClick:()=>v(x),disabled:!b(x),className:`
                    relative z-10 flex items-center justify-center
                    w-12 h-12 rounded-full border-2 transition-all
                    ${b(x)?"cursor-pointer":"cursor-default"}
                    ${p==="completed"?"bg-green-500 border-green-500 text-white":""}
                    ${p==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                    ${p==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                    ${p==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                  `,"aria-label":`Step ${x+1}: ${y.title} - ${p}`,children:g(p,x+1)}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h3",{className:`
                    font-medium text-base
                    ${p==="current"?"text-blue-600":""}
                    ${p==="completed"?"text-green-600":""}
                    ${p==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),y.description&&!i&&a.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:y.description}),n&&y.timeEstimate&&a.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[a.jsx(qr,{className:"w-3 h-3 mr-1"}),m(y.timeEstimate)]})]})]},x)})})]}):a.jsxs("div",{className:`${c}`,children:[n&&!i&&a.jsx("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(qr,{className:"w-4 h-4 mr-2 text-blue-600"}),a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Time: ",a.jsx("span",{className:"font-medium",children:m(h)})," of"," ",a.jsx("span",{className:"font-medium",children:m(d)})]})]}),a.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"% Complete"]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-300 dark:bg-gray-600"}),a.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-blue-600 dark:bg-blue-500 transition-all duration-300",style:{width:`${u}%`}}),a.jsx("div",{className:"relative flex justify-between",children:e.map((y,x)=>{const p=f(x);return a.jsxs("div",{className:`flex flex-col items-center ${i?"flex-1":""}`,children:[a.jsxs("div",{className:"relative group",children:[a.jsx("button",{onClick:()=>v(x),disabled:!b(x),className:`
                      relative z-10 flex items-center justify-center
                      w-12 h-12 rounded-full border-2 transition-all
                      ${b(x)?"cursor-pointer hover:scale-110":"cursor-default"}
                      ${p==="completed"?"bg-green-500 border-green-500 text-white":""}
                      ${p==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                      ${p==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                      ${p==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                    `,"aria-label":`Step ${x+1}: ${y.title} - ${p}`,title:y.title,children:g(p,x+1)}),o&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block md:hidden z-20",children:a.jsxs("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[y.title,a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:a.jsx("div",{className:"border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})})]}),a.jsxs("div",{className:`mt-3 text-center ${o?"hidden md:block":""}`,children:[a.jsx("p",{className:`
                    text-sm font-medium
                    ${p==="current"?"text-blue-600":""}
                    ${p==="completed"?"text-green-600":""}
                    ${p==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),n&&y.timeEstimate&&!i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:m(y.timeEstimate)})]})]},x)})})]})]})},qA=({onSubmissionSelect:e,onGroupCreate:t,selectedSubmissionId:r,onSelectionChange:n,refreshTrigger:s=0})=>{const[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[h,m]=w.useState([]),[f,g]=w.useState(!1),[v,b]=w.useState(null),[y,x]=w.useState(!1);w.useEffect(()=>{p()},[f,s]),w.useEffect(()=>{const I=()=>{b(null),x(!1)};if(v||y)return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[v,y]);const p=async()=>{try{c(!0);const I=new URLSearchParams;f&&I.append("uncombined","true"),I.append("since","30d");const M=await fetch(`/api/sdip/submissions?${I}`);if(!M.ok)throw new Error("Failed to load submissions");const W=await M.json();o(W),d(null)}catch(I){d(I.message),o([])}finally{c(!1)}},j=I=>{const M=h.includes(I)?h.filter(W=>W!==I):[...h,I];m(M),n==null||n(M)},T=I=>{e(I)},N=(I="intelligent")=>{h.length>=2&&t(h,I)},C=async I=>{if(confirm("Are you sure you want to delete this submission?"))try{if(!(await fetch(`/api/sdip/submissions/${I}`,{method:"DELETE"})).ok)throw new Error("Failed to delete submission");o(W=>W.filter(U=>U.id!==I)),m(W=>W.filter(U=>U!==I)),r===I&&e(null)}catch(M){console.error("Error deleting submission:",M),alert("Failed to delete submission. Please try again.")}},E=I=>{const M=new Date(I),U=Math.floor((new Date-M)/(1e3*60*60));return U<1?"Just now":U<24?`${U}h ago`:U<48?"Yesterday":M.toLocaleDateString()},D=I=>{const M=I.intent_summary||I.chairman_input||I.submission_title||"Untitled Submission";return M.length>60?M.substring(0,57)+"...":M},R=I=>{var W,U,A,B,S;let M="";return((U=(W=I.synthesis)==null?void 0:W.aligned)==null?void 0:U.length)>0?M=((A=I.synthesis.aligned[0])==null?void 0:A.text)||"":(B=I.impact_analysis)!=null&&B.summary?M=I.impact_analysis.summary:(S=I.strat_tac)!=null&&S.rationale&&(M=I.strat_tac.rationale),!M&&I.chairman_input&&(M=I.chairman_input.substring(0,100)+"..."),M.length>120?M.substring(0,117)+"...":M},P=I=>{var U;const M=((U=I.impact_analysis)==null?void 0:U.affected_components)||[];if(M.length===0)return null;const W=M.find(A=>A.impact_level==="high")||M[0];return(W==null?void 0:W.name)||(W==null?void 0:W.component)||null},O=I=>{var A,B;const M=I.status||"draft",W=I.current_step||1,U=Array.isArray(I.completed_steps)?I.completed_steps:[];return M==="submitted"||((A=I.gate_status)==null?void 0:A.status)==="submitted"||(B=I.gate_status)!=null&&B.resulting_sd_id||I.resulting_sd_id?{text:" Submitted",color:"text-green-700 bg-green-100 dark:bg-green-900/20 dark:text-green-300",icon:""}:M==="ready"||U.includes(7)||U.length===7&&W===7?{text:" Ready",color:"text-blue-700 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300",icon:""}:{text:" Draft",color:"text-yellow-700 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300",icon:""}},K=I=>i.filter(M=>M.group_id===I);return l?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 text-sm",children:"Recent Submissions"}),i.length>0&&a.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded",children:i.length})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Re,{onClick:()=>g(!f),variant:f?"primary":"ghost",size:"small",icon:Yl,ariaLabel:"Show uncombined only"}),h.length>=2&&a.jsxs("div",{className:"relative",children:[a.jsxs(Re,{onClick:I=>{I.stopPropagation(),x(!y)},variant:"primary",size:"small",icon:Ww,children:["Combine (",h.length,")"]}),y&&a.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-20 min-w-56",children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 px-2",children:"Combination Method:"}),[{id:"intelligent",name:" Intelligent",desc:"AI-driven optimal combination"},{id:"chronological",name:" Chronological",desc:"Preserve timeline order"},{id:"merge",name:" Smart Merge",desc:"Deduplicate and consensus"},{id:"priority",name:" Priority-based",desc:"Highest strategic impact first"},{id:"latest",name:" Latest Override",desc:"Most recent takes precedence"}].map(I=>a.jsxs("button",{onClick:M=>{M.stopPropagation(),N(I.id),x(!1)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex flex-col gap-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:I.name}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:I.desc})]},I.id))]})})]})]})]}),u&&a.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-400 flex items-start gap-2",children:[a.jsx(tr,{className:"w-5 h-5 text-red-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load submissions"}),a.jsx("p",{className:"text-red-600 text-sm",children:u}),a.jsx("button",{onClick:p,className:"mt-1 text-red-700 underline text-sm hover:no-underline",children:"Try again"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:i.length===0?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(qr,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"No submissions yet"}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Create your first submission to get started with the Directive Lab"}),a.jsx("button",{onClick:()=>e(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Submission"})]}):a.jsx("div",{className:"p-2",children:i.map(I=>{const M=O(I),W=D(I),U=R(I),A=P(I),B=h.includes(I.id),S=r===I.id,te=I.group_id?K(I.group_id):[],le=v===I.id;return a.jsx("div",{className:`p-3 mb-2 border rounded-lg transition-all cursor-pointer ${S?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700/50"}`,onClick:()=>T(I),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:_=>{_.stopPropagation(),j(I.id)},className:"mt-1 text-gray-400 hover:text-gray-600 transition-colors",children:B?a.jsx(ka,{className:"w-4 h-4 text-blue-600"}):a.jsx(Hw,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm leading-tight",children:W}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap font-medium ${M.color}`,children:M.text})]}),U&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 leading-relaxed",children:U}),A&&a.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[a.jsx(Ge,{className:"w-3 h-3 text-gray-400"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Affects: ",a.jsx("span",{className:"font-medium",children:A})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:E(I.created_at)}),I.group_id&&te.length>1&&a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:_=>{_.stopPropagation(),b(le?null:I.id)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[a.jsx(MT,{className:"w-3 h-3"}),a.jsxs("span",{className:"font-medium",children:[te.length," items"]}),a.jsx(ur,{className:`w-3 h-3 transition-transform ${le?"rotate-180":""}`})]}),le&&a.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-48",children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 px-2",children:"Linked Submissions:"}),te.map(_=>{const Ne=O(_),at=D(_);return a.jsxs("button",{onClick:be=>{be.stopPropagation(),T(_),b(null)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate",children:at}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${Ne.color}`,children:Ne.icon}),a.jsx(Ql,{className:"w-3 h-3 text-gray-400"})]})]},_.id)})]})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:_=>{_.stopPropagation(),T(I)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[a.jsx(RT,{className:"w-3 h-3"}),"View"]}),a.jsx("button",{onClick:_=>{_.stopPropagation(),C(I.id)},className:"flex items-center gap-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete submission",children:a.jsx(to,{className:"w-3 h-3"})})]})]})]})]})},I.id)})})}),h.length>0&&a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-700",children:a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:[h.length," selected"]}),h.length>=2&&a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Ready to combine "})]})})]})},WA=({isOpen:e=!0,onClose:t,selectedSubmissions:r,combineMethod:n="intelligent",onCreateGroup:s,onSuccess:i})=>{const[o,l]=w.useState(""),[c,u]=w.useState(n),[d,h]=w.useState(!1),[m,f]=w.useState(null),g=async b=>{if(b.preventDefault(),!!o.trim()){h(!0),f(null);try{const y=await fetch("/api/sdip/create-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_ids:r,group_name:o.trim(),method:c})});if(!y.ok){const p=await y.json();throw new Error(p.error||"Failed to create group")}const x=await y.json();console.log(" Group created successfully:",x),i?i(x):s&&await s(x),t(),l(""),u(n)}catch(y){f(y.message)}finally{h(!1)}}};if(!e)return null;const v=[{value:"intelligent",label:" Intelligent",desc:"AI-driven optimal combination"},{value:"chronological",label:" Chronological",desc:"Keep time order"},{value:"merge",label:" Merge & Dedupe",desc:"Remove duplicates"},{value:"priority",label:" Priority-based",desc:"Highest strategic impact first"},{value:"latest",label:" Latest Priority",desc:"Latest overrides"}];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ww,{className:"w-4 h-4 text-blue-600"}),a.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Combine ",r.length," Submissions"]})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:a.jsx(pr,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:g,className:"p-3 space-y-3",children:[m&&a.jsxs("div",{className:"flex items-start gap-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[a.jsx(tr,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:m})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"group-name",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name"}),a.jsx("input",{type:"text",id:"group-name",value:o,onChange:b=>l(b.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dashboard UX Improvements",required:!0,maxLength:100})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Combine Method"}),a.jsx("div",{className:"grid grid-cols-1 gap-1",children:v.map(b=>a.jsx("label",{className:`flex items-center justify-between p-2 text-xs border rounded cursor-pointer transition-colors ${c===b.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-600"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"combineMethod",value:b.value,checked:c===b.value,onChange:y=>u(y.target.value),className:"text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b.label}),a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:[" ",b.desc]})]})]})},b.value))})]}),a.jsxs("div",{className:"flex gap-2 pt-1",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!o.trim()||d,className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 border border-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Creating...":"Combine"})]})]})]})})},GA=({impactAnalysis:e,consistencyValidation:t,submission:r})=>{var d,h,m;const[n,s]=w.useState({overview:!0,components:!1,consistency:!1,recommendations:!1,mitigation:!1});if(!e&&!t)return a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-center",children:[a.jsx($r,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No impact analysis available for this submission"})]});const i=f=>{s(g=>({...g,[f]:!g[f]}))},o=f=>{switch(f){case"critical":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-100",accent:"text-red-600 dark:text-red-400",icon:It};case"high":return{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-100",accent:"text-orange-600 dark:text-orange-400",icon:tr};case"medium":return{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-900 dark:text-yellow-100",accent:"text-yellow-600 dark:text-yellow-400",icon:$r};case"low":return{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-100",accent:"text-green-600 dark:text-green-400",icon:ke};default:return{bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",text:"text-gray-900 dark:text-gray-100",accent:"text-gray-600 dark:text-gray-400",icon:$r}}},l=o((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)),c=l.icon,u=f=>({ui:gl,api:LT,database:mo,authentication:ki,navigation:Tn,performance:ks,"design-system":gl})[f]||$r;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-lg border ${l.bg} ${l.border} p-6`,children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("overview"),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(c,{className:`w-6 h-6 ${l.accent}`}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-lg font-semibold ${l.text}`,children:"Impact Analysis Overview"}),a.jsxs("p",{className:`text-sm ${l.text} opacity-75`,children:["Risk Level: ",((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)||"unknown").toUpperCase()]})]})]}),n.overview?a.jsx(ur,{className:`w-5 h-5 ${l.accent}`}):a.jsx(Et,{className:`w-5 h-5 ${l.accent}`})]}),n.overview&&a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:e.impact_score}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Impact Score"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:`text-2xl font-bold ${l.accent}`,children:[e.effort_multiplier,"x"]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Effort Multiplier"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:((d=e.affected_components)==null?void 0:d.length)||0}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Affected Components"})]})]}),t&&a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${t.passed?"text-green-600":"text-red-600"}`,children:t.score}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Consistency Score"})]})]})]}),(e==null?void 0:e.affected_components)&&e.affected_components.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("components"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(gl,{className:"w-5 h-5 mr-2"}),"Affected Components"]}),n.components?a.jsx(ur,{className:"w-5 h-5 text-gray-400"}):a.jsx(Et,{className:"w-5 h-5 text-gray-400"})]}),n.components&&a.jsx("div",{className:"mt-4 space-y-3",children:e.affected_components.map((f,g)=>{const v=u(f.name),b=o(f.risk_level);return a.jsxs("div",{className:`p-4 rounded-lg border ${b.bg} ${b.border}`,children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(v,{className:`w-5 h-5 ${b.accent}`}),a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${b.text}`,children:f.name}),a.jsxs("p",{className:`text-sm ${b.text} opacity-75`,children:["Risk: ",f.risk_level,"  Confidence: ",Math.round((f.confidence||0)*100),"%"]})]})]})}),f.dependencies&&f.dependencies.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:`text-xs ${b.text} opacity-60 mb-1`,children:"Dependencies:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:f.dependencies.map((y,x)=>a.jsx("span",{className:`px-2 py-1 rounded text-xs ${b.accent} bg-white dark:bg-gray-700`,children:y},x))})]})]},g)})})]}),t&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("consistency"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(ki,{className:"w-5 h-5 mr-2"}),"Consistency Validation",!t.passed&&a.jsx(dn,{className:"w-5 h-5 ml-2 text-red-500"})]}),n.consistency?a.jsx(ur,{className:"w-5 h-5 text-gray-400"}):a.jsx(Et,{className:"w-5 h-5 text-gray-400"})]}),n.consistency&&a.jsxs("div",{className:"mt-4 space-y-4",children:[a.jsxs("div",{className:`p-4 rounded-lg ${t.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[a.jsxs("div",{className:"flex items-center",children:[t.passed?a.jsx(ke,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}):a.jsx(dn,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),a.jsx("span",{className:`font-medium ${t.passed?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:t.passed?"Validation Passed":"Validation Failed"})]}),t.blocking_issues&&t.blocking_issues.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Blocking Issues:"}),t.blocking_issues.map((f,g)=>a.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200 mb-1",children:[" ",f.message,f.suggestion&&a.jsxs("div",{className:"text-xs text-red-600 dark:text-red-300 ml-4 mt-1",children:["Suggestion: ",f.suggestion]})]},g))]})]}),t.category_scores&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Category Breakdown"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.category_scores).map(([f,g])=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:f.replace("_"," ")}),a.jsx("span",{className:`text-sm font-bold ${g>=70?"text-green-600":g>=50?"text-yellow-600":"text-red-600"}`,children:g})]}),a.jsx("div",{className:"mt-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all ${g>=70?"bg-green-500":g>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${g}%`}})})]},f))})]})]})]}),((e==null?void 0:e.recommendations)||(t==null?void 0:t.recommendations))&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("recommendations"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(Tn,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),n.recommendations?a.jsx(ur,{className:"w-5 h-5 text-gray-400"}):a.jsx(Et,{className:"w-5 h-5 text-gray-400"})]}),n.recommendations&&a.jsxs("div",{className:"mt-4 space-y-3",children:[(h=e==null?void 0:e.recommendations)==null?void 0:h.map((f,g)=>a.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx($r,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[f.type,": ",f.description]}),f.effort_reduction&&a.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Effort reduction: ",f.effort_reduction]})]})]})},`impact-${g}`)),(m=t==null?void 0:t.recommendations)==null?void 0:m.map((f,g)=>a.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ke,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:f.message}),f.priority&&a.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs mt-1 ${f.priority==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":f.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":f.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[f.priority," priority"]})]})]})},`consistency-${g}`))]})]}),(e==null?void 0:e.mitigation_strategies)&&e.mitigation_strategies.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("mitigation"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(zn,{className:"w-5 h-5 mr-2"}),"Mitigation Strategies"]}),n.mitigation?a.jsx(ur,{className:"w-5 h-5 text-gray-400"}):a.jsx(Et,{className:"w-5 h-5 text-gray-400"})]}),n.mitigation&&a.jsx("div",{className:"mt-4 space-y-2",children:e.mitigation_strategies.map((f,g)=>a.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx(zn,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:f})]},g))})]}),(e==null?void 0:e.breaking_changes)&&e.breaking_changes.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(It,{className:"w-6 h-6 text-red-600 dark:text-red-400 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Breaking Changes Detected"})]}),a.jsx("div",{className:"space-y-2",children:e.breaking_changes.map((f,g)=>a.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[a.jsxs("strong",{children:[f.type,":"]})," ",f.description,f.keyword&&a.jsxs("span",{className:"ml-2 text-xs bg-red-200 dark:bg-red-800 px-2 py-1 rounded",children:['"',f.keyword,'"']})]},g))})]})]})},KA=({type:e,level:t,showTooltip:r=!0})=>{const[n,s]=w.useState(!1),o={UI:{label:"UI",description:"User Interface complexity",colors:{HIGH:"bg-blue-600 text-white",MEDIUM:"bg-blue-400 text-white",LOW:"bg-blue-200 text-blue-900"}},DB:{label:"DB",description:"Database impact and complexity",colors:{HIGH:"bg-purple-600 text-white",MEDIUM:"bg-purple-400 text-white",LOW:"bg-purple-200 text-purple-900"}},COMPLEX:{label:"COMPLEX",description:"Overall implementation complexity",colors:{HIGH:"bg-orange-600 text-white",MEDIUM:"bg-orange-400 text-white",LOW:"bg-orange-200 text-orange-900"}},ACCESS:{label:"ACCESS",description:"Access control and permissions",colors:{HIGH:"bg-green-600 text-white",MEDIUM:"bg-green-400 text-white",LOW:"bg-green-200 text-green-900"}},SECURITY:{label:"SECURITY",description:"Security implications",colors:{HIGH:"bg-red-600 text-white",MEDIUM:"bg-red-400 text-white",LOW:"bg-red-200 text-red-900"}},PROCESS:{label:"PROCESS",description:"Business process impact",colors:{HIGH:"bg-yellow-600 text-white",MEDIUM:"bg-yellow-400 text-gray-900",LOW:"bg-yellow-200 text-yellow-900"}}}[e];if(!o)return null;const l=o.colors[t]||o.colors.LOW;return a.jsxs("div",{className:"inline-flex items-center relative",children:[a.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${l} cursor-help transition-opacity hover:opacity-90`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[o.label,":",t,r&&a.jsx($r,{className:"w-3 h-3 ml-1 opacity-70"})]}),r&&n&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap",children:[a.jsx("div",{className:"font-semibold",children:o.description}),a.jsxs("div",{className:"text-gray-300 mt-1",children:[t==="HIGH"&&"Significant impact - careful review needed",t==="MEDIUM"&&"Moderate impact - standard review",t==="LOW"&&"Minimal impact - routine change"]}),a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900"})]})})]})},Fu=({badges:e})=>{if(!e)return null;const t=["UI","DB","COMPLEX","ACCESS","SECURITY","PROCESS"];return a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.map(r=>{const n=e[r];return n?a.jsx(KA,{type:r,level:n},r):null})})},zu=e=>{const t={},r=e.toLowerCase();return(r.includes("ui")||r.includes("interface")||r.includes("component"))&&(t.UI=r.includes("complex")||r.includes("major")?"HIGH":r.includes("update")||r.includes("modify")?"MEDIUM":"LOW"),(r.includes("database")||r.includes("schema")||r.includes("migration"))&&(t.DB=r.includes("migration")||r.includes("schema")?"HIGH":r.includes("query")||r.includes("index")?"MEDIUM":"LOW"),r.includes("architecture")||r.includes("refactor")||r.includes("system")?t.COMPLEX="HIGH":r.includes("feature")||r.includes("implement")?t.COMPLEX="MEDIUM":(r.includes("fix")||r.includes("update"))&&(t.COMPLEX="LOW"),(r.includes("permission")||r.includes("role")||r.includes("access"))&&(t.ACCESS=r.includes("admin")||r.includes("role")?"HIGH":"MEDIUM"),r.includes("security")||r.includes("auth")||r.includes("encrypt")?t.SECURITY=r.includes("auth")||r.includes("encrypt")?"HIGH":"MEDIUM":(r.includes("api")||r.includes("endpoint"))&&(t.SECURITY="LOW"),(r.includes("workflow")||r.includes("process")||r.includes("business"))&&(t.PROCESS=r.includes("workflow")?"HIGH":"MEDIUM"),Object.keys(t).length===0&&(t.COMPLEX="LOW"),t},JA=({message:e,type:t="info",duration:r=5e3,onClose:n,position:s="top-right"})=>{const[i,o]=w.useState(!1),[l,c]=w.useState(!1);w.useEffect(()=>{setTimeout(()=>o(!0),10);const g=setTimeout(()=>{u()},r);return()=>clearTimeout(g)},[r]);const u=()=>{c(!0),setTimeout(()=>{o(!1),n==null||n()},300)},d={success:{icon:ke,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-800 dark:text-green-200",iconColor:"text-green-600 dark:text-green-400"},error:{icon:tr,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-800 dark:text-red-200",iconColor:"text-red-600 dark:text-red-400"},warning:{icon:It,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",textColor:"text-yellow-800 dark:text-yellow-200",iconColor:"text-yellow-600 dark:text-yellow-400"},info:{icon:$r,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-800 dark:text-blue-200",iconColor:"text-blue-600 dark:text-blue-400"}},h=d[t]||d.info,m=h.icon,f={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"};return a.jsx("div",{className:`
        fixed z-50 
        ${f[s]}
        transition-all duration-300 ease-in-out
        ${i&&!l?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"}
      `,children:a.jsxs("div",{className:`
          flex items-center gap-3 p-4 rounded-lg shadow-lg
          ${h.bgColor} ${h.borderColor} ${h.textColor}
          border min-w-[300px] max-w-md
        `,children:[a.jsx(m,{className:`w-5 h-5 ${h.iconColor} flex-shrink-0`}),a.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),a.jsx("button",{onClick:u,className:`${h.iconColor} hover:opacity-70 transition-opacity`,"aria-label":"Close notification",children:a.jsx(pr,{className:"w-4 h-4"})})]})})},XA=({children:e})=>{const[t,r]=w.useState([]),n=(i,o="info",l=5e3)=>{const c=Date.now(),u={id:c,message:i,type:o,duration:l};return r(d=>[...d,u]),c},s=i=>{r(o=>o.filter(l=>l.id!==i))};return w.useEffect(()=>(window.showToast=n,()=>{delete window.showToast}),[]),a.jsxs(a.Fragment,{children:[e,a.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:t.map((i,o)=>a.jsx("div",{className:"pointer-events-auto",style:{position:"fixed",top:`${20+o*80}px`,right:"20px",transition:"all 0.3s ease-in-out"},children:a.jsx(JA,{message:i.message,type:i.type,duration:i.duration,onClose:()=>s(i.id),position:"none"})},i.id))})]})},QA=()=>{const e=(t,r="info",n=5e3)=>{if(window.showToast)return window.showToast(t,r,n);console.warn("Toast provider not found. Make sure ToastProvider is mounted.")};return{success:(t,r)=>e(t,"success",r),error:(t,r)=>e(t,"error",r),warning:(t,r)=>e(t,"warning",r),info:(t,r)=>e(t,"info",r),show:e}},YA=()=>{var Ue;const e=Kr(),r=new URLSearchParams(e.search).get("mode")==="quick"?"quick":"comprehensive",[n,s]=w.useState(r),[i,o]=w.useState(1),[l,c]=w.useState(null),[u,d]=w.useState(!1),[h,m]=w.useState(null),[f,g]=w.useState(null),[v,b]=w.useState([]),[y,x]=w.useState(!1),[p,j]=w.useState("intelligent"),[T,N]=w.useState(0),[C,E]=w.useState(!1),[D,R]=w.useState("input"),[P,O]=w.useState(!1),[K,I]=w.useState(!0),[M,W]=w.useState(null),[U,A]=w.useState(null),[B,S]=w.useState({}),[te,le]=w.useState(!1),[_,Ne]=w.useState(!1),[at,be]=w.useState([]),[pt,_t]=w.useState(!1),[yr,ot]=w.useState({}),Ze=QA(),[X,Ke]=w.useState({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),[Er,gt]=w.useState({}),[Lt,L]=w.useState({}),[Y,ae]=w.useState({1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1}),He=()=>n==="quick"?[{id:1,title:"Input",icon:Ng,description:"Enter your directive idea",timeEstimate:2},{id:3,title:"Classification",icon:Tn,description:"Strategic or Tactical",timeEstimate:1},{id:7,title:"Confirmation",icon:ke,description:"Review and submit",timeEstimate:1}]:[{id:1,title:"Input & Screenshot",icon:pl,description:"Provide feedback and optional screenshot",timeEstimate:3},{id:2,title:"Intent Confirmation",icon:Tn,description:"Review and confirm the extracted intent",timeEstimate:2},{id:3,title:"Classification",icon:gl,description:"Review strategic vs tactical breakdown",timeEstimate:2},{id:4,title:"Impact Analysis",icon:It,description:"Review application impact and consistency validation",timeEstimate:4},{id:5,title:"Synthesis Review",icon:Ge,description:"Review aligned, required, and recommended items",timeEstimate:5},{id:6,title:"Questions",icon:Ng,description:"Answer questions to refine the directive",timeEstimate:3},{id:7,title:"Confirmation",icon:ke,description:"Review and confirm the final summary",timeEstimate:2}],xt=$=>{if($<i&&l){const Q=({1:[2,3,4,5,6,7],2:[3,4,5,6,7],3:[4,5,6,7],4:[5,6,7],5:[6,7],6:[7]}[$]||[]).filter(de=>{switch(de){case 2:return l.intent_summary;case 3:return l.strat_tac;case 4:return l.impact_analysis;case 5:return l.synthesis;case 6:return l.questions;case 7:return l.final_summary;default:return!1}});if(Q.length>0){const de={2:"Intent Summary",3:"Classification",4:"Impact Analysis",5:"Synthesis",6:"Clarifying Questions",7:"Final Summary"},ue=Q.map(se=>de[se]).join(", ");Ze.warning(`Editing Step ${$} may invalidate: ${ue}`,8e3),be(se=>[...se,{editedStep:$,timestamp:new Date().toISOString(),affectedSteps:Q}])}}},Mi=$=>n==="quick"?$===1?3:$===3?7:$:$<7?$+1:$,Gt=$=>{xt($),o($)},lt=He();w.useEffect(()=>{const $=()=>{const z=window.innerWidth<768;E(z)};return $(),window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[l]),w.useEffect(()=>{const $=setTimeout(()=>{(X.chairmanInput||X.intentSummary)&&(localStorage.setItem("directiveLab_draft",JSON.stringify(X)),g("Draft saved"),setTimeout(()=>g(null),3e3))},2e3);return()=>clearTimeout($)},[X]),w.useEffect(()=>{const $=localStorage.getItem("directiveLab_draft");$&&(Ke(JSON.parse($)),g("Draft restored"),setTimeout(()=>g(null),3e3))},[]),w.useEffect(()=>{if(i===3&&(l!=null&&l.id)&&!(l!=null&&l.strat_tac)){console.log(" [STEP 3] Generating classification data...");const $=X.intentSummary||(l==null?void 0:l.intent_summary)||"",z=["vision","strategy","long-term","transform","innovation","competitive advantage","market position","growth","expansion","culture"],ne=["fix","bug","update","modify","adjust","correct","improve","enhance","optimize","refactor"];let ee=0,Q=0;const de=$.toLowerCase();z.forEach(yt=>{de.includes(yt)&&(ee+=10)}),ne.forEach(yt=>{de.includes(yt)&&(Q+=10)}),ee===0&&Q===0&&(ee=50,Q=50);const ue=ee+Q,se=Math.round(ee/ue*100),Ct=100-se,ct=se>60?"This initiative focuses on strategic goals that will shape long-term direction and capabilities.":Ct>60?"This initiative addresses immediate operational needs and improvements.":"This initiative balances both strategic vision and tactical execution needs.",Cs={strat_tac:{strategic_pct:se,tactical_pct:Ct,rationale:ct,generated_at:new Date().toISOString()}};c(yt=>({...yt,...Cs})),console.log(" [STEP 3] Classification data generated locally")}},[i,l,X.intentSummary]),w.useEffect(()=>{var $;if(i===4&&(l!=null&&l.id)&&!(l!=null&&l.impact_analysis)){console.log(" [STEP 4] Generating impact analysis data...");const z=X.intentSummary||(l==null?void 0:l.intent_summary)||"",ne=z.toLowerCase(),ee={dashboard:[{name:"Dashboard",risk_level:"medium",confidence:.8,dependencies:["MetricsCard","ChartComponent"]},{name:"DashboardCard",risk_level:"low",confidence:.7,dependencies:["UI Components"]},{name:"MetricsCard",risk_level:"low",confidence:.6,dependencies:["Data Fetcher"]}],form:[{name:"Form",risk_level:"medium",confidence:.9,dependencies:["Input","Button","Validation"]},{name:"Input",risk_level:"low",confidence:.8,dependencies:["Event Handlers"]},{name:"Button",risk_level:"low",confidence:.9,dependencies:["UI Components"]},{name:"Validation",risk_level:"medium",confidence:.7,dependencies:["Form State"]}],navigation:[{name:"Navigation",risk_level:"medium",confidence:.8,dependencies:["Router","Auth Context"]},{name:"Sidebar",risk_level:"low",confidence:.7,dependencies:["Navigation"]},{name:"Menu",risk_level:"low",confidence:.6,dependencies:["Navigation"]}],table:[{name:"Table",risk_level:"medium",confidence:.8,dependencies:["Data Fetcher","Pagination"]},{name:"DataGrid",risk_level:"high",confidence:.9,dependencies:["Table","Virtual Scroller"]}],modal:[{name:"Modal",risk_level:"medium",confidence:.8,dependencies:["Portal","Focus Trap"]},{name:"Dialog",risk_level:"medium",confidence:.7,dependencies:["Modal"]},{name:"Overlay",risk_level:"low",confidence:.6,dependencies:["Portal"]}],auth:[{name:"Auth",risk_level:"high",confidence:.9,dependencies:["UserContext","Token Manager"]},{name:"Login",risk_level:"high",confidence:.8,dependencies:["Auth","Form"]},{name:"UserContext",risk_level:"high",confidence:.9,dependencies:["State Management"]}],theme:[{name:"ThemeProvider",risk_level:"medium",confidence:.8,dependencies:["CSS Variables","Context API"]},{name:"Dark Mode",risk_level:"medium",confidence:.7,dependencies:["ThemeProvider"]}],api:[{name:"API Client",risk_level:"high",confidence:.9,dependencies:["HTTP Service","Error Handler"]},{name:"Data Fetcher",risk_level:"medium",confidence:.8,dependencies:["API Client"]},{name:"WebSocket",risk_level:"high",confidence:.7,dependencies:["Connection Manager"]}]},Q=[];Object.entries(ee).forEach(([fe,Jr])=>{(ne.includes(fe)||ne.includes(fe.replace(/[aeiou]/gi,""))||Jr.some(jo=>ne.includes(jo.name.toLowerCase())))&&Q.push(...Jr)}),Q.length===0&&Q.push({name:"UI Components",risk_level:"low",confidence:.5,dependencies:["React Components"]},{name:"State Management",risk_level:"medium",confidence:.6,dependencies:["React Hooks"]},{name:"Event Handlers",risk_level:"low",confidence:.7,dependencies:["DOM Events"]});const de=["database","auth","security","payment","migration","breaking","major"],ue=["api","integration","workflow","validation","performance"];let se="Low",Ct="This change appears to be primarily cosmetic or minor functionality enhancement.";de.some(fe=>ne.includes(fe))?(se="High",Ct="This change affects critical system components that could impact security, data integrity, or core functionality."):ue.some(fe=>ne.includes(fe))&&(se="Medium",Ct="This change affects system integrations or business logic that requires careful testing and validation.");const ct=[{category:"Design System",status:"compliant",details:"Change adheres to existing design tokens and component patterns"},{category:"Accessibility",status:se==="High"?"review_required":"compliant",details:se==="High"?"WCAG compliance review needed for this change":"No accessibility concerns identified"},{category:"Performance",status:ne.includes("performance")?"improvement":"neutral",details:ne.includes("performance")?"Change should improve application performance":"No significant performance impact expected"},{category:"Security",status:de.some(fe=>ne.includes(fe))?"review_required":"compliant",details:de.some(fe=>ne.includes(fe))?"Security review required before implementation":"No security concerns identified"}],Cs={database:3,migration:4,api:2,auth:3,integration:2,ui:1,style:.5,text:.5};let yt=1;Object.entries(Cs).forEach(([fe,Jr])=>{ne.includes(fe)&&(yt+=Jr)});const Ts=yt<=2?"1-2 days":yt<=4?"3-5 days":yt<=6?"1-2 weeks":"2-4 weeks",wo=Math.min(100,Math.round(Q.length*10+yt*5+(se==="High"?30:se==="Medium"?15:5))),ko=Math.round(yt*10)/10,Es={affected_components:Q.slice(0,8),risk_level:se.toLowerCase(),risk_rationale:Ct,impact_score:wo,effort_multiplier:ko,estimated_effort:Math.ceil(yt),estimated_timeline:Ts,consistency_validation:ct,recommendations:[{type:"Testing",description:`Ensure comprehensive testing for ${Q.length} affected components`,effort_reduction:"15-20%"},{type:"Documentation",description:"Update component documentation and integration guides",effort_reduction:"10-15%"}],mitigation_strategies:["Implement feature flags to control rollout","Create comprehensive test suite before deployment","Monitor performance metrics during implementation","Prepare rollback strategy for critical issues"],generated_at:new Date().toISOString()};se==="High"&&(Es.breaking_changes=[{type:"API Change",description:"Potential modifications to component interfaces",keyword:(($=ne.match(/(auth|api|database)/))==null?void 0:$[0])||"system"}]);const Fi={};ct.forEach(fe=>{const Jr=fe.status==="compliant"?85:fe.status==="improvement"?95:fe.status==="review_required"?25:fe.status==="warning"?60:75;Fi[fe.category.toLowerCase().replace(" ","_")]=Jr});const zi={passed:!ct.some(fe=>fe.status==="review_required"),blocking_issues:ct.filter(fe=>fe.status==="review_required").map(fe=>({message:`${fe.category}: ${fe.details}`,suggestion:fe.status==="review_required"?"Consider professional review before implementation":null})),warnings:ct.filter(fe=>fe.status==="warning"),score:Math.round(ct.filter(fe=>fe.status==="compliant"||fe.status==="improvement").length/ct.length*100),category_scores:Fi,recommendations:ct.filter(fe=>fe.status==="improvement"||fe.status==="compliant").map(fe=>({message:fe.details,priority:fe.status==="improvement"?"medium":"low"}))};W(Es),A(zi);const Ui={skeptical_assessment:[`Directive "${z.slice(0,50)}..." may have hidden complexities not immediately apparent`,"Resource estimates are often underestimated by 40-60% in similar projects","User requirements frequently change after initial implementation begins","Integration points with existing systems pose higher risk than anticipated"],potential_blockers:["Insufficient technical specifications may delay development","Dependency on external APIs or services may introduce instability","Browser compatibility issues may emerge during testing","Performance impact on larger datasets may require architectural changes"],risk_factors:{technical_debt:se==="High"?"Significant":"Moderate",change_resistance:"Medium",rollback_difficulty:Ts.includes("week")?"Low":"High",maintenance_overhead:`${se} ongoing maintenance burden expected`},recommendations:["Consider phased implementation approach to mitigate risks","Establish clear rollback procedures before deployment","Plan for 25% buffer time beyond initial estimates","Document all assumptions and validate with stakeholders"]};ot(Ui),c(fe=>({...fe,impact_analysis:Es,consistency_validation:zi,critical_analysis:Ui})),console.log(" [STEP 4] Impact analysis data generated locally"),console.log(" [STEP 4] Risk Level:",se),console.log(" [STEP 4] Components affected:",Q.length),console.log(" [STEP 4] Estimated timeline:",Ts)}},[i,l,X.intentSummary]),w.useEffect(()=>{var $,z;if(i===5&&(l!=null&&l.id)&&(($=l==null?void 0:l.gate_status)!=null&&$.synthesis_reviewed&&le(!0),!(l!=null&&l.synthesis))){console.log(" [STEP 5] Generating synthesis data...");const ne=(l==null?void 0:l.intent_summary)||X.intentSummary||"",ee=(l==null?void 0:l.strat_tac)||{},Q=(l==null?void 0:l.impact_analysis)||{},de=[],ue=[],se=[];(ne.toLowerCase().includes("dark mode")||ne.toLowerCase().includes("theme"))&&(de.push("UI theming system already supports dark/light mode switching"),de.push("CSS variables are in place for theme customization")),(ne.toLowerCase().includes("dashboard")||ne.toLowerCase().includes("ui"))&&(de.push("Component architecture supports modular UI updates"),de.push("Existing design system can be extended")),ee.strategic_pct>50&&(ue.push("Architecture review and approval from technical lead"),ue.push("Comprehensive testing strategy for new features"),ue.push("Documentation updates for significant changes")),((Q==null?void 0:Q.risk_level)==="High"||(Q==null?void 0:Q.risk_level)==="Critical")&&(ue.push("Risk mitigation plan implementation"),ue.push("Rollback strategy preparation")),ne.toLowerCase().includes("performance")&&ue.push("Performance benchmarking before and after implementation"),(ne.toLowerCase().includes("security")||ne.toLowerCase().includes("auth"))&&ue.push("Security audit and penetration testing"),ee.tactical_pct>60&&(se.push("Incremental deployment with feature flags"),se.push("A/B testing for user-facing changes")),((z=Q==null?void 0:Q.affected_components)==null?void 0:z.length)>5&&(se.push("Phased implementation to minimize disruption"),se.push("Component isolation testing")),se.push("User acceptance testing with stakeholder group"),se.push("Performance monitoring post-deployment"),de.length===0&&(de.push("Existing infrastructure supports proposed changes"),de.push("Current tooling and frameworks are compatible")),ue.length===0&&(ue.push("Standard code review process"),ue.push("Unit and integration test coverage")),se.length===0&&(se.push("Progressive rollout strategy"),se.push("User feedback collection mechanism"));const Ct={synthesis:{aligned:de,required:ue,recommended:se,generated_at:new Date().toISOString()}};console.log(" [STEP 5] Synthesis generated:",Ct),c(ct=>({...ct,...Ct}))}},[i,l,X.intentSummary]),w.useEffect(()=>{var $;if(i===6&&(l!=null&&l.id)&&(l==null?void 0:l.questions)===void 0){console.log(" [STEP 6] Generating clarifying questions...");const z=(l==null?void 0:l.intent_summary)||X.intentSummary||"",ne=(l==null?void 0:l.strat_tac)||{},ee=(l==null?void 0:l.synthesis)||{},Q=[];(z.toLowerCase().includes("ui")||z.toLowerCase().includes("interface"))&&(Q.push({text:"What specific UI components or pages should be affected by these changes?",context:"Help us scope the implementation correctly"}),Q.push({text:"Do you have any specific design preferences or brand guidelines to follow?",context:"Ensures visual consistency with your requirements"})),ne.strategic_pct>60&&(Q.push({text:"What is the expected timeline for this strategic initiative?",context:"Helps with resource allocation and planning"}),Q.push({text:"Are there any dependencies or prerequisites we should be aware of?",context:"Identifies potential blockers early"})),($=ee.required)!=null&&$.some(ue=>ue.includes("performance"))&&Q.push({text:"What are your specific performance targets or requirements?",context:"Define measurable success criteria"}),(z.toLowerCase().includes("data")||z.toLowerCase().includes("database"))&&Q.push({text:"What data retention and backup policies should be considered?",context:"Ensures compliance with data governance"}),Q.length<2&&Q.push({text:"Are there any specific edge cases or scenarios we should consider?",context:"Helps identify potential issues early"});const de={questions:Q.length>0?Q:[],questions_generated_at:new Date().toISOString()};console.log(" [STEP 6] Questions generated:",de),c(ue=>({...ue,...de}))}},[i,l,X.intentSummary]),w.useEffect(()=>{var $,z,ne;if(i===7&&(l!=null&&l.id)&&!(l!=null&&l.final_summary)){console.log(" [STEP 7] Generating final summary...");const ee=(l==null?void 0:l.intent_summary)||X.intentSummary||"",Q=(l==null?void 0:l.strat_tac)||{},de=(l==null?void 0:l.impact_analysis)||{},ue=(l==null?void 0:l.synthesis)||{};let se=`This directive focuses on: ${ee}. `;Q.strategic_pct>60?se+=`This is primarily a strategic initiative (${Q.strategic_pct}% strategic) that will shape long-term architecture. `:se+=`This is primarily a tactical improvement (${Q.tactical_pct}% tactical) focusing on immediate enhancements. `,(($=de.affected_components)==null?void 0:$.length)>0&&(se+=`The implementation will affect ${de.affected_components.length} components with ${de.risk_level||"moderate"} risk level. `),((z=ue.required)==null?void 0:z.length)>0&&(se+=`Key requirements include: ${ue.required[0]}. `),((ne=ue.recommended)==null?void 0:ne.length)>0&&(se+=`Recommended approach: ${ue.recommended[0]}. `),de.effort_estimate&&(se+=`Estimated effort: ${de.effort_estimate}. `),se+="Upon approval, this directive will be converted into a formal PRD and assigned to the implementation team.";const Ct={final_summary:se,final_summary_generated_at:new Date().toISOString()};console.log(" [STEP 7] Final summary generated:",Ct),c(ct=>({...ct,...Ct}))}},[i,l,X.intentSummary]),w.useEffect(()=>{i===2&&X.intentSummary&&setTimeout(()=>{const $=document.querySelector('textarea[name="intentSummary"]');$&&($.style.height="auto",$.style.height=Math.min($.scrollHeight,300)+"px")},100)},[X.intentSummary,i]);const $i=$=>$.trim()?$.length<20?(gt(z=>({...z,chairmanInput:"Please provide more detailed feedback (min 20 characters)"})),L(z=>({...z,chairmanInput:!1})),!1):(gt(z=>({...z,chairmanInput:null})),L(z=>({...z,chairmanInput:!0})),!0):(gt(z=>({...z,chairmanInput:"Feedback is required"})),L(z=>({...z,chairmanInput:!1})),!1),F=$=>{if(!$)return!0;try{return new URL($),gt(z=>({...z,screenshotUrl:null})),L(z=>({...z,screenshotUrl:!0})),!0}catch{return gt(z=>({...z,screenshotUrl:"Please enter a valid URL"})),L(z=>({...z,screenshotUrl:!1})),!1}},G=async()=>{var $,z;if(console.log(" [STEP 1] Starting feedback submission"),console.log(" [STEP 1] Form data:",{feedback:(($=X.chairmanInput)==null?void 0:$.substring(0,50))+"...",screenshotUrl:X.screenshotUrl}),!!$i(X.chairmanInput)){d(!0),m(null);try{const ne=await fetch("/api/sdip/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:X.chairmanInput,screenshot_url:X.screenshotUrl})});if(!ne.ok)throw new Error("Failed to submit feedback");const ee=await ne.json();console.log(" [STEP 1] Submission created successfully"),console.log(" [STEP 1] Submission ID:",((z=ee.submission)==null?void 0:z.id)||ee.id),console.log(" [STEP 1] Full submission data:",ee);const Q=ee.submission||ee;c(Q),ae({...Y,1:!0}),o(2),g("Feedback submitted successfully!"),localStorage.removeItem("directiveLab_draft"),Q.id?(console.log(" [STEP 2] Triggering intent generation for submission:",Q.id),await k(Q.id,2,{feedback:X.chairmanInput,chairman_input:X.chairmanInput})):console.error(" [STEP 1] No submission ID received!")}catch(ne){m(ne.message)}finally{d(!1)}}},k=async($,z,ne)=>{console.log(` [STEP ${z}] Updating submission: ${$}`),console.log(` [STEP ${z}] Step data:`,ne);try{const ee=await fetch(`/api/sdip/submissions/${$}/step/${z}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)});if(!ee.ok)throw new Error(`Failed to update step ${z}`);const Q=await ee.json();console.log(` [STEP ${z}] Update successful`),console.log(` [STEP ${z}] Response data:`,Q);const de=Q.submission||Q;return c(de),z===2&&de.intent_summary&&(console.log(" [STEP 2] Intent summary received:",de.intent_summary.substring(0,50)+"..."),Ke({...X,intentSummary:de.intent_summary})),de}catch(ee){throw console.error(` [STEP ${z}] Update failed:`,ee),console.error(` [STEP ${z}] Error details:`,ee.message),m(ee.message),ee}},V=async $=>{var z,ne,ee,Q,de;console.log(` [STEP ${$}] Completing step`),console.log(` [STEP ${$}] Current submission:`,l),d(!0),m(null);try{if(l&&l.id&&$>1){console.log(` [STEP ${$}] Preparing step data for submission: ${l.id}`);let se={};switch($){case 2:se={intent_summary:X.intentSummary};break;case 3:se={strategic_pct:((z=l.strat_tac)==null?void 0:z.strategic_pct)||50,tactical_pct:((ne=l.strat_tac)==null?void 0:ne.tactical_pct)||50,override:X.stratTacOverride};break;case 4:se={impact_analysis:M,consistency_validation:U};break;case 5:se={aligned:((ee=l.synthesis)==null?void 0:ee.aligned)||[],required:((Q=l.synthesis)==null?void 0:Q.required)||[],recommended:((de=l.synthesis)==null?void 0:de.recommended)||[],synthesis_reviewed:te};break;case 6:se={questions_answers:X.questionAnswers};break;case 7:se={final_summary:l.final_summary||X.intentSummary};break}console.log(` [STEP ${$}] Step data prepared:`,se),await k(l.id,$,se)}else console.log(` [STEP ${$}] No submission ID, skipping update`);ae({...Y,[$]:!0});const ue=Mi($);ue!==$?(o(ue),g(`Step ${$} completed!`)):(g("Directive submitted successfully!"),setTimeout(()=>{Ke({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},summaryConfirmed:!1}),o(1),ae({}),c(null),W(null),A(null)},2e3))}catch(ue){m(ue.message)}finally{d(!1)}},re=async()=>{console.log(" [STEP 7] Saving submission and closing"),d(!0),m(null);try{if(l&&l.id){const $={final_summary:l.final_summary||X.intentSummary,status:"ready",completed_steps:[1,2,3,4,5,6,7]};await k(l.id,7,$),ae({...Y,7:!0}),g("Submission saved successfully! You can find it in Recent Submissions."),setTimeout(()=>{Ke({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),o(1),ae({}),c(null),W(null),A(null),R("submissions")},2e3)}else throw new Error("No submission to save")}catch($){m($.message)}finally{d(!1)}},ge=async()=>{console.log(" [STEP 7] Submitting directive to create Strategic Directive"),d(!0),m(null);try{if(l&&l.id){const ne={final_summary:l.final_summary||X.intentSummary,status:"submitted",completed_steps:[1,2,3,4,5,6,7]};await k(l.id,7,ne)}const $=await fetch("/api/sdip/create-strategic-directive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_id:l.id})});if(!$.ok){const ne=await $.json();throw new Error(ne.error||"Failed to create Strategic Directive")}const z=await $.json();ae({...Y,7:!0}),g(`Strategic Directive created successfully! ID: ${z.sd_id}`),setTimeout(()=>{Ke({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),o(1),ae({}),c(null),W(null),A(null),R("submissions")},3e3)}catch($){m($.message)}finally{d(!1)}},me=$=>{var z,ne,ee,Q,de,ue,se,Ct,ct,Cs,yt,Ts,wo,ko,Es,Fi,zi,Ui,fe,Jr,jo,Jm;switch($){case 1:return a.jsxs("div",{className:"space-y-3",children:[a.jsx(Ko,{type:"textarea",label:"Chairman Feedback",name:"chairmanInput",value:X.chairmanInput,onChange:ie=>{Ke({...X,chairmanInput:ie.target.value}),$i(ie.target.value)},placeholder:"Enter your feedback about the EHG application...",required:!0,rows:5,minLength:20,maxLength:1e3,showCharCount:!0,error:Er.chairmanInput,success:Lt.chairmanInput,helpText:"Provide detailed feedback about what you'd like to improve or add"}),a.jsx(Ko,{type:"url",label:"Screenshot URL",name:"screenshotUrl",value:X.screenshotUrl,onChange:ie=>{Ke({...X,screenshotUrl:ie.target.value}),F(ie.target.value)},placeholder:"https://example.com/screenshot.png",error:Er.screenshotUrl,success:Lt.screenshotUrl,helpText:"Optional: Add a screenshot URL to provide visual context",icon:pl}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Re,{onClick:G,disabled:u||!X.chairmanInput.trim(),loading:u,variant:"primary",icon:Ql,iconPosition:"right",children:"Submit & Analyze"}),a.jsx(Re,{onClick:()=>{localStorage.setItem("directiveLab_draft",JSON.stringify(X)),g("Draft saved")},variant:"secondary",icon:gs,children:"Save Draft"})]})]});case 2:return a.jsxs("div",{className:"space-y-3",children:[a.jsx(Ko,{type:"textarea",label:"Extracted Intent Summary",name:"intentSummary",value:X.intentSummary,onChange:ie=>{Ke({...X,intentSummary:ie.target.value}),ie.target&&(ie.target.style.height="auto",ie.target.style.height=Math.min(ie.target.scrollHeight,300)+"px")},rows:3,style:{minHeight:"80px",maxHeight:"300px",resize:"vertical",overflow:"auto"},onFocus:ie=>{ie.target.style.height="auto",ie.target.style.height=Math.min(ie.target.scrollHeight,300)+"px"},helpText:"Review and edit if needed to accurately capture your intent",success:X.intentSummary.length>0}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Re,{onClick:()=>Gt(1),variant:"ghost",icon:yn,children:"Back"}),a.jsx(Re,{onClick:()=>V(2),disabled:u||!X.intentSummary,loading:u,variant:"success",icon:ss,children:"Confirm Intent"})]})]});case 3:return a.jsxs("div",{className:"space-y-3",children:[l!=null&&l.strat_tac?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-around mb-3",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[((z=X.stratTacOverride)==null?void 0:z.strategic_pct)??l.strat_tac.strategic_pct,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Strategic"})]}),a.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[((ne=X.stratTacOverride)==null?void 0:ne.tactical_pct)??l.strat_tac.tactical_pct,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Tactical"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg",children:[a.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Classification Rationale:"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:((ee=X.stratTacOverride)==null?void 0:ee.rationale)||l.strat_tac.rationale})]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(VT,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mr-2"}),a.jsx("span",{className:"font-medium text-yellow-900 dark:text-yellow-100 text-sm",children:"Adjust Classification (Optional)"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx("span",{children:"More Tactical"}),a.jsx("span",{children:"More Strategic"})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:((Q=X.stratTacOverride)==null?void 0:Q.strategic_pct)??l.strat_tac.strategic_pct,onChange:ie=>{const nt=parseInt(ie.target.value),Pr=100-nt;let Kt="";nt>70?Kt="Manually classified as highly strategic - focusing on long-term architecture and business objectives.":nt>50?Kt="Manually classified as moderately strategic - balancing long-term goals with immediate improvements.":nt>30?Kt="Manually classified as balanced - containing both strategic elements and tactical improvements.":Kt="Manually classified as primarily tactical - focusing on immediate fixes and improvements.",Ke({...X,stratTacOverride:{strategic_pct:nt,tactical_pct:Pr,rationale:Kt,manually_adjusted:!0,adjusted_at:new Date().toISOString()}})},className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 \r
                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 \r
                        [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer\r
                        [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 \r
                        [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none`}),a.jsxs("div",{className:"flex justify-between mt-1",children:[a.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[((de=X.stratTacOverride)==null?void 0:de.tactical_pct)??l.strat_tac.tactical_pct,"% Tactical"]}),a.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:[((ue=X.stratTacOverride)==null?void 0:ue.strategic_pct)??l.strat_tac.strategic_pct,"% Strategic"]})]})]}),X.stratTacOverride&&a.jsx(Re,{onClick:()=>{Ke({...X,stratTacOverride:null})},variant:"ghost",size:"small",icon:Cr,children:"Reset to Auto-Classification"})]})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyzing strategic vs tactical breakdown..."})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Re,{onClick:()=>Gt(2),variant:"ghost",icon:yn,children:"Back"}),a.jsx(Re,{onClick:()=>V(3),disabled:u,loading:u,variant:"success",icon:ss,children:X.stratTacOverride?"Accept Adjusted Classification":"Accept Classification"})]})]});case 4:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Application Impact Analysis"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the comprehensive analysis of how your proposed changes will affect the application, including component dependencies, risk assessment, and consistency validation."})]}),a.jsx(GA,{impactAnalysis:M,consistencyValidation:U,submission:l}),U&&!U.passed&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(dn,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),a.jsx("span",{className:"font-medium text-red-900 dark:text-red-100",children:"Consistency Issues Found"})]}),a.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 mb-3",children:[((se=U.blocking_issues)==null?void 0:se.length)||0," blocking issues must be resolved before proceeding."]}),a.jsx("div",{className:"text-xs text-red-700 dark:text-red-300",children:"Review the Impact Analysis above for detailed recommendations and mitigation strategies."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Re,{onClick:()=>Gt(3),variant:"ghost",icon:yn,children:"Back"}),a.jsx(Re,{onClick:()=>V(4),disabled:u||U&&!U.passed,loading:u,variant:(U==null?void 0:U.passed)===!1?"secondary":"success",icon:(U==null?void 0:U.passed)===!1?It:ss,children:(U==null?void 0:U.passed)===!1?"Acknowledge Risks & Continue":"Accept Impact Analysis"})]})]});case 5:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Synthesis Review"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the synthesized requirements and recommendations for your directive."})]}),l!=null&&l.synthesis?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(ke,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),a.jsxs("span",{className:"font-medium text-green-900 dark:text-green-100",children:["Aligned Requirements (",((Ct=l.synthesis.aligned)==null?void 0:Ct.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(ct=l.synthesis.aligned)==null?void 0:ct.map((ie,nt)=>{const Pr=typeof ie=="object"?ie.badges:zu(ie),Kt=typeof ie=="object"?ie.text:ie;return a.jsx("li",{className:"text-sm text-green-800 dark:text-green-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-green-600 dark:text-green-400 mr-2",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:Kt}),a.jsx(Fu,{badges:Pr})]})]})},nt)})})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(It,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),a.jsxs("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:["Required Changes (",((Cs=l.synthesis.required)==null?void 0:Cs.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(yt=l.synthesis.required)==null?void 0:yt.map((ie,nt)=>{const Pr=typeof ie=="object"?ie.badges:zu(ie),Kt=typeof ie=="object"?ie.text:ie;return a.jsx("li",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mr-2",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:Kt}),a.jsx(Fu,{badges:Pr})]})]})},nt)})})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx($r,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),a.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:["Recommended Enhancements (",((Ts=l.synthesis.recommended)==null?void 0:Ts.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(wo=l.synthesis.recommended)==null?void 0:wo.map((ie,nt)=>{const Pr=typeof ie=="object"?ie.badges:zu(ie),Kt=typeof ie=="object"?ie.text:ie;return a.jsx("li",{className:"text-sm text-blue-800 dark:text-blue-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:Kt}),a.jsx(Fu,{badges:Pr})]})]})},nt)})})]})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Synthesizing requirements and recommendations..."})]})}),(l==null?void 0:l.synthesis)&&a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:te,onChange:ie=>le(ie.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"I have reviewed the synthesis analysis"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["I understand the aligned requirements (",((ko=l.synthesis.aligned)==null?void 0:ko.length)||0,"), required changes (",((Es=l.synthesis.required)==null?void 0:Es.length)||0,"), and recommended enhancements (",((Fi=l.synthesis.recommended)==null?void 0:Fi.length)||0,") for this directive."]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Re,{onClick:()=>Gt(4),variant:"ghost",icon:yn,children:"Back"}),a.jsx(Re,{onClick:()=>V(5),disabled:u||!(l!=null&&l.synthesis)||!te,loading:u,variant:"success",icon:ss,children:"Accept Synthesis"})]})]});case 6:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Clarifying Questions"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Answer any clarifying questions about your directive to ensure accurate implementation."})]}),l!=null&&l.questions&&l.questions.length>0?a.jsx("div",{className:"space-y-3",children:l.questions.map((ie,nt)=>{var Pr;return a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start mb-2",children:[a.jsx(_u,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2 mt-0.5"}),a.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:ie.text})]}),a.jsx(Ko,{type:"textarea",name:`question_${nt}`,value:((Pr=X.questionAnswers)==null?void 0:Pr[`question_${nt}`])||"",onChange:Kt=>{Ke({...X,questionAnswers:{...X.questionAnswers,[`question_${nt}`]:Kt.target.value}})},placeholder:"Your answer...",rows:2,helpText:ie.context})]},nt)})}):(l==null?void 0:l.questions)===void 0?a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generating clarifying questions..."})]})}):a.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ke,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),a.jsx("p",{className:"text-green-800 dark:text-green-200",children:"No clarifying questions needed - your directive is clear!"})]})}),(l==null?void 0:l.questions)!==void 0&&a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:X.questionsReviewed||!1,onChange:ie=>Ke({...X,questionsReviewed:ie.target.checked}),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:((zi=l==null?void 0:l.questions)==null?void 0:zi.length)>0?"I have provided complete answers to all questions":"I confirm no additional questions are needed"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:((Ui=l==null?void 0:l.questions)==null?void 0:Ui.length)>0?`All ${l.questions.length} clarifying questions have been answered to provide context for implementation.`:"The directive is sufficiently clear and no additional clarification is required."})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Re,{onClick:()=>Gt(5),variant:"ghost",icon:yn,children:"Back"}),a.jsx(Re,{onClick:()=>V(6),disabled:u||!X.questionsReviewed,loading:u,variant:"success",icon:ss,children:((fe=l==null?void 0:l.questions)==null?void 0:fe.length)>0?"Submit Answers":"Continue"})]})]});case 7:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Final Confirmation"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the final summary and choose your next action."})]}),l!=null&&l.final_summary?a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Directive Summary"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:l.final_summary})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[((Jr=l.strat_tac)==null?void 0:Jr.strategic_pct)||0,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Strategic"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((jo=l.impact_analysis)==null?void 0:jo.risk_level)||"Low"}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Risk Level"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:((Jm=l.impact_analysis)==null?void 0:Jm.effort_estimate)||"Medium"}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Effort"})]})]}),a.jsxs("div",{className:"mt-4 flex gap-2",children:[a.jsx(Re,{onClick:()=>{navigator.clipboard.writeText(l.final_summary),Ze.success("Summary copied to clipboard")},variant:"ghost",size:"small",icon:wm,children:"Copy Summary"}),a.jsx(Re,{onClick:async()=>{d(!0);try{const ie=await fetch(`/api/directive-submissions/${l.id}/regenerate-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(ie.ok){const nt=await ie.json();c({...l,final_summary:nt.final_summary}),Ze.success("Summary regenerated successfully")}}catch{Ze.error("Failed to regenerate summary")}finally{d(!1)}},variant:"ghost",size:"small",icon:Cr,disabled:u,children:"Regenerate"})]}),a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:a.jsxs("label",{className:"flex items-start cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:X.finalConfirmed||!1,onChange:ie=>Ke({...X,finalConfirmed:ie.target.checked}),className:"mt-0.5 mr-2"}),a.jsx("span",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:"I confirm that this directive accurately represents my requirements."})]})})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preparing final summary..."})]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Choose Your Next Action"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(gs,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Save & Close:"})," Save for later review or combine with other submissions"]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(_g,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Submit Directive:"})," Create Strategic Directive and begin LEO Protocol workflow"]})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(Re,{onClick:()=>Gt(6),variant:"ghost",icon:yn,className:"order-3 sm:order-1",children:"Back"}),a.jsxs("div",{className:"flex gap-3 order-1 sm:order-2 flex-1",children:[a.jsx(Re,{onClick:re,disabled:u||!X.finalConfirmed,loading:u,variant:"secondary",icon:gs,className:"flex-1",children:"Save & Close"}),a.jsx(Re,{onClick:ge,disabled:u||!X.finalConfirmed,loading:u,variant:"primary",icon:_g,className:"flex-1",children:"Submit Directive"})]})]})]});default:return a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Step content for Step ",$," coming soon..."]})}},je=()=>a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 py-1.5 px-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(Re,{onClick:()=>Gt(Math.max(1,i-1)),disabled:i===1,variant:"ghost",size:"small",icon:yn,children:"Previous"}),a.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Step ",i," of ",lt.length]}),a.jsx(Re,{onClick:()=>V(i),disabled:!Y[i-1]&&i>1,variant:"primary",size:"small",icon:Ql,iconPosition:"right",children:"Next"})]})});return a.jsx(XA,{children:a.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Gw,{}),a.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Directive Lab"}),a.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s("quick"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${n==="quick"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Quick Mode"}),a.jsx("button",{onClick:()=>s("comprehensive"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${n==="comprehensive"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Comprehensive"})]})]}),a.jsx(Re,{onClick:()=>O(!P),variant:"ghost",size:"small",icon:_u,ariaLabel:"Toggle help",children:"Help"})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Step:"}),a.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:((Ue=lt[i-1])==null?void 0:Ue.title)||"Unknown"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",i," of ",lt.length,")"]})]})]})}),P&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800 px-4 py-2",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(_u,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2"}),a.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[a.jsx("p",{className:"font-medium mb-0.5",children:"Getting Started:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-blue-800 dark:text-blue-200",children:[a.jsx("li",{children:"Provide detailed feedback about what you want to improve"}),a.jsx("li",{children:"Each step builds on the previous one"}),a.jsx("li",{children:"Your progress is automatically saved"}),a.jsx("li",{children:"You can navigate back to previous steps at any time"})]})]})]})})}),f&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-green-800 dark:text-green-200 text-sm",children:[a.jsx(ke,{className:"w-4 h-4 mr-2"}),f]})}),h&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-red-800 dark:text-red-200 text-sm",children:[a.jsx(tr,{className:"w-4 h-4 mr-2"}),h]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx(HA,{steps:lt,currentStep:i,orientation:"horizontal",showTimeEstimates:!C,compact:!0,hideLabelsOnMobile:!0,onStepClick:Gt})})}),a.jsx(je,{}),a.jsxs("div",{className:"flex-1 px-4 py-2 flex flex-col min-h-0",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg shadow-sm border border-gray-200 dark:border-gray-700 border-b-0 flex-shrink-0",children:a.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{onClick:()=>R("input"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${D==="input"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pl,{className:"w-4 h-4"}),"Input & Screenshot"]}),D==="input"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]}),a.jsxs("button",{onClick:()=>R("submissions"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${D==="submissions"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Recent Submissions",l&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),D==="submissions"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-b-lg shadow-sm border border-gray-200 dark:border-gray-700 border-t-0 flex-1 relative flex flex-col overflow-hidden",children:[a.jsxs("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out flex flex-col ${D==="input"?"translate-x-0 opacity-100":"translate-x-full opacity-0 pointer-events-none"}`,children:[a.jsxs("div",{className:"mb-3 flex-shrink-0",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:lt[i-1].title}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:lt[i-1].description})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:me(i)})]}),a.jsx("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out ${D==="submissions"?"translate-x-0 opacity-100":"-translate-x-full opacity-0 pointer-events-none"}`,children:a.jsxs("div",{className:"h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Submissions"}),a.jsx(Re,{onClick:()=>N($=>$+1),variant:"ghost",size:"small",icon:Cr,ariaLabel:"Refresh submissions"})]}),a.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:a.jsx(qA,{onSubmissionSelect:$=>{c($),$&&setTimeout(()=>R("input"),300)},selectedSubmissionId:l==null?void 0:l.id,onSelectionChange:b,refreshTrigger:T,onGroupCreate:($,z="intelligent")=>{b($),j(z),x(!0)}})})]})})]})]}),y&&a.jsx(WA,{selectedSubmissions:v,combineMethod:p,onClose:()=>x(!1),onSuccess:()=>{x(!1),N($=>$+1)}})]})})};function vx({backlogData:e=[],strategicDirectives:t=[],isCompact:r,onRefresh:n}){const{id:s}=Ff(),i=Ei(),o=Kr(),c=new URLSearchParams(o.search).get("sd"),[u,d]=w.useState({}),[h,m]=w.useState(""),[f,g]=w.useState("all"),[v,b]=w.useState(c||"all"),[y,x]=w.useState(!1),[p,j]=w.useState("all"),[T,N]=w.useState(!0),[C,E]=w.useState([]),[D,R]=w.useState({});w.useEffect(()=>{(async()=>{N(!0);try{const W=v&&v!=="all"?`/api/backlog/strategic-directives/${v}`:"/api/backlog/strategic-directives-with-items",A=await(await fetch(W)).json();if(v&&v!=="all")E(A.backlog_items||[]),R({[A.sd_id]:{sd:A,items:A.backlog_items||[]}});else{const B={};A.forEach(te=>{B[te.sd_id]={sd:te,items:te.backlog_items||[]}}),R(B);const S=A.flatMap(te=>te.backlog_items||[]);E(S)}}catch(W){console.error("Error loading backlog:",W)}finally{N(!1)}})()},[v]);const P=Object.entries(D).reduce((M,[W,U])=>{let A=U.items;if(h){const B=h.toLowerCase();A=A.filter(S=>{var te,le,_,Ne;return((te=S.backlog_title)==null?void 0:te.toLowerCase().includes(B))||((le=S.item_description)==null?void 0:le.toLowerCase().includes(B))||((_=S.backlog_id)==null?void 0:_.toLowerCase().includes(B))||((Ne=S.my_comments)==null?void 0:Ne.toLowerCase().includes(B))})}return f!=="all"&&(A=A.filter(B=>{var S;return((S=B.priority)==null?void 0:S.toLowerCase())===f.toLowerCase()})),p==="yes"?A=A.filter(B=>B.new_module===!0):p==="no"&&(A=A.filter(B=>B.new_module===!1)),A.length>0&&(M[W]={...U,items:A}),M},{}),O=M=>{if(!M)return null;const W=M.toLowerCase(),U={high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:ks},h:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:ks},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:En},m:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:En},low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:En},l:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:En},future:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-300",icon:qr}},A=U[W]||U.low,B=A.icon;return a.jsxs("span",{className:`inline-flex items-center ${r?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${A.bg} ${A.text}`,children:[a.jsx(B,{className:"w-3 h-3 mr-1"}),M]})},K=M=>{d(W=>({...W,[M]:!W[M]}))};if(T)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading backlog..."})});const I=Object.values(P).reduce((M,W)=>M+W.items.length,0);return a.jsxs("div",{className:r?"p-3":"p-6",children:[a.jsxs("div",{className:r?"mb-3":"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(wi,{className:r?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),a.jsx("h1",{className:r?"text-xl font-semibold":"text-2xl font-bold",children:"Backlog Management"}),a.jsxs("span",{className:`ml-3 ${r?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[I," items"]})]}),a.jsx(Cm,{onRefresh:n,isCompact:r})]}),a.jsxs("div",{className:`flex flex-wrap gap-2 ${r?"mb-3":"mb-4"}`,children:[a.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[a.jsx(Vw,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${r?"w-4 h-4":"w-5 h-5"} text-gray-400`}),a.jsx("input",{type:"text",value:h,onChange:M=>m(M.target.value),placeholder:"Search backlog items...",className:`w-full ${r?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),a.jsxs("select",{value:v,onChange:M=>b(M.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Strategic Directives"}),Object.values(D).map(({sd:M})=>a.jsx("option",{value:M.sd_id,children:M.sd_title},M.sd_id))]}),a.jsxs("select",{value:f,onChange:M=>g(M.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Priorities"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"future",children:"Future"})]}),a.jsxs("select",{value:p,onChange:M=>j(M.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Items"}),a.jsx("option",{value:"yes",children:"New Module"}),a.jsx("option",{value:"no",children:"Existing Module"})]}),a.jsxs("button",{onClick:()=>i("/backlog/new"),className:`flex items-center ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[a.jsx(Nm,{className:`${r?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Backlog Item"]})]})]}),a.jsx("div",{className:"space-y-4",children:Object.entries(P).map(([M,{sd:W,items:U}])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:`${r?"p-3":"p-4"} border-b border-gray-200 dark:border-gray-700`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:`${r?"text-base":"text-lg"} font-semibold text-gray-900 dark:text-white`,children:W.sd_title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:W.sd_id}),W.rolled_triage&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${W.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":W.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":W.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:["Triage: ",W.rolled_triage]}),W.must_have_pct!==null&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:[W.must_have_pct,"% Must-Have"]}),a.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:[U.length," items"]})]})]}),a.jsx("button",{onClick:()=>i(`/strategic-directives/${W.sd_id}`),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:a.jsx(Ge,{className:r?"w-4 h-4":"w-5 h-5"})})]})}),a.jsx("div",{className:r?"p-2":"p-3",children:U.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No backlog items found"}):a.jsx("div",{className:"space-y-2",children:U.map(A=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:a.jsxs("div",{className:`${r?"p-2":"p-3"} cursor-pointer`,onClick:()=>K(`${M}-${A.backlog_id}`),children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start flex-1",children:[a.jsx("div",{className:"mr-2 mt-1",children:u[`${M}-${A.backlog_id}`]?a.jsx(ur,{className:"w-4 h-4 text-gray-400"}):a.jsx(Et,{className:"w-4 h-4 text-gray-400"})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-mono text-xs text-gray-500 dark:text-gray-400",children:A.backlog_id}),a.jsx("span",{className:`${r?"text-sm":"text-base"} font-medium text-gray-900 dark:text-white`,children:A.backlog_title}),A.new_module&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:"New Module"})]})})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[O(A.priority),A.stage_number&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded",children:["Stage ",A.stage_number]})]})]}),u[`${M}-${A.backlog_id}`]&&a.jsxs("div",{className:`mt-3 ${r?"pl-5":"pl-6"} space-y-2`,children:[A.item_description&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.item_description})]}),A.my_comments&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Comments"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.my_comments})]}),A.phase&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Phase"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.phase})]}),A.description_raw&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tags"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.description_raw})]})]})]})},`${M}-${A.backlog_id}`))})})]},M))}),Object.keys(P).length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(wi,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No backlog items found matching your filters"})]})]})}function ZA({metrics:e,activeCount:t,totalReviews:r}){const n=[{title:"Active Reviews",value:t,icon:bm,color:"blue",trend:null},{title:"Pass Rate",value:`${e.passRate}%`,icon:ke,color:"green",trend:e.passRate>85?"up":"down",trendValue:e.passRate>85?"Good":"Needs Improvement"},{title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,icon:qr,color:"purple",trend:e.avgTime<5e3?"up":"down",trendValue:e.avgTime<5e3?"Fast":"Slow"},{title:"False Positive Rate",value:`${e.falsePositiveRate}%`,icon:It,color:e.falsePositiveRate>15?"yellow":"green",trend:e.falsePositiveRate<15?"up":"down",trendValue:e.falsePositiveRate<15?"On Target":"High"},{title:"Compliance Rate",value:`${e.complianceRate}%`,icon:ki,color:e.complianceRate>=95?"green":"yellow",trend:e.complianceRate>=95?"up":"down",trendValue:`${r} total reviews`}],s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:n.map((i,o)=>{const l=i.icon,c={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400"};return a.jsxs(xe.div,{variants:s,initial:"hidden",animate:"visible",transition:{delay:o*.05},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${c[i.color]}`,children:a.jsx(l,{className:"w-5 h-5"})}),i.trend&&a.jsx("div",{className:"flex items-center space-x-1",children:i.trend==="up"?a.jsx(ks,{className:"w-4 h-4 text-green-500"}):a.jsx(En,{className:"w-4 h-4 text-red-500"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.value}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.title}),i.trendValue&&a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:i.trendValue})]})]},i.title)})})}function eI({reviews:e,loading:t}){if(t)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Uw,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Active Reviews"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All PR reviews have been completed or there are no PRs to review."})]});const r=o=>{switch(o){case"pending":return a.jsx(qr,{className:"w-5 h-5 text-yellow-500"});case"passed":return a.jsx(ke,{className:"w-5 h-5 text-green-500"});case"failed":return a.jsx(dn,{className:"w-5 h-5 text-red-500"});case"warning":return a.jsx(It,{className:"w-5 h-5 text-orange-500"});default:return a.jsx(qr,{className:"w-5 h-5 text-gray-500"})}},n=o=>{const c={security:ki,performance:zn,database:mo,testing:JT}[o]||Ge;return a.jsx(c,{className:"w-4 h-4"})},s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}};return a.jsx(xe.div,{variants:s,initial:"hidden",animate:"visible",className:"space-y-4",children:e.map((o,l)=>a.jsxs(xe.div,{variants:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[r(o.status),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["PR #",o.pr_number,": ",o.pr_title]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(jm,{className:"w-3 h-3"}),a.jsx("span",{children:o.branch})]}),a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(qw,{className:"w-3 h-3"}),a.jsx("span",{children:o.author})]}),o.sd_link&&a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["SD: ",o.sd_link]}),o.prd_link&&a.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["PRD: ",o.prd_link]})]})]})]}),a.jsx("a",{href:o.github_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"View on GitHub",children:a.jsx(km,{className:"w-5 h-5"})})]}),o.sub_agent_reviews&&o.sub_agent_reviews.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:o.sub_agent_reviews.map(c=>a.jsxs("div",{className:`
                      flex items-center space-x-2 px-3 py-2 rounded-md text-sm
                      ${c.status==="passed"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":c.status==="failed"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}
                    `,children:[n(c.sub_agent),a.jsx("span",{className:"capitalize",children:c.sub_agent})]},c.sub_agent))})]}),o.summary&&a.jsx("div",{className:"mb-4",children:a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o.summary})}),o.issues&&o.issues.length>0&&a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-md p-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:["Issues Found (",o.issues.length,")"]}),a.jsxs("ul",{className:"space-y-1",children:[o.issues.slice(0,3).map((c,u)=>a.jsxs("li",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[" ",c]},u)),o.issues.length>3&&a.jsxs("li",{className:"text-sm text-yellow-600 dark:text-yellow-500 italic",children:["... and ",o.issues.length-3," more"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["Started: ",new Date(o.created_at).toLocaleTimeString()]}),o.review_time_ms&&a.jsxs("span",{children:["Duration: ",(o.review_time_ms/1e3).toFixed(1),"s"]})]}),o.status==="pending"&&a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-600 dark:text-yellow-400",children:[a.jsx(qr,{className:"w-3 h-3 animate-pulse"}),a.jsx("span",{children:"In Progress"})]})]})]},o.id))})}function tI({reviews:e,loading:t}){const[r,n]=w.useState(new Set);if(t)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ge,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Review History"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Review history will appear here once PR reviews are completed."})]});const s=c=>{const u=new Set(r);u.has(c)?u.delete(c):u.add(c),n(u)},i=c=>{const u={passed:{icon:ke,color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",label:"Passed"},failed:{icon:dn,color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",label:"Failed"},warning:{icon:It,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",label:"Warning"}},d=u[c]||u.warning,h=d.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:[a.jsx(h,{className:"w-3 h-3 mr-1"}),d.label]})},o=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=c=>{if(!c)return"N/A";const u=c/1e3;if(u<60)return`${u.toFixed(1)}s`;const d=Math.floor(u/60),h=(u%60).toFixed(0);return`${d}m ${h}s`};return a.jsx("div",{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-md rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"PR Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Author"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Issues"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Links"}),a.jsx("th",{className:"relative px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"Actions"})})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(c=>{var d,h;const u=r.has(c.id);return a.jsxs(zr.Fragment,{children:[a.jsxs(xe.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["PR #",c.pr_number]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:c.pr_title}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(jm,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.branch})]})]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(qw,{className:"w-4 h-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:c.author})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i(c.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((d=c.issues)==null?void 0:d.length)||0})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(qr,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{children:l(c.review_time_ms)})]}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(ET,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:o(c.created_at)})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[c.github_url&&a.jsx("a",{href:c.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"View on GitHub",children:a.jsx(km,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[c.sd_link&&a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"SD"}),c.prd_link&&a.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"PRD"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>s(c.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:u?a.jsx(xh,{className:"w-5 h-5"}):a.jsx(ur,{className:"w-5 h-5"})})})]}),u&&a.jsx("tr",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsx("td",{colSpan:"7",className:"px-6 py-4",children:a.jsxs("div",{className:"space-y-4",children:[c.summary&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Review Summary"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.summary})]}),c.sub_agent_reviews&&c.sub_agent_reviews.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:c.sub_agent_reviews.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm capitalize text-gray-700 dark:text-gray-300",children:m.sub_agent}),i(m.status)]},m.sub_agent))})]}),c.issues&&c.issues.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Issues Found"}),a.jsx("ul",{className:"space-y-1",children:c.issues.map((m,f)=>a.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",m]},f))})]}),c.metadata&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commit"}),a.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:((h=c.commit_sha)==null?void 0:h.substring(0,7))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.leo_phase||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"False Positive"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.is_false_positive?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Review ID"}),a.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:c.id.substring(0,8)})]})]})]})})})]},c.id)})})]})})}function rI({metrics:e,reviews:t}){const[r,n]=w.useState("7d"),[s,i]=w.useState("overview"),o=w.useMemo(()=>{if(!t||t.length===0)return null;const c=new Date,u={"24h":1440*60*1e3,"7d":10080*60*1e3,"30d":720*60*60*1e3},d=c-u[r],h=t.filter(g=>new Date(g.created_at)>=d),m={};h.forEach(g=>{const v=new Date(g.created_at).toLocaleDateString();m[v]||(m[v]={total:0,passed:0,failed:0,warnings:0}),m[v].total++,g.status==="passed"?m[v].passed++:g.status==="failed"?m[v].failed++:g.status==="warning"&&m[v].warnings++});const f={};return h.forEach(g=>{g.sub_agent_reviews&&g.sub_agent_reviews.forEach(v=>{f[v.sub_agent]||(f[v.sub_agent]={total:0,passed:0,failed:0,avgTime:[]}),f[v.sub_agent].total++,v.status==="passed"?f[v.sub_agent].passed++:f[v.sub_agent].failed++,v.review_time_ms&&f[v.sub_agent].avgTime.push(v.review_time_ms)})}),Object.keys(f).forEach(g=>{const v=f[g];v.passRate=(v.passed/v.total*100).toFixed(1),v.avgTime.length>0&&(v.avgTimeMs=v.avgTime.reduce((b,y)=>b+y,0)/v.avgTime.length)}),{dailyData:Object.entries(m).slice(-7),subAgentStats:f,totalReviews:h.length,passRate:h.length>0?(h.filter(g=>g.status==="passed").length/h.length*100).toFixed(1):0}},[t,r]),l=[{id:"compliance",title:"Compliance Rate",value:`${e.complianceRate}%`,target:"95%",status:e.complianceRate>=95?"good":"warning",description:"SD/PRD linkage compliance"},{id:"false-positive",title:"False Positive Rate",value:`${e.falsePositiveRate}%`,target:"<15%",status:e.falsePositiveRate<=15?"good":"warning",description:"Reviews marked as false positives"},{id:"avg-time",title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,target:"<5s",status:e.avgTime<5e3?"good":"warning",description:"Average time per review"},{id:"coverage",title:"Coverage",value:`${(o==null?void 0:o.totalReviews)||0}`,target:"PRs",status:"neutral",description:`Reviews in ${r}`}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Metrics"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("select",{value:r,onChange:c=>n(c.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[a.jsx("option",{value:"24h",children:"Last 24 Hours"}),a.jsx("option",{value:"7d",children:"Last 7 Days"}),a.jsx("option",{value:"30d",children:"Last 30 Days"})]}),a.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Export Metrics",children:a.jsx(IT,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(c=>a.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.value})]}),a.jsx("div",{className:`
                p-2 rounded-lg
                ${c.status==="good"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":c.status==="warning"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}
              `,children:c.status==="good"?a.jsx(ks,{className:"w-4 h-4"}):c.status==="warning"?a.jsx(En,{className:"w-4 h-4"}):a.jsx(bm,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Target: ",c.target]}),a.jsx("span",{className:"text-gray-400 dark:text-gray-500",title:c.description,children:a.jsx($r,{className:"w-3 h-3"})})]})]},c.id))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(CT,{className:"w-5 h-5 mr-2"}),"Daily Review Trend"]}),o!=null&&o.dailyData&&o.dailyData.length>0?a.jsxs("div",{className:"space-y-3",children:[o.dailyData.map(([c,u])=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 overflow-hidden",children:a.jsxs("div",{className:"h-full flex",children:[a.jsx("div",{className:"bg-green-500 transition-all duration-300",style:{width:`${u.passed/u.total*100}%`}}),a.jsx("div",{className:"bg-red-500 transition-all duration-300",style:{width:`${u.failed/u.total*100}%`}}),a.jsx("div",{className:"bg-yellow-500 transition-all duration-300",style:{width:`${u.warnings/u.total*100}%`}})]})}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 w-10",children:u.total})]})]},c)),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Passed"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Failed"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Warnings"})]})]})]}):a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available for selected period"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(HT,{className:"w-5 h-5 mr-2"}),"Sub-Agent Performance"]}),o!=null&&o.subAgentStats&&Object.keys(o.subAgentStats).length>0?a.jsx("div",{className:"space-y-3",children:Object.entries(o.subAgentStats).map(([c,u])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:c}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[u.total," reviews"]}),a.jsxs("span",{className:`font-medium ${parseFloat(u.passRate)>=85?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:[u.passRate,"% pass"]})]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${parseFloat(u.passRate)>=85?"bg-green-500":"bg-yellow-500"}`,style:{width:`${u.passRate}%`}})}),u.avgTimeMs&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg time: ",(u.avgTimeMs/1e3).toFixed(1),"s"]})]},c))}):a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No sub-agent data available"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"System Health Summary"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),a.jsx("p",{className:`text-lg font-semibold ${e.falsePositiveRate<=15&&e.complianceRate>=95?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:e.falsePositiveRate<=15&&e.complianceRate>=95?"Healthy":"Needs Attention"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Reviews"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.totalToday})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pass Rate Trend"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(o==null?void 0:o.passRate)||e.passRate,"%",(o==null?void 0:o.passRate)>e.passRate?a.jsx(ks,{className:"w-4 h-4 ml-2 text-green-500"}):a.jsx(En,{className:"w-4 h-4 ml-2 text-red-500"})]})]})]})]})]})}function nI({state:e,isConnected:t,refreshData:r}){const[n,s]=w.useState([]),[i,o]=w.useState({totalToday:0,passRate:0,avgTime:0,falsePositiveRate:0,complianceRate:0}),[l,c]=w.useState(!0),[u,d]=w.useState("active"),[h,m]=w.useState("all");w.useEffect(()=>{f(),g()},[]),w.useEffect(()=>{e!=null&&e.prReviews&&(e.prReviews.reviews&&s(e.prReviews.reviews),e.prReviews.metrics&&o(e.prReviews.metrics))},[e==null?void 0:e.prReviews]);const f=async()=>{try{const j=await(await fetch("/api/pr-reviews")).json();s(j||[])}catch(p){console.error("Failed to load PR reviews:",p)}finally{c(!1)}},g=async()=>{try{const j=await(await fetch("/api/pr-reviews/metrics")).json();o(j)}catch(p){console.error("Failed to load metrics:",p)}},v=async()=>{c(!0),await Promise.all([f(),g()]),c(!1)},b=n.filter(p=>p.status==="pending");n.filter(p=>p.status!=="pending");const y=h==="all"?n:n.filter(p=>p.status===h),x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Uw,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"PR Reviews"}),t&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300",children:"Live"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:v,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Refresh",children:a.jsx(Cr,{className:`w-5 h-5 ${l?"animate-spin":""}`})}),a.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Settings",children:a.jsx(WT,{className:"w-5 h-5"})})]})]}),a.jsx(ZA,{metrics:i,activeCount:b.length,totalReviews:n.length}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:["active","history","metrics"].map(p=>a.jsxs("button",{onClick:()=>d(p),className:`
                py-2 px-1 border-b-2 font-medium text-sm capitalize
                ${u===p?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
              `,children:[p==="active"&&`Active (${b.length})`,p==="history"&&"Review History",p==="metrics"&&"Metrics & Trends"]},p))})}),a.jsxs(xe.div,{variants:x,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:[u==="active"&&a.jsx(eI,{reviews:b,loading:l}),u==="history"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filter:"}),a.jsxs("select",{value:h,onChange:p=>m(p.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[a.jsx("option",{value:"all",children:"All Reviews"}),a.jsx("option",{value:"passed",children:"Passed"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"warning",children:"Warnings"})]}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",y.length," reviews"]})]}),a.jsx(tI,{reviews:y.filter(p=>p.status!=="pending"),loading:l})]}),u==="metrics"&&a.jsx(rI,{metrics:i,reviews:n})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bm,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.totalToday," reviews today"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ke,{className:"w-4 h-4 text-green-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.passRate,"% pass rate"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(qr,{className:"w-4 h-4 text-blue-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[(i.avgTime/1e3).toFixed(1),"s avg time"]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:i.falsePositiveRate>15?a.jsxs("span",{className:"flex items-center space-x-1 text-sm text-yellow-600 dark:text-yellow-400",children:[a.jsx(It,{className:"w-4 h-4"}),a.jsx("span",{children:"High false positive rate"})]}):a.jsxs("span",{className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400",children:[a.jsx(ke,{className:"w-4 h-4"}),a.jsx("span",{children:"System healthy"})]})})]})]})}const sI=({children:e,defaultValue:t,className:r=""})=>{const[n,s]=zr.useState(t);return a.jsx("div",{className:`tabs ${r}`,"data-active-tab":n,children:zr.Children.map(e,i=>zr.cloneElement(i,{activeTab:n,setActiveTab:s}))})},iI=({children:e,className:t="",activeTab:r,setActiveTab:n})=>a.jsx("div",{className:`flex space-x-1 border-b ${t}`,children:zr.Children.map(e,s=>zr.cloneElement(s,{activeTab:r,setActiveTab:n}))}),Uu=({value:e,children:t,className:r="",activeTab:n,setActiveTab:s})=>{const i=n===e;return a.jsx("button",{onClick:()=>s(e),className:`px-4 py-2 text-sm font-medium transition-colors ${i?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"} ${r}`,children:t})},Bu=({value:e,children:t,className:r="",activeTab:n})=>n!==e?null:a.jsx("div",{className:`mt-4 ${r}`,children:t}),aI="modulepreload",oI=function(e){return"/"+e},bx={},xo=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=oI(c),c in bx)return;bx[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":aI,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},lI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xo(async()=>{const{default:n}=await Promise.resolve().then(()=>Li);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Vm extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class wx extends Vm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class kx extends Vm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jx extends Vm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ph;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ph||(Ph={}));var cI=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class uI{constructor(t,{headers:r={},customFetch:n,region:s=Ph.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=lI(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return cI(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${t}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const m=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:l}).catch(b=>{throw b.name==="AbortError"?b:new wx(b)}),f=m.headers.get("x-relay-error");if(f&&f==="true")throw new kx(m);if(!m.ok)throw new jx(m);let g=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return g==="application/json"?v=yield m.json():g==="application/octet-stream"?v=yield m.blob():g==="text/event-stream"?v=m:g==="multipart/form-data"?v=yield m.formData():v=yield m.text(),{data:v,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new wx(s)}:{data:null,error:s,response:s instanceof jx||s instanceof kx?s.context:void 0}}})}}var Ft={},Hm={},Ac={},yo={},Ic={},Rc={},dI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ji=dI();const hI=ji.fetch,Ak=ji.fetch.bind(ji),Ik=ji.Headers,fI=ji.Request,mI=ji.Response,Li=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ik,Request:fI,Response:mI,default:Ak,fetch:hI},Symbol.toStringTag,{value:"Module"})),pI=i1(Li);var Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});let gI=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Dc.default=gI;var Rk=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rc,"__esModule",{value:!0});const xI=Rk(pI),yI=Rk(Dc);let vI=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=xI.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,m=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&y&&y.length>1&&(m=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,f=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{d=JSON.parse(b),Array.isArray(d)&&i.status===404&&(h=[],d=null,f=200,g="OK")}catch{i.status===404&&b===""?(f=204,g="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,g="OK"),d&&this.shouldThrowOnError)throw new yI.default(d)}return{error:d,data:h,count:m,status:f,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Rc.default=vI;var bI=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ic,"__esModule",{value:!0});const wI=bI(Rc);let kI=class extends wI.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ic.default=kI;var jI=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yo,"__esModule",{value:!0});const SI=jI(Ic);let NI=class extends SI.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};yo.default=NI;var _I=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ac,"__esModule",{value:!0});const Zi=_I(yo);let CI=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Zi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Zi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Zi.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Zi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Zi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ac.default=CI;var Dk=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hm,"__esModule",{value:!0});const TI=Dk(Ac),EI=Dk(yo);let PI=class Lk{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new TI.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Lk(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new EI.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Hm.default=PI;var Oi=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.PostgrestError=Ft.PostgrestBuilder=Ft.PostgrestTransformBuilder=Ft.PostgrestFilterBuilder=Ft.PostgrestQueryBuilder=Ft.PostgrestClient=void 0;const Ok=Oi(Hm);Ft.PostgrestClient=Ok.default;const Mk=Oi(Ac);Ft.PostgrestQueryBuilder=Mk.default;const $k=Oi(yo);Ft.PostgrestFilterBuilder=$k.default;const Fk=Oi(Ic);Ft.PostgrestTransformBuilder=Fk.default;const zk=Oi(Rc);Ft.PostgrestBuilder=zk.default;const Uk=Oi(Dc);Ft.PostgrestError=Uk.default;var AI=Ft.default={PostgrestClient:Ok.default,PostgrestQueryBuilder:Mk.default,PostgrestFilterBuilder:$k.default,PostgrestTransformBuilder:Fk.default,PostgrestBuilder:zk.default,PostgrestError:Uk.default};const{PostgrestClient:II,PostgrestQueryBuilder:WR,PostgrestFilterBuilder:GR,PostgrestTransformBuilder:KR,PostgrestBuilder:JR,PostgrestError:XR}=AI;class RI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const DI="2.15.5",LI=`realtime-js/${DI}`,OI="1.0.0",Ah=1e4,MI=1e3,$I=100;var _a;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(_a||(_a={}));var et;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(et||(et={}));var jr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(jr||(jr={}));var Ih;(function(e){e.websocket="websocket"})(Ih||(Ih={}));var as;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(as||(as={}));class FI{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Bk{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ce;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ce||(Ce={}));const Sx=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=zI(o,e,t,s),i),{})},zI=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Vk(i,o):Rh(o)},Vk=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return HI(t,r)}switch(e){case Ce.bool:return UI(t);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return BI(t);case Ce.json:case Ce.jsonb:return VI(t);case Ce.timestamp:return qI(t);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return Rh(t);default:return Rh(t)}},Rh=e=>e,UI=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},BI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},VI=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},HI=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Vk(t,l))}return e},qI=e=>typeof e=="string"?e.replace(" ","T"):e,Hk=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Vu{constructor(t,r,n={},s=Ah){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Nx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Nx||(Nx={}));class Ca{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ca.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Ca.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ca.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(b=>b.presence_ref),f=h.map(b=>b.presence_ref),g=d.filter(b=>f.indexOf(b.presence_ref)<0),v=h.filter(b=>m.indexOf(b.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(f=>f.presence_ref),m=d.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _x;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(_x||(_x={}));var Ta;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ta||(Ta={}));var Yr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Yr||(Yr={}));class qm{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Vu(this,jr.join,this.params,this.timeout),this.rejoinTimer=new Bk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ca(this),this.broadcastEndpointURL=Hk(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==et.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ta.PRESENCE]&&this.bindings[Ta.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Yr.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Yr.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){t==null||t(Yr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,y=[];for(let x=0;x<b;x++){const p=v[x],{filter:{event:j,schema:T,table:N,filter:C}}=p,E=f&&f[x];if(E&&E.event===j&&E.schema===T&&E.table===N&&E.filter===C)y.push(Object.assign(Object.assign({},p),{id:E.id}));else{this.unsubscribe(),this.state=et.errored,t==null||t(Yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Yr.SUBSCRIBED);return}}).receive("error",f=>{this.state=et.errored,t==null||t(Yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===et.joined&&t===Ta.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=et.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Vu(this,jr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=et.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Vu(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>$I){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=jr;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var g,v,b;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(v=f.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(f=>f.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var g,v,b,y,x,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const j=f.id,T=(g=f.filter)===null||g===void 0?void 0:g.event;return j&&((v=r.ids)===null||v===void 0?void 0:v.includes(j))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(x=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return j==="*"||j===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:v,table:b,commit_timestamp:y,type:x,errors:p}=g;m=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:y,eventType:x,new:{},old:{},errors:p}),this._getPayloadRecords(g))}f.callback(m,n)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&qm.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(jr.close,{},t)}_onError(t){this._on(jr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Sx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Sx(t.columns,t.old_record)),r}}const Hu=()=>{},Jo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},WI=[1e3,2e3,5e3,1e4],GI=1e4,KI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class JI{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ah,this.transport=null,this.heartbeatIntervalMs=Jo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hu,this.ref=0,this.reconnectTimer=null,this.logger=Hu,this.conn=null,this.sendBuffer=[],this.serializer=new FI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>xo(async()=>{const{default:l}=await Promise.resolve().then(()=>Li);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ih.websocket}`,this.httpEndpoint=Hk(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=RI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:OI}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _a.connecting:return as.Connecting;case _a.open:return as.Open;case _a.closing:return as.Closing;default:return as.Closed}}isConnected(){return this.connectionState()===as.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new qm(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(MI,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Jo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(jr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([KI],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:LI};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(jr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Bk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Ah,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Jo.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Hu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(h=>WI[h-1]||GI),this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:((h,m)=>m(JSON.stringify(h))),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Wm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Xe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class XI extends Wm{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Dh extends Wm{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var QI=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const qk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xo(async()=>{const{default:n}=await Promise.resolve().then(()=>Li);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},YI=()=>QI(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xo(()=>Promise.resolve().then(()=>Li),void 0)).Response:Response}),Lh=e=>{if(Array.isArray(e))return e.map(r=>Lh(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Lh(n)}),t},ZI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var _s=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const qu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),e6=(e,t,r)=>_s(void 0,void 0,void 0,function*(){const n=yield YI();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new XI(qu(s),i,o))}).catch(s=>{t(new Dh(qu(s),s))}):t(new Dh(qu(e),e))}),t6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(ZI(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function vo(e,t,r,n,s,i){return _s(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,t6(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>e6(c,l,n))})})}function rc(e,t,r,n){return _s(this,void 0,void 0,function*(){return vo(e,"GET",t,r,n)})}function Or(e,t,r,n,s){return _s(this,void 0,void 0,function*(){return vo(e,"POST",t,n,s,r)})}function Oh(e,t,r,n,s){return _s(this,void 0,void 0,function*(){return vo(e,"PUT",t,n,s,r)})}function r6(e,t,r,n){return _s(this,void 0,void 0,function*(){return vo(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Wk(e,t,r,n,s){return _s(this,void 0,void 0,function*(){return vo(e,"DELETE",t,n,s,r)})}var n6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class s6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return n6(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xe(t))return{data:null,error:t};throw t}})}}var i6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class a6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new s6(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return i6(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xe(t))return{data:null,error:t};throw t}})}}var Ot=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const o6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l6{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=qk(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Ot(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Cx),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?Oh:Or)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Ot(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Cx.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Oh(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ot(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Or(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Wm("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ot(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Ot(this,void 0,void 0,function*(){try{return{data:{path:(yield Or(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Ot(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Or(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Ot(this,void 0,void 0,function*(){try{const s=yield Or(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>rc(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new a6(c,this.shouldThrowOnError)}info(t){return Ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield rc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Lh(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}exists(t){return Ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield r6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n)&&n instanceof Dh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ot(this,void 0,void 0,function*(){try{return{data:yield Wk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ot(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},o6),r),{prefix:t||""});return{data:yield Or(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}listV2(t,r){return Ot(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Or(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const c6="2.12.2",u6={"X-Client-Info":`storage-js/${c6}`};var Is=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class d6{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},u6),r),this.fetch=qk(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Is(this,void 0,void 0,function*(){try{return{data:yield rc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xe(t))return{data:null,error:t};throw t}})}getBucket(t){return Is(this,void 0,void 0,function*(){try{return{data:yield rc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Is(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Is(this,void 0,void 0,function*(){try{return{data:yield Oh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Is(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Is(this,void 0,void 0,function*(){try{return{data:yield Wk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}}class h6 extends d6{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new l6(this.url,this.headers,t,this.fetch)}}const f6="2.58.0";let oa="";typeof Deno<"u"?oa="deno":typeof document<"u"?oa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oa="react-native":oa="node";const m6={"X-Client-Info":`supabase-js-${oa}/${f6}`},p6={headers:m6},g6={schema:"public"},x6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},y6={};var v6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const b6=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ak:t=fetch,(...r)=>t(...r)},w6=()=>typeof Headers>"u"?Ik:Headers,k6=(e,t,r)=>{const n=b6(r),s=w6();return(i,o)=>v6(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var j6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function S6(e){return e.endsWith("/")?e:e+"/"}function N6(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>j6(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function _6(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(S6(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Gk="2.72.0",Ms=30*1e3,Mh=3,Wu=Mh*Ms,C6="http://localhost:9999",T6="supabase.auth.token",E6={"X-Client-Info":`gotrue-js/${Gk}`},$h="X-Supabase-Api-Version",Kk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},P6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,A6=600*1e3;class Gm extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function he(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class I6 extends Gm{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function R6(e){return he(e)&&e.name==="AuthApiError"}class Jk extends Gm{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Xn extends Gm{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class vn extends Xn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function D6(e){return he(e)&&e.name==="AuthSessionMissingError"}class ea extends Xn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xo extends Xn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Qo extends Xn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function L6(e){return he(e)&&e.name==="AuthImplicitGrantRedirectError"}class Tx extends Xn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fh extends Xn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Gu(e){return he(e)&&e.name==="AuthRetryableFetchError"}class Ex extends Xn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class zh extends Xn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const nc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Px=` 	
\r=`.split(""),O6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Px.length;t+=1)e[Px[t].charCodeAt(0)]=-2;for(let t=0;t<nc.length;t+=1)e[nc[t].charCodeAt(0)]=t;return e})();function Ax(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nc[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nc[n]),t.queuedBits-=6}}function Xk(e,t,r){const n=O6[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ix(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{F6(o,n,r)};for(let o=0;o<e.length;o+=1)Xk(e.charCodeAt(o),s,i);return t.join("")}function M6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function $6(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}M6(n,t)}}function F6(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function z6(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Xk(e.charCodeAt(s),r,n);return new Uint8Array(t)}function U6(e){const t=[];return $6(e,r=>t.push(r)),new Uint8Array(t)}function B6(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Ax(s,r,n)),Ax(null,r,n),t.join("")}function V6(e){return Math.round(Date.now()/1e3)+e}function H6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ir=()=>typeof window<"u"&&typeof document<"u",Yn={tested:!1,writable:!1},Qk=()=>{if(!ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yn.tested)return Yn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yn.tested=!0,Yn.writable=!0}catch{Yn.tested=!0,Yn.writable=!1}return Yn.writable};function q6(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Yk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xo(async()=>{const{default:n}=await Promise.resolve().then(()=>Li);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},W6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",$s=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Zn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},gn=async(e,t)=>{await e.removeItem(t)};class Lc{constructor(){this.promise=new Lc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Lc.promiseConstructor=Promise;function Ku(e){const t=e.split(".");if(t.length!==3)throw new zh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!P6.test(t[n]))throw new zh("JWT not in base64url format");return{header:JSON.parse(Ix(t[0])),payload:JSON.parse(Ix(t[1])),signature:z6(t[2]),raw:{header:t[0],payload:t[1]}}}async function G6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function K6(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function J6(e){return("0"+e.toString(16)).substr(-2)}function X6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,J6).join("")}async function Q6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Y6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Q6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rs(e,t,r=!1){const n=X6();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await $s(e,`${t}-code-verifier`,s);const i=await Y6(n);return[i,n===i?"plain":"s256"]}const Z6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function eR(e){const t=e.headers.get($h);if(!t||!t.match(Z6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function tR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function rR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ds(e){if(!nR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ju(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rx(e){return JSON.parse(JSON.stringify(e))}var sR=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const ns=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iR=[502,503,504];async function Dx(e){var t;if(!W6(e))throw new Fh(ns(e),0);if(iR.includes(e.status))throw new Fh(ns(e),e.status);let r;try{r=await e.json()}catch(i){throw new Jk(ns(i),i)}let n;const s=eR(e);if(s&&s.getTime()>=Kk["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ex(ns(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new vn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ex(ns(r),e.status,r.weak_password.reasons);throw new I6(ns(r),e.status||500,n)}const aR=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ye(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[$h]||(i[$h]=Kk["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await oR(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function oR(e,t,r,n,s,i){const o=aR(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Fh(ns(c),0)}if(l.ok||await Dx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Dx(c)}}function Ir(e){var t;let r=null;dR(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=V6(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Lx(e){const t=Ir(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Sn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function lR(e){return{data:e,error:null}}function cR(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=sR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function uR(e){return e}function dR(e){return e.access_token&&e.refresh_token&&e.expires_in}const Xu=["global","local","others"];var hR=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class fR{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Yk(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Xu[0]){if(Xu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xu.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Sn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=hR(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:cR,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Sn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:uR});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(he(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ds(t);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Sn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ds(t);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Sn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ds(t);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Sn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ds(t.userId);try{const{data:r,error:n}=await ye(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ds(t.userId),Ds(t.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}}function Ox(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function mR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ls={debug:!!(globalThis&&Qk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class pR extends Zk{}async function gR(e,t,r){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new pR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ls.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function e1(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function xR(e){return parseInt(e,16)}function yR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function vR(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=e1(e.address),g=d?`${d}://${n}`:n,v=e.statement?`${e.statement}
`:"",b=`${g} wants you to sign in with your Ethereum account:
${f}

${v}`;let y=`URI: ${h}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);x+=`
- ${p}`}y+=x}return`${b}
${y}`}mR();const bR={url:C6,storageKey:T6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:E6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mx(e,t,r){return await r()}const Os={};class no{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=no.nextInstanceID,no.nextInstanceID+=1,this.instanceID>0&&ir()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},bR),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new fR({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Yk(s.fetch),this.lock=s.lock||Mx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ir()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=gR:this.lock=Mx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Qk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ox(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ox(this.memoryStorage)),ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Os[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Os[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=q6(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ir()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),L6(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return he(r)?{error:r}:{error:new Jk("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ir}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Rs(this.storage,this.storageKey)),i=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:g},xform:Ir})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ir})}else throw new Xo("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Lx})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Lx})}else throw new Xo("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ea}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,m;let f,g;if("message"in t)f=t.message,g=t.signature;else{const{chain:v,wallet:b,statement:y,options:x}=t;let p;if(ir())if(typeof b=="object")p=b;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")p=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=b}const j=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),T=await p.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=e1(T[0]);let C=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const D=await p.request({method:"eth_chainId"});C=xR(D)}const E={domain:j.host,address:N,statement:y,uri:j.href,version:"1",chainId:C,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};f=vR(E),g=await p.request({method:"personal_sign",params:[yR(f),N]})}try{const{data:v,error:b}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ir});if(b)throw b;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new ea}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:b})}catch(v){if(he(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,m,f;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:b,wallet:y,statement:x,options:p}=t;let j;if(ir())if(typeof y=="object")j=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const T=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),x?{statement:x}:null));let C;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")C=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)C=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)g=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),v=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${T.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=N}}try{const{data:b,error:y}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:B6(v)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ir});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ea}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(he(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Zn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ir});if(await gn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ea}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(he(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ir}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ea}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Rs(this.storage,this.storageKey));const{error:h}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Xo("You must provide either an email or phone number.")}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ir});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Rs(this.storage,this.storageKey)),await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:lR})}catch(i){if(he(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new vn;const{error:s}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await ye(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await ye(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Xo("You must provide either an email or phone number and a type")}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Zn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Wu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Zn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ju()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Sn}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vn}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Sn})})}catch(r){if(he(r))return D6(r)&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new vn;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Rs(this.storage,this.storageKey));const{data:u,error:d}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Sn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new vn;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Ku(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(he(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new vn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ir())throw new Qo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Qo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Tx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Tx("No code detected.");const{data:x,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Qo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const f=m-d;f*1e3<=Ms&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=m-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,m,d);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(he(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Zn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(R6(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=H6(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Rs(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(he(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ir()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(he(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await K6(async s=>(s>0&&await G6(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ir})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Gu(i)&&Date.now()+o-n<Ms})}catch(n){if(this._debug(r,"error",n),he(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ir()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Zn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Zn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await $s(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ju()}else if(s&&!s.user&&!s.user){const o=await Zn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await gn(this.storage,this.storageKey+"-user"),await $s(this.storage,this.storageKey,s)):s.user=Ju()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Wu;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Wu}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Gu(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Lc;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new vn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),he(i)){const o={session:null,error:i};return Gu(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await $s(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Rx(s);await $s(this.storage,this.storageKey,i)}else{const s=Rx(r);await $s(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await gn(this.storage,this.storageKey),await gn(this.storage,this.storageKey+"-code-verifier"),await gn(this.storage,this.storageKey+"-user"),this.userStorage&&await gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ir()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ms);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ms);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ms}ms, refresh threshold is ${Mh} ticks`),s<=Mh&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Zk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ir()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Rs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ye(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ku(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+A6>s)return n;const{data:i,error:o}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};n=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Ku(n);r!=null&&r.allowExpired||tR(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const d=rR(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,U6(`${l}.${c}`)))throw new zh("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}}no.nextInstanceID=0;const wR=no;class kR extends wR{constructor(t){super(t)}}var jR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class SR{constructor(t,r,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=_6(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:g6,realtime:y6,auth:Object.assign(Object.assign({},x6),{storageKey:c}),global:p6},d=N6(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=k6(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new II(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new h6(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new uI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return jR(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kR({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new JI(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bo=(e,t,r)=>new SR(e,t,r);function NR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}NR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _R="https://dedlbzhpgkmetvhbkyzq.supabase.co",CR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g",Pn=bo(_R,CR),TR=()=>{const[e,t]=w.useState(null),[r,n]=w.useState(null),[s,i]=w.useState("idle"),[o,l]=w.useState(null),[c,u]=w.useState([]),[d,h]=w.useState("skip"),[m,f]=w.useState({}),g=w.useRef(null),v=C=>{const E=C.split(".").pop().toLowerCase();return E==="csv"||E==="json"?E:null},b=C=>{const E=C.split(`
`).filter(R=>R.trim()),D=E[0].split(",").map(R=>R.trim());return E.slice(1).map(R=>{const P=R.split(",").map(K=>K.trim()),O={};return D.forEach((K,I)=>{O[K]=P[I]||""}),O})},y=C=>{try{const E=JSON.parse(C);return Array.isArray(E)?E:[E]}catch(E){return console.error("JSON parsing error:",E),[]}},x=C=>{const E=C.target.files[0];if(E){const D=v(E.name);if(!D){alert("Please select a CSV or JSON file");return}t(E);const R=new FileReader;R.onload=P=>{const O=P.target.result;n(O);const K=D==="csv"?b(O):y(O);u(K.slice(0,5))},R.readAsText(E)}},p=C=>{const E=["title","description","priority"],D=[],R=[];return C.forEach((P,O)=>{const K=E.filter(I=>!P[I]);K.length===0?D.push({...P,id:P.id||`imported-${Date.now()}-${O}`,category:P.category||"uncategorized",status:P.status||"pending",estimated_effort:P.estimated_effort||"medium",created_at:new Date().toISOString()}):R.push({item:P,reason:`Missing fields: ${K.join(", ")}`})}),{validItems:D,invalidItems:R}},j=async C=>{try{const E=C.map(I=>I.title),{data:D,error:R}=await Pn.from("backlog_items").select("title").in("title",E);if(R)throw R;const P=new Set(D.map(I=>I.title)),O=C.filter(I=>P.has(I.title)),K=C.filter(I=>!P.has(I.title));return{duplicates:O,unique:K}}catch(E){return console.error("Error checking duplicates:",E),{duplicates:[],unique:C}}},T=async()=>{if(!r){alert("Please select a file first");return}i("processing");try{const E=v(e.name)==="csv"?b(r):y(r),{validItems:D,invalidItems:R}=p(E);if(D.length===0){i("error"),l({success:!1,message:"No valid items to import",invalidItems:R});return}const{duplicates:P,unique:O}=await j(D);let K=O;if(P.length>0&&d==="merge")for(const I of P){const{error:M}=await Pn.from("backlog_items").update(I).eq("title",I.title);M&&console.error("Error updating duplicate:",M)}if(K.length>0){const{data:I,error:M}=await Pn.from("backlog_items").insert(K).select();if(M)throw M;i("success"),l({success:!0,imported:I.length,duplicates:P.length,invalid:R.length,message:`Successfully imported ${I.length} items`})}else i("warning"),l({success:!0,imported:0,duplicates:P.length,invalid:R.length,message:"All items were duplicates"})}catch(C){console.error("Import error:",C),i("error"),l({success:!1,message:`Import failed: ${C.message}`})}},N=()=>{t(null),n(null),i("idle"),l(null),u([]),g.current&&(g.current.value="")};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Backlog Import Manager"}),a.jsx("p",{className:"text-gray-600",children:"Import backlog items from CSV or JSON files"})]}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 mb-6",children:[a.jsx("input",{ref:g,type:"file",accept:".csv,.json",onChange:x,className:"hidden"}),a.jsxs("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>{var C;return(C=g.current)==null?void 0:C.click()},children:[a.jsx(XT,{className:"h-12 w-12 text-gray-400 mb-3"}),a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Click to upload or drag and drop"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV or JSON files only"})]}),e&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md flex items-center",children:[e.name.endsWith(".csv")?a.jsx(Ge,{className:"h-5 w-5 text-blue-600 mr-2"}):a.jsx(DT,{className:"h-5 w-5 text-blue-600 mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:e.name}),a.jsx("button",{onClick:N,className:"ml-auto text-red-500 hover:text-red-700",children:"Remove"})]})]}),c.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Preview (First 5 items)"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:Object.keys(c[0]).map(C=>a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:C},C))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((C,E)=>a.jsx("tr",{children:Object.values(C).map((D,R)=>a.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:[String(D).substring(0,50),String(D).length>50&&"..."]},R))},E))})]})})]}),e&&a.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Import Options"}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duplicate Handling"}),a.jsxs("select",{value:d,onChange:C=>h(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"skip",children:"Skip Duplicates"}),a.jsx("option",{value:"merge",children:"Merge/Update Existing"})]})]})})]}),e&&s==="idle"&&a.jsxs("button",{onClick:T,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center",children:[a.jsx(mo,{className:"h-5 w-5 mr-2"}),"Import Backlog Items"]}),s==="processing"&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(Bw,{className:"h-8 w-8 text-blue-600 animate-spin"}),a.jsx("span",{className:"ml-3 text-gray-700",children:"Processing import..."})]}),o&&a.jsx("div",{className:`p-4 rounded-lg ${s==="success"?"bg-green-50 border border-green-200":s==="warning"?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[s==="success"?a.jsx(ke,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}):a.jsx(tr,{className:`h-5 w-5 mt-0.5 mr-2 ${s==="warning"?"text-yellow-500":"text-red-500"}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold",children:o.message}),o.success&&a.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[a.jsxs("p",{children:[" Imported: ",o.imported," items"]}),o.duplicates>0&&a.jsxs("p",{children:[" Duplicates: ",o.duplicates," items"]}),o.invalid>0&&a.jsxs("p",{children:[" Invalid: ",o.invalid," items"]})]}),a.jsx("button",{onClick:N,className:"mt-3 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Import Another File"})]})]})})]})},ER=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(null),[o,l]=w.useState(!1),[c,u]=w.useState(!1),[d,h]=w.useState({total:0,generated:0,manual:0,verified:0});w.useEffect(()=>{m(),f()},[]);const m=async()=>{try{const{data:P,error:O}=await Pn.from("backlog_items").select("*").order("priority",{ascending:!0}).order("created_at",{ascending:!1});if(O)throw O;t(P||[])}catch(P){console.error("Error fetching backlog items:",P)}},f=async()=>{try{const{data:P,error:O}=await Pn.from("user_stories").select("id, is_generated, verification_status");if(O)throw O;const K={total:P.length,generated:P.filter(I=>I.is_generated).length,manual:P.filter(I=>!I.is_generated).length,verified:P.filter(I=>I.verification_status==="verified").length};h(K)}catch(P){console.error("Error fetching story stats:",P)}},g=async P=>{l(!0),n(P),await new Promise(K=>setTimeout(K,1500));const O={title:P.title,user_story:v(P),acceptance_criteria:N(P),technical_notes:C(P),estimated_effort:P.estimated_effort||"medium",priority:P.priority,tags:E(P),is_generated:!0,backlog_item_id:P.id,created_at:new Date().toISOString()};i(O),l(!1)},v=P=>{const O=[`As a ${b(P)}, I want to ${y(P)} so that ${p(P)}`,`As a ${b(P)}, I need ${x(P)} in order to ${j()}`,`As a ${b(P)}, I would like to ${y(P)} to ${T()}`];return O[Math.floor(Math.random()*O.length)]},b=P=>{const O=["user","administrator","developer","customer","manager"];return P.category==="admin"?"administrator":P.category==="development"?"developer":O[Math.floor(Math.random()*O.length)]},y=P=>P.title.toLowerCase().replace(/^(add|create|implement|build|develop)\s+/,""),x=P=>P.title.toLowerCase(),p=P=>{var K;const O=["improve efficiency","save time","enhance user experience","increase productivity","streamline workflows"];return((K=P.description)==null?void 0:K.substring(0,50))||O[Math.floor(Math.random()*O.length)]},j=P=>"achieve better results",T=P=>"complete tasks more efficiently",N=P=>{const O=[`The ${x(P)} should be accessible to authorized users`,"System should provide feedback on successful completion","Feature should handle error cases gracefully","Performance should meet defined SLA requirements","User interface should be intuitive and responsive"];return(P.priority==="high"||P.priority==="critical")&&(O.push("Feature should include comprehensive logging"),O.push("Security measures should be implemented")),O.slice(0,4+Math.floor(Math.random()*2))},C=P=>{const O=[];return P.category==="frontend"&&(O.push("Ensure responsive design for mobile devices"),O.push("Implement proper state management")),P.category==="backend"&&(O.push("Implement proper error handling and logging"),O.push("Ensure API endpoints follow RESTful principles")),(P.priority==="high"||P.priority==="critical")&&(O.push("Include unit tests with minimum 80% coverage"),O.push("Document API changes in technical documentation")),O},E=P=>{const O=[P.category];return P.priority&&O.push(P.priority),P.estimated_effort&&O.push(P.estimated_effort),O.filter(Boolean)},D=async()=>{if(s)try{const{data:P,error:O}=await Pn.from("user_stories").insert([s]).select();if(O)throw O;await Pn.from("backlog_items").update({user_story_id:P[0].id}).eq("id",r.id),alert("User story saved successfully!"),i(null),n(null),m(),f()}catch(P){console.error("Error saving story:",P),alert("Failed to save user story")}},R=(P,O)=>{i(K=>({...K,[P]:O}))};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[a.jsx(eo,{className:"h-6 w-6 mr-2 text-yellow-500"}),"AI Story Generation Engine"]}),a.jsx("p",{className:"text-gray-600",children:"Generate user stories from backlog items using AI"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:d.total}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Stories"})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.generated}),a.jsx("div",{className:"text-sm text-gray-600",children:"AI Generated"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.manual}),a.jsx("div",{className:"text-sm text-gray-600",children:"Manual"})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d.verified}),a.jsx("div",{className:"text-sm text-gray-600",children:"Verified"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Backlog Items"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.map(P=>{var O;return a.jsx("div",{onClick:()=>!o&&g(P),className:`p-3 border-b cursor-pointer hover:bg-gray-50 transition-colors ${(r==null?void 0:r.id)===P.id?"bg-blue-50":""}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm",children:P.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(O=P.description)==null?void 0:O.substring(0,100),"..."]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded ${P.priority==="high"?"bg-red-100 text-red-700":P.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:P.priority}),P.user_story_id&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded flex items-center",children:[a.jsx(ke,{className:"h-3 w-3 mr-1"}),"Has Story"]})]})]}),a.jsx("button",{onClick:K=>{K.stopPropagation(),g(P)},className:"ml-2 p-2 text-blue-600 hover:bg-blue-50 rounded",disabled:o,children:a.jsx(_m,{className:"h-4 w-4"})})]})},P.id)})})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Generated User Story"}),o&&a.jsxs("div",{className:"border rounded-lg p-8 flex flex-col items-center justify-center",children:[a.jsx(Cr,{className:"h-8 w-8 text-blue-600 animate-spin mb-3"}),a.jsx("p",{className:"text-gray-600",children:"Generating user story..."})]}),s&&!o&&a.jsx("div",{className:"border rounded-lg p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Story"}),a.jsx("textarea",{value:s.user_story,onChange:P=>R("user_story",P.target.value),disabled:!c,className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acceptance Criteria"}),a.jsx("div",{className:"space-y-2",children:s.acceptance_criteria.map((P,O)=>a.jsxs("div",{className:"flex items-start",children:[a.jsx(ke,{className:"h-4 w-4 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),a.jsx("input",{type:"text",value:P,onChange:K=>{const I=[...s.acceptance_criteria];I[O]=K.target.value,R("acceptance_criteria",I)},disabled:!c,className:"flex-1 px-2 py-1 border rounded text-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]},O))})]}),s.technical_notes.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technical Notes"}),a.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.technical_notes.map((P,O)=>a.jsx("li",{className:"text-sm text-gray-600",children:P},O))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((P,O)=>a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md text-xs",children:P},O))})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[a.jsxs("button",{onClick:()=>u(!c),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 flex items-center",children:[a.jsx(BT,{className:"h-4 w-4 mr-2"}),c?"Done Editing":"Edit"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>g(r),className:"px-4 py-2 text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 flex items-center",children:[a.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Regenerate"]}),a.jsxs("button",{onClick:D,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center",children:[a.jsx(gs,{className:"h-4 w-4 mr-2"}),"Save Story"]})]})]})]})}),!s&&!o&&a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsx(Ge,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"Select a backlog item to generate a user story"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"AI will create acceptance criteria and technical notes"})]})]})]})]})},PR=()=>{const[e,t]=w.useState({storyCompletion:0,verificationCoverage:0,testCoverage:0,criticalBugs:0,performanceMetrics:0,securityChecks:0}),[r,n]=w.useState({storyCompletion:85,verificationCoverage:80,testCoverage:70,criticalBugs:0,performanceMetrics:90,securityChecks:100}),[s,i]=w.useState("calculating"),[o,l]=w.useState(""),[c,u]=w.useState(!1),[d,h]=w.useState([]);w.useEffect(()=>{m(),f()},[]);const m=async()=>{try{const{data:p,error:j}=await Pn.from("user_stories").select("id, status, verification_status");if(!j){const T=p.length||1,N=p.filter(E=>E.status==="completed").length,C=p.filter(E=>E.verification_status==="verified").length;t(E=>({...E,storyCompletion:Math.round(N/T*100),verificationCoverage:Math.round(C/T*100)}))}t(T=>({...T,testCoverage:75+Math.random()*20,criticalBugs:Math.floor(Math.random()*3),performanceMetrics:85+Math.random()*10,securityChecks:Math.random()>.3?100:0})),g()}catch(p){console.error("Error fetching metrics:",p)}},f=async()=>{h([{id:1,version:"v2.1.0",date:"2024-01-15",status:"passed",metrics:{storyCompletion:92,verificationCoverage:88,testCoverage:82}},{id:2,version:"v2.0.9",date:"2024-01-08",status:"override",metrics:{storyCompletion:78,verificationCoverage:75,testCoverage:71},justification:"Critical security patch required immediate release"},{id:3,version:"v2.0.8",date:"2024-01-01",status:"passed",metrics:{storyCompletion:95,verificationCoverage:92,testCoverage:85}}])},g=()=>{const p=e.storyCompletion>=r.storyCompletion&&e.verificationCoverage>=r.verificationCoverage&&e.testCoverage>=r.testCoverage&&e.criticalBugs<=r.criticalBugs&&e.performanceMetrics>=r.performanceMetrics&&e.securityChecks>=r.securityChecks;i(p?"passed":"failed")},v=(p,j,T=!1)=>(T?p<=j:p>=j)?"text-green-600":"text-red-600",b=(p,j,T=!1)=>(T?p<=j:p>=j)?a.jsx(ke,{className:"h-5 w-5 text-green-500"}):a.jsx(dn,{className:"h-5 w-5 text-red-500"}),y=async()=>{if(!o.trim()){alert("Please provide a justification for the override");return}try{const p={metrics:e,thresholds:r,justification:o,user:"current_user",timestamp:new Date().toISOString()};console.log("Override logged:",p),alert("Release gate override approved and logged"),u(!1),l(""),i("override")}catch(p){console.error("Error logging override:",p)}},x=(p,j)=>{n(T=>({...T,[p]:parseFloat(j)}))};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[a.jsx(ki,{className:"h-6 w-6 mr-2 text-blue-600"}),"Release Gate Calculator"]}),a.jsx("p",{className:"text-gray-600",children:"Automated release readiness assessment based on completion metrics"})]}),a.jsx("div",{className:`mb-6 p-4 rounded-lg ${s==="passed"?"bg-green-50 border-2 border-green-500":s==="override"?"bg-yellow-50 border-2 border-yellow-500":s==="failed"?"bg-red-50 border-2 border-red-500":"bg-gray-50 border-2 border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[s==="passed"?a.jsx(ke,{className:"h-8 w-8 text-green-600 mr-3"}):s==="failed"?a.jsx(dn,{className:"h-8 w-8 text-red-600 mr-3"}):s==="override"?a.jsx(It,{className:"h-8 w-8 text-yellow-600 mr-3"}):a.jsx("div",{className:"h-8 w-8 mr-3 border-4 border-gray-300 border-t-blue-600 rounded-full animate-spin"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:s==="passed"?"Release Gate: PASSED":s==="failed"?"Release Gate: FAILED":s==="override"?"Release Gate: OVERRIDE":"Calculating Gate Status..."}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s==="passed"?"All criteria met - ready for release":s==="failed"?"Some criteria not met - review required":s==="override"?"Released with override justification":"Analyzing metrics..."})]})]}),s==="failed"&&a.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 flex items-center",children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),"Override Gate"]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Story Completion"}),b(e.storyCompletion,r.storyCompletion)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.storyCompletion,r.storyCompletion)}`,children:[e.storyCompletion,"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.storyCompletion,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.storyCompletion>=r.storyCompletion?"bg-green-500":"bg-red-500"}`,style:{width:`${e.storyCompletion}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Verification Coverage"}),b(e.verificationCoverage,r.verificationCoverage)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.verificationCoverage,r.verificationCoverage)}`,children:[e.verificationCoverage,"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.verificationCoverage,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.verificationCoverage>=r.verificationCoverage?"bg-green-500":"bg-red-500"}`,style:{width:`${e.verificationCoverage}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Test Coverage"}),b(e.testCoverage,r.testCoverage)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.testCoverage,r.testCoverage)}`,children:[Math.round(e.testCoverage),"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.testCoverage,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.testCoverage>=r.testCoverage?"bg-green-500":"bg-red-500"}`,style:{width:`${e.testCoverage}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Critical Bugs"}),b(e.criticalBugs,r.criticalBugs,!0)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:`text-2xl font-bold ${v(e.criticalBugs,r.criticalBugs,!0)}`,children:e.criticalBugs}),a.jsxs("span",{className:"text-sm text-gray-500",children:[" ",r.criticalBugs]})]}),a.jsx("div",{className:"mt-2 text-xs text-gray-600",children:e.criticalBugs===0?"No critical bugs":`${e.criticalBugs} bug(s) found`})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Performance Metrics"}),b(e.performanceMetrics,r.performanceMetrics)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.performanceMetrics,r.performanceMetrics)}`,children:[Math.round(e.performanceMetrics),"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.performanceMetrics,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.performanceMetrics>=r.performanceMetrics?"bg-green-500":"bg-red-500"}`,style:{width:`${e.performanceMetrics}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Security Checks"}),b(e.securityChecks,r.securityChecks)]}),a.jsx("div",{className:"flex items-baseline gap-2",children:a.jsx("span",{className:`text-2xl font-bold ${v(e.securityChecks,r.securityChecks)}`,children:e.securityChecks===100?"Passed":"Failed"})}),a.jsx("div",{className:"mt-2 text-xs text-gray-600",children:e.securityChecks===100?"All security checks passed":"Security issues detected"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Gate Thresholds"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Story Completion (%)"}),a.jsx("input",{type:"number",value:r.storyCompletion,onChange:p=>x("storyCompletion",p.target.value),className:"w-full px-3 py-1 border rounded-md",min:"0",max:"100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Verification Coverage (%)"}),a.jsx("input",{type:"number",value:r.verificationCoverage,onChange:p=>x("verificationCoverage",p.target.value),className:"w-full px-3 py-1 border rounded-md",min:"0",max:"100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Test Coverage (%)"}),a.jsx("input",{type:"number",value:r.testCoverage,onChange:p=>x("testCoverage",p.target.value),className:"w-full px-3 py-1 border rounded-md",min:"0",max:"100"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Recent Release History"}),a.jsx("div",{className:"space-y-2",children:d.map(p=>a.jsxs("div",{className:"border rounded-lg p-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(jm,{className:"h-4 w-4 text-gray-500 mr-2"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:p.version}),a.jsx("span",{className:"text-sm text-gray-500 ml-2",children:p.date})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-xs text-gray-600",children:["SC: ",p.metrics.storyCompletion,"% | VC: ",p.metrics.verificationCoverage,"% | TC: ",p.metrics.testCoverage,"%"]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p.status==="passed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:p.status==="passed"?"Passed":"Override"})]})]},p.id))})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Override Release Gate"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Overriding the release gate requires justification and will be logged for audit purposes."}),a.jsx("textarea",{value:o,onChange:p=>l(p.target.value),placeholder:"Enter justification for override...",className:"w-full px-3 py-2 border rounded-md mb-4",rows:4}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{onClick:y,className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:"Confirm Override"})]})]})})]})},AR=()=>{const[e,t]=w.useState("import"),r=Ei();return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"EHG Backlog Import System"}),a.jsx("p",{className:"text-gray-600",children:"Import backlog items, generate user stories, and calculate release readiness"}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"SD: fbe359b4-aa56-4740-8350-d51760de0a3b"}),a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"EHG Engineer Dashboard"})]})]}),a.jsxs("button",{onClick:()=>r("/"),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg flex items-center gap-2 transition-colors",children:[a.jsx(yn,{className:"h-4 w-4"}),"Back to Dashboard"]})]}),a.jsxs(sI,{value:e,onValueChange:t,className:"space-y-6",children:[a.jsxs(iI,{className:"grid w-full grid-cols-3",children:[a.jsxs(Uu,{value:"import",className:"flex items-center gap-2",children:[a.jsx(wi,{className:"h-4 w-4"}),"Import Backlog"]}),a.jsxs(Uu,{value:"stories",className:"flex items-center gap-2",children:[a.jsx(_m,{className:"h-4 w-4"}),"Story Generation"]}),a.jsxs(Uu,{value:"release",className:"flex items-center gap-2",children:[a.jsx(GT,{className:"h-4 w-4"}),"Release Gates"]})]}),a.jsx(Bu,{value:"import",className:"space-y-4",children:a.jsx(TR,{})}),a.jsx(Bu,{value:"stories",className:"space-y-4",children:a.jsx(ER,{})}),a.jsx(Bu,{value:"release",className:"space-y-4",children:a.jsx(PR,{})})]}),a.jsxs("div",{className:"mt-12 p-6 bg-white rounded-lg shadow-sm border",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Overview"}),a.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"0"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total Backlog Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),a.jsx("div",{className:"text-sm text-gray-500",children:"AI Generated Stories"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:"0%"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Release Readiness"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"0"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Active Gates"})]})]})]})]})})};function t1({testResult:e,onClose:t,onSuccess:r}){const[n,s]=w.useState("idle"),[i,o]=w.useState(0),[l,c]=w.useState(""),[u,d]=w.useState(null),[h,m]=w.useState(null);w.useEffect(()=>{n==="idle"&&f()},[]);const f=async()=>{try{s("analyzing"),o(10),c("Analyzing test failure and business impact...");const b={case_id:e.id||e.case_id,title:e.title,section:e.section,priority:e.priority,status:e.status||"FAIL",description:e.description},y=await fetch("/api/uat/convert-to-sd",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!y.ok)throw new Error("Failed to convert to Strategic Directive");o(40),s("generating"),c("Generating Strategic Directive components..."),await new Promise(p=>setTimeout(p,1500)),o(70),s("validating"),c("Validating quality and completeness..."),await new Promise(p=>setTimeout(p,1e3)),o(90),c("Creating submission in database...");const x=await y.json();o(100),s("complete"),c("Strategic Directive created successfully!"),m(x),setTimeout(()=>{r?r(x):t()},3e3)}catch(b){console.error("Conversion failed:",b),s("error"),d(b.message||"Failed to convert test failure to Strategic Directive"),c("")}},g=()=>{switch(n){case"analyzing":return a.jsx(gh,{className:"h-6 w-6 text-blue-500 animate-pulse"});case"generating":return a.jsx(eo,{className:"h-6 w-6 text-purple-500 animate-pulse"});case"validating":return a.jsx(zn,{className:"h-6 w-6 text-yellow-500 animate-pulse"});case"complete":return a.jsx(ke,{className:"h-6 w-6 text-green-500"});case"error":return a.jsx(tr,{className:"h-6 w-6 text-red-500"});default:return a.jsx(Ge,{className:"h-6 w-6 text-gray-500"})}},v=()=>{switch(n){case"analyzing":return"from-blue-600 to-blue-500";case"generating":return"from-purple-600 to-purple-500";case"validating":return"from-yellow-600 to-yellow-500";case"complete":return"from-green-600 to-green-500";case"error":return"from-red-600 to-red-500";default:return"from-gray-600 to-gray-500"}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60] overflow-y-auto",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:`bg-gradient-to-r ${v()} text-white p-6 rounded-t-xl`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[g(),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:n==="complete"?"Strategic Directive Created!":"Creating Strategic Directive"}),a.jsx("p",{className:"text-white/90 text-sm mt-1",children:"AI-powered conversion from UAT test failure"})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",disabled:n!=="complete"&&n!=="error",children:a.jsx(pr,{className:"h-5 w-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:a.jsx("div",{className:"flex items-start gap-3",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:["Test Case: ",e.case_id]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsxs("span",{className:`text-xs px-2 py-1 rounded font-semibold ${e.priority==="critical"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":e.priority==="high"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300"}`,children:[e.priority," priority"]}),a.jsx("span",{className:"text-xs px-2 py-1 rounded font-semibold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",children:"FAILED"})]})]})})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n==="analyzing"||i>=10?"bg-blue-50 dark:bg-blue-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=10?a.jsx(ke,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}):n==="analyzing"?a.jsx(en,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${n==="analyzing"||i>=10?"text-blue-800 dark:text-blue-300":"text-gray-500 dark:text-gray-400"}`,children:"Analyze Test Failure"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Determine business impact and strategic importance"})]})]}),a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n==="generating"||i>=40?"bg-purple-50 dark:bg-purple-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=40?a.jsx(ke,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}):n==="generating"?a.jsx(en,{className:"h-5 w-5 text-purple-600 dark:text-purple-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${n==="generating"||i>=40?"text-purple-800 dark:text-purple-300":"text-gray-500 dark:text-gray-400"}`,children:"Generate SD Components"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Create comprehensive documentation and requirements"})]})]}),a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n==="validating"||i>=70?"bg-yellow-50 dark:bg-yellow-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=70?a.jsx(ke,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}):n==="validating"?a.jsx(en,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${n==="validating"||i>=70?"text-yellow-800 dark:text-yellow-300":"text-gray-500 dark:text-gray-400"}`,children:"Validate Quality"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Ensure completeness and actionability"})]})]}),a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${i>=90?"bg-green-50 dark:bg-green-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=90?a.jsx(ke,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):i>=70?a.jsx(en,{className:"h-5 w-5 text-green-600 dark:text-green-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${i>=90?"text-green-800 dark:text-green-300":"text-gray-500 dark:text-gray-400"}`,children:"Create Submission"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Store in database and link to UAT"})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full bg-gradient-to-r ${v()} transition-all duration-500`,style:{width:`${i}%`}})}),l&&n!=="complete"&&n!=="error"&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 text-center",children:l})]}),n==="complete"&&h&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ke,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Strategic Directive Created Successfully!"}),a.jsxs("div",{className:"space-y-1 text-sm text-green-700 dark:text-green-400",children:[a.jsxs("p",{children:[" Submission ID: ",a.jsx("code",{className:"font-mono bg-green-100 dark:bg-green-900/30 px-1 rounded",children:h.id})]}),a.jsxs("p",{children:[" SD ID: ",a.jsx("code",{className:"font-mono bg-green-100 dark:bg-green-900/30 px-1 rounded",children:h.sd_id})]}),a.jsxs("p",{children:[" AI Confidence: ",a.jsxs("span",{className:"font-semibold",children:[(h.confidence_score*100).toFixed(1),"%"]})]}),a.jsxs("p",{children:[" Status: ",a.jsx("span",{className:"font-semibold",children:"Pending Review"})]})]})]})]})}),n==="error"&&u&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(tr,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-red-800 dark:text-red-300 mb-1",children:"Conversion Failed"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:u})]})]})})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:n==="complete"?a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The Strategic Directive has been created and is pending review"}),a.jsxs("button",{onClick:()=>r(h),className:"px-6 py-2 bg-gradient-to-r from-green-600 to-green-500 text-white rounded-lg hover:from-green-700 hover:to-green-600 transition-colors flex items-center gap-2",children:["Continue",a.jsx(Ql,{className:"h-4 w-4"})]})]}):n==="error"?a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"}),a.jsx("button",{onClick:f,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]}):a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[a.jsx(en,{className:"h-5 w-5 animate-spin"}),a.jsx("span",{className:"text-sm",children:"Processing... Please wait"})]})})})]})})}const $x=bo("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function IR({testCase:e,runId:t,onClose:r,onComplete:n}){const[s,i]=w.useState(null),[o,l]=w.useState(""),[c,u]=w.useState(null),[d,h]=w.useState(!1),[m,f]=w.useState(!1),[g,v]=w.useState(!1),[b,y]=w.useState(!1),[x,p]=w.useState(null),j=w.useRef(null);w.useEffect(()=>{const D=P=>{var K;const O=(K=P.clipboardData)==null?void 0:K.items;if(O){for(const I of O)if(I.type.startsWith("image/")){P.preventDefault();const M=I.getAsFile(),W=new FileReader;W.onload=U=>{u(U.target.result)},W.readAsDataURL(M);break}}},R=j.current;if(R)return R.addEventListener("paste",D),()=>R.removeEventListener("paste",D)},[]);const T=()=>{navigator.clipboard.writeText(e.id),f(!0),setTimeout(()=>f(!1),2e3)},N=()=>{const D=`Please activate the UAT sub-agent to help me execute test case ${e.id}.

UAT TEST EXECUTION REQUEST
Test ID: ${e.id}
Title: ${e.title}
Type: ${e.test_type==="manual"?"Manual":"Automated"}
Priority: ${e.priority}
Section: ${e.section.replace(/_/g," ")}

Test Description:
${e.description||"No detailed description available"}

I need the UAT sub-agent to guide me through this test by:
1. Breaking down the specific actions I should take
2. Clarifying what expected results I should see
3. Identifying any edge cases I should check
4. Warning me about common issues to watch for
5. Helping me determine if the test passes or fails

Test Environment Details:
- Application URL: http://localhost:8080
- System: EHG Application
- Current Test Case: ${e.id}

AUTOMATED EXECUTION OPTION:
You can also run this test automatically using:
\`\`\`bash
node scripts/uat-test-executor.js ${e.id}
\`\`\`

Please engage the UAT sub-agent now to begin test guidance.`;navigator.clipboard.writeText(D),v(!0),setTimeout(()=>v(!1),2e3)},C=async()=>{if(!s){alert("Please select a test result (Pass/Fail/Blocked)");return}h(!0);try{const{error:D}=await $x.from("uat_results").upsert({run_id:t,case_id:e.id,status:s,notes:o||null,evidence_url:c||null,recorded_at:new Date().toISOString()},{onConflict:"run_id,case_id"});if(D)throw D;p({result_id:crypto.randomUUID(),case_id:e.id,run_id:t,status:s,title:e.title,section:e.section,priority:e.priority,description:e.description,expected:"Test should pass as described",actual:s==="FAIL"?o:"Test executed successfully",notes:o,screenshot_url:c}),await $x.from("uat_runs").update({active_case_id:null}).eq("id",t),n(s)}catch(D){console.error("Failed to save test result:",D),alert("Failed to save test result. Please try again.")}finally{h(!1)}},E=D=>{const R=D.target.files[0];if(R&&R.type.startsWith("image/")){const P=new FileReader;P.onload=O=>{u(O.target.result)},P.readAsDataURL(R)}};return a.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:[a.jsxs("div",{ref:j,className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",tabIndex:-1,children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 dark:from-purple-700 dark:to-purple-600 text-white p-6 rounded-t-xl",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Execute Test Case"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"font-mono bg-white/20 px-2 py-1 rounded",children:e.id}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${e.priority==="critical"?"bg-red-500":e.priority==="high"?"bg-yellow-500":"bg-white/30"}`,children:e.priority}),a.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-white/30",children:e.test_type==="manual"?"Manual":"Auto"})]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(pr,{className:"h-5 w-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:e.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:e.description||"No detailed description available. Please refer to the test title for guidance."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:[a.jsx(wm,{className:"h-4 w-4"}),m?"Copied!":"Copy Test ID"]}),a.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors",children:[a.jsx(TT,{className:"h-4 w-4"}),g?"Copied!":"Copy UAT Agent Prompt"]}),a.jsxs("a",{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(km,{className:"h-4 w-4"}),"Open Test App"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Test Result *"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>i("PASS"),className:`p-4 rounded-lg border-2 transition-all ${s==="PASS"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-green-400"}`,children:[a.jsx(ke,{className:`h-6 w-6 mx-auto mb-2 ${s==="PASS"?"text-green-600":"text-gray-400"}`}),a.jsx("span",{className:`font-semibold ${s==="PASS"?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400"}`,children:"Pass"})]}),a.jsxs("button",{onClick:()=>i("FAIL"),className:`p-4 rounded-lg border-2 transition-all ${s==="FAIL"?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 hover:border-red-400"}`,children:[a.jsx(dn,{className:`h-6 w-6 mx-auto mb-2 ${s==="FAIL"?"text-red-600":"text-gray-400"}`}),a.jsx("span",{className:`font-semibold ${s==="FAIL"?"text-red-700 dark:text-red-300":"text-gray-600 dark:text-gray-400"}`,children:"Fail"})]}),a.jsxs("button",{onClick:()=>i("BLOCKED"),className:`p-4 rounded-lg border-2 transition-all ${s==="BLOCKED"?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-gray-300 dark:border-gray-600 hover:border-yellow-400"}`,children:[a.jsx(It,{className:`h-6 w-6 mx-auto mb-2 ${s==="BLOCKED"?"text-yellow-600":"text-gray-400"}`}),a.jsx("span",{className:`font-semibold ${s==="BLOCKED"?"text-yellow-700 dark:text-yellow-300":"text-gray-600 dark:text-gray-400"}`,children:"Blocked"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Observations & Notes"}),a.jsx("textarea",{value:o,onChange:D=>l(D.target.value),placeholder:"Describe what happened during the test, any issues found, or additional observations...",className:"w-full h-32 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Screenshot Evidence"}),c?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:c,alt:"Test screenshot",className:"w-full rounded-lg border border-gray-300 dark:border-gray-600"}),a.jsx("button",{onClick:()=>u(null),className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:a.jsx(pr,{className:"h-4 w-4"})})]}):a.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center",children:[a.jsx(pl,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Paste screenshot (Ctrl+V) or upload an image"}),a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(AT,{className:"h-4 w-4"}),a.jsx("span",{children:"Press Ctrl+V to paste"})]}),a.jsx("span",{className:"text-gray-400",children:"or"}),a.jsxs("label",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer",children:["Browse Files",a.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]})]})]})]}),x&&x.status==="FAIL"&&a.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"font-semibold text-indigo-800 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[a.jsx(eo,{className:"h-5 w-5"}),"Convert to Strategic Directive"]}),a.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-400 mb-3",children:"This test failure can be automatically converted into a Strategic Directive using AI to analyze the issue and create comprehensive documentation."}),a.jsxs("ul",{className:"text-xs text-indigo-600 dark:text-indigo-500 space-y-1",children:[a.jsx("li",{children:" AI analyzes business impact and priority"}),a.jsx("li",{children:" Generates complete SD documentation"}),a.jsx("li",{children:" Links to this UAT test for traceability"}),a.jsx("li",{children:" Creates actionable requirements"})]})]}),a.jsxs("button",{onClick:()=>y(!0),className:"ml-4 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg flex items-center gap-2",children:[a.jsx(Ge,{className:"h-4 w-4"}),"Create SD"]})]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:" Testing Tips"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:' Click "Copy UAT Agent Prompt" to get AI assistance for this test'}),a.jsx("li",{children:" Take screenshots of any issues or important results"}),a.jsx("li",{children:" Paste screenshots directly with Ctrl+V (no need to save first)"}),a.jsx("li",{children:" Add detailed notes about what you observed"}),a.jsx("li",{children:` Mark as "Blocked" if you can't complete the test due to dependencies`})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:C,disabled:!s||d,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${s&&!d?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[d&&a.jsx(en,{className:"h-4 w-4 animate-spin"}),d?"Saving...":"Save Test Result"]})]})})]}),b&&x&&a.jsx(t1,{testResult:x,onClose:()=>y(!1),onSuccess:D=>{y(!1),alert(`Strategic Directive created successfully!
Submission ID: ${D.id}
SD ID: ${D.sd_id}`)}})]})}const Km={Main:[{value:"chairman-console",label:"Chairman Console",route:"/chairman"},{value:"eva-assistant",label:"EVA Assistant",route:"/eva"},{value:"ventures",label:"Ventures",route:"/ventures"},{value:"portfolios",label:"Portfolios",route:"/portfolios"}],"AI Orchestration":[{value:"eva-dashboard",label:"EVA Dashboard",route:"/eva-dashboard"},{value:"workflows",label:"Workflows",route:"/workflows"},{value:"ai-agents",label:"AI Agents",route:"/ai-agents"},{value:"eva-knowledge-base",label:"EVA Knowledge Base",route:"/knowledge-base"}],"Analytics & Reports":[{value:"analytics",label:"Analytics",route:"/analytics"},{value:"reports",label:"Reports",route:"/reports"},{value:"insights",label:"Insights",route:"/insights"},{value:"risk-forecasting",label:"Risk Forecasting",route:"/risk-forecasting"},{value:"advanced-analytics",label:"Advanced Analytics",route:"/advanced-analytics"},{value:"mobile-companion",label:"Mobile Companion",route:"/mobile"}],Administration:[{value:"governance",label:"Governance",route:"/governance"},{value:"integration-hub",label:"Integration Hub",route:"/integrations"},{value:"enhanced-security",label:"Enhanced Security",route:"/security"},{value:"settings",label:"Settings",route:"/settings"}],"System & Authentication":[{value:"authentication",label:"Authentication & Login",route:"/login"},{value:"landing",label:"Landing Page",route:"/"}],"Cross-Cutting":[{value:"navigation",label:"Navigation & Routing"},{value:"ui-components",label:"UI Components"},{value:"forms",label:"Forms & Validation"},{value:"notifications",label:"Notifications"},{value:"dark-mode",label:"Dark Mode / Theming"},{value:"responsive",label:"Responsive Design"},{value:"accessibility",label:"Accessibility"},{value:"performance-general",label:"Performance & Loading"}],Other:[{value:"edge-cases",label:"Edge Cases"},{value:"regression",label:"Regression Tests"},{value:"exploratory",label:"Exploratory Testing"},{value:"other",label:"Other/Miscellaneous"}]},RR=bo("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function DR({onClose:e,onSave:t}){const[r,n]=w.useState({title:"",section:"",priority:"medium",test_type:"manual",description:""}),[s,i]=w.useState({}),[o,l]=w.useState(!1),[c,u]=w.useState(!1),d=g=>{const{name:v,value:b}=g.target;n(y=>({...y,[v]:b})),s[v]&&i(y=>({...y,[v]:""}))},h=()=>{const g={};return r.title.trim()||(g.title="Title is required"),r.section||(g.section="Section is required"),r.description.trim()||(g.description="Description is required"),i(g),Object.keys(g).length===0},m=()=>{const g=r.section.toUpperCase().replace(/_/g,"-"),v=Date.now().toString(36).toUpperCase();return`MANUAL-${g}-${v}`},f=async g=>{if(g.preventDefault(),!!h()){l(!0),u(!1);try{const v=m(),{error:b}=await RR.from("uat_cases").insert({id:v,section:r.section,title:r.title,priority:r.priority,test_type:r.test_type,description:r.description});if(b)throw b;u(!0),t&&t({id:v,...r}),setTimeout(()=>{n({title:"",section:"",priority:"medium",test_type:"manual",description:""}),u(!1)},2e3)}catch(v){console.error("Failed to create test case:",v),i({submit:v.message||"Failed to create test case. Please try again."})}finally{l(!1)}}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-500 dark:from-green-700 dark:to-green-600 text-white p-6 rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Create New Test Case"}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(pr,{className:"h-5 w-5"})})]})}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[c&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(ke,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"text-green-800 dark:text-green-300",children:"Test case created successfully!"})]}),s.submit&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(tr,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),a.jsx("span",{className:"text-red-800 dark:text-red-300",children:s.submit})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Case Title *"}),a.jsx("input",{type:"text",name:"title",value:r.title,onChange:d,placeholder:"Enter a descriptive title for the test case",className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 ${s.title?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-green-500"}`}),s.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Section *"}),a.jsxs("select",{name:"section",value:r.section,onChange:d,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 ${s.section?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-green-500"}`,children:[a.jsx("option",{value:"",children:"Select a section..."}),Object.entries(Km).map(([g,v])=>a.jsx("optgroup",{label:g,children:v.map(b=>a.jsx("option",{value:b.value,children:b.label},b.value))},g))]}),s.section&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.section})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a.jsxs("select",{name:"priority",value:r.priority,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Type"}),a.jsxs("select",{name:"test_type",value:r.test_type,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"manual",children:"Manual"}),a.jsx("option",{value:"automatic",children:"Automatic"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Description *"}),a.jsx("textarea",{name:"description",value:r.description,onChange:d,placeholder:"Describe the steps to execute this test, expected results, and any important notes...",rows:6,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 resize-none ${s.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-green-500"}`}),s.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.description}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Include step-by-step instructions, expected outcomes, and any prerequisites"})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:" Tips for Good Test Cases"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:" Use clear, action-oriented titles"}),a.jsx("li",{children:" Include specific steps in the description"}),a.jsx("li",{children:" Define clear pass/fail criteria"}),a.jsx("li",{children:" Mark as Critical if failure blocks key functionality"}),a.jsx("li",{children:" Choose Manual for user interaction tests"})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:f,disabled:o||c,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${o||c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[o&&a.jsx(en,{className:"h-4 w-4 animate-spin"}),c?a.jsxs(a.Fragment,{children:[a.jsx(ke,{className:"h-4 w-4"}),"Created!"]}):a.jsxs(a.Fragment,{children:[a.jsx(gs,{className:"h-4 w-4"}),"Create Test Case"]})]})]})})]})})}const Qu=bo("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function LR({testCase:e,onClose:t,onSave:r,onDelete:n}){const[s,i]=w.useState({title:e.title||"",section:e.section||"",priority:e.priority||"medium",test_type:e.test_type||"manual",description:e.description||""}),[o,l]=w.useState({}),[c,u]=w.useState(!1),[d,h]=w.useState(!1),[m,f]=w.useState(!1),[g,v]=w.useState(!1),b=j=>{const{name:T,value:N}=j.target;i(C=>({...C,[T]:N})),o[T]&&l(C=>({...C,[T]:""}))},y=()=>{const j={};return s.title.trim()||(j.title="Title is required"),s.section||(j.section="Section is required"),s.description.trim()||(j.description="Description is required"),l(j),Object.keys(j).length===0},x=async j=>{if(j.preventDefault(),!!y()){u(!0),f(!1);try{const{error:T}=await Qu.from("uat_cases").update({title:s.title,section:s.section,priority:s.priority,test_type:s.test_type,description:s.description}).eq("id",e.id);if(T)throw T;f(!0),r&&r({...e,...s}),setTimeout(()=>{t()},1500)}catch(T){console.error("Failed to update test case:",T),l({submit:T.message||"Failed to update test case. Please try again."})}finally{u(!1)}}},p=async()=>{if(!g){v(!0);return}h(!0);try{await Qu.from("uat_results").delete().eq("case_id",e.id);const{error:j}=await Qu.from("uat_cases").delete().eq("id",e.id);if(j)throw j;n&&n(e.id),t()}catch(j){console.error("Failed to delete test case:",j),l({submit:j.message||"Failed to delete test case. Please try again."}),v(!1)}finally{h(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 dark:from-blue-700 dark:to-blue-600 text-white p-6 rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Edit Test Case"}),a.jsxs("p",{className:"text-blue-100 mt-1",children:["ID: ",e.id]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(pr,{className:"h-5 w-5"})})]})}),a.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[m&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(ke,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"text-green-800 dark:text-green-300",children:"Test case updated successfully!"})]}),o.submit&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(tr,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),a.jsx("span",{className:"text-red-800 dark:text-red-300",children:o.submit})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Case Title *"}),a.jsx("input",{type:"text",name:"title",value:s.title,onChange:b,placeholder:"Enter a descriptive title for the test case",className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 ${o.title?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`}),o.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Section *"}),a.jsxs("select",{name:"section",value:s.section,onChange:b,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 ${o.section?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`,children:[a.jsx("option",{value:"",children:"Select a section..."}),Object.entries(Km).map(([j,T])=>a.jsx("optgroup",{label:j,children:T.map(N=>a.jsx("option",{value:N.value,children:N.label},N.value))},j))]}),o.section&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.section})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a.jsxs("select",{name:"priority",value:s.priority,onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Type"}),a.jsxs("select",{name:"test_type",value:s.test_type,onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"manual",children:"Manual"}),a.jsx("option",{value:"automatic",children:"Automatic"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Description *"}),a.jsx("textarea",{name:"description",value:s.description,onChange:b,placeholder:"Describe the steps to execute this test, expected results, and any important notes...",rows:6,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 resize-none ${o.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`}),o.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.description}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Include step-by-step instructions, expected outcomes, and any prerequisites"})]}),g&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800 dark:text-red-300 font-semibold mb-2",children:" Are you sure you want to delete this test case?"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:"This will permanently remove the test case and all associated test results."})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("button",{type:"button",onClick:p,disabled:d,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${g?"bg-red-600 text-white hover:bg-red-700":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50"} ${d?"opacity-50 cursor-not-allowed":""}`,children:[d&&a.jsx(en,{className:"h-4 w-4 animate-spin"}),a.jsx(to,{className:"h-4 w-4"}),g?"Confirm Delete":"Delete"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:x,disabled:c||m,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${c||m?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[c&&a.jsx(en,{className:"h-4 w-4 animate-spin"}),m?a.jsxs(a.Fragment,{children:[a.jsx(ke,{className:"h-4 w-4"}),"Saved!"]}):a.jsxs(a.Fragment,{children:[a.jsx(gs,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})})]})})}const Xr=bo("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function OR(){const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(null),[o,l]=w.useState([]),[c,u]=w.useState(null),[d,h]=w.useState(null),[m,f]=w.useState(!0),[g,v]=w.useState(!1),[b,y]=w.useState("critical"),[x,p]=w.useState("not_tested"),[j,T]=w.useState("all"),[N,C]=w.useState("manual"),[E,D]=w.useState(""),[R,P]=w.useState(!1),[O,K]=w.useState(null),[I,M]=w.useState(null),[W,U]=w.useState(!1);w.useEffect(()=>{A(),te();const L=setInterval(()=>{B()},300*1e3);return()=>clearInterval(L)},[]),w.useEffect(()=>{if(r){S(r);const L=yr(r);return()=>L.unsubscribe()}},[r]);const A=async()=>{const{data:L,error:Y}=await Xr.from("uat_runs").select("*").order("started_at",{ascending:!1});!Y&&L&&(t(L),L.length>0&&!r&&n(L[0].id)),f(!1),v(!1)},B=async()=>{v(!0),await A(),r&&await S(r)},S=async L=>{const{data:Y}=await Xr.from("v_uat_run_stats").select("*").eq("run_id",L).single();i(Y),u((Y==null?void 0:Y.active_case_id)||null),await le(L)},te=async()=>{const{data:L}=await Xr.from("uat_cases").select("*").order("sort_order",{ascending:!0}).order("section").order("priority",{ascending:!1});l(L||[])},le=async L=>{if(!L)return;const{data:Y}=await Xr.from("uat_results").select("case_id, status").eq("run_id",L),ae=new Map((Y==null?void 0:Y.map(He=>[He.case_id,He.status]))||[]);l(He=>He.map(xt=>({...xt,status:ae.get(xt.id)||null})))},_=async L=>{let Y=r;if(!Y){const{data:ae,error:He}=await Xr.from("uat_runs").insert({app:"EHG",env_url:"http://localhost:5173",app_version:"1.0.0",browser:"Chrome",role:"Admin",notes:"UAT testing session",started_at:new Date().toISOString(),created_by:"UAT Dashboard"}).select().single();if(He){console.error("Failed to create run:",He);return}Y=ae.id,n(Y),t(xt=>[ae,...xt])}try{await Xr.from("uat_runs").update({active_case_id:L.id}).eq("id",Y),u(L.id)}catch(ae){console.warn("Could not set active test in database:",ae),u(L.id)}h({...L,runId:Y})},Ne=L=>{l(Y=>Y.map(ae=>ae.id===d.id?{...ae,status:L}:ae)),h(null),r&&S(r)},at=()=>{h(null)},be=L=>{te(),P(!1)},pt=L=>{te(),K(null)},_t=L=>{l(Y=>Y.filter(ae=>ae.id!==L)),K(null)},yr=L=>Xr.channel(`uat-${L}`).on("postgres_changes",{event:"*",schema:"public",table:"uat_results",filter:`run_id=eq.${L}`},()=>{S(L)}).subscribe(),ot=o.filter(L=>{if(b!=="all"&&L.priority!==b||x!=="all"&&(x==="not_tested"&&L.status||x!=="not_tested"&&L.status!==x))return!1;if(j!=="all"){const Y=(L.section||"").toLowerCase(),ae=j.toLowerCase();if(Y!==ae)return!1}if(N!=="all"&&L.test_type!==N)return!1;if(E){const Y=E.toLowerCase();if(!L.id.toLowerCase().includes(Y)&&!L.title.toLowerCase().includes(Y)&&!(L.section||"").toLowerCase().includes(Y))return!1}return!0}),Ze={all:o.length,PASS:o.filter(L=>L.status==="PASS").length,FAIL:o.filter(L=>L.status==="FAIL").length,BLOCKED:o.filter(L=>L.status==="BLOCKED").length,NA:o.filter(L=>L.status==="NA").length,not_tested:o.filter(L=>!L.status).length},X={all:o.length,critical:o.filter(L=>L.priority==="critical").length,high:o.filter(L=>L.priority==="high").length,medium:o.filter(L=>L.priority==="medium").length,low:o.filter(L=>L.priority==="low").length},Ke=L=>o.filter(Y=>{if(b!=="all"&&Y.priority!==b||x!=="all"&&(x==="not_tested"&&Y.status||x!=="not_tested"&&Y.status!==x)||N!=="all"&&Y.test_type!==N)return!1;if(E){const xt=E.toLowerCase();if(!Y.id.toLowerCase().includes(xt)&&!Y.title.toLowerCase().includes(xt)&&!(Y.section||"").toLowerCase().includes(xt))return!1}if(L==="all")return!0;const ae=(Y.section||"").toLowerCase(),He=L.toLowerCase();return ae===He}).length,Er=L=>o.filter(Y=>{if(b!=="all"&&Y.priority!==b||x!=="all"&&(x==="not_tested"&&Y.status||x!=="not_tested"&&Y.status!==x))return!1;if(j!=="all"){const ae=(Y.section||"").toLowerCase(),He=j.toLowerCase();if(ae!==He)return!1}if(E){const ae=E.toLowerCase();if(!Y.id.toLowerCase().includes(ae)&&!Y.title.toLowerCase().includes(ae)&&!(Y.section||"").toLowerCase().includes(ae))return!1}return L==="all"?!0:L==="automatic"?Y.test_type==="automatic"||!Y.test_type:L==="manual"?Y.test_type==="manual":!1}).length,gt=()=>{y("all"),p("all"),T("all"),C("all"),D("")},Lt=b!=="all"||x!=="all"||j!=="all"||N!=="all"||E;return m?a.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 dark:border-blue-400 mx-auto mb-4"}),a.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading UAT Dashboard..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-3 sm:p-4 md:p-6",children:[a.jsx("div",{className:"mb-6 md:mb-8",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 rounded-lg shadow-lg",children:a.jsx(ki,{className:"h-8 w-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"UAT Testing Dashboard"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Monitor and manage your user acceptance tests"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all shadow-sm hover:shadow font-semibold",children:[a.jsx(Nm,{className:"h-4 w-4"}),"Create Test"]}),a.jsxs("button",{onClick:B,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-md transition-shadow disabled:opacity-50",children:[a.jsx(Cr,{className:`h-4 w-4 ${g?"animate-spin":""}`}),"Refresh"]})]})]})}),s&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-blue-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Total Tests"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-800 dark:text-gray-100",children:s.executed})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600 dark:text-blue-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-green-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Passed"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-green-600",children:s.passed})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-green-100 dark:bg-green-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(ke,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-red-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Failed"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-red-600",children:s.failed})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-red-100 dark:bg-red-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(dn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600 dark:text-red-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-yellow-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Blocked"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-yellow-600",children:s.blocked})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-yellow-600 dark:text-yellow-400"})})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden mb-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 dark:from-purple-700 dark:to-purple-600 text-white p-4",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(Ge,{className:"h-5 w-5"}),"Test Cases",a.jsxs("span",{className:"ml-2 bg-white/20 px-2 py-1 rounded-full text-sm",children:[Ze.PASS,"/",o.length," passed"]}),c&&a.jsxs("span",{className:"ml-auto bg-yellow-400/30 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[a.jsx(zn,{className:"h-4 w-4"}),"Active: ",c]})]})}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600",children:[a.jsxs("button",{onClick:()=>U(!W),className:"w-full p-4 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yl,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),a.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:["Filters",Lt&&a.jsx("span",{className:"ml-2 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded-full",children:"Active"})]})]}),a.jsx(ur,{className:`h-5 w-5 text-gray-600 dark:text-gray-400 transition-transform ${W?"rotate-180":""}`})]}),W&&a.jsxs("div",{className:"p-4 pt-0",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Priority"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>y("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="all"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["All (",X.all,")"]}),a.jsxs("button",{onClick:()=>y("critical"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="critical"?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:["Critical (",X.critical,")"]}),a.jsxs("button",{onClick:()=>y("high"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="high"?"bg-yellow-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"}`,children:["High (",X.high,")"]}),a.jsxs("button",{onClick:()=>y("medium"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="medium"?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:["Medium (",X.medium,")"]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Status"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>p("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="all"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["All (",Ze.all,")"]}),a.jsxs("button",{onClick:()=>p("PASS"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="PASS"?"bg-green-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-green-50 dark:hover:bg-green-900/20"}`,children:["Pass (",Ze.PASS,")"]}),a.jsxs("button",{onClick:()=>p("FAIL"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="FAIL"?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:["Fail (",Ze.FAIL,")"]}),a.jsxs("button",{onClick:()=>p("not_tested"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="not_tested"?"bg-gray-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["Not Tested (",Ze.not_tested,")"]}),Ze.BLOCKED>0&&a.jsxs("button",{onClick:()=>p("BLOCKED"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="BLOCKED"?"bg-yellow-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"}`,children:["Blocked (",Ze.BLOCKED,")"]})]})]}),a.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Section"}),a.jsxs("select",{value:j,onChange:L=>T(L.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[a.jsxs("option",{value:"all",children:["All Sections (",Ke("all"),")"]}),Object.entries(Km).map(([L,Y])=>a.jsx("optgroup",{label:L,children:Y.map(ae=>{const He=Ke(ae.value);return a.jsxs("option",{value:ae.value,children:[ae.label," (",He,")"]},ae.value)})},L))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Test Type"}),a.jsxs("select",{value:N,onChange:L=>C(L.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[a.jsxs("option",{value:"all",children:["All Types (",Er("all"),")"]}),a.jsxs("option",{value:"automatic",children:["Automatic (",Er("automatic"),")"]}),a.jsxs("option",{value:"manual",children:["Manual (",Er("manual"),")"]})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Search test ID, title, or section...",value:E,onChange:L=>D(L.target.value),className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"}),Lt&&a.jsx("button",{onClick:gt,className:"px-4 py-1.5 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Clear Filters"})]}),Lt&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Showing ",ot.length," of ",o.length," tests"]})]})]}),a.jsx("div",{className:"p-4",children:o.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Ge,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"Loading test cases..."})]}):ot.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Ge,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No tests match your filters"}),a.jsx("button",{onClick:gt,className:"mt-2 text-purple-600 dark:text-purple-400 hover:underline",children:"Clear filters"})]}):a.jsx("div",{className:"space-y-2",children:ot.map(L=>a.jsx("div",{className:`border rounded-lg p-3 transition-all ${c===L.id?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 shadow-md":"border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-600"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`font-semibold ${c===L.id?"text-purple-700 dark:text-purple-300":"text-gray-800 dark:text-gray-200"}`,children:L.id}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${L.priority==="critical"?"bg-red-100 text-red-700":L.priority==="high"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:L.priority}),L.status&&a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${L.status==="PASS"?"bg-green-100 text-green-700":L.status==="FAIL"?"bg-red-100 text-red-700":L.status==="BLOCKED"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:L.status}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${L.test_type==="manual"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:L.test_type==="manual"?"Manual":"Auto"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:L.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Section: ",L.section]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[c===L.id?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-purple-600 dark:text-purple-400 font-semibold",children:"ACTIVE"}),a.jsx("button",{onClick:()=>_(L),className:"px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Continue Test"})]}):L.status?a.jsx("button",{onClick:()=>_(L),className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm",children:"Retest"}):a.jsx("button",{onClick:()=>_(L),className:"px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Start Test"}),L.status==="FAIL"&&a.jsxs("button",{onClick:()=>M(L),className:"px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-colors text-sm flex items-center gap-1",title:"Create Strategic Directive from this failed test using AI",children:[a.jsx(zn,{className:"h-3 w-3"}),"Create SD"]}),a.jsx("button",{onClick:()=>K(L),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",title:"Edit test case",children:a.jsx(Zl,{className:"h-4 w-4"})}),a.jsx("button",{onClick:async()=>{if(window.confirm(`Are you sure you want to delete test case ${L.id}?

This will also clear any active references and delete associated results.`)){const{data:Y,error:ae}=await Xr.rpc("delete_uat_case",{case_id_to_delete:L.id});ae?alert("Failed to delete test case: "+ae.message):Y&&!Y.success?alert("Failed to delete test case: "+Y.error):_t(L.id)}},className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",title:"Delete test case",children:a.jsx(to,{className:"h-4 w-4"})})]})]})},L.id))})})]})]}),!r&&o.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-center",children:'No active test run. Click "Start Test" on any test case to begin a new session.'})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 dark:from-purple-700 dark:to-purple-600 text-white p-4",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(Ge,{className:"h-5 w-5"}),"Available Test Cases",a.jsxs("span",{className:"ml-auto bg-white/20 px-2 py-1 rounded-full text-sm",children:[o.length," tests ready"]})]})}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600 p-4",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Priority"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>y("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="all"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["All (",X.all,")"]}),a.jsxs("button",{onClick:()=>y("critical"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="critical"?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:["Critical (",X.critical,")"]}),a.jsxs("button",{onClick:()=>y("high"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="high"?"bg-yellow-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"}`,children:["High (",X.high,")"]}),a.jsxs("button",{onClick:()=>y("medium"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="medium"?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:["Medium (",X.medium,")"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Search test ID, title, or section...",value:E,onChange:L=>D(L.target.value),className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"}),Lt&&a.jsx("button",{onClick:gt,className:"px-4 py-1.5 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Clear Filters"})]}),Lt&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Showing ",ot.length," of ",o.length," tests"]})]}),a.jsx("div",{className:"p-4",children:ot.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Ge,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No tests match your filters"}),a.jsx("button",{onClick:gt,className:"mt-2 text-purple-600 dark:text-purple-400 hover:underline",children:"Clear filters"})]}):a.jsx("div",{className:"space-y-2",children:ot.map(L=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-3 hover:border-purple-300 dark:hover:border-purple-600 transition-all",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:L.id}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${L.priority==="critical"?"bg-red-100 text-red-700":L.priority==="high"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:L.priority})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:L.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Section: ",L.section]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>setActiveTest(L.id),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:"Start Test"}),L.status==="FAIL"&&a.jsxs("button",{onClick:()=>M(L),className:"px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-colors text-sm flex items-center gap-1",title:"Create Strategic Directive from this failed test using AI",children:[a.jsx(zn,{className:"h-3 w-3"}),"Create SD"]}),a.jsx("button",{onClick:()=>K(L),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",title:"Edit test case",children:a.jsx(Zl,{className:"h-4 w-4"})}),a.jsx("button",{onClick:async()=>{if(window.confirm(`Are you sure you want to delete test case ${L.id}?

This will also clear any active references and delete associated results.`)){const{data:Y,error:ae}=await Xr.rpc("delete_uat_case",{case_id_to_delete:L.id});ae?alert("Failed to delete test case: "+ae.message):Y&&!Y.success?alert("Failed to delete test case: "+Y.error):_t(L.id)}},className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",title:"Delete test case",children:a.jsx(to,{className:"h-4 w-4"})})]})]})},L.id))})})]})]}),!r&&o.length===0&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-12 text-center",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading test cases..."})}),d&&a.jsx(IR,{testCase:d,runId:d.runId,onClose:at,onComplete:Ne}),R&&a.jsx(DR,{onClose:()=>P(!1),onSave:be}),O&&a.jsx(LR,{testCase:O,onClose:()=>K(null),onSave:pt,onDelete:_t}),I&&a.jsx(t1,{testResult:I,onClose:()=>M(null),onSuccess:L=>{M(null),alert(`Strategic Directive created successfully!
Submission ID: ${L.id}
SD ID: ${L.sd_id}`)}})]})}const Yo=window.location.hostname==="localhost",ta={log:(...e)=>{Yo&&console.log(...e)},error:(...e)=>{console.error(...e)},warn:(...e)=>{Yo&&console.warn(...e)},info:(...e)=>{Yo&&console.info(...e)},debug:(...e)=>{Yo&&console.debug(...e)}};function MR(){var j,T,N;const[e,t]=w.useState({leoProtocol:{version:"detecting...",activeRole:null,currentSD:null,currentPRD:null,phase:null},context:{usage:0,total:18e4,breakdown:{}},handoffs:[],strategicDirectives:[],prds:[],checklists:{},progress:{overall:0,byPhase:{}}}),[r,n]=w.useState(!1),[s,i]=w.useState(!1),{preferences:o}=U2(),[l,c]=uu("checklists",{}),[u,d]=uu("sidebarCollapsed",!1),[h,m]=uu("compactMode",!1),f=z2("ws://localhost:3000",{onOpen:()=>{n(!0),ta.log("Connected to dashboard server")},onMessage:C=>{try{const E=JSON.parse(C.data);E.type==="state"&&t(E.data)}catch(E){ta.error("Error parsing WebSocket message:",E)}},onClose:()=>{n(!1),ta.log("Disconnected from dashboard server")},onError:C=>{ta.error("WebSocket error:",C)}});w.useEffect(()=>{fetch("/api/state").then(C=>C.json()).then(C=>{const E={...C,checklists:{...C.checklists,...l}};t(E)}).catch(C=>ta.error("Error loading state:",C))},[]),w.useEffect(()=>{Object.keys(e.checklists).length>0&&c(e.checklists)},[e.checklists]),w.useEffect(()=>{o.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[o.theme]);const g=()=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"refresh"}))},v=(C,E,D)=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"updateChecklist",data:{documentId:C,itemIndex:E,checked:D}}))},b=(C,E)=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"requestHandoff",data:{type:C,checklist:E}}))},y=()=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"compactContext"}))},x=C=>{t(E=>({...E,leoProtocol:{...E.leoProtocol,currentSD:C}})),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"setActiveSD",data:{sdId:C}}))},p=(C,E)=>{t(D=>({...D,strategicDirectives:D.strategicDirectives.map(R=>R.id===C?{...R,status:E}:R)})),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"updateSDStatus",data:{sdId:C,status:E}}))};return a.jsx(R2,{children:a.jsx(N2,{children:a.jsxs(ut,{path:"/",element:a.jsx(sE,{state:e,isConnected:r,isSidebarCollapsed:u,setIsSidebarCollapsed:d,isCompactMode:h,setIsCompactMode:m,isMobileMenuOpen:s,setIsMobileMenuOpen:i,updateChecklist:v,requestHandoff:b,compactContext:y,refreshData:g,setActiveSD:x}),children:[a.jsx(ut,{index:!0,element:a.jsx($u,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:x,onUpdateStatus:p,currentSD:(j=e.leoProtocol)==null?void 0:j.currentSD,isCompact:h,onRefresh:g})}),a.jsxs(ut,{path:"strategic-directives",children:[a.jsx(ut,{index:!0,element:a.jsx($u,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:x,onUpdateStatus:p,currentSD:(T=e.leoProtocol)==null?void 0:T.currentSD,isCompact:h,onRefresh:g})}),a.jsx(ut,{path:":id",element:a.jsx($u,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:x,onUpdateStatus:p,currentSD:(N=e.leoProtocol)==null?void 0:N.currentSD,isCompact:h,detailMode:!0,onRefresh:g})})]}),a.jsxs(ut,{path:"prds",children:[a.jsx(ut,{index:!0,element:a.jsx(yx,{prds:e.prds,isCompact:h})}),a.jsx(ut,{path:":id",element:a.jsx(yx,{prds:e.prds,isCompact:h,detailMode:!0})})]}),a.jsxs(ut,{path:"backlog",children:[a.jsx(ut,{index:!0,element:a.jsx(vx,{strategicDirectives:e.strategicDirectives,isCompact:h,onRefresh:g})}),a.jsx(ut,{path:":id",element:a.jsx(vx,{strategicDirectives:e.strategicDirectives,isCompact:h,detailMode:!0,onRefresh:g})})]}),a.jsx(ut,{path:"directive-lab",element:a.jsx(YA,{state:e,onRefresh:g,isCompact:h})}),a.jsx(ut,{path:"pr-reviews",element:a.jsx(nI,{state:e,isConnected:r,refreshData:g})}),a.jsx(ut,{path:"uat-tests",element:a.jsx(OR,{})}),a.jsx(ut,{path:"backlog-import",element:a.jsx(AR,{})}),a.jsx(ut,{path:"*",element:a.jsx(k2,{to:"/",replace:!0})})]})})})}class $R extends zr.Component{constructor(r){super(r);Oc(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});Oc(this,"handleHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){window.location.hostname==="localhost"&&console.error("ErrorBoundary caught:",r,n),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(It,{className:"w-8 h-8 text-red-500 mr-3"}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Something went wrong"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We encountered an unexpected error. The application may not work correctly."}),window.location.hostname==="localhost"&&a.jsxs("details",{className:"mb-4",children:[a.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Error details (development only)"}),a.jsxs("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto",children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),a.jsxs("button",{onClick:this.handleHome,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(Sm,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}Yu.createRoot(document.getElementById("root")).render(a.jsx(zr.StrictMode,{children:a.jsx($R,{children:a.jsx(MR,{})})}));
//# sourceMappingURL=index-BNrd1_Tm.js.map
