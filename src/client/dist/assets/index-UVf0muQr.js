var v1=Object.defineProperty;var b1=(e,t,n)=>t in e?v1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Uc=(e,t,n)=>b1(e,typeof t!="symbol"?t+"":t,n);function w1(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function k1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Yx={exports:{}},lc={},Qx={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lo=Symbol.for("react.element"),j1=Symbol.for("react.portal"),S1=Symbol.for("react.fragment"),N1=Symbol.for("react.strict_mode"),_1=Symbol.for("react.profiler"),E1=Symbol.for("react.provider"),C1=Symbol.for("react.context"),P1=Symbol.for("react.forward_ref"),T1=Symbol.for("react.suspense"),A1=Symbol.for("react.memo"),R1=Symbol.for("react.lazy"),ip=Symbol.iterator;function I1(e){return e===null||typeof e!="object"?null:(e=ip&&e[ip]||e["@@iterator"],typeof e=="function"?e:null)}var Zx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ey=Object.assign,ty={};function Di(e,t,n){this.props=e,this.context=t,this.refs=ty,this.updater=n||Zx}Di.prototype.isReactComponent={};Di.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Di.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ny(){}ny.prototype=Di.prototype;function Gh(e,t,n){this.props=e,this.context=t,this.refs=ty,this.updater=n||Zx}var Kh=Gh.prototype=new ny;Kh.constructor=Gh;ey(Kh,Di.prototype);Kh.isPureReactComponent=!0;var ap=Array.isArray,ry=Object.prototype.hasOwnProperty,Xh={current:null},sy={key:!0,ref:!0,__self:!0,__source:!0};function iy(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)ry.call(t,r)&&!sy.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:lo,type:e,key:i,ref:a,props:s,_owner:Xh.current}}function D1(e,t){return{$$typeof:lo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Jh(e){return typeof e=="object"&&e!==null&&e.$$typeof===lo}function L1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var op=/\/+/g;function zc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?L1(""+e.key):t.toString(36)}function rl(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case lo:case j1:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+zc(a,0):r,ap(s)?(n="",e!=null&&(n=e.replace(op,"$&/")+"/"),rl(s,t,n,"",function(u){return u})):s!=null&&(Jh(s)&&(s=D1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(op,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",ap(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+zc(i,l);a+=rl(i,t,n,c,s)}else if(c=I1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+zc(i,l++),a+=rl(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Eo(e,t,n){if(e==null)return e;var r=[],s=0;return rl(e,r,"","",function(i){return t.call(n,i,s++)}),r}function O1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $t={current:null},sl={transition:null},$1={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:sl,ReactCurrentOwner:Xh};function ay(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Eo,forEach:function(e,t,n){Eo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Eo(e,function(){t++}),t},toArray:function(e){return Eo(e,function(t){return t})||[]},only:function(e){if(!Jh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=Di;Se.Fragment=S1;Se.Profiler=_1;Se.PureComponent=Gh;Se.StrictMode=N1;Se.Suspense=T1;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$1;Se.act=ay;Se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ey({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Xh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ry.call(t,c)&&!sy.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:lo,type:e.type,key:s,ref:i,props:r,_owner:a}};Se.createContext=function(e){return e={$$typeof:C1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:E1,_context:e},e.Consumer=e};Se.createElement=iy;Se.createFactory=function(e){var t=iy.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:P1,render:e}};Se.isValidElement=Jh;Se.lazy=function(e){return{$$typeof:R1,_payload:{_status:-1,_result:e},_init:O1}};Se.memo=function(e,t){return{$$typeof:A1,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=sl.transition;sl.transition={};try{e()}finally{sl.transition=t}};Se.unstable_act=ay;Se.useCallback=function(e,t){return $t.current.useCallback(e,t)};Se.useContext=function(e){return $t.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return $t.current.useDeferredValue(e)};Se.useEffect=function(e,t){return $t.current.useEffect(e,t)};Se.useId=function(){return $t.current.useId()};Se.useImperativeHandle=function(e,t,n){return $t.current.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return $t.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return $t.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return $t.current.useMemo(e,t)};Se.useReducer=function(e,t,n){return $t.current.useReducer(e,t,n)};Se.useRef=function(e){return $t.current.useRef(e)};Se.useState=function(e){return $t.current.useState(e)};Se.useSyncExternalStore=function(e,t,n){return $t.current.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return $t.current.useTransition()};Se.version="18.3.1";Qx.exports=Se;var j=Qx.exports;const co=qh(j),M1=w1({__proto__:null,default:co},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1=j,V1=Symbol.for("react.element"),U1=Symbol.for("react.fragment"),z1=Object.prototype.hasOwnProperty,B1=F1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H1={key:!0,ref:!0,__self:!0,__source:!0};function oy(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)z1.call(t,r)&&!H1.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:V1,type:e,key:i,ref:a,props:s,_owner:B1.current}}lc.Fragment=U1;lc.jsx=oy;lc.jsxs=oy;Yx.exports=lc;var o=Yx.exports,td={},ly={exports:{}},cn={},cy={exports:{}},uy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,A){var b=C.length;C.push(A);e:for(;0<b;){var z=b-1>>>1,Y=C[z];if(0<s(Y,A))C[z]=A,C[b]=Y,b=z;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var A=C[0],b=C.pop();if(b!==A){C[0]=b;e:for(var z=0,Y=C.length,_=Y>>>1;z<_;){var le=2*(z+1)-1,xe=C[le],fe=le+1,Ce=C[fe];if(0>s(xe,b))fe<Y&&0>s(Ce,xe)?(C[z]=Ce,C[fe]=b,z=fe):(C[z]=xe,C[le]=b,z=le);else if(fe<Y&&0>s(Ce,b))C[z]=Ce,C[fe]=b,z=fe;else break e}}return A}function s(C,A){var b=C.sortIndex-A.sortIndex;return b!==0?b:C.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,g=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(C){for(var A=n(u);A!==null;){if(A.callback===null)r(u);else if(A.startTime<=C)r(u),A.sortIndex=A.expirationTime,t(c,A);else break;A=n(u)}}function S(C){if(v=!1,p(C),!g)if(n(c)!==null)g=!0,q(E);else{var A=n(u);A!==null&&F(S,A.startTime-C)}}function E(C,A){g=!1,v&&(v=!1,x(T),T=-1),f=!0;var b=m;try{for(p(A),h=n(c);h!==null&&(!(h.expirationTime>A)||C&&!M());){var z=h.callback;if(typeof z=="function"){h.callback=null,m=h.priorityLevel;var Y=z(h.expirationTime<=A);A=e.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(c)&&r(c),p(A)}else r(c);h=n(c)}if(h!==null)var _=!0;else{var le=n(u);le!==null&&F(S,le.startTime-A),_=!1}return _}finally{h=null,m=b,f=!1}}var N=!1,P=null,T=-1,O=5,D=-1;function M(){return!(e.unstable_now()-D<O)}function K(){if(P!==null){var C=e.unstable_now();D=C;var A=!0;try{A=P(!0,C)}finally{A?he():(N=!1,P=null)}}else N=!1}var he;if(typeof y=="function")he=function(){y(K)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,L=$.port2;$.port1.onmessage=K,he=function(){L.postMessage(null)}}else he=function(){k(K,0)};function q(C){P=C,N||(N=!0,he())}function F(C,A){T=k(function(){C(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,q(E))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(C){switch(m){case 1:case 2:case 3:var A=3;break;default:A=m}var b=m;m=A;try{return C()}finally{m=b}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,A){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var b=m;m=C;try{return A()}finally{m=b}},e.unstable_scheduleCallback=function(C,A,b){var z=e.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?z+b:z):b=z,C){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=b+Y,C={id:d++,callback:A,priorityLevel:C,startTime:b,expirationTime:Y,sortIndex:-1},b>z?(C.sortIndex=b,t(u,C),n(c)===null&&C===n(u)&&(v?(x(T),T=-1):v=!0,F(S,b-z))):(C.sortIndex=Y,t(c,C),g||f||(g=!0,q(E))),C},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(C){var A=m;return function(){var b=m;m=A;try{return C.apply(this,arguments)}finally{m=b}}}})(uy);cy.exports=uy;var W1=cy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1=j,ln=W1;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dy=new Set,Aa={};function $s(e,t){ji(e,t),ji(e+"Capture",t)}function ji(e,t){for(Aa[e]=t,e=0;e<t.length;e++)dy.add(t[e])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nd=Object.prototype.hasOwnProperty,G1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lp={},cp={};function K1(e){return nd.call(cp,e)?!0:nd.call(lp,e)?!1:G1.test(e)?cp[e]=!0:(lp[e]=!0,!1)}function X1(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function J1(e,t,n,r){if(t===null||typeof t>"u"||X1(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mt(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){St[e]=new Mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];St[t]=new Mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){St[e]=new Mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){St[e]=new Mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){St[e]=new Mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){St[e]=new Mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){St[e]=new Mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){St[e]=new Mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){St[e]=new Mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yh=/[\-:]([a-z])/g;function Qh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yh,Qh);St[t]=new Mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yh,Qh);St[t]=new Mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yh,Qh);St[t]=new Mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){St[e]=new Mt(e,1,!1,e.toLowerCase(),null,!1,!1)});St.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){St[e]=new Mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zh(e,t,n,r){var s=St.hasOwnProperty(t)?St[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(J1(t,n,s,r)&&(n=null),r||s===null?K1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var yr=q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Co=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),ef=Symbol.for("react.strict_mode"),rd=Symbol.for("react.profiler"),hy=Symbol.for("react.provider"),fy=Symbol.for("react.context"),tf=Symbol.for("react.forward_ref"),sd=Symbol.for("react.suspense"),id=Symbol.for("react.suspense_list"),nf=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),my=Symbol.for("react.offscreen"),up=Symbol.iterator;function Gi(e){return e===null||typeof e!="object"?null:(e=up&&e[up]||e["@@iterator"],typeof e=="function"?e:null)}var We=Object.assign,Bc;function ia(e){if(Bc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bc=t&&t[1]||""}return`
`+Bc+e}var Hc=!1;function Wc(e,t){if(!e||Hc)return"";Hc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Hc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ia(e):""}function Y1(e){switch(e.tag){case 5:return ia(e.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 2:case 15:return e=Wc(e.type,!1),e;case 11:return e=Wc(e.type.render,!1),e;case 1:return e=Wc(e.type,!0),e;default:return""}}function ad(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ys:return"Fragment";case Js:return"Portal";case rd:return"Profiler";case ef:return"StrictMode";case sd:return"Suspense";case id:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fy:return(e.displayName||"Context")+".Consumer";case hy:return(e._context.displayName||"Context")+".Provider";case tf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nf:return t=e.displayName||null,t!==null?t:ad(e.type)||"Memo";case Ar:t=e._payload,e=e._init;try{return ad(e(t))}catch{}}return null}function Q1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ad(t);case 8:return t===ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function py(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Z1(e){var t=py(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Po(e){e._valueTracker||(e._valueTracker=Z1(e))}function gy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=py(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Sl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function od(e,t){var n=t.checked;return We({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function dp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Jr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xy(e,t){t=t.checked,t!=null&&Zh(e,"checked",t,!1)}function ld(e,t){xy(e,t);var n=Jr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?cd(e,t.type,n):t.hasOwnProperty("defaultValue")&&cd(e,t.type,Jr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function cd(e,t,n){(t!=="number"||Sl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var aa=Array.isArray;function mi(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Jr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ud(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return We({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(aa(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Jr(n)}}function yy(e,t){var n=Jr(t.value),r=Jr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var To,by=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(To=To||document.createElement("div"),To.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=To.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ra(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ej=["Webkit","ms","Moz","O"];Object.keys(da).forEach(function(e){ej.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),da[t]=da[e]})});function wy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||da.hasOwnProperty(e)&&da[e]?(""+t).trim():t+"px"}function ky(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wy(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var tj=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hd(e,t){if(t){if(tj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function fd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=null;function rf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pd=null,pi=null,gi=null;function pp(e){if(e=fo(e)){if(typeof pd!="function")throw Error(B(280));var t=e.stateNode;t&&(t=fc(t),pd(e.stateNode,e.type,t))}}function jy(e){pi?gi?gi.push(e):gi=[e]:pi=e}function Sy(){if(pi){var e=pi,t=gi;if(gi=pi=null,pp(e),t)for(e=0;e<t.length;e++)pp(t[e])}}function Ny(e,t){return e(t)}function _y(){}var qc=!1;function Ey(e,t,n){if(qc)return e(t,n);qc=!0;try{return Ny(e,t,n)}finally{qc=!1,(pi!==null||gi!==null)&&(_y(),Sy())}}function Ia(e,t){var n=e.stateNode;if(n===null)return null;var r=fc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var gd=!1;if(dr)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){gd=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{gd=!1}function nj(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var ha=!1,Nl=null,_l=!1,xd=null,rj={onError:function(e){ha=!0,Nl=e}};function sj(e,t,n,r,s,i,a,l,c){ha=!1,Nl=null,nj.apply(rj,arguments)}function ij(e,t,n,r,s,i,a,l,c){if(sj.apply(this,arguments),ha){if(ha){var u=Nl;ha=!1,Nl=null}else throw Error(B(198));_l||(_l=!0,xd=u)}}function Ms(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Cy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gp(e){if(Ms(e)!==e)throw Error(B(188))}function aj(e){var t=e.alternate;if(!t){if(t=Ms(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gp(s),e;if(i===r)return gp(s),t;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function Py(e){return e=aj(e),e!==null?Ty(e):null}function Ty(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ty(e);if(t!==null)return t;e=e.sibling}return null}var Ay=ln.unstable_scheduleCallback,xp=ln.unstable_cancelCallback,oj=ln.unstable_shouldYield,lj=ln.unstable_requestPaint,Qe=ln.unstable_now,cj=ln.unstable_getCurrentPriorityLevel,sf=ln.unstable_ImmediatePriority,Ry=ln.unstable_UserBlockingPriority,El=ln.unstable_NormalPriority,uj=ln.unstable_LowPriority,Iy=ln.unstable_IdlePriority,cc=null,qn=null;function dj(e){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(cc,e,void 0,(e.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:mj,hj=Math.log,fj=Math.LN2;function mj(e){return e>>>=0,e===0?32:31-(hj(e)/fj|0)|0}var Ao=64,Ro=4194304;function oa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=oa(l):(i&=a,i!==0&&(r=oa(i)))}else a=n&~s,a!==0?r=oa(a):i!==0&&(r=oa(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ln(t),s=1<<n,r|=e[n],t&=~s;return r}function pj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Ln(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=pj(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function yd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dy(){var e=Ao;return Ao<<=1,!(Ao&4194240)&&(Ao=64),e}function Gc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function uo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ln(t),e[t]=n}function xj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ln(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function af(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ln(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Te=0;function Ly(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Oy,of,$y,My,Fy,vd=!1,Io=[],Vr=null,Ur=null,zr=null,Da=new Map,La=new Map,Ir=[],yj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yp(e,t){switch(e){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":Da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(t.pointerId)}}function Xi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=fo(t),t!==null&&of(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vj(e,t,n,r,s){switch(t){case"focusin":return Vr=Xi(Vr,e,t,n,r,s),!0;case"dragenter":return Ur=Xi(Ur,e,t,n,r,s),!0;case"mouseover":return zr=Xi(zr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Da.set(i,Xi(Da.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,La.set(i,Xi(La.get(i)||null,e,t,n,r,s)),!0}return!1}function Vy(e){var t=bs(e.target);if(t!==null){var n=Ms(t);if(n!==null){if(t=n.tag,t===13){if(t=Cy(n),t!==null){e.blockedOn=t,Fy(e.priority,function(){$y(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function il(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);md=r,n.target.dispatchEvent(r),md=null}else return t=fo(n),t!==null&&of(t),e.blockedOn=n,!1;t.shift()}return!0}function vp(e,t,n){il(e)&&n.delete(t)}function bj(){vd=!1,Vr!==null&&il(Vr)&&(Vr=null),Ur!==null&&il(Ur)&&(Ur=null),zr!==null&&il(zr)&&(zr=null),Da.forEach(vp),La.forEach(vp)}function Ji(e,t){e.blockedOn===t&&(e.blockedOn=null,vd||(vd=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,bj)))}function Oa(e){function t(s){return Ji(s,e)}if(0<Io.length){Ji(Io[0],e);for(var n=1;n<Io.length;n++){var r=Io[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Vr!==null&&Ji(Vr,e),Ur!==null&&Ji(Ur,e),zr!==null&&Ji(zr,e),Da.forEach(t),La.forEach(t),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)Vy(n),n.blockedOn===null&&Ir.shift()}var xi=yr.ReactCurrentBatchConfig,Pl=!0;function wj(e,t,n,r){var s=Te,i=xi.transition;xi.transition=null;try{Te=1,lf(e,t,n,r)}finally{Te=s,xi.transition=i}}function kj(e,t,n,r){var s=Te,i=xi.transition;xi.transition=null;try{Te=4,lf(e,t,n,r)}finally{Te=s,xi.transition=i}}function lf(e,t,n,r){if(Pl){var s=bd(e,t,n,r);if(s===null)ru(e,t,r,Tl,n),yp(e,r);else if(vj(s,e,t,n,r))r.stopPropagation();else if(yp(e,r),t&4&&-1<yj.indexOf(e)){for(;s!==null;){var i=fo(s);if(i!==null&&Oy(i),i=bd(e,t,n,r),i===null&&ru(e,t,r,Tl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ru(e,t,r,null,n)}}var Tl=null;function bd(e,t,n,r){if(Tl=null,e=rf(r),e=bs(e),e!==null)if(t=Ms(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Cy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tl=e,null}function Uy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cj()){case sf:return 1;case Ry:return 4;case El:case uj:return 16;case Iy:return 536870912;default:return 16}default:return 16}}var Or=null,cf=null,al=null;function zy(){if(al)return al;var e,t=cf,n=t.length,r,s="value"in Or?Or.value:Or.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return al=s.slice(e,1<r?1-r:void 0)}function ol(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Do(){return!0}function bp(){return!1}function un(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Do:bp,this.isPropagationStopped=bp,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Do)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Do)},persist:function(){},isPersistent:Do}),t}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uf=un(Li),ho=We({},Li,{view:0,detail:0}),jj=un(ho),Kc,Xc,Yi,uc=We({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:df,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yi&&(Yi&&e.type==="mousemove"?(Kc=e.screenX-Yi.screenX,Xc=e.screenY-Yi.screenY):Xc=Kc=0,Yi=e),Kc)},movementY:function(e){return"movementY"in e?e.movementY:Xc}}),wp=un(uc),Sj=We({},uc,{dataTransfer:0}),Nj=un(Sj),_j=We({},ho,{relatedTarget:0}),Jc=un(_j),Ej=We({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),Cj=un(Ej),Pj=We({},Li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tj=un(Pj),Aj=We({},Li,{data:0}),kp=un(Aj),Rj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ij={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dj[e])?!!t[e]:!1}function df(){return Lj}var Oj=We({},ho,{key:function(e){if(e.key){var t=Rj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ol(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ij[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:df,charCode:function(e){return e.type==="keypress"?ol(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ol(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$j=un(Oj),Mj=We({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jp=un(Mj),Fj=We({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:df}),Vj=un(Fj),Uj=We({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),zj=un(Uj),Bj=We({},uc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hj=un(Bj),Wj=[9,13,27,32],hf=dr&&"CompositionEvent"in window,fa=null;dr&&"documentMode"in document&&(fa=document.documentMode);var qj=dr&&"TextEvent"in window&&!fa,By=dr&&(!hf||fa&&8<fa&&11>=fa),Sp=" ",Np=!1;function Hy(e,t){switch(e){case"keyup":return Wj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qs=!1;function Gj(e,t){switch(e){case"compositionend":return Wy(t);case"keypress":return t.which!==32?null:(Np=!0,Sp);case"textInput":return e=t.data,e===Sp&&Np?null:e;default:return null}}function Kj(e,t){if(Qs)return e==="compositionend"||!hf&&Hy(e,t)?(e=zy(),al=cf=Or=null,Qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return By&&t.locale!=="ko"?null:t.data;default:return null}}var Xj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xj[e.type]:t==="textarea"}function qy(e,t,n,r){jy(r),t=Al(t,"onChange"),0<t.length&&(n=new uf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ma=null,$a=null;function Jj(e){rv(e,0)}function dc(e){var t=ti(e);if(gy(t))return e}function Yj(e,t){if(e==="change")return t}var Gy=!1;if(dr){var Yc;if(dr){var Qc="oninput"in document;if(!Qc){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),Qc=typeof Ep.oninput=="function"}Yc=Qc}else Yc=!1;Gy=Yc&&(!document.documentMode||9<document.documentMode)}function Cp(){ma&&(ma.detachEvent("onpropertychange",Ky),$a=ma=null)}function Ky(e){if(e.propertyName==="value"&&dc($a)){var t=[];qy(t,$a,e,rf(e)),Ey(Jj,t)}}function Qj(e,t,n){e==="focusin"?(Cp(),ma=t,$a=n,ma.attachEvent("onpropertychange",Ky)):e==="focusout"&&Cp()}function Zj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dc($a)}function eS(e,t){if(e==="click")return dc(t)}function tS(e,t){if(e==="input"||e==="change")return dc(t)}function nS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mn=typeof Object.is=="function"?Object.is:nS;function Ma(e,t){if(Mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!nd.call(t,s)||!Mn(e[s],t[s]))return!1}return!0}function Pp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tp(e,t){var n=Pp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pp(n)}}function Xy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jy(){for(var e=window,t=Sl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Sl(e.document)}return t}function ff(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rS(e){var t=Jy(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Xy(n.ownerDocument.documentElement,n)){if(r!==null&&ff(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Tp(n,i);var a=Tp(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sS=dr&&"documentMode"in document&&11>=document.documentMode,Zs=null,wd=null,pa=null,kd=!1;function Ap(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kd||Zs==null||Zs!==Sl(r)||(r=Zs,"selectionStart"in r&&ff(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pa&&Ma(pa,r)||(pa=r,r=Al(wd,"onSelect"),0<r.length&&(t=new uf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Zs)))}function Lo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ei={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},Zc={},Yy={};dr&&(Yy=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function hc(e){if(Zc[e])return Zc[e];if(!ei[e])return e;var t=ei[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yy)return Zc[e]=t[n];return e}var Qy=hc("animationend"),Zy=hc("animationiteration"),ev=hc("animationstart"),tv=hc("transitionend"),nv=new Map,Rp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(e,t){nv.set(e,t),$s(t,[e])}for(var eu=0;eu<Rp.length;eu++){var tu=Rp[eu],iS=tu.toLowerCase(),aS=tu[0].toUpperCase()+tu.slice(1);es(iS,"on"+aS)}es(Qy,"onAnimationEnd");es(Zy,"onAnimationIteration");es(ev,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(tv,"onTransitionEnd");ji("onMouseEnter",["mouseout","mouseover"]);ji("onMouseLeave",["mouseout","mouseover"]);ji("onPointerEnter",["pointerout","pointerover"]);ji("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oS=new Set("cancel close invalid load scroll toggle".split(" ").concat(la));function Ip(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ij(r,t,void 0,e),e.currentTarget=null}function rv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ip(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ip(s,l,u),i=c}}}if(_l)throw e=xd,_l=!1,xd=null,e}function Oe(e,t){var n=t[Ed];n===void 0&&(n=t[Ed]=new Set);var r=e+"__bubble";n.has(r)||(sv(t,e,2,!1),n.add(r))}function nu(e,t,n){var r=0;t&&(r|=4),sv(n,e,r,t)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function Fa(e){if(!e[Oo]){e[Oo]=!0,dy.forEach(function(n){n!=="selectionchange"&&(oS.has(n)||nu(n,!1,e),nu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Oo]||(t[Oo]=!0,nu("selectionchange",!1,t))}}function sv(e,t,n,r){switch(Uy(t)){case 1:var s=wj;break;case 4:s=kj;break;default:s=lf}n=s.bind(null,t,n,e),s=void 0,!gd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ru(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=bs(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Ey(function(){var u=i,d=rf(n),h=[];e:{var m=nv.get(e);if(m!==void 0){var f=uf,g=e;switch(e){case"keypress":if(ol(n)===0)break e;case"keydown":case"keyup":f=$j;break;case"focusin":g="focus",f=Jc;break;case"focusout":g="blur",f=Jc;break;case"beforeblur":case"afterblur":f=Jc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=wp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Nj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Vj;break;case Qy:case Zy:case ev:f=Cj;break;case tv:f=zj;break;case"scroll":f=jj;break;case"wheel":f=Hj;break;case"copy":case"cut":case"paste":f=Tj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=jp}var v=(t&4)!==0,k=!v&&e==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var y=u,p;y!==null;){p=y;var S=p.stateNode;if(p.tag===5&&S!==null&&(p=S,x!==null&&(S=Ia(y,x),S!=null&&v.push(Va(y,S,p)))),k)break;y=y.return}0<v.length&&(m=new f(m,g,null,n,d),h.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&n!==md&&(g=n.relatedTarget||n.fromElement)&&(bs(g)||g[hr]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?bs(g):null,g!==null&&(k=Ms(g),g!==k||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(v=wp,S="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=jp,S="onPointerLeave",x="onPointerEnter",y="pointer"),k=f==null?m:ti(f),p=g==null?m:ti(g),m=new v(S,y+"leave",f,n,d),m.target=k,m.relatedTarget=p,S=null,bs(d)===u&&(v=new v(x,y+"enter",g,n,d),v.target=p,v.relatedTarget=k,S=v),k=S,f&&g)t:{for(v=f,x=g,y=0,p=v;p;p=Us(p))y++;for(p=0,S=x;S;S=Us(S))p++;for(;0<y-p;)v=Us(v),y--;for(;0<p-y;)x=Us(x),p--;for(;y--;){if(v===x||x!==null&&v===x.alternate)break t;v=Us(v),x=Us(x)}v=null}else v=null;f!==null&&Dp(h,m,f,v,!1),g!==null&&k!==null&&Dp(h,k,g,v,!0)}}e:{if(m=u?ti(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var E=Yj;else if(_p(m))if(Gy)E=tS;else{E=Zj;var N=Qj}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=eS);if(E&&(E=E(e,u))){qy(h,E,n,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&cd(m,"number",m.value)}switch(N=u?ti(u):window,e){case"focusin":(_p(N)||N.contentEditable==="true")&&(Zs=N,wd=u,pa=null);break;case"focusout":pa=wd=Zs=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Ap(h,n,d);break;case"selectionchange":if(sS)break;case"keydown":case"keyup":Ap(h,n,d)}var P;if(hf)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Qs?Hy(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(By&&n.locale!=="ko"&&(Qs||T!=="onCompositionStart"?T==="onCompositionEnd"&&Qs&&(P=zy()):(Or=d,cf="value"in Or?Or.value:Or.textContent,Qs=!0)),N=Al(u,T),0<N.length&&(T=new kp(T,e,null,n,d),h.push({event:T,listeners:N}),P?T.data=P:(P=Wy(n),P!==null&&(T.data=P)))),(P=qj?Gj(e,n):Kj(e,n))&&(u=Al(u,"onBeforeInput"),0<u.length&&(d=new kp("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=P))}rv(h,t)})}function Va(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Al(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ia(e,n),i!=null&&r.unshift(Va(e,i,s)),i=Ia(e,t),i!=null&&r.push(Va(e,i,s))),e=e.return}return r}function Us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dp(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ia(n,i),c!=null&&a.unshift(Va(n,c,l))):s||(c=Ia(n,i),c!=null&&a.push(Va(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var lS=/\r\n?/g,cS=/\u0000|\uFFFD/g;function Lp(e){return(typeof e=="string"?e:""+e).replace(lS,`
`).replace(cS,"")}function $o(e,t,n){if(t=Lp(t),Lp(e)!==t&&n)throw Error(B(425))}function Rl(){}var jd=null,Sd=null;function Nd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _d=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,Op=typeof Promise=="function"?Promise:void 0,dS=typeof queueMicrotask=="function"?queueMicrotask:typeof Op<"u"?function(e){return Op.resolve(null).then(e).catch(hS)}:_d;function hS(e){setTimeout(function(){throw e})}function su(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Oa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oa(t)}function Br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $p(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Oi=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Oi,Ua="__reactProps$"+Oi,hr="__reactContainer$"+Oi,Ed="__reactEvents$"+Oi,fS="__reactListeners$"+Oi,mS="__reactHandles$"+Oi;function bs(e){var t=e[Bn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hr]||n[Bn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$p(e);e!==null;){if(n=e[Bn])return n;e=$p(e)}return t}e=n,n=e.parentNode}return null}function fo(e){return e=e[Bn]||e[hr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ti(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function fc(e){return e[Ua]||null}var Cd=[],ni=-1;function ts(e){return{current:e}}function $e(e){0>ni||(e.current=Cd[ni],Cd[ni]=null,ni--)}function De(e,t){ni++,Cd[ni]=e.current,e.current=t}var Yr={},Tt=ts(Yr),Kt=ts(!1),As=Yr;function Si(e,t){var n=e.type.contextTypes;if(!n)return Yr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Xt(e){return e=e.childContextTypes,e!=null}function Il(){$e(Kt),$e(Tt)}function Mp(e,t,n){if(Tt.current!==Yr)throw Error(B(168));De(Tt,t),De(Kt,n)}function iv(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(B(108,Q1(e)||"Unknown",s));return We({},n,r)}function Dl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yr,As=Tt.current,De(Tt,e),De(Kt,Kt.current),!0}function Fp(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=iv(e,t,As),r.__reactInternalMemoizedMergedChildContext=e,$e(Kt),$e(Tt),De(Tt,e)):$e(Kt),De(Kt,n)}var or=null,mc=!1,iu=!1;function av(e){or===null?or=[e]:or.push(e)}function pS(e){mc=!0,av(e)}function ns(){if(!iu&&or!==null){iu=!0;var e=0,t=Te;try{var n=or;for(Te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}or=null,mc=!1}catch(s){throw or!==null&&(or=or.slice(e+1)),Ay(sf,ns),s}finally{Te=t,iu=!1}}return null}var ri=[],si=0,Ll=null,Ol=0,gn=[],xn=0,Rs=null,lr=1,cr="";function ms(e,t){ri[si++]=Ol,ri[si++]=Ll,Ll=e,Ol=t}function ov(e,t,n){gn[xn++]=lr,gn[xn++]=cr,gn[xn++]=Rs,Rs=e;var r=lr;e=cr;var s=32-Ln(r)-1;r&=~(1<<s),n+=1;var i=32-Ln(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,lr=1<<32-Ln(t)+s|n<<s|r,cr=i+e}else lr=1<<i|n<<s|r,cr=e}function mf(e){e.return!==null&&(ms(e,1),ov(e,1,0))}function pf(e){for(;e===Ll;)Ll=ri[--si],ri[si]=null,Ol=ri[--si],ri[si]=null;for(;e===Rs;)Rs=gn[--xn],gn[xn]=null,cr=gn[--xn],gn[xn]=null,lr=gn[--xn],gn[xn]=null}var an=null,rn=null,Me=!1,In=null;function lv(e,t){var n=bn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Vp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,an=e,rn=Br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,an=e,rn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rs!==null?{id:lr,overflow:cr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,an=e,rn=null,!0):!1;default:return!1}}function Pd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Td(e){if(Me){var t=rn;if(t){var n=t;if(!Vp(e,t)){if(Pd(e))throw Error(B(418));t=Br(n.nextSibling);var r=an;t&&Vp(e,t)?lv(r,n):(e.flags=e.flags&-4097|2,Me=!1,an=e)}}else{if(Pd(e))throw Error(B(418));e.flags=e.flags&-4097|2,Me=!1,an=e}}}function Up(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;an=e}function Mo(e){if(e!==an)return!1;if(!Me)return Up(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Nd(e.type,e.memoizedProps)),t&&(t=rn)){if(Pd(e))throw cv(),Error(B(418));for(;t;)lv(e,t),t=Br(t.nextSibling)}if(Up(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){rn=Br(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}rn=null}}else rn=an?Br(e.stateNode.nextSibling):null;return!0}function cv(){for(var e=rn;e;)e=Br(e.nextSibling)}function Ni(){rn=an=null,Me=!1}function gf(e){In===null?In=[e]:In.push(e)}var gS=yr.ReactCurrentBatchConfig;function Qi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function Fo(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zp(e){var t=e._init;return t(e._payload)}function uv(e){function t(x,y){if(e){var p=x.deletions;p===null?(x.deletions=[y],x.flags|=16):p.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=Gr(x,y),x.index=0,x.sibling=null,x}function i(x,y,p){return x.index=p,e?(p=x.alternate,p!==null?(p=p.index,p<y?(x.flags|=2,y):p):(x.flags|=2,y)):(x.flags|=1048576,y)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,p,S){return y===null||y.tag!==6?(y=hu(p,x.mode,S),y.return=x,y):(y=s(y,p),y.return=x,y)}function c(x,y,p,S){var E=p.type;return E===Ys?d(x,y,p.props.children,S,p.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ar&&zp(E)===y.type)?(S=s(y,p.props),S.ref=Qi(x,y,p),S.return=x,S):(S=ml(p.type,p.key,p.props,null,x.mode,S),S.ref=Qi(x,y,p),S.return=x,S)}function u(x,y,p,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==p.containerInfo||y.stateNode.implementation!==p.implementation?(y=fu(p,x.mode,S),y.return=x,y):(y=s(y,p.children||[]),y.return=x,y)}function d(x,y,p,S,E){return y===null||y.tag!==7?(y=Es(p,x.mode,S,E),y.return=x,y):(y=s(y,p),y.return=x,y)}function h(x,y,p){if(typeof y=="string"&&y!==""||typeof y=="number")return y=hu(""+y,x.mode,p),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Co:return p=ml(y.type,y.key,y.props,null,x.mode,p),p.ref=Qi(x,null,y),p.return=x,p;case Js:return y=fu(y,x.mode,p),y.return=x,y;case Ar:var S=y._init;return h(x,S(y._payload),p)}if(aa(y)||Gi(y))return y=Es(y,x.mode,p,null),y.return=x,y;Fo(x,y)}return null}function m(x,y,p,S){var E=y!==null?y.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return E!==null?null:l(x,y,""+p,S);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Co:return p.key===E?c(x,y,p,S):null;case Js:return p.key===E?u(x,y,p,S):null;case Ar:return E=p._init,m(x,y,E(p._payload),S)}if(aa(p)||Gi(p))return E!==null?null:d(x,y,p,S,null);Fo(x,p)}return null}function f(x,y,p,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(p)||null,l(y,x,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Co:return x=x.get(S.key===null?p:S.key)||null,c(y,x,S,E);case Js:return x=x.get(S.key===null?p:S.key)||null,u(y,x,S,E);case Ar:var N=S._init;return f(x,y,p,N(S._payload),E)}if(aa(S)||Gi(S))return x=x.get(p)||null,d(y,x,S,E,null);Fo(y,S)}return null}function g(x,y,p,S){for(var E=null,N=null,P=y,T=y=0,O=null;P!==null&&T<p.length;T++){P.index>T?(O=P,P=null):O=P.sibling;var D=m(x,P,p[T],S);if(D===null){P===null&&(P=O);break}e&&P&&D.alternate===null&&t(x,P),y=i(D,y,T),N===null?E=D:N.sibling=D,N=D,P=O}if(T===p.length)return n(x,P),Me&&ms(x,T),E;if(P===null){for(;T<p.length;T++)P=h(x,p[T],S),P!==null&&(y=i(P,y,T),N===null?E=P:N.sibling=P,N=P);return Me&&ms(x,T),E}for(P=r(x,P);T<p.length;T++)O=f(P,x,T,p[T],S),O!==null&&(e&&O.alternate!==null&&P.delete(O.key===null?T:O.key),y=i(O,y,T),N===null?E=O:N.sibling=O,N=O);return e&&P.forEach(function(M){return t(x,M)}),Me&&ms(x,T),E}function v(x,y,p,S){var E=Gi(p);if(typeof E!="function")throw Error(B(150));if(p=E.call(p),p==null)throw Error(B(151));for(var N=E=null,P=y,T=y=0,O=null,D=p.next();P!==null&&!D.done;T++,D=p.next()){P.index>T?(O=P,P=null):O=P.sibling;var M=m(x,P,D.value,S);if(M===null){P===null&&(P=O);break}e&&P&&M.alternate===null&&t(x,P),y=i(M,y,T),N===null?E=M:N.sibling=M,N=M,P=O}if(D.done)return n(x,P),Me&&ms(x,T),E;if(P===null){for(;!D.done;T++,D=p.next())D=h(x,D.value,S),D!==null&&(y=i(D,y,T),N===null?E=D:N.sibling=D,N=D);return Me&&ms(x,T),E}for(P=r(x,P);!D.done;T++,D=p.next())D=f(P,x,T,D.value,S),D!==null&&(e&&D.alternate!==null&&P.delete(D.key===null?T:D.key),y=i(D,y,T),N===null?E=D:N.sibling=D,N=D);return e&&P.forEach(function(K){return t(x,K)}),Me&&ms(x,T),E}function k(x,y,p,S){if(typeof p=="object"&&p!==null&&p.type===Ys&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Co:e:{for(var E=p.key,N=y;N!==null;){if(N.key===E){if(E=p.type,E===Ys){if(N.tag===7){n(x,N.sibling),y=s(N,p.props.children),y.return=x,x=y;break e}}else if(N.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ar&&zp(E)===N.type){n(x,N.sibling),y=s(N,p.props),y.ref=Qi(x,N,p),y.return=x,x=y;break e}n(x,N);break}else t(x,N);N=N.sibling}p.type===Ys?(y=Es(p.props.children,x.mode,S,p.key),y.return=x,x=y):(S=ml(p.type,p.key,p.props,null,x.mode,S),S.ref=Qi(x,y,p),S.return=x,x=S)}return a(x);case Js:e:{for(N=p.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===p.containerInfo&&y.stateNode.implementation===p.implementation){n(x,y.sibling),y=s(y,p.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else t(x,y);y=y.sibling}y=fu(p,x.mode,S),y.return=x,x=y}return a(x);case Ar:return N=p._init,k(x,y,N(p._payload),S)}if(aa(p))return g(x,y,p,S);if(Gi(p))return v(x,y,p,S);Fo(x,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,y!==null&&y.tag===6?(n(x,y.sibling),y=s(y,p),y.return=x,x=y):(n(x,y),y=hu(p,x.mode,S),y.return=x,x=y),a(x)):n(x,y)}return k}var _i=uv(!0),dv=uv(!1),$l=ts(null),Ml=null,ii=null,xf=null;function yf(){xf=ii=Ml=null}function vf(e){var t=$l.current;$e($l),e._currentValue=t}function Ad(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yi(e,t){Ml=e,xf=ii=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qt=!0),e.firstContext=null)}function jn(e){var t=e._currentValue;if(xf!==e)if(e={context:e,memoizedValue:t,next:null},ii===null){if(Ml===null)throw Error(B(308));ii=e,Ml.dependencies={lanes:0,firstContext:e}}else ii=ii.next=e;return t}var ws=null;function bf(e){ws===null?ws=[e]:ws.push(e)}function hv(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,bf(t)):(n.next=s.next,s.next=n),t.interleaved=n,fr(e,r)}function fr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Rr=!1;function wf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ur(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,fr(e,n)}return s=r.interleaved,s===null?(t.next=t,bf(r)):(t.next=s.next,s.next=t),r.interleaved=t,fr(e,n)}function ll(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,af(e,n)}}function Bp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fl(e,t,n,r){var s=e.updateQueue;Rr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(m=t,f=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(f,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(f,h,m):g,m==null)break e;h=We({},h,m);break e;case 2:Rr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Ds|=a,e.lanes=a,e.memoizedState=h}}function Hp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var mo={},Gn=ts(mo),za=ts(mo),Ba=ts(mo);function ks(e){if(e===mo)throw Error(B(174));return e}function kf(e,t){switch(De(Ba,t),De(za,e),De(Gn,mo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=dd(t,e)}$e(Gn),De(Gn,t)}function Ei(){$e(Gn),$e(za),$e(Ba)}function mv(e){ks(Ba.current);var t=ks(Gn.current),n=dd(t,e.type);t!==n&&(De(za,e),De(Gn,n))}function jf(e){za.current===e&&($e(Gn),$e(za))}var Ve=ts(0);function Vl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var au=[];function Sf(){for(var e=0;e<au.length;e++)au[e]._workInProgressVersionPrimary=null;au.length=0}var cl=yr.ReactCurrentDispatcher,ou=yr.ReactCurrentBatchConfig,Is=0,Be=null,dt=null,pt=null,Ul=!1,ga=!1,Ha=0,xS=0;function _t(){throw Error(B(321))}function Nf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mn(e[n],t[n]))return!1;return!0}function _f(e,t,n,r,s,i){if(Is=i,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cl.current=e===null||e.memoizedState===null?wS:kS,e=n(r,s),ga){i=0;do{if(ga=!1,Ha=0,25<=i)throw Error(B(301));i+=1,pt=dt=null,t.updateQueue=null,cl.current=jS,e=n(r,s)}while(ga)}if(cl.current=zl,t=dt!==null&&dt.next!==null,Is=0,pt=dt=Be=null,Ul=!1,t)throw Error(B(300));return e}function Ef(){var e=Ha!==0;return Ha=0,e}function Vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Be.memoizedState=pt=e:pt=pt.next=e,pt}function Sn(){if(dt===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var t=pt===null?Be.memoizedState:pt.next;if(t!==null)pt=t,dt=e;else{if(e===null)throw Error(B(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},pt===null?Be.memoizedState=pt=e:pt=pt.next=e}return pt}function Wa(e,t){return typeof t=="function"?t(e):t}function lu(e){var t=Sn(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=dt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Is&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,Be.lanes|=d,Ds|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Mn(r,t.memoizedState)||(qt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Be.lanes|=i,Ds|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function cu(e){var t=Sn(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Mn(i,t.memoizedState)||(qt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function pv(){}function gv(e,t){var n=Be,r=Sn(),s=t(),i=!Mn(r.memoizedState,s);if(i&&(r.memoizedState=s,qt=!0),r=r.queue,Cf(vv.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,qa(9,yv.bind(null,n,r,s,t),void 0,null),yt===null)throw Error(B(349));Is&30||xv(n,t,s)}return s}function xv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yv(e,t,n,r){t.value=n,t.getSnapshot=r,bv(t)&&wv(e)}function vv(e,t,n){return n(function(){bv(t)&&wv(e)})}function bv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mn(e,n)}catch{return!0}}function wv(e){var t=fr(e,1);t!==null&&On(t,e,1,-1)}function Wp(e){var t=Vn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:e},t.queue=e,e=e.dispatch=bS.bind(null,Be,e),[t.memoizedState,e]}function qa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function kv(){return Sn().memoizedState}function ul(e,t,n,r){var s=Vn();Be.flags|=e,s.memoizedState=qa(1|t,n,void 0,r===void 0?null:r)}function pc(e,t,n,r){var s=Sn();r=r===void 0?null:r;var i=void 0;if(dt!==null){var a=dt.memoizedState;if(i=a.destroy,r!==null&&Nf(r,a.deps)){s.memoizedState=qa(t,n,i,r);return}}Be.flags|=e,s.memoizedState=qa(1|t,n,i,r)}function qp(e,t){return ul(8390656,8,e,t)}function Cf(e,t){return pc(2048,8,e,t)}function jv(e,t){return pc(4,2,e,t)}function Sv(e,t){return pc(4,4,e,t)}function Nv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _v(e,t,n){return n=n!=null?n.concat([e]):null,pc(4,4,Nv.bind(null,t,e),n)}function Pf(){}function Ev(e,t){var n=Sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Cv(e,t){var n=Sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Pv(e,t,n){return Is&21?(Mn(n,t)||(n=Dy(),Be.lanes|=n,Ds|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qt=!0),e.memoizedState=n)}function yS(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var r=ou.transition;ou.transition={};try{e(!1),t()}finally{Te=n,ou.transition=r}}function Tv(){return Sn().memoizedState}function vS(e,t,n){var r=qr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Av(e))Rv(t,n);else if(n=hv(e,t,n,r),n!==null){var s=Lt();On(n,e,r,s),Iv(n,t,r)}}function bS(e,t,n){var r=qr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Av(e))Rv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Mn(l,a)){var c=t.interleaved;c===null?(s.next=s,bf(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=hv(e,t,s,r),n!==null&&(s=Lt(),On(n,e,r,s),Iv(n,t,r))}}function Av(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function Rv(e,t){ga=Ul=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Iv(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,af(e,n)}}var zl={readContext:jn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},wS={readContext:jn,useCallback:function(e,t){return Vn().memoizedState=[e,t===void 0?null:t],e},useContext:jn,useEffect:qp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ul(4194308,4,Nv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ul(4194308,4,e,t)},useInsertionEffect:function(e,t){return ul(4,2,e,t)},useMemo:function(e,t){var n=Vn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Vn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vS.bind(null,Be,e),[r.memoizedState,e]},useRef:function(e){var t=Vn();return e={current:e},t.memoizedState=e},useState:Wp,useDebugValue:Pf,useDeferredValue:function(e){return Vn().memoizedState=e},useTransition:function(){var e=Wp(!1),t=e[0];return e=yS.bind(null,e[1]),Vn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Be,s=Vn();if(Me){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),yt===null)throw Error(B(349));Is&30||xv(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,qp(vv.bind(null,r,i,e),[e]),r.flags|=2048,qa(9,yv.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Vn(),t=yt.identifierPrefix;if(Me){var n=cr,r=lr;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ha++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=xS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kS={readContext:jn,useCallback:Ev,useContext:jn,useEffect:Cf,useImperativeHandle:_v,useInsertionEffect:jv,useLayoutEffect:Sv,useMemo:Cv,useReducer:lu,useRef:kv,useState:function(){return lu(Wa)},useDebugValue:Pf,useDeferredValue:function(e){var t=Sn();return Pv(t,dt.memoizedState,e)},useTransition:function(){var e=lu(Wa)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:pv,useSyncExternalStore:gv,useId:Tv,unstable_isNewReconciler:!1},jS={readContext:jn,useCallback:Ev,useContext:jn,useEffect:Cf,useImperativeHandle:_v,useInsertionEffect:jv,useLayoutEffect:Sv,useMemo:Cv,useReducer:cu,useRef:kv,useState:function(){return cu(Wa)},useDebugValue:Pf,useDeferredValue:function(e){var t=Sn();return dt===null?t.memoizedState=e:Pv(t,dt.memoizedState,e)},useTransition:function(){var e=cu(Wa)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:pv,useSyncExternalStore:gv,useId:Tv,unstable_isNewReconciler:!1};function Pn(e,t){if(e&&e.defaultProps){t=We({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Rd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var gc={isMounted:function(e){return(e=e._reactInternals)?Ms(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lt(),s=qr(e),i=ur(r,s);i.payload=t,n!=null&&(i.callback=n),t=Hr(e,i,s),t!==null&&(On(t,e,s,r),ll(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lt(),s=qr(e),i=ur(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Hr(e,i,s),t!==null&&(On(t,e,s,r),ll(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lt(),r=qr(e),s=ur(n,r);s.tag=2,t!=null&&(s.callback=t),t=Hr(e,s,r),t!==null&&(On(t,e,r,n),ll(t,e,r))}};function Gp(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Ma(n,r)||!Ma(s,i):!0}function Dv(e,t,n){var r=!1,s=Yr,i=t.contextType;return typeof i=="object"&&i!==null?i=jn(i):(s=Xt(t)?As:Tt.current,r=t.contextTypes,i=(r=r!=null)?Si(e,s):Yr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Kp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gc.enqueueReplaceState(t,t.state,null)}function Id(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},wf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=jn(i):(i=Xt(t)?As:Tt.current,s.context=Si(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Rd(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&gc.enqueueReplaceState(s,s.state,null),Fl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ci(e,t){try{var n="",r=t;do n+=Y1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function uu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Dd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var SS=typeof WeakMap=="function"?WeakMap:Map;function Lv(e,t,n){n=ur(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Hd=r),Dd(e,t)},n}function Ov(e,t,n){n=ur(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Dd(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dd(e,t),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Xp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new SS;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=MS.bind(null,e,t,n),t.then(e,e))}function Jp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yp(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ur(-1,1),t.tag=2,Hr(n,t,1))),n.lanes|=1),e)}var NS=yr.ReactCurrentOwner,qt=!1;function It(e,t,n,r){t.child=e===null?dv(t,null,n,r):_i(t,e.child,n,r)}function Qp(e,t,n,r,s){n=n.render;var i=t.ref;return yi(t,s),r=_f(e,t,n,r,i,s),n=Ef(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mr(e,t,s)):(Me&&n&&mf(t),t.flags|=1,It(e,t,r,s),t.child)}function Zp(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!$f(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,$v(e,t,i,r,s)):(e=ml(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ma,n(a,r)&&e.ref===t.ref)return mr(e,t,s)}return t.flags|=1,e=Gr(i,r),e.ref=t.ref,e.return=t,t.child=e}function $v(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ma(i,r)&&e.ref===t.ref)if(qt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(qt=!0);else return t.lanes=e.lanes,mr(e,t,s)}return Ld(e,t,n,r,s)}function Mv(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(oi,nn),nn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(oi,nn),nn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,De(oi,nn),nn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,De(oi,nn),nn|=r;return It(e,t,s,n),t.child}function Fv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ld(e,t,n,r,s){var i=Xt(n)?As:Tt.current;return i=Si(t,i),yi(t,s),n=_f(e,t,n,r,i,s),r=Ef(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mr(e,t,s)):(Me&&r&&mf(t),t.flags|=1,It(e,t,n,s),t.child)}function eg(e,t,n,r,s){if(Xt(n)){var i=!0;Dl(t)}else i=!1;if(yi(t,s),t.stateNode===null)dl(e,t),Dv(t,n,r),Id(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=jn(u):(u=Xt(n)?As:Tt.current,u=Si(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Kp(t,a,r,u),Rr=!1;var m=t.memoizedState;a.state=m,Fl(t,r,a,s),c=t.memoizedState,l!==r||m!==c||Kt.current||Rr?(typeof d=="function"&&(Rd(t,n,d,r),c=t.memoizedState),(l=Rr||Gp(t,n,l,r,m,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,fv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Pn(t.type,l),a.props=u,h=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=jn(c):(c=Xt(n)?As:Tt.current,c=Si(t,c));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==c)&&Kp(t,a,r,c),Rr=!1,m=t.memoizedState,a.state=m,Fl(t,r,a,s);var g=t.memoizedState;l!==h||m!==g||Kt.current||Rr?(typeof f=="function"&&(Rd(t,n,f,r),g=t.memoizedState),(u=Rr||Gp(t,n,u,r,m,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Od(e,t,n,r,i,s)}function Od(e,t,n,r,s,i){Fv(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Fp(t,n,!1),mr(e,t,i);r=t.stateNode,NS.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,l,i)):It(e,t,l,i),t.memoizedState=r.state,s&&Fp(t,n,!0),t.child}function Vv(e){var t=e.stateNode;t.pendingContext?Mp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mp(e,t.context,!1),kf(e,t.containerInfo)}function tg(e,t,n,r,s){return Ni(),gf(s),t.flags|=256,It(e,t,n,r),t.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function Md(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uv(e,t,n){var r=t.pendingProps,s=Ve.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),De(Ve,s&1),e===null)return Td(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=vc(a,r,0,null),e=Es(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Md(n),t.memoizedState=$d,e):Tf(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _S(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Gr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Gr(l,i):(i=Es(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Md(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=$d,r}return i=e.child,e=i.sibling,r=Gr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Tf(e,t){return t=vc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vo(e,t,n,r){return r!==null&&gf(r),_i(t,e.child,null,n),e=Tf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _S(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=uu(Error(B(422))),Vo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=vc({mode:"visible",children:r.children},s,0,null),i=Es(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&_i(t,e.child,null,a),t.child.memoizedState=Md(a),t.memoizedState=$d,i);if(!(t.mode&1))return Vo(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=uu(i,r,void 0),Vo(e,t,a,r)}if(l=(a&e.childLanes)!==0,qt||l){if(r=yt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fr(e,s),On(r,e,s,-1))}return Of(),r=uu(Error(B(421))),Vo(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=FS.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,rn=Br(s.nextSibling),an=t,Me=!0,In=null,e!==null&&(gn[xn++]=lr,gn[xn++]=cr,gn[xn++]=Rs,lr=e.id,cr=e.overflow,Rs=t),t=Tf(t,r.children),t.flags|=4096,t)}function ng(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ad(e.return,t,n)}function du(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zv(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(It(e,t,r.children,n),r=Ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ng(e,n,t);else if(e.tag===19)ng(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(De(Ve,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Vl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),du(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Vl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}du(t,!0,n,null,i);break;case"together":du(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ds|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=Gr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Gr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ES(e,t,n){switch(t.tag){case 3:Vv(t),Ni();break;case 5:mv(t);break;case 1:Xt(t.type)&&Dl(t);break;case 4:kf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;De($l,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(De(Ve,Ve.current&1),t.flags|=128,null):n&t.child.childLanes?Uv(e,t,n):(De(Ve,Ve.current&1),e=mr(e,t,n),e!==null?e.sibling:null);De(Ve,Ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return zv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),De(Ve,Ve.current),r)break;return null;case 22:case 23:return t.lanes=0,Mv(e,t,n)}return mr(e,t,n)}var Bv,Fd,Hv,Wv;Bv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fd=function(){};Hv=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ks(Gn.current);var i=null;switch(n){case"input":s=od(e,s),r=od(e,r),i=[];break;case"select":s=We({},s,{value:void 0}),r=We({},r,{value:void 0}),i=[];break;case"textarea":s=ud(e,s),r=ud(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Rl)}hd(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Aa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Aa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Oe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Wv=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zi(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function CS(e,t,n){var r=t.pendingProps;switch(pf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(t),null;case 1:return Xt(t.type)&&Il(),Et(t),null;case 3:return r=t.stateNode,Ei(),$e(Kt),$e(Tt),Sf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Mo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,In!==null&&(Gd(In),In=null))),Fd(e,t),Et(t),null;case 5:jf(t);var s=ks(Ba.current);if(n=t.type,e!==null&&t.stateNode!=null)Hv(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return Et(t),null}if(e=ks(Gn.current),Mo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Bn]=t,r[Ua]=i,e=(t.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(s=0;s<la.length;s++)Oe(la[s],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":dp(r,i),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Oe("invalid",r);break;case"textarea":fp(r,i),Oe("invalid",r)}hd(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&$o(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&$o(r.textContent,l,e),s=["children",""+l]):Aa.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Oe("scroll",r)}switch(n){case"input":Po(r),hp(r,i,!0);break;case"textarea":Po(r),mp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Rl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vy(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Bn]=t,e[Ua]=r,Bv(e,t,!1,!1),t.stateNode=e;e:{switch(a=fd(n,r),n){case"dialog":Oe("cancel",e),Oe("close",e),s=r;break;case"iframe":case"object":case"embed":Oe("load",e),s=r;break;case"video":case"audio":for(s=0;s<la.length;s++)Oe(la[s],e);s=r;break;case"source":Oe("error",e),s=r;break;case"img":case"image":case"link":Oe("error",e),Oe("load",e),s=r;break;case"details":Oe("toggle",e),s=r;break;case"input":dp(e,r),s=od(e,r),Oe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=We({},r,{value:void 0}),Oe("invalid",e);break;case"textarea":fp(e,r),s=ud(e,r),Oe("invalid",e);break;default:s=r}hd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ky(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&by(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ra(e,c):typeof c=="number"&&Ra(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Aa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Oe("scroll",e):c!=null&&Zh(e,i,c,a))}switch(n){case"input":Po(e),hp(e,r,!1);break;case"textarea":Po(e),mp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Jr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?mi(e,!!r.multiple,i,!1):r.defaultValue!=null&&mi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Rl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Et(t),null;case 6:if(e&&t.stateNode!=null)Wv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=ks(Ba.current),ks(Gn.current),Mo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bn]=t,(i=r.nodeValue!==n)&&(e=an,e!==null))switch(e.tag){case 3:$o(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$o(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=t,t.stateNode=r}return Et(t),null;case 13:if($e(Ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&rn!==null&&t.mode&1&&!(t.flags&128))cv(),Ni(),t.flags|=98560,i=!1;else if(i=Mo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(B(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Bn]=t}else Ni(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Et(t),i=!1}else In!==null&&(Gd(In),In=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ve.current&1?ht===0&&(ht=3):Of())),t.updateQueue!==null&&(t.flags|=4),Et(t),null);case 4:return Ei(),Fd(e,t),e===null&&Fa(t.stateNode.containerInfo),Et(t),null;case 10:return vf(t.type._context),Et(t),null;case 17:return Xt(t.type)&&Il(),Et(t),null;case 19:if($e(Ve),i=t.memoizedState,i===null)return Et(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Zi(i,!1);else{if(ht!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Vl(e),a!==null){for(t.flags|=128,Zi(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return De(Ve,Ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&Qe()>Pi&&(t.flags|=128,r=!0,Zi(i,!1),t.lanes=4194304)}else{if(!r)if(e=Vl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Me)return Et(t),null}else 2*Qe()-i.renderingStartTime>Pi&&n!==1073741824&&(t.flags|=128,r=!0,Zi(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=Ve.current,De(Ve,r?n&1|2:n&1),t):(Et(t),null);case 22:case 23:return Lf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?nn&1073741824&&(Et(t),t.subtreeFlags&6&&(t.flags|=8192)):Et(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function PS(e,t){switch(pf(t),t.tag){case 1:return Xt(t.type)&&Il(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ei(),$e(Kt),$e(Tt),Sf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jf(t),null;case 13:if($e(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Ni()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(Ve),null;case 4:return Ei(),null;case 10:return vf(t.type._context),null;case 22:case 23:return Lf(),null;case 24:return null;default:return null}}var Uo=!1,Ct=!1,TS=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ai(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(e,t,r)}else n.current=null}function Vd(e,t,n){try{n()}catch(r){Ke(e,t,r)}}var rg=!1;function AS(e,t){if(jd=Pl,e=Jy(),ff(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=a),m===i&&++d===r&&(c=a),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sd={focusedElem:e,selectionRange:n},Pl=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,k=g.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Pn(t.type,v),k);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(S){Ke(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return g=rg,rg=!1,g}function xa(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Vd(t,n,i)}s=s.next}while(s!==r)}}function xc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ud(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qv(e){var t=e.alternate;t!==null&&(e.alternate=null,qv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bn],delete t[Ua],delete t[Ed],delete t[fS],delete t[mS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gv(e){return e.tag===5||e.tag===3||e.tag===4}function sg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rl));else if(r!==4&&(e=e.child,e!==null))for(zd(e,t,n),e=e.sibling;e!==null;)zd(e,t,n),e=e.sibling}function Bd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bd(e,t,n),e=e.sibling;e!==null;)Bd(e,t,n),e=e.sibling}var bt=null,An=!1;function Sr(e,t,n){for(n=n.child;n!==null;)Kv(e,t,n),n=n.sibling}function Kv(e,t,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(cc,n)}catch{}switch(n.tag){case 5:Ct||ai(n,t);case 6:var r=bt,s=An;bt=null,Sr(e,t,n),bt=r,An=s,bt!==null&&(An?(e=bt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(An?(e=bt,n=n.stateNode,e.nodeType===8?su(e.parentNode,n):e.nodeType===1&&su(e,n),Oa(e)):su(bt,n.stateNode));break;case 4:r=bt,s=An,bt=n.stateNode.containerInfo,An=!0,Sr(e,t,n),bt=r,An=s;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Vd(n,t,a),s=s.next}while(s!==r)}Sr(e,t,n);break;case 1:if(!Ct&&(ai(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ke(n,t,l)}Sr(e,t,n);break;case 21:Sr(e,t,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Sr(e,t,n),Ct=r):Sr(e,t,n);break;default:Sr(e,t,n)}}function ig(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new TS),t.forEach(function(r){var s=VS.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _n(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:bt=l.stateNode,An=!1;break e;case 3:bt=l.stateNode.containerInfo,An=!0;break e;case 4:bt=l.stateNode.containerInfo,An=!0;break e}l=l.return}if(bt===null)throw Error(B(160));Kv(i,a,s),bt=null,An=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ke(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Xv(t,e),t=t.sibling}function Xv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_n(t,e),Fn(e),r&4){try{xa(3,e,e.return),xc(3,e)}catch(v){Ke(e,e.return,v)}try{xa(5,e,e.return)}catch(v){Ke(e,e.return,v)}}break;case 1:_n(t,e),Fn(e),r&512&&n!==null&&ai(n,n.return);break;case 5:if(_n(t,e),Fn(e),r&512&&n!==null&&ai(n,n.return),e.flags&32){var s=e.stateNode;try{Ra(s,"")}catch(v){Ke(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&xy(s,i),fd(l,a);var u=fd(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?ky(s,h):d==="dangerouslySetInnerHTML"?by(s,h):d==="children"?Ra(s,h):Zh(s,d,h,u)}switch(l){case"input":ld(s,i);break;case"textarea":yy(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?mi(s,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?mi(s,!!i.multiple,i.defaultValue,!0):mi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ua]=i}catch(v){Ke(e,e.return,v)}}break;case 6:if(_n(t,e),Fn(e),r&4){if(e.stateNode===null)throw Error(B(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Ke(e,e.return,v)}}break;case 3:if(_n(t,e),Fn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oa(t.containerInfo)}catch(v){Ke(e,e.return,v)}break;case 4:_n(t,e),Fn(e);break;case 13:_n(t,e),Fn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(If=Qe())),r&4&&ig(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ct=(u=Ct)||d,_n(t,e),Ct=u):_n(t,e),Fn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Z=e,d=e.child;d!==null;){for(h=Z=d;Z!==null;){switch(m=Z,f=m.child,m.tag){case 0:case 11:case 14:case 15:xa(4,m,m.return);break;case 1:ai(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Ke(r,n,v)}}break;case 5:ai(m,m.return);break;case 22:if(m.memoizedState!==null){og(h);continue}}f!==null?(f.return=m,Z=f):og(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=wy("display",a))}catch(v){Ke(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Ke(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_n(t,e),Fn(e),r&4&&ig(e);break;case 21:break;default:_n(t,e),Fn(e)}}function Fn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Gv(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ra(s,""),r.flags&=-33);var i=sg(e);Bd(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=sg(e);zd(e,l,a);break;default:throw Error(B(161))}}catch(c){Ke(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RS(e,t,n){Z=e,Jv(e)}function Jv(e,t,n){for(var r=(e.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Uo;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ct;l=Uo;var u=Ct;if(Uo=a,(Ct=c)&&!u)for(Z=s;Z!==null;)a=Z,c=a.child,a.tag===22&&a.memoizedState!==null?lg(s):c!==null?(c.return=a,Z=c):lg(s);for(;i!==null;)Z=i,Jv(i),i=i.sibling;Z=s,Uo=l,Ct=u}ag(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):ag(e)}}function ag(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ct||xc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Pn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Hp(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hp(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Oa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ct||t.flags&512&&Ud(t)}catch(m){Ke(t,t.return,m)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function og(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function lg(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xc(4,t)}catch(c){Ke(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ke(t,s,c)}}var i=t.return;try{Ud(t)}catch(c){Ke(t,i,c)}break;case 5:var a=t.return;try{Ud(t)}catch(c){Ke(t,a,c)}}}catch(c){Ke(t,t.return,c)}if(t===e){Z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Z=l;break}Z=t.return}}var IS=Math.ceil,Bl=yr.ReactCurrentDispatcher,Af=yr.ReactCurrentOwner,wn=yr.ReactCurrentBatchConfig,Ne=0,yt=null,st=null,kt=0,nn=0,oi=ts(0),ht=0,Ga=null,Ds=0,yc=0,Rf=0,ya=null,Bt=null,If=0,Pi=1/0,ir=null,Hl=!1,Hd=null,Wr=null,zo=!1,$r=null,Wl=0,va=0,Wd=null,hl=-1,fl=0;function Lt(){return Ne&6?Qe():hl!==-1?hl:hl=Qe()}function qr(e){return e.mode&1?Ne&2&&kt!==0?kt&-kt:gS.transition!==null?(fl===0&&(fl=Dy()),fl):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Uy(e.type)),e):1}function On(e,t,n,r){if(50<va)throw va=0,Wd=null,Error(B(185));uo(e,n,r),(!(Ne&2)||e!==yt)&&(e===yt&&(!(Ne&2)&&(yc|=n),ht===4&&Dr(e,kt)),Jt(e,r),n===1&&Ne===0&&!(t.mode&1)&&(Pi=Qe()+500,mc&&ns()))}function Jt(e,t){var n=e.callbackNode;gj(e,t);var r=Cl(e,e===yt?kt:0);if(r===0)n!==null&&xp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xp(n),t===1)e.tag===0?pS(cg.bind(null,e)):av(cg.bind(null,e)),dS(function(){!(Ne&6)&&ns()}),n=null;else{switch(Ly(r)){case 1:n=sf;break;case 4:n=Ry;break;case 16:n=El;break;case 536870912:n=Iy;break;default:n=El}n=sb(n,Yv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Yv(e,t){if(hl=-1,fl=0,Ne&6)throw Error(B(327));var n=e.callbackNode;if(vi()&&e.callbackNode!==n)return null;var r=Cl(e,e===yt?kt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ql(e,r);else{t=r;var s=Ne;Ne|=2;var i=Zv();(yt!==e||kt!==t)&&(ir=null,Pi=Qe()+500,_s(e,t));do try{OS();break}catch(l){Qv(e,l)}while(!0);yf(),Bl.current=i,Ne=s,st!==null?t=0:(yt=null,kt=0,t=ht)}if(t!==0){if(t===2&&(s=yd(e),s!==0&&(r=s,t=qd(e,s))),t===1)throw n=Ga,_s(e,0),Dr(e,r),Jt(e,Qe()),n;if(t===6)Dr(e,r);else{if(s=e.current.alternate,!(r&30)&&!DS(s)&&(t=ql(e,r),t===2&&(i=yd(e),i!==0&&(r=i,t=qd(e,i))),t===1))throw n=Ga,_s(e,0),Dr(e,r),Jt(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:ps(e,Bt,ir);break;case 3:if(Dr(e,r),(r&130023424)===r&&(t=If+500-Qe(),10<t)){if(Cl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Lt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=_d(ps.bind(null,e,Bt,ir),t);break}ps(e,Bt,ir);break;case 4:if(Dr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Ln(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IS(r/1960))-r,10<r){e.timeoutHandle=_d(ps.bind(null,e,Bt,ir),r);break}ps(e,Bt,ir);break;case 5:ps(e,Bt,ir);break;default:throw Error(B(329))}}}return Jt(e,Qe()),e.callbackNode===n?Yv.bind(null,e):null}function qd(e,t){var n=ya;return e.current.memoizedState.isDehydrated&&(_s(e,t).flags|=256),e=ql(e,t),e!==2&&(t=Bt,Bt=n,t!==null&&Gd(t)),e}function Gd(e){Bt===null?Bt=e:Bt.push.apply(Bt,e)}function DS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Mn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dr(e,t){for(t&=~Rf,t&=~yc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ln(t),r=1<<n;e[n]=-1,t&=~r}}function cg(e){if(Ne&6)throw Error(B(327));vi();var t=Cl(e,0);if(!(t&1))return Jt(e,Qe()),null;var n=ql(e,t);if(e.tag!==0&&n===2){var r=yd(e);r!==0&&(t=r,n=qd(e,r))}if(n===1)throw n=Ga,_s(e,0),Dr(e,t),Jt(e,Qe()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ps(e,Bt,ir),Jt(e,Qe()),null}function Df(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(Pi=Qe()+500,mc&&ns())}}function Ls(e){$r!==null&&$r.tag===0&&!(Ne&6)&&vi();var t=Ne;Ne|=1;var n=wn.transition,r=Te;try{if(wn.transition=null,Te=1,e)return e()}finally{Te=r,wn.transition=n,Ne=t,!(Ne&6)&&ns()}}function Lf(){nn=oi.current,$e(oi)}function _s(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uS(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(pf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Il();break;case 3:Ei(),$e(Kt),$e(Tt),Sf();break;case 5:jf(r);break;case 4:Ei();break;case 13:$e(Ve);break;case 19:$e(Ve);break;case 10:vf(r.type._context);break;case 22:case 23:Lf()}n=n.return}if(yt=e,st=e=Gr(e.current,null),kt=nn=t,ht=0,Ga=null,Rf=yc=Ds=0,Bt=ya=null,ws!==null){for(t=0;t<ws.length;t++)if(n=ws[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}ws=null}return e}function Qv(e,t){do{var n=st;try{if(yf(),cl.current=zl,Ul){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ul=!1}if(Is=0,pt=dt=Be=null,ga=!1,Ha=0,Af.current=null,n===null||n.return===null){ht=1,Ga=t,st=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=kt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Jp(a);if(f!==null){f.flags&=-257,Yp(f,a,l,i,t),f.mode&1&&Xp(i,u,t),t=f,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){Xp(i,u,t),Of();break e}c=Error(B(426))}}else if(Me&&l.mode&1){var k=Jp(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Yp(k,a,l,i,t),gf(Ci(c,l));break e}}i=c=Ci(c,l),ht!==4&&(ht=2),ya===null?ya=[i]:ya.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=Lv(i,c,t);Bp(i,x);break e;case 1:l=c;var y=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Wr===null||!Wr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=Ov(i,l,t);Bp(i,S);break e}}i=i.return}while(i!==null)}tb(n)}catch(E){t=E,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function Zv(){var e=Bl.current;return Bl.current=zl,e===null?zl:e}function Of(){(ht===0||ht===3||ht===2)&&(ht=4),yt===null||!(Ds&268435455)&&!(yc&268435455)||Dr(yt,kt)}function ql(e,t){var n=Ne;Ne|=2;var r=Zv();(yt!==e||kt!==t)&&(ir=null,_s(e,t));do try{LS();break}catch(s){Qv(e,s)}while(!0);if(yf(),Ne=n,Bl.current=r,st!==null)throw Error(B(261));return yt=null,kt=0,ht}function LS(){for(;st!==null;)eb(st)}function OS(){for(;st!==null&&!oj();)eb(st)}function eb(e){var t=rb(e.alternate,e,nn);e.memoizedProps=e.pendingProps,t===null?tb(e):st=t,Af.current=null}function tb(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=PS(n,t),n!==null){n.flags&=32767,st=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ht=6,st=null;return}}else if(n=CS(n,t,nn),n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);ht===0&&(ht=5)}function ps(e,t,n){var r=Te,s=wn.transition;try{wn.transition=null,Te=1,$S(e,t,n,r)}finally{wn.transition=s,Te=r}return null}function $S(e,t,n,r){do vi();while($r!==null);if(Ne&6)throw Error(B(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(xj(e,i),e===yt&&(st=yt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zo||(zo=!0,sb(El,function(){return vi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wn.transition,wn.transition=null;var a=Te;Te=1;var l=Ne;Ne|=4,Af.current=null,AS(e,n),Xv(n,e),rS(Sd),Pl=!!jd,Sd=jd=null,e.current=n,RS(n),lj(),Ne=l,Te=a,wn.transition=i}else e.current=n;if(zo&&(zo=!1,$r=e,Wl=s),i=e.pendingLanes,i===0&&(Wr=null),dj(n.stateNode),Jt(e,Qe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Hd,Hd=null,e;return Wl&1&&e.tag!==0&&vi(),i=e.pendingLanes,i&1?e===Wd?va++:(va=0,Wd=e):va=0,ns(),null}function vi(){if($r!==null){var e=Ly(Wl),t=wn.transition,n=Te;try{if(wn.transition=null,Te=16>e?16:e,$r===null)var r=!1;else{if(e=$r,$r=null,Wl=0,Ne&6)throw Error(B(331));var s=Ne;for(Ne|=4,Z=e.current;Z!==null;){var i=Z,a=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:xa(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var m=d.sibling,f=d.return;if(qv(d),d===u){Z=null;break}if(m!==null){m.return=f,Z=m;break}Z=f}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}Z=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Z=a;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xa(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Z=x;break e}Z=i.return}}var y=e.current;for(Z=y;Z!==null;){a=Z;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,Z=p;else e:for(a=y;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xc(9,l)}}catch(E){Ke(l,l.return,E)}if(l===a){Z=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,Z=S;break e}Z=l.return}}if(Ne=s,ns(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(cc,e)}catch{}r=!0}return r}finally{Te=n,wn.transition=t}}return!1}function ug(e,t,n){t=Ci(n,t),t=Lv(e,t,1),e=Hr(e,t,1),t=Lt(),e!==null&&(uo(e,1,t),Jt(e,t))}function Ke(e,t,n){if(e.tag===3)ug(e,e,n);else for(;t!==null;){if(t.tag===3){ug(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){e=Ci(n,e),e=Ov(t,e,1),t=Hr(t,e,1),e=Lt(),t!==null&&(uo(t,1,e),Jt(t,e));break}}t=t.return}}function MS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Lt(),e.pingedLanes|=e.suspendedLanes&n,yt===e&&(kt&n)===n&&(ht===4||ht===3&&(kt&130023424)===kt&&500>Qe()-If?_s(e,0):Rf|=n),Jt(e,t)}function nb(e,t){t===0&&(e.mode&1?(t=Ro,Ro<<=1,!(Ro&130023424)&&(Ro=4194304)):t=1);var n=Lt();e=fr(e,t),e!==null&&(uo(e,t,n),Jt(e,n))}function FS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nb(e,n)}function VS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),nb(e,n)}var rb;rb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kt.current)qt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return qt=!1,ES(e,t,n);qt=!!(e.flags&131072)}else qt=!1,Me&&t.flags&1048576&&ov(t,Ol,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;dl(e,t),e=t.pendingProps;var s=Si(t,Tt.current);yi(t,n),s=_f(null,t,r,e,s,n);var i=Ef();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xt(r)?(i=!0,Dl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wf(t),s.updater=gc,t.stateNode=s,s._reactInternals=t,Id(t,r,e,n),t=Od(null,t,r,!0,i,n)):(t.tag=0,Me&&i&&mf(t),It(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(dl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=zS(r),e=Pn(r,e),s){case 0:t=Ld(null,t,r,e,n);break e;case 1:t=eg(null,t,r,e,n);break e;case 11:t=Qp(null,t,r,e,n);break e;case 14:t=Zp(null,t,r,Pn(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pn(r,s),Ld(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pn(r,s),eg(e,t,r,s,n);case 3:e:{if(Vv(t),e===null)throw Error(B(387));r=t.pendingProps,i=t.memoizedState,s=i.element,fv(e,t),Fl(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ci(Error(B(423)),t),t=tg(e,t,r,n,s);break e}else if(r!==s){s=Ci(Error(B(424)),t),t=tg(e,t,r,n,s);break e}else for(rn=Br(t.stateNode.containerInfo.firstChild),an=t,Me=!0,In=null,n=dv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ni(),r===s){t=mr(e,t,n);break e}It(e,t,r,n)}t=t.child}return t;case 5:return mv(t),e===null&&Td(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Nd(r,s)?a=null:i!==null&&Nd(r,i)&&(t.flags|=32),Fv(e,t),It(e,t,a,n),t.child;case 6:return e===null&&Td(t),null;case 13:return Uv(e,t,n);case 4:return kf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_i(t,null,r,n):It(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pn(r,s),Qp(e,t,r,s,n);case 7:return It(e,t,t.pendingProps,n),t.child;case 8:return It(e,t,t.pendingProps.children,n),t.child;case 12:return It(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,De($l,r._currentValue),r._currentValue=a,i!==null)if(Mn(i.value,a)){if(i.children===s.children&&!Kt.current){t=mr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ur(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ad(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(B(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ad(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}It(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,yi(t,n),s=jn(s),r=r(s),t.flags|=1,It(e,t,r,n),t.child;case 14:return r=t.type,s=Pn(r,t.pendingProps),s=Pn(r.type,s),Zp(e,t,r,s,n);case 15:return $v(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pn(r,s),dl(e,t),t.tag=1,Xt(r)?(e=!0,Dl(t)):e=!1,yi(t,n),Dv(t,r,s),Id(t,r,s,n),Od(null,t,r,!0,e,n);case 19:return zv(e,t,n);case 22:return Mv(e,t,n)}throw Error(B(156,t.tag))};function sb(e,t){return Ay(e,t)}function US(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,n,r){return new US(e,t,n,r)}function $f(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zS(e){if(typeof e=="function")return $f(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tf)return 11;if(e===nf)return 14}return 2}function Gr(e,t){var n=e.alternate;return n===null?(n=bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ml(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")$f(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ys:return Es(n.children,s,i,t);case ef:a=8,s|=8;break;case rd:return e=bn(12,n,t,s|2),e.elementType=rd,e.lanes=i,e;case sd:return e=bn(13,n,t,s),e.elementType=sd,e.lanes=i,e;case id:return e=bn(19,n,t,s),e.elementType=id,e.lanes=i,e;case my:return vc(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hy:a=10;break e;case fy:a=9;break e;case tf:a=11;break e;case nf:a=14;break e;case Ar:a=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=bn(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Es(e,t,n,r){return e=bn(7,e,r,t),e.lanes=n,e}function vc(e,t,n,r){return e=bn(22,e,r,t),e.elementType=my,e.lanes=n,e.stateNode={isHidden:!1},e}function hu(e,t,n){return e=bn(6,e,null,t),e.lanes=n,e}function fu(e,t,n){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BS(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gc(0),this.expirationTimes=Gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mf(e,t,n,r,s,i,a,l,c){return e=new BS(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=bn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wf(i),e}function HS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ib(e){if(!e)return Yr;e=e._reactInternals;e:{if(Ms(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(Xt(n))return iv(e,n,t)}return t}function ab(e,t,n,r,s,i,a,l,c){return e=Mf(n,r,!0,e,s,i,a,l,c),e.context=ib(null),n=e.current,r=Lt(),s=qr(n),i=ur(r,s),i.callback=t??null,Hr(n,i,s),e.current.lanes=s,uo(e,s,r),Jt(e,r),e}function bc(e,t,n,r){var s=t.current,i=Lt(),a=qr(s);return n=ib(n),t.context===null?t.context=n:t.pendingContext=n,t=ur(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Hr(s,t,a),e!==null&&(On(e,s,a,i),ll(e,s,a)),a}function Gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ff(e,t){dg(e,t),(e=e.alternate)&&dg(e,t)}function WS(){return null}var ob=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vf(e){this._internalRoot=e}wc.prototype.render=Vf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));bc(e,t,null,null)};wc.prototype.unmount=Vf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ls(function(){bc(null,e,null,null)}),t[hr]=null}};function wc(e){this._internalRoot=e}wc.prototype.unstable_scheduleHydration=function(e){if(e){var t=My();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ir.length&&t!==0&&t<Ir[n].priority;n++);Ir.splice(n,0,e),n===0&&Vy(e)}};function Uf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hg(){}function qS(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Gl(a);i.call(u)}}var a=ab(t,r,e,0,null,!1,!1,"",hg);return e._reactRootContainer=a,e[hr]=a.current,Fa(e.nodeType===8?e.parentNode:e),Ls(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Gl(c);l.call(u)}}var c=Mf(e,0,!1,null,null,!1,!1,"",hg);return e._reactRootContainer=c,e[hr]=c.current,Fa(e.nodeType===8?e.parentNode:e),Ls(function(){bc(t,c,n,r)}),c}function jc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Gl(a);l.call(c)}}bc(t,a,e,s)}else a=qS(n,t,e,s,r);return Gl(a)}Oy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=oa(t.pendingLanes);n!==0&&(af(t,n|1),Jt(t,Qe()),!(Ne&6)&&(Pi=Qe()+500,ns()))}break;case 13:Ls(function(){var r=fr(e,1);if(r!==null){var s=Lt();On(r,e,1,s)}}),Ff(e,1)}};of=function(e){if(e.tag===13){var t=fr(e,134217728);if(t!==null){var n=Lt();On(t,e,134217728,n)}Ff(e,134217728)}};$y=function(e){if(e.tag===13){var t=qr(e),n=fr(e,t);if(n!==null){var r=Lt();On(n,e,t,r)}Ff(e,t)}};My=function(){return Te};Fy=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};pd=function(e,t,n){switch(t){case"input":if(ld(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=fc(r);if(!s)throw Error(B(90));gy(r),ld(r,s)}}}break;case"textarea":yy(e,n);break;case"select":t=n.value,t!=null&&mi(e,!!n.multiple,t,!1)}};Ny=Df;_y=Ls;var GS={usingClientEntryPoint:!1,Events:[fo,ti,fc,jy,Sy,Df]},ea={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KS={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Py(e),e===null?null:e.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||WS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{cc=Bo.inject(KS),qn=Bo}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GS;cn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uf(t))throw Error(B(200));return HS(e,t,null,n)};cn.createRoot=function(e,t){if(!Uf(e))throw Error(B(299));var n=!1,r="",s=ob;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Mf(e,1,!1,null,null,n,!1,r,s),e[hr]=t.current,Fa(e.nodeType===8?e.parentNode:e),new Vf(t)};cn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=Py(t),e=e===null?null:e.stateNode,e};cn.flushSync=function(e){return Ls(e)};cn.hydrate=function(e,t,n){if(!kc(t))throw Error(B(200));return jc(null,e,t,!0,n)};cn.hydrateRoot=function(e,t,n){if(!Uf(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=ob;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ab(t,null,e,1,n??null,s,!1,i,a),e[hr]=t.current,Fa(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new wc(t)};cn.render=function(e,t,n){if(!kc(t))throw Error(B(200));return jc(null,e,t,!1,n)};cn.unmountComponentAtNode=function(e){if(!kc(e))throw Error(B(40));return e._reactRootContainer?(Ls(function(){jc(null,null,e,!1,function(){e._reactRootContainer=null,e[hr]=null})}),!0):!1};cn.unstable_batchedUpdates=Df;cn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kc(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return jc(e,t,n,!1,r)};cn.version="18.3.1-next-f1338f8080-20240426";function lb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lb)}catch(e){console.error(e)}}lb(),ly.exports=cn;var XS=ly.exports,fg=XS;td.createRoot=fg.createRoot,td.hydrateRoot=fg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka.apply(this,arguments)}var Mr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mr||(Mr={}));const mg="popstate";function JS(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return Kd("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Kl(s)}return QS(t,n,null,e)}function He(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function cb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function YS(){return Math.random().toString(36).substr(2,8)}function pg(e,t){return{usr:e.state,key:e.key,idx:t}}function Kd(e,t,n,r){return n===void 0&&(n=null),Ka({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$i(t):t,{state:n,key:t&&t.key||r||YS()})}function Kl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function $i(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function QS(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=Mr.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Ka({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Mr.Pop;let k=d(),x=k==null?null:k-u;u=k,c&&c({action:l,location:v.location,delta:x})}function m(k,x){l=Mr.Push;let y=Kd(v.location,k,x);u=d()+1;let p=pg(y,u),S=v.createHref(y);try{a.pushState(p,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(S)}i&&c&&c({action:l,location:v.location,delta:1})}function f(k,x){l=Mr.Replace;let y=Kd(v.location,k,x);u=d();let p=pg(y,u),S=v.createHref(y);a.replaceState(p,"",S),i&&c&&c({action:l,location:v.location,delta:0})}function g(k){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof k=="string"?k:Kl(k);return y=y.replace(/ $/,"%20"),He(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let v={get action(){return l},get location(){return e(s,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(mg,h),c=k,()=>{s.removeEventListener(mg,h),c=null}},createHref(k){return t(s,k)},createURL:g,encodeLocation(k){let x=g(k);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:f,go(k){return a.go(k)}};return v}var gg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gg||(gg={}));function ZS(e,t,n){return n===void 0&&(n="/"),eN(e,t,n)}function eN(e,t,n,r){let s=typeof t=="string"?$i(t):t,i=Ti(s.pathname||"/",n);if(i==null)return null;let a=ub(e);tN(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=hN(i);l=uN(a[c],u)}return l}function ub(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(He(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Kr([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(He(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ub(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:lN(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of db(i.path))s(i,a,c)}),t}function db(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=db(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function tN(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:cN(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const nN=/^:[\w-]+$/,rN=3,sN=2,iN=1,aN=10,oN=-2,xg=e=>e==="*";function lN(e,t){let n=e.split("/"),r=n.length;return n.some(xg)&&(r+=oN),t&&(r+=sN),n.filter(s=>!xg(s)).reduce((s,i)=>s+(nN.test(i)?rN:i===""?iN:aN),r)}function cN(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function uN(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Xd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Kr([i,h.pathname]),pathnameBase:gN(Kr([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Kr([i,h.pathnameBase]))}return a}function Xd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=dN(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:f}=d;if(m==="*"){let v=l[h]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[h];return f&&!g?u[m]=void 0:u[m]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function dN(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),cb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function hN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ti(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function fN(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?$i(e):e;return{pathname:n?n.startsWith("/")?n:mN(n,t):t,search:xN(r),hash:yN(s)}}function mN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function mu(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pN(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function zf(e,t){let n=pN(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Bf(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=$i(e):(s=Ka({},e),He(!s.pathname||!s.pathname.includes("?"),mu("?","pathname","search",s)),He(!s.pathname||!s.pathname.includes("#"),mu("#","pathname","hash",s)),He(!s.search||!s.search.includes("#"),mu("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=fN(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Kr=e=>e.join("/").replace(/\/\/+/g,"/"),gN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),xN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yN=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vN(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const hb=["post","put","patch","delete"];new Set(hb);const bN=["get",...hb];new Set(bN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}const Sc=j.createContext(null),fb=j.createContext(null),vr=j.createContext(null),Nc=j.createContext(null),Zn=j.createContext({outlet:null,matches:[],isDataRoute:!1}),mb=j.createContext(null);function wN(e,t){let{relative:n}=t===void 0?{}:t;Mi()||He(!1);let{basename:r,navigator:s}=j.useContext(vr),{hash:i,pathname:a,search:l}=_c(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Kr([r,a])),s.createHref({pathname:c,search:l,hash:i})}function Mi(){return j.useContext(Nc)!=null}function er(){return Mi()||He(!1),j.useContext(Nc).location}function pb(e){j.useContext(vr).static||j.useLayoutEffect(e)}function br(){let{isDataRoute:e}=j.useContext(Zn);return e?ON():kN()}function kN(){Mi()||He(!1);let e=j.useContext(Sc),{basename:t,future:n,navigator:r}=j.useContext(vr),{matches:s}=j.useContext(Zn),{pathname:i}=er(),a=JSON.stringify(zf(s,n.v7_relativeSplatPath)),l=j.useRef(!1);return pb(()=>{l.current=!0}),j.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=Bf(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Kr([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,a,i,e])}const jN=j.createContext(null);function SN(e){let t=j.useContext(Zn).outlet;return t&&j.createElement(jN.Provider,{value:e},t)}function po(){let{matches:e}=j.useContext(Zn),t=e[e.length-1];return t?t.params:{}}function _c(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=j.useContext(vr),{matches:s}=j.useContext(Zn),{pathname:i}=er(),a=JSON.stringify(zf(s,r.v7_relativeSplatPath));return j.useMemo(()=>Bf(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function NN(e,t){return _N(e,t)}function _N(e,t,n,r){Mi()||He(!1);let{navigator:s}=j.useContext(vr),{matches:i}=j.useContext(Zn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=er(),d;if(t){var h;let k=typeof t=="string"?$i(t):t;c==="/"||(h=k.pathname)!=null&&h.startsWith(c)||He(!1),d=k}else d=u;let m=d.pathname||"/",f=m;if(c!=="/"){let k=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let g=ZS(e,{pathname:f}),v=AN(g&&g.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Kr([c,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:Kr([c,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return t&&v?j.createElement(Nc.Provider,{value:{location:Xa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Mr.Pop}},v):v}function EN(){let e=LN(),t=vN(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:s},n):null,null)}const CN=j.createElement(EN,null);class PN extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement(Zn.Provider,{value:this.props.routeContext},j.createElement(mb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TN(e){let{routeContext:t,match:n,children:r}=e,s=j.useContext(Sc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Zn.Provider,{value:t},r)}function AN(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||He(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:f}=n,g=h.route.loader&&m[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,m)=>{let f,g=!1,v=null,k=null;n&&(f=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||CN,c&&(u<0&&m===0?($N("route-fallback"),g=!0,k=null):u===m&&(g=!0,k=h.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,m+1)),y=()=>{let p;return f?p=v:g?p=k:h.route.Component?p=j.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=d,j.createElement(TN,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:p})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?j.createElement(PN,{location:n.location,revalidation:n.revalidation,component:v,error:f,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var gb=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(gb||{}),xb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(xb||{});function RN(e){let t=j.useContext(Sc);return t||He(!1),t}function IN(e){let t=j.useContext(fb);return t||He(!1),t}function DN(e){let t=j.useContext(Zn);return t||He(!1),t}function yb(e){let t=DN(),n=t.matches[t.matches.length-1];return n.route.id||He(!1),n.route.id}function LN(){var e;let t=j.useContext(mb),n=IN(),r=yb();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function ON(){let{router:e}=RN(gb.UseNavigateStable),t=yb(xb.UseNavigateStable),n=j.useRef(!1);return pb(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Xa({fromRouteId:t},i)))},[e,t])}const yg={};function $N(e,t,n){yg[e]||(yg[e]=!0)}function MN(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function FN(e){let{to:t,replace:n,state:r,relative:s}=e;Mi()||He(!1);let{future:i,static:a}=j.useContext(vr),{matches:l}=j.useContext(Zn),{pathname:c}=er(),u=br(),d=Bf(t,zf(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return j.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function VN(e){return SN(e.context)}function lt(e){He(!1)}function UN(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Mr.Pop,navigator:i,static:a=!1,future:l}=e;Mi()&&He(!1);let c=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:i,static:a,future:Xa({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=$i(r));let{pathname:d="/",search:h="",hash:m="",state:f=null,key:g="default"}=r,v=j.useMemo(()=>{let k=Ti(d,c);return k==null?null:{location:{pathname:k,search:h,hash:m,state:f,key:g},navigationType:s}},[c,d,h,m,f,g,s]);return v==null?null:j.createElement(vr.Provider,{value:u},j.createElement(Nc.Provider,{children:n,value:v}))}function zN(e){let{children:t,location:n}=e;return NN(Jd(t),n)}new Promise(()=>{});function Jd(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,s)=>{if(!j.isValidElement(r))return;let i=[...t,s];if(r.type===j.Fragment){n.push.apply(n,Jd(r.props.children,i));return}r.type!==lt&&He(!1),!r.props.index||!r.props.children||He(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Jd(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xl.apply(this,arguments)}function vb(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function BN(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function HN(e,t){return e.button===0&&(!t||t==="_self")&&!BN(e)}const WN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],GN="6";try{window.__reactRouterVersion=GN}catch{}const KN=j.createContext({isTransitioning:!1}),XN="startTransition",vg=M1[XN];function JN(e){let{basename:t,children:n,future:r,window:s}=e,i=j.useRef();i.current==null&&(i.current=JS({window:s,v5Compat:!0}));let a=i.current,[l,c]=j.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=j.useCallback(h=>{u&&vg?vg(()=>c(h)):c(h)},[c,u]);return j.useLayoutEffect(()=>a.listen(d),[a,d]),j.useEffect(()=>MN(r),[r]),j.createElement(UN,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const YN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$n=j.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=vb(t,WN),{basename:f}=j.useContext(vr),g,v=!1;if(typeof u=="string"&&QN.test(u)&&(g=u,YN))try{let p=new URL(window.location.href),S=u.startsWith("//")?new URL(p.protocol+u):new URL(u),E=Ti(S.pathname,f);S.origin===p.origin&&E!=null?u=E+S.search+S.hash:v=!0}catch{}let k=wN(u,{relative:s}),x=t2(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function y(p){r&&r(p),p.defaultPrevented||x(p)}return j.createElement("a",Xl({},m,{href:g||k,onClick:v||i?r:y,ref:n,target:c}))}),ZN=j.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=t,h=vb(t,qN),m=_c(c,{relative:h.relative}),f=er(),g=j.useContext(fb),{navigator:v,basename:k}=j.useContext(vr),x=g!=null&&n2(m)&&u===!0,y=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,p=f.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(p=p.toLowerCase(),S=S?S.toLowerCase():null,y=y.toLowerCase()),S&&k&&(S=Ti(S,k)||S);const E=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let N=p===y||!a&&p.startsWith(y)&&p.charAt(E)==="/",P=S!=null&&(S===y||!a&&S.startsWith(y)&&S.charAt(y.length)==="/"),T={isActive:N,isPending:P,isTransitioning:x},O=N?r:void 0,D;typeof i=="function"?D=i(T):D=[i,N?"active":null,P?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(T):l;return j.createElement($n,Xl({},h,{"aria-current":O,className:D,ref:n,style:M,to:c,viewTransition:u}),typeof d=="function"?d(T):d)});var Yd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Yd||(Yd={}));var bg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(bg||(bg={}));function e2(e){let t=j.useContext(Sc);return t||He(!1),t}function t2(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=br(),u=er(),d=_c(e,{relative:a});return j.useCallback(h=>{if(HN(h,n)){h.preventDefault();let m=r!==void 0?r:Kl(u)===Kl(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,i,a,l])}function n2(e,t){t===void 0&&(t={});let n=j.useContext(KN);n==null&&He(!1);let{basename:r}=e2(Yd.useViewTransitionState),s=_c(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Ti(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Ti(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Xd(s.pathname,a)!=null||Xd(s.pathname,i)!=null}function r2(e,t={}){const n=j.useRef(null),r=j.useRef(null),s=j.useRef(0),i=t.maxReconnectAttempts||10,a=t.reconnectDelay||3e3,l=()=>{try{n.current=new WebSocket(e),n.current.onopen=c=>{console.log("WebSocket connected"),s.current=0,t.onOpen&&t.onOpen(c)},n.current.onmessage=c=>{t.onMessage&&t.onMessage(c)},n.current.onerror=c=>{console.error("WebSocket error:",c),t.onError&&t.onError(c)},n.current.onclose=c=>{console.log("WebSocket closed"),t.onClose&&t.onClose(c),s.current<i&&(s.current++,console.log(`Reconnecting... (attempt ${s.current}/${i})`),r.current=setTimeout(()=>{l()},a))}}catch(c){console.error("Failed to create WebSocket:",c)}};return j.useEffect(()=>(l(),()=>{r.current&&clearTimeout(r.current),n.current&&n.current.close()}),[e]),n.current}function bb(e,t){const[n,r]=j.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return j.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch(i){console.error(`Error saving to localStorage key "${e}":`,i)}},[e,n]),[n,i=>{try{const a=i instanceof Function?i(n):i;r(a)}catch(a){console.error(`Error setting localStorage key "${e}":`,a)}}]}function s2(){const[e,t]=bb("leo-dashboard-preferences",{theme:"light",sidebarCollapsed:!1,refreshInterval:3e4,notifications:!0,compactView:!1});return{preferences:e,updatePreference:(r,s)=>{t(i=>({...i,[r]:s}))}}}function pu(e,t){const[n,r]=bb(`leo-dashboard-${e}`,t);return[n,r,()=>{window.localStorage.removeItem(`leo-dashboard-${e}`),r(t)}]}const Hf=j.createContext({});function Wf(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const qf=typeof window<"u",wb=qf?j.useLayoutEffect:j.useEffect,Ec=j.createContext(null);function Gf(e,t){e.indexOf(t)===-1&&e.push(t)}function Kf(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const pr=(e,t,n)=>n>t?t:n<e?e:n;let Xf=()=>{};const gr={},kb=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function jb(e){return typeof e=="object"&&e!==null}const Sb=e=>/^0[^.\s]+$/u.test(e);function Jf(e){let t;return()=>(t===void 0&&(t=e()),t)}const kn=e=>e,i2=(e,t)=>n=>t(e(n)),go=(...e)=>e.reduce(i2),Ja=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Yf{constructor(){this.subscriptions=[]}add(t){return Gf(this.subscriptions,t),()=>Kf(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Kn=e=>e*1e3,Xn=e=>e/1e3;function Nb(e,t){return t?e*(1e3/t):0}const _b=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,a2=1e-7,o2=12;function l2(e,t,n,r,s){let i,a,l=0;do a=t+(n-t)/2,i=_b(a,r,s)-e,i>0?n=a:t=a;while(Math.abs(i)>a2&&++l<o2);return a}function xo(e,t,n,r){if(e===t&&n===r)return kn;const s=i=>l2(i,0,1,e,n);return i=>i===0||i===1?i:_b(s(i),t,r)}const Eb=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Cb=e=>t=>1-e(1-t),Pb=xo(.33,1.53,.69,.99),Qf=Cb(Pb),Tb=Eb(Qf),Ab=e=>(e*=2)<1?.5*Qf(e):.5*(2-Math.pow(2,-10*(e-1))),Zf=e=>1-Math.sin(Math.acos(e)),Rb=Cb(Zf),Ib=Eb(Zf),c2=xo(.42,0,1,1),u2=xo(0,0,.58,1),Db=xo(.42,0,.58,1),d2=e=>Array.isArray(e)&&typeof e[0]!="number",Lb=e=>Array.isArray(e)&&typeof e[0]=="number",h2={linear:kn,easeIn:c2,easeInOut:Db,easeOut:u2,circIn:Zf,circInOut:Ib,circOut:Rb,backIn:Qf,backInOut:Tb,backOut:Pb,anticipate:Ab},f2=e=>typeof e=="string",wg=e=>{if(Lb(e)){Xf(e.length===4);const[t,n,r,s]=e;return xo(t,n,r,s)}else if(f2(e))return h2[e];return e},Ho=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function m2(e,t){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){a.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,h=!1,m=!1)=>{const g=m&&s?n:r;return h&&a.add(d),g.has(d)||g.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(l=d,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const p2=40;function Ob(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=Ho.reduce((p,S)=>(p[S]=m2(i),p),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:m,render:f,postRender:g}=a,v=()=>{const p=gr.useManualTiming?s.timestamp:performance.now();n=!1,gr.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(p-s.timestamp,p2),1)),s.timestamp=p,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),m.process(s),f.process(s),g.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(v))},k=()=>{n=!0,r=!0,s.isProcessing||e(v)};return{schedule:Ho.reduce((p,S)=>{const E=a[S];return p[S]=(N,P=!1,T=!1)=>(n||k(),E.schedule(N,P,T)),p},{}),cancel:p=>{for(let S=0;S<Ho.length;S++)a[Ho[S]].cancel(p)},state:s,steps:a}}const{schedule:Fe,cancel:Qr,state:wt,steps:gu}=Ob(typeof requestAnimationFrame<"u"?requestAnimationFrame:kn,!0);let pl;function g2(){pl=void 0}const Gt={now:()=>(pl===void 0&&Gt.set(wt.isProcessing||gr.useManualTiming?wt.timestamp:performance.now()),pl),set:e=>{pl=e,queueMicrotask(g2)}},$b=e=>t=>typeof t=="string"&&t.startsWith(e),em=$b("--"),x2=$b("var(--"),tm=e=>x2(e)?y2.test(e.split("/*")[0].trim()):!1,y2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ya={...Fi,transform:e=>pr(0,1,e)},Wo={...Fi,default:1},ba=e=>Math.round(e*1e5)/1e5,nm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function v2(e){return e==null}const b2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rm=(e,t)=>n=>!!(typeof n=="string"&&b2.test(n)&&n.startsWith(e)||t&&!v2(n)&&Object.prototype.hasOwnProperty.call(n,t)),Mb=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,l]=r.match(nm);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},w2=e=>pr(0,255,e),xu={...Fi,transform:e=>Math.round(w2(e))},js={test:rm("rgb","red"),parse:Mb("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+xu.transform(e)+", "+xu.transform(t)+", "+xu.transform(n)+", "+ba(Ya.transform(r))+")"};function k2(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Qd={test:rm("#"),parse:k2,transform:js.transform},yo=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Pr=yo("deg"),Jn=yo("%"),ue=yo("px"),j2=yo("vh"),S2=yo("vw"),kg={...Jn,parse:e=>Jn.parse(e)/100,transform:e=>Jn.transform(e*100)},li={test:rm("hsl","hue"),parse:Mb("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Jn.transform(ba(t))+", "+Jn.transform(ba(n))+", "+ba(Ya.transform(r))+")"},rt={test:e=>js.test(e)||Qd.test(e)||li.test(e),parse:e=>js.test(e)?js.parse(e):li.test(e)?li.parse(e):Qd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?js.transform(e):li.transform(e),getAnimatableNone:e=>{const t=rt.parse(e);return t.alpha=0,rt.transform(t)}},N2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _2(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(nm))==null?void 0:t.length)||0)+(((n=e.match(N2))==null?void 0:n.length)||0)>0}const Fb="number",Vb="color",E2="var",C2="var(",jg="${}",P2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qa(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(P2,c=>(rt.test(c)?(r.color.push(i),s.push(Vb),n.push(rt.parse(c))):c.startsWith(C2)?(r.var.push(i),s.push(E2),n.push(c)):(r.number.push(i),s.push(Fb),n.push(parseFloat(c))),++i,jg)).split(jg);return{values:n,split:l,indexes:r,types:s}}function Ub(e){return Qa(e).values}function zb(e){const{split:t,types:n}=Qa(e),r=t.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],s[a]!==void 0){const l=n[a];l===Fb?i+=ba(s[a]):l===Vb?i+=rt.transform(s[a]):i+=s[a]}return i}}const T2=e=>typeof e=="number"?0:rt.test(e)?rt.getAnimatableNone(e):e;function A2(e){const t=Ub(e);return zb(e)(t.map(T2))}const Zr={test:_2,parse:Ub,createTransformer:zb,getAnimatableNone:A2};function yu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function R2({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=yu(c,l,e+1/3),i=yu(c,l,e),a=yu(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Jl(e,t){return n=>n>0?t:e}const Ue=(e,t,n)=>e+(t-e)*n,vu=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},I2=[Qd,js,li],D2=e=>I2.find(t=>t.test(e));function Sg(e){const t=D2(e);if(!t)return!1;let n=t.parse(e);return t===li&&(n=R2(n)),n}const Ng=(e,t)=>{const n=Sg(e),r=Sg(t);if(!n||!r)return Jl(e,t);const s={...n};return i=>(s.red=vu(n.red,r.red,i),s.green=vu(n.green,r.green,i),s.blue=vu(n.blue,r.blue,i),s.alpha=Ue(n.alpha,r.alpha,i),js.transform(s))},Zd=new Set(["none","hidden"]);function L2(e,t){return Zd.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function O2(e,t){return n=>Ue(e,t,n)}function sm(e){return typeof e=="number"?O2:typeof e=="string"?tm(e)?Jl:rt.test(e)?Ng:F2:Array.isArray(e)?Bb:typeof e=="object"?rt.test(e)?Ng:$2:Jl}function Bb(e,t){const n=[...e],r=n.length,s=e.map((i,a)=>sm(i)(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function $2(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=sm(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function M2(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][r[i]],l=e.values[a]??0;n[s]=l,r[i]++}return n}const F2=(e,t)=>{const n=Zr.createTransformer(t),r=Qa(e),s=Qa(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Zd.has(e)&&!s.values.length||Zd.has(t)&&!r.values.length?L2(e,t):go(Bb(M2(r,s),s.values),n):Jl(e,t)};function Hb(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ue(e,t,n):sm(e)(e,t)}const V2=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Fe.update(t,n),stop:()=>Qr(t),now:()=>wt.isProcessing?wt.timestamp:Gt.now()}},Wb=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Yl=2e4;function im(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Yl;)t+=n,r=e.next(t);return t>=Yl?1/0:t}function U2(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(im(r),Yl);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:Xn(s)}}const z2=5;function qb(e,t,n){const r=Math.max(t-z2,0);return Nb(n-e(r),t-r)}const Ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bu=.001;function B2({duration:e=Ge.duration,bounce:t=Ge.bounce,velocity:n=Ge.velocity,mass:r=Ge.mass}){let s,i,a=1-t;a=pr(Ge.minDamping,Ge.maxDamping,a),e=pr(Ge.minDuration,Ge.maxDuration,Xn(e)),a<1?(s=u=>{const d=u*a,h=d*e,m=d-n,f=eh(u,a),g=Math.exp(-h);return bu-m/f*g},i=u=>{const h=u*a*e,m=h*n+n,f=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-h),v=eh(Math.pow(u,2),a);return(-s(u)+bu>0?-1:1)*((m-f)*g)/v}):(s=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-bu+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=W2(s,i,l);if(e=Kn(e),isNaN(c))return{stiffness:Ge.stiffness,damping:Ge.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const H2=12;function W2(e,t,n){let r=n;for(let s=1;s<H2;s++)r=r-e(r)/t(r);return r}function eh(e,t){return e*Math.sqrt(1-t*t)}const q2=["duration","bounce"],G2=["stiffness","damping","mass"];function _g(e,t){return t.some(n=>e[n]!==void 0)}function K2(e){let t={velocity:Ge.velocity,stiffness:Ge.stiffness,damping:Ge.damping,mass:Ge.mass,isResolvedFromDuration:!1,...e};if(!_g(e,G2)&&_g(e,q2))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*pr(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ge.mass,stiffness:s,damping:i}}else{const n=B2(e);t={...t,...n,mass:Ge.mass},t.isResolvedFromDuration=!0}return t}function Ql(e=Ge.visualDuration,t=Ge.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:f}=K2({...n,velocity:-Xn(n.velocity||0)}),g=m||0,v=u/(2*Math.sqrt(c*d)),k=a-i,x=Xn(Math.sqrt(c/d)),y=Math.abs(k)<5;r||(r=y?Ge.restSpeed.granular:Ge.restSpeed.default),s||(s=y?Ge.restDelta.granular:Ge.restDelta.default);let p;if(v<1){const E=eh(x,v);p=N=>{const P=Math.exp(-v*x*N);return a-P*((g+v*x*k)/E*Math.sin(E*N)+k*Math.cos(E*N))}}else if(v===1)p=E=>a-Math.exp(-x*E)*(k+(g+x*k)*E);else{const E=x*Math.sqrt(v*v-1);p=N=>{const P=Math.exp(-v*x*N),T=Math.min(E*N,300);return a-P*((g+v*x*k)*Math.sinh(T)+E*k*Math.cosh(T))/E}}const S={calculatedDuration:f&&h||null,next:E=>{const N=p(E);if(f)l.done=E>=h;else{let P=E===0?g:0;v<1&&(P=E===0?Kn(g):qb(p,E,N));const T=Math.abs(P)<=r,O=Math.abs(a-N)<=s;l.done=T&&O}return l.value=l.done?a:N,l},toString:()=>{const E=Math.min(im(S),Yl),N=Wb(P=>S.next(E*P).value,E,30);return E+"ms "+N},toTransition:()=>{}};return S}Ql.applyToOptions=e=>{const t=U2(e,100,Ql);return e.ease=t.ease,e.duration=Kn(t.duration),e.type="keyframes",e};function th({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],m={done:!1,value:h},f=T=>l!==void 0&&T<l||c!==void 0&&T>c,g=T=>l===void 0?c:c===void 0||Math.abs(l-T)<Math.abs(c-T)?l:c;let v=n*t;const k=h+v,x=a===void 0?k:a(k);x!==k&&(v=x-h);const y=T=>-v*Math.exp(-T/r),p=T=>x+y(T),S=T=>{const O=y(T),D=p(T);m.done=Math.abs(O)<=u,m.value=m.done?x:D};let E,N;const P=T=>{f(m.value)&&(E=T,N=Ql({keyframes:[m.value,g(m.value)],velocity:qb(p,T,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:T=>{let O=!1;return!N&&E===void 0&&(O=!0,S(T),P(T)),E!==void 0&&T>=E?N.next(T-E):(!O&&S(T),m)}}}function X2(e,t,n){const r=[],s=n||gr.mix||Hb,i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||kn:t;l=go(c,l)}r.push(l)}return r}function J2(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Xf(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=X2(t,r,s),c=l.length,u=d=>{if(a&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=Ja(e[h],e[h+1],d);return l[h](m)};return n?d=>u(pr(e[0],e[i-1],d)):u}function Y2(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Ja(0,t,r);e.push(Ue(n,1,s))}}function Q2(e){const t=[0];return Y2(t,e.length-1),t}function Z2(e,t){return e.map(n=>n*t)}function e_(e,t){return e.map(()=>t||Db).splice(0,e.length-1)}function wa({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=d2(r)?r.map(wg):wg(r),i={done:!1,value:t[0]},a=Z2(n&&n.length===t.length?n:Q2(t),e),l=J2(a,t,{ease:Array.isArray(s)?s:e_(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const t_=e=>e!==null;function am(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(t_),l=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const n_={decay:th,inertia:th,tween:wa,keyframes:wa,spring:Ql};function Gb(e){typeof e.type=="string"&&(e.type=n_[e.type])}class om{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const r_=e=>e/100;class lm extends om{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Gt.now()&&this.tick(Gt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Gb(t);const{type:n=wa,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=t;let{keyframes:l}=t;const c=n||wa;c!==wa&&typeof l[0]!="number"&&(this.mixKeyframes=go(r_,Hb(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=im(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:f,type:g,onUpdate:v,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let p=this.currentTime,S=r;if(h){const T=Math.min(this.currentTime,s)/l;let O=Math.floor(T),D=T%1;!D&&T>=1&&(D=1),D===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(m==="reverse"?(D=1-D,f&&(D-=f/l)):m==="mirror"&&(S=a)),p=pr(0,1,D)*l}const E=y?{done:!1,value:d[0]}:S.next(p);i&&(E.value=i(E.value));let{done:N}=E;!y&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return P&&g!==th&&(E.value=am(d,this.options,k,this.speed)),v&&v(E.value),P&&this.finish(),E}then(t,n){return this.finished.then(t,n)}get duration(){return Xn(this.calculatedDuration)}get time(){return Xn(this.currentTime)}set time(t){var n;t=Kn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Gt.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Xn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=V2,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Gt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function s_(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ss=e=>e*180/Math.PI,nh=e=>{const t=Ss(Math.atan2(e[1],e[0]));return rh(t)},i_={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:nh,rotateZ:nh,skewX:e=>Ss(Math.atan(e[1])),skewY:e=>Ss(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rh=e=>(e=e%360,e<0&&(e+=360),e),Eg=nh,Cg=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Pg=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),a_={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Cg,scaleY:Pg,scale:e=>(Cg(e)+Pg(e))/2,rotateX:e=>rh(Ss(Math.atan2(e[6],e[5]))),rotateY:e=>rh(Ss(Math.atan2(-e[2],e[0]))),rotateZ:Eg,rotate:Eg,skewX:e=>Ss(Math.atan(e[4])),skewY:e=>Ss(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function sh(e){return e.includes("scale")?1:0}function ih(e,t){if(!e||e==="none")return sh(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=a_,s=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=i_,s=l}if(!s)return sh(t);const i=r[t],a=s[1].split(",").map(l_);return typeof i=="function"?i(a):a[i]}const o_=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ih(n,t)};function l_(e){return parseFloat(e.trim())}const Vi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ui=new Set(Vi),Tg=e=>e===Fi||e===ue,c_=new Set(["x","y","z"]),u_=Vi.filter(e=>!c_.has(e));function d_(e){const t=[];return u_.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Cs={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ih(t,"x"),y:(e,{transform:t})=>ih(t,"y")};Cs.translateX=Cs.x;Cs.translateY=Cs.y;const Ps=new Set;let ah=!1,oh=!1,lh=!1;function Kb(){if(oh){const e=Array.from(Ps).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=d_(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var l;(l=r.getValue(i))==null||l.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}oh=!1,ah=!1,Ps.forEach(e=>e.complete(lh)),Ps.clear()}function Xb(){Ps.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(oh=!0)})}function h_(){lh=!0,Xb(),Kb(),lh=!1}class cm{constructor(t,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Ps.add(this),ah||(ah=!0,Fe.read(Xb),Fe.resolveKeyframes(Kb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),s&&i===void 0&&s.set(t[0])}s_(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ps.delete(this)}cancel(){this.state==="scheduled"&&(Ps.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const f_=e=>e.startsWith("--");function m_(e,t,n){f_(t)?e.style.setProperty(t,n):e.style[t]=n}const p_=Jf(()=>window.ScrollTimeline!==void 0),g_={};function x_(e,t){const n=Jf(e);return()=>g_[t]??n()}const Jb=x_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ca=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ag={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ca([0,.65,.55,1]),circOut:ca([.55,0,1,.45]),backIn:ca([.31,.01,.66,-.59]),backOut:ca([.33,1.53,.69,.99])};function Yb(e,t){if(e)return typeof e=="function"?Jb()?Wb(e,t):"ease-out":Lb(e)?ca(e):Array.isArray(e)?e.map(n=>Yb(n,t)||Ag.easeOut):Ag[e]}function y_(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const h=Yb(l,s);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(d,m)}function Qb(e){return typeof e=="function"&&"applyToOptions"in e}function v_({type:e,...t}){return Qb(e)&&Jb()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class b_ extends om{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,Xf(typeof t.type!="string");const u=v_(t);this.animation=y_(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=am(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):m_(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Xn(Number(t))}get time(){return Xn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Kn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&p_()?(this.animation.timeline=t,kn):n(this)}}const Zb={anticipate:Ab,backInOut:Tb,circInOut:Ib};function w_(e){return e in Zb}function k_(e){typeof e.ease=="string"&&w_(e.ease)&&(e.ease=Zb[e.ease])}const Rg=10;class j_ extends b_{constructor(t){k_(t),Gb(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new lm({...a,autoplay:!1}),c=Kn(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-Rg).value,l.sample(c).value,Rg),l.stop()}}const Ig=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Zr.test(e)||e==="0")&&!e.startsWith("url("));function S_(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function N_(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=Ig(s,t),l=Ig(i,t);return!a||!l?!1:S_(e)||(n==="spring"||Qb(n))&&r}function ch(e){e.duration=0,e.type}const __=new Set(["opacity","clipPath","filter","transform"]),E_=Jf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function C_(e){var d;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return E_()&&n&&__.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const P_=40;class T_ extends om{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var g;super(),this.stop=()=>{var v,k;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(k=this.keyframeResolver)==null||k.cancel()},this.createdAt=Gt.now();const m={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:c,motionValue:u,element:d,...h},f=(d==null?void 0:d.KeyframeResolver)||cm;this.keyframeResolver=new f(l,(v,k,x)=>this.onKeyframesResolved(v,k,m,!x),c,u,d),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Gt.now(),N_(t,i,a,l)||((gr.instantAnimations||!c)&&(d==null||d(am(t,r,n))),t[0]=t[t.length-1],ch(r),r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>P_?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},f=!u&&C_(m)?new j_({...m,element:m.motionValue.owner.current}):new lm(m);f.finished.then(()=>this.notifyFinished()).catch(kn),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),h_()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const A_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function R_(e){const t=A_.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function ew(e,t,n=1){const[r,s]=R_(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return kb(a)?parseFloat(a):a}return tm(s)?ew(s,t,n+1):s}function um(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const tw=new Set(["width","height","top","left","right","bottom",...Vi]),I_={test:e=>e==="auto",parse:e=>e},nw=e=>t=>t.test(e),rw=[Fi,ue,Jn,Pr,S2,j2,I_],Dg=e=>rw.find(nw(e));function D_(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Sb(e):!0}const L_=new Set(["brightness","contrast","saturate","opacity"]);function O_(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(nm)||[];if(!r)return e;const s=n.replace(r,"");let i=L_.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const $_=/\b([a-z-]*)\(.*?\)/gu,uh={...Zr,getAnimatableNone:e=>{const t=e.match($_);return t?t.map(O_).join(" "):e}},Lg={...Fi,transform:Math.round},M_={rotate:Pr,rotateX:Pr,rotateY:Pr,rotateZ:Pr,scale:Wo,scaleX:Wo,scaleY:Wo,scaleZ:Wo,skew:Pr,skewX:Pr,skewY:Pr,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:Ya,originX:kg,originY:kg,originZ:ue},dm={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,backgroundPositionX:ue,backgroundPositionY:ue,...M_,zIndex:Lg,fillOpacity:Ya,strokeOpacity:Ya,numOctaves:Lg},F_={...dm,color:rt,backgroundColor:rt,outlineColor:rt,fill:rt,stroke:rt,borderColor:rt,borderTopColor:rt,borderRightColor:rt,borderBottomColor:rt,borderLeftColor:rt,filter:uh,WebkitFilter:uh},sw=e=>F_[e];function iw(e,t){let n=sw(e);return n!==uh&&(n=Zr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const V_=new Set(["auto","none","0"]);function U_(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!V_.has(i)&&Qa(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=iw(n,s)}class z_ extends cm{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),tm(u))){const d=ew(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!tw.has(r)||t.length!==2)return;const[s,i]=t,a=Dg(s),l=Dg(i);if(a!==l)if(Tg(a)&&Tg(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Cs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||D_(t[s]))&&r.push(s);r.length&&U_(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Cs[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=Cs[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function B_(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const aw=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function ow(e){return jb(e)&&"offsetHeight"in e}const Og=30,H_=e=>!isNaN(parseFloat(e));class W_{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Gt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Gt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=H_(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Yf);const r=this.events[t].add(n);return t==="change"?()=>{r(),Fe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Gt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Og)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Og);return Nb(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ai(e,t){return new W_(e,t)}const{schedule:hm}=Ob(queueMicrotask,!1),Cn={x:!1,y:!1};function lw(){return Cn.x||Cn.y}function q_(e){return e==="x"||e==="y"?Cn[e]?null:(Cn[e]=!0,()=>{Cn[e]=!1}):Cn.x||Cn.y?null:(Cn.x=Cn.y=!0,()=>{Cn.x=Cn.y=!1})}function cw(e,t){const n=B_(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function $g(e){return!(e.pointerType==="touch"||lw())}function G_(e,t,n={}){const[r,s,i]=cw(e,n),a=l=>{if(!$g(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{$g(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",a,s)}),i}const uw=(e,t)=>t?e===t?!0:uw(e,t.parentElement):!1,fm=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,K_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function X_(e){return K_.has(e.tagName)||e.tabIndex!==-1}const gl=new WeakSet;function Mg(e){return t=>{t.key==="Enter"&&e(t)}}function wu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const J_=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Mg(()=>{if(gl.has(n))return;wu(n,"down");const s=Mg(()=>{wu(n,"up")}),i=()=>wu(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Fg(e){return fm(e)&&!lw()}function Y_(e,t,n={}){const[r,s,i]=cw(e,n),a=l=>{const c=l.currentTarget;if(!Fg(l))return;gl.add(c);const u=t(c,l),d=(f,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),gl.has(c)&&gl.delete(c),Fg(f)&&typeof u=="function"&&u(f,{success:g})},h=f=>{d(f,c===window||c===document||n.useGlobalTarget||uw(c,f.target))},m=f=>{d(f,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",m,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),ow(l)&&(l.addEventListener("focus",u=>J_(u,s)),!X_(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function dw(e){return jb(e)&&"ownerSVGElement"in e}function Q_(e){return dw(e)&&e.tagName==="svg"}const Pt=e=>!!(e&&e.getVelocity),Z_=[...rw,rt,Zr],eE=e=>Z_.find(nw(e)),mm=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class tE extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=ow(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function nE({children:e,isPresent:t,anchorX:n,root:r}){const s=j.useId(),i=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=j.useContext(mm);return j.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:h,right:m}=a.current;if(t||!i.current||!c||!u)return;const f=n==="left"?`left: ${h}`:`right: ${m}`;i.current.dataset.motionPopId=s;const g=document.createElement("style");l&&(g.nonce=l);const v=r??document.head;return v.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${f}px !important;
            top: ${d}px !important;
          }
        `),()=>{v.contains(g)&&v.removeChild(g)}},[t]),o.jsx(tE,{isPresent:t,childRef:i,sizeRef:a,children:j.cloneElement(e,{ref:i})})}const rE=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a,anchorX:l,root:c})=>{const u=Wf(sE),d=j.useId();let h=!0,m=j.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:n,custom:s,onExitComplete:f=>{u.set(f,!0);for(const g of u.values())if(!g)return;r&&r()},register:f=>(u.set(f,!1),()=>u.delete(f))}),[n,u,r]);return i&&h&&(m={...m}),j.useMemo(()=>{u.forEach((f,g)=>u.set(g,!1))},[n]),j.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),a==="popLayout"&&(e=o.jsx(nE,{isPresent:n,anchorX:l,root:c,children:e})),o.jsx(Ec.Provider,{value:m,children:e})};function sE(){return new Map}function hw(e=!0){const t=j.useContext(Ec);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=j.useId();j.useEffect(()=>{if(e)return s(i)},[e]);const a=j.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,a]:[!0]}const qo=e=>e.key||"";function Vg(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const zt=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[u,d]=hw(a),h=j.useMemo(()=>Vg(e),[e]),m=a&&!u?[]:h.map(qo),f=j.useRef(!0),g=j.useRef(h),v=Wf(()=>new Map),[k,x]=j.useState(h),[y,p]=j.useState(h);wb(()=>{f.current=!1,g.current=h;for(let N=0;N<y.length;N++){const P=qo(y[N]);m.includes(P)?v.delete(P):v.get(P)!==!0&&v.set(P,!1)}},[y,m.length,m.join("-")]);const S=[];if(h!==k){let N=[...h];for(let P=0;P<y.length;P++){const T=y[P],O=qo(T);m.includes(O)||(N.splice(P,0,T),S.push(T))}return i==="wait"&&S.length&&(N=S),p(Vg(N)),x(h),null}const{forceRender:E}=j.useContext(Hf);return o.jsx(o.Fragment,{children:y.map(N=>{const P=qo(N),T=a&&!u?!1:h===y||m.includes(P),O=()=>{if(v.has(P))v.set(P,!0);else return;let D=!0;v.forEach(M=>{M||(D=!1)}),D&&(E==null||E(),p(g.current),a&&(d==null||d()),r&&r())};return o.jsx(rE,{isPresent:T,initial:!f.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:T?void 0:O,anchorX:l,children:N},P)})})},fw=j.createContext({strict:!1}),Ug={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ri={};for(const e in Ug)Ri[e]={isEnabled:t=>Ug[e].some(n=>!!t[n])};function iE(e){for(const t in e)Ri[t]={...Ri[t],...e[t]}}const aE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||aE.has(e)}let mw=e=>!Zl(e);function oE(e){typeof e=="function"&&(mw=t=>t.startsWith("on")?!Zl(t):e(t))}try{oE(require("@emotion/is-prop-valid").default)}catch{}function lE(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(mw(s)||n===!0&&Zl(s)||!t&&!Zl(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Cc=j.createContext({});function Pc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Za(e){return typeof e=="string"||Array.isArray(e)}const pm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gm=["initial",...pm];function Tc(e){return Pc(e.animate)||gm.some(t=>Za(e[t]))}function pw(e){return!!(Tc(e)||e.variants)}function cE(e,t){if(Tc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Za(n)?n:void 0,animate:Za(r)?r:void 0}}return e.inherit!==!1?t:{}}function uE(e){const{initial:t,animate:n}=cE(e,j.useContext(Cc));return j.useMemo(()=>({initial:t,animate:n}),[zg(t),zg(n)])}function zg(e){return Array.isArray(e)?e.join(" "):e}const eo={};function dE(e){for(const t in e)eo[t]=e[t],em(t)&&(eo[t].isCSSVariable=!0)}function gw(e,{layout:t,layoutId:n}){return Ui.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!eo[e]||e==="opacity")}const hE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fE=Vi.length;function mE(e,t,n){let r="",s=!0;for(let i=0;i<fE;i++){const a=Vi[i],l=e[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=aw(l,dm[a]);if(!c){s=!1;const d=hE[a]||a;r+=`${d}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function xm(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let a=!1,l=!1;for(const c in t){const u=t[c];if(Ui.has(c)){a=!0;continue}else if(em(c)){s[c]=u;continue}else{const d=aw(u,dm[c]);c.startsWith("origin")?(l=!0,i[c]=d):r[c]=d}}if(t.transform||(a||n?r.transform=mE(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const ym=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xw(e,t,n){for(const r in t)!Pt(t[r])&&!gw(r,n)&&(e[r]=t[r])}function pE({transformTemplate:e},t){return j.useMemo(()=>{const n=ym();return xm(n,t,e),Object.assign({},n.vars,n.style)},[t])}function gE(e,t){const n=e.style||{},r={};return xw(r,n,e),Object.assign(r,pE(e,t)),r}function xE(e,t){const n={},r=gE(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const yE={offset:"stroke-dashoffset",array:"stroke-dasharray"},vE={offset:"strokeDashoffset",array:"strokeDasharray"};function bE(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?yE:vE;e[i.offset]=ue.transform(-r);const a=ue.transform(t),l=ue.transform(n);e[i.array]=`${a} ${l}`}function yw(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...l},c,u,d){if(xm(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&bE(h,s,i,a,!1)}const vw=()=>({...ym(),attrs:{}}),bw=e=>typeof e=="string"&&e.toLowerCase()==="svg";function wE(e,t,n,r){const s=j.useMemo(()=>{const i=vw();return yw(i,t,bw(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};xw(i,e.style,e),s.style={...i,...s.style}}return s}const kE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vm(e){return typeof e!="string"||e.includes("-")?!1:!!(kE.indexOf(e)>-1||/[A-Z]/u.test(e))}function jE(e,t,n,{latestValues:r},s,i=!1){const l=(vm(e)?wE:xE)(t,r,s,e),c=lE(t,typeof e=="string",i),u=e!==j.Fragment?{...c,...l,ref:n}:{},{children:d}=t,h=j.useMemo(()=>Pt(d)?d.get():d,[d]);return j.createElement(e,{...u,children:h})}function Bg(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function bm(e,t,n,r){if(typeof t=="function"){const[s,i]=Bg(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Bg(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function xl(e){return Pt(e)?e.get():e}function SE({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:NE(n,r,s,e),renderState:t()}}function NE(e,t,n,r){const s={},i=r(e,{});for(const m in i)s[m]=xl(i[m]);let{initial:a,animate:l}=e;const c=Tc(e),u=pw(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;if(h&&typeof h!="boolean"&&!Pc(h)){const m=Array.isArray(h)?h:[h];for(let f=0;f<m.length;f++){const g=bm(e,m[f]);if(g){const{transitionEnd:v,transition:k,...x}=g;for(const y in x){let p=x[y];if(Array.isArray(p)){const S=d?p.length-1:0;p=p[S]}p!==null&&(s[y]=p)}for(const y in v)s[y]=v[y]}}}return s}const ww=e=>(t,n)=>{const r=j.useContext(Cc),s=j.useContext(Ec),i=()=>SE(e,t,r,s);return n?i():Wf(i)};function wm(e,t,n){var i;const{style:r}=e,s={};for(const a in r)(Pt(r[a])||t.style&&Pt(t.style[a])||gw(a,e)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const _E=ww({scrapeMotionValuesFromProps:wm,createRenderState:ym});function kw(e,t,n){const r=wm(e,t,n);for(const s in e)if(Pt(e[s])||Pt(t[s])){const i=Vi.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const EE=ww({scrapeMotionValuesFromProps:kw,createRenderState:vw}),CE=Symbol.for("motionComponentSymbol");function ci(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function PE(e,t,n){return j.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ci(n)&&(n.current=r))},[t])}const km=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),TE="framerAppearId",jw="data-"+km(TE),Sw=j.createContext({});function AE(e,t,n,r,s){var v,k;const{visualElement:i}=j.useContext(Cc),a=j.useContext(fw),l=j.useContext(Ec),c=j.useContext(mm).reducedMotion,u=j.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=j.useContext(Sw);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&RE(u.current,n,s,h);const m=j.useRef(!1);j.useInsertionEffect(()=>{d&&m.current&&d.update(n,l)});const f=n[jw],g=j.useRef(!!f&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,f))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,f)));return wb(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),j.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,f)}),g.current=!1),d.enteringChildren=void 0)}),d}function RE(e,t,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Nw(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||l&&ci(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function Nw(e){if(e)return e.options.allowProjection!==!1?e.projection:Nw(e.parent)}function ku(e,{forwardMotionProps:t=!1}={},n,r){n&&iE(n);const s=vm(e)?EE:_E;function i(l,c){let u;const d={...j.useContext(mm),...l,layoutId:IE(l)},{isStatic:h}=d,m=uE(l),f=s(l,h);if(!h&&qf){DE();const g=LE(d);u=g.MeasureLayout,m.visualElement=AE(e,f,d,r,g.ProjectionNode)}return o.jsxs(Cc.Provider,{value:m,children:[u&&m.visualElement?o.jsx(u,{visualElement:m.visualElement,...d}):null,jE(e,l,PE(f,m.visualElement,c),f,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const a=j.forwardRef(i);return a[CE]=e,a}function IE({layoutId:e}){const t=j.useContext(Hf).id;return t&&e!==void 0?t+"-"+e:e}function DE(e,t){j.useContext(fw).strict}function LE(e){const{drag:t,layout:n}=Ri;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function OE(e,t){if(typeof Proxy>"u")return ku;const n=new Map,r=(i,a)=>ku(i,a,e,t),s=(i,a)=>r(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,ku(a,void 0,e,t)),n.get(a))})}function _w({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function $E({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ME(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ju(e){return e===void 0||e===1}function dh({scale:e,scaleX:t,scaleY:n}){return!ju(e)||!ju(t)||!ju(n)}function gs(e){return dh(e)||Ew(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ew(e){return Hg(e.x)||Hg(e.y)}function Hg(e){return e&&e!=="0%"}function ec(e,t,n){const r=e-n,s=t*r;return n+s}function Wg(e,t,n,r,s){return s!==void 0&&(e=ec(e,s,r)),ec(e,n,r)+t}function hh(e,t=0,n=1,r,s){e.min=Wg(e.min,t,n,r,s),e.max=Wg(e.max,t,n,r,s)}function Cw(e,{x:t,y:n}){hh(e.x,t.translate,t.scale,t.originPoint),hh(e.y,n.translate,n.scale,n.originPoint)}const qg=.999999999999,Gg=1.0000000000001;function FE(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=n[l],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&di(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Cw(e,a)),r&&gs(i.latestValues)&&di(e,i.latestValues))}t.x<Gg&&t.x>qg&&(t.x=1),t.y<Gg&&t.y>qg&&(t.y=1)}function ui(e,t){e.min=e.min+t,e.max=e.max+t}function Kg(e,t,n,r,s=.5){const i=Ue(e.min,e.max,s);hh(e,t,n,i,r)}function di(e,t){Kg(e.x,t.x,t.scaleX,t.scale,t.originX),Kg(e.y,t.y,t.scaleY,t.scale,t.originY)}function Pw(e,t){return _w(ME(e.getBoundingClientRect(),t))}function VE(e,t,n){const r=Pw(e,n),{scroll:s}=t;return s&&(ui(r.x,s.offset.x),ui(r.y,s.offset.y)),r}const Xg=()=>({translate:0,scale:1,origin:0,originPoint:0}),hi=()=>({x:Xg(),y:Xg()}),Jg=()=>({min:0,max:0}),Ye=()=>({x:Jg(),y:Jg()}),fh={current:null},Tw={current:!1};function UE(){if(Tw.current=!0,!!qf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>fh.current=e.matches;e.addEventListener("change",t),t()}else fh.current=!1}const zE=new WeakMap;function BE(e,t,n){for(const r in t){const s=t[r],i=n[r];if(Pt(s))e.addValue(r,s);else if(Pt(i))e.addValue(r,Ai(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(r);e.addValue(r,Ai(a!==void 0?a:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Yg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class HE{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Gt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Fe.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Tc(n),this.isVariantNode=pw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const f=h[m];c[m]!==void 0&&Pt(f)&&f.set(c[m])}}mount(t){var n;this.current=t,zE.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),Tw.current||UE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fh.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Qr(this.notifyUpdate),Qr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ui.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Fe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ri){const n=Ri[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ye()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Yg.length;r++){const s=Yg[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=t[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=BE(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ai(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(kb(r)||Sb(r))?r=parseFloat(r):!eE(r)&&Zr.test(n)&&(r=iw(t,n)),this.setBaseTarget(t,Pt(r)?r.get():r)),Pt(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=bm(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Pt(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Yf),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){hm.render(this.render)}}class Aw extends HE{constructor(){super(...arguments),this.KeyframeResolver=z_}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Pt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Rw(e,{style:t,vars:n},r,s){const i=e.style;let a;for(a in t)i[a]=t[a];s==null||s.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function WE(e){return window.getComputedStyle(e)}class qE extends Aw{constructor(){super(...arguments),this.type="html",this.renderInstance=Rw}readValueFromInstance(t,n){var r;if(Ui.has(n))return(r=this.projection)!=null&&r.isProjecting?sh(n):o_(t,n);{const s=WE(t),i=(em(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Pw(t,n)}build(t,n,r){xm(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return wm(t,n,r)}}const Iw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function GE(e,t,n,r){Rw(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Iw.has(s)?s:km(s),t.attrs[s])}class KE extends Aw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ye}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ui.has(n)){const r=sw(n);return r&&r.default||0}return n=Iw.has(n)?n:km(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return kw(t,n,r)}build(t,n,r){yw(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){GE(t,n,r,s)}mount(t){this.isSVGTag=bw(t.tagName),super.mount(t)}}const XE=(e,t)=>vm(e)?new KE(t):new qE(t,{allowProjection:e!==j.Fragment});function bi(e,t,n){const r=e.getProps();return bm(r,t,n!==void 0?n:r.custom,e)}const mh=e=>Array.isArray(e);function JE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ai(n))}function YE(e){return mh(e)?e[e.length-1]||0:e}function QE(e,t){const n=bi(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const l=YE(i[a]);JE(e,a,l)}}function ZE(e){return!!(Pt(e)&&e.add)}function ph(e,t){const n=e.getValue("willChange");if(ZE(n))return n.add(t);if(!n&&gr.WillChange){const r=new gr.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Dw(e){return e.props[jw]}const eC=e=>e!==null;function tC(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(eC),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const nC={type:"spring",stiffness:500,damping:25,restSpeed:10},rC=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),sC={type:"keyframes",duration:.8},iC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aC=(e,{keyframes:t})=>t.length>2?sC:Ui.has(e)?e.startsWith("scale")?rC(t[1]):nC:iC;function oC({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const jm=(e,t,n,r={},s,i)=>a=>{const l=um(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Kn(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};oC(l)||Object.assign(d,aC(e,d)),d.duration&&(d.duration=Kn(d.duration)),d.repeatDelay&&(d.repeatDelay=Kn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(ch(d),d.delay===0&&(h=!0)),(gr.instantAnimations||gr.skipAnimations)&&(h=!0,ch(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const m=tC(d.keyframes,l);if(m!==void 0){Fe.update(()=>{d.onUpdate(m),d.onComplete()});return}}return l.isSync?new lm(d):new T_(d)};function lC({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Lw(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(i=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),m=l[d];if(m===void 0||u&&lC(u,d))continue;const f={delay:n,...um(i||{},d)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===g&&!f.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const x=Dw(e);if(x){const y=window.MotionHandoffAnimation(x,d,Fe);y!==null&&(f.startTime=y,v=!0)}}ph(e,d),h.start(jm(d,h,m,e.shouldReduceMotion&&tw.has(d)?{type:!1}:f,e,v));const k=h.animation;k&&c.push(k)}return a&&Promise.all(c).then(()=>{Fe.update(()=>{a&&QE(e,a)})}),c}function Ow(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),a=e.size,l=(a-1)*r;return typeof n=="function"?n(i,a):s===1?i*r:l-i*r}function gh(e,t,n={}){var c;const r=bi(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Lw(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=s;return cC(e,t,u,d,h,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,a]:[a,i];return u().then(()=>d())}else return Promise.all([i(),a(n.delay)])}function cC(e,t,n=0,r=0,s=0,i=1,a){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(gh(c,t,{...a,delay:n+(typeof r=="function"?0:r)+Ow(e.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function uC(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>gh(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=gh(e,t,n);else{const s=typeof t=="function"?bi(e,t,n.custom):t;r=Promise.all(Lw(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function $w(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const dC=gm.length;function Mw(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Mw(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<dC;n++){const r=gm[n],s=e.props[r];(Za(s)||s===!1)&&(t[r]=s)}return t}const hC=[...pm].reverse(),fC=pm.length;function mC(e){return t=>Promise.all(t.map(({animation:n,options:r})=>uC(e,n,r)))}function pC(e){let t=mC(e),n=Qg(),r=!0;const s=c=>(u,d)=>{var m;const h=bi(e,d,c==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:f,transitionEnd:g,...v}=h;u={...u,...v,...g}}return u};function i(c){t=c(e)}function a(c){const{props:u}=e,d=Mw(e.parent)||{},h=[],m=new Set;let f={},g=1/0;for(let k=0;k<fC;k++){const x=hC[k],y=n[x],p=u[x]!==void 0?u[x]:d[x],S=Za(p),E=x===c?y.isActive:null;E===!1&&(g=k);let N=p===d[x]&&p!==u[x]&&S;if(N&&r&&e.manuallyAnimateOnMount&&(N=!1),y.protectedKeys={...f},!y.isActive&&E===null||!p&&!y.prevProp||Pc(p)||typeof p=="boolean")continue;const P=gC(y.prevProp,p);let T=P||x===c&&y.isActive&&!N&&S||k>g&&S,O=!1;const D=Array.isArray(p)?p:[p];let M=D.reduce(s(x),{});E===!1&&(M={});const{prevResolvedValues:K={}}=y,he={...K,...M},$=F=>{T=!0,m.has(F)&&(O=!0,m.delete(F)),y.needsAnimating[F]=!0;const C=e.getValue(F);C&&(C.liveStyle=!1)};for(const F in he){const C=M[F],A=K[F];if(f.hasOwnProperty(F))continue;let b=!1;mh(C)&&mh(A)?b=!$w(C,A):b=C!==A,b?C!=null?$(F):m.add(F):C!==void 0&&m.has(F)?$(F):y.protectedKeys[F]=!0}y.prevProp=p,y.prevResolvedValues=M,y.isActive&&(f={...f,...M}),r&&e.blockInitialAnimation&&(T=!1);const L=N&&P;T&&(!L||O)&&h.push(...D.map(F=>{const C={type:x};if(typeof F=="string"&&r&&!L&&e.manuallyAnimateOnMount&&e.parent){const{parent:A}=e,b=bi(A,F);if(A.enteringChildren&&b){const{delayChildren:z}=b.transition||{};C.delay=Ow(A.enteringChildren,e,z)}}return{animation:F,options:C}}))}if(m.size){const k={};if(typeof u.initial!="boolean"){const x=bi(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(k.transition=x.transition)}m.forEach(x=>{const y=e.getBaseTarget(x),p=e.getValue(x);p&&(p.liveStyle=!0),k[x]=y??null}),h.push({animation:k})}let v=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var f;return(f=m.animationState)==null?void 0:f.setActive(c,u)}),n[c].isActive=u;const d=a(c);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Qg(),r=!0}}}function gC(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!$w(t,e):!1}function us(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Qg(){return{animate:us(!0),whileInView:us(),whileHover:us(),whileTap:us(),whileDrag:us(),whileFocus:us(),exit:us()}}class rs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class xC extends rs{constructor(t){super(t),t.animationState||(t.animationState=pC(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let yC=0;class vC extends rs{constructor(){super(...arguments),this.id=yC++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const bC={animation:{Feature:xC},exit:{Feature:vC}};function to(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function vo(e){return{point:{x:e.pageX,y:e.pageY}}}const wC=e=>t=>fm(t)&&e(t,vo(t));function ka(e,t,n,r){return to(e,t,wC(n),r)}const Fw=1e-4,kC=1-Fw,jC=1+Fw,Vw=.01,SC=0-Vw,NC=0+Vw;function Dt(e){return e.max-e.min}function _C(e,t,n){return Math.abs(e-t)<=n}function Zg(e,t,n,r=.5){e.origin=r,e.originPoint=Ue(t.min,t.max,e.origin),e.scale=Dt(n)/Dt(t),e.translate=Ue(n.min,n.max,e.origin)-e.originPoint,(e.scale>=kC&&e.scale<=jC||isNaN(e.scale))&&(e.scale=1),(e.translate>=SC&&e.translate<=NC||isNaN(e.translate))&&(e.translate=0)}function ja(e,t,n,r){Zg(e.x,t.x,n.x,r?r.originX:void 0),Zg(e.y,t.y,n.y,r?r.originY:void 0)}function e0(e,t,n){e.min=n.min+t.min,e.max=e.min+Dt(t)}function EC(e,t,n){e0(e.x,t.x,n.x),e0(e.y,t.y,n.y)}function t0(e,t,n){e.min=t.min-n.min,e.max=e.min+Dt(t)}function Sa(e,t,n){t0(e.x,t.x,n.x),t0(e.y,t.y,n.y)}function pn(e){return[e("x"),e("y")]}const Uw=({current:e})=>e?e.ownerDocument.defaultView:null,n0=(e,t)=>Math.abs(e-t);function CC(e,t){const n=n0(e.x,t.x),r=n0(e.y,t.y);return Math.sqrt(n**2+r**2)}class zw{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Nu(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=CC(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!g)return;const{point:v}=m,{timestamp:k}=wt;this.history.push({...v,timestamp:k});const{onStart:x,onMove:y}=this.handlers;f||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Su(f,this.transformPagePoint),Fe.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Nu(m.type==="pointercancel"?this.lastMoveEventInfo:Su(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,x),v&&v(m,x)},!fm(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const l=vo(t),c=Su(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=wt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,Nu(c,this.history)),this.removeListeners=go(ka(this.contextWindow,"pointermove",this.handlePointerMove),ka(this.contextWindow,"pointerup",this.handlePointerUp),ka(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Qr(this.updatePoint)}}function Su(e,t){return t?{point:t(e.point)}:e}function r0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Nu({point:e},t){return{point:e,delta:r0(e,Bw(t)),offset:r0(e,PC(t)),velocity:TC(t,.1)}}function PC(e){return e[0]}function Bw(e){return e[e.length-1]}function TC(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Bw(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Kn(t)));)n--;if(!r)return{x:0,y:0};const i=Xn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function AC(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ue(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ue(n,e,r.max):Math.min(e,n)),e}function s0(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function RC(e,{top:t,left:n,bottom:r,right:s}){return{x:s0(e.x,n,s),y:s0(e.y,t,r)}}function i0(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function IC(e,t){return{x:i0(e.x,t.x),y:i0(e.y,t.y)}}function DC(e,t){let n=.5;const r=Dt(e),s=Dt(t);return s>r?n=Ja(t.min,t.max-r,e.min):r>s&&(n=Ja(e.min,e.max-s,t.min)),pr(0,1,n)}function LC(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const xh=.35;function OC(e=xh){return e===!1?e=0:e===!0&&(e=xh),{x:a0(e,"left","right"),y:a0(e,"top","bottom")}}function a0(e,t,n){return{min:o0(e,t),max:o0(e,n)}}function o0(e,t){return typeof e=="number"?e:e[t]||0}const $C=new WeakMap;class MC{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ye(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vo(h).point)},a=(h,m)=>{const{drag:f,dragPropagation:g,onDragStart:v}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=q_(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pn(x=>{let y=this.getAxisMotionValue(x).get()||0;if(Jn.test(y)){const{projection:p}=this.visualElement;if(p&&p.layout){const S=p.layout.layoutBox[x];S&&(y=Dt(S)*(parseFloat(y)/100))}}this.originPoint[x]=y}),v&&Fe.postRender(()=>v(h,m)),ph(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:v,onDrag:k}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=m;if(g&&this.currentDirection===null){this.currentDirection=FC(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,x),this.updateAxis("y",m.point,x),this.visualElement.render(),k&&k(h,m)},c=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>pn(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new zw(t,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Uw(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Fe.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Go(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=AC(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&ci(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=RC(r.layoutBox,t):this.constraints=!1,this.elastic=OC(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&pn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=LC(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ci(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=VE(r,s.root,this.visualElement.getTransformPagePoint());let a=IC(s.layout.layoutBox,i);if(n){const l=n($E(a));this.hasMutatedConstraints=!!l,l&&(a=_w(l))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=pn(d=>{if(!Go(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const m=s?200:1e6,f=s?40:1e7,g={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return ph(this.visualElement,t),r.start(jm(t,r,0,n,this.visualElement,!1))}stopAnimation(){pn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){pn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){pn(n=>{const{drag:r}=this.getProps();if(!Go(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];i.set(t[n]-Ue(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ci(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};pn(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=DC({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),pn(a=>{if(!Go(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Ue(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;$C.set(this.visualElement,this);const t=this.visualElement.current,n=ka(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ci(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Fe.read(r);const a=to(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(pn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=xh,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function Go(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function FC(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class VC extends rs{constructor(t){super(t),this.removeGroupControls=kn,this.removeListeners=kn,this.controls=new MC(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const l0=e=>(t,n)=>{e&&Fe.postRender(()=>e(t,n))};class UC extends rs{constructor(){super(...arguments),this.removePointerDownListener=kn}onPointerDown(t){this.session=new zw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Uw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:l0(t),onStart:l0(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Fe.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=ka(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function c0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ta={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ue.test(e))e=parseFloat(e);else return e;const n=c0(e,t.target.x),r=c0(e,t.target.y);return`${n}% ${r}%`}},zC={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Zr.parse(e);if(s.length>5)return r;const i=Zr.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=Ue(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};let _u=!1;class BC extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;dE(HC),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),_u&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),yl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,_u=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Fe.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),hm.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;_u=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Hw(e){const[t,n]=hw(),r=j.useContext(Hf);return o.jsx(BC,{...e,layoutGroup:r,switchLayoutGroup:j.useContext(Sw),isPresent:t,safeToRemove:n})}const HC={borderRadius:{...ta,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ta,borderTopRightRadius:ta,borderBottomLeftRadius:ta,borderBottomRightRadius:ta,boxShadow:zC};function WC(e,t,n){const r=Pt(e)?e:Ai(e);return r.start(jm("",r,t,n)),r.animation}const qC=(e,t)=>e.depth-t.depth;class GC{constructor(){this.children=[],this.isDirty=!1}add(t){Gf(this.children,t),this.isDirty=!0}remove(t){Kf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(qC),this.isDirty=!1,this.children.forEach(t)}}function KC(e,t){const n=Gt.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Qr(r),e(i-t))};return Fe.setup(r,!0),()=>Qr(r)}const Ww=["TopLeft","TopRight","BottomLeft","BottomRight"],XC=Ww.length,u0=e=>typeof e=="string"?parseFloat(e):e,d0=e=>typeof e=="number"||ue.test(e);function JC(e,t,n,r,s,i){s?(e.opacity=Ue(0,n.opacity??1,YC(r)),e.opacityExit=Ue(t.opacity??1,0,QC(r))):i&&(e.opacity=Ue(t.opacity??1,n.opacity??1,r));for(let a=0;a<XC;a++){const l=`border${Ww[a]}Radius`;let c=h0(t,l),u=h0(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||d0(c)===d0(u)?(e[l]=Math.max(Ue(u0(c),u0(u),r),0),(Jn.test(u)||Jn.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Ue(t.rotate||0,n.rotate||0,r))}function h0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const YC=qw(0,.5,Rb),QC=qw(.5,.95,kn);function qw(e,t,n){return r=>r<e?0:r>t?1:n(Ja(e,t,r))}function f0(e,t){e.min=t.min,e.max=t.max}function mn(e,t){f0(e.x,t.x),f0(e.y,t.y)}function m0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function p0(e,t,n,r,s){return e-=t,e=ec(e,1/n,r),s!==void 0&&(e=ec(e,1/s,r)),e}function ZC(e,t=0,n=1,r=.5,s,i=e,a=e){if(Jn.test(t)&&(t=parseFloat(t),t=Ue(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Ue(i.min,i.max,r);e===i&&(l-=t),e.min=p0(e.min,t,n,l,s),e.max=p0(e.max,t,n,l,s)}function g0(e,t,[n,r,s],i,a){ZC(e,t[n],t[r],t[s],t.scale,i,a)}const eP=["x","scaleX","originX"],tP=["y","scaleY","originY"];function x0(e,t,n,r){g0(e.x,t,eP,n?n.x:void 0,r?r.x:void 0),g0(e.y,t,tP,n?n.y:void 0,r?r.y:void 0)}function y0(e){return e.translate===0&&e.scale===1}function Gw(e){return y0(e.x)&&y0(e.y)}function v0(e,t){return e.min===t.min&&e.max===t.max}function nP(e,t){return v0(e.x,t.x)&&v0(e.y,t.y)}function b0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Kw(e,t){return b0(e.x,t.x)&&b0(e.y,t.y)}function w0(e){return Dt(e.x)/Dt(e.y)}function k0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class rP{constructor(){this.members=[]}add(t){Gf(this.members,t),t.scheduleRender()}remove(t){if(Kf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sP(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:f,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),f&&(r+=`skewX(${f}deg) `),g&&(r+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Eu=["","X","Y","Z"],iP=1e3;let aP=0;function Cu(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Xw(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Dw(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Fe,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Xw(r)}function Jw({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=aP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cP),this.nodes.forEach(fP),this.nodes.forEach(mP),this.nodes.forEach(uP)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new GC)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Yf),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=dw(a)&&!Q_(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const m=()=>this.root.updateBlockedByResize=!1;Fe.read(()=>{h=window.innerWidth}),e(a,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,d&&d(),d=KC(m,250),yl.hasAnimatedSinceResize&&(yl.hasAnimatedSinceResize=!1,this.nodes.forEach(N0)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||vP,{onLayoutAnimationStart:v,onLayoutAnimationComplete:k}=u.getProps(),x=!this.targetLayout||!Kw(this.targetLayout,f),y=!h&&m;if(this.options.layoutRoot||this.resumeFrom||y||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const p={...um(g,"layout"),onPlay:v,onComplete:k};(u.shouldReduceMotion||this.options.layoutRoot)&&(p.delay=0,p.type=!1),this.startAnimation(p),this.setAnimationOrigin(d,y)}else h||N0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pP),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Xw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(j0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(S0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hP),this.nodes.forEach(oP),this.nodes.forEach(lP)):this.nodes.forEach(S0),this.clearAllSnapshots();const l=Gt.now();wt.delta=pr(0,1e3/60,l-wt.timestamp),wt.timestamp=l,wt.isProcessing=!0,gu.update.process(wt),gu.preRender.process(wt),gu.render.process(wt),wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dP),this.sharedNodes.forEach(gP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dt(this.snapshot.measuredBox.x)&&!Dt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Gw(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||gs(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),bP(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return Ye();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(wP))){const{scroll:d}=this.root;d&&(ui(l.x,d.offset.x),ui(l.y,d.offset.y))}return l}removeElementScroll(a){var c;const l=Ye();if(mn(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&mn(l,a),ui(l.x,h.offset.x),ui(l.y,h.offset.y))}return l}applyTransform(a,l=!1){const c=Ye();mn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&di(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),gs(d.latestValues)&&di(c,d.latestValues)}return gs(this.latestValues)&&di(c,this.latestValues),c}removeTransform(a){const l=Ye();mn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!gs(u.latestValues))continue;dh(u.latestValues)&&u.updateSnapshot();const d=Ye(),h=u.measurePageBox();mn(d,h),x0(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return gs(this.latestValues)&&x0(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=wt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ye(),this.relativeTargetOrigin=Ye(),Sa(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ye(),this.targetWithTransforms=Ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),EC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mn(this.target,this.layout.layoutBox),Cw(this.target,this.targetDelta)):mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ye(),this.relativeTargetOrigin=Ye(),Sa(this.relativeTargetOrigin,this.target,f.target),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||dh(this.parent.latestValues)||Ew(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===wt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;mn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;FE(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ye());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(m0(this.prevProjectionDelta.x,this.projectionDelta.x),m0(this.prevProjectionDelta.y,this.projectionDelta.y)),ja(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!k0(this.projectionDelta.x,this.prevProjectionDelta.x)||!k0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hi(),this.projectionDelta=hi(),this.projectionDeltaWithTransform=hi()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=hi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Ye(),f=c?c.source:void 0,g=this.layout?this.layout.source:void 0,v=f!==g,k=this.getStack(),x=!k||k.members.length<=1,y=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(yP));this.animationProgress=0;let p;this.mixTargetDelta=S=>{const E=S/1e3;_0(h.x,a.x,E),_0(h.y,a.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sa(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xP(this.relativeTarget,this.relativeTargetOrigin,m,E),p&&nP(this.relativeTarget,p)&&(this.isProjectionDirty=!1),p||(p=Ye()),mn(p,this.relativeTarget)),v&&(this.animationValues=d,JC(d,u,this.latestValues,E,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Qr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fe.update(()=>{yl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ai(0)),this.currentAnimation=WC(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&Yw(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ye();const h=Dt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const m=Dt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}mn(l,c),di(l,d),ja(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new rP),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Cu("z",a,u,this.animationValues);for(let d=0;d<Eu.length;d++)Cu(`rotate${Eu[d]}`,a,u,this.animationValues),Cu(`skew${Eu[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=xl(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=xl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!gs(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=sP(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),a.transform=h;const{x:m,y:f}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${f.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in eo){if(d[g]===void 0)continue;const{correct:v,applyTo:k,isCSSVariable:x}=eo[g],y=h==="none"?d[g]:v(d[g],u);if(k){const p=k.length;for(let S=0;S<p;S++)a[k[S]]=y}else x?this.options.visualElement.renderState.vars[g]=y:a[g]=y}this.options.layoutId&&(a.pointerEvents=u===this?xl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(j0),this.root.sharedNodes.clear()}}}function oP(e){e.updateLayout()}function lP(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i==="size"?pn(h=>{const m=a?t.measuredBox[h]:t.layoutBox[h],f=Dt(m);m.min=r[h].min,m.max=m.min+f}):Yw(i,t.layoutBox,r)&&pn(h=>{const m=a?t.measuredBox[h]:t.layoutBox[h],f=Dt(r[h]);m.max=m.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+f)});const l=hi();ja(l,r,t.layoutBox);const c=hi();a?ja(c,e.applyTransform(s,!0),t.measuredBox):ja(c,r,t.layoutBox);const u=!Gw(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:f}=h;if(m&&f){const g=Ye();Sa(g,t.layoutBox,m.layoutBox);const v=Ye();Sa(v,r,f.layoutBox),Kw(g,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function cP(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function uP(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function dP(e){e.clearSnapshot()}function j0(e){e.clearMeasurements()}function S0(e){e.isLayoutDirty=!1}function hP(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function N0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function fP(e){e.resolveTargetDelta()}function mP(e){e.calcProjection()}function pP(e){e.resetSkewAndRotation()}function gP(e){e.removeLeadSnapshot()}function _0(e,t,n){e.translate=Ue(t.translate,0,n),e.scale=Ue(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function E0(e,t,n,r){e.min=Ue(t.min,n.min,r),e.max=Ue(t.max,n.max,r)}function xP(e,t,n,r){E0(e.x,t.x,n.x,r),E0(e.y,t.y,n.y,r)}function yP(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const vP={duration:.45,ease:[.4,0,.1,1]},C0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),P0=C0("applewebkit/")&&!C0("chrome/")?Math.round:kn;function T0(e){e.min=P0(e.min),e.max=P0(e.max)}function bP(e){T0(e.x),T0(e.y)}function Yw(e,t,n){return e==="position"||e==="preserve-aspect"&&!_C(w0(t),w0(n),.2)}function wP(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const kP=Jw({attachResizeListener:(e,t)=>to(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pu={current:void 0},Qw=Jw({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Pu.current){const e=new kP({});e.mount(window),e.setOptions({layoutScroll:!0}),Pu.current=e}return Pu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),jP={pan:{Feature:UC},drag:{Feature:VC,ProjectionNode:Qw,MeasureLayout:Hw}};function A0(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Fe.postRender(()=>i(t,vo(t)))}class SP extends rs{mount(){const{current:t}=this.node;t&&(this.unmount=G_(t,(n,r)=>(A0(this.node,r,"Start"),s=>A0(this.node,s,"End"))))}unmount(){}}class NP extends rs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=go(to(this.node.current,"focus",()=>this.onFocus()),to(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function R0(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Fe.postRender(()=>i(t,vo(t)))}class _P extends rs{mount(){const{current:t}=this.node;t&&(this.unmount=Y_(t,(n,r)=>(R0(this.node,r,"Start"),(s,{success:i})=>R0(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yh=new WeakMap,Tu=new WeakMap,EP=e=>{const t=yh.get(e.target);t&&t(e)},CP=e=>{e.forEach(EP)};function PP({root:e,...t}){const n=e||document;Tu.has(n)||Tu.set(n,{});const r=Tu.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(CP,{root:e,...t})),r[s]}function TP(e,t,n){const r=PP(t);return yh.set(e,n),r.observe(e),()=>{yh.delete(e),r.unobserve(e)}}const AP={some:0,all:1};class RP extends rs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:AP[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(c)};return TP(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(IP(t,n))&&this.startObserver()}unmount(){}}function IP({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const DP={inView:{Feature:RP},tap:{Feature:_P},focus:{Feature:NP},hover:{Feature:SP}},LP={layout:{ProjectionNode:Qw,MeasureLayout:Hw}},OP={...bC,...DP,...jP,...LP},ee=OE(OP,XE);var $P={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const MP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J=(e,t)=>{const n=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...c},u)=>j.createElement("svg",{ref:u,...$P,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${MP(e)}`,...c},[...t.map(([d,h])=>j.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n},no=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ss=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ot=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),I0=J("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),ds=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ro=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),FP=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),vl=J("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),VP=J("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Zw=J("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Au=J("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),UP=J("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ze=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ut=J("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Hn=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Dn=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Wt=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ek=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),tk=J("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),on=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Sm=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Nm=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),zP=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),tc=J("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),BP=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),xt=J("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),nk=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),rk=J("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),sk=J("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),HP=J("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]),_m=J("GitPullRequest",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]),WP=J("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),qP=J("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),D0=J("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),Ru=J("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Em=J("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),vn=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),bl=J("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),GP=J("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),ik=J("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),KP=J("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),wl=J("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ak=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),XP=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),vh=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),JP=J("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),YP=J("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),so=J("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),L0=J("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),ok=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),QP=J("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),lk=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ts=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Iu=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Cm=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),O0=J("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ZP=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),io=J("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),nc=J("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Pm=J("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),eT=J("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Xr=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),tT=J("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),nT=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Fr=J("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),xr=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),rT=J("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Tm=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Am=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),sT=J("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Yn=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Os=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ns=J("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function iT({isCompact:e}){const n=er().pathname.split("/").filter(s=>s),r={"strategic-directives":"Strategic Directives",prds:"PRDs",handoffs:"Handoffs",context:"Context Monitor",progress:"Progress Tracker"};return o.jsxs("nav",{className:`flex items-center ${e?"py-1 px-2":"py-2 px-4"}`,children:[o.jsxs($n,{to:"/",className:"flex items-center text-purple-100 hover:text-white transition-colors drop-shadow-sm",children:[o.jsx(Em,{className:e?"w-3 h-3":"w-4 h-4"}),o.jsx("span",{className:`${e?"ml-1 text-xs":"ml-2 text-sm"}`,children:"Dashboard"})]}),n.map((s,i)=>{const a=`/${n.slice(0,i+1).join("/")}`,l=i===n.length-1,c=r[s]||s;return o.jsxs(co.Fragment,{children:[o.jsx(Wt,{className:`${e?"w-3 h-3 mx-1":"w-4 h-4 mx-2"} text-purple-200`}),l?o.jsx("span",{className:`${e?"text-xs":"text-sm"} font-medium text-white drop-shadow-sm`,children:c}):o.jsx($n,{to:a,className:`${e?"text-xs":"text-sm"} text-purple-100 hover:text-white transition-colors drop-shadow-sm`,children:c})]},s)})]})}function bo({onRefresh:e,isCompact:t=!1,isCollapsed:n=!1}){const[r,s]=j.useState("idle"),[i,a]=j.useState(""),[l,c]=j.useState(null),u=async()=>{console.log("🔄 Manual Refresh: Starting database sync..."),s("refreshing"),a("Syncing with database...");try{const f=await fetch("/api/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"database"})});if(!f.ok)throw new Error("Database refresh failed");const g=await f.json();console.log("✅ Database refreshed:",g),e&&(console.log("🔄 Triggering UI refresh..."),await e()),s("complete"),a(`Refreshed: ${g.sds||0} SDs, ${g.prds||0} PRDs`),c(new Date),setTimeout(()=>{s("idle"),a("")},3e3)}catch(f){console.error("❌ Refresh Error:",f),s("error"),a(`Failed: ${f.message}`),setTimeout(()=>{s("idle"),a("")},5e3)}},d=()=>{switch(r){case"refreshing":return o.jsx(Nm,{className:"w-4 h-4 animate-spin"});case"complete":return o.jsx(ze,{className:"w-4 h-4 text-green-500"});case"error":return o.jsx(ss,{className:"w-4 h-4 text-red-500"});default:return o.jsx(Ts,{className:"w-4 h-4"})}},h=()=>{switch(r){case"refreshing":return"bg-blue-500 hover:bg-blue-600";case"complete":return"bg-green-500 hover:bg-green-600";case"error":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-600 hover:bg-gray-700"}},m=r==="refreshing";return o.jsxs("div",{className:"relative flex items-center",children:[o.jsxs(ee.button,{onClick:u,disabled:m,className:`
          flex items-center ${n?"justify-center w-full":""} transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
          ${h()} text-white rounded hover:opacity-90
          ${n?"px-2 py-2":t?"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm":"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base"}
        `,whileHover:{scale:m?1:1.05},whileTap:{scale:m?1:.95},title:n?"Manual Refresh - Sync with database":"Manually sync with database (automatic real-time updates are active)",children:[d(),!n&&o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:`${t?"ml-1":"ml-1 sm:ml-2"} hidden xs:inline`,children:[r==="idle"&&"Manual Refresh",r==="refreshing"&&"Syncing...",r==="complete"&&"Synced!",r==="error"&&"Failed"]}),o.jsxs("span",{className:"xs:hidden ml-1",children:[r==="idle"&&"↻",r==="refreshing"&&"↻",r==="complete"&&"✓",r==="error"&&"✗"]})]})]}),o.jsx(zt,{children:i&&!n&&o.jsx(ee.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`
              absolute left-full ml-4 top-1/2 transform -translate-y-1/2
              text-sm px-3 py-1 rounded-lg whitespace-nowrap z-50
              ${r==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":r==="complete"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}
              ${t?"text-xs px-2 py-0.5":""}
            `,children:i})}),o.jsx(zt,{children:n&&i&&o.jsxs(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`
              absolute left-full ml-2 top-1/2 transform -translate-y-1/2
              text-xs px-2 py-1 rounded-lg whitespace-nowrap z-50 pointer-events-none
              ${r==="error"?"bg-red-900 text-red-200":r==="complete"?"bg-green-900 text-green-200":"bg-blue-900 text-blue-200"}
            `,children:[r==="refreshing"&&"Syncing",r==="complete"&&"Done!",r==="error"&&"Error"]})}),l&&r==="idle"&&o.jsxs("div",{className:`absolute left-full ml-4 top-full mt-1 text-gray-500 dark:text-gray-400 whitespace-nowrap ${t?"text-xs":"text-sm"}`,children:["Last refresh: ",l.toLocaleTimeString()]}),o.jsx("div",{className:"absolute -top-1 -right-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-400 rounded-full animate-ping"})]})})]})}const ck=({className:e=""})=>{const t=()=>{const c=localStorage.getItem("theme");return c?c==="dark":!0},[n,r]=j.useState(t),[s,i]=j.useState(!1);j.useLayoutEffect(()=>{const c=document.documentElement;n?(c.classList.add("dark"),c.classList.remove("light"),localStorage.setItem("theme","dark")):(c.classList.remove("dark"),c.classList.add("light"),localStorage.setItem("theme","light"))},[n]),j.useEffect(()=>{const c=setTimeout(()=>{const u=document.documentElement,d=localStorage.getItem("theme");d!=="light"?(u.classList.add("dark"),u.classList.remove("light"),d||localStorage.setItem("theme","dark"),r(!0)):(u.classList.remove("dark"),u.classList.add("light"),r(!1))},10);return()=>clearTimeout(c)},[]);const a=c=>{const u=document.documentElement;c?(u.classList.add("dark"),u.classList.remove("light"),localStorage.setItem("theme","dark")):(u.classList.remove("dark"),u.classList.add("light"),localStorage.setItem("theme","light"))},l=()=>{if(s)return;i(!0);const c=!n;r(c),a(c),setTimeout(()=>i(!1),300)};return o.jsxs("button",{onClick:l,className:`
        relative flex items-center justify-center
        w-12 h-6 rounded-full transition-all duration-300 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${n?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-600"}
        ${s?"scale-95":"hover:scale-105"}
        ${e}
      `,title:n?"Switch to light mode":"Switch to dark mode","aria-label":n?"Switch to light mode":"Switch to dark mode",disabled:s,children:[o.jsx("div",{className:`
        absolute inset-0 rounded-full transition-all duration-300
        ${n?"bg-gradient-to-r from-blue-600 to-blue-500":"bg-gradient-to-r from-gray-300 to-gray-200"}
      `}),o.jsxs("div",{className:`
        relative w-5 h-5 rounded-full transition-all duration-300 ease-in-out transform
        bg-white dark:bg-gray-100 shadow-lg
        flex items-center justify-center
        ${n?"translate-x-3":"-translate-x-3"}
        ${s?"scale-90":""}
      `,children:[o.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${n?"opacity-100":"opacity-0"}
        `,children:o.jsx(YP,{className:"w-3 h-3 text-blue-600 dark:text-blue-500"})}),o.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${n?"opacity-0":"opacity-100"}
        `,children:o.jsx(eT,{className:"w-3 h-3 text-yellow-500"})})]}),o.jsx("div",{className:`
        absolute inset-0 rounded-full opacity-0 transition-opacity duration-300
        ${n?"bg-blue-400 group-hover:opacity-20":"bg-yellow-400 group-hover:opacity-20"}
        pointer-events-none
      `})]})};function Ac(){const[e,t]=j.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return j.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=s=>{t(s.matches)};if(n.addEventListener)return n.addEventListener("change",r),()=>n.removeEventListener("change",r);if(n.addListener)return n.addListener(r),()=>n.removeListener(r)},[]),e}const aT={normal:200},uk={easeOut:[0,0,.2,1],spring:{type:"spring",stiffness:300,damping:30}},oT={slideUp:{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:aT.normal/1e3,ease:uk.easeOut}}},lT={container:{animate:{transition:{staggerChildren:.05,delayChildren:.1}}}},$0=uk.spring,cT=oT.slideUp,uT=lT.container;function dT({state:e,isConnected:t,isSidebarCollapsed:n,setIsSidebarCollapsed:r,isCompactMode:s,setIsCompactMode:i,isMobileMenuOpen:a,setIsMobileMenuOpen:l,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h,setActiveSD:m}){var E;const f=Ac(),g=er(),v=[{path:"/",icon:Em,label:"Dashboard",tooltip:"Dashboard"},{path:"/strategic-directives",icon:xt,label:"Strategic Directives",tooltip:"SDs"},{path:"/backlog",icon:so,label:"Backlog",tooltip:"Backlog"},{path:"/stories",icon:vl,label:"User Stories",tooltip:"Stories"},{path:"/directive-lab",icon:rk,label:"Directive Lab",tooltip:"Lab"},{path:"/pr-reviews",icon:_m,label:"PR Reviews",tooltip:"PRs"}],k={expanded:{width:"16rem",transition:f?{duration:0}:$0},collapsed:{width:"4rem",transition:f?{duration:0}:$0}},x={rest:{scale:1,transition:{duration:.2}},hover:{scale:f?1:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:f?1:.98}},y={hidden:{opacity:0,x:-10,transition:{duration:.1}},visible:{opacity:1,x:0,transition:{duration:.2,delay:.5}}},p=g.pathname==="/directive-lab",S=s?"p-2 pt-16 md:pt-2":p?"p-0":"p-6 pt-20 md:pt-6";return o.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 relative",children:[o.jsx(ee.button,{onClick:()=>l(!a),className:"mobile-menu-button fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg md:hidden",whileHover:{scale:f?1:1.05},whileTap:{scale:f?1:.95},children:o.jsx(zt,{mode:"wait",children:a?o.jsx(ee.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:f?0:.2},children:o.jsx(Os,{className:"w-6 h-6"})},"close"):o.jsx(ee.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:f?0:.2},children:o.jsx(XP,{className:"w-6 h-6"})},"menu")})}),o.jsx(zt,{children:a&&o.jsx(ee.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>l(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:f?0:.2}})}),o.jsxs(ee.div,{className:`
          fixed md:static inset-y-0 left-0 bg-gradient-to-br from-purple-600 via-purple-700 to-blue-800 shadow-2xl 
          z-50 flex flex-col overflow-hidden transition-transform duration-300 ease-in-out
          md:transform-none backdrop-blur-xl
          ${a?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,initial:!1,animate:n?"collapsed":"expanded",variants:k,children:[o.jsxs("div",{className:`${s?"p-2":"p-4"} border-b border-purple-400/30 backdrop-blur-sm relative overflow-hidden`,children:[o.jsx(ee.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:f?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:f?0:4,repeat:1/0,ease:"linear"}}),o.jsxs("div",{className:`flex items-center ${n?"justify-center":"justify-between"}`,children:[o.jsx(zt,{children:!n&&o.jsx(ee.h1,{className:"text-xl font-bold text-white relative z-10 drop-shadow-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:f?0:.15},children:"LEO Protocol"})}),o.jsx(ee.button,{onClick:()=>r(!n),className:"hidden md:block p-1 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/10 relative z-10",title:n?"Expand sidebar":"Collapse sidebar",whileHover:{scale:f?1:1.1},whileTap:{scale:f?1:.9},children:o.jsx(ee.div,{animate:{rotate:n?0:180},transition:{duration:f?0:.15},children:o.jsx(Wt,{className:"w-5 h-5"})})})]}),o.jsx(zt,{children:!n&&o.jsxs(ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:f?0:.15},children:[o.jsxs("div",{className:"mt-2 flex items-center",children:[o.jsx(ee.div,{className:`w-2 h-2 rounded-full mr-2 ${t?"bg-green-500":"bg-red-500"}`,animate:{scale:t?[1,1.2,1]:1},transition:{duration:2,repeat:t?1/0:0,repeatType:"loop"}}),o.jsx("span",{className:"text-sm text-purple-100 relative z-10",children:t?"Connected":"Disconnected"})]}),o.jsxs(ee.span,{className:"text-xs px-2 py-1 bg-white/20 text-white rounded-full inline-block mt-2 backdrop-blur-sm border border-white/20 relative z-10 font-medium",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:["v",((E=e.leoProtocol)==null?void 0:E.version)||"detecting..."]})]})})]}),o.jsxs("nav",{className:`flex-1 ${s?"p-2":"p-4"} relative`,children:[o.jsx(ee.div,{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"20px 20px"},animate:{backgroundPosition:f?"0px 0px":["0px 0px","20px 20px","0px 0px"]},transition:{duration:f?0:20,repeat:1/0,ease:"linear"}}),o.jsx(ee.ul,{className:"space-y-1",variants:uT,initial:"hidden",animate:"visible",children:v.map(({path:N,icon:P,label:T,tooltip:O},D)=>o.jsx(ee.li,{variants:cT,custom:D,children:o.jsx(ZN,{to:N,className:({isActive:M})=>`block ${M?"active-nav-item":""}`,onClick:()=>l(!1),children:({isActive:M})=>o.jsxs(ee.div,{className:`flex items-center ${s?"p-1.5":"p-2"} rounded-lg transition-all duration-300 group relative backdrop-blur-sm ${M?"bg-white/25 text-white border border-white/30 shadow-lg backdrop-blur-md":"hover:bg-white/10 text-purple-100 hover:text-white border border-transparent hover:border-white/20"}`,variants:x,initial:"rest",whileHover:"hover",whileTap:"tap",layout:!0,children:[M&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(ee.div,{className:"absolute inset-0 rounded-lg bg-white/30 blur-xl",initial:{opacity:0,scale:.8},animate:{opacity:.6,scale:1},transition:{duration:.3}}),o.jsx(ee.div,{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400/40 to-blue-400/40",animate:{background:["linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))","linear-gradient(to right, rgba(59, 130, 246, 0.4), rgba(168, 85, 247, 0.4))","linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]}),o.jsx(P,{className:`${s?"w-4 h-4":"w-5 h-5"} ${n?"":"mr-3"} relative z-10`}),o.jsx(zt,{children:!n&&o.jsx(ee.span,{className:`${s?"text-sm":""} relative z-10`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:f?0:.2},children:T})}),o.jsxs(ee.span,{className:`absolute ${n?"left-full ml-2 top-1/2 transform -translate-y-1/2":"bottom-full mb-2 left-1/2 transform -translate-x-1/2"} px-2 py-1 bg-gray-900/90 backdrop-blur-md text-white text-xs rounded whitespace-nowrap pointer-events-none z-30 opacity-0 group-hover:opacity-100 transition-all duration-200 delay-300 border border-white/20 shadow-xl`,style:{visibility:"hidden"},animate:{opacity:0,visibility:"hidden"},whileHover:{opacity:1,visibility:"visible"},children:[O,o.jsx("div",{className:`absolute ${n?"right-full top-1/2 transform -translate-y-1/2 border-l-0 border-r-4 border-r-gray-900 dark:border-r-gray-700 border-t-4 border-b-4 border-t-transparent border-b-transparent":"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900 dark:border-t-gray-700 border-l-4 border-r-4 border-l-transparent border-r-transparent border-b-0"}`})]})]})})},N))})]}),o.jsxs(ee.div,{className:`border-t border-purple-400/30 ${s?"p-2":"p-4"} relative backdrop-blur-sm`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[o.jsxs(ee.button,{onClick:()=>i(!s),className:`w-full flex items-center ${s?"p-1.5":"p-2"} rounded-lg hover:bg-white/10 text-purple-100 hover:text-white transition-all duration-300 group relative border border-transparent hover:border-white/20 backdrop-blur-sm`,title:s?"Standard view":"Compact view",whileHover:{scale:f?1:1.02},whileTap:{scale:f?1:.98},children:[o.jsx(ee.div,{animate:{rotate:s?180:0},transition:{duration:f?0:.15},children:o.jsx(JP,{className:`${s?"w-4 h-4":"w-5 h-5"} ${n?"":"mr-3"}`})}),o.jsx(zt,{children:!n&&o.jsx(ee.span,{className:s?"text-sm":"",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?"Standard View":"Compact View"})}),o.jsx(zt,{children:n&&o.jsx(ee.span,{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap pointer-events-none z-10",variants:y,initial:"hidden",whileHover:"visible",exit:"hidden",children:s?"Standard":"Compact"})})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-purple-400/30",children:o.jsx(bo,{onRefresh:h,isCompact:s,isCollapsed:n})})]})]}),o.jsxs(ee.div,{className:"flex-1 flex flex-col overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:f?0:.08},style:{paddingTop:"env(safe-area-inset-top)"},children:[o.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-600 via-purple-700 to-blue-800 border-b border-purple-400/30 shadow-lg relative overflow-hidden backdrop-blur-xl",children:[o.jsx(ee.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:f?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:f?0:4,repeat:1/0,ease:"linear"}}),o.jsx(ee.div,{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"40px 40px"},animate:{backgroundPosition:f?"0px 0px":["0px 0px","40px 40px","0px 0px"]},transition:{duration:f?0:15,repeat:1/0,ease:"linear"}}),o.jsx("div",{className:"flex-1 relative z-10",children:o.jsx(iT,{isCompact:s})}),o.jsx("div",{className:"flex items-center px-4 py-2 relative z-10",children:o.jsx(ck,{})})]}),o.jsx("main",{className:`flex-1 overflow-y-auto ${S}`,children:o.jsx(zt,{children:o.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:f?0:.1,ease:"easeOut"},children:o.jsx(VN,{context:{state:e,isCompactMode:s,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h}})},g.pathname)})})]})]})}var Rm={},bh={exports:{}};(function(e,t){(function(n,r){r(t)})(jt,function(n){var r=function(){return r=Object.assign||function(i){for(var a,l=1,c=arguments.length;l<c;l++)for(var u in a=arguments[l])Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u]);return i},r.apply(this,arguments)},s=function(){function i(a,l,c){var u=this;this.endVal=l,this.options=c,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(d){u.startTime||(u.startTime=d);var h=d-u.startTime;u.remaining=u.duration-h,u.useEasing?u.countDown?u.frameVal=u.startVal-u.easingFn(h,0,u.startVal-u.endVal,u.duration):u.frameVal=u.easingFn(h,u.startVal,u.endVal-u.startVal,u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(h/u.duration);var m=u.countDown?u.frameVal<u.endVal:u.frameVal>u.endVal;u.frameVal=m?u.endVal:u.frameVal,u.frameVal=Number(u.frameVal.toFixed(u.options.decimalPlaces)),u.printValue(u.frameVal),h<u.duration?u.rAF=requestAnimationFrame(u.count):u.finalEndVal!==null?u.update(u.finalEndVal):u.options.onCompleteCallback&&u.options.onCompleteCallback()},this.formatNumber=function(d){var h,m,f,g,v=d<0?"-":"";h=Math.abs(d).toFixed(u.options.decimalPlaces);var k=(h+="").split(".");if(m=k[0],f=k.length>1?u.options.decimal+k[1]:"",u.options.useGrouping){g="";for(var x=3,y=0,p=0,S=m.length;p<S;++p)u.options.useIndianSeparators&&p===4&&(x=2,y=1),p!==0&&y%x==0&&(g=u.options.separator+g),y++,g=m[S-p-1]+g;m=g}return u.options.numerals&&u.options.numerals.length&&(m=m.replace(/[0-9]/g,function(E){return u.options.numerals[+E]}),f=f.replace(/[0-9]/g,function(E){return u.options.numerals[+E]})),v+u.options.prefix+m+f+u.options.suffix},this.easeOutExpo=function(d,h,m,f){return m*(1-Math.pow(2,-10*d/f))*1024/1023+h},this.options=r(r({},this.defaults),c),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el=typeof a=="string"?document.getElementById(a):a,l=l??this.parse(this.el.innerHTML),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(l),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,a):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return u.handleScroll(u)}),window.onscroll=function(){window.onScrollFns.forEach(function(d){return d()})},this.handleScroll(this)))}return i.prototype.handleScroll=function(a){if(a&&window&&!a.once){var l=window.innerHeight+window.scrollY,c=a.el.getBoundingClientRect(),u=c.top+window.pageYOffset,d=c.top+c.height+window.pageYOffset;d<l&&d>window.scrollY&&a.paused?(a.paused=!1,setTimeout(function(){return a.start()},a.options.scrollSpyDelay),a.options.scrollSpyOnce&&(a.once=!0)):(window.scrollY>d||u>l)&&!a.paused&&a.reset()}},i.prototype.determineDirectionAndSmartEasing=function(){var a=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>a;var l=a-this.startVal;if(Math.abs(l)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=a;var c=this.countDown?1:-1;this.endVal=a+c*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=a,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},i.prototype.start=function(a){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),a&&(this.options.onCompleteCallback=a),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},i.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},i.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},i.prototype.update=function(a){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(a),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},i.prototype.printValue=function(a){var l;if(this.el){var c=this.formattingFn(a);!((l=this.options.plugin)===null||l===void 0)&&l.render?this.options.plugin.render(this.el,c):this.el.tagName==="INPUT"?this.el.value=c:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=c:this.el.innerHTML=c}},i.prototype.ensureNumber=function(a){return typeof a=="number"&&!isNaN(a)},i.prototype.validateValue=function(a){var l=Number(a);return this.ensureNumber(l)?l:(this.error="[CountUp] invalid start or end value: ".concat(a),null)},i.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},i.prototype.parse=function(a){var l=function(h){return h.replace(/([.,'  ])/g,"\\$1")},c=l(this.options.separator),u=l(this.options.decimal),d=a.replace(new RegExp(c,"g"),"").replace(new RegExp(u,"g"),".");return parseFloat(d)},i}();n.CountUp=s})})(bh,bh.exports);var hT=bh.exports;Object.defineProperty(Rm,"__esModule",{value:!0});var gt=j,fT=hT;function mT(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function M0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function rc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M0(Object(n),!0).forEach(function(r){xT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pT(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gT(e){var t=pT(e,"string");return typeof t=="symbol"?t:String(t)}function xT(e,t,n){return t=gT(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wh.apply(this,arguments)}function yT(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function dk(e,t){if(e==null)return{};var n=yT(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vT(e,t){return bT(e)||mT(e,t)||wT(e,t)||kT()}function bT(e){if(Array.isArray(e))return e}function wT(e,t){if(e){if(typeof e=="string")return F0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F0(e,t)}}function F0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?gt.useLayoutEffect:gt.useEffect;function Tn(e){var t=gt.useRef(e);return jT(function(){t.current=e}),gt.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current.apply(void 0,r)},[])}var ST=function(t,n){var r=n.decimal,s=n.decimals,i=n.duration,a=n.easingFn,l=n.end,c=n.formattingFn,u=n.numerals,d=n.prefix,h=n.separator,m=n.start,f=n.suffix,g=n.useEasing,v=n.useGrouping,k=n.useIndianSeparators,x=n.enableScrollSpy,y=n.scrollSpyDelay,p=n.scrollSpyOnce,S=n.plugin;return new fT.CountUp(t,l,{startVal:m,duration:i,decimal:r,decimalPlaces:s,easingFn:a,formattingFn:c,numerals:u,separator:h,prefix:d,suffix:f,plugin:S,useEasing:g,useIndianSeparators:k,useGrouping:v,enableScrollSpy:x,scrollSpyDelay:y,scrollSpyOnce:p})},NT=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],_T={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},hk=function(t){var n=Object.fromEntries(Object.entries(t).filter(function(O){var D=vT(O,2),M=D[1];return M!==void 0})),r=gt.useMemo(function(){return rc(rc({},_T),n)},[t]),s=r.ref,i=r.startOnMount,a=r.enableReinitialize,l=r.delay,c=r.onEnd,u=r.onStart,d=r.onPauseResume,h=r.onReset,m=r.onUpdate,f=dk(r,NT),g=gt.useRef(),v=gt.useRef(),k=gt.useRef(!1),x=Tn(function(){return ST(typeof s=="string"?s:s.current,f)}),y=Tn(function(O){var D=g.current;if(D&&!O)return D;var M=x();return g.current=M,M}),p=Tn(function(){var O=function(){return y(!0).start(function(){c==null||c({pauseResume:S,reset:E,start:P,update:N})})};l&&l>0?v.current=setTimeout(O,l*1e3):O(),u==null||u({pauseResume:S,reset:E,update:N})}),S=Tn(function(){y().pauseResume(),d==null||d({reset:E,start:P,update:N})}),E=Tn(function(){y().el&&(v.current&&clearTimeout(v.current),y().reset(),h==null||h({pauseResume:S,start:P,update:N}))}),N=Tn(function(O){y().update(O),m==null||m({pauseResume:S,reset:E,start:P})}),P=Tn(function(){E(),p()}),T=Tn(function(O){i&&(O&&E(),p())});return gt.useEffect(function(){k.current?a&&T(!0):(k.current=!0,T())},[a,k,T,l,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.formattingFn]),gt.useEffect(function(){return function(){E()}},[E]),{start:P,pauseResume:S,reset:E,update:N,getCountUp:y}},ET=["className","redraw","containerProps","children","style"],CT=function(t){var n=t.className,r=t.redraw,s=t.containerProps,i=t.children,a=t.style,l=dk(t,ET),c=gt.useRef(null),u=gt.useRef(!1),d=hk(rc(rc({},l),{},{ref:c,startOnMount:typeof i!="function"||t.delay===0,enableReinitialize:!1})),h=d.start,m=d.reset,f=d.update,g=d.pauseResume,v=d.getCountUp,k=Tn(function(){h()}),x=Tn(function(S){t.preserveValue||m(),f(S)}),y=Tn(function(){if(typeof t.children=="function"&&!(c.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}v()});gt.useEffect(function(){y()},[y]),gt.useEffect(function(){u.current&&x(t.end)},[t.end,x]);var p=r&&t;return gt.useEffect(function(){r&&u.current&&k()},[k,r,p]),gt.useEffect(function(){!r&&u.current&&k()},[k,r,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.className,t.formattingFn]),gt.useEffect(function(){u.current=!0},[]),typeof i=="function"?i({countUpRef:c,start:h,reset:m,update:f,pauseResume:g,getCountUp:v}):gt.createElement("span",wh({className:n,ref:c,style:a},s),typeof t.start<"u"?v().formattingFn(t.start):"")},fi=Rm.default=CT;Rm.useCountUp=hk;function PT({sdId:e,onClose:t}){var d,h;const[n,r]=j.useState(null),[s,i]=j.useState(!0),[a,l]=j.useState(null);j.useEffect(()=>{c()},[e]);const c=async()=>{try{i(!0);const m=await fetch(`/api/progress/audit/${e||""}`);if(!m.ok)throw new Error("Failed to fetch audit");const f=await m.json();r(f)}catch(m){l(m.message)}finally{i(!1)}};if(s)return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})});if(a)return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[o.jsxs("p",{className:"text-red-500",children:["Error: ",a]}),o.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-gray-500 text-white rounded",children:"Close"})]})});if(!n)return null;const u=m=>m.complete?"text-green-500":m.progress>0?"text-yellow-500":"text-gray-400";return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(tk,{className:"w-6 h-6 mr-2 text-blue-500"}),o.jsx("h2",{className:"text-xl font-semibold",children:"Progress Validation Audit"})]}),o.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:o.jsx(Os,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:n.title}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Calculated Progress"}),o.jsxs("p",{className:"text-2xl font-bold",children:[n.summary.calculatedProgress,"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Phase"}),o.jsx("p",{className:"text-2xl font-bold",children:n.summary.currentPhase})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Database Status"}),o.jsx("p",{className:"text-2xl font-bold",children:n.summary.databaseStatus})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Can Complete"}),o.jsx("div",{className:"text-2xl font-bold",children:n.summary.canComplete?o.jsx(ze,{className:"w-8 h-8 text-green-500"}):o.jsx(Yn,{className:"w-8 h-8 text-red-500"})})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(xr,{className:"w-5 h-5 mr-2"}),"Phase Breakdown"]}),o.jsx("div",{className:"space-y-4",children:Object.entries(n.phaseBreakdown).map(([m,f])=>o.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsxs("span",{className:`text-lg font-semibold ${u(f)}`,children:[m," Agent"]}),o.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(Weight: ",f.weight,"%)"]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("span",{className:"text-lg font-bold",children:[f.progress,"%"]}),f.complete&&o.jsx(ze,{className:"w-5 h-5 text-green-500"})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3",children:o.jsx("div",{className:`h-2 rounded-full ${f.complete?"bg-green-500":"bg-blue-500"}`,style:{width:`${f.progress}%`}})}),f.checklist&&f.checklist.length>0&&o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Checklist Items:"}),o.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:f.checklist.map((g,v)=>o.jsxs("div",{className:"flex items-start text-sm",children:[g.checked?o.jsx(Ut,{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}):o.jsx(Pm,{className:"w-4 h-4 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),o.jsxs("span",{className:g.checked?"text-gray-600 line-through":"",children:[g.text,g.source&&o.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",g.source,")"]})]})]},v))})]}),m==="EXEC"&&f.indicators&&o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Implementation Indicators:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(f.indicators.indicators).map(([g,v])=>o.jsxs("div",{className:"flex items-center text-sm",children:[v.status?o.jsx(ze,{className:"w-4 h-4 text-green-500 mr-2"}):o.jsx(Yn,{className:"w-4 h-4 text-red-500 mr-2"}),o.jsxs("span",{children:[g,": ",v.details||"Not found"]})]},g))})]})]},m))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(VP,{className:"w-5 h-5 mr-2"}),"Progress Calculation"]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[((h=(d=n.phaseBreakdown)==null?void 0:d.PLAN)==null?void 0:h.checklist)&&n.phaseBreakdown.PLAN.checklist.filter(m=>m.text.includes("PRD created and saved")||m.text.includes("requirements mapped")||m.text.includes("specifications complete")||m.text.includes("Prerequisites verified")||m.text.includes("Risk mitigation")||m.text.includes("Context usage")).every(m=>m.checked)&&o.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded",children:[o.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:"⚠️ Progress Calculation Note:"}),o.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"The PLAN phase handoff checklist is complete (PRD created with all handoff items done), but the system is incorrectly counting implementation acceptance criteria as PLAN phase items. According to LEO Protocol v4.0, PLAN phase should be 100% complete when the PRD is created with the handoff checklist done. The actual progress should be approximately 66% (LEAD + PLAN complete)."})]}),o.jsx("p",{className:"font-mono text-sm mb-2",children:n.calculations.formula}),o.jsx("div",{className:"space-y-1",children:n.calculations.breakdown.map((m,f)=>o.jsx("p",{className:`font-mono text-sm ${m.startsWith("Total")?"font-bold text-blue-600 dark:text-blue-400":""}`,children:m},f))})]})]}),n.validation.uncompletedItems>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(Ot,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Validation Issues"]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("p",{className:"font-semibold mb-2",children:[n.validation.uncompletedItems," uncompleted items preventing completion:"]}),n.validation.details.map((m,f)=>o.jsxs("div",{className:"mb-2",children:[o.jsxs("p",{className:"font-medium text-sm",children:[m.source," (",m.phase,"): ",m.items.length," items"]}),o.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400 ml-4",children:m.items.map((g,v)=>o.jsx("li",{children:g},v))})]},f))]})]}),n.recommendations.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(xt,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),o.jsx("div",{className:"space-y-2",children:n.recommendations.map((m,f)=>o.jsxs("div",{className:`flex items-start p-3 rounded-lg ${m.includes("WARNING")?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"}`,children:[m.includes("WARNING")?o.jsx(Ot,{className:"w-5 h-5 text-red-500 mr-2 flex-shrink-0 mt-0.5"}):o.jsx(ze,{className:"w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"text-sm",children:m})]},f))})]})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("p",{className:"text-xs text-gray-500",children:["Generated: ",new Date(n.timestamp).toLocaleString()]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Refresh"}),o.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Close"})]})]})]})})}function TT({strategicDirectives:e,prds:t,currentSD:n,onSetActiveSD:r,isCompact:s}){var Ft,Q,Xe,hn,Ze,it,Zt;const i=Ac(),[a,l]=j.useState(!1),[c,u]=j.useState(!1),[d,h]=j.useState(!1),[m,f]=j.useState(!1),[g,v]=j.useState(0),[k,x]=j.useState(null),[y,p]=j.useState(""),[S,E]=j.useState({}),[N,P]=j.useState(null),[T,O]=j.useState(!1),D=j.useRef(null),M=j.useRef(null),K=j.useRef(null),he=j.useRef(null);j.useEffect(()=>{function I(w){D.current&&!D.current.contains(w.target)&&l(!1)}if(a)return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[a]);const $=I=>{E(w=>({...w,[I]:!w[I]}))},L=I=>({LEAD_PLANNING:"Strategic planning and directive creation",PLAN_DESIGN:"Technical planning and PRD creation",EXEC_IMPLEMENTATION:"Implementation and development work",PLAN_VERIFICATION:"Testing and verification",LEAD_APPROVAL:"Final approval and deployment",COMPLETE:"All phases completed"})[I]||"Unknown phase",q=I=>{var _e,Pe,be,et,R,U,ne,ie,re;if(!I)return[];const w=[];I.checklist&&I.checklist.filter(ve=>!ve.checked).forEach(ve=>{w.push({type:"SD",text:ve.text,phase:"LEAD_PLANNING"})});const H=((_e=I.prds)==null?void 0:_e[0])||(t==null?void 0:t.find(ve=>ve.directiveId===I.id||ve.id===`PRD-${I.id}`))||((be=(Pe=e.find(ve=>ve.id===I.id))==null?void 0:Pe.prds)==null?void 0:be[0]);if(H){const qe=(H.plan_checklist||[]).filter(X=>typeof X=="object"?!X.checked:!0);qe.length>0&&w.push({type:"PLAN_DESIGN",text:`Complete ${qe.length} planning checklist items`,phase:"PLAN_DESIGN",details:qe.slice(0,3).map(X=>typeof X=="object"?X.text:X)});const at=(H.exec_checklist||[]).filter(X=>typeof X=="object"?!X.checked:!0);at.length>0&&w.push({type:"EXEC_IMPLEMENTATION",text:`Complete ${at.length} implementation tasks`,phase:"EXEC_IMPLEMENTATION",details:at.slice(0,3).map(X=>typeof X=="object"?X.text:X)});const G=(H.validation_checklist||[]).filter(X=>typeof X=="object"?!X.checked:!0);G.length>0&&w.push({type:"PLAN_VERIFICATION",text:`Complete ${G.length} verification items`,phase:"PLAN_VERIFICATION",details:G.slice(0,3).map(X=>typeof X=="object"?X.text:X)})}const se=typeof I.progress=="object"?I.progress.total:I.progress;return se>=100&&w.length>0?(console.log("⚠️ Progress/Pending Mismatch Detected:",{sdId:I.id,sdProgress:se,pendingCount:w.length,message:"SD shows 100% but has pending items - clearing pending list to match progress"}),[]):(w.length>0&&console.log("🔍 Pending Items Debug:",{sdId:I.id,sdProgress:se,totalPendingItems:w.length,pendingByPhase:w.reduce((ve,qe)=>(ve[qe.phase]=(ve[qe.phase]||0)+1,ve),{}),associatedPRDId:H==null?void 0:H.id,prdSource:H?(et=I.prds)!=null&&et[0]?"SD.prds":t!=null&&t.find(ve=>ve.directiveId===I.id)?"global prds prop":"strategicDirectives fallback":"none",sdChecklist:(R=I.checklist)==null?void 0:R.length,uncheckedSDItems:(U=I.checklist)==null?void 0:U.filter(ve=>!ve.checked).length,prdChecklists:H?{plan:(ne=H.plan_checklist)==null?void 0:ne.length,exec:(ie=H.exec_checklist)==null?void 0:ie.length,validation:(re=H.validation_checklist)==null?void 0:re.length}:null}),w)},F=(I,w,H)=>{var ie,re,ve,qe,ft,at,V,G,X,ce,te,pe,ke,ae,mt,tt,tr,ot,nr,os,ls,rr,wr,kr,jr,me,fn,cs,qi,oe,Je,en,Nt,ep,tp,np,rp,sp;if(!I)return"";const se=((ie=I.checklist)==null?void 0:ie.filter(we=>!we.checked))||[],_e=((ve=(re=I.leoPhase)==null?void 0:re.validation)==null?void 0:ve.details)||[],Pe=((qe=I.leoPhase)==null?void 0:qe.remainingTasks)||[],be=((ft=I.leoPhase)==null?void 0:ft.phaseProgress)||{},et=((V=(at=H==null?void 0:H.phaseBreakdown)==null?void 0:at.PLAN)==null?void 0:V.checklist)||[],R=et.filter(we=>we.text.includes("PRD created and saved")||we.text.includes("SD requirements mapped")||we.text.includes("Technical specifications complete")||we.text.includes("Prerequisites verified")||we.text.includes("Test requirements")||we.text.includes("Acceptance criteria")||we.text.includes("Risk mitigation")||we.text.includes("Context usage")||we.text.includes("summary created")||we.text.includes("architecture documented")||we.text.includes("phases clearly defined")||we.text.includes("Documentation requirements")),U=et.filter(we=>!R.includes(we)&&!we.checked);return`# Strategic Directive Completion Request
Generated: ${new Date().toLocaleString()}

## Context
**Project**: LEO Protocol Dashboard Implementation
**SD ID**: ${I.id}
**Title**: ${I.title}
**Priority**: ${((G=I.metadata)==null?void 0:G.priority)||"Normal"}
**Owner**: ${((X=I.metadata)==null?void 0:X.owner)||"System Administrator"}

## Current Status
- **Overall Progress**: ${w}% complete
- **Active Phase**: ${((ce=I.leoPhase)==null?void 0:ce.current)||"LEAD"} Agent
- **Phase Status**: ${((te=I.leoPhase)==null?void 0:te.status)||"In Progress"}
- **Database Status**: ${((pe=I.metadata)==null?void 0:pe.Status)||"In Progress"}

## Phase Breakdown
### LEAD Phase (Strategic Planning) - ${((ke=be.LEAD)==null?void 0:ke.progress)||0}%
Status: ${(ae=be.LEAD)!=null&&ae.complete?"✅ Complete":"⏳ In Progress"}

### PLAN Phase (Technical Planning) - ${((mt=be.PLAN)==null?void 0:mt.progress)||0}%
Status: ${(tt=be.PLAN)!=null&&tt.complete?"✅ Complete":((tr=be.PLAN)==null?void 0:tr.progress)>0?"⏳ In Progress":"⏸️ Not Started"}

### EXEC Phase (Implementation) - ${((ot=be.EXEC)==null?void 0:ot.progress)||0}%
Status: ${(nr=be.EXEC)!=null&&nr.complete?"✅ Complete":((os=be.EXEC)==null?void 0:os.progress)>0?"⏳ In Progress":"⏸️ Not Started"}

## Remaining Tasks

### Strategic Directive Checklist (${se.length} items)
${se.length>0?se.map(we=>`- [ ] ${we.text}`).join(`
`):"✅ All SD checklist items complete"}

${U.length>0?`### Implementation Tasks (EXEC Phase - ${U.length} items)
Note: PLAN phase handoff checklist is complete. These are EXEC phase implementation acceptance criteria.
${U.slice(0,10).map(we=>`- [ ] ${we.text}`).join(`
`)}
${U.length>10?`
... and ${U.length-10} more implementation tasks`:""}`:""}

${Pe.length>0?`### Phase-Specific Tasks
${Pe.map(we=>`
**${we.phase} Phase**: ${we.description}
${we.tasks?we.tasks.map(_o=>`  - ${_o}`).join(`
`):""}`).join(`
`)}`:""}

## Validation Issues
${_e.length>0?_e.map(we=>`- **${we.source}** (${we.phase}): ${we.items.length} unchecked items`).join(`
`):"✅ No validation issues"}

${H?`## Progress Audit Analysis

### Important Note on Progress Calculation
The dashboard currently shows ${w}% overall progress. However, according to LEO Protocol v4.0:
- LEAD Phase (33.33%): ${(ls=be.LEAD)!=null&&ls.complete?"✅ COMPLETE":"In Progress"} 
- PLAN Phase (33.33%): ${(rr=be.PLAN)!=null&&rr.complete||R.every(we=>we.checked)?"✅ COMPLETE (PRD created with handoff checklist done)":"In Progress"}
- EXEC Phase (33.34%): ${((wr=be.EXEC)==null?void 0:wr.progress)>0?`In Progress (${(kr=be.EXEC)==null?void 0:kr.progress}%)`:"Not Started"}

**Actual Progress**: ${(jr=be.LEAD)!=null&&jr.complete&&((me=be.PLAN)!=null&&me.complete||R.every(we=>we.checked))?"66%":w+"%"} - PLAN phase should be marked complete when PRD is created with handoff checklist done.

### Calculation Breakdown
${((cs=(fn=H.calculations)==null?void 0:fn.breakdown)==null?void 0:cs.join(`
`))||"No calculation data available"}

### Audit Recommendations
${((qi=H.recommendations)==null?void 0:qi.length)>0?H.recommendations.map(we=>`- ${we}`).join(`
`):"✅ No issues found in audit"}

### Implementation Indicators
${(Je=(oe=H.phaseBreakdown)==null?void 0:oe.EXEC)!=null&&Je.indicators?Object.entries(H.phaseBreakdown.EXEC.indicators.indicators||{}).map(([we,_o])=>`- ${we}: ${_o.status?"✅":"❌"} ${_o.details||""}`).join(`
`):"No implementation indicators available"}
`:""}

## Next Steps
${((en=I.leoPhase)==null?void 0:en.current)==="LEAD"&&((Nt=be.LEAD)!=null&&Nt.complete)?`1. Create a Product Requirements Document (PRD) for technical planning
2. Perform LEAD-to-PLAN handoff`:""}
${((ep=I.leoPhase)==null?void 0:ep.current)==="PLAN"&&((tp=be.PLAN)!=null&&tp.complete)?`1. Begin implementation phase
2. Perform PLAN-to-EXEC handoff`:""}
${((np=I.leoPhase)==null?void 0:np.current)==="EXEC"&&((rp=be.EXEC)!=null&&rp.complete)?`1. Complete final testing and validation
2. Perform EXEC-to-COMPLETE handoff`:""}
${se.length>0||et.length>0?"Priority: Complete all unchecked items listed above":""}

## Instructions
Please help me complete the remaining tasks for this Strategic Directive following LEO Protocol v4.0 standards. Focus on:
1. Completing all unchecked checklist items
2. Ensuring proper handoffs between phases
3. Maintaining documentation and test coverage
4. Following the established project patterns and conventions

${(sp=I.metadata)!=null&&sp.PRD?`PRD Location: ${I.metadata.PRD}`:"Note: No PRD linked yet"}

Please proceed with the implementation.`},C=n?e.find(I=>I.id===n):null,A=!C&&e.length>0?e.find(I=>{var se,_e;if(I.status==="completed"||I.status==="complete")return!1;const w=((se=I.checklist)==null?void 0:se.filter(Pe=>Pe.checked).length)||0,H=((_e=I.checklist)==null?void 0:_e.length)||0;return H>0&&w<H})||e.find(I=>I.status!=="completed"&&I.status!=="complete"):null,b=C||A;if(j.useEffect(()=>{(c||g>0)&&b&&fetch(`/api/progress/audit/${b.id}`).then(I=>I.json()).then(I=>x(I)).catch(I=>console.error("Failed to fetch audit:",I))},[c,g,b==null?void 0:b.id]),!b)return o.jsx("div",{className:`bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 border-l-4 border-gray-400 ${s?"p-3":"p-4"} mb-6 rounded-lg`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ot,{className:`${s?"w-5 h-5":"w-6 h-6"} text-gray-500 mr-3`}),o.jsxs("div",{children:[o.jsx("h3",{className:`${s?"text-sm":"text-base"} font-semibold text-gray-700 dark:text-gray-300`,children:"No Active Strategic Directive"}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 mt-1`,children:"Create a new Strategic Directive to start tracking progress"})]})]})});const z=((Ft=b.checklist)==null?void 0:Ft.filter(I=>I.checked).length)||0,Y=((Q=b.checklist)==null?void 0:Q.length)||0,_=b.progress!==void 0?typeof b.progress=="object"?b.progress.total:b.progress:Y>0?Math.round(z/Y*100):0,xe=_===100?{status:"Complete",color:"text-green-700 dark:text-green-300",bgColor:"from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",borderColor:"border-green-400",progressColor:"bg-green-500",icon:ze}:_>=50?{status:"In Progress",color:"text-blue-700 dark:text-blue-300",bgColor:"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",borderColor:"border-blue-400",progressColor:"bg-blue-500",icon:Xr}:{status:"Just Started",color:"text-amber-700 dark:text-amber-300",bgColor:"from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20",borderColor:"border-amber-400",progressColor:"bg-amber-500",icon:on},fe=xe.icon,Ce=e.filter(I=>{var H,se;if(!y.trim())return!0;const w=y.toLowerCase();return I.id.toLowerCase().includes(w)||I.title&&I.title.toLowerCase().includes(w)||((H=I.metadata)==null?void 0:H.Status)&&I.metadata.Status.toLowerCase().includes(w)||((se=I.metadata)==null?void 0:se.Priority)&&I.metadata.Priority.toLowerCase().includes(w)}),vt=()=>{l(!a),a||setTimeout(()=>{var I;(I=K.current)==null||I.focus()},100)},Nn=I=>{p(I.target.value)},dn=I=>{if(I.key==="Escape")l(!1),p("");else if(I.key==="Enter"&&Ce.length>0){const w=Ce[0];r&&w.id!==n&&(r(w.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:w.id,sd:w}}))),l(!1),p("")}};return o.jsxs("div",{className:`bg-gradient-to-r ${xe.bgColor} border-l-4 ${xe.borderColor} ${s?"p-2 sm:p-3":"p-3 sm:p-4"} mb-4 sm:mb-6 rounded-lg shadow-sm`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[o.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[o.jsx(fe,{className:`${s?"w-4 sm:w-5 h-4 sm:h-5":"w-5 sm:w-6 h-5 sm:h-6"} ${xe.color} mr-2 sm:mr-3 flex-shrink-0`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"relative",ref:D,children:[o.jsxs(ee.button,{onClick:vt,className:`flex items-center justify-between w-full text-left ${s?"text-xs sm:text-sm":"text-sm sm:text-base"} font-semibold ${xe.color} hover:bg-white/10 rounded px-1 sm:px-2 py-1 transition-colors min-w-0`,whileHover:{scale:i?1:1.02},whileTap:{scale:i?1:.98},"aria-label":"Select Strategic Directive","aria-expanded":a,"aria-haspopup":"listbox",children:[o.jsxs("span",{className:"truncate",children:["Active: ",b.title&&b.title!=="[Enter Strategic Directive Title]"?b.title:b.id]}),o.jsx(ee.div,{animate:{rotate:a?180:0},transition:{duration:i?0:.2,ease:"easeOut"},className:"flex-shrink-0 ml-1",children:o.jsx(Dn,{className:`${s?"w-3 sm:w-4 h-3 sm:h-4":"w-4 sm:w-5 h-4 sm:h-5"}`})})]}),o.jsx(zt,{children:a&&e.length>0&&o.jsxs(ee.div,{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-80 flex flex-col",initial:{opacity:0,y:i?0:-10,scale:i?1:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:i?0:-10,scale:i?1:.95},transition:{duration:i?0:.2,ease:"easeOut"},children:[o.jsxs("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:[o.jsx("input",{ref:K,type:"text",placeholder:"Search Strategic Directives...",value:y,onChange:Nn,onKeyDown:dn,className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-500 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-label":"Search Strategic Directives"}),y&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[Ce.length," of ",e.length," results"]})]}),o.jsx("div",{className:"max-h-60 overflow-y-auto",children:Ce.length===0&&y?o.jsxs("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-sm",children:['No Strategic Directives found for "',y,'"']}):Ce.map((I,w)=>{const H=I.id===n||I.id===b.id&&!n,se=I.progress!==void 0?typeof I.progress=="object"?I.progress.total:I.progress:0;return o.jsx("button",{onClick:()=>(r&&(r(I.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:I.id,sd:I}}))),l(!1),p(""),!1),className:`w-full text-left px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${H?"bg-primary-50 dark:bg-primary-900/20":""}`,children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center",children:[H&&o.jsx(Hn,{className:"w-4 h-4 text-primary-600 mr-2 flex-shrink-0"}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} font-medium text-gray-900 dark:text-white truncate ${H?"ml-0":"ml-6"}`,children:I.title&&I.title!=="[Enter Strategic Directive Title]"?I.title:I.id})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1 overflow-hidden",children:o.jsx(ee.div,{className:`h-1 rounded-full ${se===100?"bg-green-500":se>=50?"bg-blue-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${se}%`},transition:{duration:i?0:.8,ease:"easeOut",delay:i?0:w*.1}})})}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 ml-2`,children:o.jsx(fi,{end:se,duration:i?0:1,preserveValue:!0,suffix:"%"})})]}),I.leoPhase&&o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${I.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${I.leoPhase.phases.PLAN?"bg-green-500":I.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${I.leoPhase.phases.EXEC?"bg-green-500":I.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:I.leoPhase.current})]})]})})},I.id)})})]})})]}),o.jsx("p",{className:`${s?"text-xs":"text-xs sm:text-sm"} text-gray-600 dark:text-gray-400 mt-1`,children:b.leoPhase?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"font-medium",children:"LEO Protocol:"})," ",b.leoPhase.status]}):`${xe.status} • ${z} of ${Y} items completed`}),b.leoPhase&&o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 mt-2",children:[o.jsxs("div",{className:`flex items-center text-xs ${b.leoPhase.phases.LEAD?"text-green-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${b.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),"LEAD"]}),o.jsxs("div",{className:`flex items-center text-xs ${b.leoPhase.phases.PLAN?"text-green-600 font-medium":b.leoPhase.current==="PLAN"?"text-blue-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${b.leoPhase.phases.PLAN?"bg-green-500":b.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),"PLAN"]}),o.jsxs("div",{className:`flex items-center text-xs ${b.leoPhase.phases.EXEC?"text-green-600 font-medium":b.leoPhase.current==="EXEC"?"text-blue-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${b.leoPhase.phases.EXEC?"bg-green-500":b.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),"EXEC"]})]})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1 sm:gap-2 flex-shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:`${s?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold ${xe.color}`,children:o.jsx(fi,{end:_,duration:i?0:2,preserveValue:!0,suffix:"%"})}),((Xe=b.metadata)==null?void 0:Xe.priority)&&o.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Priority: ",b.metadata.priority]})]}),o.jsxs("div",{className:"flex gap-1 flex-wrap justify-end",children:[o.jsxs(ee.button,{onClick:()=>f(!0),className:"flex items-center px-2 py-1 text-xs bg-blue-500/20 dark:bg-blue-400/20 hover:bg-blue-500/30 dark:hover:bg-blue-400/30 rounded transition-all",title:"View progress validation audit",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[o.jsx(tk,{className:"w-3 h-3 mr-1"}),o.jsx("span",{children:"Audit"})]}),o.jsxs(ee.button,{onClick:()=>u(!c),className:"flex items-center px-2 py-1 text-xs bg-purple-500/20 dark:bg-purple-400/20 hover:bg-purple-500/30 dark:hover:bg-purple-400/30 rounded transition-all",title:"Generate AI prompt for remaining tasks",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[o.jsx(nc,{className:"w-3 h-3 mr-1"}),o.jsx("span",{children:"AI Prompt"})]})]})]})]}),o.jsxs("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3 overflow-hidden relative",onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),ref:he,children:[o.jsx(zt,{children:T&&o.jsx(ee.div,{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.2},children:o.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl border border-gray-700 min-w-[250px]",children:[o.jsxs("div",{className:"font-semibold mb-2 flex items-center",children:[o.jsx(vn,{className:"w-3 h-3 mr-1"}),"LEO Protocol Phase Breakdown"]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-green-300",children:"LEAD Planning:"}),o.jsx("span",{className:"font-mono",children:"20%"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-blue-300",children:"PLAN Design:"}),o.jsx("span",{className:"font-mono",children:"20%"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-300",children:"EXEC Implementation:"}),o.jsx("span",{className:"font-mono",children:"30%"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-orange-300",children:"VERIFICATION:"}),o.jsx("span",{className:"font-mono",children:"15%"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-yellow-300",children:"APPROVAL:"}),o.jsx("span",{className:"font-mono",children:"15%"})]})]}),o.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsx("span",{children:"Current Progress:"}),o.jsxs("span",{className:"text-green-400",children:[_,"%"]})]})}),o.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-l-transparent border-r-4 border-r-transparent border-t-4 border-t-gray-800 dark:border-t-gray-900"})]})})}),o.jsx(ee.div,{className:`h-3 ${xe.progressColor} rounded-full relative`,initial:{width:0},animate:{width:`${_}%`},transition:{duration:i?0:1.2,ease:"easeOut",delay:i?0:.2},children:!i&&o.jsxs(o.Fragment,{children:[o.jsx(ee.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,ease:"linear"}}),o.jsx(ee.div,{className:"absolute inset-0 bg-white/20 rounded-full",animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})})]}),o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:`${s?"text-sm":"text-base"} font-semibold ${xe.color}`,children:["Current Phase: ",((hn=b.metadata)==null?void 0:hn["Current Phase"])||"LEAD_PLANNING"]}),o.jsxs("button",{onClick:()=>$("phaseInfo"),className:"flex items-center text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:[o.jsx(vn,{className:"w-3 h-3 mr-1"}),"Info"]})]}),((Ze=b.metadata)==null?void 0:Ze.date)&&o.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Created: ",new Date(b.metadata.date).toLocaleDateString()]})]}),o.jsx(zt,{children:S.phaseInfo&&o.jsx(ee.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.2},className:"overflow-hidden",children:o.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-blue-800 dark:text-blue-200`,children:[o.jsx("strong",{children:"LEO Protocol Flow:"})," LEAD → PLAN → EXEC → VERIFICATION → APPROVAL"]}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-blue-700 dark:text-blue-300 mt-1`,children:L(((it=b.metadata)==null?void 0:it["Current Phase"])||"LEAD_PLANNING")})]})})}),((Zt=b.metadata)==null?void 0:Zt["Phase Progress"])&&typeof b.metadata["Phase Progress"]=="object"&&o.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(b.metadata["Phase Progress"]).map(([I,w])=>{var Pe;const H=typeof w=="number"?w:parseInt(w)||0,se=H===100,_e=I===((Pe=b.metadata)==null?void 0:Pe["Current Phase"]);return o.jsxs("div",{className:`text-center p-2 rounded ${se?"bg-green-50 dark:bg-green-900/20":_e?"bg-blue-50 dark:bg-blue-900/20":"bg-gray-50 dark:bg-gray-800"}`,children:[o.jsx("div",{className:`${s?"text-xs":"text-sm"} font-medium ${se?"text-green-700 dark:text-green-300":_e?"text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400"}`,children:I.split("_")[0]}),o.jsx("div",{className:`${s?"text-xs":"text-sm"} font-bold ${se?"text-green-600 dark:text-green-400":_e?"text-blue-600 dark:text-blue-400":"text-gray-400"}`,children:se?o.jsx(Hn,{className:"w-4 h-4 mx-auto"}):`${H}%`})]},I)})}),(()=>{const I=q(b);return I.length===0?null:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>$("pendingWork"),className:"flex items-center justify-between w-full p-2 bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg border border-amber-200 dark:border-amber-700 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(KP,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 mr-2"}),o.jsxs("span",{className:`${s?"text-sm":"text-base"} font-medium text-amber-800 dark:text-amber-200`,children:[I.length," Pending Task",I.length>1?"s":""]})]}),o.jsx(Wt,{className:`w-4 h-4 text-amber-600 dark:text-amber-400 transform transition-transform ${S.pendingWork?"rotate-90":""}`})]}),o.jsx(zt,{children:S.pendingWork&&o.jsx(ee.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.3},className:"overflow-hidden",children:o.jsxs("div",{className:"space-y-2 pl-4",children:[I.slice(0,5).map((w,H)=>o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 mt-2 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-700 dark:text-gray-300`,children:w.text}),o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:[w.phase.replace("_"," ")," Phase • ",w.type]}),w.details&&w.details.length>0&&o.jsx("div",{className:"mt-1 pl-2 border-l-2 border-amber-200 dark:border-amber-700",children:w.details.map((se,_e)=>o.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:["• ",se]},_e))})]})]},H)),I.length>5&&o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 italic pl-4`,children:["... and ",I.length-5," more items"]})]})})})]})})(),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs($n,{to:`/strategic-directives/${b.id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full transition-colors",children:[o.jsx(xt,{className:"w-3 h-3 mr-1"}),"View SD Document",o.jsx(tc,{className:"w-3 h-3 ml-1"})]}),b.prds&&b.prds.length>0&&o.jsxs($n,{to:`/prds/${b.prds[0].id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50 text-green-700 dark:text-green-300 rounded-full transition-colors",children:[o.jsx(xt,{className:"w-3 h-3 mr-1"}),"View PRD Document",o.jsx(tc,{className:"w-3 h-3 ml-1"})]})]})]}),c&&o.jsxs("div",{className:"mt-4 p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(nc,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mr-2"}),o.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:"AI Prompt for Remaining Tasks"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>v(I=>I+1),className:"flex items-center px-2 py-1 text-xs bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700 rounded transition-all",title:"Refresh prompt with latest data",children:[o.jsx(Ts,{className:"w-3 h-3 mr-1"}),"Refresh"]}),o.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:"×"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("pre",{ref:M,className:"bg-white dark:bg-gray-800 p-3 rounded border border-purple-200 dark:border-purple-700 text-sm overflow-x-auto whitespace-pre-wrap max-h-96 overflow-y-auto",children:F(b,_,k)},g),o.jsx("button",{onClick:()=>{var w;const I=((w=M.current)==null?void 0:w.innerText)||"";navigator.clipboard.writeText(I).then(()=>{h(!0),setTimeout(()=>h(!1),2e3)})},className:`absolute top-2 right-2 flex items-center px-2 py-1 text-xs rounded transition-all ${d?"bg-green-500 text-white":"bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700"}`,children:d?o.jsxs(o.Fragment,{children:[o.jsx(Hn,{className:"w-3 h-3 mr-1"}),"Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(Sm,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Copy this prompt and paste it into Claude Code to get help completing the remaining tasks."})]}),m&&o.jsx(PT,{sdId:b.id,onClose:()=>f(!1)})]})}const AT="modulepreload",RT=function(e){return"/"+e},V0={},wo=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=RT(c),c in V0)return;V0[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":AT,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},IT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>wo(async()=>{const{default:r}=await Promise.resolve().then(()=>zi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Im extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class DT extends Im{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class U0 extends Im{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class z0 extends Im{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var kh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(kh||(kh={}));var LT=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class OT{constructor(t,{headers:n={},customFetch:r,region:s=kh.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=IT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return LT(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(v=>{throw new DT(v)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new U0(h);if(!h.ok)throw new z0(h);let f=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield h.json():f==="application/octet-stream"?g=yield h.blob():f==="text/event-stream"?g=h:f==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof z0||s instanceof U0?s.context:void 0}}})}}var Ht={},Dm={},Rc={},ko={},Ic={},Dc={},$T=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ii=$T();const MT=Ii.fetch,fk=Ii.fetch.bind(Ii),mk=Ii.Headers,FT=Ii.Request,VT=Ii.Response,zi=Object.freeze(Object.defineProperty({__proto__:null,Headers:mk,Request:FT,Response:VT,default:fk,fetch:MT},Symbol.toStringTag,{value:"Module"})),UT=k1(zi);var Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});let zT=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Lc.default=zT;var pk=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dc,"__esModule",{value:!0});const BT=pk(UT),HT=pk(Lc);let WT=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=BT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,u;let d=null,h=null,m=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const k=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");k&&x&&x.length>1&&(m=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,f=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const k=await i.text();try{d=JSON.parse(k),Array.isArray(d)&&i.status===404&&(h=[],d=null,f=200,g="OK")}catch{i.status===404&&k===""?(f=204,g="No Content"):d={message:k}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,g="OK"),d&&this.shouldThrowOnError)throw new HT.default(d)}return{error:d,data:h,count:m,status:f,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Dc.default=WT;var qT=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ic,"__esModule",{value:!0});const GT=qT(Dc);let KT=class extends GT.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ic.default=KT;var XT=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ko,"__esModule",{value:!0});const JT=XT(Ic);let YT=class extends JT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};ko.default=YT;var QT=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rc,"__esModule",{value:!0});const na=QT(ko);let ZT=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new na.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new na.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new na.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new na.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new na.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Rc.default=ZT;var gk=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dm,"__esModule",{value:!0});const e4=gk(Rc),t4=gk(ko);let n4=class xk{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new e4.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new xk(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new t4.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Dm.default=n4;var Bi=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.PostgrestError=Ht.PostgrestBuilder=Ht.PostgrestTransformBuilder=Ht.PostgrestFilterBuilder=Ht.PostgrestQueryBuilder=Ht.PostgrestClient=void 0;const yk=Bi(Dm);Ht.PostgrestClient=yk.default;const vk=Bi(Rc);Ht.PostgrestQueryBuilder=vk.default;const bk=Bi(ko);Ht.PostgrestFilterBuilder=bk.default;const wk=Bi(Ic);Ht.PostgrestTransformBuilder=wk.default;const kk=Bi(Dc);Ht.PostgrestBuilder=kk.default;const jk=Bi(Lc);Ht.PostgrestError=jk.default;var r4=Ht.default={PostgrestClient:yk.default,PostgrestQueryBuilder:vk.default,PostgrestFilterBuilder:bk.default,PostgrestTransformBuilder:wk.default,PostgrestBuilder:kk.default,PostgrestError:jk.default};const{PostgrestClient:s4,PostgrestQueryBuilder:oL,PostgrestFilterBuilder:lL,PostgrestTransformBuilder:cL,PostgrestBuilder:uL,PostgrestError:dL}=r4;class i4{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const a4="2.15.4",o4=`realtime-js/${a4}`,l4="1.0.0",jh=1e4,c4=1e3,u4=100;var Na;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Na||(Na={}));var ct;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ct||(ct={}));var Rn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Rn||(Rn={}));var Sh;(function(e){e.websocket="websocket"})(Sh||(Sh={}));var ys;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ys||(ys={}));class d4{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Sk{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Re;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Re||(Re={}));const B0=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=h4(a,e,t,s),i),{})},h4=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?Nk(i,a):Nh(a)},Nk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return g4(t,n)}switch(e){case Re.bool:return f4(t);case Re.float4:case Re.float8:case Re.int2:case Re.int4:case Re.int8:case Re.numeric:case Re.oid:return m4(t);case Re.json:case Re.jsonb:return p4(t);case Re.timestamp:return x4(t);case Re.abstime:case Re.date:case Re.daterange:case Re.int4range:case Re.int8range:case Re.money:case Re.reltime:case Re.text:case Re.time:case Re.timestamptz:case Re.timetz:case Re.tsrange:case Re.tstzrange:return Nh(t);default:return Nh(t)}},Nh=e=>e,f4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},m4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},p4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},g4=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Nk(t,l))}return e},x4=e=>typeof e=="string"?e.replace(" ","T"):e,_k=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Du{constructor(t,n,r={},s=jh){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var H0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(H0||(H0={}));class _a{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_a.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=_a.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=_a.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const m=d.map(k=>k.presence_ref),f=h.map(k=>k.presence_ref),g=d.filter(k=>f.indexOf(k.presence_ref)<0),v=h.filter(k=>m.indexOf(k.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(f=>f.presence_ref),m=d.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var W0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(W0||(W0={}));var Ea;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ea||(Ea={}));var ar;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ar||(ar={}));class Lm{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Du(this,Rn.join,this.params,this.timeout),this.rejoinTimer=new Sk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ct.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new _a(this),this.broadcastEndpointURL=_k(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ct.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ea.PRESENCE]&&this.bindings[Ea.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(ar.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(ar.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){t==null||t(ar.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,k=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,x=[];for(let y=0;y<k;y++){const p=v[y],{filter:{event:S,schema:E,table:N,filter:P}}=p,T=f&&f[y];if(T&&T.event===S&&T.schema===E&&T.table===N&&T.filter===P)x.push(Object.assign(Object.assign({},p),{id:T.id}));else{this.unsubscribe(),this.state=ct.errored,t==null||t(ar.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(ar.SUBSCRIBED);return}}).receive("error",f=>{this.state=ct.errored,t==null||t(ar.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ar.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ct.joined&&t===Ea.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ct.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Du(this,Rn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ct.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Du(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>u4){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Rn;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var g,v,k;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((k=(v=f.filter)===null||v===void 0?void 0:v.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(f=>f.callback(m,r)):(i=this.bindings[a])===null||i===void 0||i.filter(f=>{var g,v,k,x,y,p;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const S=f.id,E=(g=f.filter)===null||g===void 0?void 0:g.event;return S&&((v=n.ids)===null||v===void 0?void 0:v.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const S=(y=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return S==="*"||S===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:v,table:k,commit_timestamp:x,type:y,errors:p}=g;m=Object.assign(Object.assign({},{schema:v,table:k,commit_timestamp:x,eventType:y,new:{},old:{},errors:p}),this._getPayloadRecords(g))}f.callback(m,r)})}_isClosed(){return this.state===ct.closed}_isJoined(){return this.state===ct.joined}_isJoining(){return this.state===ct.joining}_isLeaving(){return this.state===ct.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Lm.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Rn.close,{},t)}_onError(t){this._on(Rn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ct.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=B0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=B0(t.columns,t.old_record)),n}}const Lu=()=>{},Ko={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},y4=[1e3,2e3,5e3,1e4],v4=1e4,b4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class w4{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jh,this.transport=null,this.heartbeatIntervalMs=Ko.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lu,this.ref=0,this.reconnectTimer=null,this.logger=Lu,this.conn=null,this.sendBuffer=[],this.serializer=new d4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>wo(async()=>{const{default:l}=await Promise.resolve().then(()=>zi);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Sh.websocket}`,this.httpEndpoint=_k(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=i4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:l4}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Na.connecting:return ys.Connecting;case Na.open:return ys.Open;case Na.closing:return ys.Closing;default:return ys.Closed}}isConnected(){return this.connectionState()===ys.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Lm(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(c4,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ko.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Rn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([b4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:o4};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Rn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Sk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ko.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:jh,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Ko.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Lu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>y4[h-1]||v4,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Om extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ut(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class k4 extends Om{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _h extends Om{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var j4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Ek=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>wo(async()=>{const{default:r}=await Promise.resolve().then(()=>zi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},S4=()=>j4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wo(()=>Promise.resolve().then(()=>zi),void 0)).Response:Response}),Eh=e=>{if(Array.isArray(e))return e.map(n=>Eh(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Eh(r)}),t},N4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Fs=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Ou=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_4=(e,t,n)=>Fs(void 0,void 0,void 0,function*(){const r=yield S4();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new k4(Ou(s),i,a))}).catch(s=>{t(new _h(Ou(s),s))}):t(new _h(Ou(e),e))}),E4=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(N4(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function jo(e,t,n,r,s,i){return Fs(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,E4(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>_4(c,l,r))})})}function sc(e,t,n,r){return Fs(this,void 0,void 0,function*(){return jo(e,"GET",t,n,r)})}function Un(e,t,n,r,s){return Fs(this,void 0,void 0,function*(){return jo(e,"POST",t,r,s,n)})}function Ch(e,t,n,r,s){return Fs(this,void 0,void 0,function*(){return jo(e,"PUT",t,r,s,n)})}function C4(e,t,n,r){return Fs(this,void 0,void 0,function*(){return jo(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ck(e,t,n,r,s){return Fs(this,void 0,void 0,function*(){return jo(e,"DELETE",t,r,s,n)})}var Rt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const P4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},q0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class T4{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Ek(s)}uploadOrUpdate(t,n,r,s){return Rt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},q0),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?Ch:Un)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(ut(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Rt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:q0.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Ch(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(ut(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Rt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Un(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Om("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}update(t,n,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Rt(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ut(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Un(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ut(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Rt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Un(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(ut(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Rt(this,void 0,void 0,function*(){try{const s=yield Un(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(ut(s))return{data:null,error:s};throw s}})}download(t,n){return Rt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield sc(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ut(l))return{data:null,error:l};throw l}})}info(t){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield sc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Eh(r),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}exists(t){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield C4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ut(r)&&r instanceof _h){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield Ck(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}})}list(t,n,r){return Rt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},P4),n),{prefix:t||""});return{data:yield Un(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(ut(s))return{data:null,error:s};throw s}})}listV2(t,n){return Rt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Un(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const A4="2.11.0",R4={"X-Client-Info":`storage-js/${A4}`};var zs=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class I4{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},R4),n),this.fetch=Ek(r)}listBuckets(){return zs(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ut(t))return{data:null,error:t};throw t}})}getBucket(t){return zs(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return zs(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return zs(this,void 0,void 0,function*(){try{return{data:yield Ch(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}emptyBucket(t){return zs(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}})}deleteBucket(t){return zs(this,void 0,void 0,function*(){try{return{data:yield Ck(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}})}}class D4 extends I4{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new T4(this.url,this.headers,t,this.fetch)}}const L4="2.56.1";let ua="";typeof Deno<"u"?ua="deno":typeof document<"u"?ua="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ua="react-native":ua="node";const O4={"X-Client-Info":`supabase-js-${ua}/${L4}`},$4={headers:O4},M4={schema:"public"},F4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},V4={};var U4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const z4=e=>{let t;return e?t=e:typeof fetch>"u"?t=fk:t=fetch,(...n)=>t(...n)},B4=()=>typeof Headers>"u"?mk:Headers,H4=(e,t,n)=>{const r=z4(n),s=B4();return(i,a)=>U4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var W4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function q4(e){return e.endsWith("/")?e:e+"/"}function G4(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>W4(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const Pk="2.71.1",Ks=30*1e3,Ph=3,$u=Ph*Ks,K4="http://localhost:9999",X4="supabase.auth.token",J4={"X-Client-Info":`gotrue-js/${Pk}`},Th="X-Supabase-Api-Version",Tk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Y4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q4=10*60*1e3;class $m extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ge(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Z4 extends $m{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function e3(e){return ge(e)&&e.name==="AuthApiError"}class Ak extends $m{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class is extends $m{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Tr extends is{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function t3(e){return ge(e)&&e.name==="AuthSessionMissingError"}class Xo extends is{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jo extends is{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Yo extends is{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function n3(e){return ge(e)&&e.name==="AuthImplicitGrantRedirectError"}class G0 extends is{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ah extends is{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Mu(e){return ge(e)&&e.name==="AuthRetryableFetchError"}class K0 extends is{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Rh extends is{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),X0=` 	
\r=`.split(""),r3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<X0.length;t+=1)e[X0[t].charCodeAt(0)]=-2;for(let t=0;t<ic.length;t+=1)e[ic[t].charCodeAt(0)]=t;return e})();function J0(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ic[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ic[r]),t.queuedBits-=6}}function Rk(e,t,n){const r=r3[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Y0(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{a3(a,r,n)};for(let a=0;a<e.length;a+=1)Rk(e.charCodeAt(a),s,i);return t.join("")}function s3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function i3(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}s3(r,t)}}function a3(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function o3(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Rk(e.charCodeAt(s),n,r);return new Uint8Array(t)}function l3(e){const t=[];return i3(e,n=>t.push(n)),new Uint8Array(t)}function c3(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>J0(s,n,r)),J0(null,n,r),t.join("")}function u3(e){return Math.round(Date.now()/1e3)+e}function d3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const En=()=>typeof window<"u"&&typeof document<"u",hs={tested:!1,writable:!1},Ik=()=>{if(!En())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hs.tested)return hs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),hs.tested=!0,hs.writable=!0}catch{hs.tested=!0,hs.writable=!1}return hs.writable};function h3(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Dk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>wo(async()=>{const{default:r}=await Promise.resolve().then(()=>zi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},f3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Xs=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},fs=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Nr=async(e,t)=>{await e.removeItem(t)};class Oc{constructor(){this.promise=new Oc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Oc.promiseConstructor=Promise;function Fu(e){const t=e.split(".");if(t.length!==3)throw new Rh("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Y4.test(t[r]))throw new Rh("JWT not in base64url format");return{header:JSON.parse(Y0(t[0])),payload:JSON.parse(Y0(t[1])),signature:o3(t[2]),raw:{header:t[0],payload:t[1]}}}async function m3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function p3(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function g3(e){return("0"+e.toString(16)).substr(-2)}function x3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,g3).join("")}async function y3(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function v3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await y3(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bs(e,t,n=!1){const r=x3();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Xs(e,`${t}-code-verifier`,s);const i=await v3(r);return[i,r===i?"plain":"s256"]}const b3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function w3(e){const t=e.headers.get(Th);if(!t||!t.match(b3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function k3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function j3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const S3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hs(e){if(!S3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Q0(e){return JSON.parse(JSON.stringify(e))}var N3=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const xs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_3=[502,503,504];async function Z0(e){var t;if(!f3(e))throw new Ah(xs(e),0);if(_3.includes(e.status))throw new Ah(xs(e),e.status);let n;try{n=await e.json()}catch(i){throw new Ak(xs(i),i)}let r;const s=w3(e);if(s&&s.getTime()>=Tk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new K0(xs(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Tr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new K0(xs(n),e.status,n.weak_password.reasons);throw new Z4(xs(n),e.status||500,r)}const E3=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function je(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Th]||(i[Th]=Tk["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await C3(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function C3(e,t,n,r,s,i){const a=E3(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new Ah(xs(c),0)}if(l.ok||await Z0(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Z0(c)}}function sr(e){var t;let n=null;R3(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=u3(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function ex(e){const t=sr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Lr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function P3(e){return{data:e,error:null}}function T3(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=N3(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function A3(e){return e}function R3(e){return e.access_token&&e.refresh_token&&e.expires_in}const Uu=["global","local","others"];var I3=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class D3{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Dk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Uu[0]){if(Uu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Uu.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Lr})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=I3(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:T3,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ge(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Lr})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:A3});if(d.error)throw d.error;const h=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(g.split(";")[1].split("=")[1]);u[`${k}Page`]=v}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ge(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Hs(t);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Lr})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Hs(t);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Lr})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Hs(t);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Lr})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Hs(t.userId);try{const{data:n,error:r}=await je(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Hs(t.userId),Hs(t.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}}function tx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function L3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ws={debug:!!(globalThis&&Ik()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class O3 extends Lk{}async function $3(e,t,n){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new O3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ws.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}L3();const M3={url:K4,storageKey:X4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:J4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nx(e,t,n){return await n()}const qs={};class ao{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ao.nextInstanceID,ao.nextInstanceID+=1,this.instanceID>0&&En()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},M3),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new D3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Dk(s.fetch),this.lock=s.lock||nx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:En()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=$3:this.lock=nx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Ik()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=tx(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=tx(this.memoryStorage)),En()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=qs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){qs[this.storageKey]=Object.assign(Object.assign({},qs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=qs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){qs[this.storageKey]=Object.assign(Object.assign({},qs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Pk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=h3(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),En()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),n3(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ge(n)?{error:n}:{error:new Ak("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:sr}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ge(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Bs(this.storage,this.storageKey)),i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:g},xform:sr})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:sr})}else throw new Jo("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ge(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ex})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ex})}else throw new Jo("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Xo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,h,m,f;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:k,wallet:x,statement:y,options:p}=t;let S;if(En())if(typeof x=="object")S=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))S=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const E=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const N=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),y?{statement:y}:null));let P;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")P=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)P=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)g=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=p==null?void 0:p.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const N=await S.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=N}}try{const{data:k,error:x}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:c3(v)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:sr});if(x)throw x;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Xo}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:x})}catch(k){if(ge(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const n=await fs(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:sr});if(await Nr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Xo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(ge(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:sr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Xo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Bs(this.storage,this.storageKey));const{error:h}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Jo("You must provide either an email or phone number.")}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:sr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ge(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Bs(this.storage,this.storageKey)),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:P3})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Tr;const{error:s}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ge(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await je(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await je(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Jo("You must provide either an email or phone number and a type")}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await fs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<$u:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await fs(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Vu()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Lr}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Tr}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Lr})})}catch(n){if(ge(n))return t3(n)&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Tr;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Bs(this.storage,this.storageKey));const{data:u,error:d}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Lr});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Tr;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Fu(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ge(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Tr;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!En())throw new Yo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Yo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new G0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new G0("No code detected.");const{data:y,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Yo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const f=m-d;f*1e3<=Ks&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=m-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,m,d);const{data:v,error:k}=await this._getUser(i);if(k)throw k;const x={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(ge(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await fs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(e3(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=d3(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Bs(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return En()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ge(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await p3(async s=>(s>0&&await m3(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:sr})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Mu(i)&&Date.now()+a-r<Ks})}catch(r){if(this._debug(n,"error",r),ge(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),En()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await fs(this.storage,this.storageKey);if(s&&this.userStorage){let a=await fs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Xs(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Vu()}else if(s&&!s.user&&!s.user){const a=await fs(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Nr(this.storage,this.storageKey+"-user"),await Xs(this.storage,this.storageKey,s)):s.user=Vu()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$u;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${$u}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Mu(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Tr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Oc;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Tr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ge(i)){const a={session:null,error:i};return Mu(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Xs(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Q0(s);await Xs(this.storage,this.storageKey,i)}else{const s=Q0(n);await Xs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Nr(this.storage,this.storageKey),await Nr(this.storage,this.storageKey+"-code-verifier"),await Nr(this.storage,this.storageKey+"-user"),this.userStorage&&await Nr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&En()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ks);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ks);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ks}ms, refresh threshold is ${Ph} ticks`),s<=Ph&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Lk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!En()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Bs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await je(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await je(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(ge(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ge(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Fu(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+Q4>s)return r;const{data:i,error:a}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};r=f.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Fu(r);n!=null&&n.allowExpired||k3(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:a},error:null}}const d=j3(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,l3(`${l}.${c}`)))throw new Rh("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}}ao.nextInstanceID=0;const F3=ao;class V3 extends F3{constructor(t){super(t)}}var U3=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class z3{constructor(t,n,r){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=q4(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:M4,realtime:V4,auth:Object.assign(Object.assign({},F4),{storageKey:u}),global:$4},h=G4(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=H4(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new s4(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new D4(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new OT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return U3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new V3({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new w4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const B3=(e,t,n)=>new z3(e,t,n);function H3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}H3()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const W3="https://dedlbzhpgkmetvhbkyzq.supabase.co",q3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g",Ih=B3(W3,q3,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});var G3={};function K3({sdKey:e,isCompact:t=!1}){const[n,r]=j.useState(null),[s,i]=j.useState(!0),[a,l]=j.useState(null);j.useEffect(()=>{if(e){c();const N=Ih.channel("release-gates").on("postgres_changes",{event:"*",schema:"public",table:"sd_backlog_map",filter:`sd_id=eq.${e}`},()=>{c()}).subscribe();return()=>{N.unsubscribe()}}},[e]);async function c(){try{i(!0);const{data:N,error:P}=await Ih.from("v_sd_release_gate").select("*").eq("sd_key",e).single();if(P)throw P;r(N),l(null)}catch(N){console.error("Failed to load gate data:",N),l(N.message),r(null)}finally{i(!1)}}if(!e)return null;if(s)return o.jsx("div",{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow animate-pulse`,children:o.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})});if(a||!n)return null;const{ready:u,passing_pct:d=0,passing_count:h=0,failing_count:m=0,not_run_count:f=0,total_stories:g=0,avg_coverage:v=0}=n,k=u?"text-green-500":"text-red-500",x=u?o.jsx(rT,{className:"w-5 h-5"}):o.jsx(ak,{className:"w-5 h-5"}),y=u?"READY TO MERGE":"BLOCKED",p=u?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",S=Math.min(100,Math.max(0,d)),E=80;return o.jsxs(ee.div,{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow-lg border ${p}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(io,{className:`w-5 h-5 ${k}`}),o.jsx("h3",{className:`${t?"text-sm":"text-base"} font-semibold text-gray-900 dark:text-white`,children:"Release Gate"})]}),o.jsxs("div",{className:`flex items-center gap-1 ${k}`,children:[x,o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-bold`,children:y})]})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Story Verification"}),o.jsxs("span",{className:`text-xs font-bold ${S>=E?"text-green-600":"text-amber-600"}`,children:[S.toFixed(0),"% / ",E,"%"]})]}),o.jsxs("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-gray-400 dark:bg-gray-500 z-10",style:{left:`${E}%`}}),o.jsx(ee.div,{className:`h-full ${S>=E?"bg-green-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${S}%`},transition:{duration:.5,ease:"easeOut"}})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(UP,{className:"w-3 h-3 text-green-500"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-green-600 dark:text-green-400`,children:h})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Passing"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(Yn,{className:"w-3 h-3 text-red-500"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-red-600 dark:text-red-400`,children:m})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Failing"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(ss,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-gray-600 dark:text-gray-400`,children:f})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Not Run"})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(xr,{className:"w-3 h-3 text-blue-500"}),o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Coverage: ",v.toFixed(0),"%"]})]}),o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Total: ",g," stories"]})]}),!u&&g>0&&o.jsx(ee.div,{className:"mt-3 p-2 bg-amber-100 dark:bg-amber-900/30 rounded text-xs text-amber-800 dark:text-amber-200",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(HP,{className:"w-3 h-3"}),o.jsxs("span",{children:["Need ",Math.ceil(g*.8)-h," more passing stories to merge"]})]})}),G3.REACT_APP_FEATURE_STORY_GATES==="false"&&o.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 italic",children:"Gates tracking only (not enforcing)"})]})}function X3({state:e,onRefresh:t,onSetActiveSD:n,isCompact:r}){var d,h;const s=br(),[i,a]=j.useState({tests:{total:0,passed:0,failed:0},coverage:{lines:0,branches:0,functions:0,statements:0},git:{branch:"unknown",uncommittedChanges:0,lastCommit:""}}),l=Ac();j.useEffect(()=>{fetch("/api/metrics").then(m=>m.json()).then(m=>a(m)).catch(m=>console.error("Error loading metrics:",m))},[]);const c=r?"bg-white dark:bg-gray-800 rounded-lg shadow p-2 sm:p-3":"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6",u={hidden:{opacity:0,y:l?0:10},visible:m=>({opacity:1,y:0,transition:{duration:l?0:.1,delay:l?0:m*.02}})};return o.jsxs("div",{className:r?"space-y-2 sm:space-y-3":"space-y-4 sm:space-y-6",children:[o.jsxs(ee.div,{className:"flex items-center justify-between",initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.08},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(GP,{className:r?"w-5 h-5 sm:w-6 sm:h-6 mr-2":"w-6 sm:w-8 h-6 sm:h-8 mr-2 sm:mr-3"}),o.jsx("h1",{className:r?"text-xl sm:text-2xl font-bold":"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ee.button,{onClick:()=>s("/directive-lab?mode=quick"),className:`flex items-center ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,whileHover:{scale:l?1:1.05},whileTap:{scale:l?1:.95},children:[o.jsx(sT,{className:`${r?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]}),o.jsx(bo,{onRefresh:t,isCompact:r})]})]}),o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1},children:o.jsx(TT,{strategicDirectives:e.strategicDirectives,prds:e.prds,currentSD:(d=e.leoProtocol)==null?void 0:d.currentSD,onSetActiveSD:n,isCompact:r})}),((h=e.leoProtocol)==null?void 0:h.currentSD)&&o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1,delay:.05},children:o.jsx(K3,{sdKey:e.leoProtocol.currentSD,isCompact:r})}),o.jsxs("div",{className:`grid gap-${r?"2 sm:gap-3":"3 sm:gap-4"} grid-cols-1`,children:[o.jsx(ee.div,{className:c,initial:"hidden",animate:"visible",custom:1,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Active Role"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold truncate":"text-xl sm:text-2xl font-bold truncate",children:e.leoProtocol.activeRole||"Awaiting SD"}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 min-w-0",children:[o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#4f9cf9"},children:["LEO v",e.leoProtocol.version]}),e.leoProtocol.lastHandoff&&o.jsxs("span",{className:`${r?"text-xs":"text-xs sm:text-sm"} text-gray-500 truncate`,children:["• ",new Date(e.leoProtocol.lastHandoff.timestamp).toLocaleTimeString()]})]})]}),o.jsx(Am,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 ${e.leoProtocol.activeRole==="LEAD"?"text-blue-500":e.leoProtocol.activeRole==="PLAN"?"text-purple-500":e.leoProtocol.activeRole==="EXEC"?"text-green-500":"text-gray-400"}`})]})}),o.jsx(ee.div,{className:c,initial:"hidden",animate:"visible",custom:2,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx($n,{to:"/strategic-directives",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strategic Directives"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:o.jsx(fi,{end:e.strategicDirectives.length,duration:l?0:1.5,preserveValue:!0})}),o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#10b981"},children:[o.jsx(fi,{end:e.strategicDirectives.filter(m=>{var f;return((f=m.metadata)==null?void 0:f.Status)==="Active"}).length,duration:l?0:1.2,preserveValue:!0})," Active"]})]}),o.jsx(xt,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-blue-500`})]})})}),o.jsx(ee.div,{className:c,initial:"hidden",animate:"visible",custom:3,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx($n,{to:"/backlog",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Backlog Items"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:o.jsx(fi,{end:e.strategicDirectives.reduce((m,f)=>m+(f.total_backlog_items||f.total_items||f.backlog_count||0),0),duration:l?0:1.5,preserveValue:!0})}),o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#6366f1"},children:[o.jsx(fi,{end:e.strategicDirectives.filter(m=>(m.total_backlog_items||m.total_items||m.backlog_count||0)>0).length,duration:l?0:1.2,preserveValue:!0})," SDs with items"]})]}),o.jsx(so,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-indigo-500`})]})})}),o.jsx(ee.div,{className:c,initial:"hidden",animate:"visible",custom:4,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx($n,{to:"/directive-lab",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"SDIP Submissions"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:"Directive Lab"}),o.jsx("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#8b5cf6"},children:"Ready to submit"})]}),o.jsx(rk,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-purple-500`})]})})})]})]})}function J3(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Y3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Q3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Z3={};function rx(e,t){return(Z3.jsx?Q3:Y3).test(e)}const e5=/[ \t\n\f\r]/g;function t5(e){return typeof e=="object"?e.type==="text"?sx(e.value):!1:sx(e)}function sx(e){return e.replace(e5,"")===""}class So{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}So.prototype.normal={};So.prototype.property={};So.prototype.space=void 0;function Ok(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new So(n,r,t)}function Dh(e){return e.toLowerCase()}class Qt{constructor(t,n){this.attribute=n,this.property=t}}Qt.prototype.attribute="";Qt.prototype.booleanish=!1;Qt.prototype.boolean=!1;Qt.prototype.commaOrSpaceSeparated=!1;Qt.prototype.commaSeparated=!1;Qt.prototype.defined=!1;Qt.prototype.mustUseProperty=!1;Qt.prototype.number=!1;Qt.prototype.overloadedBoolean=!1;Qt.prototype.property="";Qt.prototype.spaceSeparated=!1;Qt.prototype.space=void 0;let n5=0;const ye=Vs(),nt=Vs(),Lh=Vs(),W=Vs(),Ie=Vs(),wi=Vs(),tn=Vs();function Vs(){return 2**++n5}const Oh=Object.freeze(Object.defineProperty({__proto__:null,boolean:ye,booleanish:nt,commaOrSpaceSeparated:tn,commaSeparated:wi,number:W,overloadedBoolean:Lh,spaceSeparated:Ie},Symbol.toStringTag,{value:"Module"})),zu=Object.keys(Oh);class Mm extends Qt{constructor(t,n,r,s){let i=-1;if(super(t,n),ix(this,"space",s),typeof r=="number")for(;++i<zu.length;){const a=zu[i];ix(this,zu[i],(r&Oh[a])===Oh[a])}}}Mm.prototype.defined=!0;function ix(e,t,n){n&&(e[t]=n)}function Hi(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new Mm(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[Dh(r)]=r,n[Dh(i.attribute)]=r}return new So(t,n,e.space)}const $k=Hi({properties:{ariaActiveDescendant:null,ariaAtomic:nt,ariaAutoComplete:null,ariaBusy:nt,ariaChecked:nt,ariaColCount:W,ariaColIndex:W,ariaColSpan:W,ariaControls:Ie,ariaCurrent:null,ariaDescribedBy:Ie,ariaDetails:null,ariaDisabled:nt,ariaDropEffect:Ie,ariaErrorMessage:null,ariaExpanded:nt,ariaFlowTo:Ie,ariaGrabbed:nt,ariaHasPopup:null,ariaHidden:nt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ie,ariaLevel:W,ariaLive:null,ariaModal:nt,ariaMultiLine:nt,ariaMultiSelectable:nt,ariaOrientation:null,ariaOwns:Ie,ariaPlaceholder:null,ariaPosInSet:W,ariaPressed:nt,ariaReadOnly:nt,ariaRelevant:null,ariaRequired:nt,ariaRoleDescription:Ie,ariaRowCount:W,ariaRowIndex:W,ariaRowSpan:W,ariaSelected:nt,ariaSetSize:W,ariaSort:null,ariaValueMax:W,ariaValueMin:W,ariaValueNow:W,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Mk(e,t){return t in e?e[t]:t}function Fk(e,t){return Mk(e,t.toLowerCase())}const r5=Hi({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:wi,acceptCharset:Ie,accessKey:Ie,action:null,allow:null,allowFullScreen:ye,allowPaymentRequest:ye,allowUserMedia:ye,alt:null,as:null,async:ye,autoCapitalize:null,autoComplete:Ie,autoFocus:ye,autoPlay:ye,blocking:Ie,capture:null,charSet:null,checked:ye,cite:null,className:Ie,cols:W,colSpan:null,content:null,contentEditable:nt,controls:ye,controlsList:Ie,coords:W|wi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ye,defer:ye,dir:null,dirName:null,disabled:ye,download:Lh,draggable:nt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ye,formTarget:null,headers:Ie,height:W,hidden:Lh,high:W,href:null,hrefLang:null,htmlFor:Ie,httpEquiv:Ie,id:null,imageSizes:null,imageSrcSet:null,inert:ye,inputMode:null,integrity:null,is:null,isMap:ye,itemId:null,itemProp:Ie,itemRef:Ie,itemScope:ye,itemType:Ie,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ye,low:W,manifest:null,max:null,maxLength:W,media:null,method:null,min:null,minLength:W,multiple:ye,muted:ye,name:null,nonce:null,noModule:ye,noValidate:ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ye,optimum:W,pattern:null,ping:Ie,placeholder:null,playsInline:ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ye,referrerPolicy:null,rel:Ie,required:ye,reversed:ye,rows:W,rowSpan:W,sandbox:Ie,scope:null,scoped:ye,seamless:ye,selected:ye,shadowRootClonable:ye,shadowRootDelegatesFocus:ye,shadowRootMode:null,shape:null,size:W,sizes:null,slot:null,span:W,spellCheck:nt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:W,step:null,style:null,tabIndex:W,target:null,title:null,translate:null,type:null,typeMustMatch:ye,useMap:null,value:nt,width:W,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ie,axis:null,background:null,bgColor:null,border:W,borderColor:null,bottomMargin:W,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ye,declare:ye,event:null,face:null,frame:null,frameBorder:null,hSpace:W,leftMargin:W,link:null,longDesc:null,lowSrc:null,marginHeight:W,marginWidth:W,noResize:ye,noHref:ye,noShade:ye,noWrap:ye,object:null,profile:null,prompt:null,rev:null,rightMargin:W,rules:null,scheme:null,scrolling:nt,standby:null,summary:null,text:null,topMargin:W,valueType:null,version:null,vAlign:null,vLink:null,vSpace:W,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ye,disableRemotePlayback:ye,prefix:null,property:null,results:W,security:null,unselectable:null},space:"html",transform:Fk}),s5=Hi({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:tn,accentHeight:W,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:W,amplitude:W,arabicForm:null,ascent:W,attributeName:null,attributeType:null,azimuth:W,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:W,by:null,calcMode:null,capHeight:W,className:Ie,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:W,diffuseConstant:W,direction:null,display:null,dur:null,divisor:W,dominantBaseline:null,download:ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:W,enableBackground:null,end:null,event:null,exponent:W,externalResourcesRequired:null,fill:null,fillOpacity:W,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:wi,g2:wi,glyphName:wi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:W,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:W,horizOriginX:W,horizOriginY:W,id:null,ideographic:W,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:W,k:W,k1:W,k2:W,k3:W,k4:W,kernelMatrix:tn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:W,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:W,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:W,overlineThickness:W,paintOrder:null,panose1:null,path:null,pathLength:W,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ie,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:W,pointsAtY:W,pointsAtZ:W,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:tn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:tn,rev:tn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:tn,requiredFeatures:tn,requiredFonts:tn,requiredFormats:tn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:W,specularExponent:W,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:W,strikethroughThickness:W,string:null,stroke:null,strokeDashArray:tn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:W,strokeOpacity:W,strokeWidth:null,style:null,surfaceScale:W,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:tn,tabIndex:W,tableValues:null,target:null,targetX:W,targetY:W,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:tn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:W,underlineThickness:W,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:W,values:null,vAlphabetic:W,vMathematical:W,vectorEffect:null,vHanging:W,vIdeographic:W,version:null,vertAdvY:W,vertOriginX:W,vertOriginY:W,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:W,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Mk}),Vk=Hi({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Uk=Hi({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Fk}),zk=Hi({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),i5={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},a5=/[A-Z]/g,ax=/-[a-z]/g,o5=/^data[-\w.:]+$/i;function l5(e,t){const n=Dh(t);let r=t,s=Qt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&o5.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(ax,u5);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!ax.test(i)){let a=i.replace(a5,c5);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}s=Mm}return new s(r,t)}function c5(e){return"-"+e.toLowerCase()}function u5(e){return e.charAt(1).toUpperCase()}const d5=Ok([$k,r5,Vk,Uk,zk],"html"),Fm=Ok([$k,s5,Vk,Uk,zk],"svg");function h5(e){return e.join(" ").trim()}var Vm={},ox=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,f5=/\n/g,m5=/^\s*/,p5=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,g5=/^:\s*/,x5=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,y5=/^[;\s]*/,v5=/^\s+|\s+$/g,b5=`
`,lx="/",cx="*",vs="",w5="comment",k5="declaration",j5=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(g){var v=g.match(f5);v&&(n+=v.length);var k=g.lastIndexOf(b5);r=~k?g.length-k:r+g.length}function i(){var g={line:n,column:r};return function(v){return v.position=new a(g),u(),v}}function a(g){this.start=g,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function l(g){var v=new Error(t.source+":"+n+":"+r+": "+g);if(v.reason=g,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(g){var v=g.exec(e);if(v){var k=v[0];return s(k),e=e.slice(k.length),v}}function u(){c(m5)}function d(g){var v;for(g=g||[];v=h();)v!==!1&&g.push(v);return g}function h(){var g=i();if(!(lx!=e.charAt(0)||cx!=e.charAt(1))){for(var v=2;vs!=e.charAt(v)&&(cx!=e.charAt(v)||lx!=e.charAt(v+1));)++v;if(v+=2,vs===e.charAt(v-1))return l("End of comment missing");var k=e.slice(2,v-2);return r+=2,s(k),e=e.slice(v),r+=2,g({type:w5,comment:k})}}function m(){var g=i(),v=c(p5);if(v){if(h(),!c(g5))return l("property missing ':'");var k=c(x5),x=g({type:k5,property:ux(v[0].replace(ox,vs)),value:k?ux(k[0].replace(ox,vs)):vs});return c(y5),x}}function f(){var g=[];d(g);for(var v;v=m();)v!==!1&&(g.push(v),d(g));return g}return u(),f()};function ux(e){return e?e.replace(v5,vs):vs}var S5=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vm,"__esModule",{value:!0});Vm.default=_5;var N5=S5(j5);function _5(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,N5.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var a=i.property,l=i.value;s?t(a,l,i):l&&(n=n||{},n[a]=l)}}),n}var $c={};Object.defineProperty($c,"__esModule",{value:!0});$c.camelCase=void 0;var E5=/^--[a-zA-Z0-9_-]+$/,C5=/-([a-z])/g,P5=/^[^-]+$/,T5=/^-(webkit|moz|ms|o|khtml)-/,A5=/^-(ms)-/,R5=function(e){return!e||P5.test(e)||E5.test(e)},I5=function(e,t){return t.toUpperCase()},dx=function(e,t){return"".concat(t,"-")},D5=function(e,t){return t===void 0&&(t={}),R5(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(A5,dx):e=e.replace(T5,dx),e.replace(C5,I5))};$c.camelCase=D5;var L5=jt&&jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},O5=L5(Vm),$5=$c;function $h(e,t){var n={};return!e||typeof e!="string"||(0,O5.default)(e,function(r,s){r&&s&&(n[(0,$5.camelCase)(r,t)]=s)}),n}$h.default=$h;var M5=$h;const F5=qh(M5),Bk=Hk("end"),Um=Hk("start");function Hk(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function V5(e){const t=Um(e),n=Bk(e);if(t&&n)return{start:t,end:n}}function Ca(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?hx(e.position):"start"in e||"end"in e?hx(e):"line"in e||"column"in e?Mh(e):""}function Mh(e){return fx(e&&e.line)+":"+fx(e&&e.column)}function hx(e){return Mh(e&&e.start)+"-"+Mh(e&&e.end)}function fx(e){return e&&typeof e=="number"?e:1}class At extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(a=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=Ca(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}At.prototype.file="";At.prototype.name="";At.prototype.reason="";At.prototype.message="";At.prototype.stack="";At.prototype.column=void 0;At.prototype.line=void 0;At.prototype.ancestors=void 0;At.prototype.cause=void 0;At.prototype.fatal=void 0;At.prototype.place=void 0;At.prototype.ruleId=void 0;At.prototype.source=void 0;const zm={}.hasOwnProperty,U5=new Map,z5=/[A-Z]/g,B5=new Set(["table","tbody","thead","tfoot","tr"]),H5=new Set(["td","th"]),Wk="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function W5(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Z5(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Q5(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Fm:d5,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=qk(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function qk(e,t,n){if(t.type==="element")return q5(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return G5(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return X5(e,t,n);if(t.type==="mdxjsEsm")return K5(e,t);if(t.type==="root")return J5(e,t,n);if(t.type==="text")return Y5(e,t)}function q5(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Fm,e.schema=s),e.ancestors.push(t);const i=Kk(e,t.tagName,!1),a=eA(e,t);let l=Hm(e,t);return B5.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!t5(c):!0})),Gk(e,a,i,t),Bm(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function G5(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}oo(e,t.position)}function K5(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);oo(e,t.position)}function X5(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Fm,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:Kk(e,t.name,!0),a=tA(e,t),l=Hm(e,t);return Gk(e,a,i,t),Bm(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function J5(e,t,n){const r={};return Bm(r,Hm(e,t)),e.create(t,e.Fragment,r,n)}function Y5(e,t){return t.value}function Gk(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Bm(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Q5(e,t,n){return r;function r(s,i,a,l){const u=Array.isArray(a.children)?n:t;return l?u(i,a,l):u(i,a)}}function Z5(e,t){return n;function n(r,s,i,a){const l=Array.isArray(i.children),c=Um(r);return t(s,i,a,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function eA(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&zm.call(t.properties,s)){const i=nA(e,s,t.properties[s]);if(i){const[a,l]=i;e.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&H5.has(t.tagName)?r=l:n[a]=l}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function tA(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else oo(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else oo(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function Hm(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:U5;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;a=c+"-"+u,s.set(c,u+1)}}const l=qk(e,i,a);l!==void 0&&n.push(l)}return n}function nA(e,t,n){const r=l5(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?J3(n):h5(n)),r.property==="style"){let s=typeof n=="object"?n:rA(e,String(n));return e.stylePropertyNameCase==="css"&&(s=sA(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?i5[r.property]||r.property:r.attribute,n]}}function rA(e,t){try{return F5(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new At("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Wk+"#cannot-parse-style-attribute",s}}function Kk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,a;for(;++i<s.length;){const l=rx(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=a}else r=rx(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return zm.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);oo(e)}function oo(e,t){const n=new At("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Wk+"#cannot-handle-mdx-estrees-without-createevaluater",n}function sA(e){const t={};let n;for(n in e)zm.call(e,n)&&(t[iA(n)]=e[n]);return t}function iA(e){let t=e.replace(z5,aA);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function aA(e){return"-"+e.toLowerCase()}const Bu={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},oA={};function lA(e,t){const n=oA,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Xk(e,r,s)}function Xk(e,t,n){if(cA(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return mx(e.children,t,n)}return Array.isArray(e)?mx(e,t,n):""}function mx(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Xk(e[s],t,n);return r.join("")}function cA(e){return!!(e&&typeof e=="object")}const px=document.createElement("i");function Wm(e){const t="&"+e+";";px.innerHTML=t;const n=px.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Qn(e,t,n,r){const s=e.length;let i=0,a;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function yn(e,t){return e.length>0?(Qn(e,e.length,0,t),e):t}const gx={}.hasOwnProperty;function uA(e){const t={};let n=-1;for(;++n<e.length;)dA(t,e[n]);return t}function dA(e,t){let n;for(n in t){const s=(gx.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){gx.call(s,a)||(s[a]=[]);const l=i[a];hA(s[a],Array.isArray(l)?l:l?[l]:[])}}}function hA(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Qn(e,0,0,r)}function Jk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function ki(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Wn=as(/[A-Za-z]/),sn=as(/[\dA-Za-z]/),fA=as(/[#-'*+\--9=?A-Z^-~]/);function Fh(e){return e!==null&&(e<32||e===127)}const Vh=as(/\d/),mA=as(/[\dA-Fa-f]/),pA=as(/[!-/:-@[-`{-~]/);function de(e){return e!==null&&e<-2}function Yt(e){return e!==null&&(e<0||e===32)}function Ee(e){return e===-2||e===-1||e===32}const gA=as(new RegExp("\\p{P}|\\p{S}","u")),xA=as(/\s/);function as(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Wi(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(i===37&&sn(e.charCodeAt(n+1))&&sn(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(a=String.fromCharCode(i,l),s=1):a="�"}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Le(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(c){return Ee(c)?(e.enter(n),l(c)):t(c)}function l(c){return Ee(c)&&i++<s?(e.consume(c),l):(e.exit(n),t(c))}}const yA={tokenize:vA};function vA(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Le(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return de(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),a)}}const bA={tokenize:wA},xx={tokenize:kA};function wA(e){const t=this,n=[];let r=0,s,i,a;return l;function l(p){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,c,u)(p)}return u(p)}function c(p){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&y();const S=t.events.length;let E=S,N;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){N=t.events[E][1].end;break}x(r);let P=S;for(;P<t.events.length;)t.events[P][1].end={...N},P++;return Qn(t.events,E+1,0,t.events.slice(S)),t.events.length=P,u(p)}return l(p)}function u(p){if(r===n.length){if(!s)return m(p);if(s.currentConstruct&&s.currentConstruct.concrete)return g(p);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(xx,d,h)(p)}function d(p){return s&&y(),x(r),m(p)}function h(p){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,g(p)}function m(p){return t.containerState={},e.attempt(xx,f,g)(p)}function f(p){return r++,n.push([t.currentConstruct,t.containerState]),m(p)}function g(p){if(p===null){s&&y(),x(0),e.consume(p);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),v(p)}function v(p){if(p===null){k(e.exit("chunkFlow"),!0),x(0),e.consume(p);return}return de(p)?(e.consume(p),k(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(p),v)}function k(p,S){const E=t.sliceStream(p);if(S&&E.push(null),p.previous=i,i&&(i.next=p),i=p,s.defineSkip(p.start),s.write(E),t.parser.lazy[p.start.line]){let N=s.events.length;for(;N--;)if(s.events[N][1].start.offset<a&&(!s.events[N][1].end||s.events[N][1].end.offset>a))return;const P=t.events.length;let T=P,O,D;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(O){D=t.events[T][1].end;break}O=!0}for(x(r),N=P;N<t.events.length;)t.events[N][1].end={...D},N++;Qn(t.events,T+1,0,t.events.slice(P)),t.events.length=N}}function x(p){let S=n.length;for(;S-- >p;){const E=n[S];t.containerState=E[1],E[0].exit.call(t,e)}n.length=p}function y(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function kA(e,t,n){return Le(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function yx(e){if(e===null||Yt(e)||xA(e))return 1;if(gA(e))return 2}function qm(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const Uh={name:"attention",resolveAll:jA,tokenize:SA};function jA(e,t){let n=-1,r,s,i,a,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},m={...e[n][1].start};vx(h,-c),vx(m,c),a={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},i={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},e[r][1].end={...a.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=yn(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=yn(u,[["enter",s,t],["enter",a,t],["exit",a,t],["enter",i,t]]),u=yn(u,qm(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=yn(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=yn(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Qn(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function SA(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=yx(r);let i;return a;function a(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),d=yx(c),h=!d||d===2&&s||n.includes(c),m=!s||s===2&&d||n.includes(r);return u._open=!!(i===42?h:h&&(s||!m)),u._close=!!(i===42?m:m&&(d||!h)),t(c)}}function vx(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const NA={name:"autolink",tokenize:_A};function _A(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return Wn(f)?(e.consume(f),a):f===64?n(f):u(f)}function a(f){return f===43||f===45||f===46||sn(f)?(r=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||sn(f))&&r++<32?(e.consume(f),l):(r=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||Fh(f)?n(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),d):fA(f)?(e.consume(f),u):n(f)}function d(f){return sn(f)?h(f):n(f)}function h(f){return f===46?(e.consume(f),r=0,d):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||sn(f))&&r++<63){const g=f===45?m:h;return e.consume(f),g}return n(f)}}const Mc={partial:!0,tokenize:EA};function EA(e,t,n){return r;function r(i){return Ee(i)?Le(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||de(i)?t(i):n(i)}}const Yk={continuation:{tokenize:PA},exit:TA,name:"blockQuote",tokenize:CA};function CA(e,t,n){const r=this;return s;function s(a){if(a===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),i}return n(a)}function i(a){return Ee(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function PA(e,t,n){const r=this;return s;function s(a){return Ee(a)?Le(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return e.attempt(Yk,t,n)(a)}}function TA(e){e.exit("blockQuote")}const Qk={name:"characterEscape",tokenize:AA};function AA(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return pA(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const Zk={name:"characterReference",tokenize:RA};function RA(e,t,n){const r=this;let s=0,i,a;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,a=sn,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=mA,d):(e.enter("characterReferenceValue"),i=7,a=Vh,d(h))}function d(h){if(h===59&&s){const m=e.exit("characterReferenceValue");return a===sn&&!Wm(r.sliceSerialize(m))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(h)&&s++<i?(e.consume(h),d):n(h)}}const bx={partial:!0,tokenize:DA},wx={concrete:!0,name:"codeFenced",tokenize:IA};function IA(e,t,n){const r=this,s={partial:!0,tokenize:E};let i=0,a=0,l;return c;function c(N){return u(N)}function u(N){const P=r.events[r.events.length-1];return i=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,l=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(N)}function d(N){return N===l?(a++,e.consume(N),d):a<3?n(N):(e.exit("codeFencedFenceSequence"),Ee(N)?Le(e,h,"whitespace")(N):h(N))}function h(N){return N===null||de(N)?(e.exit("codeFencedFence"),r.interrupt?t(N):e.check(bx,v,S)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||de(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(N)):Ee(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Le(e,f,"whitespace")(N)):N===96&&N===l?n(N):(e.consume(N),m)}function f(N){return N===null||de(N)?h(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(N))}function g(N){return N===null||de(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(N)):N===96&&N===l?n(N):(e.consume(N),g)}function v(N){return e.attempt(s,S,k)(N)}function k(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),x}function x(N){return i>0&&Ee(N)?Le(e,y,"linePrefix",i+1)(N):y(N)}function y(N){return N===null||de(N)?e.check(bx,v,S)(N):(e.enter("codeFlowValue"),p(N))}function p(N){return N===null||de(N)?(e.exit("codeFlowValue"),y(N)):(e.consume(N),p)}function S(N){return e.exit("codeFenced"),t(N)}function E(N,P,T){let O=0;return D;function D(L){return N.enter("lineEnding"),N.consume(L),N.exit("lineEnding"),M}function M(L){return N.enter("codeFencedFence"),Ee(L)?Le(N,K,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):K(L)}function K(L){return L===l?(N.enter("codeFencedFenceSequence"),he(L)):T(L)}function he(L){return L===l?(O++,N.consume(L),he):O>=a?(N.exit("codeFencedFenceSequence"),Ee(L)?Le(N,$,"whitespace")(L):$(L)):T(L)}function $(L){return L===null||de(L)?(N.exit("codeFencedFence"),P(L)):T(L)}}}function DA(e,t,n){const r=this;return s;function s(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const Hu={name:"codeIndented",tokenize:OA},LA={partial:!0,tokenize:$A};function OA(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),Le(e,i,"linePrefix",5)(u)}function i(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):de(u)?e.attempt(LA,a,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||de(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function $A(e,t,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):de(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):Le(e,i,"linePrefix",5)(a)}function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):de(a)?s(a):n(a)}}const MA={name:"codeText",previous:VA,resolve:FA,tokenize:UA};function FA(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function VA(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function UA(e,t,n){let r=0,s,i;return a;function a(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(i=e.enter("codeTextSequence"),s=0,d(h)):de(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||de(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),s++,d):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",u(h))}}class zA{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&ra(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ra(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ra(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ra(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ra(this.left,n.reverse())}}}function ra(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function e1(e){const t={};let n=-1,r,s,i,a,l,c,u;const d=new zA(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,BA(d,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=d.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return Qn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function BA(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],u={};let d,h,m=-1,f=n,g=0,v=0;const k=[v];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(d=r.sliceStream(f),f.next||d.push(null),h&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(v=m+1,k.push(v),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):k.pop(),m=k.length;m--;){const x=l.slice(k[m],k[m+1]),y=i.pop();c.push([y,y+x.length-1]),e.splice(y,2,x)}for(c.reverse(),m=-1;++m<c.length;)u[g+c[m][0]]=g+c[m][1],g+=c[m][1]-c[m][0]-1;return u}const HA={resolve:qA,tokenize:GA},WA={partial:!0,tokenize:KA};function qA(e){return e1(e),e}function GA(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):de(l)?e.check(WA,a,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function a(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function KA(e,t,n){const r=this;return s;function s(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Le(e,i,"linePrefix")}function i(a){if(a===null||de(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function t1(e,t,n,r,s,i,a,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(x){return x===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(x),e.exit(i),m):x===null||x===32||x===41||Fh(x)?n(x):(e.enter(r),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(x))}function m(x){return x===62?(e.enter(i),e.consume(x),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===62?(e.exit("chunkString"),e.exit(l),m(x)):x===null||x===60||de(x)?n(x):(e.consume(x),x===92?g:f)}function g(x){return x===60||x===62||x===92?(e.consume(x),f):f(x)}function v(x){return!d&&(x===null||x===41||Yt(x))?(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(x)):d<u&&x===40?(e.consume(x),d++,v):x===41?(e.consume(x),d--,v):x===null||x===32||x===40||Fh(x)?n(x):(e.consume(x),x===92?k:v)}function k(x){return x===40||x===41||x===92?(e.consume(x),v):v(x)}}function n1(e,t,n,r,s,i){const a=this;let l=0,c;return u;function u(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(i),d}function d(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(f):f===93?(e.exit(i),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):de(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||de(f)||l++>999?(e.exit("chunkString"),d(f)):(e.consume(f),c||(c=!Ee(f)),f===92?m:h)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,h):h(f)}}function r1(e,t,n,r,s,i){let a;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),a=m===40?41:m,c):n(m)}function c(m){return m===a?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(i),u(m))}function u(m){return m===a?(e.exit(i),c(a)):m===null?n(m):de(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Le(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===a||m===null||de(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?h:d)}function h(m){return m===a||m===92?(e.consume(m),d):d(m)}}function Pa(e,t){let n;return r;function r(s){return de(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Ee(s)?Le(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const XA={name:"definition",tokenize:YA},JA={partial:!0,tokenize:QA};function YA(e,t,n){const r=this;let s;return i;function i(f){return e.enter("definition"),a(f)}function a(f){return n1.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=ki(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return Yt(f)?Pa(e,u)(f):u(f)}function u(f){return t1(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return e.attempt(JA,h,h)(f)}function h(f){return Ee(f)?Le(e,m,"whitespace")(f):m(f)}function m(f){return f===null||de(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function QA(e,t,n){return r;function r(l){return Yt(l)?Pa(e,s)(l):n(l)}function s(l){return r1(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return Ee(l)?Le(e,a,"whitespace")(l):a(l)}function a(l){return l===null||de(l)?t(l):n(l)}}const ZA={name:"hardBreakEscape",tokenize:eR};function eR(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return de(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const tR={name:"headingAtx",resolve:nR,tokenize:rR};function nR(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Qn(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function rR(e,t,n){let r=0;return s;function s(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(e.consume(d),a):d===null||Yt(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||de(d)?(e.exit("atxHeading"),t(d)):Ee(d)?Le(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Yt(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const sR=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],kx=["pre","script","style","textarea"],iR={concrete:!0,name:"htmlFlow",resolveTo:lR,tokenize:cR},aR={partial:!0,tokenize:dR},oR={partial:!0,tokenize:uR};function lR(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function cR(e,t,n){const r=this;let s,i,a,l,c;return u;function u(_){return d(_)}function d(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),h}function h(_){return _===33?(e.consume(_),m):_===47?(e.consume(_),i=!0,v):_===63?(e.consume(_),s=3,r.interrupt?t:b):Wn(_)?(e.consume(_),a=String.fromCharCode(_),k):n(_)}function m(_){return _===45?(e.consume(_),s=2,f):_===91?(e.consume(_),s=5,l=0,g):Wn(_)?(e.consume(_),s=4,r.interrupt?t:b):n(_)}function f(_){return _===45?(e.consume(_),r.interrupt?t:b):n(_)}function g(_){const le="CDATA[";return _===le.charCodeAt(l++)?(e.consume(_),l===le.length?r.interrupt?t:K:g):n(_)}function v(_){return Wn(_)?(e.consume(_),a=String.fromCharCode(_),k):n(_)}function k(_){if(_===null||_===47||_===62||Yt(_)){const le=_===47,xe=a.toLowerCase();return!le&&!i&&kx.includes(xe)?(s=1,r.interrupt?t(_):K(_)):sR.includes(a.toLowerCase())?(s=6,le?(e.consume(_),x):r.interrupt?t(_):K(_)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):i?y(_):p(_))}return _===45||sn(_)?(e.consume(_),a+=String.fromCharCode(_),k):n(_)}function x(_){return _===62?(e.consume(_),r.interrupt?t:K):n(_)}function y(_){return Ee(_)?(e.consume(_),y):D(_)}function p(_){return _===47?(e.consume(_),D):_===58||_===95||Wn(_)?(e.consume(_),S):Ee(_)?(e.consume(_),p):D(_)}function S(_){return _===45||_===46||_===58||_===95||sn(_)?(e.consume(_),S):E(_)}function E(_){return _===61?(e.consume(_),N):Ee(_)?(e.consume(_),E):p(_)}function N(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),c=_,P):Ee(_)?(e.consume(_),N):T(_)}function P(_){return _===c?(e.consume(_),c=null,O):_===null||de(_)?n(_):(e.consume(_),P)}function T(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||Yt(_)?E(_):(e.consume(_),T)}function O(_){return _===47||_===62||Ee(_)?p(_):n(_)}function D(_){return _===62?(e.consume(_),M):n(_)}function M(_){return _===null||de(_)?K(_):Ee(_)?(e.consume(_),M):n(_)}function K(_){return _===45&&s===2?(e.consume(_),q):_===60&&s===1?(e.consume(_),F):_===62&&s===4?(e.consume(_),z):_===63&&s===3?(e.consume(_),b):_===93&&s===5?(e.consume(_),A):de(_)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(aR,Y,he)(_)):_===null||de(_)?(e.exit("htmlFlowData"),he(_)):(e.consume(_),K)}function he(_){return e.check(oR,$,Y)(_)}function $(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),L}function L(_){return _===null||de(_)?he(_):(e.enter("htmlFlowData"),K(_))}function q(_){return _===45?(e.consume(_),b):K(_)}function F(_){return _===47?(e.consume(_),a="",C):K(_)}function C(_){if(_===62){const le=a.toLowerCase();return kx.includes(le)?(e.consume(_),z):K(_)}return Wn(_)&&a.length<8?(e.consume(_),a+=String.fromCharCode(_),C):K(_)}function A(_){return _===93?(e.consume(_),b):K(_)}function b(_){return _===62?(e.consume(_),z):_===45&&s===2?(e.consume(_),b):K(_)}function z(_){return _===null||de(_)?(e.exit("htmlFlowData"),Y(_)):(e.consume(_),z)}function Y(_){return e.exit("htmlFlow"),t(_)}}function uR(e,t,n){const r=this;return s;function s(a){return de(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function dR(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Mc,t,n)}}const hR={name:"htmlText",tokenize:fR};function fR(e,t,n){const r=this;let s,i,a;return l;function l(b){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(b),c}function c(b){return b===33?(e.consume(b),u):b===47?(e.consume(b),E):b===63?(e.consume(b),p):Wn(b)?(e.consume(b),T):n(b)}function u(b){return b===45?(e.consume(b),d):b===91?(e.consume(b),i=0,g):Wn(b)?(e.consume(b),y):n(b)}function d(b){return b===45?(e.consume(b),f):n(b)}function h(b){return b===null?n(b):b===45?(e.consume(b),m):de(b)?(a=h,F(b)):(e.consume(b),h)}function m(b){return b===45?(e.consume(b),f):h(b)}function f(b){return b===62?q(b):b===45?m(b):h(b)}function g(b){const z="CDATA[";return b===z.charCodeAt(i++)?(e.consume(b),i===z.length?v:g):n(b)}function v(b){return b===null?n(b):b===93?(e.consume(b),k):de(b)?(a=v,F(b)):(e.consume(b),v)}function k(b){return b===93?(e.consume(b),x):v(b)}function x(b){return b===62?q(b):b===93?(e.consume(b),x):v(b)}function y(b){return b===null||b===62?q(b):de(b)?(a=y,F(b)):(e.consume(b),y)}function p(b){return b===null?n(b):b===63?(e.consume(b),S):de(b)?(a=p,F(b)):(e.consume(b),p)}function S(b){return b===62?q(b):p(b)}function E(b){return Wn(b)?(e.consume(b),N):n(b)}function N(b){return b===45||sn(b)?(e.consume(b),N):P(b)}function P(b){return de(b)?(a=P,F(b)):Ee(b)?(e.consume(b),P):q(b)}function T(b){return b===45||sn(b)?(e.consume(b),T):b===47||b===62||Yt(b)?O(b):n(b)}function O(b){return b===47?(e.consume(b),q):b===58||b===95||Wn(b)?(e.consume(b),D):de(b)?(a=O,F(b)):Ee(b)?(e.consume(b),O):q(b)}function D(b){return b===45||b===46||b===58||b===95||sn(b)?(e.consume(b),D):M(b)}function M(b){return b===61?(e.consume(b),K):de(b)?(a=M,F(b)):Ee(b)?(e.consume(b),M):O(b)}function K(b){return b===null||b===60||b===61||b===62||b===96?n(b):b===34||b===39?(e.consume(b),s=b,he):de(b)?(a=K,F(b)):Ee(b)?(e.consume(b),K):(e.consume(b),$)}function he(b){return b===s?(e.consume(b),s=void 0,L):b===null?n(b):de(b)?(a=he,F(b)):(e.consume(b),he)}function $(b){return b===null||b===34||b===39||b===60||b===61||b===96?n(b):b===47||b===62||Yt(b)?O(b):(e.consume(b),$)}function L(b){return b===47||b===62||Yt(b)?O(b):n(b)}function q(b){return b===62?(e.consume(b),e.exit("htmlTextData"),e.exit("htmlText"),t):n(b)}function F(b){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),C}function C(b){return Ee(b)?Le(e,A,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):A(b)}function A(b){return e.enter("htmlTextData"),a(b)}}const Gm={name:"labelEnd",resolveAll:xR,resolveTo:yR,tokenize:vR},mR={tokenize:bR},pR={tokenize:wR},gR={tokenize:kR};function xR(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Qn(e,0,e.length,n),e}function yR(e,t){let n=e.length,r=0,s,i,a,l;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[a][1].end}},d={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[a-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=yn(l,e.slice(i+1,i+r+3)),l=yn(l,[["enter",d,t]]),l=yn(l,qm(t.parser.constructs.insideSpan.null,e.slice(i+r+4,a-3),t)),l=yn(l,[["exit",d,t],e[a-2],e[a-1],["exit",u,t]]),l=yn(l,e.slice(a+1)),l=yn(l,[["exit",c,t]]),Qn(e,i,e.length,l),e}function vR(e,t,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(m){return i?i._inactive?h(m):(a=r.parser.defined.includes(ki(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(mR,d,a?d:h)(m):m===91?e.attempt(pR,d,a?u:h)(m):a?d(m):h(m)}function u(m){return e.attempt(gR,d,h)(m)}function d(m){return t(m)}function h(m){return i._balanced=!0,n(m)}}function bR(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return Yt(h)?Pa(e,i)(h):i(h)}function i(h){return h===41?d(h):t1(e,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return Yt(h)?Pa(e,c)(h):d(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?r1(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return Yt(h)?Pa(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function wR(e,t,n){const r=this;return s;function s(l){return n1.call(r,e,i,a,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(ki(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function a(l){return n(l)}}function kR(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const jR={name:"labelStartImage",resolveAll:Gm.resolveAll,tokenize:SR};function SR(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const NR={name:"labelStartLink",resolveAll:Gm.resolveAll,tokenize:_R};function _R(e,t,n){const r=this;return s;function s(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Wu={name:"lineEnding",tokenize:ER};function ER(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Le(e,t,"linePrefix")}}const kl={name:"thematicBreak",tokenize:CR};function CR(e,t,n){let r=0,s;return i;function i(u){return e.enter("thematicBreak"),a(u)}function a(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||de(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Ee(u)?Le(e,l,"whitespace")(u):l(u))}}const Vt={continuation:{tokenize:RR},exit:DR,name:"list",tokenize:AR},PR={partial:!0,tokenize:LR},TR={partial:!0,tokenize:IR};function AR(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return l;function l(f){const g=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Vh(f)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(kl,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return Vh(f)&&++a<10?(e.consume(f),c):(!r.interrupt||a<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Mc,r.interrupt?n:d,e.attempt(PR,m,h))}function d(f){return r.containerState.initialBlankLine=!0,i++,m(f)}function h(f){return Ee(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):n(f)}function m(f){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function RR(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Mc,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Le(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!Ee(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(TR,t,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Le(e,e.attempt(Vt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function IR(e,t,n){const r=this;return Le(e,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(i):n(i)}}function DR(e){e.exit(this.containerState.type)}function LR(e,t,n){const r=this;return Le(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!Ee(i)&&a&&a[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const jx={name:"setextUnderline",resolveTo:OR,tokenize:$R};function OR(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",a,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function $R(e,t,n){const r=this;let s;return i;function i(u){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),s=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Ee(u)?Le(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||de(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const MR={tokenize:FR};function FR(e){const t=this,n=e.attempt(Mc,r,e.attempt(this.parser.constructs.flowInitial,s,Le(e,e.attempt(this.parser.constructs.flow,s,e.attempt(HA,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const VR={resolveAll:i1()},UR=s1("string"),zR=s1("text");function s1(e){return{resolveAll:i1(e==="text"?BR:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,a,l);return a;function a(d){return u(d)?i(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),i(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const h=s[d];let m=-1;if(h)for(;++m<h.length;){const f=h[m];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function i1(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function BR(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,a=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const HR={42:Vt,43:Vt,45:Vt,48:Vt,49:Vt,50:Vt,51:Vt,52:Vt,53:Vt,54:Vt,55:Vt,56:Vt,57:Vt,62:Yk},WR={91:XA},qR={[-2]:Hu,[-1]:Hu,32:Hu},GR={35:tR,42:kl,45:[jx,kl],60:iR,61:jx,95:kl,96:wx,126:wx},KR={38:Zk,92:Qk},XR={[-5]:Wu,[-4]:Wu,[-3]:Wu,33:jR,38:Zk,42:Uh,60:[NA,hR],91:NR,92:[ZA,Qk],93:Gm,95:Uh,96:MA},JR={null:[Uh,VR]},YR={null:[42,95]},QR={null:[]},ZR=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:YR,contentInitial:WR,disable:QR,document:HR,flow:GR,flowInitial:qR,insideSpan:JR,string:KR,text:XR},Symbol.toStringTag,{value:"Module"}));function eI(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],l=[];const c={attempt:P(E),check:P(N),consume:y,enter:p,exit:S,interrupt:P(N,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function h(M){return a=yn(a,M),k(),a[a.length-1]!==null?[]:(T(t,0),u.events=qm(i,u.events,u),u.events)}function m(M,K){return nI(f(M),K)}function f(M){return tI(a,M)}function g(){const{_bufferIndex:M,_index:K,line:he,column:$,offset:L}=r;return{_bufferIndex:M,_index:K,line:he,column:$,offset:L}}function v(M){s[M.line]=M.column,D()}function k(){let M;for(;r._index<a.length;){const K=a[r._index];if(typeof K=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<K.length;)x(K.charCodeAt(r._bufferIndex));else x(K)}}function x(M){d=d(M)}function y(M){de(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,D()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=M}function p(M,K){const he=K||{};return he.type=M,he.start=g(),u.events.push(["enter",he,u]),l.push(he),he}function S(M){const K=l.pop();return K.end=g(),u.events.push(["exit",K,u]),K}function E(M,K){T(M,K.from)}function N(M,K){K.restore()}function P(M,K){return he;function he($,L,q){let F,C,A,b;return Array.isArray($)?Y($):"tokenize"in $?Y([$]):z($);function z(fe){return Ce;function Ce(vt){const Nn=vt!==null&&fe[vt],dn=vt!==null&&fe.null,Ft=[...Array.isArray(Nn)?Nn:Nn?[Nn]:[],...Array.isArray(dn)?dn:dn?[dn]:[]];return Y(Ft)(vt)}}function Y(fe){return F=fe,C=0,fe.length===0?q:_(fe[C])}function _(fe){return Ce;function Ce(vt){return b=O(),A=fe,fe.partial||(u.currentConstruct=fe),fe.name&&u.parser.constructs.disable.null.includes(fe.name)?xe():fe.tokenize.call(K?Object.assign(Object.create(u),K):u,c,le,xe)(vt)}}function le(fe){return M(A,b),L}function xe(fe){return b.restore(),++C<F.length?_(F[C]):q}}}function T(M,K){M.resolveAll&&!i.includes(M)&&i.push(M),M.resolve&&Qn(u.events,K,u.events.length-K,M.resolve(u.events.slice(K),u)),M.resolveTo&&(u.events=M.resolveTo(u.events,u))}function O(){const M=g(),K=u.previous,he=u.currentConstruct,$=u.events.length,L=Array.from(l);return{from:$,restore:q};function q(){r=M,u.previous=K,u.currentConstruct=he,u.events.length=$,l=L,D()}}function D(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function tI(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}function nI(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function rI(e){const r={constructs:uA([ZR,...(e||{}).extensions||[]]),content:s(yA),defined:[],document:s(bA),flow:s(MR),lazy:{},string:s(UR),text:s(zR)};return r;function s(i){return a;function a(l){return eI(r,i,l)}}}function sI(e){for(;!e1(e););return e}const Sx=/[\0\t\n\r]/g;function iI(){let e=1,t="",n=!0,r;return s;function s(i,a,l){const c=[];let u,d,h,m,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),h=0,t="",n&&(i.charCodeAt(0)===65279&&h++,n=void 0);h<i.length;){if(Sx.lastIndex=h,u=Sx.exec(i),m=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(m),!u){t=i.slice(h);break}if(f===10&&h===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<m&&(c.push(i.slice(h,m)),e+=m-h),f){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const aI=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function oI(e){return e.replace(aI,lI)}function lI(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return Jk(n.slice(i?2:1),i?16:10)}return Wm(n)||e}const a1={}.hasOwnProperty;function cI(e,t,n){return typeof t!="string"&&(n=t,t=void 0),uI(n)(sI(rI(n).document().write(iI()(e,t,!0))))}function uI(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(w),autolinkProtocol:O,autolinkEmail:O,atxHeading:i(Ze),blockQuote:i(dn),characterEscape:O,characterReference:O,codeFenced:i(Ft),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(Ft,a),codeText:i(Q,a),codeTextData:O,data:O,codeFlowValue:O,definition:i(Xe),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(hn),hardBreakEscape:i(it),hardBreakTrailing:i(it),htmlFlow:i(Zt,a),htmlFlowData:O,htmlText:i(Zt,a),htmlTextData:O,image:i(I),label:a,link:i(w),listItem:i(se),listItemValue:m,listOrdered:i(H,h),listUnordered:i(H),paragraph:i(_e),reference:_,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(Ze),strong:i(Pe),thematicBreak:i(et)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:Nn,autolinkProtocol:vt,blockQuote:c(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:xe,characterReferenceMarkerNumeric:xe,characterReferenceValue:fe,characterReference:Ce,codeFenced:c(k),codeFencedFence:v,codeFencedFenceInfo:f,codeFencedFenceMeta:g,codeFlowValue:D,codeIndented:c(x),codeText:c(L),codeTextData:D,data:D,definition:c(),definitionDestinationString:S,definitionLabelString:y,definitionTitleString:p,emphasis:c(),hardBreakEscape:c(K),hardBreakTrailing:c(K),htmlFlow:c(he),htmlFlowData:D,htmlText:c($),htmlTextData:D,image:c(F),label:A,labelText:C,lineEnding:M,link:c(q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:le,resourceDestinationString:b,resourceTitleString:z,resource:Y,setextHeading:c(T),setextHeadingLineSequence:P,setextHeadingText:N,strong:c(),thematicBreak:c()}};o1(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(R){let U={type:"root",children:[]};const ne={stack:[U],tokenStack:[],config:t,enter:l,exit:u,buffer:a,resume:d,data:n},ie=[];let re=-1;for(;++re<R.length;)if(R[re][1].type==="listOrdered"||R[re][1].type==="listUnordered")if(R[re][0]==="enter")ie.push(re);else{const ve=ie.pop();re=s(R,ve,re)}for(re=-1;++re<R.length;){const ve=t[R[re][0]];a1.call(ve,R[re][1].type)&&ve[R[re][1].type].call(Object.assign({sliceSerialize:R[re][2].sliceSerialize},ne),R[re][1])}if(ne.tokenStack.length>0){const ve=ne.tokenStack[ne.tokenStack.length-1];(ve[1]||Nx).call(ne,void 0,ve[0])}for(U.position={start:_r(R.length>0?R[0][1].start:{line:1,column:1,offset:0}),end:_r(R.length>0?R[R.length-2][1].end:{line:1,column:1,offset:0})},re=-1;++re<t.transforms.length;)U=t.transforms[re](U)||U;return U}function s(R,U,ne){let ie=U-1,re=-1,ve=!1,qe,ft,at,V;for(;++ie<=ne;){const G=R[ie];switch(G[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{G[0]==="enter"?re++:re--,V=void 0;break}case"lineEndingBlank":{G[0]==="enter"&&(qe&&!V&&!re&&!at&&(at=ie),V=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:V=void 0}if(!re&&G[0]==="enter"&&G[1].type==="listItemPrefix"||re===-1&&G[0]==="exit"&&(G[1].type==="listUnordered"||G[1].type==="listOrdered")){if(qe){let X=ie;for(ft=void 0;X--;){const ce=R[X];if(ce[1].type==="lineEnding"||ce[1].type==="lineEndingBlank"){if(ce[0]==="exit")continue;ft&&(R[ft][1].type="lineEndingBlank",ve=!0),ce[1].type="lineEnding",ft=X}else if(!(ce[1].type==="linePrefix"||ce[1].type==="blockQuotePrefix"||ce[1].type==="blockQuotePrefixWhitespace"||ce[1].type==="blockQuoteMarker"||ce[1].type==="listItemIndent"))break}at&&(!ft||at<ft)&&(qe._spread=!0),qe.end=Object.assign({},ft?R[ft][1].start:G[1].end),R.splice(ft||ie,0,["exit",qe,G[2]]),ie++,ne++}if(G[1].type==="listItemPrefix"){const X={type:"listItem",_spread:!1,start:Object.assign({},G[1].start),end:void 0};qe=X,R.splice(ie,0,["enter",X,G[2]]),ie++,ne++,at=void 0,V=!0}}}return R[U][1]._spread=ve,ne}function i(R,U){return ne;function ne(ie){l.call(this,R(ie),ie),U&&U.call(this,ie)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(R,U,ne){this.stack[this.stack.length-1].children.push(R),this.stack.push(R),this.tokenStack.push([U,ne||void 0]),R.position={start:_r(U.start),end:void 0}}function c(R){return U;function U(ne){R&&R.call(this,ne),u.call(this,ne)}}function u(R,U){const ne=this.stack.pop(),ie=this.tokenStack.pop();if(ie)ie[0].type!==R.type&&(U?U.call(this,R,ie[0]):(ie[1]||Nx).call(this,R,ie[0]));else throw new Error("Cannot close `"+R.type+"` ("+Ca({start:R.start,end:R.end})+"): it’s not open");ne.position.end=_r(R.end)}function d(){return lA(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(R){if(this.data.expectingFirstListItemValue){const U=this.stack[this.stack.length-2];U.start=Number.parseInt(this.sliceSerialize(R),10),this.data.expectingFirstListItemValue=void 0}}function f(){const R=this.resume(),U=this.stack[this.stack.length-1];U.lang=R}function g(){const R=this.resume(),U=this.stack[this.stack.length-1];U.meta=R}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R.replace(/(\r?\n|\r)$/g,"")}function y(R){const U=this.resume(),ne=this.stack[this.stack.length-1];ne.label=U,ne.identifier=ki(this.sliceSerialize(R)).toLowerCase()}function p(){const R=this.resume(),U=this.stack[this.stack.length-1];U.title=R}function S(){const R=this.resume(),U=this.stack[this.stack.length-1];U.url=R}function E(R){const U=this.stack[this.stack.length-1];if(!U.depth){const ne=this.sliceSerialize(R).length;U.depth=ne}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function P(R){const U=this.stack[this.stack.length-1];U.depth=this.sliceSerialize(R).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function O(R){const ne=this.stack[this.stack.length-1].children;let ie=ne[ne.length-1];(!ie||ie.type!=="text")&&(ie=be(),ie.position={start:_r(R.start),end:void 0},ne.push(ie)),this.stack.push(ie)}function D(R){const U=this.stack.pop();U.value+=this.sliceSerialize(R),U.position.end=_r(R.end)}function M(R){const U=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ne=U.children[U.children.length-1];ne.position.end=_r(R.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(U.type)&&(O.call(this,R),D.call(this,R))}function K(){this.data.atHardBreak=!0}function he(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R}function $(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R}function L(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R}function q(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=U,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function F(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=U,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function C(R){const U=this.sliceSerialize(R),ne=this.stack[this.stack.length-2];ne.label=oI(U),ne.identifier=ki(U).toLowerCase()}function A(){const R=this.stack[this.stack.length-1],U=this.resume(),ne=this.stack[this.stack.length-1];if(this.data.inReference=!0,ne.type==="link"){const ie=R.children;ne.children=ie}else ne.alt=U}function b(){const R=this.resume(),U=this.stack[this.stack.length-1];U.url=R}function z(){const R=this.resume(),U=this.stack[this.stack.length-1];U.title=R}function Y(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function le(R){const U=this.resume(),ne=this.stack[this.stack.length-1];ne.label=U,ne.identifier=ki(this.sliceSerialize(R)).toLowerCase(),this.data.referenceType="full"}function xe(R){this.data.characterReferenceType=R.type}function fe(R){const U=this.sliceSerialize(R),ne=this.data.characterReferenceType;let ie;ne?(ie=Jk(U,ne==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ie=Wm(U);const re=this.stack[this.stack.length-1];re.value+=ie}function Ce(R){const U=this.stack.pop();U.position.end=_r(R.end)}function vt(R){D.call(this,R);const U=this.stack[this.stack.length-1];U.url=this.sliceSerialize(R)}function Nn(R){D.call(this,R);const U=this.stack[this.stack.length-1];U.url="mailto:"+this.sliceSerialize(R)}function dn(){return{type:"blockquote",children:[]}}function Ft(){return{type:"code",lang:null,meta:null,value:""}}function Q(){return{type:"inlineCode",value:""}}function Xe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function hn(){return{type:"emphasis",children:[]}}function Ze(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Zt(){return{type:"html",value:""}}function I(){return{type:"image",title:null,url:"",alt:null}}function w(){return{type:"link",title:null,url:"",children:[]}}function H(R){return{type:"list",ordered:R.type==="listOrdered",start:null,spread:R._spread,children:[]}}function se(R){return{type:"listItem",spread:R._spread,checked:null,children:[]}}function _e(){return{type:"paragraph",children:[]}}function Pe(){return{type:"strong",children:[]}}function be(){return{type:"text",value:""}}function et(){return{type:"thematicBreak"}}}function _r(e){return{line:e.line,column:e.column,offset:e.offset}}function o1(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?o1(e,r):dI(e,r)}}function dI(e,t){let n;for(n in t)if(a1.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Nx(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ca({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ca({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ca({start:t.start,end:t.end})+") is still open")}function hI(e){const t=this;t.parser=n;function n(r){return cI(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function fI(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function mI(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function pI(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function gI(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xI(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yI(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Wi(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function vI(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bI(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function l1(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function wI(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return l1(e,t);const s={src:Wi(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function kI(e,t){const n={src:Wi(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function jI(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function SI(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return l1(e,t);const s={href:Wi(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function NI(e,t){const n={href:Wi(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function _I(e,t,n){const r=e.all(t),s=n?EI(n):c1(t),i={},a=[];if(typeof t.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?a.push(...d.children):a.push(d)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,u),e.applyData(t,u)}function EI(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=c1(n[r])}return t}function c1(e){const t=e.spread;return t??e.children.length>1}function CI(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function PI(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function TI(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function AI(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function RI(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Um(t.children[1]),c=Bk(t.children[t.children.length-1]);l&&c&&(a.position={start:l,end:c}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function II(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],m={},f=a?a[c]:void 0;f&&(m.align=f);let g={type:"element",tagName:i,properties:m,children:[]};h&&(g.children=e.all(h),e.patch(h,g),g=e.applyData(h,g)),u.push(g)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function DI(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const _x=9,Ex=32;function LI(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(Cx(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(Cx(t.slice(s),s>0,!1)),i.join("")}function Cx(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===_x||i===Ex;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===_x||i===Ex;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function OI(e,t){const n={type:"text",value:LI(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function $I(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const MI={blockquote:fI,break:mI,code:pI,delete:gI,emphasis:xI,footnoteReference:yI,heading:vI,html:bI,imageReference:wI,image:kI,inlineCode:jI,linkReference:SI,link:NI,listItem:_I,list:CI,paragraph:PI,root:TI,strong:AI,table:RI,tableCell:DI,tableRow:II,text:OI,thematicBreak:$I,toml:Qo,yaml:Qo,definition:Qo,footnoteDefinition:Qo};function Qo(){}const u1=-1,Fc=0,Ta=1,ac=2,Km=3,Xm=4,Jm=5,Ym=6,d1=7,h1=8,Px=typeof self=="object"?self:globalThis,FI=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case Fc:case u1:return n(a,s);case Ta:{const l=n([],s);for(const c of a)l.push(r(c));return l}case ac:{const l=n({},s);for(const[c,u]of a)l[r(c)]=r(u);return l}case Km:return n(new Date(a),s);case Xm:{const{source:l,flags:c}=a;return n(new RegExp(l,c),s)}case Jm:{const l=n(new Map,s);for(const[c,u]of a)l.set(r(c),r(u));return l}case Ym:{const l=n(new Set,s);for(const c of a)l.add(r(c));return l}case d1:{const{name:l,message:c}=a;return n(new Px[l](c),s)}case h1:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new Px[i](a),s)};return r},Tx=e=>FI(new Map,e)(0),Gs="",{toString:VI}={},{keys:UI}=Object,sa=e=>{const t=typeof e;if(t!=="object"||!e)return[Fc,t];const n=VI.call(e).slice(8,-1);switch(n){case"Array":return[Ta,Gs];case"Object":return[ac,Gs];case"Date":return[Km,Gs];case"RegExp":return[Xm,Gs];case"Map":return[Jm,Gs];case"Set":return[Ym,Gs];case"DataView":return[Ta,n]}return n.includes("Array")?[Ta,n]:n.includes("Error")?[d1,n]:[ac,n]},Zo=([e,t])=>e===Fc&&(t==="function"||t==="symbol"),zI=(e,t,n,r)=>{const s=(a,l)=>{const c=r.push(a)-1;return n.set(l,c),c},i=a=>{if(n.has(a))return n.get(a);let[l,c]=sa(a);switch(l){case Fc:{let d=a;switch(c){case"bigint":l=h1,d=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([u1],a)}return s([l,d],a)}case Ta:{if(c){let m=a;return c==="DataView"?m=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(a)),s([c,[...m]],a)}const d=[],h=s([l,d],a);for(const m of a)d.push(i(m));return h}case ac:{if(c)switch(c){case"BigInt":return s([c,a.toString()],a);case"Boolean":case"Number":case"String":return s([c,a.valueOf()],a)}if(t&&"toJSON"in a)return i(a.toJSON());const d=[],h=s([l,d],a);for(const m of UI(a))(e||!Zo(sa(a[m])))&&d.push([i(m),i(a[m])]);return h}case Km:return s([l,a.toISOString()],a);case Xm:{const{source:d,flags:h}=a;return s([l,{source:d,flags:h}],a)}case Jm:{const d=[],h=s([l,d],a);for(const[m,f]of a)(e||!(Zo(sa(m))||Zo(sa(f))))&&d.push([i(m),i(f)]);return h}case Ym:{const d=[],h=s([l,d],a);for(const m of a)(e||!Zo(sa(m)))&&d.push(i(m));return h}}const{message:u}=a;return s([l,{name:c,message:u}],a)};return i},Ax=(e,{json:t,lossy:n}={})=>{const r=[];return zI(!(t||n),!!t,new Map,r)(e),r},oc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Tx(Ax(e,t)):structuredClone(e):(e,t)=>Tx(Ax(e,t));function BI(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function HI(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function WI(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||BI,r=e.options.footnoteBackLabel||HI,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),m=Wi(h.toLowerCase());let f=0;const g=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++f<=v;){g.length>0&&g.push({type:"text",value:" "});let y=typeof n=="string"?n:n(c,f);typeof y=="string"&&(y={type:"text",value:y}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const k=d[d.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const y=k.children[k.children.length-1];y&&y.type==="text"?y.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...g)}else d.push(...g);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(d,!0)};e.patch(u,x),l.push(x)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...oc(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const f1=function(e){if(e==null)return XI;if(typeof e=="function")return Vc(e);if(typeof e=="object")return Array.isArray(e)?qI(e):GI(e);if(typeof e=="string")return KI(e);throw new Error("Expected function, string, or object as test")};function qI(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=f1(e[n]);return Vc(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function GI(e){const t=e;return Vc(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function KI(e){return Vc(t);function t(n){return n&&n.type===e}}function Vc(e){return t;function t(n,r,s){return!!(JI(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function XI(){return!0}function JI(e){return e!==null&&typeof e=="object"&&"type"in e}const m1=[],YI=!0,Rx=!1,QI="skip";function ZI(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=f1(s),a=r?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=m1,g,v,k;if((!t||i(c,u,d[d.length-1]||void 0))&&(f=eD(n(c,d)),f[0]===Rx))return f;if("children"in c&&c.children){const x=c;if(x.children&&f[0]!==QI)for(v=(r?x.children.length:-1)+a,k=d.concat(x);v>-1&&v<x.children.length;){const y=x.children[v];if(g=l(y,v,k)(),g[0]===Rx)return g;v=typeof g[1]=="number"?g[1]:v+a}}return f}}}function eD(e){return Array.isArray(e)?e:typeof e=="number"?[YI,e]:e==null?m1:[e]}function p1(e,t,n,r){let s,i,a;typeof t=="function"&&typeof n!="function"?(i=void 0,a=t,s=n):(i=t,a=n,s=r),ZI(e,i,l,s);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return a(c,h,d)}}const zh={}.hasOwnProperty,tD={};function nD(e,t){const n=t||tD,r=new Map,s=new Map,i=new Map,a={...MI,...n.handlers},l={all:u,applyData:sD,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:c,options:n,patch:rD,wrap:aD};return p1(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:s,m=String(d.identifier).toUpperCase();h.has(m)||h.set(m,d)}}),l;function c(d,h){const m=d.type,f=l.handlers[m];if(zh.call(l.handlers,m)&&f)return f(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in d){const{children:v,...k}=d,x=oc(k);return x.children=l.all(d),x}return oc(d)}return(l.options.unknownHandler||iD)(l,d,h)}function u(d){const h=[];if("children"in d){const m=d.children;let f=-1;for(;++f<m.length;){const g=l.one(m[f],d);if(g){if(f&&m[f-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=Ix(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=Ix(v.value))}Array.isArray(g)?h.push(...g):h.push(g)}}}return h}}function rD(e,t){e.position&&(t.position=V5(e))}function sD(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,oc(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function iD(e,t){const n=t.data||{},r="value"in t&&!(zh.call(n,"hProperties")||zh.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function aD(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Ix(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Dx(e,t){const n=nD(e,t),r=n.one(e,void 0),s=WI(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function oD(e,t){return e&&"run"in e?async function(n,r){const s=Dx(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Dx(n,{file:r,...e||t})}}function Lx(e){if(e)throw e}var jl=Object.prototype.hasOwnProperty,g1=Object.prototype.toString,Ox=Object.defineProperty,$x=Object.getOwnPropertyDescriptor,Mx=function(t){return typeof Array.isArray=="function"?Array.isArray(t):g1.call(t)==="[object Array]"},Fx=function(t){if(!t||g1.call(t)!=="[object Object]")return!1;var n=jl.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&jl.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||jl.call(t,s)},Vx=function(t,n){Ox&&n.name==="__proto__"?Ox(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Ux=function(t,n){if(n==="__proto__")if(jl.call(t,n)){if($x)return $x(t,n).value}else return;return t[n]},lD=function e(){var t,n,r,s,i,a,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=Ux(l,n),s=Ux(t,n),l!==s&&(d&&s&&(Fx(s)||(i=Mx(s)))?(i?(i=!1,a=r&&Mx(r)?r:[]):a=r&&Fx(r)?r:{},Vx(l,{name:n,newValue:e(d,a,s)})):typeof s<"u"&&Vx(l,{name:n,newValue:s}));return l};const qu=qh(lD);function Bh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function cD(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...s);function l(c,...u){const d=e[++i];let h=-1;if(c){a(c);return}for(;++h<s.length;)(u[h]===null||u[h]===void 0)&&(u[h]=s[h]);s=u,d?uD(d,l)(...u):a(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function uD(e,t){let n;return r;function r(...a){const l=e.length>a.length;let c;l&&a.push(s);try{c=e.apply(this,a)}catch(u){const d=u;if(l&&n)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(a,...l){n||(n=!0,t(a,...l))}function i(a){s(null,a)}}const zn={basename:dD,dirname:hD,extname:fD,join:mD,sep:"/"};function dD(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');No(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function hD(e){if(No(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function fD(e){No(e);let t=e.length,n=-1,r=0,s=-1,i=0,a;for(;t--;){const l=e.codePointAt(t);if(l===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function mD(...e){let t=-1,n;for(;++t<e.length;)No(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":pD(n)}function pD(e){No(e);const t=e.codePointAt(0)===47;let n=gD(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function gD(e,t){let n="",r=0,s=-1,i=0,a=-1,l,c;for(;++a<=e.length;){if(a<e.length)l=e.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,a):n=e.slice(s+1,a),r=a-s-1;s=a,i=0}else l===46&&i>-1?i++:i=-1}return n}function No(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const xD={cwd:yD};function yD(){return"/"}function Hh(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function vD(e){if(typeof e=="string")e=new URL(e);else if(!Hh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return bD(e)}function bD(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Gu=["history","path","basename","stem","extname","dirname"];class x1{constructor(t){let n;t?Hh(t)?n={path:t}:typeof t=="string"||wD(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":xD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Gu.length;){const i=Gu[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Gu.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?zn.basename(this.path):void 0}set basename(t){Xu(t,"basename"),Ku(t,"basename"),this.path=zn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?zn.dirname(this.path):void 0}set dirname(t){zx(this.basename,"dirname"),this.path=zn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?zn.extname(this.path):void 0}set extname(t){if(Ku(t,"extname"),zx(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=zn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Hh(t)&&(t=vD(t)),Xu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?zn.basename(this.path,this.extname):void 0}set stem(t){Xu(t,"stem"),Ku(t,"stem"),this.path=zn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new At(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Ku(e,t){if(e&&e.includes(zn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+zn.sep+"`")}function Xu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function zx(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function wD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const kD=function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},jD={}.hasOwnProperty;class Qm extends kD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=cD()}copy(){const t=new Qm;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(qu(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Qu("data",this.frozen),this.namespace[t]=n,this):jD.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Qu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=el(t),r=this.parser||this.Parser;return Ju("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Ju("process",this.parser||this.Parser),Yu("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const l=el(t),c=r.parse(l);r.run(c,l,function(d,h,m){if(d||!h||!m)return u(d);const f=h,g=r.stringify(f,m);_D(g)?m.value=g:m.result=g,u(d,m)});function u(d,h){d||!h?a(d):i?i(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),Ju("processSync",this.parser||this.Parser),Yu("processSync",this.compiler||this.Compiler),this.process(t,s),Hx("processSync","process",n),r;function s(i,a){n=!0,Lx(i),r=a}}run(t,n,r){Bx(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,l){const c=el(n);s.run(t,c,u);function u(d,h,m){const f=h||t;d?l(d):a?a(f):r(void 0,f,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),Hx("runSync","run",r),s;function i(a,l){Lx(a),s=l,r=!0}}stringify(t,n){this.freeze();const r=el(n),s=this.compiler||this.Compiler;return Yu("stringify",s),Bx(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Qu("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=qu(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];i(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===u){m=h;break}if(m===-1)r.push([u,...d]);else if(d.length>0){let[f,...g]=d;const v=r[m][1];Bh(v)&&Bh(f)&&(f=qu(!0,v,f)),r[m]=[u,f,...g]}}}}const SD=new Qm().freeze();function Ju(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Yu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Qu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Bx(e){if(!Bh(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Hx(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function el(e){return ND(e)?e:new x1(e)}function ND(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function _D(e){return typeof e=="string"||ED(e)}function ED(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const CD="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Wx=[],qx={allowDangerousHtml:!0},PD=/^(https?|ircs?|mailto|xmpp)$/i,TD=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Wh(e){const t=AD(e),n=RD(e);return ID(t.runSync(t.parse(n),n),e)}function AD(e){const t=e.rehypePlugins||Wx,n=e.remarkPlugins||Wx,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...qx}:qx;return SD().use(hI).use(n).use(oD,r).use(t)}function RD(e){const t=e.children||"",n=new x1;return typeof t=="string"&&(n.value=t),n}function ID(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,a=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||DD;for(const d of TD)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+CD+d.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),p1(e,u),W5(e,{Fragment:o.Fragment,components:s,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function u(d,h,m){if(d.type==="raw"&&m&&typeof h=="number")return a?m.children.splice(h,1):m.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let f;for(f in Bu)if(Object.hasOwn(Bu,f)&&Object.hasOwn(d.properties,f)){const g=d.properties[f],v=Bu[f];(v===null||v.includes(d.tagName))&&(d.properties[f]=c(String(g||""),f,d))}}if(d.type==="element"){let f=n?!n.includes(d.tagName):i?i.includes(d.tagName):!1;if(!f&&r&&typeof h=="number"&&(f=!r(d,h,m)),f&&m&&typeof h=="number")return l&&d.children?m.children.splice(h,1,...d.children):m.children.splice(h,1),h}}}function DD(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||PD.test(e.slice(0,t))?e:""}function Gx({strategicDirectives:e,onUpdateChecklist:t,onSetActiveSD:n,currentSD:r,isCompact:s,detailMode:i,onRefresh:a,onUpdateStatus:l}){const{id:c}=po(),u=br(),[d,h]=j.useState(null),[m,f]=j.useState("list"),[g,v]=j.useState(null),[k,x]=j.useState(()=>localStorage.getItem("sd-status-filter")||"active_draft"),[y,p]=j.useState(!1),[S,E]=j.useState(""),[N,P]=j.useState("all"),[T,O]=j.useState("all"),[D,M]=j.useState(null),[K,he]=j.useState(null),[$,L]=j.useState(null),[q,F]=j.useState(null),[C,A]=j.useState({}),[b,z]=j.useState({}),[Y,_]=j.useState({});j.useEffect(()=>{localStorage.setItem("sd-status-filter",k)},[k]),j.useEffect(()=>{if(i&&c){console.log("Detail mode - Looking for SD with id:",c),console.log("Available SDs count:",e.length),e.length>0&&console.log("First few SDs:",e.slice(0,3).map(H=>({id:H.id,title:H.title})));const w=e.find(H=>H.id===c);w?(console.log("Found SD:",w.id,w.title),v(w),f("detail"),document.title=`${w.title||w.id} - LEO Protocol Dashboard`):e.length>0?(console.warn(`SD with id '${c}' not found in ${e.length} directives, redirecting to list`),u("/strategic-directives",{replace:!0})):console.log("Waiting for strategic directives to load...")}else i||(f("list"),v(null),document.title="Strategic Directives - LEO Protocol Dashboard")},[c,i,e,u]);const le=w=>{h(d===w?null:w)},xe=w=>{navigator.clipboard.writeText(w),M(w),setTimeout(()=>M(null),2e3)},fe=async w=>{if(!(C[w]||Y[w])){_(H=>({...H,[w]:!0}));try{const H=await fetch(`/api/strategic-directives/${w}/backlog-summary`),se=await H.json();H.ok?A(_e=>({..._e,[w]:se})):console.error("Failed to fetch backlog summary:",se.error)}catch(H){console.error("Error fetching backlog summary:",H)}finally{_(H=>({...H,[w]:!1}))}}},Ce=w=>{b[w]?z(se=>({...se,[w]:!1})):(z(se=>({...se,[w]:!0})),fe(w))},vt=()=>{E(""),P("all"),x("all"),O("all")},Nn=S||N!=="all"||k!=="all"||T!=="all",dn=w=>{switch(w==null?void 0:w.toLowerCase()){case"critical":return"border-l-4 border-l-red-500";case"high":return"border-l-4 border-l-orange-500";case"medium":return"border-l-4 border-l-yellow-500";case"low":return"border-l-4 border-l-gray-400";default:return"border-l-4 border-l-gray-300"}},Ft=w=>w===100?"bg-gradient-to-r from-green-400 to-green-600 animate-pulse":w>=76?"bg-gradient-to-r from-blue-400 to-blue-600":w>=51?"bg-gradient-to-r from-yellow-400 to-yellow-600":w>=26?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gradient-to-r from-red-400 to-red-600",Q=(w,H)=>{const se=e.find(_e=>_e.id===w);se&&se.checklist&&se.checklist[H]&&t(w,H,!se.checklist[H].checked)},Xe=async(w,H)=>{F(w);try{if(!(await fetch(`/api/strategic-directives/${w}/reorder`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({direction:H})})).ok)throw new Error("Failed to reorder");a&&await a()}catch(se){console.error("Error reordering strategic directive:",se)}finally{F(null)}},hn=w=>{if(!w||!w.id){console.error("Invalid SD for navigation:",w);return}try{u(`/strategic-directives/${w.id}`)}catch(H){console.error("Navigation error:",H)}};if(m==="detail"&&g)return o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>u("/strategic-directives"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[o.jsx(Wt,{className:"w-4 h-4 mr-1"}),"Back to List"]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsx("div",{className:"text-primary-600 dark:text-primary-400 font-mono text-lg font-semibold mb-2",children:g.id}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:g.title||"Untitled"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:g.metadata&&Object.entries(g.metadata).map(([w,H])=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:w}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:typeof H=="object"?JSON.stringify(H,null,2):String(H)})]},w))}),o.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:o.jsx(Wh,{children:g.content||"No content available"})}),g.checklist&&g.checklist.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Requirements Checklist"}),o.jsx("div",{className:"space-y-2",children:g.checklist.map((w,H)=>o.jsxs("label",{className:"flex items-start p-3 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:w.checked,onChange:()=>Q(g.id,H),className:"mt-1 mr-3 w-5 h-5 text-primary-600 rounded focus:ring-primary-500"}),o.jsx("span",{className:`flex-1 ${w.checked?"line-through text-gray-500":""}`,children:w.text})]},H))})]}),g.prds&&g.prds.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[o.jsx(xt,{className:"w-5 h-5 mr-2 text-blue-600"}),"Product Requirements Documents (",g.prds.length,")"]}),o.jsx("div",{className:"space-y-4",children:g.prds.map(w=>o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:w.title}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["ID: ",w.id]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.status==="approved"?"bg-green-100 text-green-800":w.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:w.status}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.priority==="high"?"bg-red-100 text-red-800":w.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:w.priority})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Phase:"})," ",w.phase]}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Progress:"})," ",w.progress,"%"]})]}),o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Created:"})," ",new Date(w.createdAt).toLocaleDateString()]})})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:o.jsxs("button",{onClick:()=>u(`/prds/${w.id}`),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center",children:["View Full PRD ",o.jsx(Wt,{className:"w-4 h-4 ml-1"})]})})]},w.id))})]}),g.executionSequences&&g.executionSequences.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[o.jsx(Xr,{className:"w-5 h-5 mr-2 text-green-600"}),"Execution Sequence Steps (",g.executionSequences.length,")"]}),o.jsx("div",{className:"space-y-3",children:g.executionSequences.map(w=>o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${w.status==="completed"?"bg-green-500 text-white":w.status==="in_progress"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:w.sequenceNumber}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:w.description}),o.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-green-700 dark:text-green-300",children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Executor:"})," ",w.executorRole]}),w.completedAt&&o.jsxs("span",{children:[o.jsx("strong",{children:"Completed:"})," ",new Date(w.completedAt).toLocaleDateString()]})]})]})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.status==="completed"?"bg-green-100 text-green-800":w.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:w.status})]})},w.id))})]})]})]});if(m==="detail"&&!g)return o.jsx("div",{className:"p-6 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading strategic directive..."})]})});const Ze=e.filter(w=>{var be,et,R,U,ne,ie,re,ve,qe,ft;let H=!0;k!=="all"&&(k==="active_draft"?H=((be=w.status)==null?void 0:be.toLowerCase())==="active"||((et=w.status)==null?void 0:et.toLowerCase())==="draft":k==="active"?H=((R=w.status)==null?void 0:R.toLowerCase())==="active":k==="draft"?H=((U=w.status)==null?void 0:U.toLowerCase())==="draft":k==="superseded"?H=((ne=w.status)==null?void 0:ne.toLowerCase())==="superseded":k==="completed"&&(H=((ie=w.status)==null?void 0:ie.toLowerCase())==="completed"));let se=!0;if(S){const at=S.toLowerCase();se=((re=w.id)==null?void 0:re.toLowerCase().includes(at))||((ve=w.title)==null?void 0:ve.toLowerCase().includes(at))||((qe=w.description)==null?void 0:qe.toLowerCase().includes(at))}let _e=!0;N!=="all"&&(_e=((ft=w.priority)==null?void 0:ft.toLowerCase())===N.toLowerCase());let Pe=!0;return T!=="all"&&(T==="ehg_engineer"?Pe=w.target_application==="EHG_ENGINEER":T==="ehg"&&(Pe=w.target_application==="EHG"||!w.target_application)),H&&se&&_e&&Pe}),it=[...Ze].sort((w,H)=>{if(w.execution_order!==void 0&&H.execution_order!==void 0)return w.execution_order-H.execution_order;if(w.execution_order!==void 0)return-1;if(H.execution_order!==void 0)return 1;if(w.sequence_rank!==void 0&&H.sequence_rank!==void 0)return w.sequence_rank-H.sequence_rank;if(w.sequence_rank!==void 0)return-1;if(H.sequence_rank!==void 0)return 1;const se=be=>{if(!be)return 999999;const et=be.match(/SD-(\d+)/);return et?parseInt(et[1],10):999999},_e=se(w.id),Pe=se(H.id);return _e-Pe}),Zt=()=>{switch(k){case"active_draft":return"Active & Draft";case"active":return"Active Only";case"draft":return"Draft Only";case"superseded":return"Superseded Only";case"completed":return"Completed Only";case"all":return"All Directives";default:return"Active & Draft"}},I=w=>(w==null?void 0:w.toLowerCase())==="completed"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700 dark:bg-green-700 dark:text-green-300 transition-all duration-200 hover:scale-105",children:[o.jsx(Ut,{className:"w-3 h-3 mr-1"}),"Completed"]}):(w==null?void 0:w.toLowerCase())==="draft"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 transition-all duration-200 hover:scale-105",children:[o.jsx(L0,{className:"w-3 h-3 mr-1"}),"Draft"]}):(w==null?void 0:w.toLowerCase())==="superseded"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 transition-all duration-200 hover:scale-105",children:[o.jsx(I0,{className:"w-3 h-3 mr-1"}),"Superseded"]}):o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 transition-all duration-200 hover:scale-105",children:[o.jsx(Ns,{className:"w-3 h-3 mr-1 animate-pulse"}),"Active"]});return o.jsxs("div",{className:s?"p-3":"p-6",children:[o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nc,{className:"w-6 h-6 text-primary-500 animate-pulse"}),o.jsx("h1",{className:`${s?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white`,children:"Strategic Directives"})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[o.jsxs("span",{children:["Showing ",Ze.length," of ",e.length," directives"]}),Ze.filter(w=>w.rolled_triage).length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full"}),o.jsxs("span",{className:"font-medium",children:[Ze.filter(w=>w.rolled_triage==="High").length,"H /",Ze.filter(w=>w.rolled_triage==="Medium").length,"M /",Ze.filter(w=>w.rolled_triage==="Low").length,"L /",Ze.filter(w=>w.rolled_triage==="Future").length,"F"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bo,{onRefresh:a,className:s?"p-1.5":"p-2"}),o.jsxs("button",{onClick:()=>u("/directive-lab"),className:`flex items-center gap-2 ${s?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[o.jsx(lk,{className:`${s?"w-3.5 h-3.5":"w-4 h-4"}`}),"New Directive"]})]})]}),o.jsx("div",{className:"w-full",children:(()=>{var se;const w=e.find(_e=>_e.id===r),H=((se=w==null?void 0:w.status)==null?void 0:se.toLowerCase())==="completed";return r&&!H?o.jsxs("div",{className:"w-full p-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg flex items-center transition-all duration-200",children:[o.jsx(Ns,{className:"w-4 h-4 mr-2 text-purple-600 dark:text-purple-400 animate-pulse"}),o.jsxs("span",{className:"text-purple-700 dark:text-purple-300 font-medium",children:["Currently Working On: ",(w==null?void 0:w.title)||r]})]}):o.jsxs("div",{className:"w-full p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg flex items-center transition-all duration-200",children:[o.jsx(Xr,{className:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"}),o.jsx("span",{className:"text-green-700 dark:text-green-300 font-medium",children:"Select a new strategic directive to work on"})]})})()}),o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-stretch lg:items-center",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(Cm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",placeholder:"Search strategic directives...",className:"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:S,onChange:w=>E(w.target.value)}),S&&o.jsx("button",{onClick:()=>E(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(Os,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>p(!y),className:`flex items-center gap-2 ${s?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors`,children:[o.jsx(nk,{className:`${s?"w-3.5 h-3.5":"w-4 h-4"}`}),Zt(),o.jsx(Dn,{className:`${s?"w-3.5 h-3.5":"w-4 h-4"}`})]}),y&&o.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{x("active_draft"),p(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${k==="active_draft"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(no,{className:"w-4 h-4 mr-2"}),"Active & Draft"]}),k==="active_draft"&&o.jsx(Ut,{className:"w-4 h-4"})]}),o.jsxs("button",{onClick:()=>{x("all"),p(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${k==="all"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(xt,{className:"w-4 h-4 mr-2"}),"All Directives"]}),k==="all"&&o.jsx(Ut,{className:"w-4 h-4"})]}),o.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),o.jsxs("button",{onClick:()=>{x("active"),p(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${k==="active"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(no,{className:"w-4 h-4 mr-2"}),"Active Only"]}),k==="active"&&o.jsx(Ut,{className:"w-4 h-4"})]}),o.jsxs("button",{onClick:()=>{x("draft"),p(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${k==="draft"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(L0,{className:"w-4 h-4 mr-2"}),"Draft Only"]}),k==="draft"&&o.jsx(Ut,{className:"w-4 h-4"})]}),o.jsxs("button",{onClick:()=>{x("superseded"),p(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${k==="superseded"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(I0,{className:"w-4 h-4 mr-2"}),"Superseded Only"]}),k==="superseded"&&o.jsx(Ut,{className:"w-4 h-4"})]}),o.jsxs("button",{onClick:()=>{x("completed"),p(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${k==="completed"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Completed Only"]}),k==="completed"&&o.jsx(Ut,{className:"w-4 h-4"})]})]})})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Priority:"}),["all","critical","high","medium","low"].map(w=>o.jsx("button",{onClick:()=>P(w),className:`px-2 py-1 text-xs rounded-full transition-all duration-200 ${N===w?w==="critical"?"bg-red-500 text-white":w==="high"?"bg-orange-500 text-white":w==="medium"?"bg-yellow-500 text-white":w==="low"?"bg-gray-500 text-white":"bg-primary-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:w.charAt(0).toUpperCase()+w.slice(1)},w))]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Target:"}),[{value:"all",label:"All",icon:"📱"},{value:"ehg_engineer",label:"EHG_Engineer",icon:"🛠️"},{value:"ehg",label:"EHG",icon:"🚀"}].map(w=>o.jsxs("button",{onClick:()=>O(w.value),className:`px-2 py-1 text-xs rounded-full transition-all duration-200 flex items-center gap-1 ${T===w.value?w.value==="ehg_engineer"?"bg-purple-500 text-white":w.value==="ehg"?"bg-blue-500 text-white":"bg-primary-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:w.value==="ehg_engineer"?"LEO Protocol development platform":w.value==="ehg"?"Business application features":"Show all strategic directives",children:[o.jsx("span",{children:w.icon}),w.label]},w.value))]}),Nn&&o.jsxs("button",{onClick:vt,className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full hover:bg-red-200 dark:hover:bg-red-900/50 transition-all duration-200 flex items-center gap-1",children:[o.jsx(Os,{className:"w-3 h-3"}),"Clear Filters"]})]})]})]}),Ze.length===0?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[o.jsx(xt,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e.length===0?"No strategic directives found":`No ${k==="all"?"":k} directives found`})]}):o.jsx("div",{className:"space-y-4",children:it.map(w=>{var H,se,_e,Pe,be,et,R,U,ne,ie;return o.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${dn(w.priority)}`,children:o.jsxs("div",{className:`${s?"p-3":"p-6"} relative group`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsxs("div",{className:"flex items-center mr-3",children:[o.jsx("div",{className:"text-gray-400 dark:text-gray-500 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-grab active:cursor-grabbing",children:o.jsx(qP,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex flex-col gap-1 bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-1",children:[o.jsx("button",{onClick:re=>{re.stopPropagation(),Xe(w.id,"up")},disabled:it.indexOf(w)===0||q===w.id,className:`p-2 rounded-md transition-all duration-200 ${it.indexOf(w)===0||q===w.id?"opacity-40 cursor-not-allowed bg-gray-100 dark:bg-gray-800":"bg-white dark:bg-gray-700 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:shadow-md border border-transparent hover:border-primary-200 dark:hover:border-primary-700"}`,"aria-label":"Move up in priority",title:"Move up",children:o.jsx(ek,{className:`w-5 h-5 ${it.indexOf(w)===0||q===w.id?"text-gray-400 dark:text-gray-600":"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"}`})}),o.jsx("button",{onClick:re=>{re.stopPropagation(),Xe(w.id,"down")},disabled:it.indexOf(w)===it.length-1||q===w.id,className:`p-2 rounded-md transition-all duration-200 ${it.indexOf(w)===it.length-1||q===w.id?"opacity-40 cursor-not-allowed bg-gray-100 dark:bg-gray-800":"bg-white dark:bg-gray-700 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:shadow-md border border-transparent hover:border-primary-200 dark:hover:border-primary-700"}`,"aria-label":"Move down in priority",title:"Move down",children:o.jsx(Dn,{className:`w-5 h-5 ${it.indexOf(w)===it.length-1||q===w.id?"text-gray-400 dark:text-gray-600":"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"}`})})]})]}),o.jsx("button",{onClick:()=>le(w.id),className:"mr-3 p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/20 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 transform hover:scale-110","aria-label":d===w.id?"Collapse details":"Expand details",children:o.jsx(Wt,{className:`w-5 h-5 transition-transform duration-200 ease-in-out ${d===w.id?"rotate-90":""}`})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center mb-1",children:[w.execution_order&&o.jsx("span",{className:"inline-flex items-center mr-2",children:o.jsxs("span",{className:"text-sm font-bold px-2.5 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-md shadow-md",title:`Execution order (WSJF Score: ${((H=w.metadata)==null?void 0:H.wsjf_score)||"N/A"})`,children:["#",w.execution_order]})}),q===w.id&&o.jsx("span",{className:"inline-flex items-center mr-2",children:o.jsxs("span",{className:"px-2.5 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 rounded-md text-sm font-medium animate-pulse shadow-sm",children:[o.jsx(wl,{className:"w-4 h-4 inline mr-1 animate-spin"}),"Updating..."]})}),o.jsxs("span",{className:"inline-flex items-center group",children:[o.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-mono text-sm font-semibold",children:w.id}),o.jsx("button",{onClick:re=>{re.stopPropagation(),xe(w.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-1",title:"Copy ID",children:D===w.id?o.jsx(Ut,{className:"w-3 h-3 text-green-500"}):o.jsx(Sm,{className:"w-3 h-3 text-gray-500"})})]})]}),o.jsx("h2",{className:`${s?"text-base":"text-xl"} font-semibold text-gray-900 dark:text-white ${s?"line-clamp-1":""}`,children:w.title||"Untitled"})]})]}),(((se=w.metadata)==null?void 0:se.Owner)||((_e=w.metadata)==null?void 0:_e.Date))&&o.jsxs("div",{className:`${s?"mt-2 gap-1":"mt-3 gap-2"} flex flex-wrap items-center`,children:[w.metadata.Owner&&o.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded flex items-center",children:[o.jsx(Tm,{className:"w-3 h-3 mr-1"}),w.metadata.Owner]}),w.metadata.Date&&o.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded flex items-center",children:[o.jsx(Zw,{className:"w-3 h-3 mr-1"}),w.metadata.Date]})]}),w.total_items&&w.total_items>0&&o.jsxs("div",{className:`${s?"mt-2":"mt-3"} border-t border-gray-200 dark:border-gray-700 pt-3`,children:[o.jsxs("button",{onClick:()=>Ce(w.id),className:"flex items-center text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200",children:[o.jsx(vh,{className:"w-4 h-4 mr-2"}),b[w.id]?"Hide":"Show"," backlog summary",Y[w.id]&&o.jsx(wl,{className:"w-4 h-4 ml-2 animate-spin"})]}),b[w.id]&&o.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:Y[w.id]?o.jsxs("div",{className:"flex items-center justify-center py-4",children:[o.jsx(wl,{className:"w-6 h-6 animate-spin text-blue-500"}),o.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Generating AI summary..."})]}):C[w.id]?o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:C[w.id].summary}),o.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{children:["Based on ",C[w.id].item_count," backlog items"]}),o.jsx("span",{className:"flex items-center",children:C[w.id].ai_generated?o.jsx(o.Fragment,{children:"🤖 AI Generated"}):o.jsx(o.Fragment,{children:"📝 Text Summary"})})]})]}):o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"Failed to load summary. Please try again."})})]}),o.jsxs("div",{className:`${s?"mt-2":"mt-4"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 flex items-center`,children:["Progress",w.progressTrend&&(w.progressTrend>0?o.jsx(xr,{className:"w-3 h-3 ml-1 text-green-500"}):o.jsx(Fr,{className:"w-3 h-3 ml-1 text-red-500"}))]}),o.jsxs("span",{className:`${s?"text-xs":"text-sm"} font-semibold flex items-center`,children:[typeof w.progress=="object"?w.progress.total:w.progress,"%",(typeof w.progress=="object"?w.progress.total:w.progress)===100&&o.jsx(nc,{className:"w-3 h-3 ml-1 text-green-500 animate-pulse"})]})]}),o.jsx("div",{className:`w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${s?"h-2":"h-3"} shadow-inner`,children:o.jsx("div",{className:`${s?"h-2":"h-3"} rounded-full transition-all duration-1000 ease-out ${Ft(typeof w.progress=="object"?w.progress.total:w.progress)}`,style:{width:`${typeof w.progress=="object"?w.progress.total:w.progress}%`,boxShadow:(typeof w.progress=="object"?w.progress.total:w.progress)===100?"0 0 10px rgba(34, 197, 94, 0.5)":"none"}})})]})]}),o.jsxs("div",{className:`${s?"ml-2":"ml-4"} flex flex-col items-end ${s?"space-y-1":"space-y-2"}`,children:[o.jsxs("div",{className:`flex ${s?"space-x-1":"space-x-2"}`,children:[o.jsx("button",{onClick:()=>hn(w),className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg`,children:s?"View":"View Full"}),r===w.id&&((Pe=w.status)==null?void 0:Pe.toLowerCase())!=="completed"?o.jsxs("button",{disabled:!0,className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-purple-600 text-white rounded flex items-center`,title:"This is the SD currently being worked on",children:[o.jsx(Ns,{className:`${s?"w-3 h-3":"w-4 h-4"} mr-1`}),s?"⚡":"Working On"]}):((be=w.status)==null?void 0:be.toLowerCase())==="completed"?o.jsxs("button",{disabled:!0,className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-green-400 text-green-800 rounded flex items-center cursor-not-allowed`,title:"Cannot set completed directives as active",children:[o.jsx(Ut,{className:`${s?"w-3 h-3":"w-4 h-4"} ${s?"":"mr-1"}`}),!s&&"Completed"]}):o.jsxs("button",{onClick:()=>n&&n(w.id),className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center`,title:"Select this SD to work on",children:[o.jsx(Ns,{className:`${s?"w-3 h-3":"w-4 h-4"} ${s?"":"mr-1"} animate-pulse`}),!s&&"Start Work"]})]}),o.jsxs("div",{className:`${s?"mt-2":"mt-3"} grid ${s?"grid-cols-2 gap-1":"grid-cols-2 gap-2"} w-full`,children:[w.target_application&&o.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded text-center ${w.target_application==="EHG_Engineer"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:s?w.target_application==="EHG_Engineer"?"Eng":"EHG":w.target_application}),o.jsx("div",{className:"flex items-center justify-center",children:K===w.id?o.jsxs("select",{value:w.status,onChange:re=>handleStatusChange(w,re.target.value),onBlur:()=>he(null),className:`${s?"text-xs px-1 py-0.5":"text-sm px-2 py-1"} rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500`,onClick:re=>re.stopPropagation(),children:[o.jsx("option",{value:"draft",children:"Draft"}),o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"in_progress",children:"In Progress"}),o.jsx("option",{value:"completed",children:"Completed"}),o.jsx("option",{value:"archived",children:"Archived"})]}):o.jsxs("div",{className:"flex items-center cursor-pointer group",onClick:re=>{re.stopPropagation(),he(w.id)},children:[I(w.status),o.jsx(ok,{className:`${s?"w-2 h-2":"w-3 h-3"} ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300`})]})}),w.category&&o.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded text-center`,children:s&&w.category.length>8?w.category.substring(0,8)+"...":w.category}),(w.priority||((et=w.metadata)==null?void 0:et.Priority))&&o.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} rounded text-center ${(w.priority||((R=w.metadata)==null?void 0:R.Priority))==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":(w.priority||((U=w.metadata)==null?void 0:U.Priority))==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:s?(w.priority||((ne=w.metadata)==null?void 0:ne.Priority))[0]:w.priority||((ie=w.metadata)==null?void 0:ie.Priority)}),o.jsxs("button",{onClick:re=>{re.stopPropagation(),u(`/backlog?sd=${w.sd_id||w.id}`)},className:`col-span-2 flex items-center justify-center ${s?"px-2 py-0.5 text-xs":"px-3 py-1 text-sm"} ${w.total_backlog_items>0||w.total_items>0||w.backlog_count>0?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800/40":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"} rounded transition-colors`,children:[o.jsx(so,{className:`${s?"w-3 h-3":"w-4 h-4"} mr-1`}),"Backlog",o.jsx("span",{className:`ml-1 ${s?"px-1":"px-1.5"} py-0.5 ${w.total_backlog_items>0||w.total_items>0||w.backlog_count>0?"bg-indigo-200 dark:bg-indigo-800":"bg-gray-200 dark:bg-gray-600"} rounded text-xs font-bold`,children:w.total_backlog_items||w.total_items||w.backlog_count||0})]}),w.rolled_triage&&o.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded text-center ${w.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":w.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":w.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:s?w.rolled_triage[0]:`Triage: ${w.rolled_triage}`}),w.must_have_pct!==null&&w.must_have_pct!==void 0&&o.jsxs("span",{className:`${s?"px-1.5 py-0.5":"px-2 py-1"} text-xs bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded text-center`,children:[w.must_have_pct,"%",!s&&" Must-Have"]}),w.checklist&&w.checklist.length>0&&o.jsxs("div",{className:"col-span-2 text-sm text-gray-600 dark:text-gray-400 flex items-center justify-center",children:[o.jsx(Ut,{className:"w-4 h-4 mr-1"}),w.checklist.filter(re=>re.checked).length,"/",w.checklist.length]})]})]})]}),d===w.id&&o.jsxs("div",{className:"mt-6 border-t pt-6",children:[(w.h_count>0||w.m_count>0||w.l_count>0||w.future_count>0)&&o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(xt,{className:"w-5 h-5 mr-2 text-blue-600"}),"Backlog Items Summary"]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[w.h_count>0&&o.jsxs("div",{className:"text-center p-2 bg-red-100 dark:bg-red-900/20 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:w.h_count}),o.jsx("p",{className:"text-xs text-red-600 dark:text-red-300",children:"High Priority"})]}),w.m_count>0&&o.jsxs("div",{className:"text-center p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-400",children:w.m_count}),o.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-300",children:"Medium Priority"})]}),w.l_count>0&&o.jsxs("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/20 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:w.l_count}),o.jsx("p",{className:"text-xs text-green-600 dark:text-green-300",children:"Low Priority"})]}),w.future_count>0&&o.jsxs("div",{className:"text-center p-2 bg-gray-100 dark:bg-gray-600 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300",children:w.future_count}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Future"})]})]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total backlog items: ",(w.h_count||0)+(w.m_count||0)+(w.l_count||0)+(w.future_count||0),w.must_have_count>0&&` • Must-have: ${w.must_have_count}`]}),o.jsx("button",{onClick:()=>hn(w),className:"mt-3 text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"View all backlog items →"})]}),w.checklist&&w.checklist.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(Xr,{className:"w-5 h-5 mr-2"}),"Requirements Checklist"]}),o.jsxs("div",{className:"space-y-2",children:[w.checklist.slice(0,5).map((re,ve)=>o.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:re.checked,onChange:()=>Q(w.id,ve),className:"mr-3 w-4 h-4 text-primary-600 rounded"}),o.jsx("span",{className:`${re.checked?"line-through text-gray-500":""}`,children:re.text})]},ve)),w.checklist&&w.checklist.length>5&&o.jsxs("button",{onClick:()=>hn(w),className:"text-primary-600 hover:text-primary-700 text-sm",children:["View all ",w.checklist.length," items..."]})]})]}),o.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Content Preview"}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded max-h-64 overflow-y-auto",children:o.jsx(Wh,{children:w.content.substring(0,500)+(w.content.length>500?"...":"")})}),o.jsx("button",{onClick:()=>hn(w),className:"mt-3 text-primary-600 hover:text-primary-700",children:"Read full document →"})]})]})]})},w.id)})})]})}function Kx({prds:e,isCompact:t,detailMode:n}){const{id:r}=po(),s=br(),[i,a]=j.useState("list"),[l,c]=j.useState(null);j.useEffect(()=>{if(n&&r){const d=e.find(h=>h.id===r);d?(c(d),a("detail"),document.title=`${d.title||d.id} - LEO Protocol Dashboard`):(console.warn(`PRD with id '${r}' not found, redirecting to list`),s("/prds",{replace:!0}))}else n||(a("list"),c(null),document.title="PRDs - LEO Protocol Dashboard")},[r,n,e,s]);const u=d=>{if(!d||!d.id){console.error("Invalid PRD for navigation:",d);return}try{s(`/prds/${d.id}`)}catch(h){console.error("Navigation error:",h)}};return i==="detail"&&l?o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>s("/prds"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[o.jsx(Wt,{className:"w-4 h-4 mr-1 rotate-180"}),"Back to PRDs"]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.title}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:l.directiveTitle&&`Strategic Directive: ${l.directiveTitle}`})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.status})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Priority"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.priority})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.phase})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),o.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[l.progress,"%"]})]})]}),o.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:o.jsx(Wh,{children:l.content||"No content available"})}),l.checklist&&l.checklist.length>0&&o.jsxs("div",{className:"border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Implementation Checklist"}),o.jsx("div",{className:"space-y-2",children:l.checklist.map((d,h)=>o.jsxs("div",{className:"flex items-start p-3 rounded bg-gray-50 dark:bg-gray-700",children:[d.checked?o.jsx(Ut,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}):o.jsx(Pm,{className:"w-5 h-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0"}),o.jsx("span",{className:`flex-1 ${d.checked?"line-through text-gray-500":""}`,children:d.text}),d.phase&&o.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded ml-2",children:d.phase})]},h))})]})]})]}):o.jsxs("div",{className:t?"p-3":"p-6",children:[o.jsx("div",{className:t?"mb-3":"mb-6",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:`${t?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white`,children:"PRDs"}),o.jsx("p",{className:`text-gray-600 dark:text-gray-400 ${t?"text-sm mt-1":"mt-2"}`,children:"Product Requirements Documents - Technical implementation details"})]})})}),e.length===0?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[o.jsx(xt,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No PRDs found"})]}):o.jsx("div",{className:"space-y-4",children:e.map(d=>o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(xt,{className:"w-6 h-6 text-blue-600 mt-1"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.title}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.directiveTitle&&`SD: ${d.directiveTitle}`}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:d.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.priority==="high"?"bg-red-100 text-red-800":d.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:d.priority}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Phase: ",d.phase]}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Progress: ",d.progress,"%"]})]})]})]})}),o.jsx("div",{className:"ml-4 flex flex-col items-end space-y-2",children:o.jsx("button",{onClick:()=>u(d),className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors",children:"View Full"})})]})})},d.id))})]})}const Ae=({children:e,variant:t="primary",size:n="medium",disabled:r=!1,loading:s=!1,onClick:i,type:a="button",fullWidth:l=!1,icon:c,iconPosition:u="left",ariaLabel:d,className:h="",...m})=>{const f=`
    inline-flex items-center justify-center
    font-medium transition-all duration-200
    rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    min-h-[44px] min-w-[44px]
  `,g={small:"px-3 py-1.5 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"},v={primary:`
      bg-blue-600 dark:bg-blue-600 text-white dark:text-white
      hover:bg-blue-700 dark:hover:bg-blue-700 active:bg-blue-800 dark:active:bg-blue-800
      focus:ring-blue-500 dark:focus:ring-blue-400
    `,secondary:`
      bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100
      hover:bg-gray-300 dark:hover:bg-gray-600 active:bg-gray-400 dark:active:bg-gray-500
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,ghost:`
      bg-transparent dark:bg-transparent text-gray-700 dark:text-gray-300
      hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,danger:`
      bg-red-600 dark:bg-red-600 text-white dark:text-white
      hover:bg-red-700 dark:hover:bg-red-700 active:bg-red-800 dark:active:bg-red-800
      focus:ring-red-500 dark:focus:ring-red-400
    `,success:`
      bg-green-600 dark:bg-green-600 text-white dark:text-white
      hover:bg-green-700 dark:hover:bg-green-700 active:bg-green-800 dark:active:bg-green-800
      focus:ring-green-500 dark:focus:ring-green-400
    `},k=l?"w-full":"",x=`
    ${f}
    ${g[n]}
    ${v[t]}
    ${k}
    ${h}
  `.trim().replace(/\s+/g," "),y=p=>{!r&&!s&&i&&i(p)};return o.jsxs("button",{type:a,className:x,disabled:r||s,onClick:y,"aria-label":d||(typeof e=="string"?e:void 0),"aria-busy":s,"aria-disabled":r||s,...m,children:[s&&o.jsx(wl,{className:"w-4 h-4 mr-2 animate-spin"}),!s&&c&&u==="left"&&o.jsx(c,{className:"w-4 h-4 mr-2"}),e,!s&&c&&u==="right"&&o.jsx(c,{className:"w-4 h-4 ml-2"})]})},tl=({type:e="text",label:t,name:n,value:r,onChange:s,onBlur:i,placeholder:a,required:l=!1,disabled:c=!1,error:u,success:d,helpText:h,validationPattern:m,minLength:f,maxLength:g,rows:v=4,options:k=[],autoComplete:x,className:y="",fullWidth:p=!0,showCharCount:S=!1,...E})=>{const[N,P]=j.useState(!1),[T,O]=j.useState(!1),[D,M]=j.useState("");j.useEffect(()=>{T&&m&&(new RegExp(m).test(r)?M(""):M("Invalid format"))},[r,m,T]);const $=`
    w-full px-4 py-3 
    border rounded-lg transition-all duration-200
    text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400
    min-h-[48px]
    focus:outline-none focus:ring-2 focus:ring-offset-1
    disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-60
    bg-white dark:bg-gray-700
   ${u||D?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400 focus:border-red-500 dark:focus:border-red-400":d?"border-green-500 dark:border-green-400 focus:ring-green-500 dark:focus:ring-green-400 focus:border-green-500 dark:focus:border-green-400":N?"border-blue-500 dark:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400"} ${y}`,L=()=>{P(!0)},q=_=>{P(!1),O(!0),i&&i(_)},F=_=>{s&&s(_),T||O(!0)},C=`input-${n||Math.random().toString(36).substr(2,9)}`,A=`${C}-error`,b=`${C}-help`,z=()=>{switch(e){case"textarea":return o.jsx("textarea",{id:C,name:n,value:r,onChange:F,onFocus:L,onBlur:q,placeholder:a,required:l,disabled:c,rows:v,minLength:f,maxLength:g,className:$,"aria-invalid":!!(u||D),"aria-describedby":`${u||D?A:""} ${h?b:""}`,...E});case"select":return o.jsxs("select",{id:C,name:n,value:r,onChange:F,onFocus:L,onBlur:q,required:l,disabled:c,className:$,"aria-invalid":!!(u||D),"aria-describedby":`${u||D?A:""} ${h?b:""}`,...E,children:[o.jsx("option",{value:"",children:"Select an option"}),k.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))]});default:return o.jsx("input",{id:C,type:e,name:n,value:r,onChange:F,onFocus:L,onBlur:q,placeholder:a,required:l,disabled:c,minLength:f,maxLength:g,autoComplete:x,className:$,"aria-invalid":!!(u||D),"aria-describedby":`${u||D?A:""} ${h?b:""}`,...E})}},Y=p?"w-full":"";return o.jsxs("div",{className:`${Y} mb-4`,children:[t&&o.jsxs("label",{htmlFor:C,className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",children:[t,l&&o.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[z(),o.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:[d&&!u&&!D&&o.jsx(Hn,{className:"w-5 h-5 text-green-500","aria-label":"Valid input"}),(u||D)&&o.jsx(Os,{className:"w-5 h-5 text-red-500","aria-label":"Invalid input"})]})]}),S&&g&&o.jsxs("div",{className:"mt-1 text-sm text-right text-gray-500 dark:text-gray-400",children:[(r==null?void 0:r.length)||0," / ",g]}),(u||D)&&o.jsxs("div",{id:A,className:"mt-2 flex items-start text-sm text-red-600 dark:text-red-400",role:"alert",children:[o.jsx(ss,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),u||D]}),h&&!(u||D)&&o.jsxs("div",{id:b,className:"mt-2 flex items-start text-sm text-gray-600 dark:text-gray-400",children:[o.jsx(vn,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),h]})]})},LD=({steps:e=[],currentStep:t=1,orientation:n="horizontal",showTimeEstimates:r=!0,showStepNumbers:s=!0,compact:i=!1,hideLabelsOnMobile:a=!1,onStepClick:l,className:c=""})=>{const u=(t-1)/(e.length-1)*100,d=e.reduce((x,y)=>x+(y.timeEstimate||0),0),h=e.slice(0,t-1).reduce((x,y)=>x+(y.timeEstimate||0),0),m=x=>{if(x<60)return`${x} min`;const y=Math.floor(x/60),p=x%60;return p>0?`${y}h ${p}m`:`${y}h`},f=x=>x<t-1?"completed":x===t-1?"current":x===t?"upcoming":"locked",g=(x,y)=>{switch(x){case"completed":return o.jsx(Hn,{className:"w-4 h-4"});case"current":return s?y:null;case"upcoming":return s?y:null;case"locked":return o.jsx(ak,{className:"w-3 h-3"});default:return y}},v=x=>{const y=f(x);l&&(y==="completed"||y==="current")&&l(x+1)},k=x=>{const y=f(x);return l&&(y==="completed"||y==="current")};return n==="vertical"?o.jsxs("div",{className:`${c}`,children:[r&&!i&&o.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),o.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`},role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"})}),o.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-600 dark:text-gray-400",children:[o.jsxs("span",{children:[m(h)," completed"]}),o.jsxs("span",{children:[m(d-h)," remaining"]})]})]}),o.jsx("div",{className:"relative",children:e.map((x,y)=>{const p=f(y),S=y===e.length-1;return o.jsxs("div",{className:"flex items-start mb-8 last:mb-0",children:[!S&&o.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),o.jsx("button",{onClick:()=>v(y),disabled:!k(y),className:`
                    relative z-10 flex items-center justify-center
                    w-12 h-12 rounded-full border-2 transition-all
                    ${k(y)?"cursor-pointer":"cursor-default"}
                    ${p==="completed"?"bg-green-500 border-green-500 text-white":""}
                    ${p==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                    ${p==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                    ${p==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                  `,"aria-label":`Step ${y+1}: ${x.title} - ${p}`,children:g(p,y+1)}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("h3",{className:`
                    font-medium text-base
                    ${p==="current"?"text-blue-600":""}
                    ${p==="completed"?"text-green-600":""}
                    ${p==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:x.title}),x.description&&!i&&o.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:x.description}),r&&x.timeEstimate&&o.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[o.jsx(on,{className:"w-3 h-3 mr-1"}),m(x.timeEstimate)]})]})]},y)})})]}):o.jsxs("div",{className:`${c}`,children:[r&&!i&&o.jsx("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(on,{className:"w-4 h-4 mr-2 text-blue-600"}),o.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Time: ",o.jsx("span",{className:"font-medium",children:m(h)})," of"," ",o.jsx("span",{className:"font-medium",children:m(d)})]})]}),o.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"% Complete"]})]})}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-300 dark:bg-gray-600"}),o.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-blue-600 dark:bg-blue-500 transition-all duration-300",style:{width:`${u}%`}}),o.jsx("div",{className:"relative flex justify-between",children:e.map((x,y)=>{const p=f(y);return o.jsxs("div",{className:`flex flex-col items-center ${i?"flex-1":""}`,children:[o.jsxs("div",{className:"relative group",children:[o.jsx("button",{onClick:()=>v(y),disabled:!k(y),className:`
                      relative z-10 flex items-center justify-center
                      w-12 h-12 rounded-full border-2 transition-all
                      ${k(y)?"cursor-pointer hover:scale-110":"cursor-default"}
                      ${p==="completed"?"bg-green-500 border-green-500 text-white":""}
                      ${p==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                      ${p==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                      ${p==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                    `,"aria-label":`Step ${y+1}: ${x.title} - ${p}`,title:x.title,children:g(p,y+1)}),a&&o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block md:hidden z-20",children:o.jsxs("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[x.title,o.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:o.jsx("div",{className:"border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})})]}),o.jsxs("div",{className:`mt-3 text-center ${a?"hidden md:block":""}`,children:[o.jsx("p",{className:`
                    text-sm font-medium
                    ${p==="current"?"text-blue-600":""}
                    ${p==="completed"?"text-green-600":""}
                    ${p==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:x.title}),r&&x.timeEstimate&&!i&&o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:m(x.timeEstimate)})]})]},y)})})]})]})},OD=({onSubmissionSelect:e,onGroupCreate:t,selectedSubmissionId:n,onSelectionChange:r,refreshTrigger:s=0})=>{const[i,a]=j.useState([]),[l,c]=j.useState(!0),[u,d]=j.useState(null),[h,m]=j.useState([]),[f,g]=j.useState(!1),[v,k]=j.useState(null),[x,y]=j.useState(!1);j.useEffect(()=>{p()},[f,s]),j.useEffect(()=>{const $=()=>{k(null),y(!1)};if(v||x)return document.addEventListener("click",$),()=>document.removeEventListener("click",$)},[v,x]);const p=async()=>{try{c(!0);const $=new URLSearchParams;f&&$.append("uncombined","true"),$.append("since","30d");const L=await fetch(`/api/sdip/submissions?${$}`);if(!L.ok)throw new Error("Failed to load submissions");const q=await L.json();a(q),d(null)}catch($){d($.message),a([])}finally{c(!1)}},S=$=>{const L=h.includes($)?h.filter(q=>q!==$):[...h,$];m(L),r==null||r(L)},E=$=>{e($)},N=($="intelligent")=>{h.length>=2&&t(h,$)},P=async $=>{if(confirm("Are you sure you want to delete this submission?"))try{if(!(await fetch(`/api/sdip/submissions/${$}`,{method:"DELETE"})).ok)throw new Error("Failed to delete submission");a(q=>q.filter(F=>F.id!==$)),m(q=>q.filter(F=>F!==$)),n===$&&e(null)}catch(L){console.error("Error deleting submission:",L),alert("Failed to delete submission. Please try again.")}},T=$=>{const L=new Date($),F=Math.floor((new Date-L)/(1e3*60*60));return F<1?"Just now":F<24?`${F}h ago`:F<48?"Yesterday":L.toLocaleDateString()},O=$=>{const L=$.intent_summary||$.chairman_input||$.submission_title||"Untitled Submission";return L.length>60?L.substring(0,57)+"...":L},D=$=>{var q,F,C,A,b;let L="";return((F=(q=$.synthesis)==null?void 0:q.aligned)==null?void 0:F.length)>0?L=((C=$.synthesis.aligned[0])==null?void 0:C.text)||"":(A=$.impact_analysis)!=null&&A.summary?L=$.impact_analysis.summary:(b=$.strat_tac)!=null&&b.rationale&&(L=$.strat_tac.rationale),!L&&$.chairman_input&&(L=$.chairman_input.substring(0,100)+"..."),L.length>120?L.substring(0,117)+"...":L},M=$=>{var F;const L=((F=$.impact_analysis)==null?void 0:F.affected_components)||[];if(L.length===0)return null;const q=L.find(C=>C.impact_level==="high")||L[0];return(q==null?void 0:q.name)||(q==null?void 0:q.component)||null},K=$=>{var C,A;const L=$.status||"draft",q=$.current_step||1,F=Array.isArray($.completed_steps)?$.completed_steps:[];return L==="submitted"||((C=$.gate_status)==null?void 0:C.status)==="submitted"||(A=$.gate_status)!=null&&A.resulting_sd_id||$.resulting_sd_id?{text:"🟢 Submitted",color:"text-green-700 bg-green-100 dark:bg-green-900/20 dark:text-green-300",icon:"✓"}:L==="ready"||F.includes(7)||F.length===7&&q===7?{text:"🔵 Ready",color:"text-blue-700 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300",icon:"→"}:{text:"🟡 Draft",color:"text-yellow-700 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300",icon:"✏"}},he=$=>i.filter(L=>L.group_id===$);return l?o.jsx("div",{className:"h-full flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 text-sm",children:"Recent Submissions"}),i.length>0&&o.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded",children:i.length})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ae,{onClick:()=>g(!f),variant:f?"primary":"ghost",size:"small",icon:nk,ariaLabel:"Show uncombined only"}),h.length>=2&&o.jsxs("div",{className:"relative",children:[o.jsxs(Ae,{onClick:$=>{$.stopPropagation(),y(!x)},variant:"primary",size:"small",icon:Am,children:["Combine (",h.length,")"]}),x&&o.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-20 min-w-56",children:o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 px-2",children:"Combination Method:"}),[{id:"intelligent",name:"🧠 Intelligent",desc:"AI-driven optimal combination"},{id:"chronological",name:"📅 Chronological",desc:"Preserve timeline order"},{id:"merge",name:"🔄 Smart Merge",desc:"Deduplicate and consensus"},{id:"priority",name:"⭐ Priority-based",desc:"Highest strategic impact first"},{id:"latest",name:"🕒 Latest Override",desc:"Most recent takes precedence"}].map($=>o.jsxs("button",{onClick:L=>{L.stopPropagation(),N($.id),y(!1)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex flex-col gap-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:$.name}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:$.desc})]},$.id))]})})]})]})]}),u&&o.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-400 flex items-start gap-2",children:[o.jsx(ss,{className:"w-5 h-5 text-red-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load submissions"}),o.jsx("p",{className:"text-red-600 text-sm",children:u}),o.jsx("button",{onClick:p,className:"mt-1 text-red-700 underline text-sm hover:no-underline",children:"Try again"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:i.length===0?o.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(on,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"No submissions yet"}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Create your first submission to get started with the Directive Lab"}),o.jsx("button",{onClick:()=>e(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Submission"})]}):o.jsx("div",{className:"p-2",children:i.map($=>{const L=K($),q=O($),F=D($),C=M($),A=h.includes($.id),b=n===$.id,z=$.group_id?he($.group_id):[],Y=v===$.id;return o.jsx("div",{className:`p-3 mb-2 border rounded-lg transition-all cursor-pointer ${b?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700/50"}`,onClick:()=>E($),children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{onClick:_=>{_.stopPropagation(),S($.id)},className:"mt-1 text-gray-400 hover:text-gray-600 transition-colors",children:A?o.jsx(Ut,{className:"w-4 h-4 text-blue-600"}):o.jsx(Pm,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm leading-tight",children:q}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap font-medium ${L.color}`,children:L.text})]}),F&&o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 leading-relaxed",children:F}),C&&o.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[o.jsx(xt,{className:"w-3 h-3 text-gray-400"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Affects: ",o.jsx("span",{className:"font-medium",children:C})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:T($.created_at)}),$.group_id&&z.length>1&&o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),k(Y?null:$.id)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[o.jsx(ik,{className:"w-3 h-3"}),o.jsxs("span",{className:"font-medium",children:[z.length," items"]}),o.jsx(Dn,{className:`w-3 h-3 transition-transform ${Y?"rotate-180":""}`})]}),Y&&o.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-48",children:o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 px-2",children:"Linked Submissions:"}),z.map(_=>{const le=K(_),xe=O(_);return o.jsxs("button",{onClick:fe=>{fe.stopPropagation(),E(_),k(null)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex items-center justify-between gap-2",children:[o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate",children:xe}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${le.color}`,children:le.icon}),o.jsx(ro,{className:"w-3 h-3 text-gray-400"})]})]},_.id)})]})})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),E($)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[o.jsx(BP,{className:"w-3 h-3"}),"View"]}),o.jsx("button",{onClick:_=>{_.stopPropagation(),P($.id)},className:"flex items-center gap-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete submission",children:o.jsx(nT,{className:"w-3 h-3"})})]})]})]})]})},$.id)})})}),h.length>0&&o.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-700",children:o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:[h.length," selected"]}),h.length>=2&&o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Ready to combine →"})]})})]})},$D=({isOpen:e=!0,onClose:t,selectedSubmissions:n,combineMethod:r="intelligent",onCreateGroup:s,onSuccess:i})=>{const[a,l]=j.useState(""),[c,u]=j.useState(r),[d,h]=j.useState(!1),[m,f]=j.useState(null),g=async k=>{if(k.preventDefault(),!!a.trim()){h(!0),f(null);try{const x=await fetch("/api/sdip/create-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_ids:n,group_name:a.trim(),method:c})});if(!x.ok){const p=await x.json();throw new Error(p.error||"Failed to create group")}const y=await x.json();console.log("🔗 Group created successfully:",y),i?i(y):s&&await s(y),t(),l(""),u(r)}catch(x){f(x.message)}finally{h(!1)}}};if(!e)return null;const v=[{value:"intelligent",label:"🧠 Intelligent",desc:"AI-driven optimal combination"},{value:"chronological",label:"📅 Chronological",desc:"Keep time order"},{value:"merge",label:"🔄 Merge & Dedupe",desc:"Remove duplicates"},{value:"priority",label:"⭐ Priority-based",desc:"Highest strategic impact first"},{value:"latest",label:"🕒 Latest Priority",desc:"Latest overrides"}];return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Am,{className:"w-4 h-4 text-blue-600"}),o.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Combine ",n.length," Submissions"]})]}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:o.jsx(Os,{className:"w-4 h-4"})})]}),o.jsxs("form",{onSubmit:g,className:"p-3 space-y-3",children:[m&&o.jsxs("div",{className:"flex items-start gap-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[o.jsx(ss,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-xs",children:m})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"group-name",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name"}),o.jsx("input",{type:"text",id:"group-name",value:a,onChange:k=>l(k.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dashboard UX Improvements",required:!0,maxLength:100})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Combine Method"}),o.jsx("div",{className:"grid grid-cols-1 gap-1",children:v.map(k=>o.jsx("label",{className:`flex items-center justify-between p-2 text-xs border rounded cursor-pointer transition-colors ${c===k.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-600"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",name:"combineMethod",value:k.value,checked:c===k.value,onChange:x=>u(x.target.value),className:"text-blue-600 focus:ring-blue-500"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:k.label}),o.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["— ",k.desc]})]})]})},k.value))})]}),o.jsxs("div",{className:"flex gap-2 pt-1",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:!a.trim()||d,className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 border border-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Creating...":"Combine"})]})]})]})})},MD=({impactAnalysis:e,consistencyValidation:t,submission:n})=>{var d,h,m;const[r,s]=j.useState({overview:!0,components:!1,consistency:!1,recommendations:!1,mitigation:!1});if(!e&&!t)return o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-center",children:[o.jsx(vn,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No impact analysis available for this submission"})]});const i=f=>{s(g=>({...g,[f]:!g[f]}))},a=f=>{switch(f){case"critical":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-100",accent:"text-red-600 dark:text-red-400",icon:Ot};case"high":return{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-100",accent:"text-orange-600 dark:text-orange-400",icon:ss};case"medium":return{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-900 dark:text-yellow-100",accent:"text-yellow-600 dark:text-yellow-400",icon:vn};case"low":return{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-100",accent:"text-green-600 dark:text-green-400",icon:ze};default:return{bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",text:"text-gray-900 dark:text-gray-100",accent:"text-gray-600 dark:text-gray-400",icon:vn}}},l=a((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)),c=l.icon,u=f=>({ui:bl,api:WP,database:Nm,authentication:io,navigation:Xr,performance:xr,"design-system":bl})[f]||vn;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:`rounded-lg border ${l.bg} ${l.border} p-6`,children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("overview"),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(c,{className:`w-6 h-6 ${l.accent}`}),o.jsxs("div",{children:[o.jsx("h3",{className:`text-lg font-semibold ${l.text}`,children:"Impact Analysis Overview"}),o.jsxs("p",{className:`text-sm ${l.text} opacity-75`,children:["Risk Level: ",((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)||"unknown").toUpperCase()]})]})]}),r.overview?o.jsx(Dn,{className:`w-5 h-5 ${l.accent}`}):o.jsx(Wt,{className:`w-5 h-5 ${l.accent}`})]}),r.overview&&o.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:e.impact_score}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Impact Score"})]}),o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsxs("div",{className:`text-2xl font-bold ${l.accent}`,children:[e.effort_multiplier,"x"]}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Effort Multiplier"})]}),o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:((d=e.affected_components)==null?void 0:d.length)||0}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Affected Components"})]})]}),t&&o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${t.passed?"text-green-600":"text-red-600"}`,children:t.score}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Consistency Score"})]})]})]}),(e==null?void 0:e.affected_components)&&e.affected_components.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("components"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(bl,{className:"w-5 h-5 mr-2"}),"Affected Components"]}),r.components?o.jsx(Dn,{className:"w-5 h-5 text-gray-400"}):o.jsx(Wt,{className:"w-5 h-5 text-gray-400"})]}),r.components&&o.jsx("div",{className:"mt-4 space-y-3",children:e.affected_components.map((f,g)=>{const v=u(f.name),k=a(f.risk_level);return o.jsxs("div",{className:`p-4 rounded-lg border ${k.bg} ${k.border}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(v,{className:`w-5 h-5 ${k.accent}`}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-medium ${k.text}`,children:f.name}),o.jsxs("p",{className:`text-sm ${k.text} opacity-75`,children:["Risk: ",f.risk_level," • Confidence: ",Math.round((f.confidence||0)*100),"%"]})]})]})}),f.dependencies&&f.dependencies.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:`text-xs ${k.text} opacity-60 mb-1`,children:"Dependencies:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:f.dependencies.map((x,y)=>o.jsx("span",{className:`px-2 py-1 rounded text-xs ${k.accent} bg-white dark:bg-gray-700`,children:x},y))})]})]},g)})})]}),t&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("consistency"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(io,{className:"w-5 h-5 mr-2"}),"Consistency Validation",!t.passed&&o.jsx(Yn,{className:"w-5 h-5 ml-2 text-red-500"})]}),r.consistency?o.jsx(Dn,{className:"w-5 h-5 text-gray-400"}):o.jsx(Wt,{className:"w-5 h-5 text-gray-400"})]}),r.consistency&&o.jsxs("div",{className:"mt-4 space-y-4",children:[o.jsxs("div",{className:`p-4 rounded-lg ${t.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[o.jsxs("div",{className:"flex items-center",children:[t.passed?o.jsx(ze,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}):o.jsx(Yn,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),o.jsx("span",{className:`font-medium ${t.passed?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:t.passed?"Validation Passed":"Validation Failed"})]}),t.blocking_issues&&t.blocking_issues.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Blocking Issues:"}),t.blocking_issues.map((f,g)=>o.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200 mb-1",children:["• ",f.message,f.suggestion&&o.jsxs("div",{className:"text-xs text-red-600 dark:text-red-300 ml-4 mt-1",children:["Suggestion: ",f.suggestion]})]},g))]})]}),t.category_scores&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Category Breakdown"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.category_scores).map(([f,g])=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:f.replace("_"," ")}),o.jsx("span",{className:`text-sm font-bold ${g>=70?"text-green-600":g>=50?"text-yellow-600":"text-red-600"}`,children:g})]}),o.jsx("div",{className:"mt-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all ${g>=70?"bg-green-500":g>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${g}%`}})})]},f))})]})]})]}),((e==null?void 0:e.recommendations)||(t==null?void 0:t.recommendations))&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("recommendations"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(Xr,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),r.recommendations?o.jsx(Dn,{className:"w-5 h-5 text-gray-400"}):o.jsx(Wt,{className:"w-5 h-5 text-gray-400"})]}),r.recommendations&&o.jsxs("div",{className:"mt-4 space-y-3",children:[(h=e==null?void 0:e.recommendations)==null?void 0:h.map((f,g)=>o.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(vn,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[f.type,": ",f.description]}),f.effort_reduction&&o.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Effort reduction: ",f.effort_reduction]})]})]})},`impact-${g}`)),(m=t==null?void 0:t.recommendations)==null?void 0:m.map((f,g)=>o.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(ze,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:f.message}),f.priority&&o.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs mt-1 ${f.priority==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":f.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":f.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[f.priority," priority"]})]})]})},`consistency-${g}`))]})]}),(e==null?void 0:e.mitigation_strategies)&&e.mitigation_strategies.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("mitigation"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(Ns,{className:"w-5 h-5 mr-2"}),"Mitigation Strategies"]}),r.mitigation?o.jsx(Dn,{className:"w-5 h-5 text-gray-400"}):o.jsx(Wt,{className:"w-5 h-5 text-gray-400"})]}),r.mitigation&&o.jsx("div",{className:"mt-4 space-y-2",children:e.mitigation_strategies.map((f,g)=>o.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsx(Ns,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:f})]},g))})]}),(e==null?void 0:e.breaking_changes)&&e.breaking_changes.length>0&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(Ot,{className:"w-6 h-6 text-red-600 dark:text-red-400 mr-2"}),o.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Breaking Changes Detected"})]}),o.jsx("div",{className:"space-y-2",children:e.breaking_changes.map((f,g)=>o.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[o.jsxs("strong",{children:[f.type,":"]})," ",f.description,f.keyword&&o.jsxs("span",{className:"ml-2 text-xs bg-red-200 dark:bg-red-800 px-2 py-1 rounded",children:['"',f.keyword,'"']})]},g))})]})]})},FD=({type:e,level:t,showTooltip:n=!0})=>{const[r,s]=j.useState(!1),a={UI:{label:"UI",description:"User Interface complexity",colors:{HIGH:"bg-blue-600 text-white",MEDIUM:"bg-blue-400 text-white",LOW:"bg-blue-200 text-blue-900"}},DB:{label:"DB",description:"Database impact and complexity",colors:{HIGH:"bg-purple-600 text-white",MEDIUM:"bg-purple-400 text-white",LOW:"bg-purple-200 text-purple-900"}},COMPLEX:{label:"COMPLEX",description:"Overall implementation complexity",colors:{HIGH:"bg-orange-600 text-white",MEDIUM:"bg-orange-400 text-white",LOW:"bg-orange-200 text-orange-900"}},ACCESS:{label:"ACCESS",description:"Access control and permissions",colors:{HIGH:"bg-green-600 text-white",MEDIUM:"bg-green-400 text-white",LOW:"bg-green-200 text-green-900"}},SECURITY:{label:"SECURITY",description:"Security implications",colors:{HIGH:"bg-red-600 text-white",MEDIUM:"bg-red-400 text-white",LOW:"bg-red-200 text-red-900"}},PROCESS:{label:"PROCESS",description:"Business process impact",colors:{HIGH:"bg-yellow-600 text-white",MEDIUM:"bg-yellow-400 text-gray-900",LOW:"bg-yellow-200 text-yellow-900"}}}[e];if(!a)return null;const l=a.colors[t]||a.colors.LOW;return o.jsxs("div",{className:"inline-flex items-center relative",children:[o.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${l} cursor-help transition-opacity hover:opacity-90`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[a.label,":",t,n&&o.jsx(vn,{className:"w-3 h-3 ml-1 opacity-70"})]}),n&&r&&o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",children:o.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap",children:[o.jsx("div",{className:"font-semibold",children:a.description}),o.jsxs("div",{className:"text-gray-300 mt-1",children:[t==="HIGH"&&"Significant impact - careful review needed",t==="MEDIUM"&&"Moderate impact - standard review",t==="LOW"&&"Minimal impact - routine change"]}),o.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900"})]})})]})},Zu=({badges:e})=>{if(!e)return null;const t=["UI","DB","COMPLEX","ACCESS","SECURITY","PROCESS"];return o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.map(n=>{const r=e[n];return r?o.jsx(FD,{type:n,level:r},n):null})})},ed=e=>{const t={},n=e.toLowerCase();return(n.includes("ui")||n.includes("interface")||n.includes("component"))&&(t.UI=n.includes("complex")||n.includes("major")?"HIGH":n.includes("update")||n.includes("modify")?"MEDIUM":"LOW"),(n.includes("database")||n.includes("schema")||n.includes("migration"))&&(t.DB=n.includes("migration")||n.includes("schema")?"HIGH":n.includes("query")||n.includes("index")?"MEDIUM":"LOW"),n.includes("architecture")||n.includes("refactor")||n.includes("system")?t.COMPLEX="HIGH":n.includes("feature")||n.includes("implement")?t.COMPLEX="MEDIUM":(n.includes("fix")||n.includes("update"))&&(t.COMPLEX="LOW"),(n.includes("permission")||n.includes("role")||n.includes("access"))&&(t.ACCESS=n.includes("admin")||n.includes("role")?"HIGH":"MEDIUM"),n.includes("security")||n.includes("auth")||n.includes("encrypt")?t.SECURITY=n.includes("auth")||n.includes("encrypt")?"HIGH":"MEDIUM":(n.includes("api")||n.includes("endpoint"))&&(t.SECURITY="LOW"),(n.includes("workflow")||n.includes("process")||n.includes("business"))&&(t.PROCESS=n.includes("workflow")?"HIGH":"MEDIUM"),Object.keys(t).length===0&&(t.COMPLEX="LOW"),t},Zm=({message:e,type:t="info",duration:n=5e3,onClose:r,position:s="top-right"})=>{const[i,a]=j.useState(!1),[l,c]=j.useState(!1);j.useEffect(()=>{setTimeout(()=>a(!0),10);const g=setTimeout(()=>{u()},n);return()=>clearTimeout(g)},[n]);const u=()=>{c(!0),setTimeout(()=>{a(!1),r==null||r()},300)},d={success:{icon:ze,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-800 dark:text-green-200",iconColor:"text-green-600 dark:text-green-400"},error:{icon:ss,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-800 dark:text-red-200",iconColor:"text-red-600 dark:text-red-400"},warning:{icon:Ot,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",textColor:"text-yellow-800 dark:text-yellow-200",iconColor:"text-yellow-600 dark:text-yellow-400"},info:{icon:vn,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-800 dark:text-blue-200",iconColor:"text-blue-600 dark:text-blue-400"}},h=d[t]||d.info,m=h.icon,f={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"};return o.jsx("div",{className:`
        fixed z-50 
        ${f[s]}
        transition-all duration-300 ease-in-out
        ${i&&!l?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"}
      `,children:o.jsxs("div",{className:`
          flex items-center gap-3 p-4 rounded-lg shadow-lg
          ${h.bgColor} ${h.borderColor} ${h.textColor}
          border min-w-[300px] max-w-md
        `,children:[o.jsx(m,{className:`w-5 h-5 ${h.iconColor} flex-shrink-0`}),o.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),o.jsx("button",{onClick:u,className:`${h.iconColor} hover:opacity-70 transition-opacity`,"aria-label":"Close notification",children:o.jsx(Os,{className:"w-4 h-4"})})]})})},VD=({children:e})=>{const[t,n]=j.useState([]),r=(i,a="info",l=5e3)=>{const c=Date.now(),u={id:c,message:i,type:a,duration:l};return n(d=>[...d,u]),c},s=i=>{n(a=>a.filter(l=>l.id!==i))};return j.useEffect(()=>(window.showToast=r,()=>{delete window.showToast}),[]),o.jsxs(o.Fragment,{children:[e,o.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:t.map((i,a)=>o.jsx("div",{className:"pointer-events-auto",style:{position:"fixed",top:`${20+a*80}px`,right:"20px",transition:"all 0.3s ease-in-out"},children:o.jsx(Zm,{message:i.message,type:i.type,duration:i.duration,onClose:()=>s(i.id),position:"none"})},i.id))})]})},UD=()=>{const e=(t,n="info",r=5e3)=>{if(window.showToast)return window.showToast(t,n,r);console.warn("Toast provider not found. Make sure ToastProvider is mounted.")};return{success:(t,n)=>e(t,"success",n),error:(t,n)=>e(t,"error",n),warning:(t,n)=>e(t,"warning",n),info:(t,n)=>e(t,"info",n),show:e}},zD=()=>{var at;const e=er(),n=new URLSearchParams(e.search).get("mode")==="quick"?"quick":"comprehensive",[r,s]=j.useState(n),[i,a]=j.useState(1),[l,c]=j.useState(null),[u,d]=j.useState(!1),[h,m]=j.useState(null),[f,g]=j.useState(null),[v,k]=j.useState([]),[x,y]=j.useState(!1),[p,S]=j.useState("intelligent"),[E,N]=j.useState(0),[P,T]=j.useState(!1),[O,D]=j.useState("input"),[M,K]=j.useState(!1),[he,$]=j.useState(!0),[L,q]=j.useState(null),[F,C]=j.useState(null),[A,b]=j.useState({}),[z,Y]=j.useState(!1),[_,le]=j.useState(!1),[xe,fe]=j.useState([]),[Ce,vt]=j.useState(!1),[Nn,dn]=j.useState({}),Ft=UD(),[Q,Xe]=j.useState({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),[hn,Ze]=j.useState({}),[it,Zt]=j.useState({}),[I,w]=j.useState({1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1}),H=()=>r==="quick"?[{id:1,title:"Input",icon:vh,description:"Enter your directive idea",timeEstimate:2},{id:3,title:"Classification",icon:Xr,description:"Strategic or Tactical",timeEstimate:1},{id:7,title:"Confirmation",icon:ze,description:"Review and submit",timeEstimate:1}]:[{id:1,title:"Input & Screenshot",icon:Au,description:"Provide feedback and optional screenshot",timeEstimate:3},{id:2,title:"Intent Confirmation",icon:Xr,description:"Review and confirm the extracted intent",timeEstimate:2},{id:3,title:"Classification",icon:bl,description:"Review strategic vs tactical breakdown",timeEstimate:2},{id:4,title:"Impact Analysis",icon:Ot,description:"Review application impact and consistency validation",timeEstimate:4},{id:5,title:"Synthesis Review",icon:xt,description:"Review aligned, required, and recommended items",timeEstimate:5},{id:6,title:"Questions",icon:vh,description:"Answer questions to refine the directive",timeEstimate:3},{id:7,title:"Confirmation",icon:ze,description:"Review and confirm the final summary",timeEstimate:2}],se=V=>{if(V<i&&l){const te=({1:[2,3,4,5,6,7],2:[3,4,5,6,7],3:[4,5,6,7],4:[5,6,7],5:[6,7],6:[7]}[V]||[]).filter(pe=>{switch(pe){case 2:return l.intent_summary;case 3:return l.strat_tac;case 4:return l.impact_analysis;case 5:return l.synthesis;case 6:return l.questions;case 7:return l.final_summary;default:return!1}});if(te.length>0){const pe={2:"Intent Summary",3:"Classification",4:"Impact Analysis",5:"Synthesis",6:"Clarifying Questions",7:"Final Summary"},ke=te.map(ae=>pe[ae]).join(", ");Ft.warning(`Editing Step ${V} may invalidate: ${ke}`,8e3),fe(ae=>[...ae,{editedStep:V,timestamp:new Date().toISOString(),affectedSteps:te}])}}},_e=V=>r==="quick"?V===1?3:V===3?7:V:V<7?V+1:V,Pe=V=>{se(V),a(V)},be=H();j.useEffect(()=>{const V=()=>{const G=window.innerWidth<768;T(G)};return V(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[l]),j.useEffect(()=>{const V=setTimeout(()=>{(Q.chairmanInput||Q.intentSummary)&&(localStorage.setItem("directiveLab_draft",JSON.stringify(Q)),g("Draft saved"),setTimeout(()=>g(null),3e3))},2e3);return()=>clearTimeout(V)},[Q]),j.useEffect(()=>{const V=localStorage.getItem("directiveLab_draft");V&&(Xe(JSON.parse(V)),g("Draft restored"),setTimeout(()=>g(null),3e3))},[]),j.useEffect(()=>{if(i===3&&(l!=null&&l.id)&&!(l!=null&&l.strat_tac)){console.log("🎯 [STEP 3] Generating classification data...");const V=Q.intentSummary||(l==null?void 0:l.intent_summary)||"",G=["vision","strategy","long-term","transform","innovation","competitive advantage","market position","growth","expansion","culture"],X=["fix","bug","update","modify","adjust","correct","improve","enhance","optimize","refactor"];let ce=0,te=0;const pe=V.toLowerCase();G.forEach(ot=>{pe.includes(ot)&&(ce+=10)}),X.forEach(ot=>{pe.includes(ot)&&(te+=10)}),ce===0&&te===0&&(ce=50,te=50);const ke=ce+te,ae=Math.round(ce/ke*100),mt=100-ae,tt=ae>60?"This initiative focuses on strategic goals that will shape long-term direction and capabilities.":mt>60?"This initiative addresses immediate operational needs and improvements.":"This initiative balances both strategic vision and tactical execution needs.",tr={strat_tac:{strategic_pct:ae,tactical_pct:mt,rationale:tt,generated_at:new Date().toISOString()}};c(ot=>({...ot,...tr})),console.log("✅ [STEP 3] Classification data generated locally")}},[i,l,Q.intentSummary]),j.useEffect(()=>{var V;if(i===4&&(l!=null&&l.id)&&!(l!=null&&l.impact_analysis)){console.log("🎯 [STEP 4] Generating impact analysis data...");const G=Q.intentSummary||(l==null?void 0:l.intent_summary)||"",X=G.toLowerCase(),ce={dashboard:[{name:"Dashboard",risk_level:"medium",confidence:.8,dependencies:["MetricsCard","ChartComponent"]},{name:"DashboardCard",risk_level:"low",confidence:.7,dependencies:["UI Components"]},{name:"MetricsCard",risk_level:"low",confidence:.6,dependencies:["Data Fetcher"]}],form:[{name:"Form",risk_level:"medium",confidence:.9,dependencies:["Input","Button","Validation"]},{name:"Input",risk_level:"low",confidence:.8,dependencies:["Event Handlers"]},{name:"Button",risk_level:"low",confidence:.9,dependencies:["UI Components"]},{name:"Validation",risk_level:"medium",confidence:.7,dependencies:["Form State"]}],navigation:[{name:"Navigation",risk_level:"medium",confidence:.8,dependencies:["Router","Auth Context"]},{name:"Sidebar",risk_level:"low",confidence:.7,dependencies:["Navigation"]},{name:"Menu",risk_level:"low",confidence:.6,dependencies:["Navigation"]}],table:[{name:"Table",risk_level:"medium",confidence:.8,dependencies:["Data Fetcher","Pagination"]},{name:"DataGrid",risk_level:"high",confidence:.9,dependencies:["Table","Virtual Scroller"]}],modal:[{name:"Modal",risk_level:"medium",confidence:.8,dependencies:["Portal","Focus Trap"]},{name:"Dialog",risk_level:"medium",confidence:.7,dependencies:["Modal"]},{name:"Overlay",risk_level:"low",confidence:.6,dependencies:["Portal"]}],auth:[{name:"Auth",risk_level:"high",confidence:.9,dependencies:["UserContext","Token Manager"]},{name:"Login",risk_level:"high",confidence:.8,dependencies:["Auth","Form"]},{name:"UserContext",risk_level:"high",confidence:.9,dependencies:["State Management"]}],theme:[{name:"ThemeProvider",risk_level:"medium",confidence:.8,dependencies:["CSS Variables","Context API"]},{name:"Dark Mode",risk_level:"medium",confidence:.7,dependencies:["ThemeProvider"]}],api:[{name:"API Client",risk_level:"high",confidence:.9,dependencies:["HTTP Service","Error Handler"]},{name:"Data Fetcher",risk_level:"medium",confidence:.8,dependencies:["API Client"]},{name:"WebSocket",risk_level:"high",confidence:.7,dependencies:["Connection Manager"]}]},te=[];Object.entries(ce).forEach(([me,fn])=>{(X.includes(me)||X.includes(me.replace(/[aeiou]/gi,""))||fn.some(cs=>X.includes(cs.name.toLowerCase())))&&te.push(...fn)}),te.length===0&&te.push({name:"UI Components",risk_level:"low",confidence:.5,dependencies:["React Components"]},{name:"State Management",risk_level:"medium",confidence:.6,dependencies:["React Hooks"]},{name:"Event Handlers",risk_level:"low",confidence:.7,dependencies:["DOM Events"]});const pe=["database","auth","security","payment","migration","breaking","major"],ke=["api","integration","workflow","validation","performance"];let ae="Low",mt="This change appears to be primarily cosmetic or minor functionality enhancement.";pe.some(me=>X.includes(me))?(ae="High",mt="This change affects critical system components that could impact security, data integrity, or core functionality."):ke.some(me=>X.includes(me))&&(ae="Medium",mt="This change affects system integrations or business logic that requires careful testing and validation.");const tt=[{category:"Design System",status:"compliant",details:"Change adheres to existing design tokens and component patterns"},{category:"Accessibility",status:ae==="High"?"review_required":"compliant",details:ae==="High"?"WCAG compliance review needed for this change":"No accessibility concerns identified"},{category:"Performance",status:X.includes("performance")?"improvement":"neutral",details:X.includes("performance")?"Change should improve application performance":"No significant performance impact expected"},{category:"Security",status:pe.some(me=>X.includes(me))?"review_required":"compliant",details:pe.some(me=>X.includes(me))?"Security review required before implementation":"No security concerns identified"}],tr={database:3,migration:4,api:2,auth:3,integration:2,ui:1,style:.5,text:.5};let ot=1;Object.entries(tr).forEach(([me,fn])=>{X.includes(me)&&(ot+=fn)});const nr=ot<=2?"1-2 days":ot<=4?"3-5 days":ot<=6?"1-2 weeks":"2-4 weeks",os=Math.min(100,Math.round(te.length*10+ot*5+(ae==="High"?30:ae==="Medium"?15:5))),ls=Math.round(ot*10)/10,rr={affected_components:te.slice(0,8),risk_level:ae.toLowerCase(),risk_rationale:mt,impact_score:os,effort_multiplier:ls,estimated_effort:Math.ceil(ot),estimated_timeline:nr,consistency_validation:tt,recommendations:[{type:"Testing",description:`Ensure comprehensive testing for ${te.length} affected components`,effort_reduction:"15-20%"},{type:"Documentation",description:"Update component documentation and integration guides",effort_reduction:"10-15%"}],mitigation_strategies:["Implement feature flags to control rollout","Create comprehensive test suite before deployment","Monitor performance metrics during implementation","Prepare rollback strategy for critical issues"],generated_at:new Date().toISOString()};ae==="High"&&(rr.breaking_changes=[{type:"API Change",description:"Potential modifications to component interfaces",keyword:((V=X.match(/(auth|api|database)/))==null?void 0:V[0])||"system"}]);const wr={};tt.forEach(me=>{const fn=me.status==="compliant"?85:me.status==="improvement"?95:me.status==="review_required"?25:me.status==="warning"?60:75;wr[me.category.toLowerCase().replace(" ","_")]=fn});const kr={passed:!tt.some(me=>me.status==="review_required"),blocking_issues:tt.filter(me=>me.status==="review_required").map(me=>({message:`${me.category}: ${me.details}`,suggestion:me.status==="review_required"?"Consider professional review before implementation":null})),warnings:tt.filter(me=>me.status==="warning"),score:Math.round(tt.filter(me=>me.status==="compliant"||me.status==="improvement").length/tt.length*100),category_scores:wr,recommendations:tt.filter(me=>me.status==="improvement"||me.status==="compliant").map(me=>({message:me.details,priority:me.status==="improvement"?"medium":"low"}))};q(rr),C(kr);const jr={skeptical_assessment:[`Directive "${G.slice(0,50)}..." may have hidden complexities not immediately apparent`,"Resource estimates are often underestimated by 40-60% in similar projects","User requirements frequently change after initial implementation begins","Integration points with existing systems pose higher risk than anticipated"],potential_blockers:["Insufficient technical specifications may delay development","Dependency on external APIs or services may introduce instability","Browser compatibility issues may emerge during testing","Performance impact on larger datasets may require architectural changes"],risk_factors:{technical_debt:ae==="High"?"Significant":"Moderate",change_resistance:"Medium",rollback_difficulty:nr.includes("week")?"Low":"High",maintenance_overhead:`${ae} ongoing maintenance burden expected`},recommendations:["Consider phased implementation approach to mitigate risks","Establish clear rollback procedures before deployment","Plan for 25% buffer time beyond initial estimates","Document all assumptions and validate with stakeholders"]};dn(jr),c(me=>({...me,impact_analysis:rr,consistency_validation:kr,critical_analysis:jr})),console.log("✅ [STEP 4] Impact analysis data generated locally"),console.log("📊 [STEP 4] Risk Level:",ae),console.log("🔍 [STEP 4] Components affected:",te.length),console.log("⏱️ [STEP 4] Estimated timeline:",nr)}},[i,l,Q.intentSummary]),j.useEffect(()=>{var V,G;if(i===5&&(l!=null&&l.id)&&((V=l==null?void 0:l.gate_status)!=null&&V.synthesis_reviewed&&Y(!0),!(l!=null&&l.synthesis))){console.log("🎯 [STEP 5] Generating synthesis data...");const X=(l==null?void 0:l.intent_summary)||Q.intentSummary||"",ce=(l==null?void 0:l.strat_tac)||{},te=(l==null?void 0:l.impact_analysis)||{},pe=[],ke=[],ae=[];(X.toLowerCase().includes("dark mode")||X.toLowerCase().includes("theme"))&&(pe.push("UI theming system already supports dark/light mode switching"),pe.push("CSS variables are in place for theme customization")),(X.toLowerCase().includes("dashboard")||X.toLowerCase().includes("ui"))&&(pe.push("Component architecture supports modular UI updates"),pe.push("Existing design system can be extended")),ce.strategic_pct>50&&(ke.push("Architecture review and approval from technical lead"),ke.push("Comprehensive testing strategy for new features"),ke.push("Documentation updates for significant changes")),((te==null?void 0:te.risk_level)==="High"||(te==null?void 0:te.risk_level)==="Critical")&&(ke.push("Risk mitigation plan implementation"),ke.push("Rollback strategy preparation")),X.toLowerCase().includes("performance")&&ke.push("Performance benchmarking before and after implementation"),(X.toLowerCase().includes("security")||X.toLowerCase().includes("auth"))&&ke.push("Security audit and penetration testing"),ce.tactical_pct>60&&(ae.push("Incremental deployment with feature flags"),ae.push("A/B testing for user-facing changes")),((G=te==null?void 0:te.affected_components)==null?void 0:G.length)>5&&(ae.push("Phased implementation to minimize disruption"),ae.push("Component isolation testing")),ae.push("User acceptance testing with stakeholder group"),ae.push("Performance monitoring post-deployment"),pe.length===0&&(pe.push("Existing infrastructure supports proposed changes"),pe.push("Current tooling and frameworks are compatible")),ke.length===0&&(ke.push("Standard code review process"),ke.push("Unit and integration test coverage")),ae.length===0&&(ae.push("Progressive rollout strategy"),ae.push("User feedback collection mechanism"));const mt={synthesis:{aligned:pe,required:ke,recommended:ae,generated_at:new Date().toISOString()}};console.log("📊 [STEP 5] Synthesis generated:",mt),c(tt=>({...tt,...mt}))}},[i,l,Q.intentSummary]),j.useEffect(()=>{var V;if(i===6&&(l!=null&&l.id)&&(l==null?void 0:l.questions)===void 0){console.log("🎯 [STEP 6] Generating clarifying questions...");const G=(l==null?void 0:l.intent_summary)||Q.intentSummary||"",X=(l==null?void 0:l.strat_tac)||{},ce=(l==null?void 0:l.synthesis)||{},te=[];(G.toLowerCase().includes("ui")||G.toLowerCase().includes("interface"))&&(te.push({text:"What specific UI components or pages should be affected by these changes?",context:"Help us scope the implementation correctly"}),te.push({text:"Do you have any specific design preferences or brand guidelines to follow?",context:"Ensures visual consistency with your requirements"})),X.strategic_pct>60&&(te.push({text:"What is the expected timeline for this strategic initiative?",context:"Helps with resource allocation and planning"}),te.push({text:"Are there any dependencies or prerequisites we should be aware of?",context:"Identifies potential blockers early"})),(V=ce.required)!=null&&V.some(ke=>ke.includes("performance"))&&te.push({text:"What are your specific performance targets or requirements?",context:"Define measurable success criteria"}),(G.toLowerCase().includes("data")||G.toLowerCase().includes("database"))&&te.push({text:"What data retention and backup policies should be considered?",context:"Ensures compliance with data governance"}),te.length<2&&te.push({text:"Are there any specific edge cases or scenarios we should consider?",context:"Helps identify potential issues early"});const pe={questions:te.length>0?te:[],questions_generated_at:new Date().toISOString()};console.log("❓ [STEP 6] Questions generated:",pe),c(ke=>({...ke,...pe}))}},[i,l,Q.intentSummary]),j.useEffect(()=>{var V,G,X;if(i===7&&(l!=null&&l.id)&&!(l!=null&&l.final_summary)){console.log("🎯 [STEP 7] Generating final summary...");const ce=(l==null?void 0:l.intent_summary)||Q.intentSummary||"",te=(l==null?void 0:l.strat_tac)||{},pe=(l==null?void 0:l.impact_analysis)||{},ke=(l==null?void 0:l.synthesis)||{};let ae=`This directive focuses on: ${ce}. `;te.strategic_pct>60?ae+=`This is primarily a strategic initiative (${te.strategic_pct}% strategic) that will shape long-term architecture. `:ae+=`This is primarily a tactical improvement (${te.tactical_pct}% tactical) focusing on immediate enhancements. `,((V=pe.affected_components)==null?void 0:V.length)>0&&(ae+=`The implementation will affect ${pe.affected_components.length} components with ${pe.risk_level||"moderate"} risk level. `),((G=ke.required)==null?void 0:G.length)>0&&(ae+=`Key requirements include: ${ke.required[0]}. `),((X=ke.recommended)==null?void 0:X.length)>0&&(ae+=`Recommended approach: ${ke.recommended[0]}. `),pe.effort_estimate&&(ae+=`Estimated effort: ${pe.effort_estimate}. `),ae+="Upon approval, this directive will be converted into a formal PRD and assigned to the implementation team.";const mt={final_summary:ae,final_summary_generated_at:new Date().toISOString()};console.log("📋 [STEP 7] Final summary generated:",mt),c(tt=>({...tt,...mt}))}},[i,l,Q.intentSummary]),j.useEffect(()=>{i===2&&Q.intentSummary&&setTimeout(()=>{const V=document.querySelector('textarea[name="intentSummary"]');V&&(V.style.height="auto",V.style.height=Math.min(V.scrollHeight,300)+"px")},100)},[Q.intentSummary,i]);const et=V=>V.trim()?V.length<20?(Ze(G=>({...G,chairmanInput:"Please provide more detailed feedback (min 20 characters)"})),Zt(G=>({...G,chairmanInput:!1})),!1):(Ze(G=>({...G,chairmanInput:null})),Zt(G=>({...G,chairmanInput:!0})),!0):(Ze(G=>({...G,chairmanInput:"Feedback is required"})),Zt(G=>({...G,chairmanInput:!1})),!1),R=V=>{if(!V)return!0;try{return new URL(V),Ze(G=>({...G,screenshotUrl:null})),Zt(G=>({...G,screenshotUrl:!0})),!0}catch{return Ze(G=>({...G,screenshotUrl:"Please enter a valid URL"})),Zt(G=>({...G,screenshotUrl:!1})),!1}},U=async()=>{var V,G;if(console.log("🚀 [STEP 1] Starting feedback submission"),console.log("📄 [STEP 1] Form data:",{feedback:((V=Q.chairmanInput)==null?void 0:V.substring(0,50))+"...",screenshotUrl:Q.screenshotUrl}),!!et(Q.chairmanInput)){d(!0),m(null);try{const X=await fetch("/api/sdip/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:Q.chairmanInput,screenshot_url:Q.screenshotUrl})});if(!X.ok)throw new Error("Failed to submit feedback");const ce=await X.json();console.log("🎉 [STEP 1] Submission created successfully"),console.log("🆔 [STEP 1] Submission ID:",((G=ce.submission)==null?void 0:G.id)||ce.id),console.log("📄 [STEP 1] Full submission data:",ce);const te=ce.submission||ce;c(te),w({...I,1:!0}),a(2),g("Feedback submitted successfully!"),localStorage.removeItem("directiveLab_draft"),te.id?(console.log("🎯 [STEP 2] Triggering intent generation for submission:",te.id),await ne(te.id,2,{feedback:Q.chairmanInput,chairman_input:Q.chairmanInput})):console.error("⚠️ [STEP 1] No submission ID received!")}catch(X){m(X.message)}finally{d(!1)}}},ne=async(V,G,X)=>{console.log(`🔄 [STEP ${G}] Updating submission: ${V}`),console.log(`📦 [STEP ${G}] Step data:`,X);try{const ce=await fetch(`/api/sdip/submissions/${V}/step/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!ce.ok)throw new Error(`Failed to update step ${G}`);const te=await ce.json();console.log(`✅ [STEP ${G}] Update successful`),console.log(`📄 [STEP ${G}] Response data:`,te);const pe=te.submission||te;return c(pe),G===2&&pe.intent_summary&&(console.log("💡 [STEP 2] Intent summary received:",pe.intent_summary.substring(0,50)+"..."),Xe({...Q,intentSummary:pe.intent_summary})),pe}catch(ce){throw console.error(`❌ [STEP ${G}] Update failed:`,ce),console.error(`❌ [STEP ${G}] Error details:`,ce.message),m(ce.message),ce}},ie=async V=>{var G,X,ce,te,pe;console.log(`🎯 [STEP ${V}] Completing step`),console.log(`📄 [STEP ${V}] Current submission:`,l),d(!0),m(null);try{if(l&&l.id&&V>1){console.log(`📦 [STEP ${V}] Preparing step data for submission: ${l.id}`);let ae={};switch(V){case 2:ae={intent_summary:Q.intentSummary};break;case 3:ae={strategic_pct:((G=l.strat_tac)==null?void 0:G.strategic_pct)||50,tactical_pct:((X=l.strat_tac)==null?void 0:X.tactical_pct)||50,override:Q.stratTacOverride};break;case 4:ae={impact_analysis:L,consistency_validation:F};break;case 5:ae={aligned:((ce=l.synthesis)==null?void 0:ce.aligned)||[],required:((te=l.synthesis)==null?void 0:te.required)||[],recommended:((pe=l.synthesis)==null?void 0:pe.recommended)||[],synthesis_reviewed:z};break;case 6:ae={questions_answers:Q.questionAnswers};break;case 7:ae={final_summary:l.final_summary||Q.intentSummary};break}console.log(`📦 [STEP ${V}] Step data prepared:`,ae),await ne(l.id,V,ae)}else console.log(`⚠️ [STEP ${V}] No submission ID, skipping update`);w({...I,[V]:!0});const ke=_e(V);ke!==V?(a(ke),g(`Step ${V} completed!`)):(g("Directive submitted successfully!"),setTimeout(()=>{Xe({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},summaryConfirmed:!1}),a(1),w({}),c(null),q(null),C(null)},2e3))}catch(ke){m(ke.message)}finally{d(!1)}},re=async()=>{console.log("💾 [STEP 7] Saving submission and closing"),d(!0),m(null);try{if(l&&l.id){const V={final_summary:l.final_summary||Q.intentSummary,status:"ready",completed_steps:[1,2,3,4,5,6,7]};await ne(l.id,7,V),w({...I,7:!0}),g("Submission saved successfully! You can find it in Recent Submissions."),setTimeout(()=>{Xe({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),a(1),w({}),c(null),q(null),C(null),D("submissions")},2e3)}else throw new Error("No submission to save")}catch(V){m(V.message)}finally{d(!1)}},ve=async()=>{console.log("🚀 [STEP 7] Submitting directive to create Strategic Directive"),d(!0),m(null);try{if(l&&l.id){const X={final_summary:l.final_summary||Q.intentSummary,status:"submitted",completed_steps:[1,2,3,4,5,6,7]};await ne(l.id,7,X)}const V=await fetch("/api/sdip/create-strategic-directive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_id:l.id})});if(!V.ok){const X=await V.json();throw new Error(X.error||"Failed to create Strategic Directive")}const G=await V.json();w({...I,7:!0}),g(`Strategic Directive created successfully! ID: ${G.sd_id}`),setTimeout(()=>{Xe({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),a(1),w({}),c(null),q(null),C(null),D("submissions")},3e3)}catch(V){m(V.message)}finally{d(!1)}},qe=V=>{var G,X,ce,te,pe,ke,ae,mt,tt,tr,ot,nr,os,ls,rr,wr,kr,jr,me,fn,cs,qi;switch(V){case 1:return o.jsxs("div",{className:"space-y-3",children:[o.jsx(tl,{type:"textarea",label:"Chairman Feedback",name:"chairmanInput",value:Q.chairmanInput,onChange:oe=>{Xe({...Q,chairmanInput:oe.target.value}),et(oe.target.value)},placeholder:"Enter your feedback about the EHG application...",required:!0,rows:5,minLength:20,maxLength:1e3,showCharCount:!0,error:hn.chairmanInput,success:it.chairmanInput,helpText:"Provide detailed feedback about what you'd like to improve or add"}),o.jsx(tl,{type:"url",label:"Screenshot URL",name:"screenshotUrl",value:Q.screenshotUrl,onChange:oe=>{Xe({...Q,screenshotUrl:oe.target.value}),R(oe.target.value)},placeholder:"https://example.com/screenshot.png",error:hn.screenshotUrl,success:it.screenshotUrl,helpText:"Optional: Add a screenshot URL to provide visual context",icon:Au}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ae,{onClick:U,disabled:u||!Q.chairmanInput.trim(),loading:u,variant:"primary",icon:ro,iconPosition:"right",children:"Submit & Analyze"}),o.jsx(Ae,{onClick:()=>{localStorage.setItem("directiveLab_draft",JSON.stringify(Q)),g("Draft saved")},variant:"secondary",icon:Iu,children:"Save Draft"})]})]});case 2:return o.jsxs("div",{className:"space-y-3",children:[o.jsx(tl,{type:"textarea",label:"Extracted Intent Summary",name:"intentSummary",value:Q.intentSummary,onChange:oe=>{Xe({...Q,intentSummary:oe.target.value}),oe.target&&(oe.target.style.height="auto",oe.target.style.height=Math.min(oe.target.scrollHeight,300)+"px")},rows:3,style:{minHeight:"80px",maxHeight:"300px",resize:"vertical",overflow:"auto"},onFocus:oe=>{oe.target.style.height="auto",oe.target.style.height=Math.min(oe.target.scrollHeight,300)+"px"},helpText:"Review and edit if needed to accurately capture your intent",success:Q.intentSummary.length>0}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ae,{onClick:()=>Pe(1),variant:"ghost",icon:ds,children:"Back"}),o.jsx(Ae,{onClick:()=>ie(2),disabled:u||!Q.intentSummary,loading:u,variant:"success",icon:Hn,children:"Confirm Intent"})]})]});case 3:return o.jsxs("div",{className:"space-y-3",children:[l!=null&&l.strat_tac?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex justify-around mb-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[((G=Q.stratTacOverride)==null?void 0:G.strategic_pct)??l.strat_tac.strategic_pct,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Strategic"})]}),o.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600"}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[((X=Q.stratTacOverride)==null?void 0:X.tactical_pct)??l.strat_tac.tactical_pct,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Tactical"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg",children:[o.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Classification Rationale:"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:((ce=Q.stratTacOverride)==null?void 0:ce.rationale)||l.strat_tac.rationale})]})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(ok,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mr-2"}),o.jsx("span",{className:"font-medium text-yellow-900 dark:text-yellow-100 text-sm",children:"Adjust Classification (Optional)"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-2",children:[o.jsx("span",{children:"More Tactical"}),o.jsx("span",{children:"More Strategic"})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:((te=Q.stratTacOverride)==null?void 0:te.strategic_pct)??l.strat_tac.strategic_pct,onChange:oe=>{const Je=parseInt(oe.target.value),en=100-Je;let Nt="";Je>70?Nt="Manually classified as highly strategic - focusing on long-term architecture and business objectives.":Je>50?Nt="Manually classified as moderately strategic - balancing long-term goals with immediate improvements.":Je>30?Nt="Manually classified as balanced - containing both strategic elements and tactical improvements.":Nt="Manually classified as primarily tactical - focusing on immediate fixes and improvements.",Xe({...Q,stratTacOverride:{strategic_pct:Je,tactical_pct:en,rationale:Nt,manually_adjusted:!0,adjusted_at:new Date().toISOString()}})},className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 \r
                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 \r
                        [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer\r
                        [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 \r
                        [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none`}),o.jsxs("div",{className:"flex justify-between mt-1",children:[o.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[((pe=Q.stratTacOverride)==null?void 0:pe.tactical_pct)??l.strat_tac.tactical_pct,"% Tactical"]}),o.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:[((ke=Q.stratTacOverride)==null?void 0:ke.strategic_pct)??l.strat_tac.strategic_pct,"% Strategic"]})]})]}),Q.stratTacOverride&&o.jsx(Ae,{onClick:()=>{Xe({...Q,stratTacOverride:null})},variant:"ghost",size:"small",icon:Ts,children:"Reset to Auto-Classification"})]})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyzing strategic vs tactical breakdown..."})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ae,{onClick:()=>Pe(2),variant:"ghost",icon:ds,children:"Back"}),o.jsx(Ae,{onClick:()=>ie(3),disabled:u,loading:u,variant:"success",icon:Hn,children:Q.stratTacOverride?"Accept Adjusted Classification":"Accept Classification"})]})]});case 4:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Application Impact Analysis"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the comprehensive analysis of how your proposed changes will affect the application, including component dependencies, risk assessment, and consistency validation."})]}),o.jsx(MD,{impactAnalysis:L,consistencyValidation:F,submission:l}),F&&!F.passed&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Yn,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),o.jsx("span",{className:"font-medium text-red-900 dark:text-red-100",children:"Consistency Issues Found"})]}),o.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 mb-3",children:[((ae=F.blocking_issues)==null?void 0:ae.length)||0," blocking issues must be resolved before proceeding."]}),o.jsx("div",{className:"text-xs text-red-700 dark:text-red-300",children:"Review the Impact Analysis above for detailed recommendations and mitigation strategies."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ae,{onClick:()=>Pe(3),variant:"ghost",icon:ds,children:"Back"}),o.jsx(Ae,{onClick:()=>ie(4),disabled:u||F&&!F.passed,loading:u,variant:(F==null?void 0:F.passed)===!1?"secondary":"success",icon:(F==null?void 0:F.passed)===!1?Ot:Hn,children:(F==null?void 0:F.passed)===!1?"Acknowledge Risks & Continue":"Accept Impact Analysis"})]})]});case 5:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Synthesis Review"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the synthesized requirements and recommendations for your directive."})]}),l!=null&&l.synthesis?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(ze,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),o.jsxs("span",{className:"font-medium text-green-900 dark:text-green-100",children:["Aligned Requirements (",((mt=l.synthesis.aligned)==null?void 0:mt.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(tt=l.synthesis.aligned)==null?void 0:tt.map((oe,Je)=>{const en=typeof oe=="object"?oe.badges:ed(oe),Nt=typeof oe=="object"?oe.text:oe;return o.jsx("li",{className:"text-sm text-green-800 dark:text-green-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-600 dark:text-green-400 mr-2",children:"•"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:Nt}),o.jsx(Zu,{badges:en})]})]})},Je)})})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Ot,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),o.jsxs("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:["Required Changes (",((tr=l.synthesis.required)==null?void 0:tr.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(ot=l.synthesis.required)==null?void 0:ot.map((oe,Je)=>{const en=typeof oe=="object"?oe.badges:ed(oe),Nt=typeof oe=="object"?oe.text:oe;return o.jsx("li",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mr-2",children:"•"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:Nt}),o.jsx(Zu,{badges:en})]})]})},Je)})})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(vn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),o.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:["Recommended Enhancements (",((nr=l.synthesis.recommended)==null?void 0:nr.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(os=l.synthesis.recommended)==null?void 0:os.map((oe,Je)=>{const en=typeof oe=="object"?oe.badges:ed(oe),Nt=typeof oe=="object"?oe.text:oe;return o.jsx("li",{className:"text-sm text-blue-800 dark:text-blue-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:"•"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:Nt}),o.jsx(Zu,{badges:en})]})]})},Je)})})]})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Synthesizing requirements and recommendations..."})]})}),(l==null?void 0:l.synthesis)&&o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:o.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:z,onChange:oe=>Y(oe.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"I have reviewed the synthesis analysis"}),o.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["I understand the aligned requirements (",((ls=l.synthesis.aligned)==null?void 0:ls.length)||0,"), required changes (",((rr=l.synthesis.required)==null?void 0:rr.length)||0,"), and recommended enhancements (",((wr=l.synthesis.recommended)==null?void 0:wr.length)||0,") for this directive."]})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ae,{onClick:()=>Pe(4),variant:"ghost",icon:ds,children:"Back"}),o.jsx(Ae,{onClick:()=>ie(5),disabled:u||!(l!=null&&l.synthesis)||!z,loading:u,variant:"success",icon:Hn,children:"Accept Synthesis"})]})]});case 6:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Clarifying Questions"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Answer any clarifying questions about your directive to ensure accurate implementation."})]}),l!=null&&l.questions&&l.questions.length>0?o.jsx("div",{className:"space-y-3",children:l.questions.map((oe,Je)=>{var en;return o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start mb-2",children:[o.jsx(Ru,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2 mt-0.5"}),o.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:oe.text})]}),o.jsx(tl,{type:"textarea",name:`question_${Je}`,value:((en=Q.questionAnswers)==null?void 0:en[`question_${Je}`])||"",onChange:Nt=>{Xe({...Q,questionAnswers:{...Q.questionAnswers,[`question_${Je}`]:Nt.target.value}})},placeholder:"Your answer...",rows:2,helpText:oe.context})]},Je)})}):(l==null?void 0:l.questions)===void 0?o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generating clarifying questions..."})]})}):o.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(ze,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),o.jsx("p",{className:"text-green-800 dark:text-green-200",children:"No clarifying questions needed - your directive is clear!"})]})}),(l==null?void 0:l.questions)!==void 0&&o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:o.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:Q.questionsReviewed||!1,onChange:oe=>Xe({...Q,questionsReviewed:oe.target.checked}),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:((kr=l==null?void 0:l.questions)==null?void 0:kr.length)>0?"I have provided complete answers to all questions":"I confirm no additional questions are needed"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:((jr=l==null?void 0:l.questions)==null?void 0:jr.length)>0?`All ${l.questions.length} clarifying questions have been answered to provide context for implementation.`:"The directive is sufficiently clear and no additional clarification is required."})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ae,{onClick:()=>Pe(5),variant:"ghost",icon:ds,children:"Back"}),o.jsx(Ae,{onClick:()=>ie(6),disabled:u||!Q.questionsReviewed,loading:u,variant:"success",icon:Hn,children:((me=l==null?void 0:l.questions)==null?void 0:me.length)>0?"Submit Answers":"Continue"})]})]});case 7:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Final Confirmation"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the final summary and choose your next action."})]}),l!=null&&l.final_summary?o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Directive Summary"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:l.final_summary})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[((fn=l.strat_tac)==null?void 0:fn.strategic_pct)||0,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Strategic"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((cs=l.impact_analysis)==null?void 0:cs.risk_level)||"Low"}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Risk Level"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:((qi=l.impact_analysis)==null?void 0:qi.effort_estimate)||"Medium"}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Effort"})]})]}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsx(Ae,{onClick:()=>{navigator.clipboard.writeText(l.final_summary),Ft.success("Summary copied to clipboard")},variant:"ghost",size:"small",icon:Sm,children:"Copy Summary"}),o.jsx(Ae,{onClick:async()=>{d(!0);try{const oe=await fetch(`/api/directive-submissions/${l.id}/regenerate-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(oe.ok){const Je=await oe.json();c({...l,final_summary:Je.final_summary}),Ft.success("Summary regenerated successfully")}}catch{Ft.error("Failed to regenerate summary")}finally{d(!1)}},variant:"ghost",size:"small",icon:Ts,disabled:u,children:"Regenerate"})]}),o.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:o.jsxs("label",{className:"flex items-start cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:Q.finalConfirmed||!1,onChange:oe=>Xe({...Q,finalConfirmed:oe.target.checked}),className:"mt-0.5 mr-2"}),o.jsx("span",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:"I confirm that this directive accurately represents my requirements."})]})})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preparing final summary..."})]})}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Choose Your Next Action"}),o.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Iu,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Save & Close:"})," Save for later review or combine with other submissions"]})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(O0,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Submit Directive:"})," Create Strategic Directive and begin LEO Protocol workflow"]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(Ae,{onClick:()=>Pe(6),variant:"ghost",icon:ds,className:"order-3 sm:order-1",children:"Back"}),o.jsxs("div",{className:"flex gap-3 order-1 sm:order-2 flex-1",children:[o.jsx(Ae,{onClick:re,disabled:u||!Q.finalConfirmed,loading:u,variant:"secondary",icon:Iu,className:"flex-1",children:"Save & Close"}),o.jsx(Ae,{onClick:ve,disabled:u||!Q.finalConfirmed,loading:u,variant:"primary",icon:O0,className:"flex-1",children:"Submit Directive"})]})]})]});default:return o.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Step content for Step ",V," coming soon..."]})}},ft=()=>o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 py-1.5 px-4",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(Ae,{onClick:()=>Pe(Math.max(1,i-1)),disabled:i===1,variant:"ghost",size:"small",icon:ds,children:"Previous"}),o.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Step ",i," of ",be.length]}),o.jsx(Ae,{onClick:()=>ie(i),disabled:!I[i-1]&&i>1,variant:"primary",size:"small",icon:ro,iconPosition:"right",children:"Next"})]})});return o.jsx(VD,{children:o.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(ck,{}),o.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Directive Lab"}),o.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>s("quick"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${r==="quick"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Quick Mode"}),o.jsx("button",{onClick:()=>s("comprehensive"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${r==="comprehensive"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Comprehensive"})]})]}),o.jsx(Ae,{onClick:()=>K(!M),variant:"ghost",size:"small",icon:Ru,ariaLabel:"Toggle help",children:"Help"})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Step:"}),o.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:((at=be[i-1])==null?void 0:at.title)||"Unknown"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",i," of ",be.length,")"]})]})]})}),M&&o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800 px-4 py-2",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Ru,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2"}),o.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[o.jsx("p",{className:"font-medium mb-0.5",children:"Getting Started:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-blue-800 dark:text-blue-200",children:[o.jsx("li",{children:"Provide detailed feedback about what you want to improve"}),o.jsx("li",{children:"Each step builds on the previous one"}),o.jsx("li",{children:"Your progress is automatically saved"}),o.jsx("li",{children:"You can navigate back to previous steps at any time"})]})]})]})})}),f&&o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-green-800 dark:text-green-200 text-sm",children:[o.jsx(ze,{className:"w-4 h-4 mr-2"}),f]})}),h&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-red-800 dark:text-red-200 text-sm",children:[o.jsx(ss,{className:"w-4 h-4 mr-2"}),h]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx(LD,{steps:be,currentStep:i,orientation:"horizontal",showTimeEstimates:!P,compact:!0,hideLabelsOnMobile:!0,onStepClick:Pe})})}),o.jsx(ft,{}),o.jsxs("div",{className:"flex-1 px-4 py-2 flex flex-col min-h-0",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg shadow-sm border border-gray-200 dark:border-gray-700 border-b-0 flex-shrink-0",children:o.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("button",{onClick:()=>D("input"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${O==="input"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Au,{className:"w-4 h-4"}),"Input & Screenshot"]}),O==="input"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]}),o.jsxs("button",{onClick:()=>D("submissions"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${O==="submissions"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xt,{className:"w-4 h-4"}),"Recent Submissions",l&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),O==="submissions"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]})]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-b-lg shadow-sm border border-gray-200 dark:border-gray-700 border-t-0 flex-1 relative flex flex-col overflow-hidden",children:[o.jsxs("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out flex flex-col ${O==="input"?"translate-x-0 opacity-100":"translate-x-full opacity-0 pointer-events-none"}`,children:[o.jsxs("div",{className:"mb-3 flex-shrink-0",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:be[i-1].title}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:be[i-1].description})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:qe(i)})]}),o.jsx("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out ${O==="submissions"?"translate-x-0 opacity-100":"-translate-x-full opacity-0 pointer-events-none"}`,children:o.jsxs("div",{className:"h-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Submissions"}),o.jsx(Ae,{onClick:()=>N(V=>V+1),variant:"ghost",size:"small",icon:Ts,ariaLabel:"Refresh submissions"})]}),o.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:o.jsx(OD,{onSubmissionSelect:V=>{c(V),V&&setTimeout(()=>D("input"),300)},selectedSubmissionId:l==null?void 0:l.id,onSelectionChange:k,refreshTrigger:E,onGroupCreate:(V,G="intelligent")=>{k(V),S(G),y(!0)}})})]})})]})]}),x&&o.jsx($D,{selectedSubmissions:v,combineMethod:p,onClose:()=>y(!1),onSuccess:()=>{y(!1),N(V=>V+1)}})]})})};function Xx({backlogData:e=[],strategicDirectives:t=[],isCompact:n,onRefresh:r}){const{id:s}=po(),i=br(),a=er(),c=new URLSearchParams(a.search).get("sd"),[u,d]=j.useState({}),[h,m]=j.useState(""),[f,g]=j.useState("all"),[v,k]=j.useState(c||"all"),[x,y]=j.useState(!1),[p,S]=j.useState("all"),[E,N]=j.useState(!0),[P,T]=j.useState([]),[O,D]=j.useState({});j.useEffect(()=>{(async()=>{N(!0);try{const q=v&&v!=="all"?`/api/backlog/strategic-directives/${v}`:"/api/backlog/strategic-directives-with-items",C=await(await fetch(q)).json();if(v&&v!=="all")T(C.backlog_items||[]),D({[C.sd_id]:{sd:C,items:C.backlog_items||[]}});else{const A={};C.forEach(z=>{A[z.sd_id]={sd:z,items:z.backlog_items||[]}}),D(A);const b=C.flatMap(z=>z.backlog_items||[]);T(b)}}catch(q){console.error("Error loading backlog:",q)}finally{N(!1)}})()},[v]);const M=Object.entries(O).reduce((L,[q,F])=>{let C=F.items;if(h){const A=h.toLowerCase();C=C.filter(b=>{var z,Y,_,le;return((z=b.backlog_title)==null?void 0:z.toLowerCase().includes(A))||((Y=b.item_description)==null?void 0:Y.toLowerCase().includes(A))||((_=b.backlog_id)==null?void 0:_.toLowerCase().includes(A))||((le=b.my_comments)==null?void 0:le.toLowerCase().includes(A))})}return f!=="all"&&(C=C.filter(A=>{var b;return((b=A.priority)==null?void 0:b.toLowerCase())===f.toLowerCase()})),p==="yes"?C=C.filter(A=>A.new_module===!0):p==="no"&&(C=C.filter(A=>A.new_module===!1)),C.length>0&&(L[q]={...F,items:C}),L},{}),K=L=>{if(!L)return null;const q=L.toLowerCase(),F={high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:xr},h:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:xr},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Fr},m:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Fr},low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Fr},l:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Fr},future:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-300",icon:on}},C=F[q]||F.low,A=C.icon;return o.jsxs("span",{className:`inline-flex items-center ${n?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${C.bg} ${C.text}`,children:[o.jsx(A,{className:"w-3 h-3 mr-1"}),L]})},he=L=>{d(q=>({...q,[L]:!q[L]}))};if(E)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading backlog..."})});const $=Object.values(M).reduce((L,q)=>L+q.items.length,0);return o.jsxs("div",{className:n?"p-3":"p-6",children:[o.jsxs("div",{className:n?"mb-3":"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(so,{className:n?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),o.jsx("h1",{className:n?"text-xl font-semibold":"text-2xl font-bold",children:"Backlog Management"}),o.jsxs("span",{className:`ml-3 ${n?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[$," items"]})]}),o.jsx(bo,{onRefresh:r,isCompact:n})]}),o.jsxs("div",{className:`flex flex-wrap gap-2 ${n?"mb-3":"mb-4"}`,children:[o.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[o.jsx(Cm,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"w-4 h-4":"w-5 h-5"} text-gray-400`}),o.jsx("input",{type:"text",value:h,onChange:L=>m(L.target.value),placeholder:"Search backlog items...",className:`w-full ${n?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),o.jsxs("select",{value:v,onChange:L=>k(L.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Strategic Directives"}),Object.values(O).map(({sd:L})=>o.jsx("option",{value:L.sd_id,children:L.sd_title},L.sd_id))]}),o.jsxs("select",{value:f,onChange:L=>g(L.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"}),o.jsx("option",{value:"future",children:"Future"})]}),o.jsxs("select",{value:p,onChange:L=>S(L.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Items"}),o.jsx("option",{value:"yes",children:"New Module"}),o.jsx("option",{value:"no",children:"Existing Module"})]}),o.jsxs("button",{onClick:()=>i("/backlog/new"),className:`flex items-center ${n?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[o.jsx(lk,{className:`${n?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Backlog Item"]})]})]}),o.jsx("div",{className:"space-y-4",children:Object.entries(M).map(([L,{sd:q,items:F}])=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:`${n?"p-3":"p-4"} border-b border-gray-200 dark:border-gray-700`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:`${n?"text-base":"text-lg"} font-semibold text-gray-900 dark:text-white`,children:q.sd_title}),o.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:q.sd_id}),q.rolled_triage&&o.jsxs("span",{className:`text-xs px-2 py-1 rounded ${q.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":q.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":q.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:["Triage: ",q.rolled_triage]}),q.must_have_pct!==null&&o.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:[q.must_have_pct,"% Must-Have"]}),o.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:[F.length," items"]})]})]}),o.jsx("button",{onClick:()=>i(`/strategic-directives/${q.sd_id}`),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:o.jsx(xt,{className:n?"w-4 h-4":"w-5 h-5"})})]})}),o.jsx("div",{className:n?"p-2":"p-3",children:F.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No backlog items found"}):o.jsx("div",{className:"space-y-2",children:F.map(C=>o.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:o.jsxs("div",{className:`${n?"p-2":"p-3"} cursor-pointer`,onClick:()=>he(`${L}-${C.backlog_id}`),children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start flex-1",children:[o.jsx("div",{className:"mr-2 mt-1",children:u[`${L}-${C.backlog_id}`]?o.jsx(Dn,{className:"w-4 h-4 text-gray-400"}):o.jsx(Wt,{className:"w-4 h-4 text-gray-400"})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"font-mono text-xs text-gray-500 dark:text-gray-400",children:C.backlog_id}),o.jsx("span",{className:`${n?"text-sm":"text-base"} font-medium text-gray-900 dark:text-white`,children:C.backlog_title}),C.new_module&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:"New Module"})]})})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[K(C.priority),C.stage_number&&o.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded",children:["Stage ",C.stage_number]})]})]}),u[`${L}-${C.backlog_id}`]&&o.jsxs("div",{className:`mt-3 ${n?"pl-5":"pl-6"} space-y-2`,children:[C.item_description&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.item_description})]}),C.my_comments&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Comments"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.my_comments})]}),C.phase&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Phase"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.phase})]}),C.description_raw&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tags"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.description_raw})]})]})]})},`${L}-${C.backlog_id}`))})})]},L))}),Object.keys(M).length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(so,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No backlog items found matching your filters"})]})]})}function BD({metrics:e,activeCount:t,totalReviews:n}){const r=[{title:"Active Reviews",value:t,icon:no,color:"blue",trend:null},{title:"Pass Rate",value:`${e.passRate}%`,icon:ze,color:"green",trend:e.passRate>85?"up":"down",trendValue:e.passRate>85?"Good":"Needs Improvement"},{title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,icon:on,color:"purple",trend:e.avgTime<5e3?"up":"down",trendValue:e.avgTime<5e3?"Fast":"Slow"},{title:"False Positive Rate",value:`${e.falsePositiveRate}%`,icon:Ot,color:e.falsePositiveRate>15?"yellow":"green",trend:e.falsePositiveRate<15?"up":"down",trendValue:e.falsePositiveRate<15?"On Target":"High"},{title:"Compliance Rate",value:`${e.complianceRate}%`,icon:io,color:e.complianceRate>=95?"green":"yellow",trend:e.complianceRate>=95?"up":"down",trendValue:`${n} total reviews`}],s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:r.map((i,a)=>{const l=i.icon,c={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400"};return o.jsxs(ee.div,{variants:s,initial:"hidden",animate:"visible",transition:{delay:a*.05},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:`p-2 rounded-lg ${c[i.color]}`,children:o.jsx(l,{className:"w-5 h-5"})}),i.trend&&o.jsx("div",{className:"flex items-center space-x-1",children:i.trend==="up"?o.jsx(xr,{className:"w-4 h-4 text-green-500"}):o.jsx(Fr,{className:"w-4 h-4 text-red-500"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.value}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.title}),i.trendValue&&o.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:i.trendValue})]})]},i.title)})})}function HD({reviews:e,loading:t}){if(t)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return o.jsxs("div",{className:"text-center py-12",children:[o.jsx(_m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Active Reviews"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All PR reviews have been completed or there are no PRs to review."})]});const n=a=>{switch(a){case"pending":return o.jsx(on,{className:"w-5 h-5 text-yellow-500"});case"passed":return o.jsx(ze,{className:"w-5 h-5 text-green-500"});case"failed":return o.jsx(Yn,{className:"w-5 h-5 text-red-500"});case"warning":return o.jsx(Ot,{className:"w-5 h-5 text-orange-500"});default:return o.jsx(on,{className:"w-5 h-5 text-gray-500"})}},r=a=>{const c={security:io,performance:Ns,database:Nm,testing:tT}[a]||xt;return o.jsx(c,{className:"w-4 h-4"})},s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}};return o.jsx(ee.div,{variants:s,initial:"hidden",animate:"visible",className:"space-y-4",children:e.map((a,l)=>o.jsxs(ee.div,{variants:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[n(a.status),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["PR #",a.pr_number,": ",a.pr_title]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(sk,{className:"w-3 h-3"}),o.jsx("span",{children:a.branch})]}),o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(Tm,{className:"w-3 h-3"}),o.jsx("span",{children:a.author})]}),a.sd_link&&o.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["SD: ",a.sd_link]}),a.prd_link&&o.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["PRD: ",a.prd_link]})]})]})]}),o.jsx("a",{href:a.github_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"View on GitHub",children:o.jsx(tc,{className:"w-5 h-5"})})]}),a.sub_agent_reviews&&a.sub_agent_reviews.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:a.sub_agent_reviews.map(c=>o.jsxs("div",{className:`
                      flex items-center space-x-2 px-3 py-2 rounded-md text-sm
                      ${c.status==="passed"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":c.status==="failed"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}
                    `,children:[r(c.sub_agent),o.jsx("span",{className:"capitalize",children:c.sub_agent})]},c.sub_agent))})]}),a.summary&&o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.summary})}),a.issues&&a.issues.length>0&&o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-md p-3",children:[o.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:["Issues Found (",a.issues.length,")"]}),o.jsxs("ul",{className:"space-y-1",children:[a.issues.slice(0,3).map((c,u)=>o.jsxs("li",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["• ",c]},u)),a.issues.length>3&&o.jsxs("li",{className:"text-sm text-yellow-600 dark:text-yellow-500 italic",children:["... and ",a.issues.length-3," more"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{children:["Started: ",new Date(a.created_at).toLocaleTimeString()]}),a.review_time_ms&&o.jsxs("span",{children:["Duration: ",(a.review_time_ms/1e3).toFixed(1),"s"]})]}),a.status==="pending"&&o.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-600 dark:text-yellow-400",children:[o.jsx(on,{className:"w-3 h-3 animate-pulse"}),o.jsx("span",{children:"In Progress"})]})]})]},a.id))})}function WD({reviews:e,loading:t}){const[n,r]=j.useState(new Set);if(t)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return o.jsxs("div",{className:"text-center py-12",children:[o.jsx(xt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Review History"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Review history will appear here once PR reviews are completed."})]});const s=c=>{const u=new Set(n);u.has(c)?u.delete(c):u.add(c),r(u)},i=c=>{const u={passed:{icon:ze,color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",label:"Passed"},failed:{icon:Yn,color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",label:"Failed"},warning:{icon:Ot,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",label:"Warning"}},d=u[c]||u.warning,h=d.icon;return o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:[o.jsx(h,{className:"w-3 h-3 mr-1"}),d.label]})},a=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=c=>{if(!c)return"N/A";const u=c/1e3;if(u<60)return`${u.toFixed(1)}s`;const d=Math.floor(u/60),h=(u%60).toFixed(0);return`${d}m ${h}s`};return o.jsx("div",{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-md rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"PR Details"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Author"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Issues"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Links"}),o.jsx("th",{className:"relative px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(c=>{var d,h;const u=n.has(c.id);return o.jsxs(co.Fragment,{children:[o.jsxs(ee.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["PR #",c.pr_number]}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:c.pr_title}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[o.jsx(sk,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.branch})]})]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Tm,{className:"w-4 h-4 text-gray-400 mr-2"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:c.author})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i(c.status)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((d=c.issues)==null?void 0:d.length)||0})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(on,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{children:l(c.review_time_ms)})]}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[o.jsx(Zw,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a(c.created_at)})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[c.github_url&&o.jsx("a",{href:c.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"View on GitHub",children:o.jsx(tc,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[c.sd_link&&o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"SD"}),c.prd_link&&o.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"PRD"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>s(c.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:u?o.jsx(ek,{className:"w-5 h-5"}):o.jsx(Dn,{className:"w-5 h-5"})})})]}),u&&o.jsx("tr",{className:"bg-gray-50 dark:bg-gray-900",children:o.jsx("td",{colSpan:"7",className:"px-6 py-4",children:o.jsxs("div",{className:"space-y-4",children:[c.summary&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Review Summary"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.summary})]}),c.sub_agent_reviews&&c.sub_agent_reviews.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:c.sub_agent_reviews.map(m=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[o.jsx("span",{className:"text-sm capitalize text-gray-700 dark:text-gray-300",children:m.sub_agent}),i(m.status)]},m.sub_agent))})]}),c.issues&&c.issues.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Issues Found"}),o.jsx("ul",{className:"space-y-1",children:c.issues.map((m,f)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:["• ",m]},f))})]}),c.metadata&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commit"}),o.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:((h=c.commit_sha)==null?void 0:h.substring(0,7))||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.leo_phase||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"False Positive"}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.is_false_positive?"Yes":"No"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Review ID"}),o.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:c.id.substring(0,8)})]})]})]})})})]},c.id)})})]})})}function qD({metrics:e,reviews:t}){const[n,r]=j.useState("7d"),[s,i]=j.useState("overview"),a=j.useMemo(()=>{if(!t||t.length===0)return null;const c=new Date,u={"24h":24*60*60*1e3,"7d":7*24*60*60*1e3,"30d":30*24*60*60*1e3},d=c-u[n],h=t.filter(g=>new Date(g.created_at)>=d),m={};h.forEach(g=>{const v=new Date(g.created_at).toLocaleDateString();m[v]||(m[v]={total:0,passed:0,failed:0,warnings:0}),m[v].total++,g.status==="passed"?m[v].passed++:g.status==="failed"?m[v].failed++:g.status==="warning"&&m[v].warnings++});const f={};return h.forEach(g=>{g.sub_agent_reviews&&g.sub_agent_reviews.forEach(v=>{f[v.sub_agent]||(f[v.sub_agent]={total:0,passed:0,failed:0,avgTime:[]}),f[v.sub_agent].total++,v.status==="passed"?f[v.sub_agent].passed++:f[v.sub_agent].failed++,v.review_time_ms&&f[v.sub_agent].avgTime.push(v.review_time_ms)})}),Object.keys(f).forEach(g=>{const v=f[g];v.passRate=(v.passed/v.total*100).toFixed(1),v.avgTime.length>0&&(v.avgTimeMs=v.avgTime.reduce((k,x)=>k+x,0)/v.avgTime.length)}),{dailyData:Object.entries(m).slice(-7),subAgentStats:f,totalReviews:h.length,passRate:h.length>0?(h.filter(g=>g.status==="passed").length/h.length*100).toFixed(1):0}},[t,n]),l=[{id:"compliance",title:"Compliance Rate",value:`${e.complianceRate}%`,target:"95%",status:e.complianceRate>=95?"good":"warning",description:"SD/PRD linkage compliance"},{id:"false-positive",title:"False Positive Rate",value:`${e.falsePositiveRate}%`,target:"<15%",status:e.falsePositiveRate<=15?"good":"warning",description:"Reviews marked as false positives"},{id:"avg-time",title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,target:"<5s",status:e.avgTime<5e3?"good":"warning",description:"Average time per review"},{id:"coverage",title:"Coverage",value:`${(a==null?void 0:a.totalReviews)||0}`,target:"PRs",status:"neutral",description:`Reviews in ${n}`}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Metrics"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("select",{value:n,onChange:c=>r(c.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[o.jsx("option",{value:"24h",children:"Last 24 Hours"}),o.jsx("option",{value:"7d",children:"Last 7 Days"}),o.jsx("option",{value:"30d",children:"Last 30 Days"})]}),o.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Export Metrics",children:o.jsx(zP,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(c=>o.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.title}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.value})]}),o.jsx("div",{className:`
                p-2 rounded-lg
                ${c.status==="good"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":c.status==="warning"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}
              `,children:c.status==="good"?o.jsx(xr,{className:"w-4 h-4"}):c.status==="warning"?o.jsx(Fr,{className:"w-4 h-4"}):o.jsx(no,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Target: ",c.target]}),o.jsx("span",{className:"text-gray-400 dark:text-gray-500",title:c.description,children:o.jsx(vn,{className:"w-3 h-3"})})]})]},c.id))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[o.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(FP,{className:"w-5 h-5 mr-2"}),"Daily Review Trend"]}),a!=null&&a.dailyData&&a.dailyData.length>0?o.jsxs("div",{className:"space-y-3",children:[a.dailyData.map(([c,u])=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),o.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[o.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 overflow-hidden",children:o.jsxs("div",{className:"h-full flex",children:[o.jsx("div",{className:"bg-green-500 transition-all duration-300",style:{width:`${u.passed/u.total*100}%`}}),o.jsx("div",{className:"bg-red-500 transition-all duration-300",style:{width:`${u.failed/u.total*100}%`}}),o.jsx("div",{className:"bg-yellow-500 transition-all duration-300",style:{width:`${u.warnings/u.total*100}%`}})]})}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 w-10",children:u.total})]})]},c)),o.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Passed"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Failed"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Warnings"})]})]})]}):o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available for selected period"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[o.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(QP,{className:"w-5 h-5 mr-2"}),"Sub-Agent Performance"]}),a!=null&&a.subAgentStats&&Object.keys(a.subAgentStats).length>0?o.jsx("div",{className:"space-y-3",children:Object.entries(a.subAgentStats).map(([c,u])=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:c}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[u.total," reviews"]}),o.jsxs("span",{className:`font-medium ${parseFloat(u.passRate)>=85?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:[u.passRate,"% pass"]})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${parseFloat(u.passRate)>=85?"bg-green-500":"bg-yellow-500"}`,style:{width:`${u.passRate}%`}})}),u.avgTimeMs&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg time: ",(u.avgTimeMs/1e3).toFixed(1),"s"]})]},c))}):o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No sub-agent data available"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"System Health Summary"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),o.jsx("p",{className:`text-lg font-semibold ${e.falsePositiveRate<=15&&e.complianceRate>=95?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:e.falsePositiveRate<=15&&e.complianceRate>=95?"Healthy":"Needs Attention"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Reviews"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.totalToday})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pass Rate Trend"}),o.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(a==null?void 0:a.passRate)||e.passRate,"%",(a==null?void 0:a.passRate)>e.passRate?o.jsx(xr,{className:"w-4 h-4 ml-2 text-green-500"}):o.jsx(Fr,{className:"w-4 h-4 ml-2 text-red-500"})]})]})]})]})]})}function GD({state:e,isConnected:t,refreshData:n}){const[r,s]=j.useState([]),[i,a]=j.useState({totalToday:0,passRate:0,avgTime:0,falsePositiveRate:0,complianceRate:0}),[l,c]=j.useState(!0),[u,d]=j.useState("active"),[h,m]=j.useState("all");j.useEffect(()=>{f(),g()},[]),j.useEffect(()=>{e!=null&&e.prReviews&&(e.prReviews.reviews&&s(e.prReviews.reviews),e.prReviews.metrics&&a(e.prReviews.metrics))},[e==null?void 0:e.prReviews]);const f=async()=>{try{const S=await(await fetch("/api/pr-reviews")).json();s(S||[])}catch(p){console.error("Failed to load PR reviews:",p)}finally{c(!1)}},g=async()=>{try{const S=await(await fetch("/api/pr-reviews/metrics")).json();a(S)}catch(p){console.error("Failed to load metrics:",p)}},v=async()=>{c(!0),await Promise.all([f(),g()]),c(!1)},k=r.filter(p=>p.status==="pending");r.filter(p=>p.status!=="pending");const x=h==="all"?r:r.filter(p=>p.status===h),y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(_m,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"PR Reviews"}),t&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300",children:"Live"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:v,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Refresh",children:o.jsx(Ts,{className:`w-5 h-5 ${l?"animate-spin":""}`})}),o.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Settings",children:o.jsx(ZP,{className:"w-5 h-5"})})]})]}),o.jsx(BD,{metrics:i,activeCount:k.length,totalReviews:r.length}),o.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:o.jsx("nav",{className:"-mb-px flex space-x-8",children:["active","history","metrics"].map(p=>o.jsxs("button",{onClick:()=>d(p),className:`
                py-2 px-1 border-b-2 font-medium text-sm capitalize
                ${u===p?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
              `,children:[p==="active"&&`Active (${k.length})`,p==="history"&&"Review History",p==="metrics"&&"Metrics & Trends"]},p))})}),o.jsxs(ee.div,{variants:y,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:[u==="active"&&o.jsx(HD,{reviews:k,loading:l}),u==="history"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filter:"}),o.jsxs("select",{value:h,onChange:p=>m(p.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[o.jsx("option",{value:"all",children:"All Reviews"}),o.jsx("option",{value:"passed",children:"Passed"}),o.jsx("option",{value:"failed",children:"Failed"}),o.jsx("option",{value:"warning",children:"Warnings"})]}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",x.length," reviews"]})]}),o.jsx(WD,{reviews:x.filter(p=>p.status!=="pending"),loading:l})]}),u==="metrics"&&o.jsx(qD,{metrics:i,reviews:r})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(no,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.totalToday," reviews today"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ze,{className:"w-4 h-4 text-green-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.passRate,"% pass rate"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(on,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[(i.avgTime/1e3).toFixed(1),"s avg time"]})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:i.falsePositiveRate>15?o.jsxs("span",{className:"flex items-center space-x-1 text-sm text-yellow-600 dark:text-yellow-400",children:[o.jsx(Ot,{className:"w-4 h-4"}),o.jsx("span",{children:"High false positive rate"})]}):o.jsxs("span",{className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400",children:[o.jsx(ze,{className:"w-4 h-4"}),o.jsx("span",{children:"System healthy"})]})})]})]})}const y1=({variant:e="text",width:t="100%",height:n="auto",className:r="",count:s=1,isCompact:i=!1})=>{const l={pulse:{opacity:Ac()?1:[.3,.6,.3],transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}},c=()=>{if(n!=="auto")return n;switch(e){case"title":return i?"24px":"32px";case"text":return i?"16px":"20px";case"button":return i?"32px":"40px";case"card":return i?"120px":"200px";case"avatar":return i?"32px":"48px";case"thumbnail":return"150px";default:return"20px"}},u=()=>{if(t!=="100%")return t;switch(e){case"title":return"60%";case"button":return"120px";case"avatar":return i?"32px":"48px";case"thumbnail":return"150px";default:return"100%"}},d=`bg-gray-200 dark:bg-gray-700 rounded ${e==="avatar"?"rounded-full":"rounded-md"}`,h=()=>o.jsx(ee.div,{className:`${d} ${r}`,style:{width:u(),height:c()},animate:"pulse",variants:l});return s>1?o.jsx("div",{className:"space-y-2",children:Array.from({length:s}).map((m,f)=>o.jsx("div",{children:h()},f))}):h()};function Jx({strategicDirectives:e=[],prds:t=[],isCompact:n=!1}){const{sdKey:r}=po(),s=br(),[i,a]=j.useState([]),[l,c]=j.useState({}),[u,d]=j.useState(null),[h,m]=j.useState([]),[f,g]=j.useState(null),[v,k]=j.useState(""),[x,y]=j.useState(r||"all"),[p,S]=j.useState({status:"all",priority:"all",prd:"all"}),[E,N]=j.useState(!0),[P,T]=j.useState(null),O={"SD-GOV-001":"SD-GOVERNANCE-001","SD-MON-001":"SD-MONITORING-001","SD-PIPE-001":"SD-PIPELINE-001","SD-VIS-001":"SD-VISION-001","SD-WSJF-001":"SD-WSJF-001","SD-2025-09-EMB":"SD-2025-09-EMB","SD-2025-PILOT-001":"SD-2025-PILOT-001","SD-PILOT-001":"SD-PILOT-001","SD-RABBIT-001":"SD-RABBIT-001"},D=Object.entries(O).reduce((C,[A,b])=>(C[b]=A,C),{});j.useEffect(()=>{K()},[r,p,v,x]),j.useEffect(()=>{r||M()},[r]),j.useEffect(()=>{if(r&&r!==x&&y(r),r){L();const C=e.find(A=>A.id===r||A.sd_key===r)||h.find(A=>A.sd_key===r)||{id:r,sd_key:r,title:`Strategic Directive ${r}`};d(C)}},[r,e,h,x]);async function M(){try{const C=[],A=new Set;if(e&&e.length>0)for(const b of e){const z=b.sd_key||b.sdKey||b.id,Y=b.title||`Strategic Directive ${z}`,_=[z],le=D[z];le&&le!==z&&_.push(le);for(const xe of _)if(!A.has(xe)){A.add(xe);try{const fe=await fetch(`/api/stories?sd_key=${xe}&limit=1`),Ce=await fe.json();if(fe.ok&&Ce.stories&&Ce.stories.length>0){C.some(vt=>vt.sd_key===z)||C.push({sd_key:z,story_key:xe,title:Y,story_count:Ce.total||Ce.stories.length});break}}catch{continue}}}else{const b=Object.keys(O);for(const z of b)if(!A.has(z)){A.add(z);try{const Y=await fetch(`/api/stories?sd_key=${z}&limit=1`),_=await Y.json();if(Y.ok&&_.stories&&_.stories.length>0){const le=O[z]||z,xe=e.find(Ce=>Ce.sd_key===le||Ce.sdKey===le||Ce.id===le),fe=(xe==null?void 0:xe.title)||`Strategic Directive ${le}`;C.push({sd_key:le,story_key:z,title:fe,story_count:_.total||_.stories.length})}}catch{continue}}}return m(C),C}catch(C){return console.error("Failed to load available SDs:",C),[]}}async function K(){N(!0);try{let C=[];if((x==="all"||!x)&&!r){let z=h;z.length===0&&(z=await M());for(const Y of z)try{const _=Y.story_key||Y.sd_key,le=new URLSearchParams({sd_key:_,limit:100,offset:0});p.status!=="all"&&le.append("status",p.status);const xe=await fetch(`/api/stories?${le}`),fe=await xe.json();if(xe.ok&&fe.stories){const Ce=fe.stories.map(vt=>({...vt,sd_key:Y.sd_key,sd_title:Y.title}));C.push(...Ce)}}catch(_){console.warn(`Failed to load stories for ${Y.sd_key}:`,_)}}else{const z=r||x,Y=new URLSearchParams({sd_key:z,limit:100,offset:0});p.status!=="all"&&Y.append("status",p.status);const _=await fetch(`/api/stories?${Y}`),le=await _.json();if(!_.ok)throw new Error(le.error||"Failed to load stories");C=le.stories||[]}let A=he(C);a(A);const b={};A.forEach(z=>{const Y=z.parent_id||"unassigned";b[Y]||(b[Y]={prd:t.find(_=>_.id===Y),stories:[]}),b[Y].stories.push(z)}),c(b)}catch(C){console.error("Failed to load stories:",C),T({type:"error",message:`Failed to load stories: ${C.message}`})}finally{N(!1)}}function he(C){let A=[...C];if(v){const b=v.toLowerCase();A=A.filter(z=>{var Y,_,le,xe,fe;return((Y=z.story_key)==null?void 0:Y.toLowerCase().includes(b))||((_=z.title)==null?void 0:_.toLowerCase().includes(b))||((le=z.description)==null?void 0:le.toLowerCase().includes(b))||((xe=z.acceptance_criteria)==null?void 0:xe.toLowerCase().includes(b))||((fe=z.user_story)==null?void 0:fe.toLowerCase().includes(b))})}return p.priority!=="all"&&(A=A.filter(b=>{var z;return((z=b.priority)==null?void 0:z.toLowerCase())===p.priority.toLowerCase()})),A}function $(C){y(C),s(C==="all"?"/stories":`/stories/${C}`)}async function L(){try{if(!r)return;const C=await fetch(`/api/stories/gate?sd_key=${r}`),A=await C.json();C.ok?g(A):console.error("Failed to load gate status:",A.error)}catch(C){console.error("Failed to load gate status:",C)}}const q=C=>{switch(C){case"passing":return o.jsx(ze,{className:"w-4 h-4 text-green-500"});case"failing":return o.jsx(Yn,{className:"w-4 h-4 text-red-500"});case"not_run":default:return o.jsx(on,{className:"w-4 h-4 text-gray-400"})}},F=C=>{const A={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"};return o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A[C]||"bg-gray-100 text-gray-800"}`,children:C})};return E?o.jsx(y1,{count:5}):o.jsxs("div",{className:n?"p-3":"p-6",children:[o.jsxs("div",{className:n?"mb-3":"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(vl,{className:n?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),o.jsx("h1",{className:n?"text-xl font-semibold":"text-2xl font-bold",children:"User Stories"}),o.jsxs("span",{className:`ml-3 ${n?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[i.length," ",x==="all"||!x?"total stories":"stories"]}),u&&x!=="all"&&o.jsxs("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:["• ",u.title]}),(x==="all"||!x)&&!r&&h.length>0&&o.jsxs("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:["• Across ",h.length," Strategic Directives"]})]}),o.jsx(bo,{onRefresh:K,isCompact:n})]}),o.jsxs("div",{className:`flex flex-wrap gap-2 ${n?"mb-3":"mb-4"}`,children:[o.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[o.jsx(Cm,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"w-4 h-4":"w-5 h-5"} text-gray-400`}),o.jsx("input",{type:"text",value:v,onChange:C=>k(C.target.value),placeholder:"Search user stories...",className:`w-full ${n?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),o.jsxs("select",{value:x,onChange:C=>$(C.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Strategic Directives"}),h.map(C=>o.jsx("option",{value:C.sd_key,children:C.title},C.sd_key))]}),o.jsxs("select",{value:p.priority,onChange:C=>S({...p,priority:C.target.value}),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"})]}),o.jsxs("select",{value:p.status,onChange:C=>S({...p,status:C.target.value}),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"passing",children:"Passing"}),o.jsx("option",{value:"failing",children:"Failing"}),o.jsx("option",{value:"not_run",children:"Not Run"})]}),Object.keys(l).length>1&&o.jsxs("select",{value:p.prd,onChange:C=>S({...p,prd:C.target.value}),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All PRDs"}),Object.entries(l).map(([C,A])=>o.jsx("option",{value:C,children:A.prd?A.prd.title:"Unassigned Stories"},C))]})]}),o.jsxs("div",{className:`bg-gradient-to-r from-primary-50 to-purple-50 dark:from-primary-900/20 dark:to-purple-900/20
                        rounded-lg p-4 mb-4 border border-primary-200 dark:border-primary-700`,children:[o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(xt,{className:"w-4 h-4 mr-2 text-primary-600"}),o.jsx("span",{className:"font-medium",children:"Strategic Directive"})]}),o.jsx(ro,{className:"w-4 h-4 mx-3 text-gray-400"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(D0,{className:"w-4 h-4 mr-2 text-purple-600"}),o.jsx("span",{className:"font-medium",children:"PRDs"})]}),o.jsx(ro,{className:"w-4 h-4 mx-3 text-gray-400"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(vl,{className:"w-4 h-4 mr-2 text-green-600"}),o.jsx("span",{className:"font-medium",children:"User Stories"})]})]}),f&&o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(ze,{className:"w-4 h-4 mr-1 text-green-500"}),f.passing_count," passing"]}),o.jsxs("span",{className:"flex items-center",children:[o.jsx(Yn,{className:"w-4 h-4 mr-1 text-red-500"}),f.failing_count," failing"]}),o.jsxs("span",{className:"flex items-center",children:[o.jsx(on,{className:"w-4 h-4 mr-1 text-gray-400"}),f.not_run_count," not run"]})]}),o.jsx("div",{className:"flex items-center",children:f.ready?o.jsxs("span",{className:"flex items-center text-green-600 font-medium",children:[o.jsx(ze,{className:"w-5 h-5 mr-2"}),"Release Ready (",Math.round(f.passing_count/f.total_stories*100),"%)"]}):o.jsxs("span",{className:"flex items-center text-yellow-600 font-medium",children:[o.jsx(Ot,{className:"w-5 h-5 mr-2"}),"Needs ",Math.ceil(f.total_stories*.8)-f.passing_count," more passing stories"]})})]})]})]}),Object.keys(l).length>0?o.jsx("div",{className:"space-y-6",children:Object.entries(l).filter(([C])=>p.prd==="all"||p.prd===C).map(([C,A])=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(D0,{className:"w-5 h-5 mr-2 text-purple-500"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:A.prd?o.jsx($n,{to:`/prds/${A.prd.id}`,className:"hover:text-primary-500 transition-colors",children:A.prd.title}):"Unassigned Stories"})]}),o.jsxs("span",{className:"text-sm text-gray-500",children:[A.stories.length," stories"]})]}),A.prd&&o.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[o.jsxs("span",{children:["Priority: ",A.prd.priority]}),o.jsxs("span",{children:["Status: ",A.prd.status]}),o.jsxs($n,{to:`/prds/${A.prd.id}`,className:"flex items-center text-primary-500 hover:text-primary-600",children:[o.jsx(ik,{className:"w-3 h-3 mr-1"}),"View PRD"]})]})]}),o.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:A.stories.map((b,z)=>o.jsx($n,{to:`/stories/${r}/${b.story_key}`,className:"block p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[q(b.verification_status),o.jsx("h3",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:b.story_title||b.backlog_title})]}),b.story_description&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:b.story_description}),o.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[o.jsx("span",{className:"text-gray-500",children:b.story_key}),F(b.priority),b.coverage_pct&&o.jsxs("span",{className:"text-gray-500",children:["Coverage: ",b.coverage_pct,"%"]})]})]}),o.jsx(Wt,{className:"w-5 h-5 text-gray-400 ml-4 flex-shrink-0"})]})},b.backlog_id))})]},C))}):!E&&o.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[o.jsx(vl,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No user stories found"}),o.jsx("p",{className:"text-sm text-gray-400",children:x==="all"||!x?"User stories will appear here once PRDs are created and processed":`No stories found for ${(u==null?void 0:u.title)||"this Strategic Directive"}`})]}),P&&o.jsx(Zm,{type:P.type,message:P.message,onClose:()=>T(null)})]})}function KD(){const{sdKey:e,storyKey:t}=po(),n=br(),[r,s]=j.useState(null),[i,a]=j.useState(!0),[l,c]=j.useState(!1),[u,d]=j.useState(null);j.useEffect(()=>{h()},[e,t]);async function h(){try{const{data:v,error:k}=await Ih.from("v_story_verification_status").select("*").eq("sd_key",e).eq("story_key",t).single();if(k)throw k;s(v)}catch(v){console.error("Failed to load story:",v),d({type:"error",message:"Failed to load story details"})}finally{a(!1)}}async function m(){c(!0);try{if((await fetch("/api/stories/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({story_keys:[t],test_run_id:"manual-"+Date.now(),build_id:"manual",status:"not_run"})})).ok)d({type:"success",message:"Verification triggered successfully"}),await h();else throw new Error("Verification request failed")}catch(v){console.error("Failed to trigger verification:",v),d({type:"error",message:"Failed to trigger verification"})}finally{c(!1)}}const f=v=>{if(!v||!v[0])return null;const k=v[0];return k.given||k.when||k.then?o.jsxs("div",{className:"space-y-2 bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[k.given&&o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"GIVEN:"}),o.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:k.given})]}),k.when&&o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:"WHEN:"}),o.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:k.when})]}),k.then&&o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:"THEN:"}),o.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:k.then})]})]}):k.text||k.title?o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[k.title&&o.jsx("h4",{className:"font-semibold mb-2",children:k.title}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.text||k.title})]}):o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No acceptance criteria defined"})},g=v=>{const k={passing:{bg:"bg-green-100 dark:bg-green-900/50",text:"text-green-800 dark:text-green-300",icon:"✅"},failing:{bg:"bg-red-100 dark:bg-red-900/50",text:"text-red-800 dark:text-red-300",icon:"❌"},not_run:{bg:"bg-gray-100 dark:bg-gray-900/50",text:"text-gray-800 dark:text-gray-300",icon:"⏸️"}},x=k[v]||k.not_run;return o.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${x.bg} ${x.text}`,children:[x.icon," ",v]})};return i?o.jsx(y1,{count:3}):r?o.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ae,{onClick:()=>n(`/stories/${e}`),variant:"secondary",className:"flex items-center gap-2",children:"← Back to Stories"}),o.jsxs("h1",{className:"text-2xl font-bold dark:text-white",children:["Story: ",r.story_key]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-2 dark:text-white",children:r.story_title}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[o.jsxs("span",{children:["Priority: ",o.jsx("strong",{children:r.priority||"Medium"})]}),o.jsxs("span",{children:["Sequence: ",o.jsxs("strong",{children:["#",r.sequence_no]})]}),r.parent_id&&o.jsxs("span",{children:["Parent: ",o.jsx("strong",{children:r.parent_id})]})]})]}),o.jsxs("div",{className:"border-t pt-6 dark:border-gray-700",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3 dark:text-white",children:"Acceptance Criteria"}),f(r.acceptance_criteria)]}),o.jsxs("div",{className:"border-t pt-6 dark:border-gray-700",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3 dark:text-white",children:"Verification Status"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),g(r.status)]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Coverage"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${r.coverage_pct||0}%`}})}),o.jsxs("span",{className:"text-sm font-medium dark:text-white",children:[r.coverage_pct||0,"%"]})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Last Run"}),o.jsx("p",{className:"font-medium dark:text-white",children:r.last_run_at?new Date(r.last_run_at).toLocaleString():"Never"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Build ID"}),o.jsx("p",{className:"font-medium dark:text-white",children:r.build_id||"N/A"})]})]})]}),o.jsx("div",{className:"border-t pt-6 flex justify-end gap-3 dark:border-gray-700",children:o.jsx(Ae,{onClick:m,disabled:l,variant:"primary",children:l?"Triggering...":"Trigger Verification"})})]}),u&&o.jsx(Zm,{type:u.type,message:u.message,onClose:()=>d(null)})]}):o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Story not found"}),o.jsx(Ae,{onClick:()=>n(`/stories/${e}`),className:"mt-4",children:"Back to Stories"})]})})}function XD(e,t){let n;return function(...s){const i=()=>{clearTimeout(n),e(...s)};clearTimeout(n),n=setTimeout(i,t)}}const Er={NAVIGATION:"navigation",ACTION:"action",SEARCH:"search",AI_QUERY:"ai_query",SHORTCUT:"shortcut",RECENT:"recent"},JD=({type:e})=>{const t={navigation:"📍",action:"⚡",search:"🔍",ai_query:"🤖",shortcut:"⌨️",recent:"🕐"};return o.jsx("span",{className:"command-icon",children:t[e]||"📄"})},YD=()=>{const[e,t]=j.useState(!1),[n,r]=j.useState(""),[s,i]=j.useState([]),[a,l]=j.useState(!1),[c,u]=j.useState(0),[d,h]=j.useState(null),m=br(),f=j.useRef(null),g=j.useRef(null);j.useEffect(()=>{const p=S=>{(S.metaKey||S.ctrlKey)&&S.key==="k"&&(S.preventDefault(),S.stopPropagation(),t(E=>!E),e||(r(""),i([]),u(0))),S.key==="Escape"&&e&&t(!1)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e]),j.useEffect(()=>{e&&f.current&&f.current.focus()},[e]);const v=j.useCallback(XD(async p=>{if(!p||p.trim().length===0){i(k()),h(null);return}l(!0);try{const S=await fetch("/api/v1/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:p,context:{currentPath:window.location.pathname,source:"command_palette"}})});if(S.ok){const E=await S.json(),N=E.results.map(P=>({...P,type:P.content_type||Er.SEARCH,label:P.title,action:()=>x(P)}));i(N),h(E.searchTime)}else console.error("Search failed:",S.status),i(k())}catch(S){console.error("Search error:",S),i(k())}finally{l(!1)}},300),[]),k=()=>[{type:Er.NAVIGATION,label:"Dashboard",description:"Go to dashboard",content_id:"nav_dashboard",action:()=>m("/")},{type:Er.NAVIGATION,label:"Portfolio",description:"View your portfolio",content_id:"nav_portfolio",action:()=>m("/portfolio")},{type:Er.NAVIGATION,label:"Settings",description:"Application settings",content_id:"nav_settings",action:()=>m("/settings")},{type:Er.ACTION,label:"Clear Cache",description:"Clear application cache",content_id:"cmd_clear_cache",action:async()=>{await fetch("/api/v1/search/cache/clear",{method:"POST"}),console.log("Cache cleared")}},{type:Er.ACTION,label:"Refresh",description:"Refresh current view",content_id:"cmd_refresh",action:()=>window.location.reload()}],x=async p=>{if(console.log("Executing command:",p),n&&fetch("/api/v1/search/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n,selectedResult:p.content_id,shownResults:s.map(S=>({id:S.content_id}))})}).catch(console.error),t(!1),r(""),i([]),p.action)p.action();else switch(p.content_type||p.type){case Er.NAVIGATION:case"navigation":p.target_path&&m(p.target_path);break;case Er.SEARCH:case"search":console.log("Search result selected:",p);break;default:console.log("Unknown command type:",p)}};j.useEffect(()=>{if(!e)return;const p=S=>{switch(S.key){case"ArrowDown":S.preventDefault(),u(E=>E<s.length-1?E+1:0);break;case"ArrowUp":S.preventDefault(),u(E=>E>0?E-1:s.length-1);break;case"Enter":S.preventDefault(),s[c]&&x(s[c]);break;case"Tab":S.preventDefault(),S.shiftKey?u(E=>E>0?E-1:s.length-1):u(E=>E<s.length-1?E+1:0);break}};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e,s,c]),j.useEffect(()=>{if(g.current&&s.length>0){const p=g.current.children[c];p&&p.scrollIntoView({block:"nearest",behavior:"smooth"})}},[c,s]);const y=p=>{const S=p.target.value;r(S),u(0),v(S)};return j.useEffect(()=>{e&&!n&&i(k())},[e,n]),e?o.jsx("div",{className:"command-palette-overlay",onClick:()=>t(!1),children:o.jsxs("div",{className:"command-palette",onClick:p=>p.stopPropagation(),role:"dialog","aria-label":"Command Palette","aria-modal":"true",children:[o.jsxs("div",{className:"command-palette-header",children:[o.jsx("input",{ref:f,type:"text",className:"command-palette-input",value:n,onChange:y,placeholder:"Search commands, navigate, or ask AI...","aria-label":"Command search input","aria-autocomplete":"list","aria-controls":"command-results","aria-activedescendant":`command-${c}`}),d!==null&&o.jsxs("span",{className:"search-time",children:[d,"ms"]})]}),a&&o.jsxs("div",{className:"command-palette-loading",children:[o.jsx("span",{className:"loading-spinner",children:"⏳"}),"Searching..."]}),!a&&s.length>0&&o.jsx("div",{ref:g,className:"command-palette-results",id:"command-results",role:"listbox",children:s.map((p,S)=>o.jsxs("div",{id:`command-${S}`,className:`command-result ${S===c?"selected":""}`,onClick:()=>x(p),onMouseEnter:()=>u(S),role:"option","aria-selected":S===c,children:[o.jsx(JD,{type:p.type}),o.jsxs("div",{className:"command-result-content",children:[o.jsx("div",{className:"command-result-title",children:p.label||p.title}),p.description&&o.jsx("div",{className:"command-result-description",children:p.description})]}),p.score&&o.jsxs("div",{className:"command-result-score",children:[(p.score*100).toFixed(0),"%"]})]},p.content_id||S))}),!a&&s.length===0&&n&&o.jsxs("div",{className:"command-palette-empty",children:['No results found for "',n,'"']}),o.jsxs("div",{className:"command-palette-footer",children:[o.jsxs("span",{className:"command-hint",children:[o.jsx("kbd",{children:"↑↓"})," Navigate"]}),o.jsxs("span",{className:"command-hint",children:[o.jsx("kbd",{children:"Enter"})," Select"]}),o.jsxs("span",{className:"command-hint",children:[o.jsx("kbd",{children:"Esc"})," Close"]}),o.jsxs("span",{className:"command-hint",children:[o.jsx("kbd",{children:"Cmd+K"})," Toggle"]})]})]})}):null},nl=window.location.hostname==="localhost",Cr={log:(...e)=>{nl&&console.log(...e)},error:(...e)=>{console.error(...e)},warn:(...e)=>{nl&&console.warn(...e)},info:(...e)=>{nl&&console.info(...e)},debug:(...e)=>{nl&&console.debug(...e)}};function QD(){var S,E;const[e,t]=j.useState({leoProtocol:{version:"detecting...",activeRole:null,currentSD:null,currentPRD:null,phase:null},context:{usage:0,total:18e4,breakdown:{}},handoffs:[],strategicDirectives:[],prds:[],checklists:{},progress:{overall:0,byPhase:{}}}),[n,r]=j.useState(!1),[s,i]=j.useState(!1),{preferences:a}=s2(),[l,c]=pu("checklists",{}),[u,d]=pu("sidebarCollapsed",!1),[h,m]=pu("compactMode",!1),f=r2("ws://localhost:3000",{onOpen:()=>{r(!0),Cr.log("Connected to dashboard server")},onMessage:N=>{try{const P=JSON.parse(N.data);P.type==="state"?t(P.data):P.type==="sd-reordered"&&(Cr.log("Strategic directives reordered, refreshing..."),g())}catch(P){Cr.error("Error parsing WebSocket message:",P)}},onClose:()=>{r(!1),Cr.log("Disconnected from dashboard server")},onError:N=>{Cr.error("WebSocket error:",N)}});j.useEffect(()=>{fetch("/api/state").then(N=>N.json()).then(N=>{const P={...N,checklists:{...N.checklists,...l}};t(P)}).catch(N=>Cr.error("Error loading state:",N))},[]),j.useEffect(()=>{Object.keys(e.checklists).length>0&&c(e.checklists)},[e.checklists]),j.useEffect(()=>{a.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[a.theme]);const g=()=>{fetch("/api/state").then(N=>N.json()).then(N=>{const P={...N,checklists:{...N.checklists,...l}};t(P),Cr.log("State refreshed successfully")}).catch(N=>Cr.error("Error refreshing state:",N)),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"refresh"}))},v=(N,P,T)=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"updateChecklist",data:{documentId:N,itemIndex:P,checked:T}}))},k=(N,P)=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"requestHandoff",data:{type:N,checklist:P}}))},x=()=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"compactContext"}))},y=N=>{t(P=>({...P,leoProtocol:{...P.leoProtocol,currentSD:N}})),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"setActiveSD",data:{sdId:N}}))},p=(N,P)=>{t(T=>({...T,strategicDirectives:T.strategicDirectives.map(O=>O.id===N?{...O,status:P}:O)})),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"updateSDStatus",data:{sdId:N,status:P}}))};return o.jsxs(JN,{children:[o.jsx(YD,{}),o.jsx(zN,{children:o.jsxs(lt,{path:"/",element:o.jsx(dT,{state:e,isConnected:n,isSidebarCollapsed:u,setIsSidebarCollapsed:d,isCompactMode:h,setIsCompactMode:m,isMobileMenuOpen:s,setIsMobileMenuOpen:i,updateChecklist:v,requestHandoff:k,compactContext:x,refreshData:g,setActiveSD:y}),children:[o.jsx(lt,{index:!0,element:o.jsx(X3,{state:e,onRefresh:g,onSetActiveSD:y,isCompact:h})}),o.jsxs(lt,{path:"strategic-directives",children:[o.jsx(lt,{index:!0,element:o.jsx(Gx,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:y,onUpdateStatus:p,currentSD:(S=e.leoProtocol)==null?void 0:S.currentSD,isCompact:h,onRefresh:g})}),o.jsx(lt,{path:":id",element:o.jsx(Gx,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:y,onUpdateStatus:p,currentSD:(E=e.leoProtocol)==null?void 0:E.currentSD,isCompact:h,detailMode:!0,onRefresh:g})})]}),o.jsxs(lt,{path:"prds",children:[o.jsx(lt,{index:!0,element:o.jsx(Kx,{prds:e.prds,isCompact:h})}),o.jsx(lt,{path:":id",element:o.jsx(Kx,{prds:e.prds,isCompact:h,detailMode:!0})})]}),o.jsxs(lt,{path:"backlog",children:[o.jsx(lt,{index:!0,element:o.jsx(Xx,{strategicDirectives:e.strategicDirectives,isCompact:h,onRefresh:g})}),o.jsx(lt,{path:":id",element:o.jsx(Xx,{strategicDirectives:e.strategicDirectives,isCompact:h,detailMode:!0,onRefresh:g})})]}),o.jsxs(lt,{path:"stories",children:[o.jsx(lt,{index:!0,element:o.jsx(Jx,{strategicDirectives:e.strategicDirectives,prds:e.prds,isCompact:h})}),o.jsx(lt,{path:":sdKey",element:o.jsx(Jx,{strategicDirectives:e.strategicDirectives,prds:e.prds,isCompact:h})}),o.jsx(lt,{path:":sdKey/:storyKey",element:o.jsx(KD,{isCompact:h})})]}),o.jsx(lt,{path:"directive-lab",element:o.jsx(zD,{state:e,onRefresh:g,isCompact:h})}),o.jsx(lt,{path:"pr-reviews",element:o.jsx(GD,{state:e,isConnected:n,refreshData:g})}),o.jsx(lt,{path:"*",element:o.jsx(FN,{to:"/",replace:!0})})]})})]})}class ZD extends co.Component{constructor(n){super(n);Uc(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});Uc(this,"handleHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){window.location.hostname==="localhost"&&console.error("ErrorBoundary caught:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Ot,{className:"w-8 h-8 text-red-500 mr-3"}),o.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Something went wrong"})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We encountered an unexpected error. The application may not work correctly."}),window.location.hostname==="localhost"&&o.jsxs("details",{className:"mb-4",children:[o.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Error details (development only)"}),o.jsxs("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto",children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),o.jsxs("button",{onClick:this.handleHome,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[o.jsx(Em,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}td.createRoot(document.getElementById("root")).render(o.jsx(co.StrictMode,{children:o.jsx(ZD,{children:o.jsx(QD,{})})}));
//# sourceMappingURL=index-UVf0muQr.js.map
