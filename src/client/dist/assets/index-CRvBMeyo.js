var l1=Object.defineProperty;var c1=(e,t,n)=>t in e?l1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Dc=(e,t,n)=>c1(e,typeof t!="symbol"?t+"":t,n);function u1(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function d1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Uy={exports:{}},tc={},By={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io=Symbol.for("react.element"),h1=Symbol.for("react.portal"),f1=Symbol.for("react.fragment"),m1=Symbol.for("react.strict_mode"),p1=Symbol.for("react.profiler"),g1=Symbol.for("react.provider"),y1=Symbol.for("react.context"),x1=Symbol.for("react.forward_ref"),v1=Symbol.for("react.suspense"),w1=Symbol.for("react.memo"),b1=Symbol.for("react.lazy"),Ym=Symbol.iterator;function k1(e){return e===null||typeof e!="object"?null:(e=Ym&&e[Ym]||e["@@iterator"],typeof e=="function"?e:null)}var Hy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wy=Object.assign,qy={};function Ai(e,t,n){this.props=e,this.context=t,this.refs=qy,this.updater=n||Hy}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ai.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gy(){}Gy.prototype=Ai.prototype;function Vh(e,t,n){this.props=e,this.context=t,this.refs=qy,this.updater=n||Hy}var zh=Vh.prototype=new Gy;zh.constructor=Vh;Wy(zh,Ai.prototype);zh.isPureReactComponent=!0;var Jm=Array.isArray,Ky=Object.prototype.hasOwnProperty,Uh={current:null},Xy={key:!0,ref:!0,__self:!0,__source:!0};function Yy(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Ky.call(t,r)&&!Xy.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:io,type:e,key:i,ref:a,props:s,_owner:Uh.current}}function j1(e,t){return{$$typeof:io,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bh(e){return typeof e=="object"&&e!==null&&e.$$typeof===io}function S1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qm=/\/+/g;function Lc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?S1(""+e.key):t.toString(36)}function Jo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case io:case h1:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Lc(a,0):r,Jm(s)?(n="",e!=null&&(n=e.replace(Qm,"$&/")+"/"),Jo(s,t,n,"",function(u){return u})):s!=null&&(Bh(s)&&(s=j1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Qm,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Jm(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Lc(i,l);a+=Jo(i,t,n,c,s)}else if(c=k1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Lc(i,l++),a+=Jo(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ko(e,t,n){if(e==null)return e;var r=[],s=0;return Jo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function N1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Lt={current:null},Qo={transition:null},_1={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:Qo,ReactCurrentOwner:Uh};function Jy(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:ko,forEach:function(e,t,n){ko(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ko(e,function(){t++}),t},toArray:function(e){return ko(e,function(t){return t})||[]},only:function(e){if(!Bh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=Ai;ve.Fragment=f1;ve.Profiler=p1;ve.PureComponent=Vh;ve.StrictMode=m1;ve.Suspense=v1;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_1;ve.act=Jy;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Wy({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Uh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Ky.call(t,c)&&!Xy.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:io,type:e.type,key:s,ref:i,props:r,_owner:a}};ve.createContext=function(e){return e={$$typeof:y1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:g1,_context:e},e.Consumer=e};ve.createElement=Yy;ve.createFactory=function(e){var t=Yy.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:x1,render:e}};ve.isValidElement=Bh;ve.lazy=function(e){return{$$typeof:b1,_payload:{_status:-1,_result:e},_init:N1}};ve.memo=function(e,t){return{$$typeof:w1,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=Qo.transition;Qo.transition={};try{e()}finally{Qo.transition=t}};ve.unstable_act=Jy;ve.useCallback=function(e,t){return Lt.current.useCallback(e,t)};ve.useContext=function(e){return Lt.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return Lt.current.useDeferredValue(e)};ve.useEffect=function(e,t){return Lt.current.useEffect(e,t)};ve.useId=function(){return Lt.current.useId()};ve.useImperativeHandle=function(e,t,n){return Lt.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return Lt.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return Lt.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return Lt.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return Lt.current.useReducer(e,t,n)};ve.useRef=function(e){return Lt.current.useRef(e)};ve.useState=function(e){return Lt.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return Lt.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return Lt.current.useTransition()};ve.version="18.3.1";By.exports=ve;var b=By.exports;const ao=Fh(b),E1=u1({__proto__:null,default:ao},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=b,C1=Symbol.for("react.element"),T1=Symbol.for("react.fragment"),A1=Object.prototype.hasOwnProperty,I1=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R1={key:!0,ref:!0,__self:!0,__source:!0};function Qy(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)A1.call(t,r)&&!R1.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:C1,type:e,key:i,ref:a,props:s,_owner:I1.current}}tc.Fragment=T1;tc.jsx=Qy;tc.jsxs=Qy;Uy.exports=tc;var o=Uy.exports,Ku={},Zy={exports:{}},on={},ex={exports:{}},tx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,U){var k=T.length;T.push(U);e:for(;0<k;){var ee=k-1>>>1,se=T[ee];if(0<s(se,U))T[ee]=U,T[k]=se,k=ee;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var U=T[0],k=T.pop();if(k!==U){T[0]=k;e:for(var ee=0,se=T.length,_=se>>>1;ee<_;){var Se=2*(ee+1)-1,it=T[Se],we=Se+1,Tt=T[we];if(0>s(it,k))we<se&&0>s(Tt,it)?(T[ee]=Tt,T[we]=k,ee=we):(T[ee]=it,T[Se]=k,ee=Se);else if(we<se&&0>s(Tt,k))T[ee]=Tt,T[we]=k,ee=we;else break e}}return U}function s(T,U){var k=T.sortIndex-U.sortIndex;return k!==0?k:T.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=T)r(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(u)}}function S(T){if(v=!1,x(T),!p)if(n(c)!==null)p=!0,W(E);else{var U=n(u);U!==null&&A(S,U.startTime-T)}}function E(T,U){p=!1,v&&(v=!1,y(C),C=-1),m=!0;var k=f;try{for(x(U),h=n(c);h!==null&&(!(h.expirationTime>U)||T&&!V());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,f=h.priorityLevel;var se=ee(h.expirationTime<=U);U=e.unstable_now(),typeof se=="function"?h.callback=se:h===n(c)&&r(c),x(U)}else r(c);h=n(c)}if(h!==null)var _=!0;else{var Se=n(u);Se!==null&&A(S,Se.startTime-U),_=!1}return _}finally{h=null,f=k,m=!1}}var j=!1,P=null,C=-1,O=5,D=-1;function V(){return!(e.unstable_now()-D<O)}function G(){if(P!==null){var T=e.unstable_now();D=T;var U=!0;try{U=P(!0,T)}finally{U?de():(j=!1,P=null)}}else j=!1}var de;if(typeof g=="function")de=function(){g(G)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,$=M.port2;M.port1.onmessage=G,de=function(){$.postMessage(null)}}else de=function(){w(G,0)};function W(T){P=T,j||(j=!0,de())}function A(T,U){C=w(function(){T(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,W(E))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var k=f;f=U;try{return T()}finally{f=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,U){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var k=f;f=T;try{return U()}finally{f=k}},e.unstable_scheduleCallback=function(T,U,k){var ee=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?ee+k:ee):k=ee,T){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=k+se,T={id:d++,callback:U,priorityLevel:T,startTime:k,expirationTime:se,sortIndex:-1},k>ee?(T.sortIndex=k,t(u,T),n(c)===null&&T===n(u)&&(v?(y(C),C=-1):v=!0,A(S,k-ee))):(T.sortIndex=se,t(c,T),p||m||(p=!0,W(E))),T},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(T){var U=f;return function(){var k=f;f=U;try{return T.apply(this,arguments)}finally{f=k}}}})(tx);ex.exports=tx;var D1=ex.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1=b,an=D1;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nx=new Set,Aa={};function Is(e,t){vi(e,t),vi(e+"Capture",t)}function vi(e,t){for(Aa[e]=t,e=0;e<t.length;e++)nx.add(t[e])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xu=Object.prototype.hasOwnProperty,O1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zm={},ep={};function $1(e){return Xu.call(ep,e)?!0:Xu.call(Zm,e)?!1:O1.test(e)?ep[e]=!0:(Zm[e]=!0,!1)}function M1(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function F1(e,t,n,r){if(t===null||typeof t>"u"||M1(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wt[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wt[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wt[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wt[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wt[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wt[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wt[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wt[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wt[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hh=/[\-:]([a-z])/g;function Wh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hh,Wh);wt[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hh,Wh);wt[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hh,Wh);wt[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function qh(e,t,n,r){var s=wt.hasOwnProperty(t)?wt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(F1(t,n,s,r)&&(n=null),r||s===null?$1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gr=L1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),qs=Symbol.for("react.fragment"),Gh=Symbol.for("react.strict_mode"),Yu=Symbol.for("react.profiler"),rx=Symbol.for("react.provider"),sx=Symbol.for("react.context"),Kh=Symbol.for("react.forward_ref"),Ju=Symbol.for("react.suspense"),Qu=Symbol.for("react.suspense_list"),Xh=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),ix=Symbol.for("react.offscreen"),tp=Symbol.iterator;function Wi(e){return e===null||typeof e!="object"?null:(e=tp&&e[tp]||e["@@iterator"],typeof e=="function"?e:null)}var We=Object.assign,Oc;function ia(e){if(Oc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Oc=t&&t[1]||""}return`
`+Oc+e}var $c=!1;function Mc(e,t){if(!e||$c)return"";$c=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{$c=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ia(e):""}function V1(e){switch(e.tag){case 5:return ia(e.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 2:case 15:return e=Mc(e.type,!1),e;case 11:return e=Mc(e.type.render,!1),e;case 1:return e=Mc(e.type,!0),e;default:return""}}function Zu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qs:return"Fragment";case Ws:return"Portal";case Yu:return"Profiler";case Gh:return"StrictMode";case Ju:return"Suspense";case Qu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sx:return(e.displayName||"Context")+".Consumer";case rx:return(e._context.displayName||"Context")+".Provider";case Kh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xh:return t=e.displayName||null,t!==null?t:Zu(e.type)||"Memo";case Pr:t=e._payload,e=e._init;try{return Zu(e(t))}catch{}}return null}function z1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zu(t);case 8:return t===Gh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ax(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function U1(e){var t=ax(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function So(e){e._valueTracker||(e._valueTracker=U1(e))}function ox(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ax(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ed(e,t){var n=t.checked;return We({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function np(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Gr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lx(e,t){t=t.checked,t!=null&&qh(e,"checked",t,!1)}function td(e,t){lx(e,t);var n=Gr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nd(e,t.type,n):t.hasOwnProperty("defaultValue")&&nd(e,t.type,Gr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function nd(e,t,n){(t!=="number"||gl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var aa=Array.isArray;function ci(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Gr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function rd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return We({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(aa(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Gr(n)}}function cx(e,t){var n=Gr(t.value),r=Gr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ip(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ux(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ux(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var No,dx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(No=No||document.createElement("div"),No.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=No.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ia(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},B1=["Webkit","ms","Moz","O"];Object.keys(da).forEach(function(e){B1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),da[t]=da[e]})});function hx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||da.hasOwnProperty(e)&&da[e]?(""+t).trim():t+"px"}function fx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var H1=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function id(e,t){if(t){if(H1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function ad(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var od=null;function Yh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ld=null,ui=null,di=null;function ap(e){if(e=co(e)){if(typeof ld!="function")throw Error(B(280));var t=e.stateNode;t&&(t=ac(t),ld(e.stateNode,e.type,t))}}function mx(e){ui?di?di.push(e):di=[e]:ui=e}function px(){if(ui){var e=ui,t=di;if(di=ui=null,ap(e),t)for(e=0;e<t.length;e++)ap(t[e])}}function gx(e,t){return e(t)}function yx(){}var Fc=!1;function xx(e,t,n){if(Fc)return e(t,n);Fc=!0;try{return gx(e,t,n)}finally{Fc=!1,(ui!==null||di!==null)&&(yx(),px())}}function Ra(e,t){var n=e.stateNode;if(n===null)return null;var r=ac(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var cd=!1;if(cr)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){cd=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{cd=!1}function W1(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var ha=!1,yl=null,xl=!1,ud=null,q1={onError:function(e){ha=!0,yl=e}};function G1(e,t,n,r,s,i,a,l,c){ha=!1,yl=null,W1.apply(q1,arguments)}function K1(e,t,n,r,s,i,a,l,c){if(G1.apply(this,arguments),ha){if(ha){var u=yl;ha=!1,yl=null}else throw Error(B(198));xl||(xl=!0,ud=u)}}function Rs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function op(e){if(Rs(e)!==e)throw Error(B(188))}function X1(e){var t=e.alternate;if(!t){if(t=Rs(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return op(s),e;if(i===r)return op(s),t;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function wx(e){return e=X1(e),e!==null?bx(e):null}function bx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bx(e);if(t!==null)return t;e=e.sibling}return null}var kx=an.unstable_scheduleCallback,lp=an.unstable_cancelCallback,Y1=an.unstable_shouldYield,J1=an.unstable_requestPaint,Je=an.unstable_now,Q1=an.unstable_getCurrentPriorityLevel,Jh=an.unstable_ImmediatePriority,jx=an.unstable_UserBlockingPriority,vl=an.unstable_NormalPriority,Z1=an.unstable_LowPriority,Sx=an.unstable_IdlePriority,nc=null,Hn=null;function ej(e){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(nc,e,void 0,(e.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:rj,tj=Math.log,nj=Math.LN2;function rj(e){return e>>>=0,e===0?32:31-(tj(e)/nj|0)|0}var _o=64,Eo=4194304;function oa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=oa(l):(i&=a,i!==0&&(r=oa(i)))}else a=n&~s,a!==0?r=oa(a):i!==0&&(r=oa(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-An(t),s=1<<n,r|=e[n],t&=~s;return r}function sj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ij(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-An(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=sj(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function dd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nx(){var e=_o;return _o<<=1,!(_o&4194240)&&(_o=64),e}function Vc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function oo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-An(t),e[t]=n}function aj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-An(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Qh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-An(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ee=0;function _x(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ex,Zh,Px,Cx,Tx,hd=!1,Po=[],$r=null,Mr=null,Fr=null,Da=new Map,La=new Map,Tr=[],oj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cp(e,t){switch(e){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(t.pointerId)}}function Gi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=co(t),t!==null&&Zh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function lj(e,t,n,r,s){switch(t){case"focusin":return $r=Gi($r,e,t,n,r,s),!0;case"dragenter":return Mr=Gi(Mr,e,t,n,r,s),!0;case"mouseover":return Fr=Gi(Fr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Da.set(i,Gi(Da.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,La.set(i,Gi(La.get(i)||null,e,t,n,r,s)),!0}return!1}function Ax(e){var t=ys(e.target);if(t!==null){var n=Rs(t);if(n!==null){if(t=n.tag,t===13){if(t=vx(n),t!==null){e.blockedOn=t,Tx(e.priority,function(){Px(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);od=r,n.target.dispatchEvent(r),od=null}else return t=co(n),t!==null&&Zh(t),e.blockedOn=n,!1;t.shift()}return!0}function up(e,t,n){Zo(e)&&n.delete(t)}function cj(){hd=!1,$r!==null&&Zo($r)&&($r=null),Mr!==null&&Zo(Mr)&&(Mr=null),Fr!==null&&Zo(Fr)&&(Fr=null),Da.forEach(up),La.forEach(up)}function Ki(e,t){e.blockedOn===t&&(e.blockedOn=null,hd||(hd=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,cj)))}function Oa(e){function t(s){return Ki(s,e)}if(0<Po.length){Ki(Po[0],e);for(var n=1;n<Po.length;n++){var r=Po[n];r.blockedOn===e&&(r.blockedOn=null)}}for($r!==null&&Ki($r,e),Mr!==null&&Ki(Mr,e),Fr!==null&&Ki(Fr,e),Da.forEach(t),La.forEach(t),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)Ax(n),n.blockedOn===null&&Tr.shift()}var hi=gr.ReactCurrentBatchConfig,bl=!0;function uj(e,t,n,r){var s=Ee,i=hi.transition;hi.transition=null;try{Ee=1,ef(e,t,n,r)}finally{Ee=s,hi.transition=i}}function dj(e,t,n,r){var s=Ee,i=hi.transition;hi.transition=null;try{Ee=4,ef(e,t,n,r)}finally{Ee=s,hi.transition=i}}function ef(e,t,n,r){if(bl){var s=fd(e,t,n,r);if(s===null)Yc(e,t,r,kl,n),cp(e,r);else if(lj(s,e,t,n,r))r.stopPropagation();else if(cp(e,r),t&4&&-1<oj.indexOf(e)){for(;s!==null;){var i=co(s);if(i!==null&&Ex(i),i=fd(e,t,n,r),i===null&&Yc(e,t,r,kl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yc(e,t,r,null,n)}}var kl=null;function fd(e,t,n,r){if(kl=null,e=Yh(r),e=ys(e),e!==null)if(t=Rs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return kl=e,null}function Ix(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q1()){case Jh:return 1;case jx:return 4;case vl:case Z1:return 16;case Sx:return 536870912;default:return 16}default:return 16}}var Rr=null,tf=null,el=null;function Rx(){if(el)return el;var e,t=tf,n=t.length,r,s="value"in Rr?Rr.value:Rr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return el=s.slice(e,1<r?1-r:void 0)}function tl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Co(){return!0}function dp(){return!1}function ln(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Co:dp,this.isPropagationStopped=dp,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),t}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nf=ln(Ii),lo=We({},Ii,{view:0,detail:0}),hj=ln(lo),zc,Uc,Xi,rc=We({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xi&&(Xi&&e.type==="mousemove"?(zc=e.screenX-Xi.screenX,Uc=e.screenY-Xi.screenY):Uc=zc=0,Xi=e),zc)},movementY:function(e){return"movementY"in e?e.movementY:Uc}}),hp=ln(rc),fj=We({},rc,{dataTransfer:0}),mj=ln(fj),pj=We({},lo,{relatedTarget:0}),Bc=ln(pj),gj=We({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),yj=ln(gj),xj=We({},Ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vj=ln(xj),wj=We({},Ii,{data:0}),fp=ln(wj),bj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jj[e])?!!t[e]:!1}function rf(){return Sj}var Nj=We({},lo,{key:function(e){if(e.key){var t=bj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rf,charCode:function(e){return e.type==="keypress"?tl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_j=ln(Nj),Ej=We({},rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=ln(Ej),Pj=We({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rf}),Cj=ln(Pj),Tj=We({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aj=ln(Tj),Ij=We({},rc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rj=ln(Ij),Dj=[9,13,27,32],sf=cr&&"CompositionEvent"in window,fa=null;cr&&"documentMode"in document&&(fa=document.documentMode);var Lj=cr&&"TextEvent"in window&&!fa,Dx=cr&&(!sf||fa&&8<fa&&11>=fa),pp=" ",gp=!1;function Lx(e,t){switch(e){case"keyup":return Dj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ox(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gs=!1;function Oj(e,t){switch(e){case"compositionend":return Ox(t);case"keypress":return t.which!==32?null:(gp=!0,pp);case"textInput":return e=t.data,e===pp&&gp?null:e;default:return null}}function $j(e,t){if(Gs)return e==="compositionend"||!sf&&Lx(e,t)?(e=Rx(),el=tf=Rr=null,Gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dx&&t.locale!=="ko"?null:t.data;default:return null}}var Mj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mj[e.type]:t==="textarea"}function $x(e,t,n,r){mx(r),t=jl(t,"onChange"),0<t.length&&(n=new nf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ma=null,$a=null;function Fj(e){Kx(e,0)}function sc(e){var t=Ys(e);if(ox(t))return e}function Vj(e,t){if(e==="change")return t}var Mx=!1;if(cr){var Hc;if(cr){var Wc="oninput"in document;if(!Wc){var xp=document.createElement("div");xp.setAttribute("oninput","return;"),Wc=typeof xp.oninput=="function"}Hc=Wc}else Hc=!1;Mx=Hc&&(!document.documentMode||9<document.documentMode)}function vp(){ma&&(ma.detachEvent("onpropertychange",Fx),$a=ma=null)}function Fx(e){if(e.propertyName==="value"&&sc($a)){var t=[];$x(t,$a,e,Yh(e)),xx(Fj,t)}}function zj(e,t,n){e==="focusin"?(vp(),ma=t,$a=n,ma.attachEvent("onpropertychange",Fx)):e==="focusout"&&vp()}function Uj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sc($a)}function Bj(e,t){if(e==="click")return sc(t)}function Hj(e,t){if(e==="input"||e==="change")return sc(t)}function Wj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dn=typeof Object.is=="function"?Object.is:Wj;function Ma(e,t){if(Dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Xu.call(t,s)||!Dn(e[s],t[s]))return!1}return!0}function wp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bp(e,t){var n=wp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wp(n)}}function Vx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zx(){for(var e=window,t=gl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gl(e.document)}return t}function af(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qj(e){var t=zx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Vx(n.ownerDocument.documentElement,n)){if(r!==null&&af(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=bp(n,i);var a=bp(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gj=cr&&"documentMode"in document&&11>=document.documentMode,Ks=null,md=null,pa=null,pd=!1;function kp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pd||Ks==null||Ks!==gl(r)||(r=Ks,"selectionStart"in r&&af(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pa&&Ma(pa,r)||(pa=r,r=jl(md,"onSelect"),0<r.length&&(t=new nf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ks)))}function To(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xs={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionend:To("Transition","TransitionEnd")},qc={},Ux={};cr&&(Ux=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function ic(e){if(qc[e])return qc[e];if(!Xs[e])return e;var t=Xs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ux)return qc[e]=t[n];return e}var Bx=ic("animationend"),Hx=ic("animationiteration"),Wx=ic("animationstart"),qx=ic("transitionend"),Gx=new Map,jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(e,t){Gx.set(e,t),Is(t,[e])}for(var Gc=0;Gc<jp.length;Gc++){var Kc=jp[Gc],Kj=Kc.toLowerCase(),Xj=Kc[0].toUpperCase()+Kc.slice(1);Qr(Kj,"on"+Xj)}Qr(Bx,"onAnimationEnd");Qr(Hx,"onAnimationIteration");Qr(Wx,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(qx,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Is("onBeforeInput",["compositionend","keypress","textInput","paste"]);Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yj=new Set("cancel close invalid load scroll toggle".split(" ").concat(la));function Sp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,K1(r,t,void 0,e),e.currentTarget=null}function Kx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Sp(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Sp(s,l,u),i=c}}}if(xl)throw e=ud,xl=!1,ud=null,e}function Le(e,t){var n=t[wd];n===void 0&&(n=t[wd]=new Set);var r=e+"__bubble";n.has(r)||(Xx(t,e,2,!1),n.add(r))}function Xc(e,t,n){var r=0;t&&(r|=4),Xx(n,e,r,t)}var Ao="_reactListening"+Math.random().toString(36).slice(2);function Fa(e){if(!e[Ao]){e[Ao]=!0,nx.forEach(function(n){n!=="selectionchange"&&(Yj.has(n)||Xc(n,!1,e),Xc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ao]||(t[Ao]=!0,Xc("selectionchange",!1,t))}}function Xx(e,t,n,r){switch(Ix(t)){case 1:var s=uj;break;case 4:s=dj;break;default:s=ef}n=s.bind(null,t,n,e),s=void 0,!cd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yc(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ys(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}xx(function(){var u=i,d=Yh(n),h=[];e:{var f=Gx.get(e);if(f!==void 0){var m=nf,p=e;switch(e){case"keypress":if(tl(n)===0)break e;case"keydown":case"keyup":m=_j;break;case"focusin":p="focus",m=Bc;break;case"focusout":p="blur",m=Bc;break;case"beforeblur":case"afterblur":m=Bc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=mj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Cj;break;case Bx:case Hx:case Wx:m=yj;break;case qx:m=Aj;break;case"scroll":m=hj;break;case"wheel":m=Rj;break;case"copy":case"cut":case"paste":m=vj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=mp}var v=(t&4)!==0,w=!v&&e==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,x;g!==null;){x=g;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,y!==null&&(S=Ra(g,y),S!=null&&v.push(Va(g,S,x)))),w)break;g=g.return}0<v.length&&(f=new m(f,p,null,n,d),h.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==od&&(p=n.relatedTarget||n.fromElement)&&(ys(p)||p[ur]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=u,p=p?ys(p):null,p!==null&&(w=Rs(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(v=hp,S="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=mp,S="onPointerLeave",y="onPointerEnter",g="pointer"),w=m==null?f:Ys(m),x=p==null?f:Ys(p),f=new v(S,g+"leave",m,n,d),f.target=w,f.relatedTarget=x,S=null,ys(d)===u&&(v=new v(y,g+"enter",p,n,d),v.target=x,v.relatedTarget=w,S=v),w=S,m&&p)t:{for(v=m,y=p,g=0,x=v;x;x=Os(x))g++;for(x=0,S=y;S;S=Os(S))x++;for(;0<g-x;)v=Os(v),g--;for(;0<x-g;)y=Os(y),x--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=Os(v),y=Os(y)}v=null}else v=null;m!==null&&Np(h,f,m,v,!1),p!==null&&w!==null&&Np(h,w,p,v,!0)}}e:{if(f=u?Ys(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var E=Vj;else if(yp(f))if(Mx)E=Hj;else{E=Uj;var j=zj}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Bj);if(E&&(E=E(e,u))){$x(h,E,n,d);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&nd(f,"number",f.value)}switch(j=u?Ys(u):window,e){case"focusin":(yp(j)||j.contentEditable==="true")&&(Ks=j,md=u,pa=null);break;case"focusout":pa=md=Ks=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,kp(h,n,d);break;case"selectionchange":if(Gj)break;case"keydown":case"keyup":kp(h,n,d)}var P;if(sf)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Gs?Lx(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Dx&&n.locale!=="ko"&&(Gs||C!=="onCompositionStart"?C==="onCompositionEnd"&&Gs&&(P=Rx()):(Rr=d,tf="value"in Rr?Rr.value:Rr.textContent,Gs=!0)),j=jl(u,C),0<j.length&&(C=new fp(C,e,null,n,d),h.push({event:C,listeners:j}),P?C.data=P:(P=Ox(n),P!==null&&(C.data=P)))),(P=Lj?Oj(e,n):$j(e,n))&&(u=jl(u,"onBeforeInput"),0<u.length&&(d=new fp("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=P))}Kx(h,t)})}function Va(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ra(e,n),i!=null&&r.unshift(Va(e,i,s)),i=Ra(e,t),i!=null&&r.push(Va(e,i,s))),e=e.return}return r}function Os(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Np(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ra(n,i),c!=null&&a.unshift(Va(n,c,l))):s||(c=Ra(n,i),c!=null&&a.push(Va(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Jj=/\r\n?/g,Qj=/\u0000|\uFFFD/g;function _p(e){return(typeof e=="string"?e:""+e).replace(Jj,`
`).replace(Qj,"")}function Io(e,t,n){if(t=_p(t),_p(e)!==t&&n)throw Error(B(425))}function Sl(){}var gd=null,yd=null;function xd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var vd=typeof setTimeout=="function"?setTimeout:void 0,Zj=typeof clearTimeout=="function"?clearTimeout:void 0,Ep=typeof Promise=="function"?Promise:void 0,eS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ep<"u"?function(e){return Ep.resolve(null).then(e).catch(tS)}:vd;function tS(e){setTimeout(function(){throw e})}function Jc(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Oa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oa(t)}function Vr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ri=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Ri,za="__reactProps$"+Ri,ur="__reactContainer$"+Ri,wd="__reactEvents$"+Ri,nS="__reactListeners$"+Ri,rS="__reactHandles$"+Ri;function ys(e){var t=e[Vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ur]||n[Vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pp(e);e!==null;){if(n=e[Vn])return n;e=Pp(e)}return t}e=n,n=e.parentNode}return null}function co(e){return e=e[Vn]||e[ur],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ys(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function ac(e){return e[za]||null}var bd=[],Js=-1;function Zr(e){return{current:e}}function Oe(e){0>Js||(e.current=bd[Js],bd[Js]=null,Js--)}function Re(e,t){Js++,bd[Js]=e.current,e.current=t}var Kr={},Pt=Zr(Kr),Wt=Zr(!1),Es=Kr;function wi(e,t){var n=e.type.contextTypes;if(!n)return Kr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function qt(e){return e=e.childContextTypes,e!=null}function Nl(){Oe(Wt),Oe(Pt)}function Cp(e,t,n){if(Pt.current!==Kr)throw Error(B(168));Re(Pt,t),Re(Wt,n)}function Yx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(B(108,z1(e)||"Unknown",s));return We({},n,r)}function _l(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kr,Es=Pt.current,Re(Pt,e),Re(Wt,Wt.current),!0}function Tp(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=Yx(e,t,Es),r.__reactInternalMemoizedMergedChildContext=e,Oe(Wt),Oe(Pt),Re(Pt,e)):Oe(Wt),Re(Wt,n)}var rr=null,oc=!1,Qc=!1;function Jx(e){rr===null?rr=[e]:rr.push(e)}function sS(e){oc=!0,Jx(e)}function es(){if(!Qc&&rr!==null){Qc=!0;var e=0,t=Ee;try{var n=rr;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rr=null,oc=!1}catch(s){throw rr!==null&&(rr=rr.slice(e+1)),kx(Jh,es),s}finally{Ee=t,Qc=!1}}return null}var Qs=[],Zs=0,El=null,Pl=0,mn=[],pn=0,Ps=null,sr=1,ir="";function ds(e,t){Qs[Zs++]=Pl,Qs[Zs++]=El,El=e,Pl=t}function Qx(e,t,n){mn[pn++]=sr,mn[pn++]=ir,mn[pn++]=Ps,Ps=e;var r=sr;e=ir;var s=32-An(r)-1;r&=~(1<<s),n+=1;var i=32-An(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,sr=1<<32-An(t)+s|n<<s|r,ir=i+e}else sr=1<<i|n<<s|r,ir=e}function of(e){e.return!==null&&(ds(e,1),Qx(e,1,0))}function lf(e){for(;e===El;)El=Qs[--Zs],Qs[Zs]=null,Pl=Qs[--Zs],Qs[Zs]=null;for(;e===Ps;)Ps=mn[--pn],mn[pn]=null,ir=mn[--pn],mn[pn]=null,sr=mn[--pn],mn[pn]=null}var sn=null,nn=null,Me=!1,Cn=null;function Zx(e,t){var n=yn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ap(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,sn=e,nn=Vr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,sn=e,nn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ps!==null?{id:sr,overflow:ir}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=yn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,sn=e,nn=null,!0):!1;default:return!1}}function kd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jd(e){if(Me){var t=nn;if(t){var n=t;if(!Ap(e,t)){if(kd(e))throw Error(B(418));t=Vr(n.nextSibling);var r=sn;t&&Ap(e,t)?Zx(r,n):(e.flags=e.flags&-4097|2,Me=!1,sn=e)}}else{if(kd(e))throw Error(B(418));e.flags=e.flags&-4097|2,Me=!1,sn=e}}}function Ip(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;sn=e}function Ro(e){if(e!==sn)return!1;if(!Me)return Ip(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xd(e.type,e.memoizedProps)),t&&(t=nn)){if(kd(e))throw ev(),Error(B(418));for(;t;)Zx(e,t),t=Vr(t.nextSibling)}if(Ip(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){nn=Vr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}nn=null}}else nn=sn?Vr(e.stateNode.nextSibling):null;return!0}function ev(){for(var e=nn;e;)e=Vr(e.nextSibling)}function bi(){nn=sn=null,Me=!1}function cf(e){Cn===null?Cn=[e]:Cn.push(e)}var iS=gr.ReactCurrentBatchConfig;function Yi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function Do(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rp(e){var t=e._init;return t(e._payload)}function tv(e){function t(y,g){if(e){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=Hr(y,g),y.index=0,y.sibling=null,y}function i(y,g,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=2,g):x):(y.flags|=2,g)):(y.flags|=1048576,g)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,g,x,S){return g===null||g.tag!==6?(g=iu(x,y.mode,S),g.return=y,g):(g=s(g,x),g.return=y,g)}function c(y,g,x,S){var E=x.type;return E===qs?d(y,g,x.props.children,S,x.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Pr&&Rp(E)===g.type)?(S=s(g,x.props),S.ref=Yi(y,g,x),S.return=y,S):(S=ll(x.type,x.key,x.props,null,y.mode,S),S.ref=Yi(y,g,x),S.return=y,S)}function u(y,g,x,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=au(x,y.mode,S),g.return=y,g):(g=s(g,x.children||[]),g.return=y,g)}function d(y,g,x,S,E){return g===null||g.tag!==7?(g=js(x,y.mode,S,E),g.return=y,g):(g=s(g,x),g.return=y,g)}function h(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=iu(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case jo:return x=ll(g.type,g.key,g.props,null,y.mode,x),x.ref=Yi(y,null,g),x.return=y,x;case Ws:return g=au(g,y.mode,x),g.return=y,g;case Pr:var S=g._init;return h(y,S(g._payload),x)}if(aa(g)||Wi(g))return g=js(g,y.mode,x,null),g.return=y,g;Do(y,g)}return null}function f(y,g,x,S){var E=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:l(y,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jo:return x.key===E?c(y,g,x,S):null;case Ws:return x.key===E?u(y,g,x,S):null;case Pr:return E=x._init,f(y,g,E(x._payload),S)}if(aa(x)||Wi(x))return E!==null?null:d(y,g,x,S,null);Do(y,x)}return null}function m(y,g,x,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(x)||null,l(g,y,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case jo:return y=y.get(S.key===null?x:S.key)||null,c(g,y,S,E);case Ws:return y=y.get(S.key===null?x:S.key)||null,u(g,y,S,E);case Pr:var j=S._init;return m(y,g,x,j(S._payload),E)}if(aa(S)||Wi(S))return y=y.get(x)||null,d(g,y,S,E,null);Do(g,S)}return null}function p(y,g,x,S){for(var E=null,j=null,P=g,C=g=0,O=null;P!==null&&C<x.length;C++){P.index>C?(O=P,P=null):O=P.sibling;var D=f(y,P,x[C],S);if(D===null){P===null&&(P=O);break}e&&P&&D.alternate===null&&t(y,P),g=i(D,g,C),j===null?E=D:j.sibling=D,j=D,P=O}if(C===x.length)return n(y,P),Me&&ds(y,C),E;if(P===null){for(;C<x.length;C++)P=h(y,x[C],S),P!==null&&(g=i(P,g,C),j===null?E=P:j.sibling=P,j=P);return Me&&ds(y,C),E}for(P=r(y,P);C<x.length;C++)O=m(P,y,C,x[C],S),O!==null&&(e&&O.alternate!==null&&P.delete(O.key===null?C:O.key),g=i(O,g,C),j===null?E=O:j.sibling=O,j=O);return e&&P.forEach(function(V){return t(y,V)}),Me&&ds(y,C),E}function v(y,g,x,S){var E=Wi(x);if(typeof E!="function")throw Error(B(150));if(x=E.call(x),x==null)throw Error(B(151));for(var j=E=null,P=g,C=g=0,O=null,D=x.next();P!==null&&!D.done;C++,D=x.next()){P.index>C?(O=P,P=null):O=P.sibling;var V=f(y,P,D.value,S);if(V===null){P===null&&(P=O);break}e&&P&&V.alternate===null&&t(y,P),g=i(V,g,C),j===null?E=V:j.sibling=V,j=V,P=O}if(D.done)return n(y,P),Me&&ds(y,C),E;if(P===null){for(;!D.done;C++,D=x.next())D=h(y,D.value,S),D!==null&&(g=i(D,g,C),j===null?E=D:j.sibling=D,j=D);return Me&&ds(y,C),E}for(P=r(y,P);!D.done;C++,D=x.next())D=m(P,y,C,D.value,S),D!==null&&(e&&D.alternate!==null&&P.delete(D.key===null?C:D.key),g=i(D,g,C),j===null?E=D:j.sibling=D,j=D);return e&&P.forEach(function(G){return t(y,G)}),Me&&ds(y,C),E}function w(y,g,x,S){if(typeof x=="object"&&x!==null&&x.type===qs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case jo:e:{for(var E=x.key,j=g;j!==null;){if(j.key===E){if(E=x.type,E===qs){if(j.tag===7){n(y,j.sibling),g=s(j,x.props.children),g.return=y,y=g;break e}}else if(j.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Pr&&Rp(E)===j.type){n(y,j.sibling),g=s(j,x.props),g.ref=Yi(y,j,x),g.return=y,y=g;break e}n(y,j);break}else t(y,j);j=j.sibling}x.type===qs?(g=js(x.props.children,y.mode,S,x.key),g.return=y,y=g):(S=ll(x.type,x.key,x.props,null,y.mode,S),S.ref=Yi(y,g,x),S.return=y,y=S)}return a(y);case Ws:e:{for(j=x.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),g=s(g,x.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=au(x,y.mode,S),g.return=y,y=g}return a(y);case Pr:return j=x._init,w(y,g,j(x._payload),S)}if(aa(x))return p(y,g,x,S);if(Wi(x))return v(y,g,x,S);Do(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,x),g.return=y,y=g):(n(y,g),g=iu(x,y.mode,S),g.return=y,y=g),a(y)):n(y,g)}return w}var ki=tv(!0),nv=tv(!1),Cl=Zr(null),Tl=null,ei=null,uf=null;function df(){uf=ei=Tl=null}function hf(e){var t=Cl.current;Oe(Cl),e._currentValue=t}function Sd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fi(e,t){Tl=e,uf=ei=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Bt=!0),e.firstContext=null)}function wn(e){var t=e._currentValue;if(uf!==e)if(e={context:e,memoizedValue:t,next:null},ei===null){if(Tl===null)throw Error(B(308));ei=e,Tl.dependencies={lanes:0,firstContext:e}}else ei=ei.next=e;return t}var xs=null;function ff(e){xs===null?xs=[e]:xs.push(e)}function rv(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ff(t)):(n.next=s.next,s.next=n),t.interleaved=n,dr(e,r)}function dr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cr=!1;function mf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,dr(e,n)}return s=r.interleaved,s===null?(t.next=t,ff(r)):(t.next=s.next,s.next=t),r.interleaved=t,dr(e,n)}function nl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qh(e,n)}}function Dp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Al(e,t,n,r){var s=e.updateQueue;Cr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,v=l;switch(f=t,m=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=We({},h,f);break e;case 2:Cr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Ts|=a,e.lanes=a,e.memoizedState=h}}function Lp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var uo={},Wn=Zr(uo),Ua=Zr(uo),Ba=Zr(uo);function vs(e){if(e===uo)throw Error(B(174));return e}function pf(e,t){switch(Re(Ba,t),Re(Ua,e),Re(Wn,uo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sd(t,e)}Oe(Wn),Re(Wn,t)}function ji(){Oe(Wn),Oe(Ua),Oe(Ba)}function iv(e){vs(Ba.current);var t=vs(Wn.current),n=sd(t,e.type);t!==n&&(Re(Ua,e),Re(Wn,n))}function gf(e){Ua.current===e&&(Oe(Wn),Oe(Ua))}var ze=Zr(0);function Il(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zc=[];function yf(){for(var e=0;e<Zc.length;e++)Zc[e]._workInProgressVersionPrimary=null;Zc.length=0}var rl=gr.ReactCurrentDispatcher,eu=gr.ReactCurrentBatchConfig,Cs=0,Be=null,lt=null,ht=null,Rl=!1,ga=!1,Ha=0,aS=0;function jt(){throw Error(B(321))}function xf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dn(e[n],t[n]))return!1;return!0}function vf(e,t,n,r,s,i){if(Cs=i,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rl.current=e===null||e.memoizedState===null?uS:dS,e=n(r,s),ga){i=0;do{if(ga=!1,Ha=0,25<=i)throw Error(B(301));i+=1,ht=lt=null,t.updateQueue=null,rl.current=hS,e=n(r,s)}while(ga)}if(rl.current=Dl,t=lt!==null&&lt.next!==null,Cs=0,ht=lt=Be=null,Rl=!1,t)throw Error(B(300));return e}function wf(){var e=Ha!==0;return Ha=0,e}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Be.memoizedState=ht=e:ht=ht.next=e,ht}function bn(){if(lt===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ht===null?Be.memoizedState:ht.next;if(t!==null)ht=t,lt=e;else{if(e===null)throw Error(B(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ht===null?Be.memoizedState=ht=e:ht=ht.next=e}return ht}function Wa(e,t){return typeof t=="function"?t(e):t}function tu(e){var t=bn(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=lt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Cs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,Be.lanes|=d,Ts|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Dn(r,t.memoizedState)||(Bt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Be.lanes|=i,Ts|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nu(e){var t=bn(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Dn(i,t.memoizedState)||(Bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function av(){}function ov(e,t){var n=Be,r=bn(),s=t(),i=!Dn(r.memoizedState,s);if(i&&(r.memoizedState=s,Bt=!0),r=r.queue,bf(uv.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,qa(9,cv.bind(null,n,r,s,t),void 0,null),mt===null)throw Error(B(349));Cs&30||lv(n,t,s)}return s}function lv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cv(e,t,n,r){t.value=n,t.getSnapshot=r,dv(t)&&hv(e)}function uv(e,t,n){return n(function(){dv(t)&&hv(e)})}function dv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dn(e,n)}catch{return!0}}function hv(e){var t=dr(e,1);t!==null&&In(t,e,1,-1)}function Op(e){var t=$n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:e},t.queue=e,e=e.dispatch=cS.bind(null,Be,e),[t.memoizedState,e]}function qa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function fv(){return bn().memoizedState}function sl(e,t,n,r){var s=$n();Be.flags|=e,s.memoizedState=qa(1|t,n,void 0,r===void 0?null:r)}function lc(e,t,n,r){var s=bn();r=r===void 0?null:r;var i=void 0;if(lt!==null){var a=lt.memoizedState;if(i=a.destroy,r!==null&&xf(r,a.deps)){s.memoizedState=qa(t,n,i,r);return}}Be.flags|=e,s.memoizedState=qa(1|t,n,i,r)}function $p(e,t){return sl(8390656,8,e,t)}function bf(e,t){return lc(2048,8,e,t)}function mv(e,t){return lc(4,2,e,t)}function pv(e,t){return lc(4,4,e,t)}function gv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yv(e,t,n){return n=n!=null?n.concat([e]):null,lc(4,4,gv.bind(null,t,e),n)}function kf(){}function xv(e,t){var n=bn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vv(e,t){var n=bn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wv(e,t,n){return Cs&21?(Dn(n,t)||(n=Nx(),Be.lanes|=n,Ts|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Bt=!0),e.memoizedState=n)}function oS(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=eu.transition;eu.transition={};try{e(!1),t()}finally{Ee=n,eu.transition=r}}function bv(){return bn().memoizedState}function lS(e,t,n){var r=Br(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kv(e))jv(t,n);else if(n=rv(e,t,n,r),n!==null){var s=Dt();In(n,e,r,s),Sv(n,t,r)}}function cS(e,t,n){var r=Br(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kv(e))jv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Dn(l,a)){var c=t.interleaved;c===null?(s.next=s,ff(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=rv(e,t,s,r),n!==null&&(s=Dt(),In(n,e,r,s),Sv(n,t,r))}}function kv(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function jv(e,t){ga=Rl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Sv(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qh(e,n)}}var Dl={readContext:wn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},uS={readContext:wn,useCallback:function(e,t){return $n().memoizedState=[e,t===void 0?null:t],e},useContext:wn,useEffect:$p,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,sl(4194308,4,gv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sl(4194308,4,e,t)},useInsertionEffect:function(e,t){return sl(4,2,e,t)},useMemo:function(e,t){var n=$n();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$n();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=lS.bind(null,Be,e),[r.memoizedState,e]},useRef:function(e){var t=$n();return e={current:e},t.memoizedState=e},useState:Op,useDebugValue:kf,useDeferredValue:function(e){return $n().memoizedState=e},useTransition:function(){var e=Op(!1),t=e[0];return e=oS.bind(null,e[1]),$n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Be,s=$n();if(Me){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),mt===null)throw Error(B(349));Cs&30||lv(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,$p(uv.bind(null,r,i,e),[e]),r.flags|=2048,qa(9,cv.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=$n(),t=mt.identifierPrefix;if(Me){var n=ir,r=sr;n=(r&~(1<<32-An(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ha++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=aS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dS={readContext:wn,useCallback:xv,useContext:wn,useEffect:bf,useImperativeHandle:yv,useInsertionEffect:mv,useLayoutEffect:pv,useMemo:vv,useReducer:tu,useRef:fv,useState:function(){return tu(Wa)},useDebugValue:kf,useDeferredValue:function(e){var t=bn();return wv(t,lt.memoizedState,e)},useTransition:function(){var e=tu(Wa)[0],t=bn().memoizedState;return[e,t]},useMutableSource:av,useSyncExternalStore:ov,useId:bv,unstable_isNewReconciler:!1},hS={readContext:wn,useCallback:xv,useContext:wn,useEffect:bf,useImperativeHandle:yv,useInsertionEffect:mv,useLayoutEffect:pv,useMemo:vv,useReducer:nu,useRef:fv,useState:function(){return nu(Wa)},useDebugValue:kf,useDeferredValue:function(e){var t=bn();return lt===null?t.memoizedState=e:wv(t,lt.memoizedState,e)},useTransition:function(){var e=nu(Wa)[0],t=bn().memoizedState;return[e,t]},useMutableSource:av,useSyncExternalStore:ov,useId:bv,unstable_isNewReconciler:!1};function Nn(e,t){if(e&&e.defaultProps){t=We({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Nd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var cc={isMounted:function(e){return(e=e._reactInternals)?Rs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dt(),s=Br(e),i=or(r,s);i.payload=t,n!=null&&(i.callback=n),t=zr(e,i,s),t!==null&&(In(t,e,s,r),nl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dt(),s=Br(e),i=or(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=zr(e,i,s),t!==null&&(In(t,e,s,r),nl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dt(),r=Br(e),s=or(n,r);s.tag=2,t!=null&&(s.callback=t),t=zr(e,s,r),t!==null&&(In(t,e,r,n),nl(t,e,r))}};function Mp(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Ma(n,r)||!Ma(s,i):!0}function Nv(e,t,n){var r=!1,s=Kr,i=t.contextType;return typeof i=="object"&&i!==null?i=wn(i):(s=qt(t)?Es:Pt.current,r=t.contextTypes,i=(r=r!=null)?wi(e,s):Kr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&cc.enqueueReplaceState(t,t.state,null)}function _d(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},mf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=wn(i):(i=qt(t)?Es:Pt.current,s.context=wi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Nd(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&cc.enqueueReplaceState(s,s.state,null),Al(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Si(e,t){try{var n="",r=t;do n+=V1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ru(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ed(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fS=typeof WeakMap=="function"?WeakMap:Map;function _v(e,t,n){n=or(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ol||(Ol=!0,$d=r),Ed(e,t)},n}function Ev(e,t,n){n=or(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ed(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ed(e,t),typeof r!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Vp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new fS;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=ES.bind(null,e,t,n),t.then(e,e))}function zp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Up(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=or(-1,1),t.tag=2,zr(n,t,1))),n.lanes|=1),e)}var mS=gr.ReactCurrentOwner,Bt=!1;function It(e,t,n,r){t.child=e===null?nv(t,null,n,r):ki(t,e.child,n,r)}function Bp(e,t,n,r,s){n=n.render;var i=t.ref;return fi(t,s),r=vf(e,t,n,r,i,s),n=wf(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hr(e,t,s)):(Me&&n&&of(t),t.flags|=1,It(e,t,r,s),t.child)}function Hp(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Tf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Pv(e,t,i,r,s)):(e=ll(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ma,n(a,r)&&e.ref===t.ref)return hr(e,t,s)}return t.flags|=1,e=Hr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Pv(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ma(i,r)&&e.ref===t.ref)if(Bt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Bt=!0);else return t.lanes=e.lanes,hr(e,t,s)}return Pd(e,t,n,r,s)}function Cv(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(ni,en),en|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(ni,en),en|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re(ni,en),en|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Re(ni,en),en|=r;return It(e,t,s,n),t.child}function Tv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pd(e,t,n,r,s){var i=qt(n)?Es:Pt.current;return i=wi(t,i),fi(t,s),n=vf(e,t,n,r,i,s),r=wf(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hr(e,t,s)):(Me&&r&&of(t),t.flags|=1,It(e,t,n,s),t.child)}function Wp(e,t,n,r,s){if(qt(n)){var i=!0;_l(t)}else i=!1;if(fi(t,s),t.stateNode===null)il(e,t),Nv(t,n,r),_d(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=wn(u):(u=qt(n)?Es:Pt.current,u=wi(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Fp(t,a,r,u),Cr=!1;var f=t.memoizedState;a.state=f,Al(t,r,a,s),c=t.memoizedState,l!==r||f!==c||Wt.current||Cr?(typeof d=="function"&&(Nd(t,n,d,r),c=t.memoizedState),(l=Cr||Mp(t,n,l,r,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,sv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Nn(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=wn(c):(c=qt(n)?Es:Pt.current,c=wi(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Fp(t,a,r,c),Cr=!1,f=t.memoizedState,a.state=f,Al(t,r,a,s);var p=t.memoizedState;l!==h||f!==p||Wt.current||Cr?(typeof m=="function"&&(Nd(t,n,m,r),p=t.memoizedState),(u=Cr||Mp(t,n,u,r,f,p,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Cd(e,t,n,r,i,s)}function Cd(e,t,n,r,s,i){Tv(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Tp(t,n,!1),hr(e,t,i);r=t.stateNode,mS.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,l,i)):It(e,t,l,i),t.memoizedState=r.state,s&&Tp(t,n,!0),t.child}function Av(e){var t=e.stateNode;t.pendingContext?Cp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cp(e,t.context,!1),pf(e,t.containerInfo)}function qp(e,t,n,r,s){return bi(),cf(s),t.flags|=256,It(e,t,n,r),t.child}var Td={dehydrated:null,treeContext:null,retryLane:0};function Ad(e){return{baseLanes:e,cachePool:null,transitions:null}}function Iv(e,t,n){var r=t.pendingProps,s=ze.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Re(ze,s&1),e===null)return jd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=hc(a,r,0,null),e=js(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ad(n),t.memoizedState=Td,e):jf(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return pS(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Hr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Hr(l,i):(i=js(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Ad(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Td,r}return i=e.child,e=i.sibling,r=Hr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function jf(e,t){return t=hc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lo(e,t,n,r){return r!==null&&cf(r),ki(t,e.child,null,n),e=jf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pS(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=ru(Error(B(422))),Lo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=hc({mode:"visible",children:r.children},s,0,null),i=js(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ki(t,e.child,null,a),t.child.memoizedState=Ad(a),t.memoizedState=Td,i);if(!(t.mode&1))return Lo(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=ru(i,r,void 0),Lo(e,t,a,r)}if(l=(a&e.childLanes)!==0,Bt||l){if(r=mt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,dr(e,s),In(r,e,s,-1))}return Cf(),r=ru(Error(B(421))),Lo(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=PS.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,nn=Vr(s.nextSibling),sn=t,Me=!0,Cn=null,e!==null&&(mn[pn++]=sr,mn[pn++]=ir,mn[pn++]=Ps,sr=e.id,ir=e.overflow,Ps=t),t=jf(t,r.children),t.flags|=4096,t)}function Gp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Sd(e.return,t,n)}function su(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Rv(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(It(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gp(e,n,t);else if(e.tag===19)Gp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Re(ze,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Il(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),su(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Il(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}su(t,!0,n,null,i);break;case"together":su(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function il(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ts|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=Hr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gS(e,t,n){switch(t.tag){case 3:Av(t),bi();break;case 5:iv(t);break;case 1:qt(t.type)&&_l(t);break;case 4:pf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Re(Cl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Re(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?Iv(e,t,n):(Re(ze,ze.current&1),e=hr(e,t,n),e!==null?e.sibling:null);Re(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Rv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,Cv(e,t,n)}return hr(e,t,n)}var Dv,Id,Lv,Ov;Dv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Id=function(){};Lv=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,vs(Wn.current);var i=null;switch(n){case"input":s=ed(e,s),r=ed(e,r),i=[];break;case"select":s=We({},s,{value:void 0}),r=We({},r,{value:void 0}),i=[];break;case"textarea":s=rd(e,s),r=rd(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Sl)}id(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Aa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Aa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Le("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Ov=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ji(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function yS(e,t,n){var r=t.pendingProps;switch(lf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return qt(t.type)&&Nl(),St(t),null;case 3:return r=t.stateNode,ji(),Oe(Wt),Oe(Pt),yf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ro(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Cn!==null&&(Vd(Cn),Cn=null))),Id(e,t),St(t),null;case 5:gf(t);var s=vs(Ba.current);if(n=t.type,e!==null&&t.stateNode!=null)Lv(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return St(t),null}if(e=vs(Wn.current),Ro(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Vn]=t,r[za]=i,e=(t.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(s=0;s<la.length;s++)Le(la[s],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":np(r,i),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Le("invalid",r);break;case"textarea":sp(r,i),Le("invalid",r)}id(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Io(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Io(r.textContent,l,e),s=["children",""+l]):Aa.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Le("scroll",r)}switch(n){case"input":So(r),rp(r,i,!0);break;case"textarea":So(r),ip(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ux(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Vn]=t,e[za]=r,Dv(e,t,!1,!1),t.stateNode=e;e:{switch(a=ad(n,r),n){case"dialog":Le("cancel",e),Le("close",e),s=r;break;case"iframe":case"object":case"embed":Le("load",e),s=r;break;case"video":case"audio":for(s=0;s<la.length;s++)Le(la[s],e);s=r;break;case"source":Le("error",e),s=r;break;case"img":case"image":case"link":Le("error",e),Le("load",e),s=r;break;case"details":Le("toggle",e),s=r;break;case"input":np(e,r),s=ed(e,r),Le("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=We({},r,{value:void 0}),Le("invalid",e);break;case"textarea":sp(e,r),s=rd(e,r),Le("invalid",e);break;default:s=r}id(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?fx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dx(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ia(e,c):typeof c=="number"&&Ia(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Aa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Le("scroll",e):c!=null&&qh(e,i,c,a))}switch(n){case"input":So(e),rp(e,r,!1);break;case"textarea":So(e),ip(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Gr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ci(e,!!r.multiple,i,!1):r.defaultValue!=null&&ci(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Sl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)Ov(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=vs(Ba.current),vs(Wn.current),Ro(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vn]=t,(i=r.nodeValue!==n)&&(e=sn,e!==null))switch(e.tag){case 3:Io(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Io(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=t,t.stateNode=r}return St(t),null;case 13:if(Oe(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&nn!==null&&t.mode&1&&!(t.flags&128))ev(),bi(),t.flags|=98560,i=!1;else if(i=Ro(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(B(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Vn]=t}else bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),i=!1}else Cn!==null&&(Vd(Cn),Cn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?ct===0&&(ct=3):Cf())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return ji(),Id(e,t),e===null&&Fa(t.stateNode.containerInfo),St(t),null;case 10:return hf(t.type._context),St(t),null;case 17:return qt(t.type)&&Nl(),St(t),null;case 19:if(Oe(ze),i=t.memoizedState,i===null)return St(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Ji(i,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Il(e),a!==null){for(t.flags|=128,Ji(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Re(ze,ze.current&1|2),t.child}e=e.sibling}i.tail!==null&&Je()>Ni&&(t.flags|=128,r=!0,Ji(i,!1),t.lanes=4194304)}else{if(!r)if(e=Il(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ji(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Me)return St(t),null}else 2*Je()-i.renderingStartTime>Ni&&n!==1073741824&&(t.flags|=128,r=!0,Ji(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=ze.current,Re(ze,r?n&1|2:n&1),t):(St(t),null);case 22:case 23:return Pf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?en&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function xS(e,t){switch(lf(t),t.tag){case 1:return qt(t.type)&&Nl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ji(),Oe(Wt),Oe(Pt),yf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gf(t),null;case 13:if(Oe(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(ze),null;case 4:return ji(),null;case 10:return hf(t.type._context),null;case 22:case 23:return Pf(),null;case 24:return null;default:return null}}var Oo=!1,Nt=!1,vS=typeof WeakSet=="function"?WeakSet:Set,X=null;function ti(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(e,t,r)}else n.current=null}function Rd(e,t,n){try{n()}catch(r){Ge(e,t,r)}}var Kp=!1;function wS(e,t){if(gd=bl,e=zx(),af(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=a),f===i&&++d===r&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yd={focusedElem:e,selectionRange:n},bl=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,w=p.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Nn(t.type,v),w);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(S){Ge(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return p=Kp,Kp=!1,p}function ya(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rd(t,n,i)}s=s.next}while(s!==r)}}function uc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Dd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function $v(e){var t=e.alternate;t!==null&&(e.alternate=null,$v(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vn],delete t[za],delete t[wd],delete t[nS],delete t[rS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mv(e){return e.tag===5||e.tag===3||e.tag===4}function Xp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ld(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sl));else if(r!==4&&(e=e.child,e!==null))for(Ld(e,t,n),e=e.sibling;e!==null;)Ld(e,t,n),e=e.sibling}function Od(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Od(e,t,n),e=e.sibling;e!==null;)Od(e,t,n),e=e.sibling}var gt=null,En=!1;function jr(e,t,n){for(n=n.child;n!==null;)Fv(e,t,n),n=n.sibling}function Fv(e,t,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(nc,n)}catch{}switch(n.tag){case 5:Nt||ti(n,t);case 6:var r=gt,s=En;gt=null,jr(e,t,n),gt=r,En=s,gt!==null&&(En?(e=gt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(En?(e=gt,n=n.stateNode,e.nodeType===8?Jc(e.parentNode,n):e.nodeType===1&&Jc(e,n),Oa(e)):Jc(gt,n.stateNode));break;case 4:r=gt,s=En,gt=n.stateNode.containerInfo,En=!0,jr(e,t,n),gt=r,En=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Rd(n,t,a),s=s.next}while(s!==r)}jr(e,t,n);break;case 1:if(!Nt&&(ti(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ge(n,t,l)}jr(e,t,n);break;case 21:jr(e,t,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,jr(e,t,n),Nt=r):jr(e,t,n);break;default:jr(e,t,n)}}function Yp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vS),t.forEach(function(r){var s=CS.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:gt=l.stateNode,En=!1;break e;case 3:gt=l.stateNode.containerInfo,En=!0;break e;case 4:gt=l.stateNode.containerInfo,En=!0;break e}l=l.return}if(gt===null)throw Error(B(160));Fv(i,a,s),gt=null,En=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ge(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vv(t,e),t=t.sibling}function Vv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jn(t,e),Ln(e),r&4){try{ya(3,e,e.return),uc(3,e)}catch(v){Ge(e,e.return,v)}try{ya(5,e,e.return)}catch(v){Ge(e,e.return,v)}}break;case 1:jn(t,e),Ln(e),r&512&&n!==null&&ti(n,n.return);break;case 5:if(jn(t,e),Ln(e),r&512&&n!==null&&ti(n,n.return),e.flags&32){var s=e.stateNode;try{Ia(s,"")}catch(v){Ge(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&lx(s,i),ad(l,a);var u=ad(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?fx(s,h):d==="dangerouslySetInnerHTML"?dx(s,h):d==="children"?Ia(s,h):qh(s,d,h,u)}switch(l){case"input":td(s,i);break;case"textarea":cx(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ci(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?ci(s,!!i.multiple,i.defaultValue,!0):ci(s,!!i.multiple,i.multiple?[]:"",!1))}s[za]=i}catch(v){Ge(e,e.return,v)}}break;case 6:if(jn(t,e),Ln(e),r&4){if(e.stateNode===null)throw Error(B(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Ge(e,e.return,v)}}break;case 3:if(jn(t,e),Ln(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oa(t.containerInfo)}catch(v){Ge(e,e.return,v)}break;case 4:jn(t,e),Ln(e);break;case 13:jn(t,e),Ln(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_f=Je())),r&4&&Yp(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Nt=(u=Nt)||d,jn(t,e),Nt=u):jn(t,e),Ln(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(X=e,d=e.child;d!==null;){for(h=X=d;X!==null;){switch(f=X,m=f.child,f.tag){case 0:case 11:case 14:case 15:ya(4,f,f.return);break;case 1:ti(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(v){Ge(r,n,v)}}break;case 5:ti(f,f.return);break;case 22:if(f.memoizedState!==null){Qp(h);continue}}m!==null?(m.return=f,X=m):Qp(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=hx("display",a))}catch(v){Ge(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Ge(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:jn(t,e),Ln(e),r&4&&Yp(e);break;case 21:break;default:jn(t,e),Ln(e)}}function Ln(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Mv(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ia(s,""),r.flags&=-33);var i=Xp(e);Od(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Xp(e);Ld(e,l,a);break;default:throw Error(B(161))}}catch(c){Ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bS(e,t,n){X=e,zv(e)}function zv(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Oo;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Nt;l=Oo;var u=Nt;if(Oo=a,(Nt=c)&&!u)for(X=s;X!==null;)a=X,c=a.child,a.tag===22&&a.memoizedState!==null?Zp(s):c!==null?(c.return=a,X=c):Zp(s);for(;i!==null;)X=i,zv(i),i=i.sibling;X=s,Oo=l,Nt=u}Jp(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Jp(e)}}function Jp(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nt||uc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Nn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Lp(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lp(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Oa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Nt||t.flags&512&&Dd(t)}catch(f){Ge(t,t.return,f)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function Qp(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Zp(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{uc(4,t)}catch(c){Ge(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ge(t,s,c)}}var i=t.return;try{Dd(t)}catch(c){Ge(t,i,c)}break;case 5:var a=t.return;try{Dd(t)}catch(c){Ge(t,a,c)}}}catch(c){Ge(t,t.return,c)}if(t===e){X=null;break}var l=t.sibling;if(l!==null){l.return=t.return,X=l;break}X=t.return}}var kS=Math.ceil,Ll=gr.ReactCurrentDispatcher,Sf=gr.ReactCurrentOwner,xn=gr.ReactCurrentBatchConfig,Ne=0,mt=null,rt=null,xt=0,en=0,ni=Zr(0),ct=0,Ga=null,Ts=0,dc=0,Nf=0,xa=null,Vt=null,_f=0,Ni=1/0,tr=null,Ol=!1,$d=null,Ur=null,$o=!1,Dr=null,$l=0,va=0,Md=null,al=-1,ol=0;function Dt(){return Ne&6?Je():al!==-1?al:al=Je()}function Br(e){return e.mode&1?Ne&2&&xt!==0?xt&-xt:iS.transition!==null?(ol===0&&(ol=Nx()),ol):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:Ix(e.type)),e):1}function In(e,t,n,r){if(50<va)throw va=0,Md=null,Error(B(185));oo(e,n,r),(!(Ne&2)||e!==mt)&&(e===mt&&(!(Ne&2)&&(dc|=n),ct===4&&Ar(e,xt)),Gt(e,r),n===1&&Ne===0&&!(t.mode&1)&&(Ni=Je()+500,oc&&es()))}function Gt(e,t){var n=e.callbackNode;ij(e,t);var r=wl(e,e===mt?xt:0);if(r===0)n!==null&&lp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lp(n),t===1)e.tag===0?sS(eg.bind(null,e)):Jx(eg.bind(null,e)),eS(function(){!(Ne&6)&&es()}),n=null;else{switch(_x(r)){case 1:n=Jh;break;case 4:n=jx;break;case 16:n=vl;break;case 536870912:n=Sx;break;default:n=vl}n=Xv(n,Uv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Uv(e,t){if(al=-1,ol=0,Ne&6)throw Error(B(327));var n=e.callbackNode;if(mi()&&e.callbackNode!==n)return null;var r=wl(e,e===mt?xt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ml(e,r);else{t=r;var s=Ne;Ne|=2;var i=Hv();(mt!==e||xt!==t)&&(tr=null,Ni=Je()+500,ks(e,t));do try{NS();break}catch(l){Bv(e,l)}while(!0);df(),Ll.current=i,Ne=s,rt!==null?t=0:(mt=null,xt=0,t=ct)}if(t!==0){if(t===2&&(s=dd(e),s!==0&&(r=s,t=Fd(e,s))),t===1)throw n=Ga,ks(e,0),Ar(e,r),Gt(e,Je()),n;if(t===6)Ar(e,r);else{if(s=e.current.alternate,!(r&30)&&!jS(s)&&(t=Ml(e,r),t===2&&(i=dd(e),i!==0&&(r=i,t=Fd(e,i))),t===1))throw n=Ga,ks(e,0),Ar(e,r),Gt(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:hs(e,Vt,tr);break;case 3:if(Ar(e,r),(r&130023424)===r&&(t=_f+500-Je(),10<t)){if(wl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Dt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=vd(hs.bind(null,e,Vt,tr),t);break}hs(e,Vt,tr);break;case 4:if(Ar(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-An(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kS(r/1960))-r,10<r){e.timeoutHandle=vd(hs.bind(null,e,Vt,tr),r);break}hs(e,Vt,tr);break;case 5:hs(e,Vt,tr);break;default:throw Error(B(329))}}}return Gt(e,Je()),e.callbackNode===n?Uv.bind(null,e):null}function Fd(e,t){var n=xa;return e.current.memoizedState.isDehydrated&&(ks(e,t).flags|=256),e=Ml(e,t),e!==2&&(t=Vt,Vt=n,t!==null&&Vd(t)),e}function Vd(e){Vt===null?Vt=e:Vt.push.apply(Vt,e)}function jS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Dn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ar(e,t){for(t&=~Nf,t&=~dc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-An(t),r=1<<n;e[n]=-1,t&=~r}}function eg(e){if(Ne&6)throw Error(B(327));mi();var t=wl(e,0);if(!(t&1))return Gt(e,Je()),null;var n=Ml(e,t);if(e.tag!==0&&n===2){var r=dd(e);r!==0&&(t=r,n=Fd(e,r))}if(n===1)throw n=Ga,ks(e,0),Ar(e,t),Gt(e,Je()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hs(e,Vt,tr),Gt(e,Je()),null}function Ef(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(Ni=Je()+500,oc&&es())}}function As(e){Dr!==null&&Dr.tag===0&&!(Ne&6)&&mi();var t=Ne;Ne|=1;var n=xn.transition,r=Ee;try{if(xn.transition=null,Ee=1,e)return e()}finally{Ee=r,xn.transition=n,Ne=t,!(Ne&6)&&es()}}function Pf(){en=ni.current,Oe(ni)}function ks(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Zj(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(lf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:ji(),Oe(Wt),Oe(Pt),yf();break;case 5:gf(r);break;case 4:ji();break;case 13:Oe(ze);break;case 19:Oe(ze);break;case 10:hf(r.type._context);break;case 22:case 23:Pf()}n=n.return}if(mt=e,rt=e=Hr(e.current,null),xt=en=t,ct=0,Ga=null,Nf=dc=Ts=0,Vt=xa=null,xs!==null){for(t=0;t<xs.length;t++)if(n=xs[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}xs=null}return e}function Bv(e,t){do{var n=rt;try{if(df(),rl.current=Dl,Rl){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Rl=!1}if(Cs=0,ht=lt=Be=null,ga=!1,Ha=0,Sf.current=null,n===null||n.return===null){ct=1,Ga=t,rt=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=xt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=zp(a);if(m!==null){m.flags&=-257,Up(m,a,l,i,t),m.mode&1&&Vp(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var v=new Set;v.add(c),t.updateQueue=v}else p.add(c);break e}else{if(!(t&1)){Vp(i,u,t),Cf();break e}c=Error(B(426))}}else if(Me&&l.mode&1){var w=zp(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Up(w,a,l,i,t),cf(Si(c,l));break e}}i=c=Si(c,l),ct!==4&&(ct=2),xa===null?xa=[i]:xa.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=_v(i,c,t);Dp(i,y);break e;case 1:l=c;var g=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ur===null||!Ur.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=Ev(i,l,t);Dp(i,S);break e}}i=i.return}while(i!==null)}qv(n)}catch(E){t=E,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function Hv(){var e=Ll.current;return Ll.current=Dl,e===null?Dl:e}function Cf(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(Ts&268435455)&&!(dc&268435455)||Ar(mt,xt)}function Ml(e,t){var n=Ne;Ne|=2;var r=Hv();(mt!==e||xt!==t)&&(tr=null,ks(e,t));do try{SS();break}catch(s){Bv(e,s)}while(!0);if(df(),Ne=n,Ll.current=r,rt!==null)throw Error(B(261));return mt=null,xt=0,ct}function SS(){for(;rt!==null;)Wv(rt)}function NS(){for(;rt!==null&&!Y1();)Wv(rt)}function Wv(e){var t=Kv(e.alternate,e,en);e.memoizedProps=e.pendingProps,t===null?qv(e):rt=t,Sf.current=null}function qv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xS(n,t),n!==null){n.flags&=32767,rt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ct=6,rt=null;return}}else if(n=yS(n,t,en),n!==null){rt=n;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);ct===0&&(ct=5)}function hs(e,t,n){var r=Ee,s=xn.transition;try{xn.transition=null,Ee=1,_S(e,t,n,r)}finally{xn.transition=s,Ee=r}return null}function _S(e,t,n,r){do mi();while(Dr!==null);if(Ne&6)throw Error(B(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(aj(e,i),e===mt&&(rt=mt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$o||($o=!0,Xv(vl,function(){return mi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=xn.transition,xn.transition=null;var a=Ee;Ee=1;var l=Ne;Ne|=4,Sf.current=null,wS(e,n),Vv(n,e),qj(yd),bl=!!gd,yd=gd=null,e.current=n,bS(n),J1(),Ne=l,Ee=a,xn.transition=i}else e.current=n;if($o&&($o=!1,Dr=e,$l=s),i=e.pendingLanes,i===0&&(Ur=null),ej(n.stateNode),Gt(e,Je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ol)throw Ol=!1,e=$d,$d=null,e;return $l&1&&e.tag!==0&&mi(),i=e.pendingLanes,i&1?e===Md?va++:(va=0,Md=e):va=0,es(),null}function mi(){if(Dr!==null){var e=_x($l),t=xn.transition,n=Ee;try{if(xn.transition=null,Ee=16>e?16:e,Dr===null)var r=!1;else{if(e=Dr,Dr=null,$l=0,Ne&6)throw Error(B(331));var s=Ne;for(Ne|=4,X=e.current;X!==null;){var i=X,a=i.child;if(X.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:ya(8,d,i)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var f=d.sibling,m=d.return;if($v(d),d===u){X=null;break}if(f!==null){f.return=m,X=f;break}X=m}}}var p=i.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}X=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,X=a;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ya(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,X=y;break e}X=i.return}}var g=e.current;for(X=g;X!==null;){a=X;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,X=x;else e:for(a=g;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uc(9,l)}}catch(E){Ge(l,l.return,E)}if(l===a){X=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,X=S;break e}X=l.return}}if(Ne=s,es(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(nc,e)}catch{}r=!0}return r}finally{Ee=n,xn.transition=t}}return!1}function tg(e,t,n){t=Si(n,t),t=_v(e,t,1),e=zr(e,t,1),t=Dt(),e!==null&&(oo(e,1,t),Gt(e,t))}function Ge(e,t,n){if(e.tag===3)tg(e,e,n);else for(;t!==null;){if(t.tag===3){tg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ur===null||!Ur.has(r))){e=Si(n,e),e=Ev(t,e,1),t=zr(t,e,1),e=Dt(),t!==null&&(oo(t,1,e),Gt(t,e));break}}t=t.return}}function ES(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&n,mt===e&&(xt&n)===n&&(ct===4||ct===3&&(xt&130023424)===xt&&500>Je()-_f?ks(e,0):Nf|=n),Gt(e,t)}function Gv(e,t){t===0&&(e.mode&1?(t=Eo,Eo<<=1,!(Eo&130023424)&&(Eo=4194304)):t=1);var n=Dt();e=dr(e,t),e!==null&&(oo(e,t,n),Gt(e,n))}function PS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Gv(e,n)}function CS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),Gv(e,n)}var Kv;Kv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wt.current)Bt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Bt=!1,gS(e,t,n);Bt=!!(e.flags&131072)}else Bt=!1,Me&&t.flags&1048576&&Qx(t,Pl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;il(e,t),e=t.pendingProps;var s=wi(t,Pt.current);fi(t,n),s=vf(null,t,r,e,s,n);var i=wf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qt(r)?(i=!0,_l(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mf(t),s.updater=cc,t.stateNode=s,s._reactInternals=t,_d(t,r,e,n),t=Cd(null,t,r,!0,i,n)):(t.tag=0,Me&&i&&of(t),It(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(il(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=AS(r),e=Nn(r,e),s){case 0:t=Pd(null,t,r,e,n);break e;case 1:t=Wp(null,t,r,e,n);break e;case 11:t=Bp(null,t,r,e,n);break e;case 14:t=Hp(null,t,r,Nn(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nn(r,s),Pd(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nn(r,s),Wp(e,t,r,s,n);case 3:e:{if(Av(t),e===null)throw Error(B(387));r=t.pendingProps,i=t.memoizedState,s=i.element,sv(e,t),Al(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Si(Error(B(423)),t),t=qp(e,t,r,n,s);break e}else if(r!==s){s=Si(Error(B(424)),t),t=qp(e,t,r,n,s);break e}else for(nn=Vr(t.stateNode.containerInfo.firstChild),sn=t,Me=!0,Cn=null,n=nv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),r===s){t=hr(e,t,n);break e}It(e,t,r,n)}t=t.child}return t;case 5:return iv(t),e===null&&jd(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,xd(r,s)?a=null:i!==null&&xd(r,i)&&(t.flags|=32),Tv(e,t),It(e,t,a,n),t.child;case 6:return e===null&&jd(t),null;case 13:return Iv(e,t,n);case 4:return pf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ki(t,null,r,n):It(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nn(r,s),Bp(e,t,r,s,n);case 7:return It(e,t,t.pendingProps,n),t.child;case 8:return It(e,t,t.pendingProps.children,n),t.child;case 12:return It(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Re(Cl,r._currentValue),r._currentValue=a,i!==null)if(Dn(i.value,a)){if(i.children===s.children&&!Wt.current){t=hr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=or(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Sd(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(B(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Sd(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}It(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,fi(t,n),s=wn(s),r=r(s),t.flags|=1,It(e,t,r,n),t.child;case 14:return r=t.type,s=Nn(r,t.pendingProps),s=Nn(r.type,s),Hp(e,t,r,s,n);case 15:return Pv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nn(r,s),il(e,t),t.tag=1,qt(r)?(e=!0,_l(t)):e=!1,fi(t,n),Nv(t,r,s),_d(t,r,s,n),Cd(null,t,r,!0,e,n);case 19:return Rv(e,t,n);case 22:return Cv(e,t,n)}throw Error(B(156,t.tag))};function Xv(e,t){return kx(e,t)}function TS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,t,n,r){return new TS(e,t,n,r)}function Tf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AS(e){if(typeof e=="function")return Tf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Kh)return 11;if(e===Xh)return 14}return 2}function Hr(e,t){var n=e.alternate;return n===null?(n=yn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ll(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Tf(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case qs:return js(n.children,s,i,t);case Gh:a=8,s|=8;break;case Yu:return e=yn(12,n,t,s|2),e.elementType=Yu,e.lanes=i,e;case Ju:return e=yn(13,n,t,s),e.elementType=Ju,e.lanes=i,e;case Qu:return e=yn(19,n,t,s),e.elementType=Qu,e.lanes=i,e;case ix:return hc(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rx:a=10;break e;case sx:a=9;break e;case Kh:a=11;break e;case Xh:a=14;break e;case Pr:a=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=yn(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function js(e,t,n,r){return e=yn(7,e,r,t),e.lanes=n,e}function hc(e,t,n,r){return e=yn(22,e,r,t),e.elementType=ix,e.lanes=n,e.stateNode={isHidden:!1},e}function iu(e,t,n){return e=yn(6,e,null,t),e.lanes=n,e}function au(e,t,n){return t=yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IS(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vc(0),this.expirationTimes=Vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Af(e,t,n,r,s,i,a,l,c){return e=new IS(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=yn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mf(i),e}function RS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Yv(e){if(!e)return Kr;e=e._reactInternals;e:{if(Rs(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(qt(n))return Yx(e,n,t)}return t}function Jv(e,t,n,r,s,i,a,l,c){return e=Af(n,r,!0,e,s,i,a,l,c),e.context=Yv(null),n=e.current,r=Dt(),s=Br(n),i=or(r,s),i.callback=t??null,zr(n,i,s),e.current.lanes=s,oo(e,s,r),Gt(e,r),e}function fc(e,t,n,r){var s=t.current,i=Dt(),a=Br(s);return n=Yv(n),t.context===null?t.context=n:t.pendingContext=n,t=or(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zr(s,t,a),e!==null&&(In(e,s,a,i),nl(e,s,a)),a}function Fl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ng(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function If(e,t){ng(e,t),(e=e.alternate)&&ng(e,t)}function DS(){return null}var Qv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Rf(e){this._internalRoot=e}mc.prototype.render=Rf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));fc(e,t,null,null)};mc.prototype.unmount=Rf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;As(function(){fc(null,e,null,null)}),t[ur]=null}};function mc(e){this._internalRoot=e}mc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tr.length&&t!==0&&t<Tr[n].priority;n++);Tr.splice(n,0,e),n===0&&Ax(e)}};function Df(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rg(){}function LS(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Fl(a);i.call(u)}}var a=Jv(t,r,e,0,null,!1,!1,"",rg);return e._reactRootContainer=a,e[ur]=a.current,Fa(e.nodeType===8?e.parentNode:e),As(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Fl(c);l.call(u)}}var c=Af(e,0,!1,null,null,!1,!1,"",rg);return e._reactRootContainer=c,e[ur]=c.current,Fa(e.nodeType===8?e.parentNode:e),As(function(){fc(t,c,n,r)}),c}function gc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Fl(a);l.call(c)}}fc(t,a,e,s)}else a=LS(n,t,e,s,r);return Fl(a)}Ex=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=oa(t.pendingLanes);n!==0&&(Qh(t,n|1),Gt(t,Je()),!(Ne&6)&&(Ni=Je()+500,es()))}break;case 13:As(function(){var r=dr(e,1);if(r!==null){var s=Dt();In(r,e,1,s)}}),If(e,1)}};Zh=function(e){if(e.tag===13){var t=dr(e,134217728);if(t!==null){var n=Dt();In(t,e,134217728,n)}If(e,134217728)}};Px=function(e){if(e.tag===13){var t=Br(e),n=dr(e,t);if(n!==null){var r=Dt();In(n,e,t,r)}If(e,t)}};Cx=function(){return Ee};Tx=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};ld=function(e,t,n){switch(t){case"input":if(td(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ac(r);if(!s)throw Error(B(90));ox(r),td(r,s)}}}break;case"textarea":cx(e,n);break;case"select":t=n.value,t!=null&&ci(e,!!n.multiple,t,!1)}};gx=Ef;yx=As;var OS={usingClientEntryPoint:!1,Events:[co,Ys,ac,mx,px,Ef]},Qi={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$S={bundleType:Qi.bundleType,version:Qi.version,rendererPackageName:Qi.rendererPackageName,rendererConfig:Qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wx(e),e===null?null:e.stateNode},findFiberByHostInstance:Qi.findFiberByHostInstance||DS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mo.isDisabled&&Mo.supportsFiber)try{nc=Mo.inject($S),Hn=Mo}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OS;on.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Df(t))throw Error(B(200));return RS(e,t,null,n)};on.createRoot=function(e,t){if(!Df(e))throw Error(B(299));var n=!1,r="",s=Qv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Af(e,1,!1,null,null,n,!1,r,s),e[ur]=t.current,Fa(e.nodeType===8?e.parentNode:e),new Rf(t)};on.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=wx(t),e=e===null?null:e.stateNode,e};on.flushSync=function(e){return As(e)};on.hydrate=function(e,t,n){if(!pc(t))throw Error(B(200));return gc(null,e,t,!0,n)};on.hydrateRoot=function(e,t,n){if(!Df(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Qv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Jv(t,null,e,1,n??null,s,!1,i,a),e[ur]=t.current,Fa(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new mc(t)};on.render=function(e,t,n){if(!pc(t))throw Error(B(200));return gc(null,e,t,!1,n)};on.unmountComponentAtNode=function(e){if(!pc(e))throw Error(B(40));return e._reactRootContainer?(As(function(){gc(null,null,e,!1,function(){e._reactRootContainer=null,e[ur]=null})}),!0):!1};on.unstable_batchedUpdates=Ef;on.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!pc(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return gc(e,t,n,!1,r)};on.version="18.3.1-next-f1338f8080-20240426";function Zv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zv)}catch(e){console.error(e)}}Zv(),Zy.exports=on;var MS=Zy.exports,sg=MS;Ku.createRoot=sg.createRoot,Ku.hydrateRoot=sg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka.apply(this,arguments)}var Lr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Lr||(Lr={}));const ig="popstate";function FS(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return zd("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vl(s)}return zS(t,n,null,e)}function He(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ew(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function VS(){return Math.random().toString(36).substr(2,8)}function ag(e,t){return{usr:e.state,key:e.key,idx:t}}function zd(e,t,n,r){return n===void 0&&(n=null),Ka({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Di(t):t,{state:n,key:t&&t.key||r||VS()})}function Vl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Di(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function zS(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=Lr.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Ka({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Lr.Pop;let w=d(),y=w==null?null:w-u;u=w,c&&c({action:l,location:v.location,delta:y})}function f(w,y){l=Lr.Push;let g=zd(v.location,w,y);u=d()+1;let x=ag(g,u),S=v.createHref(g);try{a.pushState(x,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(S)}i&&c&&c({action:l,location:v.location,delta:1})}function m(w,y){l=Lr.Replace;let g=zd(v.location,w,y);u=d();let x=ag(g,u),S=v.createHref(g);a.replaceState(x,"",S),i&&c&&c({action:l,location:v.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof w=="string"?w:Vl(w);return g=g.replace(/ $/,"%20"),He(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let v={get action(){return l},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ig,h),c=w,()=>{s.removeEventListener(ig,h),c=null}},createHref(w){return t(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(w){return a.go(w)}};return v}var og;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(og||(og={}));function US(e,t,n){return n===void 0&&(n="/"),BS(e,t,n)}function BS(e,t,n,r){let s=typeof t=="string"?Di(t):t,i=_i(s.pathname||"/",n);if(i==null)return null;let a=tw(e);HS(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=t2(i);l=ZS(a[c],u)}return l}function tw(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(He(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Wr([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(He(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),tw(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:JS(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of nw(i.path))s(i,a,c)}),t}function nw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=nw(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function HS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:QS(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const WS=/^:[\w-]+$/,qS=3,GS=2,KS=1,XS=10,YS=-2,lg=e=>e==="*";function JS(e,t){let n=e.split("/"),r=n.length;return n.some(lg)&&(r+=YS),t&&(r+=GS),n.filter(s=>!lg(s)).reduce((s,i)=>s+(WS.test(i)?qS:i===""?KS:XS),r)}function QS(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function ZS(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Ud({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Wr([i,h.pathname]),pathnameBase:i2(Wr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Wr([i,h.pathnameBase]))}return a}function Ud(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=e2(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let v=l[h]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=l[h];return m&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function e2(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ew(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function t2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ew(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _i(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function n2(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Di(e):e;return{pathname:n?n.startsWith("/")?n:r2(n,t):t,search:a2(r),hash:o2(s)}}function r2(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ou(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s2(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Lf(e,t){let n=s2(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Of(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Di(e):(s=Ka({},e),He(!s.pathname||!s.pathname.includes("?"),ou("?","pathname","search",s)),He(!s.pathname||!s.pathname.includes("#"),ou("#","pathname","hash",s)),He(!s.search||!s.search.includes("#"),ou("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=n2(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Wr=e=>e.join("/").replace(/\/\/+/g,"/"),i2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),a2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,o2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function l2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const rw=["post","put","patch","delete"];new Set(rw);const c2=["get",...rw];new Set(c2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}const yc=b.createContext(null),sw=b.createContext(null),yr=b.createContext(null),xc=b.createContext(null),Yn=b.createContext({outlet:null,matches:[],isDataRoute:!1}),iw=b.createContext(null);function u2(e,t){let{relative:n}=t===void 0?{}:t;Li()||He(!1);let{basename:r,navigator:s}=b.useContext(yr),{hash:i,pathname:a,search:l}=vc(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Wr([r,a])),s.createHref({pathname:c,search:l,hash:i})}function Li(){return b.useContext(xc)!=null}function Jn(){return Li()||He(!1),b.useContext(xc).location}function aw(e){b.useContext(yr).static||b.useLayoutEffect(e)}function Oi(){let{isDataRoute:e}=b.useContext(Yn);return e?N2():d2()}function d2(){Li()||He(!1);let e=b.useContext(yc),{basename:t,future:n,navigator:r}=b.useContext(yr),{matches:s}=b.useContext(Yn),{pathname:i}=Jn(),a=JSON.stringify(Lf(s,n.v7_relativeSplatPath)),l=b.useRef(!1);return aw(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=Of(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Wr([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,a,i,e])}const h2=b.createContext(null);function f2(e){let t=b.useContext(Yn).outlet;return t&&b.createElement(h2.Provider,{value:e},t)}function $f(){let{matches:e}=b.useContext(Yn),t=e[e.length-1];return t?t.params:{}}function vc(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(yr),{matches:s}=b.useContext(Yn),{pathname:i}=Jn(),a=JSON.stringify(Lf(s,r.v7_relativeSplatPath));return b.useMemo(()=>Of(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function m2(e,t){return p2(e,t)}function p2(e,t,n,r){Li()||He(!1);let{navigator:s}=b.useContext(yr),{matches:i}=b.useContext(Yn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Jn(),d;if(t){var h;let w=typeof t=="string"?Di(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||He(!1),d=w}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=US(e,{pathname:m}),v=w2(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Wr([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Wr([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return t&&v?b.createElement(xc.Provider,{value:{location:Xa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Lr.Pop}},v):v}function g2(){let e=S2(),t=l2(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:s},n):null,null)}const y2=b.createElement(g2,null);class x2 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(Yn.Provider,{value:this.props.routeContext},b.createElement(iw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function v2(e){let{routeContext:t,match:n,children:r}=e,s=b.useContext(yc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Yn.Provider,{value:t},r)}function w2(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||He(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,p=!1,v=null,w=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||y2,c&&(u<0&&f===0?(_2("route-fallback"),p=!0,w=null):u===f&&(p=!0,w=h.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,f+1)),g=()=>{let x;return m?x=v:p?x=w:h.route.Component?x=b.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,b.createElement(v2,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(x2,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var ow=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ow||{}),lw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(lw||{});function b2(e){let t=b.useContext(yc);return t||He(!1),t}function k2(e){let t=b.useContext(sw);return t||He(!1),t}function j2(e){let t=b.useContext(Yn);return t||He(!1),t}function cw(e){let t=j2(),n=t.matches[t.matches.length-1];return n.route.id||He(!1),n.route.id}function S2(){var e;let t=b.useContext(iw),n=k2(),r=cw();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function N2(){let{router:e}=b2(ow.UseNavigateStable),t=cw(lw.UseNavigateStable),n=b.useRef(!1);return aw(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Xa({fromRouteId:t},i)))},[e,t])}const cg={};function _2(e,t,n){cg[e]||(cg[e]=!0)}function E2(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function P2(e){let{to:t,replace:n,state:r,relative:s}=e;Li()||He(!1);let{future:i,static:a}=b.useContext(yr),{matches:l}=b.useContext(Yn),{pathname:c}=Jn(),u=Oi(),d=Of(t,Lf(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function C2(e){return f2(e.context)}function At(e){He(!1)}function T2(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Lr.Pop,navigator:i,static:a=!1,future:l}=e;Li()&&He(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:a,future:Xa({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=Di(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=r,v=b.useMemo(()=>{let w=_i(d,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:m,key:p},navigationType:s}},[c,d,h,f,m,p,s]);return v==null?null:b.createElement(yr.Provider,{value:u},b.createElement(xc.Provider,{children:n,value:v}))}function A2(e){let{children:t,location:n}=e;return m2(Bd(t),n)}new Promise(()=>{});function Bd(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(r,s)=>{if(!b.isValidElement(r))return;let i=[...t,s];if(r.type===b.Fragment){n.push.apply(n,Bd(r.props.children,i));return}r.type!==At&&He(!1),!r.props.index||!r.props.children||He(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Bd(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zl.apply(this,arguments)}function uw(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function I2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function R2(e,t){return e.button===0&&(!t||t==="_self")&&!I2(e)}const D2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],L2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],O2="6";try{window.__reactRouterVersion=O2}catch{}const $2=b.createContext({isTransitioning:!1}),M2="startTransition",ug=E1[M2];function F2(e){let{basename:t,children:n,future:r,window:s}=e,i=b.useRef();i.current==null&&(i.current=FS({window:s,v5Compat:!0}));let a=i.current,[l,c]=b.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=b.useCallback(h=>{u&&ug?ug(()=>c(h)):c(h)},[c,u]);return b.useLayoutEffect(()=>a.listen(d),[a,d]),b.useEffect(()=>E2(r),[r]),b.createElement(T2,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const V2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lr=b.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=uw(t,D2),{basename:m}=b.useContext(yr),p,v=!1;if(typeof u=="string"&&z2.test(u)&&(p=u,V2))try{let x=new URL(window.location.href),S=u.startsWith("//")?new URL(x.protocol+u):new URL(u),E=_i(S.pathname,m);S.origin===x.origin&&E!=null?u=E+S.search+S.hash:v=!0}catch{}let w=u2(u,{relative:s}),y=H2(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function g(x){r&&r(x),x.defaultPrevented||y(x)}return b.createElement("a",zl({},f,{href:p||w,onClick:v||i?r:g,ref:n,target:c}))}),U2=b.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=t,h=uw(t,L2),f=vc(c,{relative:h.relative}),m=Jn(),p=b.useContext(sw),{navigator:v,basename:w}=b.useContext(yr),y=p!=null&&W2(f)&&u===!0,g=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,x=m.pathname,S=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(x=x.toLowerCase(),S=S?S.toLowerCase():null,g=g.toLowerCase()),S&&w&&(S=_i(S,w)||S);const E=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let j=x===g||!a&&x.startsWith(g)&&x.charAt(E)==="/",P=S!=null&&(S===g||!a&&S.startsWith(g)&&S.charAt(g.length)==="/"),C={isActive:j,isPending:P,isTransitioning:y},O=j?r:void 0,D;typeof i=="function"?D=i(C):D=[i,j?"active":null,P?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(C):l;return b.createElement(lr,zl({},h,{"aria-current":O,className:D,ref:n,style:V,to:c,viewTransition:u}),typeof d=="function"?d(C):d)});var Hd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Hd||(Hd={}));var dg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dg||(dg={}));function B2(e){let t=b.useContext(yc);return t||He(!1),t}function H2(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=Oi(),u=Jn(),d=vc(e,{relative:a});return b.useCallback(h=>{if(R2(h,n)){h.preventDefault();let f=r!==void 0?r:Vl(u)===Vl(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,i,a,l])}function W2(e,t){t===void 0&&(t={});let n=b.useContext($2);n==null&&He(!1);let{basename:r}=B2(Hd.useViewTransitionState),s=vc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=_i(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=_i(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ud(s.pathname,a)!=null||Ud(s.pathname,i)!=null}function q2(e,t={}){const n=b.useRef(null),r=b.useRef(null),s=b.useRef(0),i=t.maxReconnectAttempts||10,a=t.reconnectDelay||3e3,l=()=>{try{n.current=new WebSocket(e),n.current.onopen=c=>{console.log("WebSocket connected"),s.current=0,t.onOpen&&t.onOpen(c)},n.current.onmessage=c=>{t.onMessage&&t.onMessage(c)},n.current.onerror=c=>{console.error("WebSocket error:",c),t.onError&&t.onError(c)},n.current.onclose=c=>{console.log("WebSocket closed"),t.onClose&&t.onClose(c),s.current<i&&(s.current++,console.log(`Reconnecting... (attempt ${s.current}/${i})`),r.current=setTimeout(()=>{l()},a))}}catch(c){console.error("Failed to create WebSocket:",c)}};return b.useEffect(()=>(l(),()=>{r.current&&clearTimeout(r.current),n.current&&n.current.close()}),[e]),n.current}function dw(e,t){const[n,r]=b.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return b.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch(i){console.error(`Error saving to localStorage key "${e}":`,i)}},[e,n]),[n,i=>{try{const a=i instanceof Function?i(n):i;r(a)}catch(a){console.error(`Error setting localStorage key "${e}":`,a)}}]}function G2(){const[e,t]=dw("leo-dashboard-preferences",{theme:"light",sidebarCollapsed:!1,refreshInterval:3e4,notifications:!0,compactView:!1});return{preferences:e,updatePreference:(r,s)=>{t(i=>({...i,[r]:s}))}}}function lu(e,t){const[n,r]=dw(`leo-dashboard-${e}`,t);return[n,r,()=>{window.localStorage.removeItem(`leo-dashboard-${e}`),r(t)}]}const Mf=b.createContext({});function Ff(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}const Vf=typeof window<"u",hw=Vf?b.useLayoutEffect:b.useEffect,wc=b.createContext(null);function zf(e,t){e.indexOf(t)===-1&&e.push(t)}function Uf(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const fr=(e,t,n)=>n>t?t:n<e?e:n;let Bf=()=>{};const mr={},fw=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function mw(e){return typeof e=="object"&&e!==null}const pw=e=>/^0[^.\s]+$/u.test(e);function Hf(e){let t;return()=>(t===void 0&&(t=e()),t)}const vn=e=>e,K2=(e,t)=>n=>t(e(n)),ho=(...e)=>e.reduce(K2),Ya=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Wf{constructor(){this.subscriptions=[]}add(t){return zf(this.subscriptions,t),()=>Uf(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qn=e=>e*1e3,Gn=e=>e/1e3;function gw(e,t){return t?e*(1e3/t):0}const yw=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,X2=1e-7,Y2=12;function J2(e,t,n,r,s){let i,a,l=0;do a=t+(n-t)/2,i=yw(a,r,s)-e,i>0?n=a:t=a;while(Math.abs(i)>X2&&++l<Y2);return a}function fo(e,t,n,r){if(e===t&&n===r)return vn;const s=i=>J2(i,0,1,e,n);return i=>i===0||i===1?i:yw(s(i),t,r)}const xw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,vw=e=>t=>1-e(1-t),ww=fo(.33,1.53,.69,.99),qf=vw(ww),bw=xw(qf),kw=e=>(e*=2)<1?.5*qf(e):.5*(2-Math.pow(2,-10*(e-1))),Gf=e=>1-Math.sin(Math.acos(e)),jw=vw(Gf),Sw=xw(Gf),Q2=fo(.42,0,1,1),Z2=fo(0,0,.58,1),Nw=fo(.42,0,.58,1),eN=e=>Array.isArray(e)&&typeof e[0]!="number",_w=e=>Array.isArray(e)&&typeof e[0]=="number",tN={linear:vn,easeIn:Q2,easeInOut:Nw,easeOut:Z2,circIn:Gf,circInOut:Sw,circOut:jw,backIn:qf,backInOut:bw,backOut:ww,anticipate:kw},nN=e=>typeof e=="string",hg=e=>{if(_w(e)){Bf(e.length===4);const[t,n,r,s]=e;return fo(t,n,r,s)}else if(nN(e))return tN[e];return e},Fo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function rN(e,t){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){a.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,h=!1,f=!1)=>{const p=f&&s?n:r;return h&&a.add(d),p.has(d)||p.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(l=d,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const sN=40;function Ew(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=Fo.reduce((x,S)=>(x[S]=rN(i),x),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:m,postRender:p}=a,v=()=>{const x=mr.useManualTiming?s.timestamp:performance.now();n=!1,mr.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(x-s.timestamp,sN),1)),s.timestamp=x,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),m.process(s),p.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(v))},w=()=>{n=!0,r=!0,s.isProcessing||e(v)};return{schedule:Fo.reduce((x,S)=>{const E=a[S];return x[S]=(j,P=!1,C=!1)=>(n||w(),E.schedule(j,P,C)),x},{}),cancel:x=>{for(let S=0;S<Fo.length;S++)a[Fo[S]].cancel(x)},state:s,steps:a}}const{schedule:Fe,cancel:Xr,state:yt,steps:cu}=Ew(typeof requestAnimationFrame<"u"?requestAnimationFrame:vn,!0);let cl;function iN(){cl=void 0}const Ht={now:()=>(cl===void 0&&Ht.set(yt.isProcessing||mr.useManualTiming?yt.timestamp:performance.now()),cl),set:e=>{cl=e,queueMicrotask(iN)}},Pw=e=>t=>typeof t=="string"&&t.startsWith(e),Kf=Pw("--"),aN=Pw("var(--"),Xf=e=>aN(e)?oN.test(e.split("/*")[0].trim()):!1,oN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$i={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ja={...$i,transform:e=>fr(0,1,e)},Vo={...$i,default:1},wa=e=>Math.round(e*1e5)/1e5,Yf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lN(e){return e==null}const cN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jf=(e,t)=>n=>!!(typeof n=="string"&&cN.test(n)&&n.startsWith(e)||t&&!lN(n)&&Object.prototype.hasOwnProperty.call(n,t)),Cw=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,l]=r.match(Yf);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},uN=e=>fr(0,255,e),uu={...$i,transform:e=>Math.round(uN(e))},ws={test:Jf("rgb","red"),parse:Cw("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+uu.transform(e)+", "+uu.transform(t)+", "+uu.transform(n)+", "+wa(Ja.transform(r))+")"};function dN(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Wd={test:Jf("#"),parse:dN,transform:ws.transform},mo=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),_r=mo("deg"),Kn=mo("%"),oe=mo("px"),hN=mo("vh"),fN=mo("vw"),fg={...Kn,parse:e=>Kn.parse(e)/100,transform:e=>Kn.transform(e*100)},ri={test:Jf("hsl","hue"),parse:Cw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Kn.transform(wa(t))+", "+Kn.transform(wa(n))+", "+wa(Ja.transform(r))+")"},nt={test:e=>ws.test(e)||Wd.test(e)||ri.test(e),parse:e=>ws.test(e)?ws.parse(e):ri.test(e)?ri.parse(e):Wd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ws.transform(e):ri.transform(e),getAnimatableNone:e=>{const t=nt.parse(e);return t.alpha=0,nt.transform(t)}},mN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pN(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Yf))==null?void 0:t.length)||0)+(((n=e.match(mN))==null?void 0:n.length)||0)>0}const Tw="number",Aw="color",gN="var",yN="var(",mg="${}",xN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qa(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(xN,c=>(nt.test(c)?(r.color.push(i),s.push(Aw),n.push(nt.parse(c))):c.startsWith(yN)?(r.var.push(i),s.push(gN),n.push(c)):(r.number.push(i),s.push(Tw),n.push(parseFloat(c))),++i,mg)).split(mg);return{values:n,split:l,indexes:r,types:s}}function Iw(e){return Qa(e).values}function Rw(e){const{split:t,types:n}=Qa(e),r=t.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],s[a]!==void 0){const l=n[a];l===Tw?i+=wa(s[a]):l===Aw?i+=nt.transform(s[a]):i+=s[a]}return i}}const vN=e=>typeof e=="number"?0:nt.test(e)?nt.getAnimatableNone(e):e;function wN(e){const t=Iw(e);return Rw(e)(t.map(vN))}const Yr={test:pN,parse:Iw,createTransformer:Rw,getAnimatableNone:wN};function du(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function bN({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=du(c,l,e+1/3),i=du(c,l,e),a=du(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Ul(e,t){return n=>n>0?t:e}const Ue=(e,t,n)=>e+(t-e)*n,hu=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},kN=[Wd,ws,ri],jN=e=>kN.find(t=>t.test(e));function pg(e){const t=jN(e);if(!t)return!1;let n=t.parse(e);return t===ri&&(n=bN(n)),n}const gg=(e,t)=>{const n=pg(e),r=pg(t);if(!n||!r)return Ul(e,t);const s={...n};return i=>(s.red=hu(n.red,r.red,i),s.green=hu(n.green,r.green,i),s.blue=hu(n.blue,r.blue,i),s.alpha=Ue(n.alpha,r.alpha,i),ws.transform(s))},qd=new Set(["none","hidden"]);function SN(e,t){return qd.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function NN(e,t){return n=>Ue(e,t,n)}function Qf(e){return typeof e=="number"?NN:typeof e=="string"?Xf(e)?Ul:nt.test(e)?gg:PN:Array.isArray(e)?Dw:typeof e=="object"?nt.test(e)?gg:_N:Ul}function Dw(e,t){const n=[...e],r=n.length,s=e.map((i,a)=>Qf(i)(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function _N(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Qf(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function EN(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][r[i]],l=e.values[a]??0;n[s]=l,r[i]++}return n}const PN=(e,t)=>{const n=Yr.createTransformer(t),r=Qa(e),s=Qa(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?qd.has(e)&&!s.values.length||qd.has(t)&&!r.values.length?SN(e,t):ho(Dw(EN(r,s),s.values),n):Ul(e,t)};function Lw(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ue(e,t,n):Qf(e)(e,t)}const CN=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Fe.update(t,n),stop:()=>Xr(t),now:()=>yt.isProcessing?yt.timestamp:Ht.now()}},Ow=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Bl=2e4;function Zf(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Bl;)t+=n,r=e.next(t);return t>=Bl?1/0:t}function TN(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(Zf(r),Bl);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:Gn(s)}}const AN=5;function $w(e,t,n){const r=Math.max(t-AN,0);return gw(n-e(r),t-r)}const qe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fu=.001;function IN({duration:e=qe.duration,bounce:t=qe.bounce,velocity:n=qe.velocity,mass:r=qe.mass}){let s,i,a=1-t;a=fr(qe.minDamping,qe.maxDamping,a),e=fr(qe.minDuration,qe.maxDuration,Gn(e)),a<1?(s=u=>{const d=u*a,h=d*e,f=d-n,m=Gd(u,a),p=Math.exp(-h);return fu-f/m*p},i=u=>{const h=u*a*e,f=h*n+n,m=Math.pow(a,2)*Math.pow(u,2)*e,p=Math.exp(-h),v=Gd(Math.pow(u,2),a);return(-s(u)+fu>0?-1:1)*((f-m)*p)/v}):(s=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-fu+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=DN(s,i,l);if(e=qn(e),isNaN(c))return{stiffness:qe.stiffness,damping:qe.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const RN=12;function DN(e,t,n){let r=n;for(let s=1;s<RN;s++)r=r-e(r)/t(r);return r}function Gd(e,t){return e*Math.sqrt(1-t*t)}const LN=["duration","bounce"],ON=["stiffness","damping","mass"];function yg(e,t){return t.some(n=>e[n]!==void 0)}function $N(e){let t={velocity:qe.velocity,stiffness:qe.stiffness,damping:qe.damping,mass:qe.mass,isResolvedFromDuration:!1,...e};if(!yg(e,ON)&&yg(e,LN))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*fr(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:qe.mass,stiffness:s,damping:i}}else{const n=IN(e);t={...t,...n,mass:qe.mass},t.isResolvedFromDuration=!0}return t}function Hl(e=qe.visualDuration,t=qe.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=$N({...n,velocity:-Gn(n.velocity||0)}),p=f||0,v=u/(2*Math.sqrt(c*d)),w=a-i,y=Gn(Math.sqrt(c/d)),g=Math.abs(w)<5;r||(r=g?qe.restSpeed.granular:qe.restSpeed.default),s||(s=g?qe.restDelta.granular:qe.restDelta.default);let x;if(v<1){const E=Gd(y,v);x=j=>{const P=Math.exp(-v*y*j);return a-P*((p+v*y*w)/E*Math.sin(E*j)+w*Math.cos(E*j))}}else if(v===1)x=E=>a-Math.exp(-y*E)*(w+(p+y*w)*E);else{const E=y*Math.sqrt(v*v-1);x=j=>{const P=Math.exp(-v*y*j),C=Math.min(E*j,300);return a-P*((p+v*y*w)*Math.sinh(C)+E*w*Math.cosh(C))/E}}const S={calculatedDuration:m&&h||null,next:E=>{const j=x(E);if(m)l.done=E>=h;else{let P=E===0?p:0;v<1&&(P=E===0?qn(p):$w(x,E,j));const C=Math.abs(P)<=r,O=Math.abs(a-j)<=s;l.done=C&&O}return l.value=l.done?a:j,l},toString:()=>{const E=Math.min(Zf(S),Bl),j=Ow(P=>S.next(E*P).value,E,30);return E+"ms "+j},toTransition:()=>{}};return S}Hl.applyToOptions=e=>{const t=TN(e,100,Hl);return e.ease=t.ease,e.duration=qn(t.duration),e.type="keyframes",e};function Kd({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,p=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let v=n*t;const w=h+v,y=a===void 0?w:a(w);y!==w&&(v=y-h);const g=C=>-v*Math.exp(-C/r),x=C=>y+g(C),S=C=>{const O=g(C),D=x(C);f.done=Math.abs(O)<=u,f.value=f.done?y:D};let E,j;const P=C=>{m(f.value)&&(E=C,j=Hl({keyframes:[f.value,p(f.value)],velocity:$w(x,C,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:C=>{let O=!1;return!j&&E===void 0&&(O=!0,S(C),P(C)),E!==void 0&&C>=E?j.next(C-E):(!O&&S(C),f)}}}function MN(e,t,n){const r=[],s=n||mr.mix||Lw,i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||vn:t;l=ho(c,l)}r.push(l)}return r}function FN(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Bf(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=MN(t,r,s),c=l.length,u=d=>{if(a&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=Ya(e[h],e[h+1],d);return l[h](f)};return n?d=>u(fr(e[0],e[i-1],d)):u}function VN(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Ya(0,t,r);e.push(Ue(n,1,s))}}function zN(e){const t=[0];return VN(t,e.length-1),t}function UN(e,t){return e.map(n=>n*t)}function BN(e,t){return e.map(()=>t||Nw).splice(0,e.length-1)}function ba({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=eN(r)?r.map(hg):hg(r),i={done:!1,value:t[0]},a=UN(n&&n.length===t.length?n:zN(t),e),l=FN(a,t,{ease:Array.isArray(s)?s:BN(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const HN=e=>e!==null;function em(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(HN),l=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const WN={decay:Kd,inertia:Kd,tween:ba,keyframes:ba,spring:Hl};function Mw(e){typeof e.type=="string"&&(e.type=WN[e.type])}class tm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const qN=e=>e/100;class nm extends tm{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Ht.now()&&this.tick(Ht.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Mw(t);const{type:n=ba,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=t;let{keyframes:l}=t;const c=n||ba;c!==ba&&typeof l[0]!="number"&&(this.mixKeyframes=ho(qN,Lw(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=Zf(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:m,type:p,onUpdate:v,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let x=this.currentTime,S=r;if(h){const C=Math.min(this.currentTime,s)/l;let O=Math.floor(C),D=C%1;!D&&C>=1&&(D=1),D===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(f==="reverse"?(D=1-D,m&&(D-=m/l)):f==="mirror"&&(S=a)),x=fr(0,1,D)*l}const E=g?{done:!1,value:d[0]}:S.next(x);i&&(E.value=i(E.value));let{done:j}=E;!g&&c!==null&&(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return P&&p!==Kd&&(E.value=em(d,this.options,w,this.speed)),v&&v(E.value),P&&this.finish(),E}then(t,n){return this.finished.then(t,n)}get duration(){return Gn(this.calculatedDuration)}get time(){return Gn(this.currentTime)}set time(t){var n;t=qn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ht.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Gn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=CN,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ht.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function GN(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const bs=e=>e*180/Math.PI,Xd=e=>{const t=bs(Math.atan2(e[1],e[0]));return Yd(t)},KN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Xd,rotateZ:Xd,skewX:e=>bs(Math.atan(e[1])),skewY:e=>bs(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Yd=e=>(e=e%360,e<0&&(e+=360),e),xg=Xd,vg=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),wg=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),XN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vg,scaleY:wg,scale:e=>(vg(e)+wg(e))/2,rotateX:e=>Yd(bs(Math.atan2(e[6],e[5]))),rotateY:e=>Yd(bs(Math.atan2(-e[2],e[0]))),rotateZ:xg,rotate:xg,skewX:e=>bs(Math.atan(e[4])),skewY:e=>bs(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Jd(e){return e.includes("scale")?1:0}function Qd(e,t){if(!e||e==="none")return Jd(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=XN,s=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=KN,s=l}if(!s)return Jd(t);const i=r[t],a=s[1].split(",").map(JN);return typeof i=="function"?i(a):a[i]}const YN=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Qd(n,t)};function JN(e){return parseFloat(e.trim())}const Mi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fi=new Set(Mi),bg=e=>e===$i||e===oe,QN=new Set(["x","y","z"]),ZN=Mi.filter(e=>!QN.has(e));function e_(e){const t=[];return ZN.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ss={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Qd(t,"x"),y:(e,{transform:t})=>Qd(t,"y")};Ss.translateX=Ss.x;Ss.translateY=Ss.y;const Ns=new Set;let Zd=!1,eh=!1,th=!1;function Fw(){if(eh){const e=Array.from(Ns).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=e_(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var l;(l=r.getValue(i))==null||l.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}eh=!1,Zd=!1,Ns.forEach(e=>e.complete(th)),Ns.clear()}function Vw(){Ns.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(eh=!0)})}function t_(){th=!0,Vw(),Fw(),th=!1}class rm{constructor(t,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Ns.add(this),Zd||(Zd=!0,Fe.read(Vw),Fe.resolveKeyframes(Fw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),s&&i===void 0&&s.set(t[0])}GN(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ns.delete(this)}cancel(){this.state==="scheduled"&&(Ns.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const n_=e=>e.startsWith("--");function r_(e,t,n){n_(t)?e.style.setProperty(t,n):e.style[t]=n}const s_=Hf(()=>window.ScrollTimeline!==void 0),i_={};function a_(e,t){const n=Hf(e);return()=>i_[t]??n()}const zw=a_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ca=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,kg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ca([0,.65,.55,1]),circOut:ca([.55,0,1,.45]),backIn:ca([.31,.01,.66,-.59]),backOut:ca([.33,1.53,.69,.99])};function Uw(e,t){if(e)return typeof e=="function"?zw()?Ow(e,t):"ease-out":_w(e)?ca(e):Array.isArray(e)?e.map(n=>Uw(n,t)||kg.easeOut):kg[e]}function o_(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const h=Uw(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(d,f)}function Bw(e){return typeof e=="function"&&"applyToOptions"in e}function l_({type:e,...t}){return Bw(e)&&zw()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class c_ extends tm{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,Bf(typeof t.type!="string");const u=l_(t);this.animation=o_(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=em(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):r_(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Gn(Number(t))}get time(){return Gn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=qn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&s_()?(this.animation.timeline=t,vn):n(this)}}const Hw={anticipate:kw,backInOut:bw,circInOut:Sw};function u_(e){return e in Hw}function d_(e){typeof e.ease=="string"&&u_(e.ease)&&(e.ease=Hw[e.ease])}const jg=10;class h_ extends c_{constructor(t){d_(t),Mw(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new nm({...a,autoplay:!1}),c=qn(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-jg).value,l.sample(c).value,jg),l.stop()}}const Sg=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Yr.test(e)||e==="0")&&!e.startsWith("url("));function f_(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function m_(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=Sg(s,t),l=Sg(i,t);return!a||!l?!1:f_(e)||(n==="spring"||Bw(n))&&r}function nh(e){e.duration=0,e.type}const p_=new Set(["opacity","clipPath","filter","transform"]),g_=Hf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function y_(e){var d;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return g_()&&n&&p_.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const x_=40;class v_ extends tm{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var p;super(),this.stop=()=>{var v,w;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Ht.now();const f={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:c,motionValue:u,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||rm;this.keyframeResolver=new m(l,(v,w,y)=>this.onKeyframesResolved(v,w,f,!y),c,u,d),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Ht.now(),m_(t,i,a,l)||((mr.instantAnimations||!c)&&(d==null||d(em(t,r,n))),t[0]=t[t.length-1],nh(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>x_?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!u&&y_(f)?new h_({...f,element:f.motionValue.owner.current}):new nm(f);m.finished.then(()=>this.notifyFinished()).catch(vn),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),t_()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const w_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function b_(e){const t=w_.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function Ww(e,t,n=1){const[r,s]=b_(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return fw(a)?parseFloat(a):a}return Xf(s)?Ww(s,t,n+1):s}function sm(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const qw=new Set(["width","height","top","left","right","bottom",...Mi]),k_={test:e=>e==="auto",parse:e=>e},Gw=e=>t=>t.test(e),Kw=[$i,oe,Kn,_r,fN,hN,k_],Ng=e=>Kw.find(Gw(e));function j_(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||pw(e):!0}const S_=new Set(["brightness","contrast","saturate","opacity"]);function N_(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Yf)||[];if(!r)return e;const s=n.replace(r,"");let i=S_.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const __=/\b([a-z-]*)\(.*?\)/gu,rh={...Yr,getAnimatableNone:e=>{const t=e.match(__);return t?t.map(N_).join(" "):e}},_g={...$i,transform:Math.round},E_={rotate:_r,rotateX:_r,rotateY:_r,rotateZ:_r,scale:Vo,scaleX:Vo,scaleY:Vo,scaleZ:Vo,skew:_r,skewX:_r,skewY:_r,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:Ja,originX:fg,originY:fg,originZ:oe},im={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,backgroundPositionX:oe,backgroundPositionY:oe,...E_,zIndex:_g,fillOpacity:Ja,strokeOpacity:Ja,numOctaves:_g},P_={...im,color:nt,backgroundColor:nt,outlineColor:nt,fill:nt,stroke:nt,borderColor:nt,borderTopColor:nt,borderRightColor:nt,borderBottomColor:nt,borderLeftColor:nt,filter:rh,WebkitFilter:rh},Xw=e=>P_[e];function Yw(e,t){let n=Xw(e);return n!==rh&&(n=Yr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const C_=new Set(["auto","none","0"]);function T_(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!C_.has(i)&&Qa(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=Yw(n,s)}class A_ extends rm{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Xf(u))){const d=Ww(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!qw.has(r)||t.length!==2)return;const[s,i]=t,a=Ng(s),l=Ng(i);if(a!==l)if(bg(a)&&bg(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Ss[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||j_(t[s]))&&r.push(s);r.length&&T_(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ss[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=Ss[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function I_(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Jw=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Qw(e){return mw(e)&&"offsetHeight"in e}const Eg=30,R_=e=>!isNaN(parseFloat(e));class D_{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Ht.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ht.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=R_(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Wf);const r=this.events[t].add(n);return t==="change"?()=>{r(),Fe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ht.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Eg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Eg);return gw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ei(e,t){return new D_(e,t)}const{schedule:am}=Ew(queueMicrotask,!1),Sn={x:!1,y:!1};function Zw(){return Sn.x||Sn.y}function L_(e){return e==="x"||e==="y"?Sn[e]?null:(Sn[e]=!0,()=>{Sn[e]=!1}):Sn.x||Sn.y?null:(Sn.x=Sn.y=!0,()=>{Sn.x=Sn.y=!1})}function eb(e,t){const n=I_(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Pg(e){return!(e.pointerType==="touch"||Zw())}function O_(e,t,n={}){const[r,s,i]=eb(e,n),a=l=>{if(!Pg(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{Pg(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",a,s)}),i}const tb=(e,t)=>t?e===t?!0:tb(e,t.parentElement):!1,om=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,$_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function M_(e){return $_.has(e.tagName)||e.tabIndex!==-1}const ul=new WeakSet;function Cg(e){return t=>{t.key==="Enter"&&e(t)}}function mu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const F_=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Cg(()=>{if(ul.has(n))return;mu(n,"down");const s=Cg(()=>{mu(n,"up")}),i=()=>mu(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Tg(e){return om(e)&&!Zw()}function V_(e,t,n={}){const[r,s,i]=eb(e,n),a=l=>{const c=l.currentTarget;if(!Tg(l))return;ul.add(c);const u=t(c,l),d=(m,p)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),ul.has(c)&&ul.delete(c),Tg(m)&&typeof u=="function"&&u(m,{success:p})},h=m=>{d(m,c===window||c===document||n.useGlobalTarget||tb(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),Qw(l)&&(l.addEventListener("focus",u=>F_(u,s)),!M_(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function nb(e){return mw(e)&&"ownerSVGElement"in e}function z_(e){return nb(e)&&e.tagName==="svg"}const _t=e=>!!(e&&e.getVelocity),U_=[...Kw,nt,Yr],B_=e=>U_.find(Gw(e)),lm=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class H_ extends b.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Qw(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function W_({children:e,isPresent:t,anchorX:n,root:r}){const s=b.useId(),i=b.useRef(null),a=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=b.useContext(lm);return b.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:h,right:f}=a.current;if(t||!i.current||!c||!u)return;const m=n==="left"?`left: ${h}`:`right: ${f}`;i.current.dataset.motionPopId=s;const p=document.createElement("style");l&&(p.nonce=l);const v=r??document.head;return v.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{v.contains(p)&&v.removeChild(p)}},[t]),o.jsx(H_,{isPresent:t,childRef:i,sizeRef:a,children:b.cloneElement(e,{ref:i})})}const q_=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a,anchorX:l,root:c})=>{const u=Ff(G_),d=b.useId();let h=!0,f=b.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:n,custom:s,onExitComplete:m=>{u.set(m,!0);for(const p of u.values())if(!p)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return i&&h&&(f={...f}),b.useMemo(()=>{u.forEach((m,p)=>u.set(p,!1))},[n]),b.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),a==="popLayout"&&(e=o.jsx(W_,{isPresent:n,anchorX:l,root:c,children:e})),o.jsx(wc.Provider,{value:f,children:e})};function G_(){return new Map}function rb(e=!0){const t=b.useContext(wc);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=b.useId();b.useEffect(()=>{if(e)return s(i)},[e]);const a=b.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,a]:[!0]}const zo=e=>e.key||"";function Ag(e){const t=[];return b.Children.forEach(e,n=>{b.isValidElement(n)&&t.push(n)}),t}const tn=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[u,d]=rb(a),h=b.useMemo(()=>Ag(e),[e]),f=a&&!u?[]:h.map(zo),m=b.useRef(!0),p=b.useRef(h),v=Ff(()=>new Map),[w,y]=b.useState(h),[g,x]=b.useState(h);hw(()=>{m.current=!1,p.current=h;for(let j=0;j<g.length;j++){const P=zo(g[j]);f.includes(P)?v.delete(P):v.get(P)!==!0&&v.set(P,!1)}},[g,f.length,f.join("-")]);const S=[];if(h!==w){let j=[...h];for(let P=0;P<g.length;P++){const C=g[P],O=zo(C);f.includes(O)||(j.splice(P,0,C),S.push(C))}return i==="wait"&&S.length&&(j=S),x(Ag(j)),y(h),null}const{forceRender:E}=b.useContext(Mf);return o.jsx(o.Fragment,{children:g.map(j=>{const P=zo(j),C=a&&!u?!1:h===g||f.includes(P),O=()=>{if(v.has(P))v.set(P,!0);else return;let D=!0;v.forEach(V=>{V||(D=!1)}),D&&(E==null||E(),x(p.current),a&&(d==null||d()),r&&r())};return o.jsx(q_,{isPresent:C,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:C?void 0:O,anchorX:l,children:j},P)})})},sb=b.createContext({strict:!1}),Ig={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pi={};for(const e in Ig)Pi[e]={isEnabled:t=>Ig[e].some(n=>!!t[n])};function K_(e){for(const t in e)Pi[t]={...Pi[t],...e[t]}}const X_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||X_.has(e)}let ib=e=>!Wl(e);function Y_(e){typeof e=="function"&&(ib=t=>t.startsWith("on")?!Wl(t):e(t))}try{Y_(require("@emotion/is-prop-valid").default)}catch{}function J_(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(ib(s)||n===!0&&Wl(s)||!t&&!Wl(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const bc=b.createContext({});function kc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Za(e){return typeof e=="string"||Array.isArray(e)}const cm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],um=["initial",...cm];function jc(e){return kc(e.animate)||um.some(t=>Za(e[t]))}function ab(e){return!!(jc(e)||e.variants)}function Q_(e,t){if(jc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Za(n)?n:void 0,animate:Za(r)?r:void 0}}return e.inherit!==!1?t:{}}function Z_(e){const{initial:t,animate:n}=Q_(e,b.useContext(bc));return b.useMemo(()=>({initial:t,animate:n}),[Rg(t),Rg(n)])}function Rg(e){return Array.isArray(e)?e.join(" "):e}const eo={};function eE(e){for(const t in e)eo[t]=e[t],Kf(t)&&(eo[t].isCSSVariable=!0)}function ob(e,{layout:t,layoutId:n}){return Fi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!eo[e]||e==="opacity")}const tE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nE=Mi.length;function rE(e,t,n){let r="",s=!0;for(let i=0;i<nE;i++){const a=Mi[i],l=e[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=Jw(l,im[a]);if(!c){s=!1;const d=tE[a]||a;r+=`${d}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function dm(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let a=!1,l=!1;for(const c in t){const u=t[c];if(Fi.has(c)){a=!0;continue}else if(Kf(c)){s[c]=u;continue}else{const d=Jw(u,im[c]);c.startsWith("origin")?(l=!0,i[c]=d):r[c]=d}}if(t.transform||(a||n?r.transform=rE(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const hm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lb(e,t,n){for(const r in t)!_t(t[r])&&!ob(r,n)&&(e[r]=t[r])}function sE({transformTemplate:e},t){return b.useMemo(()=>{const n=hm();return dm(n,t,e),Object.assign({},n.vars,n.style)},[t])}function iE(e,t){const n=e.style||{},r={};return lb(r,n,e),Object.assign(r,sE(e,t)),r}function aE(e,t){const n={},r=iE(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const oE={offset:"stroke-dashoffset",array:"stroke-dasharray"},lE={offset:"strokeDashoffset",array:"strokeDasharray"};function cE(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?oE:lE;e[i.offset]=oe.transform(-r);const a=oe.transform(t),l=oe.transform(n);e[i.array]=`${a} ${l}`}function cb(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...l},c,u,d){if(dm(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&cE(h,s,i,a,!1)}const ub=()=>({...hm(),attrs:{}}),db=e=>typeof e=="string"&&e.toLowerCase()==="svg";function uE(e,t,n,r){const s=b.useMemo(()=>{const i=ub();return cb(i,t,db(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};lb(i,e.style,e),s.style={...i,...s.style}}return s}const dE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fm(e){return typeof e!="string"||e.includes("-")?!1:!!(dE.indexOf(e)>-1||/[A-Z]/u.test(e))}function hE(e,t,n,{latestValues:r},s,i=!1){const l=(fm(e)?uE:aE)(t,r,s,e),c=J_(t,typeof e=="string",i),u=e!==b.Fragment?{...c,...l,ref:n}:{},{children:d}=t,h=b.useMemo(()=>_t(d)?d.get():d,[d]);return b.createElement(e,{...u,children:h})}function Dg(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function mm(e,t,n,r){if(typeof t=="function"){const[s,i]=Dg(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Dg(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function dl(e){return _t(e)?e.get():e}function fE({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:mE(n,r,s,e),renderState:t()}}function mE(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=dl(i[f]);let{initial:a,animate:l}=e;const c=jc(e),u=ab(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;if(h&&typeof h!="boolean"&&!kc(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const p=mm(e,f[m]);if(p){const{transitionEnd:v,transition:w,...y}=p;for(const g in y){let x=y[g];if(Array.isArray(x)){const S=d?x.length-1:0;x=x[S]}x!==null&&(s[g]=x)}for(const g in v)s[g]=v[g]}}}return s}const hb=e=>(t,n)=>{const r=b.useContext(bc),s=b.useContext(wc),i=()=>fE(e,t,r,s);return n?i():Ff(i)};function pm(e,t,n){var i;const{style:r}=e,s={};for(const a in r)(_t(r[a])||t.style&&_t(t.style[a])||ob(a,e)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const pE=hb({scrapeMotionValuesFromProps:pm,createRenderState:hm});function fb(e,t,n){const r=pm(e,t,n);for(const s in e)if(_t(e[s])||_t(t[s])){const i=Mi.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const gE=hb({scrapeMotionValuesFromProps:fb,createRenderState:ub}),yE=Symbol.for("motionComponentSymbol");function si(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function xE(e,t,n){return b.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):si(n)&&(n.current=r))},[t])}const gm=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vE="framerAppearId",mb="data-"+gm(vE),pb=b.createContext({});function wE(e,t,n,r,s){var v,w;const{visualElement:i}=b.useContext(bc),a=b.useContext(sb),l=b.useContext(wc),c=b.useContext(lm).reducedMotion,u=b.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=b.useContext(pb);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&bE(u.current,n,s,h);const f=b.useRef(!1);b.useInsertionEffect(()=>{d&&f.current&&d.update(n,l)});const m=n[mb],p=b.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,m)));return hw(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),p.current&&d.animationState&&d.animationState.animateChanges())}),b.useEffect(()=>{d&&(!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,m)}),p.current=!1),d.enteringChildren=void 0)}),d}function bE(e,t,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:gb(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||l&&si(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function gb(e){if(e)return e.options.allowProjection!==!1?e.projection:gb(e.parent)}function pu(e,{forwardMotionProps:t=!1}={},n,r){n&&K_(n);const s=fm(e)?gE:pE;function i(l,c){let u;const d={...b.useContext(lm),...l,layoutId:kE(l)},{isStatic:h}=d,f=Z_(l),m=s(l,h);if(!h&&Vf){jE();const p=SE(d);u=p.MeasureLayout,f.visualElement=wE(e,m,d,r,p.ProjectionNode)}return o.jsxs(bc.Provider,{value:f,children:[u&&f.visualElement?o.jsx(u,{visualElement:f.visualElement,...d}):null,hE(e,l,xE(m,f.visualElement,c),m,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const a=b.forwardRef(i);return a[yE]=e,a}function kE({layoutId:e}){const t=b.useContext(Mf).id;return t&&e!==void 0?t+"-"+e:e}function jE(e,t){b.useContext(sb).strict}function SE(e){const{drag:t,layout:n}=Pi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function NE(e,t){if(typeof Proxy>"u")return pu;const n=new Map,r=(i,a)=>pu(i,a,e,t),s=(i,a)=>r(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,pu(a,void 0,e,t)),n.get(a))})}function yb({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function _E({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function EE(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function gu(e){return e===void 0||e===1}function sh({scale:e,scaleX:t,scaleY:n}){return!gu(e)||!gu(t)||!gu(n)}function fs(e){return sh(e)||xb(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function xb(e){return Lg(e.x)||Lg(e.y)}function Lg(e){return e&&e!=="0%"}function ql(e,t,n){const r=e-n,s=t*r;return n+s}function Og(e,t,n,r,s){return s!==void 0&&(e=ql(e,s,r)),ql(e,n,r)+t}function ih(e,t=0,n=1,r,s){e.min=Og(e.min,t,n,r,s),e.max=Og(e.max,t,n,r,s)}function vb(e,{x:t,y:n}){ih(e.x,t.translate,t.scale,t.originPoint),ih(e.y,n.translate,n.scale,n.originPoint)}const $g=.999999999999,Mg=1.0000000000001;function PE(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=n[l],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ai(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,vb(e,a)),r&&fs(i.latestValues)&&ai(e,i.latestValues))}t.x<Mg&&t.x>$g&&(t.x=1),t.y<Mg&&t.y>$g&&(t.y=1)}function ii(e,t){e.min=e.min+t,e.max=e.max+t}function Fg(e,t,n,r,s=.5){const i=Ue(e.min,e.max,s);ih(e,t,n,i,r)}function ai(e,t){Fg(e.x,t.x,t.scaleX,t.scale,t.originX),Fg(e.y,t.y,t.scaleY,t.scale,t.originY)}function wb(e,t){return yb(EE(e.getBoundingClientRect(),t))}function CE(e,t,n){const r=wb(e,n),{scroll:s}=t;return s&&(ii(r.x,s.offset.x),ii(r.y,s.offset.y)),r}const Vg=()=>({translate:0,scale:1,origin:0,originPoint:0}),oi=()=>({x:Vg(),y:Vg()}),zg=()=>({min:0,max:0}),Ye=()=>({x:zg(),y:zg()}),ah={current:null},bb={current:!1};function TE(){if(bb.current=!0,!!Vf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ah.current=e.matches;e.addEventListener("change",t),t()}else ah.current=!1}const AE=new WeakMap;function IE(e,t,n){for(const r in t){const s=t[r],i=n[r];if(_t(s))e.addValue(r,s);else if(_t(i))e.addValue(r,Ei(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(r);e.addValue(r,Ei(a!==void 0?a:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Ug=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class RE{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=rm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Ht.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Fe.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=jc(n),this.isVariantNode=ab(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const m=h[f];c[f]!==void 0&&_t(m)&&m.set(c[f])}}mount(t){var n;this.current=t,AE.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),bb.current||TE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ah.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Xr(this.notifyUpdate),Xr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Fi.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Fe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Pi){const n=Pi[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ye()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ug.length;r++){const s=Ug[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=t[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=IE(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ei(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(fw(r)||pw(r))?r=parseFloat(r):!B_(r)&&Yr.test(n)&&(r=Yw(t,n)),this.setBaseTarget(t,_t(r)?r.get():r)),_t(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=mm(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!_t(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Wf),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){am.render(this.render)}}class kb extends RE{constructor(){super(...arguments),this.KeyframeResolver=A_}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;_t(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function jb(e,{style:t,vars:n},r,s){const i=e.style;let a;for(a in t)i[a]=t[a];s==null||s.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function DE(e){return window.getComputedStyle(e)}class LE extends kb{constructor(){super(...arguments),this.type="html",this.renderInstance=jb}readValueFromInstance(t,n){var r;if(Fi.has(n))return(r=this.projection)!=null&&r.isProjecting?Jd(n):YN(t,n);{const s=DE(t),i=(Kf(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return wb(t,n)}build(t,n,r){dm(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return pm(t,n,r)}}const Sb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function OE(e,t,n,r){jb(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Sb.has(s)?s:gm(s),t.attrs[s])}class $E extends kb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ye}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Fi.has(n)){const r=Xw(n);return r&&r.default||0}return n=Sb.has(n)?n:gm(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return fb(t,n,r)}build(t,n,r){cb(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){OE(t,n,r,s)}mount(t){this.isSVGTag=db(t.tagName),super.mount(t)}}const ME=(e,t)=>fm(e)?new $E(t):new LE(t,{allowProjection:e!==b.Fragment});function pi(e,t,n){const r=e.getProps();return mm(r,t,n!==void 0?n:r.custom,e)}const oh=e=>Array.isArray(e);function FE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ei(n))}function VE(e){return oh(e)?e[e.length-1]||0:e}function zE(e,t){const n=pi(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const l=VE(i[a]);FE(e,a,l)}}function UE(e){return!!(_t(e)&&e.add)}function lh(e,t){const n=e.getValue("willChange");if(UE(n))return n.add(t);if(!n&&mr.WillChange){const r=new mr.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Nb(e){return e.props[mb]}const BE=e=>e!==null;function HE(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(BE),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const WE={type:"spring",stiffness:500,damping:25,restSpeed:10},qE=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),GE={type:"keyframes",duration:.8},KE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},XE=(e,{keyframes:t})=>t.length>2?GE:Fi.has(e)?e.startsWith("scale")?qE(t[1]):WE:KE;function YE({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const ym=(e,t,n,r={},s,i)=>a=>{const l=sm(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-qn(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};YE(l)||Object.assign(d,XE(e,d)),d.duration&&(d.duration=qn(d.duration)),d.repeatDelay&&(d.repeatDelay=qn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(nh(d),d.delay===0&&(h=!0)),(mr.instantAnimations||mr.skipAnimations)&&(h=!0,nh(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const f=HE(d.keyframes,l);if(f!==void 0){Fe.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new nm(d):new v_(d)};function JE({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function _b(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(i=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),f=l[d];if(f===void 0||u&&JE(u,d))continue;const m={delay:n,...sm(i||{},d)},p=h.get();if(p!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===p&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const y=Nb(e);if(y){const g=window.MotionHandoffAnimation(y,d,Fe);g!==null&&(m.startTime=g,v=!0)}}lh(e,d),h.start(ym(d,h,f,e.shouldReduceMotion&&qw.has(d)?{type:!1}:m,e,v));const w=h.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{Fe.update(()=>{a&&zE(e,a)})}),c}function Eb(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),a=e.size,l=(a-1)*r;return typeof n=="function"?n(i,a):s===1?i*r:l-i*r}function ch(e,t,n={}){var c;const r=pi(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(_b(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return QE(e,t,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,a]:[a,i];return u().then(()=>d())}else return Promise.all([i(),a(n.delay)])}function QE(e,t,n=0,r=0,s=0,i=1,a){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(ch(c,t,{...a,delay:n+(typeof r=="function"?0:r)+Eb(e.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function ZE(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>ch(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=ch(e,t,n);else{const s=typeof t=="function"?pi(e,t,n.custom):t;r=Promise.all(_b(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Pb(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const eP=um.length;function Cb(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Cb(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<eP;n++){const r=um[n],s=e.props[r];(Za(s)||s===!1)&&(t[r]=s)}return t}const tP=[...cm].reverse(),nP=cm.length;function rP(e){return t=>Promise.all(t.map(({animation:n,options:r})=>ZE(e,n,r)))}function sP(e){let t=rP(e),n=Bg(),r=!0;const s=c=>(u,d)=>{var f;const h=pi(e,d,c==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:p,...v}=h;u={...u,...v,...p}}return u};function i(c){t=c(e)}function a(c){const{props:u}=e,d=Cb(e.parent)||{},h=[],f=new Set;let m={},p=1/0;for(let w=0;w<nP;w++){const y=tP[w],g=n[y],x=u[y]!==void 0?u[y]:d[y],S=Za(x),E=y===c?g.isActive:null;E===!1&&(p=w);let j=x===d[y]&&x!==u[y]&&S;if(j&&r&&e.manuallyAnimateOnMount&&(j=!1),g.protectedKeys={...m},!g.isActive&&E===null||!x&&!g.prevProp||kc(x)||typeof x=="boolean")continue;const P=iP(g.prevProp,x);let C=P||y===c&&g.isActive&&!j&&S||w>p&&S,O=!1;const D=Array.isArray(x)?x:[x];let V=D.reduce(s(y),{});E===!1&&(V={});const{prevResolvedValues:G={}}=g,de={...G,...V},M=A=>{C=!0,f.has(A)&&(O=!0,f.delete(A)),g.needsAnimating[A]=!0;const T=e.getValue(A);T&&(T.liveStyle=!1)};for(const A in de){const T=V[A],U=G[A];if(m.hasOwnProperty(A))continue;let k=!1;oh(T)&&oh(U)?k=!Pb(T,U):k=T!==U,k?T!=null?M(A):f.add(A):T!==void 0&&f.has(A)?M(A):g.protectedKeys[A]=!0}g.prevProp=x,g.prevResolvedValues=V,g.isActive&&(m={...m,...V}),r&&e.blockInitialAnimation&&(C=!1);const $=j&&P;C&&(!$||O)&&h.push(...D.map(A=>{const T={type:y};if(typeof A=="string"&&r&&!$&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,k=pi(U,A);if(U.enteringChildren&&k){const{delayChildren:ee}=k.transition||{};T.delay=Eb(U.enteringChildren,e,ee)}}return{animation:A,options:T}}))}if(f.size){const w={};if(typeof u.initial!="boolean"){const y=pi(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(w.transition=y.transition)}f.forEach(y=>{const g=e.getBaseTarget(y),x=e.getValue(y);x&&(x.liveStyle=!0),w[y]=g??null}),h.push({animation:w})}let v=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(c,u)}),n[c].isActive=u;const d=a(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Bg(),r=!0}}}function iP(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Pb(t,e):!1}function os(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Bg(){return{animate:os(!0),whileInView:os(),whileHover:os(),whileTap:os(),whileDrag:os(),whileFocus:os(),exit:os()}}class ts{constructor(t){this.isMounted=!1,this.node=t}update(){}}class aP extends ts{constructor(t){super(t),t.animationState||(t.animationState=sP(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();kc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let oP=0;class lP extends ts{constructor(){super(...arguments),this.id=oP++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const cP={animation:{Feature:aP},exit:{Feature:lP}};function to(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function po(e){return{point:{x:e.pageX,y:e.pageY}}}const uP=e=>t=>om(t)&&e(t,po(t));function ka(e,t,n,r){return to(e,t,uP(n),r)}const Tb=1e-4,dP=1-Tb,hP=1+Tb,Ab=.01,fP=0-Ab,mP=0+Ab;function Rt(e){return e.max-e.min}function pP(e,t,n){return Math.abs(e-t)<=n}function Hg(e,t,n,r=.5){e.origin=r,e.originPoint=Ue(t.min,t.max,e.origin),e.scale=Rt(n)/Rt(t),e.translate=Ue(n.min,n.max,e.origin)-e.originPoint,(e.scale>=dP&&e.scale<=hP||isNaN(e.scale))&&(e.scale=1),(e.translate>=fP&&e.translate<=mP||isNaN(e.translate))&&(e.translate=0)}function ja(e,t,n,r){Hg(e.x,t.x,n.x,r?r.originX:void 0),Hg(e.y,t.y,n.y,r?r.originY:void 0)}function Wg(e,t,n){e.min=n.min+t.min,e.max=e.min+Rt(t)}function gP(e,t,n){Wg(e.x,t.x,n.x),Wg(e.y,t.y,n.y)}function qg(e,t,n){e.min=t.min-n.min,e.max=e.min+Rt(t)}function Sa(e,t,n){qg(e.x,t.x,n.x),qg(e.y,t.y,n.y)}function fn(e){return[e("x"),e("y")]}const Ib=({current:e})=>e?e.ownerDocument.defaultView:null,Gg=(e,t)=>Math.abs(e-t);function yP(e,t){const n=Gg(e.x,t.x),r=Gg(e.y,t.y);return Math.sqrt(n**2+r**2)}class Rb{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=xu(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=yP(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!p)return;const{point:v}=f,{timestamp:w}=yt;this.history.push({...v,timestamp:w});const{onStart:y,onMove:g}=this.handlers;m||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=yu(m,this.transformPagePoint),Fe.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:p,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=xu(f.type==="pointercancel"?this.lastMoveEventInfo:yu(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,y),v&&v(f,y)},!om(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const l=po(t),c=yu(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=yt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,xu(c,this.history)),this.removeListeners=ho(ka(this.contextWindow,"pointermove",this.handlePointerMove),ka(this.contextWindow,"pointerup",this.handlePointerUp),ka(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Xr(this.updatePoint)}}function yu(e,t){return t?{point:t(e.point)}:e}function Kg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function xu({point:e},t){return{point:e,delta:Kg(e,Db(t)),offset:Kg(e,xP(t)),velocity:vP(t,.1)}}function xP(e){return e[0]}function Db(e){return e[e.length-1]}function vP(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Db(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>qn(t)));)n--;if(!r)return{x:0,y:0};const i=Gn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function wP(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ue(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ue(n,e,r.max):Math.min(e,n)),e}function Xg(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function bP(e,{top:t,left:n,bottom:r,right:s}){return{x:Xg(e.x,n,s),y:Xg(e.y,t,r)}}function Yg(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function kP(e,t){return{x:Yg(e.x,t.x),y:Yg(e.y,t.y)}}function jP(e,t){let n=.5;const r=Rt(e),s=Rt(t);return s>r?n=Ya(t.min,t.max-r,e.min):r>s&&(n=Ya(e.min,e.max-s,t.min)),fr(0,1,n)}function SP(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const uh=.35;function NP(e=uh){return e===!1?e=0:e===!0&&(e=uh),{x:Jg(e,"left","right"),y:Jg(e,"top","bottom")}}function Jg(e,t,n){return{min:Qg(e,t),max:Qg(e,n)}}function Qg(e,t){return typeof e=="number"?e:e[t]||0}const _P=new WeakMap;class EP{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ye(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(po(h).point)},a=(h,f)=>{const{drag:m,dragPropagation:p,onDragStart:v}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=L_(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fn(y=>{let g=this.getAxisMotionValue(y).get()||0;if(Kn.test(g)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[y];S&&(g=Rt(S)*(parseFloat(g)/100))}}this.originPoint[y]=g}),v&&Fe.postRender(()=>v(h,f)),lh(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:v,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:y}=f;if(p&&this.currentDirection===null){this.currentDirection=PP(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),w&&w(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>fn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Rb(t,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Ib(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Fe.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Uo(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=wP(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&si(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=bP(r.layoutBox,t):this.constraints=!1,this.elastic=NP(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=SP(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!si(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=CE(r,s.root,this.visualElement.getTransformPagePoint());let a=kP(s.layout.layoutBox,i);if(n){const l=n(_E(a));this.hasMutatedConstraints=!!l,l&&(a=yb(l))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=fn(d=>{if(!Uo(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,p={type:"inertia",velocity:r?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return lh(this.visualElement,t),r.start(ym(t,r,0,n,this.visualElement,!1))}stopAnimation(){fn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){fn(n=>{const{drag:r}=this.getProps();if(!Uo(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];i.set(t[n]-Ue(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!si(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};fn(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=jP({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fn(a=>{if(!Uo(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Ue(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;_P.set(this.visualElement,this);const t=this.visualElement.current,n=ka(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();si(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Fe.read(r);const a=to(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(fn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=uh,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function Uo(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function PP(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class CP extends ts{constructor(t){super(t),this.removeGroupControls=vn,this.removeListeners=vn,this.controls=new EP(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zg=e=>(t,n)=>{e&&Fe.postRender(()=>e(t,n))};class TP extends ts{constructor(){super(...arguments),this.removePointerDownListener=vn}onPointerDown(t){this.session=new Rb(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ib(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Zg(t),onStart:Zg(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Fe.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=ka(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function e0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Zi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const n=e0(e,t.target.x),r=e0(e,t.target.y);return`${n}% ${r}%`}},AP={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Yr.parse(e);if(s.length>5)return r;const i=Yr.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=Ue(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};let vu=!1;class IP extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;eE(RP),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),vu&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),hl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,vu=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Fe.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),am.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;vu=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Lb(e){const[t,n]=rb(),r=b.useContext(Mf);return o.jsx(IP,{...e,layoutGroup:r,switchLayoutGroup:b.useContext(pb),isPresent:t,safeToRemove:n})}const RP={borderRadius:{...Zi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zi,borderTopRightRadius:Zi,borderBottomLeftRadius:Zi,borderBottomRightRadius:Zi,boxShadow:AP};function DP(e,t,n){const r=_t(e)?e:Ei(e);return r.start(ym("",r,t,n)),r.animation}const LP=(e,t)=>e.depth-t.depth;class OP{constructor(){this.children=[],this.isDirty=!1}add(t){zf(this.children,t),this.isDirty=!0}remove(t){Uf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(LP),this.isDirty=!1,this.children.forEach(t)}}function $P(e,t){const n=Ht.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Xr(r),e(i-t))};return Fe.setup(r,!0),()=>Xr(r)}const Ob=["TopLeft","TopRight","BottomLeft","BottomRight"],MP=Ob.length,t0=e=>typeof e=="string"?parseFloat(e):e,n0=e=>typeof e=="number"||oe.test(e);function FP(e,t,n,r,s,i){s?(e.opacity=Ue(0,n.opacity??1,VP(r)),e.opacityExit=Ue(t.opacity??1,0,zP(r))):i&&(e.opacity=Ue(t.opacity??1,n.opacity??1,r));for(let a=0;a<MP;a++){const l=`border${Ob[a]}Radius`;let c=r0(t,l),u=r0(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||n0(c)===n0(u)?(e[l]=Math.max(Ue(t0(c),t0(u),r),0),(Kn.test(u)||Kn.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Ue(t.rotate||0,n.rotate||0,r))}function r0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const VP=$b(0,.5,jw),zP=$b(.5,.95,vn);function $b(e,t,n){return r=>r<e?0:r>t?1:n(Ya(e,t,r))}function s0(e,t){e.min=t.min,e.max=t.max}function dn(e,t){s0(e.x,t.x),s0(e.y,t.y)}function i0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function a0(e,t,n,r,s){return e-=t,e=ql(e,1/n,r),s!==void 0&&(e=ql(e,1/s,r)),e}function UP(e,t=0,n=1,r=.5,s,i=e,a=e){if(Kn.test(t)&&(t=parseFloat(t),t=Ue(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Ue(i.min,i.max,r);e===i&&(l-=t),e.min=a0(e.min,t,n,l,s),e.max=a0(e.max,t,n,l,s)}function o0(e,t,[n,r,s],i,a){UP(e,t[n],t[r],t[s],t.scale,i,a)}const BP=["x","scaleX","originX"],HP=["y","scaleY","originY"];function l0(e,t,n,r){o0(e.x,t,BP,n?n.x:void 0,r?r.x:void 0),o0(e.y,t,HP,n?n.y:void 0,r?r.y:void 0)}function c0(e){return e.translate===0&&e.scale===1}function Mb(e){return c0(e.x)&&c0(e.y)}function u0(e,t){return e.min===t.min&&e.max===t.max}function WP(e,t){return u0(e.x,t.x)&&u0(e.y,t.y)}function d0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Fb(e,t){return d0(e.x,t.x)&&d0(e.y,t.y)}function h0(e){return Rt(e.x)/Rt(e.y)}function f0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class qP{constructor(){this.members=[]}add(t){zf(this.members,t),t.scheduleRender()}remove(t){if(Uf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GP(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:p}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),p&&(r+=`skewY(${p}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const wu=["","X","Y","Z"],KP=1e3;let XP=0;function bu(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Vb(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Nb(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Fe,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Vb(r)}function zb({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=XP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(QP),this.nodes.forEach(nC),this.nodes.forEach(rC),this.nodes.forEach(ZP)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new OP)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Wf),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=nb(a)&&!z_(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Fe.read(()=>{h=window.innerWidth}),e(a,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=$P(f,250),hl.hasAnimatedSinceResize&&(hl.hasAnimatedSinceResize=!1,this.nodes.forEach(g0)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||lC,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=u.getProps(),y=!this.targetLayout||!Fb(this.targetLayout,m),g=!h&&f;if(this.options.layoutRoot||this.resumeFrom||g||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...sm(p,"layout"),onPlay:v,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(d,g)}else h||g0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sC),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(m0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(p0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(tC),this.nodes.forEach(YP),this.nodes.forEach(JP)):this.nodes.forEach(p0),this.clearAllSnapshots();const l=Ht.now();yt.delta=fr(0,1e3/60,l-yt.timestamp),yt.timestamp=l,yt.isProcessing=!0,cu.update.process(yt),cu.preRender.process(yt),cu.render.process(yt),yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,am.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(eC),this.sharedNodes.forEach(iC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Rt(this.snapshot.measuredBox.x)&&!Rt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Mb(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||fs(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),cC(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return Ye();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(uC))){const{scroll:d}=this.root;d&&(ii(l.x,d.offset.x),ii(l.y,d.offset.y))}return l}removeElementScroll(a){var c;const l=Ye();if(dn(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&dn(l,a),ii(l.x,h.offset.x),ii(l.y,h.offset.y))}return l}applyTransform(a,l=!1){const c=Ye();dn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ai(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),fs(d.latestValues)&&ai(c,d.latestValues)}return fs(this.latestValues)&&ai(c,this.latestValues),c}removeTransform(a){const l=Ye();dn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!fs(u.latestValues))continue;sh(u.latestValues)&&u.updateSnapshot();const d=Ye(),h=u.measurePageBox();dn(d,h),l0(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return fs(this.latestValues)&&l0(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=yt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ye(),this.relativeTargetOrigin=Ye(),Sa(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ye(),this.targetWithTransforms=Ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dn(this.target,this.layout.layoutBox),vb(this.target,this.targetDelta)):dn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ye(),this.relativeTargetOrigin=Ye(),Sa(this.relativeTargetOrigin,this.target,m.target),dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||sh(this.parent.latestValues)||xb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===yt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;dn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;PE(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ye());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(i0(this.prevProjectionDelta.x,this.projectionDelta.x),i0(this.prevProjectionDelta.y,this.projectionDelta.y)),ja(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!f0(this.projectionDelta.x,this.prevProjectionDelta.x)||!f0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=oi(),this.projectionDelta=oi(),this.projectionDeltaWithTransform=oi()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=oi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Ye(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,v=m!==p,w=this.getStack(),y=!w||w.members.length<=1,g=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(oC));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const E=S/1e3;y0(h.x,a.x,E),y0(h.y,a.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sa(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aC(this.relativeTarget,this.relativeTargetOrigin,f,E),x&&WP(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Ye()),dn(x,this.relativeTarget)),v&&(this.animationValues=d,FP(d,u,this.latestValues,E,g,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Xr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fe.update(()=>{hl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ei(0)),this.currentAnimation=DP(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&Ub(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ye();const h=Rt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=Rt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}dn(l,c),ai(l,d),ja(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new qP),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&bu("z",a,u,this.animationValues);for(let d=0;d<wu.length;d++)bu(`rotate${wu[d]}`,a,u,this.animationValues),bu(`skew${wu[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=dl(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=dl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!fs(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=GP(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),a.transform=h;const{x:f,y:m}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const p in eo){if(d[p]===void 0)continue;const{correct:v,applyTo:w,isCSSVariable:y}=eo[p],g=h==="none"?d[p]:v(d[p],u);if(w){const x=w.length;for(let S=0;S<x;S++)a[w[S]]=g}else y?this.options.visualElement.renderState.vars[p]=g:a[p]=g}this.options.layoutId&&(a.pointerEvents=u===this?dl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(m0),this.root.sharedNodes.clear()}}}function YP(e){e.updateLayout()}function JP(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i==="size"?fn(h=>{const f=a?t.measuredBox[h]:t.layoutBox[h],m=Rt(f);f.min=r[h].min,f.max=f.min+m}):Ub(i,t.layoutBox,r)&&fn(h=>{const f=a?t.measuredBox[h]:t.layoutBox[h],m=Rt(r[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=oi();ja(l,r,t.layoutBox);const c=oi();a?ja(c,e.applyTransform(s,!0),t.measuredBox):ja(c,r,t.layoutBox);const u=!Mb(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=Ye();Sa(p,t.layoutBox,f.layoutBox);const v=Ye();Sa(v,r,m.layoutBox),Fb(p,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function QP(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function ZP(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function eC(e){e.clearSnapshot()}function m0(e){e.clearMeasurements()}function p0(e){e.isLayoutDirty=!1}function tC(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function g0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function nC(e){e.resolveTargetDelta()}function rC(e){e.calcProjection()}function sC(e){e.resetSkewAndRotation()}function iC(e){e.removeLeadSnapshot()}function y0(e,t,n){e.translate=Ue(t.translate,0,n),e.scale=Ue(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function x0(e,t,n,r){e.min=Ue(t.min,n.min,r),e.max=Ue(t.max,n.max,r)}function aC(e,t,n,r){x0(e.x,t.x,n.x,r),x0(e.y,t.y,n.y,r)}function oC(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const lC={duration:.45,ease:[.4,0,.1,1]},v0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),w0=v0("applewebkit/")&&!v0("chrome/")?Math.round:vn;function b0(e){e.min=w0(e.min),e.max=w0(e.max)}function cC(e){b0(e.x),b0(e.y)}function Ub(e,t,n){return e==="position"||e==="preserve-aspect"&&!pP(h0(t),h0(n),.2)}function uC(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const dC=zb({attachResizeListener:(e,t)=>to(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ku={current:void 0},Bb=zb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ku.current){const e=new dC({});e.mount(window),e.setOptions({layoutScroll:!0}),ku.current=e}return ku.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),hC={pan:{Feature:TP},drag:{Feature:CP,ProjectionNode:Bb,MeasureLayout:Lb}};function k0(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Fe.postRender(()=>i(t,po(t)))}class fC extends ts{mount(){const{current:t}=this.node;t&&(this.unmount=O_(t,(n,r)=>(k0(this.node,r,"Start"),s=>k0(this.node,s,"End"))))}unmount(){}}class mC extends ts{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ho(to(this.node.current,"focus",()=>this.onFocus()),to(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function j0(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Fe.postRender(()=>i(t,po(t)))}class pC extends ts{mount(){const{current:t}=this.node;t&&(this.unmount=V_(t,(n,r)=>(j0(this.node,r,"Start"),(s,{success:i})=>j0(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const dh=new WeakMap,ju=new WeakMap,gC=e=>{const t=dh.get(e.target);t&&t(e)},yC=e=>{e.forEach(gC)};function xC({root:e,...t}){const n=e||document;ju.has(n)||ju.set(n,{});const r=ju.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(yC,{root:e,...t})),r[s]}function vC(e,t,n){const r=xC(t);return dh.set(e,n),r.observe(e),()=>{dh.delete(e),r.unobserve(e)}}const wC={some:0,all:1};class bC extends ts{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:wC[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return vC(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(kC(t,n))&&this.startObserver()}unmount(){}}function kC({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const jC={inView:{Feature:bC},tap:{Feature:pC},focus:{Feature:mC},hover:{Feature:fC}},SC={layout:{ProjectionNode:Bb,MeasureLayout:Lb}},NC={...cP,...jC,...hC,...SC},Y=NE(NC,ME);var _C={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...c},u)=>b.createElement("svg",{ref:u,..._C,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${EC(e)}`,...c},[...t.map(([d,h])=>b.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n},xm=K("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),xr=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Kt=K("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ls=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),hh=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),PC=K("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),CC=K("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Hb=K("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Su=K("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),TC=K("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),st=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),gi=K("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),zn=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Un=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ut=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Wb=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),qb=K("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),Rn=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),vm=K("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),wm=K("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),AC=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Gl=K("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),IC=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Et=K("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),fh=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Gb=K("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Kb=K("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),RC=K("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]),bm=K("GitPullRequest",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]),DC=K("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Nu=K("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),km=K("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Tn=K("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),fl=K("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),LC=K("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),OC=K("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),$C=K("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),MC=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Xb=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),FC=K("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),S0=K("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),VC=K("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),zC=K("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Ci=K("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),N0=K("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),UC=K("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),BC=K("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),HC=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_s=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),_u=K("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Yb=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),_0=K("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),WC=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),no=K("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Kl=K("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),jm=K("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),qC=K("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ar=K("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),GC=K("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),KC=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Or=K("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),pr=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),XC=K("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Sm=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Nm=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Jb=K("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Jr=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),qr=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xl=K("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function YC({isCompact:e}){const n=Jn().pathname.split("/").filter(s=>s),r={"strategic-directives":"Strategic Directives",prds:"PRDs",handoffs:"Handoffs",context:"Context Monitor",progress:"Progress Tracker"};return o.jsxs("nav",{className:`flex items-center ${e?"py-1 px-2":"py-2 px-4"}`,children:[o.jsxs(lr,{to:"/",className:"flex items-center text-purple-100 hover:text-white transition-colors drop-shadow-sm",children:[o.jsx(km,{className:e?"w-3 h-3":"w-4 h-4"}),o.jsx("span",{className:`${e?"ml-1 text-xs":"ml-2 text-sm"}`,children:"Dashboard"})]}),n.map((s,i)=>{const a=`/${n.slice(0,i+1).join("/")}`,l=i===n.length-1,c=r[s]||s;return o.jsxs(ao.Fragment,{children:[o.jsx(Ut,{className:`${e?"w-3 h-3 mx-1":"w-4 h-4 mx-2"} text-purple-200`}),l?o.jsx("span",{className:`${e?"text-xs":"text-sm"} font-medium text-white drop-shadow-sm`,children:c}):o.jsx(lr,{to:a,className:`${e?"text-xs":"text-sm"} text-purple-100 hover:text-white transition-colors drop-shadow-sm`,children:c})]},s)})]})}function Sc({onRefresh:e,isCompact:t=!1,isCollapsed:n=!1}){const[r,s]=b.useState("idle"),[i,a]=b.useState(""),[l,c]=b.useState(null),u=async()=>{console.log(" Manual Refresh: Starting database sync..."),s("refreshing"),a("Syncing with database...");try{const m=await fetch("/api/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"database"})});if(!m.ok)throw new Error("Database refresh failed");const p=await m.json();console.log(" Database refreshed:",p),e&&(console.log(" Triggering UI refresh..."),await e()),s("complete"),a(`Refreshed: ${p.sds||0} SDs, ${p.prds||0} PRDs`),c(new Date),setTimeout(()=>{s("idle"),a("")},3e3)}catch(m){console.error(" Refresh Error:",m),s("error"),a(`Failed: ${m.message}`),setTimeout(()=>{s("idle"),a("")},5e3)}},d=()=>{switch(r){case"refreshing":return o.jsx(wm,{className:"w-4 h-4 animate-spin"});case"complete":return o.jsx(st,{className:"w-4 h-4 text-green-500"});case"error":return o.jsx(xr,{className:"w-4 h-4 text-red-500"});default:return o.jsx(_s,{className:"w-4 h-4"})}},h=()=>{switch(r){case"refreshing":return"bg-blue-500 hover:bg-blue-600";case"complete":return"bg-green-500 hover:bg-green-600";case"error":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-600 hover:bg-gray-700"}},f=r==="refreshing";return o.jsxs("div",{className:"relative flex items-center",children:[o.jsxs(Y.button,{onClick:u,disabled:f,className:`
          flex items-center ${n?"justify-center w-full":""} transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
          ${h()} text-white rounded hover:opacity-90
          ${n?"px-2 py-2":t?"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm":"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base"}
        `,whileHover:{scale:f?1:1.05},whileTap:{scale:f?1:.95},title:n?"Manual Refresh - Sync with database":"Manually sync with database (automatic real-time updates are active)",children:[d(),!n&&o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:`${t?"ml-1":"ml-1 sm:ml-2"} hidden xs:inline`,children:[r==="idle"&&"Manual Refresh",r==="refreshing"&&"Syncing...",r==="complete"&&"Synced!",r==="error"&&"Failed"]}),o.jsxs("span",{className:"xs:hidden ml-1",children:[r==="idle"&&"",r==="refreshing"&&"",r==="complete"&&"",r==="error"&&""]})]})]}),o.jsx(tn,{children:i&&!n&&o.jsx(Y.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`
              absolute left-full ml-4 top-1/2 transform -translate-y-1/2
              text-sm px-3 py-1 rounded-lg whitespace-nowrap z-50
              ${r==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":r==="complete"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}
              ${t?"text-xs px-2 py-0.5":""}
            `,children:i})}),o.jsx(tn,{children:n&&i&&o.jsxs(Y.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`
              absolute left-full ml-2 top-1/2 transform -translate-y-1/2
              text-xs px-2 py-1 rounded-lg whitespace-nowrap z-50 pointer-events-none
              ${r==="error"?"bg-red-900 text-red-200":r==="complete"?"bg-green-900 text-green-200":"bg-blue-900 text-blue-200"}
            `,children:[r==="refreshing"&&"Syncing",r==="complete"&&"Done!",r==="error"&&"Error"]})}),l&&r==="idle"&&o.jsxs("div",{className:`absolute left-full ml-4 top-full mt-1 text-gray-500 dark:text-gray-400 whitespace-nowrap ${t?"text-xs":"text-sm"}`,children:["Last refresh: ",l.toLocaleTimeString()]}),o.jsx("div",{className:"absolute -top-1 -right-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-400 rounded-full animate-ping"})]})})]})}const Qb=({className:e=""})=>{const t=()=>{const c=localStorage.getItem("theme");return c?c==="dark":!0},[n,r]=b.useState(t),[s,i]=b.useState(!1);b.useLayoutEffect(()=>{const c=document.documentElement;n?(c.classList.add("dark"),c.classList.remove("light"),localStorage.setItem("theme","dark")):(c.classList.remove("dark"),c.classList.add("light"),localStorage.setItem("theme","light"))},[n]),b.useEffect(()=>{const c=setTimeout(()=>{const u=document.documentElement,d=localStorage.getItem("theme");d!=="light"?(u.classList.add("dark"),u.classList.remove("light"),d||localStorage.setItem("theme","dark"),r(!0)):(u.classList.remove("dark"),u.classList.add("light"),r(!1))},10);return()=>clearTimeout(c)},[]);const a=c=>{const u=document.documentElement;c?(u.classList.add("dark"),u.classList.remove("light"),localStorage.setItem("theme","dark")):(u.classList.remove("dark"),u.classList.add("light"),localStorage.setItem("theme","light"))},l=()=>{if(s)return;i(!0);const c=!n;r(c),a(c),setTimeout(()=>i(!1),300)};return o.jsxs("button",{onClick:l,className:`
        relative flex items-center justify-center
        w-12 h-6 rounded-full transition-all duration-300 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${n?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-600"}
        ${s?"scale-95":"hover:scale-105"}
        ${e}
      `,title:n?"Switch to light mode":"Switch to dark mode","aria-label":n?"Switch to light mode":"Switch to dark mode",disabled:s,children:[o.jsx("div",{className:`
        absolute inset-0 rounded-full transition-all duration-300
        ${n?"bg-gradient-to-r from-blue-600 to-blue-500":"bg-gradient-to-r from-gray-300 to-gray-200"}
      `}),o.jsxs("div",{className:`
        relative w-5 h-5 rounded-full transition-all duration-300 ease-in-out transform
        bg-white dark:bg-gray-100 shadow-lg
        flex items-center justify-center
        ${n?"translate-x-3":"-translate-x-3"}
        ${s?"scale-90":""}
      `,children:[o.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${n?"opacity-100":"opacity-0"}
        `,children:o.jsx(zC,{className:"w-3 h-3 text-blue-600 dark:text-blue-500"})}),o.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${n?"opacity-0":"opacity-100"}
        `,children:o.jsx(qC,{className:"w-3 h-3 text-yellow-500"})})]}),o.jsx("div",{className:`
        absolute inset-0 rounded-full opacity-0 transition-opacity duration-300
        ${n?"bg-blue-400 group-hover:opacity-20":"bg-yellow-400 group-hover:opacity-20"}
        pointer-events-none
      `})]})};function _m(){const[e,t]=b.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return b.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=s=>{t(s.matches)};if(n.addEventListener)return n.addEventListener("change",r),()=>n.removeEventListener("change",r);if(n.addListener)return n.addListener(r),()=>n.removeListener(r)},[]),e}const JC={normal:200},Zb={easeOut:[0,0,.2,1],spring:{type:"spring",stiffness:300,damping:30}},QC={slideUp:{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:JC.normal/1e3,ease:Zb.easeOut}}},ZC={container:{animate:{transition:{staggerChildren:.05,delayChildren:.1}}}},E0=Zb.spring,eT=QC.slideUp,tT=ZC.container;function nT({state:e,isConnected:t,isSidebarCollapsed:n,setIsSidebarCollapsed:r,isCompactMode:s,setIsCompactMode:i,isMobileMenuOpen:a,setIsMobileMenuOpen:l,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h,setActiveSD:f}){var E;const m=_m(),p=Jn(),v=[{path:"/",icon:km,label:"Dashboard",tooltip:"Dashboard"},{path:"/strategic-directives",icon:Et,label:"Strategic Directives",tooltip:"SDs"},{path:"/backlog",icon:Ci,label:"Backlog",tooltip:"Backlog"},{path:"/directive-lab",icon:Gb,label:"Directive Lab",tooltip:"Lab"},{path:"/pr-reviews",icon:bm,label:"PR Reviews",tooltip:"PRs"}],w={expanded:{width:"16rem",transition:m?{duration:0}:E0},collapsed:{width:"4rem",transition:m?{duration:0}:E0}},y={rest:{scale:1,transition:{duration:.2}},hover:{scale:m?1:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:m?1:.98}},g={hidden:{opacity:0,x:-10,transition:{duration:.1}},visible:{opacity:1,x:0,transition:{duration:.2,delay:.5}}},x=p.pathname==="/directive-lab",S=s?"p-2 pt-16 md:pt-2":x?"p-0":"p-6 pt-20 md:pt-6";return o.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 relative",children:[o.jsx(Y.button,{onClick:()=>l(!a),className:"mobile-menu-button fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg md:hidden",whileHover:{scale:m?1:1.05},whileTap:{scale:m?1:.95},children:o.jsx(tn,{mode:"wait",children:a?o.jsx(Y.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:m?0:.2},children:o.jsx(qr,{className:"w-6 h-6"})},"close"):o.jsx(Y.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:m?0:.2},children:o.jsx(FC,{className:"w-6 h-6"})},"menu")})}),o.jsx(tn,{children:a&&o.jsx(Y.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>l(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:m?0:.2}})}),o.jsxs(Y.div,{className:`
          fixed md:static inset-y-0 left-0 bg-gradient-to-br from-purple-600 via-purple-700 to-blue-800 shadow-2xl 
          z-50 flex flex-col overflow-hidden transition-transform duration-300 ease-in-out
          md:transform-none backdrop-blur-xl
          ${a?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,initial:!1,animate:n?"collapsed":"expanded",variants:w,children:[o.jsxs("div",{className:`${s?"p-2":"p-4"} border-b border-purple-400/30 backdrop-blur-sm relative overflow-hidden`,children:[o.jsx(Y.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:m?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:m?0:4,repeat:1/0,ease:"linear"}}),o.jsxs("div",{className:`flex items-center ${n?"justify-center":"justify-between"}`,children:[o.jsx(tn,{children:!n&&o.jsx(Y.h1,{className:"text-xl font-bold text-white relative z-10 drop-shadow-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:m?0:.15},children:"LEO Protocol"})}),o.jsx(Y.button,{onClick:()=>r(!n),className:"hidden md:block p-1 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/10 relative z-10",title:n?"Expand sidebar":"Collapse sidebar",whileHover:{scale:m?1:1.1},whileTap:{scale:m?1:.9},children:o.jsx(Y.div,{animate:{rotate:n?0:180},transition:{duration:m?0:.15},children:o.jsx(Ut,{className:"w-5 h-5"})})})]}),o.jsx(tn,{children:!n&&o.jsxs(Y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:m?0:.15},children:[o.jsxs("div",{className:"mt-2 flex items-center",children:[o.jsx(Y.div,{className:`w-2 h-2 rounded-full mr-2 ${t?"bg-green-500":"bg-red-500"}`,animate:{scale:t?[1,1.2,1]:1},transition:{duration:2,repeat:t?1/0:0,repeatType:"loop"}}),o.jsx("span",{className:"text-sm text-purple-100 relative z-10",children:t?"Connected":"Disconnected"})]}),o.jsxs(Y.span,{className:"text-xs px-2 py-1 bg-white/20 text-white rounded-full inline-block mt-2 backdrop-blur-sm border border-white/20 relative z-10 font-medium",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:["v",((E=e.leoProtocol)==null?void 0:E.version)||"detecting..."]})]})})]}),o.jsxs("nav",{className:`flex-1 ${s?"p-2":"p-4"} relative`,children:[o.jsx(Y.div,{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"20px 20px"},animate:{backgroundPosition:m?"0px 0px":["0px 0px","20px 20px","0px 0px"]},transition:{duration:m?0:20,repeat:1/0,ease:"linear"}}),o.jsx(Y.ul,{className:"space-y-1",variants:tT,initial:"hidden",animate:"visible",children:v.map(({path:j,icon:P,label:C,tooltip:O},D)=>o.jsx(Y.li,{variants:eT,custom:D,children:o.jsx(U2,{to:j,className:({isActive:V})=>`block ${V?"active-nav-item":""}`,onClick:()=>l(!1),children:({isActive:V})=>o.jsxs(Y.div,{className:`flex items-center ${s?"p-1.5":"p-2"} rounded-lg transition-all duration-300 group relative backdrop-blur-sm ${V?"bg-white/25 text-white border border-white/30 shadow-lg backdrop-blur-md":"hover:bg-white/10 text-purple-100 hover:text-white border border-transparent hover:border-white/20"}`,variants:y,initial:"rest",whileHover:"hover",whileTap:"tap",layout:!0,children:[V&&!m&&o.jsxs(o.Fragment,{children:[o.jsx(Y.div,{className:"absolute inset-0 rounded-lg bg-white/30 blur-xl",initial:{opacity:0,scale:.8},animate:{opacity:.6,scale:1},transition:{duration:.3}}),o.jsx(Y.div,{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400/40 to-blue-400/40",animate:{background:["linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))","linear-gradient(to right, rgba(59, 130, 246, 0.4), rgba(168, 85, 247, 0.4))","linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]}),o.jsx(P,{className:`${s?"w-4 h-4":"w-5 h-5"} ${n?"":"mr-3"} relative z-10`}),o.jsx(tn,{children:!n&&o.jsx(Y.span,{className:`${s?"text-sm":""} relative z-10`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:m?0:.2},children:C})}),o.jsxs(Y.span,{className:`absolute ${n?"left-full ml-2 top-1/2 transform -translate-y-1/2":"bottom-full mb-2 left-1/2 transform -translate-x-1/2"} px-2 py-1 bg-gray-900/90 backdrop-blur-md text-white text-xs rounded whitespace-nowrap pointer-events-none z-30 opacity-0 group-hover:opacity-100 transition-all duration-200 delay-300 border border-white/20 shadow-xl`,style:{visibility:"hidden"},animate:{opacity:0,visibility:"hidden"},whileHover:{opacity:1,visibility:"visible"},children:[O,o.jsx("div",{className:`absolute ${n?"right-full top-1/2 transform -translate-y-1/2 border-l-0 border-r-4 border-r-gray-900 dark:border-r-gray-700 border-t-4 border-b-4 border-t-transparent border-b-transparent":"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900 dark:border-t-gray-700 border-l-4 border-r-4 border-l-transparent border-r-transparent border-b-0"}`})]})]})})},j))})]}),o.jsxs(Y.div,{className:`border-t border-purple-400/30 ${s?"p-2":"p-4"} relative backdrop-blur-sm`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[o.jsxs(Y.button,{onClick:()=>i(!s),className:`w-full flex items-center ${s?"p-1.5":"p-2"} rounded-lg hover:bg-white/10 text-purple-100 hover:text-white transition-all duration-300 group relative border border-transparent hover:border-white/20 backdrop-blur-sm`,title:s?"Standard view":"Compact view",whileHover:{scale:m?1:1.02},whileTap:{scale:m?1:.98},children:[o.jsx(Y.div,{animate:{rotate:s?180:0},transition:{duration:m?0:.15},children:o.jsx(VC,{className:`${s?"w-4 h-4":"w-5 h-5"} ${n?"":"mr-3"}`})}),o.jsx(tn,{children:!n&&o.jsx(Y.span,{className:s?"text-sm":"",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?"Standard View":"Compact View"})}),o.jsx(tn,{children:n&&o.jsx(Y.span,{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap pointer-events-none z-10",variants:g,initial:"hidden",whileHover:"visible",exit:"hidden",children:s?"Standard":"Compact"})})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-purple-400/30",children:o.jsx(Sc,{onRefresh:h,isCompact:s,isCollapsed:n})})]})]}),o.jsxs(Y.div,{className:"flex-1 flex flex-col overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:m?0:.08},style:{paddingTop:"env(safe-area-inset-top)"},children:[o.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-600 via-purple-700 to-blue-800 border-b border-purple-400/30 shadow-lg relative overflow-hidden backdrop-blur-xl",children:[o.jsx(Y.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:m?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:m?0:4,repeat:1/0,ease:"linear"}}),o.jsx(Y.div,{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"40px 40px"},animate:{backgroundPosition:m?"0px 0px":["0px 0px","40px 40px","0px 0px"]},transition:{duration:m?0:15,repeat:1/0,ease:"linear"}}),o.jsx("div",{className:"flex-1 relative z-10",children:o.jsx(YC,{isCompact:s})}),o.jsx("div",{className:"flex items-center px-4 py-2 relative z-10",children:o.jsx(Qb,{})})]}),o.jsx("main",{className:`flex-1 overflow-y-auto ${S}`,children:o.jsx(tn,{children:o.jsx(Y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:m?0:.1,ease:"easeOut"},children:o.jsx(C2,{context:{state:e,isCompactMode:s,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h}})},p.pathname)})})]})]})}var Em={},mh={exports:{}};(function(e,t){(function(n,r){r(t)})(vt,function(n){var r=function(){return r=Object.assign||function(i){for(var a,l=1,c=arguments.length;l<c;l++)for(var u in a=arguments[l])Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u]);return i},r.apply(this,arguments)},s=function(){function i(a,l,c){var u=this;this.endVal=l,this.options=c,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(d){u.startTime||(u.startTime=d);var h=d-u.startTime;u.remaining=u.duration-h,u.useEasing?u.countDown?u.frameVal=u.startVal-u.easingFn(h,0,u.startVal-u.endVal,u.duration):u.frameVal=u.easingFn(h,u.startVal,u.endVal-u.startVal,u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(h/u.duration);var f=u.countDown?u.frameVal<u.endVal:u.frameVal>u.endVal;u.frameVal=f?u.endVal:u.frameVal,u.frameVal=Number(u.frameVal.toFixed(u.options.decimalPlaces)),u.printValue(u.frameVal),h<u.duration?u.rAF=requestAnimationFrame(u.count):u.finalEndVal!==null?u.update(u.finalEndVal):u.options.onCompleteCallback&&u.options.onCompleteCallback()},this.formatNumber=function(d){var h,f,m,p,v=d<0?"-":"";h=Math.abs(d).toFixed(u.options.decimalPlaces);var w=(h+="").split(".");if(f=w[0],m=w.length>1?u.options.decimal+w[1]:"",u.options.useGrouping){p="";for(var y=3,g=0,x=0,S=f.length;x<S;++x)u.options.useIndianSeparators&&x===4&&(y=2,g=1),x!==0&&g%y==0&&(p=u.options.separator+p),g++,p=f[S-x-1]+p;f=p}return u.options.numerals&&u.options.numerals.length&&(f=f.replace(/[0-9]/g,function(E){return u.options.numerals[+E]}),m=m.replace(/[0-9]/g,function(E){return u.options.numerals[+E]})),v+u.options.prefix+f+m+u.options.suffix},this.easeOutExpo=function(d,h,f,m){return f*(1-Math.pow(2,-10*d/m))*1024/1023+h},this.options=r(r({},this.defaults),c),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el=typeof a=="string"?document.getElementById(a):a,l=l??this.parse(this.el.innerHTML),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(l),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,a):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return u.handleScroll(u)}),window.onscroll=function(){window.onScrollFns.forEach(function(d){return d()})},this.handleScroll(this)))}return i.prototype.handleScroll=function(a){if(a&&window&&!a.once){var l=window.innerHeight+window.scrollY,c=a.el.getBoundingClientRect(),u=c.top+window.pageYOffset,d=c.top+c.height+window.pageYOffset;d<l&&d>window.scrollY&&a.paused?(a.paused=!1,setTimeout(function(){return a.start()},a.options.scrollSpyDelay),a.options.scrollSpyOnce&&(a.once=!0)):(window.scrollY>d||u>l)&&!a.paused&&a.reset()}},i.prototype.determineDirectionAndSmartEasing=function(){var a=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>a;var l=a-this.startVal;if(Math.abs(l)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=a;var c=this.countDown?1:-1;this.endVal=a+c*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=a,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},i.prototype.start=function(a){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),a&&(this.options.onCompleteCallback=a),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},i.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},i.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},i.prototype.update=function(a){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(a),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},i.prototype.printValue=function(a){var l;if(this.el){var c=this.formattingFn(a);!((l=this.options.plugin)===null||l===void 0)&&l.render?this.options.plugin.render(this.el,c):this.el.tagName==="INPUT"?this.el.value=c:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=c:this.el.innerHTML=c}},i.prototype.ensureNumber=function(a){return typeof a=="number"&&!isNaN(a)},i.prototype.validateValue=function(a){var l=Number(a);return this.ensureNumber(l)?l:(this.error="[CountUp] invalid start or end value: ".concat(a),null)},i.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},i.prototype.parse=function(a){var l=function(h){return h.replace(/([.,' ])/g,"\\$1")},c=l(this.options.separator),u=l(this.options.decimal),d=a.replace(new RegExp(c,"g"),"").replace(new RegExp(u,"g"),".");return parseFloat(d)},i}();n.CountUp=s})})(mh,mh.exports);var rT=mh.exports;Object.defineProperty(Em,"__esModule",{value:!0});var ft=b,sT=rT;function iT(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function P0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P0(Object(n),!0).forEach(function(r){lT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aT(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oT(e){var t=aT(e,"string");return typeof t=="symbol"?t:String(t)}function lT(e,t,n){return t=oT(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ph(){return ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ph.apply(this,arguments)}function cT(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ek(e,t){if(e==null)return{};var n=cT(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uT(e,t){return dT(e)||iT(e,t)||hT(e,t)||fT()}function dT(e){if(Array.isArray(e))return e}function hT(e,t){if(e){if(typeof e=="string")return C0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C0(e,t)}}function C0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ft.useLayoutEffect:ft.useEffect;function _n(e){var t=ft.useRef(e);return mT(function(){t.current=e}),ft.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current.apply(void 0,r)},[])}var pT=function(t,n){var r=n.decimal,s=n.decimals,i=n.duration,a=n.easingFn,l=n.end,c=n.formattingFn,u=n.numerals,d=n.prefix,h=n.separator,f=n.start,m=n.suffix,p=n.useEasing,v=n.useGrouping,w=n.useIndianSeparators,y=n.enableScrollSpy,g=n.scrollSpyDelay,x=n.scrollSpyOnce,S=n.plugin;return new sT.CountUp(t,l,{startVal:f,duration:i,decimal:r,decimalPlaces:s,easingFn:a,formattingFn:c,numerals:u,separator:h,prefix:d,suffix:m,plugin:S,useEasing:p,useIndianSeparators:w,useGrouping:v,enableScrollSpy:y,scrollSpyDelay:g,scrollSpyOnce:x})},gT=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],yT={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},tk=function(t){var n=Object.fromEntries(Object.entries(t).filter(function(O){var D=uT(O,2),V=D[1];return V!==void 0})),r=ft.useMemo(function(){return Yl(Yl({},yT),n)},[t]),s=r.ref,i=r.startOnMount,a=r.enableReinitialize,l=r.delay,c=r.onEnd,u=r.onStart,d=r.onPauseResume,h=r.onReset,f=r.onUpdate,m=ek(r,gT),p=ft.useRef(),v=ft.useRef(),w=ft.useRef(!1),y=_n(function(){return pT(typeof s=="string"?s:s.current,m)}),g=_n(function(O){var D=p.current;if(D&&!O)return D;var V=y();return p.current=V,V}),x=_n(function(){var O=function(){return g(!0).start(function(){c==null||c({pauseResume:S,reset:E,start:P,update:j})})};l&&l>0?v.current=setTimeout(O,l*1e3):O(),u==null||u({pauseResume:S,reset:E,update:j})}),S=_n(function(){g().pauseResume(),d==null||d({reset:E,start:P,update:j})}),E=_n(function(){g().el&&(v.current&&clearTimeout(v.current),g().reset(),h==null||h({pauseResume:S,start:P,update:j}))}),j=_n(function(O){g().update(O),f==null||f({pauseResume:S,reset:E,start:P})}),P=_n(function(){E(),x()}),C=_n(function(O){i&&(O&&E(),x())});return ft.useEffect(function(){w.current?a&&C(!0):(w.current=!0,C())},[a,w,C,l,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.formattingFn]),ft.useEffect(function(){return function(){E()}},[E]),{start:P,pauseResume:S,reset:E,update:j,getCountUp:g}},xT=["className","redraw","containerProps","children","style"],vT=function(t){var n=t.className,r=t.redraw,s=t.containerProps,i=t.children,a=t.style,l=ek(t,xT),c=ft.useRef(null),u=ft.useRef(!1),d=tk(Yl(Yl({},l),{},{ref:c,startOnMount:typeof i!="function"||t.delay===0,enableReinitialize:!1})),h=d.start,f=d.reset,m=d.update,p=d.pauseResume,v=d.getCountUp,w=_n(function(){h()}),y=_n(function(S){t.preserveValue||f(),m(S)}),g=_n(function(){if(typeof t.children=="function"&&!(c.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}v()});ft.useEffect(function(){g()},[g]),ft.useEffect(function(){u.current&&y(t.end)},[t.end,y]);var x=r&&t;return ft.useEffect(function(){r&&u.current&&w()},[w,r,x]),ft.useEffect(function(){!r&&u.current&&w()},[w,r,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.className,t.formattingFn]),ft.useEffect(function(){u.current=!0},[]),typeof i=="function"?i({countUpRef:c,start:h,reset:f,update:m,pauseResume:p,getCountUp:v}):ft.createElement("span",ph({className:n,ref:c,style:a},s),typeof t.start<"u"?v().formattingFn(t.start):"")},li=Em.default=vT;Em.useCountUp=tk;function wT({sdId:e,onClose:t}){var d,h;const[n,r]=b.useState(null),[s,i]=b.useState(!0),[a,l]=b.useState(null);b.useEffect(()=>{c()},[e]);const c=async()=>{try{i(!0);const f=await fetch(`/api/progress/audit/${e||""}`);if(!f.ok)throw new Error("Failed to fetch audit");const m=await f.json();r(m)}catch(f){l(f.message)}finally{i(!1)}};if(s)return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})});if(a)return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[o.jsxs("p",{className:"text-red-500",children:["Error: ",a]}),o.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-gray-500 text-white rounded",children:"Close"})]})});if(!n)return null;const u=f=>f.complete?"text-green-500":f.progress>0?"text-yellow-500":"text-gray-400";return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(qb,{className:"w-6 h-6 mr-2 text-blue-500"}),o.jsx("h2",{className:"text-xl font-semibold",children:"Progress Validation Audit"})]}),o.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:o.jsx(qr,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:n.title}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Calculated Progress"}),o.jsxs("p",{className:"text-2xl font-bold",children:[n.summary.calculatedProgress,"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Phase"}),o.jsx("p",{className:"text-2xl font-bold",children:n.summary.currentPhase})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Database Status"}),o.jsx("p",{className:"text-2xl font-bold",children:n.summary.databaseStatus})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Can Complete"}),o.jsx("div",{className:"text-2xl font-bold",children:n.summary.canComplete?o.jsx(st,{className:"w-8 h-8 text-green-500"}):o.jsx(Jr,{className:"w-8 h-8 text-red-500"})})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(pr,{className:"w-5 h-5 mr-2"}),"Phase Breakdown"]}),o.jsx("div",{className:"space-y-4",children:Object.entries(n.phaseBreakdown).map(([f,m])=>o.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsxs("span",{className:`text-lg font-semibold ${u(m)}`,children:[f," Agent"]}),o.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(Weight: ",m.weight,"%)"]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("span",{className:"text-lg font-bold",children:[m.progress,"%"]}),m.complete&&o.jsx(st,{className:"w-5 h-5 text-green-500"})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3",children:o.jsx("div",{className:`h-2 rounded-full ${m.complete?"bg-green-500":"bg-blue-500"}`,style:{width:`${m.progress}%`}})}),m.checklist&&m.checklist.length>0&&o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Checklist Items:"}),o.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:m.checklist.map((p,v)=>o.jsxs("div",{className:"flex items-start text-sm",children:[p.checked?o.jsx(gi,{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}):o.jsx(jm,{className:"w-4 h-4 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),o.jsxs("span",{className:p.checked?"text-gray-600 line-through":"",children:[p.text,p.source&&o.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",p.source,")"]})]})]},v))})]}),f==="EXEC"&&m.indicators&&o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Implementation Indicators:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(m.indicators.indicators).map(([p,v])=>o.jsxs("div",{className:"flex items-center text-sm",children:[v.status?o.jsx(st,{className:"w-4 h-4 text-green-500 mr-2"}):o.jsx(Jr,{className:"w-4 h-4 text-red-500 mr-2"}),o.jsxs("span",{children:[p,": ",v.details||"Not found"]})]},p))})]})]},f))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(CC,{className:"w-5 h-5 mr-2"}),"Progress Calculation"]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[((h=(d=n.phaseBreakdown)==null?void 0:d.PLAN)==null?void 0:h.checklist)&&n.phaseBreakdown.PLAN.checklist.filter(f=>f.text.includes("PRD created and saved")||f.text.includes("requirements mapped")||f.text.includes("specifications complete")||f.text.includes("Prerequisites verified")||f.text.includes("Risk mitigation")||f.text.includes("Context usage")).every(f=>f.checked)&&o.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded",children:[o.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:" Progress Calculation Note:"}),o.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"The PLAN phase handoff checklist is complete (PRD created with all handoff items done), but the system is incorrectly counting implementation acceptance criteria as PLAN phase items. According to LEO Protocol v4.0, PLAN phase should be 100% complete when the PRD is created with the handoff checklist done. The actual progress should be approximately 66% (LEAD + PLAN complete)."})]}),o.jsx("p",{className:"font-mono text-sm mb-2",children:n.calculations.formula}),o.jsx("div",{className:"space-y-1",children:n.calculations.breakdown.map((f,m)=>o.jsx("p",{className:`font-mono text-sm ${f.startsWith("Total")?"font-bold text-blue-600 dark:text-blue-400":""}`,children:f},m))})]})]}),n.validation.uncompletedItems>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(Kt,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Validation Issues"]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("p",{className:"font-semibold mb-2",children:[n.validation.uncompletedItems," uncompleted items preventing completion:"]}),n.validation.details.map((f,m)=>o.jsxs("div",{className:"mb-2",children:[o.jsxs("p",{className:"font-medium text-sm",children:[f.source," (",f.phase,"): ",f.items.length," items"]}),o.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400 ml-4",children:f.items.map((p,v)=>o.jsx("li",{children:p},v))})]},m))]})]}),n.recommendations.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(Et,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),o.jsx("div",{className:"space-y-2",children:n.recommendations.map((f,m)=>o.jsxs("div",{className:`flex items-start p-3 rounded-lg ${f.includes("WARNING")?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"}`,children:[f.includes("WARNING")?o.jsx(Kt,{className:"w-5 h-5 text-red-500 mr-2 flex-shrink-0 mt-0.5"}):o.jsx(st,{className:"w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"text-sm",children:f})]},m))})]})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("p",{className:"text-xs text-gray-500",children:["Generated: ",new Date(n.timestamp).toLocaleString()]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Refresh"}),o.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Close"})]})]})]})})}function bT({strategicDirectives:e,prds:t,currentSD:n,onSetActiveSD:r,isCompact:s}){var Ke,cn,Jt,N,R,ye,$t;const i=_m(),[a,l]=b.useState(!1),[c,u]=b.useState(!1),[d,h]=b.useState(!1),[f,m]=b.useState(!1),[p,v]=b.useState(0),[w,y]=b.useState(null),[g,x]=b.useState(""),[S,E]=b.useState({}),[j,P]=b.useState(null),C=b.useRef(null),O=b.useRef(null),D=b.useRef(null);b.useEffect(()=>{function L(J){C.current&&!C.current.contains(J.target)&&l(!1)}if(a)return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[a]);const V=L=>{E(J=>({...J,[L]:!J[L]}))},G=L=>({LEAD_PLANNING:"Strategic planning and directive creation",PLAN_DESIGN:"Technical planning and PRD creation",EXEC_IMPLEMENTATION:"Implementation and development work",PLAN_VERIFICATION:"Testing and verification",LEAD_APPROVAL:"Final approval and deployment",COMPLETE:"All phases completed"})[L]||"Unknown phase",de=L=>{var be,Pe,ut,Ce,Ve,Qe,Te,vr,I;if(!L)return[];const J=[];L.checklist&&L.checklist.filter(F=>!F.checked).forEach(F=>{J.push({type:"SD",text:F.text,phase:"LEAD_PLANNING"})});const ie=((be=L.prds)==null?void 0:be[0])||(t==null?void 0:t.find(F=>F.directiveId===L.id||F.id===`PRD-${L.id}`))||((ut=(Pe=e.find(F=>F.id===L.id))==null?void 0:Pe.prds)==null?void 0:ut[0]);if(ie){const Z=(ie.plan_checklist||[]).filter(je=>typeof je=="object"?!je.checked:!0);Z.length>0&&J.push({type:"PLAN_DESIGN",text:`Complete ${Z.length} planning checklist items`,phase:"PLAN_DESIGN",details:Z.slice(0,3).map(je=>typeof je=="object"?je.text:je)});const ke=(ie.exec_checklist||[]).filter(je=>typeof je=="object"?!je.checked:!0);ke.length>0&&J.push({type:"EXEC_IMPLEMENTATION",text:`Complete ${ke.length} implementation tasks`,phase:"EXEC_IMPLEMENTATION",details:ke.slice(0,3).map(je=>typeof je=="object"?je.text:je)});const bt=(ie.validation_checklist||[]).filter(je=>typeof je=="object"?!je.checked:!0);bt.length>0&&J.push({type:"PLAN_VERIFICATION",text:`Complete ${bt.length} verification items`,phase:"PLAN_VERIFICATION",details:bt.slice(0,3).map(je=>typeof je=="object"?je.text:je)})}return L.progress>=100&&J.length>0?(console.log(" Progress/Pending Mismatch Detected:",{sdId:L.id,sdProgress:L.progress,pendingCount:J.length,message:"SD shows 100% but has pending items - clearing pending list to match progress"}),[]):(J.length>0&&console.log(" Pending Items Debug:",{sdId:L.id,sdProgress:L.progress,totalPendingItems:J.length,pendingByPhase:J.reduce((F,Z)=>(F[Z.phase]=(F[Z.phase]||0)+1,F),{}),associatedPRDId:ie==null?void 0:ie.id,prdSource:ie?(Ce=L.prds)!=null&&Ce[0]?"SD.prds":t!=null&&t.find(F=>F.directiveId===L.id)?"global prds prop":"strategicDirectives fallback":"none",sdChecklist:(Ve=L.checklist)==null?void 0:Ve.length,uncheckedSDItems:(Qe=L.checklist)==null?void 0:Qe.filter(F=>!F.checked).length,prdChecklists:ie?{plan:(Te=ie.plan_checklist)==null?void 0:Te.length,exec:(vr=ie.exec_checklist)==null?void 0:vr.length,validation:(I=ie.validation_checklist)==null?void 0:I.length}:null}),J)},M=(L,J,ie)=>{var I,F,Z,ce,ke,pt,bt,je,kn,z,q,te,ae,Q,he,xe,ne,dt,Ze,Qn,at,Zn,ss,is,er,wr,br,kr,ue,un,as,Hi,re,Xe,Qt,kt,Km,Xm;if(!L)return"";const be=((I=L.checklist)==null?void 0:I.filter(pe=>!pe.checked))||[],Pe=((Z=(F=L.leoPhase)==null?void 0:F.validation)==null?void 0:Z.details)||[],ut=((ce=L.leoPhase)==null?void 0:ce.remainingTasks)||[],Ce=((ke=L.leoPhase)==null?void 0:ke.phaseProgress)||{},Ve=((bt=(pt=ie==null?void 0:ie.phaseBreakdown)==null?void 0:pt.PLAN)==null?void 0:bt.checklist)||[],Qe=Ve.filter(pe=>pe.text.includes("PRD created and saved")||pe.text.includes("SD requirements mapped")||pe.text.includes("Technical specifications complete")||pe.text.includes("Prerequisites verified")||pe.text.includes("Test requirements")||pe.text.includes("Acceptance criteria")||pe.text.includes("Risk mitigation")||pe.text.includes("Context usage")||pe.text.includes("summary created")||pe.text.includes("architecture documented")||pe.text.includes("phases clearly defined")||pe.text.includes("Documentation requirements")),Te=Ve.filter(pe=>!Qe.includes(pe)&&!pe.checked);return`# Strategic Directive Completion Request
Generated: ${new Date().toLocaleString()}

## Context
**Project**: LEO Protocol Dashboard Implementation
**SD ID**: ${L.id}
**Title**: ${L.title}
**Priority**: ${((je=L.metadata)==null?void 0:je.priority)||"Normal"}
**Owner**: ${((kn=L.metadata)==null?void 0:kn.owner)||"System Administrator"}

## Current Status
- **Overall Progress**: ${J}% complete
- **Active Phase**: ${((z=L.leoPhase)==null?void 0:z.current)||"LEAD"} Agent
- **Phase Status**: ${((q=L.leoPhase)==null?void 0:q.status)||"In Progress"}
- **Database Status**: ${((te=L.metadata)==null?void 0:te.Status)||"In Progress"}

## Phase Breakdown
### LEAD Phase (Strategic Planning) - ${((ae=Ce.LEAD)==null?void 0:ae.progress)||0}%
Status: ${(Q=Ce.LEAD)!=null&&Q.complete?" Complete":" In Progress"}

### PLAN Phase (Technical Planning) - ${((he=Ce.PLAN)==null?void 0:he.progress)||0}%
Status: ${(xe=Ce.PLAN)!=null&&xe.complete?" Complete":((ne=Ce.PLAN)==null?void 0:ne.progress)>0?" In Progress":" Not Started"}

### EXEC Phase (Implementation) - ${((dt=Ce.EXEC)==null?void 0:dt.progress)||0}%
Status: ${(Ze=Ce.EXEC)!=null&&Ze.complete?" Complete":((Qn=Ce.EXEC)==null?void 0:Qn.progress)>0?" In Progress":" Not Started"}

## Remaining Tasks

### Strategic Directive Checklist (${be.length} items)
${be.length>0?be.map(pe=>`- [ ] ${pe.text}`).join(`
`):" All SD checklist items complete"}

${Te.length>0?`### Implementation Tasks (EXEC Phase - ${Te.length} items)
Note: PLAN phase handoff checklist is complete. These are EXEC phase implementation acceptance criteria.
${Te.slice(0,10).map(pe=>`- [ ] ${pe.text}`).join(`
`)}
${Te.length>10?`
... and ${Te.length-10} more implementation tasks`:""}`:""}

${ut.length>0?`### Phase-Specific Tasks
${ut.map(pe=>`
**${pe.phase} Phase**: ${pe.description}
${pe.tasks?pe.tasks.map(bo=>`  - ${bo}`).join(`
`):""}`).join(`
`)}`:""}

## Validation Issues
${Pe.length>0?Pe.map(pe=>`- **${pe.source}** (${pe.phase}): ${pe.items.length} unchecked items`).join(`
`):" No validation issues"}

${ie?`## Progress Audit Analysis

### Important Note on Progress Calculation
The dashboard currently shows ${J}% overall progress. However, according to LEO Protocol v4.0:
- LEAD Phase (33.33%): ${(at=Ce.LEAD)!=null&&at.complete?" COMPLETE":"In Progress"} 
- PLAN Phase (33.33%): ${(Zn=Ce.PLAN)!=null&&Zn.complete||Qe.every(pe=>pe.checked)?" COMPLETE (PRD created with handoff checklist done)":"In Progress"}
- EXEC Phase (33.34%): ${((ss=Ce.EXEC)==null?void 0:ss.progress)>0?`In Progress (${(is=Ce.EXEC)==null?void 0:is.progress}%)`:"Not Started"}

**Actual Progress**: ${(er=Ce.LEAD)!=null&&er.complete&&((wr=Ce.PLAN)!=null&&wr.complete||Qe.every(pe=>pe.checked))?"66%":J+"%"} - PLAN phase should be marked complete when PRD is created with handoff checklist done.

### Calculation Breakdown
${((kr=(br=ie.calculations)==null?void 0:br.breakdown)==null?void 0:kr.join(`
`))||"No calculation data available"}

### Audit Recommendations
${((ue=ie.recommendations)==null?void 0:ue.length)>0?ie.recommendations.map(pe=>`- ${pe}`).join(`
`):" No issues found in audit"}

### Implementation Indicators
${(as=(un=ie.phaseBreakdown)==null?void 0:un.EXEC)!=null&&as.indicators?Object.entries(ie.phaseBreakdown.EXEC.indicators.indicators||{}).map(([pe,bo])=>`- ${pe}: ${bo.status?"":""} ${bo.details||""}`).join(`
`):"No implementation indicators available"}
`:""}

## Next Steps
${((Hi=L.leoPhase)==null?void 0:Hi.current)==="LEAD"&&((re=Ce.LEAD)!=null&&re.complete)?`1. Create a Product Requirements Document (PRD) for technical planning
2. Perform LEAD-to-PLAN handoff`:""}
${((Xe=L.leoPhase)==null?void 0:Xe.current)==="PLAN"&&((Qt=Ce.PLAN)!=null&&Qt.complete)?`1. Begin implementation phase
2. Perform PLAN-to-EXEC handoff`:""}
${((kt=L.leoPhase)==null?void 0:kt.current)==="EXEC"&&((Km=Ce.EXEC)!=null&&Km.complete)?`1. Complete final testing and validation
2. Perform EXEC-to-COMPLETE handoff`:""}
${be.length>0||Ve.length>0?"Priority: Complete all unchecked items listed above":""}

## Instructions
Please help me complete the remaining tasks for this Strategic Directive following LEO Protocol v4.0 standards. Focus on:
1. Completing all unchecked checklist items
2. Ensuring proper handoffs between phases
3. Maintaining documentation and test coverage
4. Following the established project patterns and conventions

${(Xm=L.metadata)!=null&&Xm.PRD?`PRD Location: ${L.metadata.PRD}`:"Note: No PRD linked yet"}

Please proceed with the implementation.`},$=n?e.find(L=>L.id===n):null,W=!$&&e.length>0?e.find(L=>{var be,Pe;const J=((be=L.checklist)==null?void 0:be.filter(ut=>ut.checked).length)||0,ie=((Pe=L.checklist)==null?void 0:Pe.length)||0;return ie>0&&J<ie})||e[0]:null,A=$||W;if(b.useEffect(()=>{(c||p>0)&&A&&fetch(`/api/progress/audit/${A.id}`).then(L=>L.json()).then(L=>y(L)).catch(L=>console.error("Failed to fetch audit:",L))},[c,p,A==null?void 0:A.id]),!A)return o.jsx("div",{className:`bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 border-l-4 border-gray-400 ${s?"p-3":"p-4"} mb-6 rounded-lg`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Kt,{className:`${s?"w-5 h-5":"w-6 h-6"} text-gray-500 mr-3`}),o.jsxs("div",{children:[o.jsx("h3",{className:`${s?"text-sm":"text-base"} font-semibold text-gray-700 dark:text-gray-300`,children:"No Active Strategic Directive"}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 mt-1`,children:"Create a new Strategic Directive to start tracking progress"})]})]})});const T=((Ke=A.checklist)==null?void 0:Ke.filter(L=>L.checked).length)||0,U=((cn=A.checklist)==null?void 0:cn.length)||0,k=A.progress!==void 0?A.progress:U>0?Math.round(T/U*100):0,se=k===100?{status:"Complete",color:"text-green-700 dark:text-green-300",bgColor:"from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",borderColor:"border-green-400",progressColor:"bg-green-500",icon:st}:k>=50?{status:"In Progress",color:"text-blue-700 dark:text-blue-300",bgColor:"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",borderColor:"border-blue-400",progressColor:"bg-blue-500",icon:ar}:{status:"Just Started",color:"text-amber-700 dark:text-amber-300",bgColor:"from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20",borderColor:"border-amber-400",progressColor:"bg-amber-500",icon:Rn},_=se.icon,Se=e.filter(L=>{var ie,be;if(!g.trim())return!0;const J=g.toLowerCase();return L.id.toLowerCase().includes(J)||L.title&&L.title.toLowerCase().includes(J)||((ie=L.metadata)==null?void 0:ie.Status)&&L.metadata.Status.toLowerCase().includes(J)||((be=L.metadata)==null?void 0:be.Priority)&&L.metadata.Priority.toLowerCase().includes(J)}),it=()=>{l(!a),a||setTimeout(()=>{var L;(L=D.current)==null||L.focus()},100)},we=L=>{x(L.target.value)},Tt=L=>{if(L.key==="Escape")l(!1),x("");else if(L.key==="Enter"&&Se.length>0){const J=Se[0];r&&J.id!==n&&(r(J.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:J.id,sd:J}}))),l(!1),x("")}};return o.jsxs("div",{className:`bg-gradient-to-r ${se.bgColor} border-l-4 ${se.borderColor} ${s?"p-2 sm:p-3":"p-3 sm:p-4"} mb-4 sm:mb-6 rounded-lg shadow-sm`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[o.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[o.jsx(_,{className:`${s?"w-4 sm:w-5 h-4 sm:h-5":"w-5 sm:w-6 h-5 sm:h-6"} ${se.color} mr-2 sm:mr-3 flex-shrink-0`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"relative",ref:C,children:[o.jsxs(Y.button,{onClick:it,className:`flex items-center justify-between w-full text-left ${s?"text-xs sm:text-sm":"text-sm sm:text-base"} font-semibold ${se.color} hover:bg-white/10 rounded px-1 sm:px-2 py-1 transition-colors min-w-0`,whileHover:{scale:i?1:1.02},whileTap:{scale:i?1:.98},"aria-label":"Select Strategic Directive","aria-expanded":a,"aria-haspopup":"listbox",children:[o.jsxs("span",{className:"truncate",children:["Active: ",A.title&&A.title!=="[Enter Strategic Directive Title]"?A.title:A.id]}),o.jsx(Y.div,{animate:{rotate:a?180:0},transition:{duration:i?0:.2,ease:"easeOut"},className:"flex-shrink-0 ml-1",children:o.jsx(Un,{className:`${s?"w-3 sm:w-4 h-3 sm:h-4":"w-4 sm:w-5 h-4 sm:h-5"}`})})]}),o.jsx(tn,{children:a&&e.length>0&&o.jsxs(Y.div,{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-80 flex flex-col",initial:{opacity:0,y:i?0:-10,scale:i?1:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:i?0:-10,scale:i?1:.95},transition:{duration:i?0:.2,ease:"easeOut"},children:[o.jsxs("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:[o.jsx("input",{ref:D,type:"text",placeholder:"Search Strategic Directives...",value:g,onChange:we,onKeyDown:Tt,className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-500 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-label":"Search Strategic Directives"}),g&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[Se.length," of ",e.length," results"]})]}),o.jsx("div",{className:"max-h-60 overflow-y-auto",children:Se.length===0&&g?o.jsxs("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-sm",children:['No Strategic Directives found for "',g,'"']}):Se.map((L,J)=>{const ie=L.id===n||L.id===A.id&&!n,be=L.progress!==void 0?L.progress:0;return o.jsx("button",{onClick:()=>(r&&(r(L.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:L.id,sd:L}}))),l(!1),x(""),!1),className:`w-full text-left px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${ie?"bg-primary-50 dark:bg-primary-900/20":""}`,children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center",children:[ie&&o.jsx(zn,{className:"w-4 h-4 text-primary-600 mr-2 flex-shrink-0"}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} font-medium text-gray-900 dark:text-white truncate ${ie?"ml-0":"ml-6"}`,children:L.title&&L.title!=="[Enter Strategic Directive Title]"?L.title:L.id})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1 overflow-hidden",children:o.jsx(Y.div,{className:`h-1 rounded-full ${be===100?"bg-green-500":be>=50?"bg-blue-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${be}%`},transition:{duration:i?0:.8,ease:"easeOut",delay:i?0:J*.1}})})}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 ml-2`,children:o.jsx(li,{end:be,duration:i?0:1,preserveValue:!0,suffix:"%"})})]}),L.leoPhase&&o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${L.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${L.leoPhase.phases.PLAN?"bg-green-500":L.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${L.leoPhase.phases.EXEC?"bg-green-500":L.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:L.leoPhase.current})]})]})})},L.id)})})]})})]}),o.jsx("p",{className:`${s?"text-xs":"text-xs sm:text-sm"} text-gray-600 dark:text-gray-400 mt-1`,children:A.leoPhase?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"font-medium",children:"LEO Protocol:"})," ",A.leoPhase.status]}):`${se.status}  ${T} of ${U} items completed`}),A.leoPhase&&o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 mt-2",children:[o.jsxs("div",{className:`flex items-center text-xs ${A.leoPhase.phases.LEAD?"text-green-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${A.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),"LEAD"]}),o.jsxs("div",{className:`flex items-center text-xs ${A.leoPhase.phases.PLAN?"text-green-600 font-medium":A.leoPhase.current==="PLAN"?"text-blue-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${A.leoPhase.phases.PLAN?"bg-green-500":A.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),"PLAN"]}),o.jsxs("div",{className:`flex items-center text-xs ${A.leoPhase.phases.EXEC?"text-green-600 font-medium":A.leoPhase.current==="EXEC"?"text-blue-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${A.leoPhase.phases.EXEC?"bg-green-500":A.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),"EXEC"]})]})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1 sm:gap-2 flex-shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:`${s?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold ${se.color}`,children:o.jsx(li,{end:k,duration:i?0:2,preserveValue:!0,suffix:"%"})}),((Jt=A.metadata)==null?void 0:Jt.priority)&&o.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Priority: ",A.metadata.priority]})]}),o.jsxs("div",{className:"flex gap-1 flex-wrap justify-end",children:[o.jsxs(Y.button,{onClick:()=>m(!0),className:"flex items-center px-2 py-1 text-xs bg-blue-500/20 dark:bg-blue-400/20 hover:bg-blue-500/30 dark:hover:bg-blue-400/30 rounded transition-all",title:"View progress validation audit",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[o.jsx(qb,{className:"w-3 h-3 mr-1"}),o.jsx("span",{children:"Audit"})]}),o.jsxs(Y.button,{onClick:()=>u(!c),className:"flex items-center px-2 py-1 text-xs bg-purple-500/20 dark:bg-purple-400/20 hover:bg-purple-500/30 dark:hover:bg-purple-400/30 rounded transition-all",title:"Generate AI prompt for remaining tasks",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[o.jsx(Kl,{className:"w-3 h-3 mr-1"}),o.jsx("span",{children:"AI Prompt"})]})]})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3 overflow-hidden",children:o.jsx(Y.div,{className:`h-3 ${se.progressColor} rounded-full relative`,initial:{width:0},animate:{width:`${k}%`},transition:{duration:i?0:1.2,ease:"easeOut",delay:i?0:.2},children:!i&&o.jsxs(o.Fragment,{children:[o.jsx(Y.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,ease:"linear"}}),o.jsx(Y.div,{className:"absolute inset-0 bg-white/20 rounded-full",animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})})}),o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:`${s?"text-sm":"text-base"} font-semibold ${se.color}`,children:["Current Phase: ",((N=A.metadata)==null?void 0:N["Current Phase"])||"LEAD_PLANNING"]}),o.jsxs("button",{onClick:()=>V("phaseInfo"),className:"flex items-center text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:[o.jsx(Tn,{className:"w-3 h-3 mr-1"}),"Info"]})]}),((R=A.metadata)==null?void 0:R.date)&&o.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Created: ",new Date(A.metadata.date).toLocaleDateString()]})]}),o.jsx(tn,{children:S.phaseInfo&&o.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.2},className:"overflow-hidden",children:o.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-blue-800 dark:text-blue-200`,children:[o.jsx("strong",{children:"LEO Protocol Flow:"})," LEAD  PLAN  EXEC  VERIFICATION  APPROVAL"]}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-blue-700 dark:text-blue-300 mt-1`,children:G(((ye=A.metadata)==null?void 0:ye["Current Phase"])||"LEAD_PLANNING")})]})})}),(($t=A.metadata)==null?void 0:$t["Phase Progress"])&&typeof A.metadata["Phase Progress"]=="object"&&o.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(A.metadata["Phase Progress"]).map(([L,J])=>{var ut;const ie=typeof J=="number"?J:parseInt(J)||0,be=ie===100,Pe=L===((ut=A.metadata)==null?void 0:ut["Current Phase"]);return o.jsxs("div",{className:`text-center p-2 rounded ${be?"bg-green-50 dark:bg-green-900/20":Pe?"bg-blue-50 dark:bg-blue-900/20":"bg-gray-50 dark:bg-gray-800"}`,children:[o.jsx("div",{className:`${s?"text-xs":"text-sm"} font-medium ${be?"text-green-700 dark:text-green-300":Pe?"text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400"}`,children:L.split("_")[0]}),o.jsx("div",{className:`${s?"text-xs":"text-sm"} font-bold ${be?"text-green-600 dark:text-green-400":Pe?"text-blue-600 dark:text-blue-400":"text-gray-400"}`,children:be?o.jsx(zn,{className:"w-4 h-4 mx-auto"}):`${ie}%`})]},L)})}),(()=>{const L=de(A);return L.length===0?null:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>V("pendingWork"),className:"flex items-center justify-between w-full p-2 bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg border border-amber-200 dark:border-amber-700 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx($C,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 mr-2"}),o.jsxs("span",{className:`${s?"text-sm":"text-base"} font-medium text-amber-800 dark:text-amber-200`,children:[L.length," Pending Task",L.length>1?"s":""]})]}),o.jsx(Ut,{className:`w-4 h-4 text-amber-600 dark:text-amber-400 transform transition-transform ${S.pendingWork?"rotate-90":""}`})]}),o.jsx(tn,{children:S.pendingWork&&o.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.3},className:"overflow-hidden",children:o.jsxs("div",{className:"space-y-2 pl-4",children:[L.slice(0,5).map((J,ie)=>o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 mt-2 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-700 dark:text-gray-300`,children:J.text}),o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:[J.phase.replace("_"," ")," Phase  ",J.type]}),J.details&&J.details.length>0&&o.jsx("div",{className:"mt-1 pl-2 border-l-2 border-amber-200 dark:border-amber-700",children:J.details.map((be,Pe)=>o.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:[" ",be]},Pe))})]})]},ie)),L.length>5&&o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 italic pl-4`,children:["... and ",L.length-5," more items"]})]})})})]})})(),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(lr,{to:`/strategic-directives/${A.id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full transition-colors",children:[o.jsx(Et,{className:"w-3 h-3 mr-1"}),"View SD Document",o.jsx(Gl,{className:"w-3 h-3 ml-1"})]}),A.prds&&A.prds.length>0&&o.jsxs(lr,{to:`/prds/${A.prds[0].id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50 text-green-700 dark:text-green-300 rounded-full transition-colors",children:[o.jsx(Et,{className:"w-3 h-3 mr-1"}),"View PRD Document",o.jsx(Gl,{className:"w-3 h-3 ml-1"})]})]})]}),c&&o.jsxs("div",{className:"mt-4 p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Kl,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mr-2"}),o.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:"AI Prompt for Remaining Tasks"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>v(L=>L+1),className:"flex items-center px-2 py-1 text-xs bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700 rounded transition-all",title:"Refresh prompt with latest data",children:[o.jsx(_s,{className:"w-3 h-3 mr-1"}),"Refresh"]}),o.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:""})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("pre",{ref:O,className:"bg-white dark:bg-gray-800 p-3 rounded border border-purple-200 dark:border-purple-700 text-sm overflow-x-auto whitespace-pre-wrap max-h-96 overflow-y-auto",children:M(A,k,w)},p),o.jsx("button",{onClick:()=>{var J;const L=((J=O.current)==null?void 0:J.innerText)||"";navigator.clipboard.writeText(L).then(()=>{h(!0),setTimeout(()=>h(!1),2e3)})},className:`absolute top-2 right-2 flex items-center px-2 py-1 text-xs rounded transition-all ${d?"bg-green-500 text-white":"bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700"}`,children:d?o.jsxs(o.Fragment,{children:[o.jsx(zn,{className:"w-3 h-3 mr-1"}),"Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(vm,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Copy this prompt and paste it into Claude Code to get help completing the remaining tasks."})]}),f&&o.jsx(wT,{sdId:A.id,onClose:()=>m(!1)})]})}const kT="modulepreload",jT=function(e){return"/"+e},T0={},go=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=jT(c),c in T0)return;T0[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":kT,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},ST=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>go(async()=>{const{default:r}=await Promise.resolve().then(()=>Vi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Pm extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class A0 extends Pm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class I0 extends Pm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class R0 extends Pm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gh||(gh={}));var NT=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class _T{constructor(t,{headers:n={},customFetch:r,region:s=gh.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=ST(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return NT(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a,signal:l}=n;let c={},{region:u}=n;u||(u=this.region);const d=new URL(`${this.url}/${t}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:l}).catch(w=>{throw w.name==="AbortError"?w:new A0(w)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new I0(f);if(!f.ok)throw new R0(f);let p=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield f.json():p==="application/octet-stream"?v=yield f.blob():p==="text/event-stream"?v=f:p==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new A0(s)}:{data:null,error:s,response:s instanceof R0||s instanceof I0?s.context:void 0}}})}}var zt={},Cm={},Nc={},yo={},_c={},Ec={},ET=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ti=ET();const PT=Ti.fetch,nk=Ti.fetch.bind(Ti),rk=Ti.Headers,CT=Ti.Request,TT=Ti.Response,Vi=Object.freeze(Object.defineProperty({__proto__:null,Headers:rk,Request:CT,Response:TT,default:nk,fetch:PT},Symbol.toStringTag,{value:"Module"})),AT=d1(Vi);var Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});let IT=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Pc.default=IT;var sk=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ec,"__esModule",{value:!0});const RT=sk(AT),DT=sk(Pc);let LT=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=RT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,u;let d=null,h=null,f=null,m=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=g:h=JSON.parse(g))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const w=await i.text();try{d=JSON.parse(w),Array.isArray(d)&&i.status===404&&(h=[],d=null,m=200,p="OK")}catch{i.status===404&&w===""?(m=204,p="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,p="OK"),d&&this.shouldThrowOnError)throw new DT.default(d)}return{error:d,data:h,count:f,status:m,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Ec.default=LT;var OT=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_c,"__esModule",{value:!0});const $T=OT(Ec);let MT=class extends $T.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};_c.default=MT;var FT=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yo,"__esModule",{value:!0});const VT=FT(_c);let zT=class extends VT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};yo.default=zT;var UT=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nc,"__esModule",{value:!0});const ea=UT(yo);let BT=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new ea.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ea.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ea.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ea.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ea.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Nc.default=BT;var ik=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cm,"__esModule",{value:!0});const HT=ik(Nc),WT=ik(yo);let qT=class ak{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new HT.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ak(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new WT.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Cm.default=qT;var zi=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zt,"__esModule",{value:!0});zt.PostgrestError=zt.PostgrestBuilder=zt.PostgrestTransformBuilder=zt.PostgrestFilterBuilder=zt.PostgrestQueryBuilder=zt.PostgrestClient=void 0;const ok=zi(Cm);zt.PostgrestClient=ok.default;const lk=zi(Nc);zt.PostgrestQueryBuilder=lk.default;const ck=zi(yo);zt.PostgrestFilterBuilder=ck.default;const uk=zi(_c);zt.PostgrestTransformBuilder=uk.default;const dk=zi(Ec);zt.PostgrestBuilder=dk.default;const hk=zi(Pc);zt.PostgrestError=hk.default;var GT=zt.default={PostgrestClient:ok.default,PostgrestQueryBuilder:lk.default,PostgrestFilterBuilder:ck.default,PostgrestTransformBuilder:uk.default,PostgrestBuilder:dk.default,PostgrestError:hk.default};const{PostgrestClient:KT,PostgrestQueryBuilder:nL,PostgrestFilterBuilder:rL,PostgrestTransformBuilder:sL,PostgrestBuilder:iL,PostgrestError:aL}=GT;class XT{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const YT="2.15.5",JT=`realtime-js/${YT}`,QT="1.0.0",yh=1e4,ZT=1e3,e4=100;var Na;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Na||(Na={}));var ot;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ot||(ot={}));var Pn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Pn||(Pn={}));var xh;(function(e){e.websocket="websocket"})(xh||(xh={}));var ps;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ps||(ps={}));class t4{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class fk{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ae||(Ae={}));const D0=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=n4(a,e,t,s),i),{})},n4=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?mk(i,a):vh(a)},mk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return a4(t,n)}switch(e){case Ae.bool:return r4(t);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return s4(t);case Ae.json:case Ae.jsonb:return i4(t);case Ae.timestamp:return o4(t);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return vh(t);default:return vh(t)}},vh=e=>e,r4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},s4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},i4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},a4=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>mk(t,l))}return e},o4=e=>typeof e=="string"?e.replace(" ","T"):e,pk=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Eu{constructor(t,n,r={},s=yh){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var L0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(L0||(L0={}));class _a{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_a.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=_a.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=_a.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),m=h.map(w=>w.presence_ref),p=d.filter(w=>m.indexOf(w.presence_ref)<0),v=h.filter(w=>f.indexOf(w.presence_ref)<0);p.length>0&&(l[u]=p),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var O0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(O0||(O0={}));var Ea;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ea||(Ea={}));var nr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(nr||(nr={}));class Tm{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Eu(this,Pn.join,this.params,this.timeout),this.rejoinTimer=new fk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ot.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new _a(this),this.broadcastEndpointURL=pk(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ot.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ea.PRESENCE]&&this.bindings[Ea.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(nr.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(nr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){t==null||t(nr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,y=[];for(let g=0;g<w;g++){const x=v[g],{filter:{event:S,schema:E,table:j,filter:P}}=x,C=m&&m[g];if(C&&C.event===S&&C.schema===E&&C.table===j&&C.filter===P)y.push(Object.assign(Object.assign({},x),{id:C.id}));else{this.unsubscribe(),this.state=ot.errored,t==null||t(nr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(nr.SUBSCRIBED);return}}).receive("error",m=>{this.state=ot.errored,t==null||t(nr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(nr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ot.joined&&t===Ea.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ot.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Eu(this,Pn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ot.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Eu(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>e4){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Pn;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var p,v,w;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(v=m.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(m=>m.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var p,v,w,y,g,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const S=m.id,E=(p=m.filter)===null||p===void 0?void 0:p.event;return S&&((v=n.ids)===null||v===void 0?void 0:v.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(g=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:v,table:w,commit_timestamp:y,type:g,errors:x}=p;f=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:y,eventType:g,new:{},old:{},errors:x}),this._getPayloadRecords(p))}m.callback(f,r)})}_isClosed(){return this.state===ot.closed}_isJoined(){return this.state===ot.joined}_isJoining(){return this.state===ot.joining}_isLeaving(){return this.state===ot.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Tm.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Pn.close,{},t)}_onError(t){this._on(Pn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ot.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=D0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=D0(t.columns,t.old_record)),n}}const Pu=()=>{},Bo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},l4=[1e3,2e3,5e3,1e4],c4=1e4,u4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d4{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yh,this.transport=null,this.heartbeatIntervalMs=Bo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pu,this.ref=0,this.reconnectTimer=null,this.logger=Pu,this.conn=null,this.sendBuffer=[],this.serializer=new t4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>go(async()=>{const{default:l}=await Promise.resolve().then(()=>Vi);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${xh.websocket}`,this.httpEndpoint=pk(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=XT.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:QT}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Na.connecting:return ps.Connecting;case Na.open:return ps.Open;case Na.closing:return ps.Closing;default:return ps.Closed}}isConnected(){return this.connectionState()===ps.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Tm(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(ZT,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Bo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Pn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([u4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:JT};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Pn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new fk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:yh,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Bo.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Pu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>l4[h-1]||c4,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Am extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function tt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class h4 extends Am{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wh extends Am{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var f4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const gk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>go(async()=>{const{default:r}=await Promise.resolve().then(()=>Vi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},m4=()=>f4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield go(()=>Promise.resolve().then(()=>Vi),void 0)).Response:Response}),bh=e=>{if(Array.isArray(e))return e.map(n=>bh(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=bh(r)}),t},p4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ds=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Cu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),g4=(e,t,n)=>Ds(void 0,void 0,void 0,function*(){const r=yield m4();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new h4(Cu(s),i,a))}).catch(s=>{t(new wh(Cu(s),s))}):t(new wh(Cu(e),e))}),y4=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(p4(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function xo(e,t,n,r,s,i){return Ds(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,y4(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>g4(c,l,r))})})}function Jl(e,t,n,r){return Ds(this,void 0,void 0,function*(){return xo(e,"GET",t,n,r)})}function Mn(e,t,n,r,s){return Ds(this,void 0,void 0,function*(){return xo(e,"POST",t,r,s,n)})}function kh(e,t,n,r,s){return Ds(this,void 0,void 0,function*(){return xo(e,"PUT",t,r,s,n)})}function x4(e,t,n,r){return Ds(this,void 0,void 0,function*(){return xo(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function yk(e,t,n,r,s){return Ds(this,void 0,void 0,function*(){return xo(e,"DELETE",t,r,s,n)})}var v4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class w4{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return v4(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}}var b4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class k4{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new w4(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return b4(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}}var Mt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const j4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class S4{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=gk(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Mt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},$0),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?kh:Mn)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Mt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:$0.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield kh(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(tt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Mt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Mn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Am("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Mt(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Mt(this,void 0,void 0,function*(){try{return{data:{path:(yield Mn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Mt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Mn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Mt(this,void 0,void 0,function*(){try{const s=yield Mn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Jl(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new k4(c,this.shouldThrowOnError)}info(t){return Mt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Jl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:bh(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}exists(t){return Mt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield x4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r)&&r instanceof wh){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield yk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Mt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},j4),n),{prefix:t||""});return{data:yield Mn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Mt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Mn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const N4="2.12.2",_4={"X-Client-Info":`storage-js/${N4}`};var $s=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class E4{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},_4),n),this.fetch=gk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return $s(this,void 0,void 0,function*(){try{return{data:yield Jl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}getBucket(t){return $s(this,void 0,void 0,function*(){try{return{data:yield Jl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return $s(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return $s(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return $s(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return $s(this,void 0,void 0,function*(){try{return{data:yield yk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}}class P4 extends E4{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new S4(this.url,this.headers,t,this.fetch)}}const C4="2.58.0";let ua="";typeof Deno<"u"?ua="deno":typeof document<"u"?ua="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ua="react-native":ua="node";const T4={"X-Client-Info":`supabase-js-${ua}/${C4}`},A4={headers:T4},I4={schema:"public"},R4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},D4={};var L4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const O4=e=>{let t;return e?t=e:typeof fetch>"u"?t=nk:t=fetch,(...n)=>t(...n)},$4=()=>typeof Headers>"u"?rk:Headers,M4=(e,t,n)=>{const r=O4(n),s=$4();return(i,a)=>L4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var F4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function V4(e){return e.endsWith("/")?e:e+"/"}function z4(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>F4(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function U4(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(V4(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const xk="2.72.0",Bs=30*1e3,jh=3,Tu=jh*Bs,B4="http://localhost:9999",H4="supabase.auth.token",W4={"X-Client-Info":`gotrue-js/${xk}`},Sh="X-Supabase-Api-Version",vk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},q4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,G4=10*60*1e3;class Im extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function fe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class K4 extends Im{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function X4(e){return fe(e)&&e.name==="AuthApiError"}class wk extends Im{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ns extends Im{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Er extends ns{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Y4(e){return fe(e)&&e.name==="AuthSessionMissingError"}class ta extends ns{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ho extends ns{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wo extends ns{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J4(e){return fe(e)&&e.name==="AuthImplicitGrantRedirectError"}class M0 extends ns{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nh extends ns{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Au(e){return fe(e)&&e.name==="AuthRetryableFetchError"}class F0 extends ns{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class _h extends ns{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ql="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),V0=` 	
\r=`.split(""),Q4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<V0.length;t+=1)e[V0[t].charCodeAt(0)]=-2;for(let t=0;t<Ql.length;t+=1)e[Ql[t].charCodeAt(0)]=t;return e})();function z0(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Ql[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Ql[r]),t.queuedBits-=6}}function bk(e,t,n){const r=Q4[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function U0(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{t3(a,r,n)};for(let a=0;a<e.length;a+=1)bk(e.charCodeAt(a),s,i);return t.join("")}function Z4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function e3(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Z4(r,t)}}function t3(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function n3(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)bk(e.charCodeAt(s),n,r);return new Uint8Array(t)}function r3(e){const t=[];return e3(e,n=>t.push(n)),new Uint8Array(t)}function s3(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>z0(s,n,r)),z0(null,n,r),t.join("")}function i3(e){return Math.round(Date.now()/1e3)+e}function a3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const hn=()=>typeof window<"u"&&typeof document<"u",cs={tested:!1,writable:!1},kk=()=>{if(!hn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cs.tested)return cs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cs.tested=!0,cs.writable=!0}catch{cs.tested=!0,cs.writable=!1}return cs.writable};function o3(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const jk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>go(async()=>{const{default:r}=await Promise.resolve().then(()=>Vi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},l3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Hs=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},us=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Sr=async(e,t)=>{await e.removeItem(t)};class Cc{constructor(){this.promise=new Cc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Cc.promiseConstructor=Promise;function Iu(e){const t=e.split(".");if(t.length!==3)throw new _h("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!q4.test(t[r]))throw new _h("JWT not in base64url format");return{header:JSON.parse(U0(t[0])),payload:JSON.parse(U0(t[1])),signature:n3(t[2]),raw:{header:t[0],payload:t[1]}}}async function c3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function u3(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function d3(e){return("0"+e.toString(16)).substr(-2)}function h3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,d3).join("")}async function f3(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function m3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await f3(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ms(e,t,n=!1){const r=h3();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Hs(e,`${t}-code-verifier`,s);const i=await m3(r);return[i,r===i?"plain":"s256"]}const p3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function g3(e){const t=e.headers.get(Sh);if(!t||!t.match(p3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function y3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function x3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const v3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fs(e){if(!v3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ru(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function B0(e){return JSON.parse(JSON.stringify(e))}var w3=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ms=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),b3=[502,503,504];async function H0(e){var t;if(!l3(e))throw new Nh(ms(e),0);if(b3.includes(e.status))throw new Nh(ms(e),e.status);let n;try{n=await e.json()}catch(i){throw new wk(ms(i),i)}let r;const s=g3(e);if(s&&s.getTime()>=vk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new F0(ms(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Er}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new F0(ms(n),e.status,n.weak_password.reasons);throw new K4(ms(n),e.status||500,r)}const k3=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ge(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Sh]||(i[Sh]=vk["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await j3(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function j3(e,t,n,r,s,i){const a=k3(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new Nh(ms(c),0)}if(l.ok||await H0(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await H0(c)}}function On(e){var t;let n=null;E3(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=i3(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function W0(e){const t=On(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ir(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function S3(e){return{data:e,error:null}}function N3(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=w3(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function _3(e){return e}function E3(e){return e.access_token&&e.refresh_token&&e.expires_in}const Du=["global","local","others"];var P3=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class C3{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=jk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Du[0]){if(Du.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Du.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ir})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=P3(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:N3,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(fe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ir})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:_3});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(fe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Fs(t);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ir})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Fs(t);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ir})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Fs(t);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ir})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Fs(t.userId);try{const{data:n,error:r}=await ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Fs(t.userId),Fs(t.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}}function q0(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function T3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vs={debug:!!(globalThis&&kk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class A3 extends Sk{}async function I3(e,t,n){Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new A3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Vs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Nk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function R3(e){return parseInt(e,16)}function D3(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function L3(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=Nk(e.address),p=d?`${d}://${r}`:r,v=e.statement?`${e.statement}
`:"",w=`${p} wants you to sign in with your Ethereum account:
${m}

${v}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);g+=`
- ${x}`}y+=g}return`${w}
${y}`}T3();const O3={url:B4,storageKey:H4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function G0(e,t,n){return await n()}const zs={};class ro{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ro.nextInstanceID,ro.nextInstanceID+=1,this.instanceID>0&&hn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},O3),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new C3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=jk(s.fetch),this.lock=s.lock||G0,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:hn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=I3:this.lock=G0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:kk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=q0(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=q0(this.memoryStorage)),hn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=zs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){zs[this.storageKey]=Object.assign(Object.assign({},zs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=zs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){zs[this.storageKey]=Object.assign(Object.assign({},zs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=o3(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),hn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),J4(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return fe(n)?{error:n}:{error:new wk("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:On}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(fe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Ms(this.storage,this.storageKey)),i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:On})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:On})}else throw new Ho("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(fe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:W0})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:W0})}else throw new Ho("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ta}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(fe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,a,l,c,u,d,h,f;let m,p;if("message"in t)m=t.message,p=t.signature;else{const{chain:v,wallet:w,statement:y,options:g}=t;let x;if(hn())if(typeof w=="object")x=w;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")x=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const S=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),E=await x.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Nk(E[0]);let P=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const O=await x.request({method:"eth_chainId"});P=R3(O)}const C={domain:S.host,address:j,statement:y,uri:S.href,version:"1",chainId:P,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=L3(C),p=await x.request({method:"personal_sign",params:[D3(m),j]})}try{const{data:v,error:w}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:p},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:On});if(w)throw w;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new ta}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:w})}catch(v){if(fe(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,h,f,m;let p,v;if("message"in t)p=t.message,v=t.signature;else{const{chain:w,wallet:y,statement:g,options:x}=t;let S;if(hn())if(typeof y=="object")S=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const E=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let P;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")P=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)P=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)p=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(p),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=j}}try{const{data:w,error:y}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:s3(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:On});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new ta}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(fe(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await us(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:On});if(await Sr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ta}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(fe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:On}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ta}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(fe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ms(this.storage,this.storageKey));const{error:h}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ho("You must provide either an email or phone number.")}catch(l){if(fe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:On});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Ms(this.storage,this.storageKey)),await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:S3})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Er;const{error:s}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(fe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ho("You must provide either an email or phone number and a type")}catch(n){if(fe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await us(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Tu:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await us(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Ru()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ir}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Er}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ir})})}catch(n){if(fe(n))return Y4(n)&&(await this._removeSession(),await Sr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Er;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ms(this.storage,this.storageKey));const{data:u,error:d}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Ir});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Er;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Iu(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(fe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Er;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(fe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!hn())throw new Wo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new M0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new M0("No code detected.");const{data:g,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Wo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=Bs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,d);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await us(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(X4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Sr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=a3(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ms(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return hn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(fe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await u3(async s=>(s>0&&await c3(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:On})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Au(i)&&Date.now()+a-r<Bs})}catch(r){if(this._debug(n,"error",r),fe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),hn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await us(this.storage,this.storageKey);if(s&&this.userStorage){let a=await us(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Hs(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Ru()}else if(s&&!s.user&&!s.user){const a=await us(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Sr(this.storage,this.storageKey+"-user"),await Hs(this.storage,this.storageKey,s)):s.user=Ru()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Tu;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Tu}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Au(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Cc;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Er;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),fe(i)){const a={session:null,error:i};return Au(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Hs(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=B0(s);await Hs(this.storage,this.storageKey,i)}else{const s=B0(n);await Hs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Sr(this.storage,this.storageKey),await Sr(this.storage,this.storageKey+"-code-verifier"),await Sr(this.storage,this.storageKey+"-user"),this.userStorage&&await Sr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&hn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Bs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Bs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Bs}ms, refresh threshold is ${jh} ticks`),s<=jh&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Sk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ms(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(fe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(fe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Iu(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+G4>s)return r;const{data:i,error:a}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};r=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Iu(r);n!=null&&n.allowExpired||y3(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const d=x3(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,r3(`${l}.${c}`)))throw new _h("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}}ro.nextInstanceID=0;const $3=ro;class M3 extends $3{constructor(t){super(t)}}var F3=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class V3{constructor(t,n,r){var s,i,a;this.supabaseUrl=t,this.supabaseKey=n;const l=U4(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:I4,realtime:D4,auth:Object.assign(Object.assign({},R4),{storageKey:c}),global:A4},d=z4(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=M4(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new KT(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new P4(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new _T(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return F3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M3({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new d4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const z3=(e,t,n)=>new V3(e,t,n);function U3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}U3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const B3="https://dedlbzhpgkmetvhbkyzq.supabase.co",H3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g",K0=z3(B3,H3,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});var W3={};function q3({sdKey:e,isCompact:t=!1}){const[n,r]=b.useState(null),[s,i]=b.useState(!0),[a,l]=b.useState(null);b.useEffect(()=>{if(e){c();const j=K0.channel("release-gates").on("postgres_changes",{event:"*",schema:"public",table:"sd_backlog_map",filter:`sd_id=eq.${e}`},()=>{c()}).subscribe();return()=>{j.unsubscribe()}}},[e]);async function c(){try{i(!0);const{data:j,error:P}=await K0.from("v_sd_release_gate").select("*").eq("sd_key",e).single();if(P)throw P;r(j),l(null)}catch(j){console.error("Failed to load gate data:",j),l(j.message),r(null)}finally{i(!1)}}if(!e)return null;if(s)return o.jsx("div",{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow animate-pulse`,children:o.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})});if(a||!n)return null;const{ready:u,passing_pct:d=0,passing_count:h=0,failing_count:f=0,not_run_count:m=0,total_stories:p=0,avg_coverage:v=0}=n,w=u?"text-green-500":"text-red-500",y=u?o.jsx(XC,{className:"w-5 h-5"}):o.jsx(Xb,{className:"w-5 h-5"}),g=u?"READY TO MERGE":"BLOCKED",x=u?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",S=Math.min(100,Math.max(0,d)),E=80;return o.jsxs(Y.div,{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow-lg border ${x}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(no,{className:`w-5 h-5 ${w}`}),o.jsx("h3",{className:`${t?"text-sm":"text-base"} font-semibold text-gray-900 dark:text-white`,children:"Release Gate"})]}),o.jsxs("div",{className:`flex items-center gap-1 ${w}`,children:[y,o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-bold`,children:g})]})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Story Verification"}),o.jsxs("span",{className:`text-xs font-bold ${S>=E?"text-green-600":"text-amber-600"}`,children:[S.toFixed(0),"% / ",E,"%"]})]}),o.jsxs("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-gray-400 dark:bg-gray-500 z-10",style:{left:`${E}%`}}),o.jsx(Y.div,{className:`h-full ${S>=E?"bg-green-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${S}%`},transition:{duration:.5,ease:"easeOut"}})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(TC,{className:"w-3 h-3 text-green-500"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-green-600 dark:text-green-400`,children:h})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Passing"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(Jr,{className:"w-3 h-3 text-red-500"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-red-600 dark:text-red-400`,children:f})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Failing"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(xr,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-gray-600 dark:text-gray-400`,children:m})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Not Run"})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(pr,{className:"w-3 h-3 text-blue-500"}),o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Coverage: ",v.toFixed(0),"%"]})]}),o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Total: ",p," stories"]})]}),!u&&p>0&&o.jsx(Y.div,{className:"mt-3 p-2 bg-amber-100 dark:bg-amber-900/30 rounded text-xs text-amber-800 dark:text-amber-200",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(RC,{className:"w-3 h-3"}),o.jsxs("span",{children:["Need ",Math.ceil(p*.8)-h," more passing stories to merge"]})]})}),W3.REACT_APP_FEATURE_STORY_GATES==="false"&&o.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 italic",children:"Gates tracking only (not enforcing)"})]})}function G3({state:e,onRefresh:t,onSetActiveSD:n,isCompact:r}){var d,h;const s=Oi(),[i,a]=b.useState({tests:{total:0,passed:0,failed:0},coverage:{lines:0,branches:0,functions:0,statements:0},git:{branch:"unknown",uncommittedChanges:0,lastCommit:""}}),l=_m();b.useEffect(()=>{fetch("/api/metrics").then(f=>f.json()).then(f=>a(f)).catch(f=>console.error("Error loading metrics:",f))},[]);const c=r?"bg-white dark:bg-gray-800 rounded-lg shadow p-2 sm:p-3":"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6",u={hidden:{opacity:0,y:l?0:10},visible:f=>({opacity:1,y:0,transition:{duration:l?0:.1,delay:l?0:f*.02}})};return o.jsxs("div",{className:r?"space-y-2 sm:space-y-3":"space-y-4 sm:space-y-6",children:[o.jsxs(Y.div,{className:"flex items-center justify-between",initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.08},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(LC,{className:r?"w-5 h-5 sm:w-6 sm:h-6 mr-2":"w-6 sm:w-8 h-6 sm:h-8 mr-2 sm:mr-3"}),o.jsx("h1",{className:r?"text-xl sm:text-2xl font-bold":"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Y.button,{onClick:()=>s("/directive-lab?mode=quick"),className:`flex items-center ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,whileHover:{scale:l?1:1.05},whileTap:{scale:l?1:.95},children:[o.jsx(Jb,{className:`${r?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]}),o.jsx(Sc,{onRefresh:t,isCompact:r})]})]}),o.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1},children:o.jsx(bT,{strategicDirectives:e.strategicDirectives,prds:e.prds,currentSD:(d=e.leoProtocol)==null?void 0:d.currentSD,onSetActiveSD:n,isCompact:r})}),((h=e.leoProtocol)==null?void 0:h.currentSD)&&o.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1,delay:.05},children:o.jsx(q3,{sdKey:e.leoProtocol.currentSD,isCompact:r})}),o.jsxs("div",{className:`grid gap-${r?"2 sm:gap-3":"3 sm:gap-4"} grid-cols-1`,children:[o.jsx(Y.div,{className:c,initial:"hidden",animate:"visible",custom:1,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Active Role"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold truncate":"text-xl sm:text-2xl font-bold truncate",children:e.leoProtocol.activeRole||"Awaiting SD"}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 min-w-0",children:[o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#4f9cf9"},children:["LEO v",e.leoProtocol.version]}),e.leoProtocol.lastHandoff&&o.jsxs("span",{className:`${r?"text-xs":"text-xs sm:text-sm"} text-gray-500 truncate`,children:[" ",new Date(e.leoProtocol.lastHandoff.timestamp).toLocaleTimeString()]})]})]}),o.jsx(Nm,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 ${e.leoProtocol.activeRole==="LEAD"?"text-blue-500":e.leoProtocol.activeRole==="PLAN"?"text-purple-500":e.leoProtocol.activeRole==="EXEC"?"text-green-500":"text-gray-400"}`})]})}),o.jsx(Y.div,{className:c,initial:"hidden",animate:"visible",custom:2,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx(lr,{to:"/strategic-directives",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strategic Directives"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:o.jsx(li,{end:e.strategicDirectives.length,duration:l?0:1.5,preserveValue:!0})}),o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#10b981"},children:[o.jsx(li,{end:e.strategicDirectives.filter(f=>{var m;return((m=f.metadata)==null?void 0:m.Status)==="Active"}).length,duration:l?0:1.2,preserveValue:!0})," Active"]})]}),o.jsx(Et,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-blue-500`})]})})}),o.jsx(Y.div,{className:c,initial:"hidden",animate:"visible",custom:3,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx(lr,{to:"/backlog",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Backlog Items"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:o.jsx(li,{end:e.strategicDirectives.reduce((f,m)=>f+(m.total_backlog_items||m.total_items||m.backlog_count||0),0),duration:l?0:1.5,preserveValue:!0})}),o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#6366f1"},children:[o.jsx(li,{end:e.strategicDirectives.filter(f=>(f.total_backlog_items||f.total_items||f.backlog_count||0)>0).length,duration:l?0:1.2,preserveValue:!0})," SDs with items"]})]}),o.jsx(Ci,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-indigo-500`})]})})}),o.jsx(Y.div,{className:c,initial:"hidden",animate:"visible",custom:4,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx(lr,{to:"/directive-lab",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"SDIP Submissions"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:"Directive Lab"}),o.jsx("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#8b5cf6"},children:"Ready to submit"})]}),o.jsx(Gb,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-purple-500`})]})})})]})]})}function K3(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const X3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Y3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,J3={};function X0(e,t){return(J3.jsx?Y3:X3).test(e)}const Q3=/[ \t\n\f\r]/g;function Z3(e){return typeof e=="object"?e.type==="text"?Y0(e.value):!1:Y0(e)}function Y0(e){return e.replace(Q3,"")===""}class vo{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}vo.prototype.normal={};vo.prototype.property={};vo.prototype.space=void 0;function _k(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new vo(n,r,t)}function Eh(e){return e.toLowerCase()}class Yt{constructor(t,n){this.attribute=n,this.property=t}}Yt.prototype.attribute="";Yt.prototype.booleanish=!1;Yt.prototype.boolean=!1;Yt.prototype.commaOrSpaceSeparated=!1;Yt.prototype.commaSeparated=!1;Yt.prototype.defined=!1;Yt.prototype.mustUseProperty=!1;Yt.prototype.number=!1;Yt.prototype.overloadedBoolean=!1;Yt.prototype.property="";Yt.prototype.spaceSeparated=!1;Yt.prototype.space=void 0;let e5=0;const me=Ls(),et=Ls(),Ph=Ls(),H=Ls(),Ie=Ls(),yi=Ls(),Zt=Ls();function Ls(){return 2**++e5}const Ch=Object.freeze(Object.defineProperty({__proto__:null,boolean:me,booleanish:et,commaOrSpaceSeparated:Zt,commaSeparated:yi,number:H,overloadedBoolean:Ph,spaceSeparated:Ie},Symbol.toStringTag,{value:"Module"})),Lu=Object.keys(Ch);class Rm extends Yt{constructor(t,n,r,s){let i=-1;if(super(t,n),J0(this,"space",s),typeof r=="number")for(;++i<Lu.length;){const a=Lu[i];J0(this,Lu[i],(r&Ch[a])===Ch[a])}}}Rm.prototype.defined=!0;function J0(e,t,n){n&&(e[t]=n)}function Ui(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new Rm(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[Eh(r)]=r,n[Eh(i.attribute)]=r}return new vo(t,n,e.space)}const Ek=Ui({properties:{ariaActiveDescendant:null,ariaAtomic:et,ariaAutoComplete:null,ariaBusy:et,ariaChecked:et,ariaColCount:H,ariaColIndex:H,ariaColSpan:H,ariaControls:Ie,ariaCurrent:null,ariaDescribedBy:Ie,ariaDetails:null,ariaDisabled:et,ariaDropEffect:Ie,ariaErrorMessage:null,ariaExpanded:et,ariaFlowTo:Ie,ariaGrabbed:et,ariaHasPopup:null,ariaHidden:et,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ie,ariaLevel:H,ariaLive:null,ariaModal:et,ariaMultiLine:et,ariaMultiSelectable:et,ariaOrientation:null,ariaOwns:Ie,ariaPlaceholder:null,ariaPosInSet:H,ariaPressed:et,ariaReadOnly:et,ariaRelevant:null,ariaRequired:et,ariaRoleDescription:Ie,ariaRowCount:H,ariaRowIndex:H,ariaRowSpan:H,ariaSelected:et,ariaSetSize:H,ariaSort:null,ariaValueMax:H,ariaValueMin:H,ariaValueNow:H,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Pk(e,t){return t in e?e[t]:t}function Ck(e,t){return Pk(e,t.toLowerCase())}const t5=Ui({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yi,acceptCharset:Ie,accessKey:Ie,action:null,allow:null,allowFullScreen:me,allowPaymentRequest:me,allowUserMedia:me,alt:null,as:null,async:me,autoCapitalize:null,autoComplete:Ie,autoFocus:me,autoPlay:me,blocking:Ie,capture:null,charSet:null,checked:me,cite:null,className:Ie,cols:H,colSpan:null,content:null,contentEditable:et,controls:me,controlsList:Ie,coords:H|yi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:me,defer:me,dir:null,dirName:null,disabled:me,download:Ph,draggable:et,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:me,formTarget:null,headers:Ie,height:H,hidden:Ph,high:H,href:null,hrefLang:null,htmlFor:Ie,httpEquiv:Ie,id:null,imageSizes:null,imageSrcSet:null,inert:me,inputMode:null,integrity:null,is:null,isMap:me,itemId:null,itemProp:Ie,itemRef:Ie,itemScope:me,itemType:Ie,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:me,low:H,manifest:null,max:null,maxLength:H,media:null,method:null,min:null,minLength:H,multiple:me,muted:me,name:null,nonce:null,noModule:me,noValidate:me,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:me,optimum:H,pattern:null,ping:Ie,placeholder:null,playsInline:me,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:me,referrerPolicy:null,rel:Ie,required:me,reversed:me,rows:H,rowSpan:H,sandbox:Ie,scope:null,scoped:me,seamless:me,selected:me,shadowRootClonable:me,shadowRootDelegatesFocus:me,shadowRootMode:null,shape:null,size:H,sizes:null,slot:null,span:H,spellCheck:et,src:null,srcDoc:null,srcLang:null,srcSet:null,start:H,step:null,style:null,tabIndex:H,target:null,title:null,translate:null,type:null,typeMustMatch:me,useMap:null,value:et,width:H,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ie,axis:null,background:null,bgColor:null,border:H,borderColor:null,bottomMargin:H,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:me,declare:me,event:null,face:null,frame:null,frameBorder:null,hSpace:H,leftMargin:H,link:null,longDesc:null,lowSrc:null,marginHeight:H,marginWidth:H,noResize:me,noHref:me,noShade:me,noWrap:me,object:null,profile:null,prompt:null,rev:null,rightMargin:H,rules:null,scheme:null,scrolling:et,standby:null,summary:null,text:null,topMargin:H,valueType:null,version:null,vAlign:null,vLink:null,vSpace:H,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:me,disableRemotePlayback:me,prefix:null,property:null,results:H,security:null,unselectable:null},space:"html",transform:Ck}),n5=Ui({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Zt,accentHeight:H,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:H,amplitude:H,arabicForm:null,ascent:H,attributeName:null,attributeType:null,azimuth:H,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:H,by:null,calcMode:null,capHeight:H,className:Ie,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:H,diffuseConstant:H,direction:null,display:null,dur:null,divisor:H,dominantBaseline:null,download:me,dx:null,dy:null,edgeMode:null,editable:null,elevation:H,enableBackground:null,end:null,event:null,exponent:H,externalResourcesRequired:null,fill:null,fillOpacity:H,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yi,g2:yi,glyphName:yi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:H,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:H,horizOriginX:H,horizOriginY:H,id:null,ideographic:H,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:H,k:H,k1:H,k2:H,k3:H,k4:H,kernelMatrix:Zt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:H,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:H,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:H,overlineThickness:H,paintOrder:null,panose1:null,path:null,pathLength:H,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ie,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:H,pointsAtY:H,pointsAtZ:H,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Zt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Zt,rev:Zt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Zt,requiredFeatures:Zt,requiredFonts:Zt,requiredFormats:Zt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:H,specularExponent:H,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:H,strikethroughThickness:H,string:null,stroke:null,strokeDashArray:Zt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:H,strokeOpacity:H,strokeWidth:null,style:null,surfaceScale:H,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Zt,tabIndex:H,tableValues:null,target:null,targetX:H,targetY:H,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Zt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:H,underlineThickness:H,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:H,values:null,vAlphabetic:H,vMathematical:H,vectorEffect:null,vHanging:H,vIdeographic:H,version:null,vertAdvY:H,vertOriginX:H,vertOriginY:H,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:H,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Pk}),Tk=Ui({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Ak=Ui({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Ck}),Ik=Ui({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),r5={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},s5=/[A-Z]/g,Q0=/-[a-z]/g,i5=/^data[-\w.:]+$/i;function a5(e,t){const n=Eh(t);let r=t,s=Yt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&i5.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Q0,l5);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Q0.test(i)){let a=i.replace(s5,o5);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}s=Rm}return new s(r,t)}function o5(e){return"-"+e.toLowerCase()}function l5(e){return e.charAt(1).toUpperCase()}const c5=_k([Ek,t5,Tk,Ak,Ik],"html"),Dm=_k([Ek,n5,Tk,Ak,Ik],"svg");function u5(e){return e.join(" ").trim()}var Lm={},Z0=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,d5=/\n/g,h5=/^\s*/,f5=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,m5=/^:\s*/,p5=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,g5=/^[;\s]*/,y5=/^\s+|\s+$/g,x5=`
`,ey="/",ty="*",gs="",v5="comment",w5="declaration",b5=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(p){var v=p.match(d5);v&&(n+=v.length);var w=p.lastIndexOf(x5);r=~w?p.length-w:r+p.length}function i(){var p={line:n,column:r};return function(v){return v.position=new a(p),u(),v}}function a(p){this.start=p,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function l(p){var v=new Error(t.source+":"+n+":"+r+": "+p);if(v.reason=p,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(p){var v=p.exec(e);if(v){var w=v[0];return s(w),e=e.slice(w.length),v}}function u(){c(h5)}function d(p){var v;for(p=p||[];v=h();)v!==!1&&p.push(v);return p}function h(){var p=i();if(!(ey!=e.charAt(0)||ty!=e.charAt(1))){for(var v=2;gs!=e.charAt(v)&&(ty!=e.charAt(v)||ey!=e.charAt(v+1));)++v;if(v+=2,gs===e.charAt(v-1))return l("End of comment missing");var w=e.slice(2,v-2);return r+=2,s(w),e=e.slice(v),r+=2,p({type:v5,comment:w})}}function f(){var p=i(),v=c(f5);if(v){if(h(),!c(m5))return l("property missing ':'");var w=c(p5),y=p({type:w5,property:ny(v[0].replace(Z0,gs)),value:w?ny(w[0].replace(Z0,gs)):gs});return c(g5),y}}function m(){var p=[];d(p);for(var v;v=f();)v!==!1&&(p.push(v),d(p));return p}return u(),m()};function ny(e){return e?e.replace(y5,gs):gs}var k5=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lm,"__esModule",{value:!0});Lm.default=S5;var j5=k5(b5);function S5(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,j5.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var a=i.property,l=i.value;s?t(a,l,i):l&&(n=n||{},n[a]=l)}}),n}var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.camelCase=void 0;var N5=/^--[a-zA-Z0-9_-]+$/,_5=/-([a-z])/g,E5=/^[^-]+$/,P5=/^-(webkit|moz|ms|o|khtml)-/,C5=/^-(ms)-/,T5=function(e){return!e||E5.test(e)||N5.test(e)},A5=function(e,t){return t.toUpperCase()},ry=function(e,t){return"".concat(t,"-")},I5=function(e,t){return t===void 0&&(t={}),T5(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(C5,ry):e=e.replace(P5,ry),e.replace(_5,A5))};Tc.camelCase=I5;var R5=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},D5=R5(Lm),L5=Tc;function Th(e,t){var n={};return!e||typeof e!="string"||(0,D5.default)(e,function(r,s){r&&s&&(n[(0,L5.camelCase)(r,t)]=s)}),n}Th.default=Th;var O5=Th;const $5=Fh(O5),Rk=Dk("end"),Om=Dk("start");function Dk(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function M5(e){const t=Om(e),n=Rk(e);if(t&&n)return{start:t,end:n}}function Pa(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?sy(e.position):"start"in e||"end"in e?sy(e):"line"in e||"column"in e?Ah(e):""}function Ah(e){return iy(e&&e.line)+":"+iy(e&&e.column)}function sy(e){return Ah(e&&e.start)+"-"+Ah(e&&e.end)}function iy(e){return e&&typeof e=="number"?e:1}class Ct extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(a=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=Pa(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ct.prototype.file="";Ct.prototype.name="";Ct.prototype.reason="";Ct.prototype.message="";Ct.prototype.stack="";Ct.prototype.column=void 0;Ct.prototype.line=void 0;Ct.prototype.ancestors=void 0;Ct.prototype.cause=void 0;Ct.prototype.fatal=void 0;Ct.prototype.place=void 0;Ct.prototype.ruleId=void 0;Ct.prototype.source=void 0;const $m={}.hasOwnProperty,F5=new Map,V5=/[A-Z]/g,z5=new Set(["table","tbody","thead","tfoot","tr"]),U5=new Set(["td","th"]),Lk="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function B5(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=J5(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Y5(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Dm:c5,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=Ok(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function Ok(e,t,n){if(t.type==="element")return H5(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return W5(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return G5(e,t,n);if(t.type==="mdxjsEsm")return q5(e,t);if(t.type==="root")return K5(e,t,n);if(t.type==="text")return X5(e,t)}function H5(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Dm,e.schema=s),e.ancestors.push(t);const i=Mk(e,t.tagName,!1),a=Q5(e,t);let l=Fm(e,t);return z5.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!Z3(c):!0})),$k(e,a,i,t),Mm(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function W5(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}so(e,t.position)}function q5(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);so(e,t.position)}function G5(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Dm,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:Mk(e,t.name,!0),a=Z5(e,t),l=Fm(e,t);return $k(e,a,i,t),Mm(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function K5(e,t,n){const r={};return Mm(r,Fm(e,t)),e.create(t,e.Fragment,r,n)}function X5(e,t){return t.value}function $k(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Mm(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Y5(e,t,n){return r;function r(s,i,a,l){const u=Array.isArray(a.children)?n:t;return l?u(i,a,l):u(i,a)}}function J5(e,t){return n;function n(r,s,i,a){const l=Array.isArray(i.children),c=Om(r);return t(s,i,a,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function Q5(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&$m.call(t.properties,s)){const i=eA(e,s,t.properties[s]);if(i){const[a,l]=i;e.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&U5.has(t.tagName)?r=l:n[a]=l}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Z5(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else so(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else so(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function Fm(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:F5;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;a=c+"-"+u,s.set(c,u+1)}}const l=Ok(e,i,a);l!==void 0&&n.push(l)}return n}function eA(e,t,n){const r=a5(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?K3(n):u5(n)),r.property==="style"){let s=typeof n=="object"?n:tA(e,String(n));return e.stylePropertyNameCase==="css"&&(s=nA(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?r5[r.property]||r.property:r.attribute,n]}}function tA(e,t){try{return $5(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new Ct("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Lk+"#cannot-parse-style-attribute",s}}function Mk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,a;for(;++i<s.length;){const l=X0(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=a}else r=X0(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return $m.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);so(e)}function so(e,t){const n=new Ct("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Lk+"#cannot-handle-mdx-estrees-without-createevaluater",n}function nA(e){const t={};let n;for(n in e)$m.call(e,n)&&(t[rA(n)]=e[n]);return t}function rA(e){let t=e.replace(V5,sA);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function sA(e){return"-"+e.toLowerCase()}const Ou={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},iA={};function aA(e,t){const n=iA,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Fk(e,r,s)}function Fk(e,t,n){if(oA(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ay(e.children,t,n)}return Array.isArray(e)?ay(e,t,n):""}function ay(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Fk(e[s],t,n);return r.join("")}function oA(e){return!!(e&&typeof e=="object")}const oy=document.createElement("i");function Vm(e){const t="&"+e+";";oy.innerHTML=t;const n=oy.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Xn(e,t,n,r){const s=e.length;let i=0,a;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function gn(e,t){return e.length>0?(Xn(e,e.length,0,t),e):t}const ly={}.hasOwnProperty;function lA(e){const t={};let n=-1;for(;++n<e.length;)cA(t,e[n]);return t}function cA(e,t){let n;for(n in t){const s=(ly.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){ly.call(s,a)||(s[a]=[]);const l=i[a];uA(s[a],Array.isArray(l)?l:l?[l]:[])}}}function uA(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Xn(e,0,0,r)}function Vk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function xi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Bn=rs(/[A-Za-z]/),rn=rs(/[\dA-Za-z]/),dA=rs(/[#-'*+\--9=?A-Z^-~]/);function Ih(e){return e!==null&&(e<32||e===127)}const Rh=rs(/\d/),hA=rs(/[\dA-Fa-f]/),fA=rs(/[!-/:-@[-`{-~]/);function le(e){return e!==null&&e<-2}function Xt(e){return e!==null&&(e<0||e===32)}function _e(e){return e===-2||e===-1||e===32}const mA=rs(new RegExp("\\p{P}|\\p{S}","u")),pA=rs(/\s/);function rs(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Bi(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(i===37&&rn(e.charCodeAt(n+1))&&rn(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(a=String.fromCharCode(i,l),s=1):a=""}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function De(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(c){return _e(c)?(e.enter(n),l(c)):t(c)}function l(c){return _e(c)&&i++<s?(e.consume(c),l):(e.exit(n),t(c))}}const gA={tokenize:yA};function yA(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),De(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return le(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),a)}}const xA={tokenize:vA},cy={tokenize:wA};function vA(e){const t=this,n=[];let r=0,s,i,a;return l;function l(x){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,c,u)(x)}return u(x)}function c(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&g();const S=t.events.length;let E=S,j;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){j=t.events[E][1].end;break}y(r);let P=S;for(;P<t.events.length;)t.events[P][1].end={...j},P++;return Xn(t.events,E+1,0,t.events.slice(S)),t.events.length=P,u(x)}return l(x)}function u(x){if(r===n.length){if(!s)return f(x);if(s.currentConstruct&&s.currentConstruct.concrete)return p(x);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(cy,d,h)(x)}function d(x){return s&&g(),y(r),f(x)}function h(x){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,p(x)}function f(x){return t.containerState={},e.attempt(cy,m,p)(x)}function m(x){return r++,n.push([t.currentConstruct,t.containerState]),f(x)}function p(x){if(x===null){s&&g(),y(0),e.consume(x);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),v(x)}function v(x){if(x===null){w(e.exit("chunkFlow"),!0),y(0),e.consume(x);return}return le(x)?(e.consume(x),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(x),v)}function w(x,S){const E=t.sliceStream(x);if(S&&E.push(null),x.previous=i,i&&(i.next=x),i=x,s.defineSkip(x.start),s.write(E),t.parser.lazy[x.start.line]){let j=s.events.length;for(;j--;)if(s.events[j][1].start.offset<a&&(!s.events[j][1].end||s.events[j][1].end.offset>a))return;const P=t.events.length;let C=P,O,D;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(O){D=t.events[C][1].end;break}O=!0}for(y(r),j=P;j<t.events.length;)t.events[j][1].end={...D},j++;Xn(t.events,C+1,0,t.events.slice(P)),t.events.length=j}}function y(x){let S=n.length;for(;S-- >x;){const E=n[S];t.containerState=E[1],E[0].exit.call(t,e)}n.length=x}function g(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function wA(e,t,n){return De(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function uy(e){if(e===null||Xt(e)||pA(e))return 1;if(mA(e))return 2}function zm(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const Dh={name:"attention",resolveAll:bA,tokenize:kA};function bA(e,t){let n=-1,r,s,i,a,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},f={...e[n][1].start};dy(h,-c),dy(f,c),a={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},i={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},e[r][1].end={...a.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=gn(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=gn(u,[["enter",s,t],["enter",a,t],["exit",a,t],["enter",i,t]]),u=gn(u,zm(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=gn(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=gn(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Xn(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function kA(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=uy(r);let i;return a;function a(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),d=uy(c),h=!d||d===2&&s||n.includes(c),f=!s||s===2&&d||n.includes(r);return u._open=!!(i===42?h:h&&(s||!f)),u._close=!!(i===42?f:f&&(d||!h)),t(c)}}function dy(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const jA={name:"autolink",tokenize:SA};function SA(e,t,n){let r=0;return s;function s(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(m){return Bn(m)?(e.consume(m),a):m===64?n(m):u(m)}function a(m){return m===43||m===45||m===46||rn(m)?(r=1,l(m)):u(m)}function l(m){return m===58?(e.consume(m),r=0,c):(m===43||m===45||m===46||rn(m))&&r++<32?(e.consume(m),l):(r=0,u(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||Ih(m)?n(m):(e.consume(m),c)}function u(m){return m===64?(e.consume(m),d):dA(m)?(e.consume(m),u):n(m)}function d(m){return rn(m)?h(m):n(m)}function h(m){return m===46?(e.consume(m),r=0,d):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):f(m)}function f(m){if((m===45||rn(m))&&r++<63){const p=m===45?f:h;return e.consume(m),p}return n(m)}}const Ac={partial:!0,tokenize:NA};function NA(e,t,n){return r;function r(i){return _e(i)?De(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||le(i)?t(i):n(i)}}const zk={continuation:{tokenize:EA},exit:PA,name:"blockQuote",tokenize:_A};function _A(e,t,n){const r=this;return s;function s(a){if(a===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),i}return n(a)}function i(a){return _e(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function EA(e,t,n){const r=this;return s;function s(a){return _e(a)?De(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return e.attempt(zk,t,n)(a)}}function PA(e){e.exit("blockQuote")}const Uk={name:"characterEscape",tokenize:CA};function CA(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return fA(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const Bk={name:"characterReference",tokenize:TA};function TA(e,t,n){const r=this;let s=0,i,a;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,a=rn,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=hA,d):(e.enter("characterReferenceValue"),i=7,a=Rh,d(h))}function d(h){if(h===59&&s){const f=e.exit("characterReferenceValue");return a===rn&&!Vm(r.sliceSerialize(f))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(h)&&s++<i?(e.consume(h),d):n(h)}}const hy={partial:!0,tokenize:IA},fy={concrete:!0,name:"codeFenced",tokenize:AA};function AA(e,t,n){const r=this,s={partial:!0,tokenize:E};let i=0,a=0,l;return c;function c(j){return u(j)}function u(j){const P=r.events[r.events.length-1];return i=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,l=j,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(j)}function d(j){return j===l?(a++,e.consume(j),d):a<3?n(j):(e.exit("codeFencedFenceSequence"),_e(j)?De(e,h,"whitespace")(j):h(j))}function h(j){return j===null||le(j)?(e.exit("codeFencedFence"),r.interrupt?t(j):e.check(hy,v,S)(j)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(j))}function f(j){return j===null||le(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(j)):_e(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),De(e,m,"whitespace")(j)):j===96&&j===l?n(j):(e.consume(j),f)}function m(j){return j===null||le(j)?h(j):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(j))}function p(j){return j===null||le(j)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(j)):j===96&&j===l?n(j):(e.consume(j),p)}function v(j){return e.attempt(s,S,w)(j)}function w(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),y}function y(j){return i>0&&_e(j)?De(e,g,"linePrefix",i+1)(j):g(j)}function g(j){return j===null||le(j)?e.check(hy,v,S)(j):(e.enter("codeFlowValue"),x(j))}function x(j){return j===null||le(j)?(e.exit("codeFlowValue"),g(j)):(e.consume(j),x)}function S(j){return e.exit("codeFenced"),t(j)}function E(j,P,C){let O=0;return D;function D($){return j.enter("lineEnding"),j.consume($),j.exit("lineEnding"),V}function V($){return j.enter("codeFencedFence"),_e($)?De(j,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):G($)}function G($){return $===l?(j.enter("codeFencedFenceSequence"),de($)):C($)}function de($){return $===l?(O++,j.consume($),de):O>=a?(j.exit("codeFencedFenceSequence"),_e($)?De(j,M,"whitespace")($):M($)):C($)}function M($){return $===null||le($)?(j.exit("codeFencedFence"),P($)):C($)}}}function IA(e,t,n){const r=this;return s;function s(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const $u={name:"codeIndented",tokenize:DA},RA={partial:!0,tokenize:LA};function DA(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),De(e,i,"linePrefix",5)(u)}function i(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):le(u)?e.attempt(RA,a,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||le(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function LA(e,t,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):le(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):De(e,i,"linePrefix",5)(a)}function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):le(a)?s(a):n(a)}}const OA={name:"codeText",previous:MA,resolve:$A,tokenize:FA};function $A(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function MA(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function FA(e,t,n){let r=0,s,i;return a;function a(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(i=e.enter("codeTextSequence"),s=0,d(h)):le(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||le(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),s++,d):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",u(h))}}class VA{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&na(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),na(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),na(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);na(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);na(this.left,n.reverse())}}}function na(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Hk(e){const t={};let n=-1,r,s,i,a,l,c,u;const d=new VA(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,zA(d,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=d.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return Xn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function zA(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],u={};let d,h,f=-1,m=n,p=0,v=0;const w=[v];for(;m;){for(;e.get(++s)[1]!==m;);i.push(s),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),h&&a.defineSkip(m.start),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=m,m=m.next}for(m=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(v=f+1,w.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(a.events=[],m?(m._tokenizer=void 0,m.previous=void 0):w.pop(),f=w.length;f--;){const y=l.slice(w[f],w[f+1]),g=i.pop();c.push([g,g+y.length-1]),e.splice(g,2,y)}for(c.reverse(),f=-1;++f<c.length;)u[p+c[f][0]]=p+c[f][1],p+=c[f][1]-c[f][0]-1;return u}const UA={resolve:HA,tokenize:WA},BA={partial:!0,tokenize:qA};function HA(e){return Hk(e),e}function WA(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):le(l)?e.check(BA,a,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function a(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function qA(e,t,n){const r=this;return s;function s(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),De(e,i,"linePrefix")}function i(a){if(a===null||le(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function Wk(e,t,n,r,s,i,a,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(y){return y===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(y),e.exit(i),f):y===null||y===32||y===41||Ih(y)?n(y):(e.enter(r),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function f(y){return y===62?(e.enter(i),e.consume(y),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===62?(e.exit("chunkString"),e.exit(l),f(y)):y===null||y===60||le(y)?n(y):(e.consume(y),y===92?p:m)}function p(y){return y===60||y===62||y===92?(e.consume(y),m):m(y)}function v(y){return!d&&(y===null||y===41||Xt(y))?(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(y)):d<u&&y===40?(e.consume(y),d++,v):y===41?(e.consume(y),d--,v):y===null||y===32||y===40||Ih(y)?n(y):(e.consume(y),y===92?w:v)}function w(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function qk(e,t,n,r,s,i){const a=this;let l=0,c;return u;function u(m){return e.enter(r),e.enter(s),e.consume(m),e.exit(s),e.enter(i),d}function d(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(m):m===93?(e.exit(i),e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):le(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===null||m===91||m===93||le(m)||l++>999?(e.exit("chunkString"),d(m)):(e.consume(m),c||(c=!_e(m)),m===92?f:h)}function f(m){return m===91||m===92||m===93?(e.consume(m),l++,h):h(m)}}function Gk(e,t,n,r,s,i){let a;return l;function l(f){return f===34||f===39||f===40?(e.enter(r),e.enter(s),e.consume(f),e.exit(s),a=f===40?41:f,c):n(f)}function c(f){return f===a?(e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):(e.enter(i),u(f))}function u(f){return f===a?(e.exit(i),c(a)):f===null?n(f):le(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),De(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===a||f===null||le(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?h:d)}function h(f){return f===a||f===92?(e.consume(f),d):d(f)}}function Ca(e,t){let n;return r;function r(s){return le(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):_e(s)?De(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const GA={name:"definition",tokenize:XA},KA={partial:!0,tokenize:YA};function XA(e,t,n){const r=this;let s;return i;function i(m){return e.enter("definition"),a(m)}function a(m){return qk.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return s=xi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return Xt(m)?Ca(e,u)(m):u(m)}function u(m){return Wk(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return e.attempt(KA,h,h)(m)}function h(m){return _e(m)?De(e,f,"whitespace")(m):f(m)}function f(m){return m===null||le(m)?(e.exit("definition"),r.parser.defined.push(s),t(m)):n(m)}}function YA(e,t,n){return r;function r(l){return Xt(l)?Ca(e,s)(l):n(l)}function s(l){return Gk(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return _e(l)?De(e,a,"whitespace")(l):a(l)}function a(l){return l===null||le(l)?t(l):n(l)}}const JA={name:"hardBreakEscape",tokenize:QA};function QA(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return le(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const ZA={name:"headingAtx",resolve:eI,tokenize:tI};function eI(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Xn(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function tI(e,t,n){let r=0;return s;function s(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(e.consume(d),a):d===null||Xt(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||le(d)?(e.exit("atxHeading"),t(d)):_e(d)?De(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Xt(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const nI=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],my=["pre","script","style","textarea"],rI={concrete:!0,name:"htmlFlow",resolveTo:aI,tokenize:oI},sI={partial:!0,tokenize:cI},iI={partial:!0,tokenize:lI};function aI(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function oI(e,t,n){const r=this;let s,i,a,l,c;return u;function u(_){return d(_)}function d(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),h}function h(_){return _===33?(e.consume(_),f):_===47?(e.consume(_),i=!0,v):_===63?(e.consume(_),s=3,r.interrupt?t:k):Bn(_)?(e.consume(_),a=String.fromCharCode(_),w):n(_)}function f(_){return _===45?(e.consume(_),s=2,m):_===91?(e.consume(_),s=5,l=0,p):Bn(_)?(e.consume(_),s=4,r.interrupt?t:k):n(_)}function m(_){return _===45?(e.consume(_),r.interrupt?t:k):n(_)}function p(_){const Se="CDATA[";return _===Se.charCodeAt(l++)?(e.consume(_),l===Se.length?r.interrupt?t:G:p):n(_)}function v(_){return Bn(_)?(e.consume(_),a=String.fromCharCode(_),w):n(_)}function w(_){if(_===null||_===47||_===62||Xt(_)){const Se=_===47,it=a.toLowerCase();return!Se&&!i&&my.includes(it)?(s=1,r.interrupt?t(_):G(_)):nI.includes(a.toLowerCase())?(s=6,Se?(e.consume(_),y):r.interrupt?t(_):G(_)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):i?g(_):x(_))}return _===45||rn(_)?(e.consume(_),a+=String.fromCharCode(_),w):n(_)}function y(_){return _===62?(e.consume(_),r.interrupt?t:G):n(_)}function g(_){return _e(_)?(e.consume(_),g):D(_)}function x(_){return _===47?(e.consume(_),D):_===58||_===95||Bn(_)?(e.consume(_),S):_e(_)?(e.consume(_),x):D(_)}function S(_){return _===45||_===46||_===58||_===95||rn(_)?(e.consume(_),S):E(_)}function E(_){return _===61?(e.consume(_),j):_e(_)?(e.consume(_),E):x(_)}function j(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),c=_,P):_e(_)?(e.consume(_),j):C(_)}function P(_){return _===c?(e.consume(_),c=null,O):_===null||le(_)?n(_):(e.consume(_),P)}function C(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||Xt(_)?E(_):(e.consume(_),C)}function O(_){return _===47||_===62||_e(_)?x(_):n(_)}function D(_){return _===62?(e.consume(_),V):n(_)}function V(_){return _===null||le(_)?G(_):_e(_)?(e.consume(_),V):n(_)}function G(_){return _===45&&s===2?(e.consume(_),W):_===60&&s===1?(e.consume(_),A):_===62&&s===4?(e.consume(_),ee):_===63&&s===3?(e.consume(_),k):_===93&&s===5?(e.consume(_),U):le(_)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(sI,se,de)(_)):_===null||le(_)?(e.exit("htmlFlowData"),de(_)):(e.consume(_),G)}function de(_){return e.check(iI,M,se)(_)}function M(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),$}function $(_){return _===null||le(_)?de(_):(e.enter("htmlFlowData"),G(_))}function W(_){return _===45?(e.consume(_),k):G(_)}function A(_){return _===47?(e.consume(_),a="",T):G(_)}function T(_){if(_===62){const Se=a.toLowerCase();return my.includes(Se)?(e.consume(_),ee):G(_)}return Bn(_)&&a.length<8?(e.consume(_),a+=String.fromCharCode(_),T):G(_)}function U(_){return _===93?(e.consume(_),k):G(_)}function k(_){return _===62?(e.consume(_),ee):_===45&&s===2?(e.consume(_),k):G(_)}function ee(_){return _===null||le(_)?(e.exit("htmlFlowData"),se(_)):(e.consume(_),ee)}function se(_){return e.exit("htmlFlow"),t(_)}}function lI(e,t,n){const r=this;return s;function s(a){return le(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function cI(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Ac,t,n)}}const uI={name:"htmlText",tokenize:dI};function dI(e,t,n){const r=this;let s,i,a;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),u):k===47?(e.consume(k),E):k===63?(e.consume(k),x):Bn(k)?(e.consume(k),C):n(k)}function u(k){return k===45?(e.consume(k),d):k===91?(e.consume(k),i=0,p):Bn(k)?(e.consume(k),g):n(k)}function d(k){return k===45?(e.consume(k),m):n(k)}function h(k){return k===null?n(k):k===45?(e.consume(k),f):le(k)?(a=h,A(k)):(e.consume(k),h)}function f(k){return k===45?(e.consume(k),m):h(k)}function m(k){return k===62?W(k):k===45?f(k):h(k)}function p(k){const ee="CDATA[";return k===ee.charCodeAt(i++)?(e.consume(k),i===ee.length?v:p):n(k)}function v(k){return k===null?n(k):k===93?(e.consume(k),w):le(k)?(a=v,A(k)):(e.consume(k),v)}function w(k){return k===93?(e.consume(k),y):v(k)}function y(k){return k===62?W(k):k===93?(e.consume(k),y):v(k)}function g(k){return k===null||k===62?W(k):le(k)?(a=g,A(k)):(e.consume(k),g)}function x(k){return k===null?n(k):k===63?(e.consume(k),S):le(k)?(a=x,A(k)):(e.consume(k),x)}function S(k){return k===62?W(k):x(k)}function E(k){return Bn(k)?(e.consume(k),j):n(k)}function j(k){return k===45||rn(k)?(e.consume(k),j):P(k)}function P(k){return le(k)?(a=P,A(k)):_e(k)?(e.consume(k),P):W(k)}function C(k){return k===45||rn(k)?(e.consume(k),C):k===47||k===62||Xt(k)?O(k):n(k)}function O(k){return k===47?(e.consume(k),W):k===58||k===95||Bn(k)?(e.consume(k),D):le(k)?(a=O,A(k)):_e(k)?(e.consume(k),O):W(k)}function D(k){return k===45||k===46||k===58||k===95||rn(k)?(e.consume(k),D):V(k)}function V(k){return k===61?(e.consume(k),G):le(k)?(a=V,A(k)):_e(k)?(e.consume(k),V):O(k)}function G(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),s=k,de):le(k)?(a=G,A(k)):_e(k)?(e.consume(k),G):(e.consume(k),M)}function de(k){return k===s?(e.consume(k),s=void 0,$):k===null?n(k):le(k)?(a=de,A(k)):(e.consume(k),de)}function M(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||Xt(k)?O(k):(e.consume(k),M)}function $(k){return k===47||k===62||Xt(k)?O(k):n(k)}function W(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function A(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),T}function T(k){return _e(k)?De(e,U,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):U(k)}function U(k){return e.enter("htmlTextData"),a(k)}}const Um={name:"labelEnd",resolveAll:pI,resolveTo:gI,tokenize:yI},hI={tokenize:xI},fI={tokenize:vI},mI={tokenize:wI};function pI(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Xn(e,0,e.length,n),e}function gI(e,t){let n=e.length,r=0,s,i,a,l;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[a][1].end}},d={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[a-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=gn(l,e.slice(i+1,i+r+3)),l=gn(l,[["enter",d,t]]),l=gn(l,zm(t.parser.constructs.insideSpan.null,e.slice(i+r+4,a-3),t)),l=gn(l,[["exit",d,t],e[a-2],e[a-1],["exit",u,t]]),l=gn(l,e.slice(a+1)),l=gn(l,[["exit",c,t]]),Xn(e,i,e.length,l),e}function yI(e,t,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(f){return i?i._inactive?h(f):(a=r.parser.defined.includes(xi(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):n(f)}function c(f){return f===40?e.attempt(hI,d,a?d:h)(f):f===91?e.attempt(fI,d,a?u:h)(f):a?d(f):h(f)}function u(f){return e.attempt(mI,d,h)(f)}function d(f){return t(f)}function h(f){return i._balanced=!0,n(f)}}function xI(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return Xt(h)?Ca(e,i)(h):i(h)}function i(h){return h===41?d(h):Wk(e,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return Xt(h)?Ca(e,c)(h):d(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?Gk(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return Xt(h)?Ca(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function vI(e,t,n){const r=this;return s;function s(l){return qk.call(r,e,i,a,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(xi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function a(l){return n(l)}}function wI(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const bI={name:"labelStartImage",resolveAll:Um.resolveAll,tokenize:kI};function kI(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const jI={name:"labelStartLink",resolveAll:Um.resolveAll,tokenize:SI};function SI(e,t,n){const r=this;return s;function s(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Mu={name:"lineEnding",tokenize:NI};function NI(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),De(e,t,"linePrefix")}}const ml={name:"thematicBreak",tokenize:_I};function _I(e,t,n){let r=0,s;return i;function i(u){return e.enter("thematicBreak"),a(u)}function a(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||le(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),_e(u)?De(e,l,"whitespace")(u):l(u))}}const Ft={continuation:{tokenize:TI},exit:II,name:"list",tokenize:CI},EI={partial:!0,tokenize:RI},PI={partial:!0,tokenize:AI};function CI(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return l;function l(m){const p=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:Rh(m)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(ml,n,u)(m):u(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return Rh(m)&&++a<10?(e.consume(m),c):(!r.interrupt||a<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),u(m)):n(m)}function u(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Ac,r.interrupt?n:d,e.attempt(EI,f,h))}function d(m){return r.containerState.initialBlankLine=!0,i++,f(m)}function h(m){return _e(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),f):n(m)}function f(m){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function TI(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ac,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,De(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!_e(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(PI,t,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,De(e,e.attempt(Ft,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function AI(e,t,n){const r=this;return De(e,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(i):n(i)}}function II(e){e.exit(this.containerState.type)}function RI(e,t,n){const r=this;return De(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!_e(i)&&a&&a[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const py={name:"setextUnderline",resolveTo:DI,tokenize:LI};function DI(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",a,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function LI(e,t,n){const r=this;let s;return i;function i(u){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),s=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),_e(u)?De(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||le(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const OI={tokenize:$I};function $I(e){const t=this,n=e.attempt(Ac,r,e.attempt(this.parser.constructs.flowInitial,s,De(e,e.attempt(this.parser.constructs.flow,s,e.attempt(UA,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const MI={resolveAll:Xk()},FI=Kk("string"),VI=Kk("text");function Kk(e){return{resolveAll:Xk(e==="text"?zI:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,a,l);return a;function a(d){return u(d)?i(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),i(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const h=s[d];let f=-1;if(h)for(;++f<h.length;){const m=h[f];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function Xk(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function zI(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,a=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const UI={42:Ft,43:Ft,45:Ft,48:Ft,49:Ft,50:Ft,51:Ft,52:Ft,53:Ft,54:Ft,55:Ft,56:Ft,57:Ft,62:zk},BI={91:GA},HI={[-2]:$u,[-1]:$u,32:$u},WI={35:ZA,42:ml,45:[py,ml],60:rI,61:py,95:ml,96:fy,126:fy},qI={38:Bk,92:Uk},GI={[-5]:Mu,[-4]:Mu,[-3]:Mu,33:bI,38:Bk,42:Dh,60:[jA,uI],91:jI,92:[JA,Uk],93:Um,95:Dh,96:OA},KI={null:[Dh,MI]},XI={null:[42,95]},YI={null:[]},JI=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:XI,contentInitial:BI,disable:YI,document:UI,flow:WI,flowInitial:HI,insideSpan:KI,string:qI,text:GI},Symbol.toStringTag,{value:"Module"}));function QI(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],l=[];const c={attempt:P(E),check:P(j),consume:g,enter:x,exit:S,interrupt:P(j,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:p,parser:e,previous:null,sliceSerialize:f,sliceStream:m,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function h(V){return a=gn(a,V),w(),a[a.length-1]!==null?[]:(C(t,0),u.events=zm(i,u.events,u),u.events)}function f(V,G){return eR(m(V),G)}function m(V){return ZI(a,V)}function p(){const{_bufferIndex:V,_index:G,line:de,column:M,offset:$}=r;return{_bufferIndex:V,_index:G,line:de,column:M,offset:$}}function v(V){s[V.line]=V.column,D()}function w(){let V;for(;r._index<a.length;){const G=a[r._index];if(typeof G=="string")for(V=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===V&&r._bufferIndex<G.length;)y(G.charCodeAt(r._bufferIndex));else y(G)}}function y(V){d=d(V)}function g(V){le(V)?(r.line++,r.column=1,r.offset+=V===-3?2:1,D()):V!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=V}function x(V,G){const de=G||{};return de.type=V,de.start=p(),u.events.push(["enter",de,u]),l.push(de),de}function S(V){const G=l.pop();return G.end=p(),u.events.push(["exit",G,u]),G}function E(V,G){C(V,G.from)}function j(V,G){G.restore()}function P(V,G){return de;function de(M,$,W){let A,T,U,k;return Array.isArray(M)?se(M):"tokenize"in M?se([M]):ee(M);function ee(we){return Tt;function Tt(Ke){const cn=Ke!==null&&we[Ke],Jt=Ke!==null&&we.null,N=[...Array.isArray(cn)?cn:cn?[cn]:[],...Array.isArray(Jt)?Jt:Jt?[Jt]:[]];return se(N)(Ke)}}function se(we){return A=we,T=0,we.length===0?W:_(we[T])}function _(we){return Tt;function Tt(Ke){return k=O(),U=we,we.partial||(u.currentConstruct=we),we.name&&u.parser.constructs.disable.null.includes(we.name)?it():we.tokenize.call(G?Object.assign(Object.create(u),G):u,c,Se,it)(Ke)}}function Se(we){return V(U,k),$}function it(we){return k.restore(),++T<A.length?_(A[T]):W}}}function C(V,G){V.resolveAll&&!i.includes(V)&&i.push(V),V.resolve&&Xn(u.events,G,u.events.length-G,V.resolve(u.events.slice(G),u)),V.resolveTo&&(u.events=V.resolveTo(u.events,u))}function O(){const V=p(),G=u.previous,de=u.currentConstruct,M=u.events.length,$=Array.from(l);return{from:M,restore:W};function W(){r=V,u.previous=G,u.currentConstruct=de,u.events.length=M,l=$,D()}}function D(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function ZI(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}function eR(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function tR(e){const r={constructs:lA([JI,...(e||{}).extensions||[]]),content:s(gA),defined:[],document:s(xA),flow:s(OI),lazy:{},string:s(FI),text:s(VI)};return r;function s(i){return a;function a(l){return QI(r,i,l)}}}function nR(e){for(;!Hk(e););return e}const gy=/[\0\t\n\r]/g;function rR(){let e=1,t="",n=!0,r;return s;function s(i,a,l){const c=[];let u,d,h,f,m;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),h=0,t="",n&&(i.charCodeAt(0)===65279&&h++,n=void 0);h<i.length;){if(gy.lastIndex=h,u=gy.exec(i),f=u&&u.index!==void 0?u.index:i.length,m=i.charCodeAt(f),!u){t=i.slice(h);break}if(m===10&&h===f&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<f&&(c.push(i.slice(h,f)),e+=f-h),m){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=f+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const sR=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function iR(e){return e.replace(sR,aR)}function aR(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return Vk(n.slice(i?2:1),i?16:10)}return Vm(n)||e}const Yk={}.hasOwnProperty;function oR(e,t,n){return typeof t!="string"&&(n=t,t=void 0),lR(n)(nR(tR(n).document().write(rR()(e,t,!0))))}function lR(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Pe),autolinkProtocol:O,autolinkEmail:O,atxHeading:i(L),blockQuote:i(Jt),characterEscape:O,characterReference:O,codeFenced:i(N),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(N,a),codeText:i(R,a),codeTextData:O,data:O,codeFlowValue:O,definition:i(ye),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i($t),hardBreakEscape:i(J),hardBreakTrailing:i(J),htmlFlow:i(ie,a),htmlFlowData:O,htmlText:i(ie,a),htmlTextData:O,image:i(be),label:a,link:i(Pe),listItem:i(Ce),listItemValue:f,listOrdered:i(ut,h),listUnordered:i(ut),paragraph:i(Ve),reference:_,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(L),strong:i(Qe),thematicBreak:i(vr)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:cn,autolinkProtocol:Ke,blockQuote:c(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:it,characterReferenceMarkerNumeric:it,characterReferenceValue:we,characterReference:Tt,codeFenced:c(w),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:p,codeFlowValue:D,codeIndented:c(y),codeText:c($),codeTextData:D,data:D,definition:c(),definitionDestinationString:S,definitionLabelString:g,definitionTitleString:x,emphasis:c(),hardBreakEscape:c(G),hardBreakTrailing:c(G),htmlFlow:c(de),htmlFlowData:D,htmlText:c(M),htmlTextData:D,image:c(A),label:U,labelText:T,lineEnding:V,link:c(W),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Se,resourceDestinationString:k,resourceTitleString:ee,resource:se,setextHeading:c(C),setextHeadingLineSequence:P,setextHeadingText:j,strong:c(),thematicBreak:c()}};Jk(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(I){let F={type:"root",children:[]};const Z={stack:[F],tokenStack:[],config:t,enter:l,exit:u,buffer:a,resume:d,data:n},ce=[];let ke=-1;for(;++ke<I.length;)if(I[ke][1].type==="listOrdered"||I[ke][1].type==="listUnordered")if(I[ke][0]==="enter")ce.push(ke);else{const pt=ce.pop();ke=s(I,pt,ke)}for(ke=-1;++ke<I.length;){const pt=t[I[ke][0]];Yk.call(pt,I[ke][1].type)&&pt[I[ke][1].type].call(Object.assign({sliceSerialize:I[ke][2].sliceSerialize},Z),I[ke][1])}if(Z.tokenStack.length>0){const pt=Z.tokenStack[Z.tokenStack.length-1];(pt[1]||yy).call(Z,void 0,pt[0])}for(F.position={start:Nr(I.length>0?I[0][1].start:{line:1,column:1,offset:0}),end:Nr(I.length>0?I[I.length-2][1].end:{line:1,column:1,offset:0})},ke=-1;++ke<t.transforms.length;)F=t.transforms[ke](F)||F;return F}function s(I,F,Z){let ce=F-1,ke=-1,pt=!1,bt,je,kn,z;for(;++ce<=Z;){const q=I[ce];switch(q[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{q[0]==="enter"?ke++:ke--,z=void 0;break}case"lineEndingBlank":{q[0]==="enter"&&(bt&&!z&&!ke&&!kn&&(kn=ce),z=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:z=void 0}if(!ke&&q[0]==="enter"&&q[1].type==="listItemPrefix"||ke===-1&&q[0]==="exit"&&(q[1].type==="listUnordered"||q[1].type==="listOrdered")){if(bt){let te=ce;for(je=void 0;te--;){const ae=I[te];if(ae[1].type==="lineEnding"||ae[1].type==="lineEndingBlank"){if(ae[0]==="exit")continue;je&&(I[je][1].type="lineEndingBlank",pt=!0),ae[1].type="lineEnding",je=te}else if(!(ae[1].type==="linePrefix"||ae[1].type==="blockQuotePrefix"||ae[1].type==="blockQuotePrefixWhitespace"||ae[1].type==="blockQuoteMarker"||ae[1].type==="listItemIndent"))break}kn&&(!je||kn<je)&&(bt._spread=!0),bt.end=Object.assign({},je?I[je][1].start:q[1].end),I.splice(je||ce,0,["exit",bt,q[2]]),ce++,Z++}if(q[1].type==="listItemPrefix"){const te={type:"listItem",_spread:!1,start:Object.assign({},q[1].start),end:void 0};bt=te,I.splice(ce,0,["enter",te,q[2]]),ce++,Z++,kn=void 0,z=!0}}}return I[F][1]._spread=pt,Z}function i(I,F){return Z;function Z(ce){l.call(this,I(ce),ce),F&&F.call(this,ce)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(I,F,Z){this.stack[this.stack.length-1].children.push(I),this.stack.push(I),this.tokenStack.push([F,Z||void 0]),I.position={start:Nr(F.start),end:void 0}}function c(I){return F;function F(Z){I&&I.call(this,Z),u.call(this,Z)}}function u(I,F){const Z=this.stack.pop(),ce=this.tokenStack.pop();if(ce)ce[0].type!==I.type&&(F?F.call(this,I,ce[0]):(ce[1]||yy).call(this,I,ce[0]));else throw new Error("Cannot close `"+I.type+"` ("+Pa({start:I.start,end:I.end})+"): its not open");Z.position.end=Nr(I.end)}function d(){return aA(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(I){if(this.data.expectingFirstListItemValue){const F=this.stack[this.stack.length-2];F.start=Number.parseInt(this.sliceSerialize(I),10),this.data.expectingFirstListItemValue=void 0}}function m(){const I=this.resume(),F=this.stack[this.stack.length-1];F.lang=I}function p(){const I=this.resume(),F=this.stack[this.stack.length-1];F.meta=I}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I.replace(/(\r?\n|\r)$/g,"")}function g(I){const F=this.resume(),Z=this.stack[this.stack.length-1];Z.label=F,Z.identifier=xi(this.sliceSerialize(I)).toLowerCase()}function x(){const I=this.resume(),F=this.stack[this.stack.length-1];F.title=I}function S(){const I=this.resume(),F=this.stack[this.stack.length-1];F.url=I}function E(I){const F=this.stack[this.stack.length-1];if(!F.depth){const Z=this.sliceSerialize(I).length;F.depth=Z}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function P(I){const F=this.stack[this.stack.length-1];F.depth=this.sliceSerialize(I).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function O(I){const Z=this.stack[this.stack.length-1].children;let ce=Z[Z.length-1];(!ce||ce.type!=="text")&&(ce=Te(),ce.position={start:Nr(I.start),end:void 0},Z.push(ce)),this.stack.push(ce)}function D(I){const F=this.stack.pop();F.value+=this.sliceSerialize(I),F.position.end=Nr(I.end)}function V(I){const F=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Z=F.children[F.children.length-1];Z.position.end=Nr(I.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(F.type)&&(O.call(this,I),D.call(this,I))}function G(){this.data.atHardBreak=!0}function de(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I}function M(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I}function $(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I}function W(){const I=this.stack[this.stack.length-1];if(this.data.inReference){const F=this.data.referenceType||"shortcut";I.type+="Reference",I.referenceType=F,delete I.url,delete I.title}else delete I.identifier,delete I.label;this.data.referenceType=void 0}function A(){const I=this.stack[this.stack.length-1];if(this.data.inReference){const F=this.data.referenceType||"shortcut";I.type+="Reference",I.referenceType=F,delete I.url,delete I.title}else delete I.identifier,delete I.label;this.data.referenceType=void 0}function T(I){const F=this.sliceSerialize(I),Z=this.stack[this.stack.length-2];Z.label=iR(F),Z.identifier=xi(F).toLowerCase()}function U(){const I=this.stack[this.stack.length-1],F=this.resume(),Z=this.stack[this.stack.length-1];if(this.data.inReference=!0,Z.type==="link"){const ce=I.children;Z.children=ce}else Z.alt=F}function k(){const I=this.resume(),F=this.stack[this.stack.length-1];F.url=I}function ee(){const I=this.resume(),F=this.stack[this.stack.length-1];F.title=I}function se(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function Se(I){const F=this.resume(),Z=this.stack[this.stack.length-1];Z.label=F,Z.identifier=xi(this.sliceSerialize(I)).toLowerCase(),this.data.referenceType="full"}function it(I){this.data.characterReferenceType=I.type}function we(I){const F=this.sliceSerialize(I),Z=this.data.characterReferenceType;let ce;Z?(ce=Vk(F,Z==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ce=Vm(F);const ke=this.stack[this.stack.length-1];ke.value+=ce}function Tt(I){const F=this.stack.pop();F.position.end=Nr(I.end)}function Ke(I){D.call(this,I);const F=this.stack[this.stack.length-1];F.url=this.sliceSerialize(I)}function cn(I){D.call(this,I);const F=this.stack[this.stack.length-1];F.url="mailto:"+this.sliceSerialize(I)}function Jt(){return{type:"blockquote",children:[]}}function N(){return{type:"code",lang:null,meta:null,value:""}}function R(){return{type:"inlineCode",value:""}}function ye(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $t(){return{type:"emphasis",children:[]}}function L(){return{type:"heading",depth:0,children:[]}}function J(){return{type:"break"}}function ie(){return{type:"html",value:""}}function be(){return{type:"image",title:null,url:"",alt:null}}function Pe(){return{type:"link",title:null,url:"",children:[]}}function ut(I){return{type:"list",ordered:I.type==="listOrdered",start:null,spread:I._spread,children:[]}}function Ce(I){return{type:"listItem",spread:I._spread,checked:null,children:[]}}function Ve(){return{type:"paragraph",children:[]}}function Qe(){return{type:"strong",children:[]}}function Te(){return{type:"text",value:""}}function vr(){return{type:"thematicBreak"}}}function Nr(e){return{line:e.line,column:e.column,offset:e.offset}}function Jk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Jk(e,r):cR(e,r)}}function cR(e,t){let n;for(n in t)if(Yk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function yy(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Pa({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Pa({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Pa({start:t.start,end:t.end})+") is still open")}function uR(e){const t=this;t.parser=n;function n(r){return oR(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function dR(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function hR(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function fR(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function mR(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pR(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gR(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Bi(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function yR(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xR(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Qk(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function vR(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Qk(e,t);const s={src:Bi(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function wR(e,t){const n={src:Bi(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function bR(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function kR(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Qk(e,t);const s={href:Bi(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function jR(e,t){const n={href:Bi(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function SR(e,t,n){const r=e.all(t),s=n?NR(n):Zk(t),i={},a=[];if(typeof t.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?a.push(...d.children):a.push(d)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,u),e.applyData(t,u)}function NR(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Zk(n[r])}return t}function Zk(e){const t=e.spread;return t??e.children.length>1}function _R(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function ER(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function PR(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function CR(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function TR(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Om(t.children[1]),c=Rk(t.children[t.children.length-1]);l&&c&&(a.position={start:l,end:c}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function AR(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],f={},m=a?a[c]:void 0;m&&(f.align=m);let p={type:"element",tagName:i,properties:f,children:[]};h&&(p.children=e.all(h),e.patch(h,p),p=e.applyData(h,p)),u.push(p)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function IR(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const xy=9,vy=32;function RR(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(wy(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(wy(t.slice(s),s>0,!1)),i.join("")}function wy(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===xy||i===vy;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===xy||i===vy;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function DR(e,t){const n={type:"text",value:RR(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function LR(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const OR={blockquote:dR,break:hR,code:fR,delete:mR,emphasis:pR,footnoteReference:gR,heading:yR,html:xR,imageReference:vR,image:wR,inlineCode:bR,linkReference:kR,link:jR,listItem:SR,list:_R,paragraph:ER,root:PR,strong:CR,table:TR,tableCell:IR,tableRow:AR,text:DR,thematicBreak:LR,toml:qo,yaml:qo,definition:qo,footnoteDefinition:qo};function qo(){}const e1=-1,Ic=0,Ta=1,Zl=2,Bm=3,Hm=4,Wm=5,qm=6,t1=7,n1=8,by=typeof self=="object"?self:globalThis,$R=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case Ic:case e1:return n(a,s);case Ta:{const l=n([],s);for(const c of a)l.push(r(c));return l}case Zl:{const l=n({},s);for(const[c,u]of a)l[r(c)]=r(u);return l}case Bm:return n(new Date(a),s);case Hm:{const{source:l,flags:c}=a;return n(new RegExp(l,c),s)}case Wm:{const l=n(new Map,s);for(const[c,u]of a)l.set(r(c),r(u));return l}case qm:{const l=n(new Set,s);for(const c of a)l.add(r(c));return l}case t1:{const{name:l,message:c}=a;return n(new by[l](c),s)}case n1:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new by[i](a),s)};return r},ky=e=>$R(new Map,e)(0),Us="",{toString:MR}={},{keys:FR}=Object,ra=e=>{const t=typeof e;if(t!=="object"||!e)return[Ic,t];const n=MR.call(e).slice(8,-1);switch(n){case"Array":return[Ta,Us];case"Object":return[Zl,Us];case"Date":return[Bm,Us];case"RegExp":return[Hm,Us];case"Map":return[Wm,Us];case"Set":return[qm,Us];case"DataView":return[Ta,n]}return n.includes("Array")?[Ta,n]:n.includes("Error")?[t1,n]:[Zl,n]},Go=([e,t])=>e===Ic&&(t==="function"||t==="symbol"),VR=(e,t,n,r)=>{const s=(a,l)=>{const c=r.push(a)-1;return n.set(l,c),c},i=a=>{if(n.has(a))return n.get(a);let[l,c]=ra(a);switch(l){case Ic:{let d=a;switch(c){case"bigint":l=n1,d=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([e1],a)}return s([l,d],a)}case Ta:{if(c){let f=a;return c==="DataView"?f=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(a)),s([c,[...f]],a)}const d=[],h=s([l,d],a);for(const f of a)d.push(i(f));return h}case Zl:{if(c)switch(c){case"BigInt":return s([c,a.toString()],a);case"Boolean":case"Number":case"String":return s([c,a.valueOf()],a)}if(t&&"toJSON"in a)return i(a.toJSON());const d=[],h=s([l,d],a);for(const f of FR(a))(e||!Go(ra(a[f])))&&d.push([i(f),i(a[f])]);return h}case Bm:return s([l,a.toISOString()],a);case Hm:{const{source:d,flags:h}=a;return s([l,{source:d,flags:h}],a)}case Wm:{const d=[],h=s([l,d],a);for(const[f,m]of a)(e||!(Go(ra(f))||Go(ra(m))))&&d.push([i(f),i(m)]);return h}case qm:{const d=[],h=s([l,d],a);for(const f of a)(e||!Go(ra(f)))&&d.push(i(f));return h}}const{message:u}=a;return s([l,{name:c,message:u}],a)};return i},jy=(e,{json:t,lossy:n}={})=>{const r=[];return VR(!(t||n),!!t,new Map,r)(e),r},ec=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?ky(jy(e,t)):structuredClone(e):(e,t)=>ky(jy(e,t));function zR(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function UR(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function BR(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||zR,r=e.options.footnoteBackLabel||UR,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),f=Bi(h.toLowerCase());let m=0;const p=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++m<=v;){p.length>0&&p.push({type:"text",value:" "});let g=typeof n=="string"?n:n(c,m);typeof g=="string"&&(g={type:"text",value:g}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,m),className:["data-footnote-backref"]},children:Array.isArray(g)?g:[g]})}const w=d[d.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const g=w.children[w.children.length-1];g&&g.type==="text"?g.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...p)}else d.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(d,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...ec(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const r1=function(e){if(e==null)return GR;if(typeof e=="function")return Rc(e);if(typeof e=="object")return Array.isArray(e)?HR(e):WR(e);if(typeof e=="string")return qR(e);throw new Error("Expected function, string, or object as test")};function HR(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=r1(e[n]);return Rc(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function WR(e){const t=e;return Rc(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function qR(e){return Rc(t);function t(n){return n&&n.type===e}}function Rc(e){return t;function t(n,r,s){return!!(KR(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function GR(){return!0}function KR(e){return e!==null&&typeof e=="object"&&"type"in e}const s1=[],XR=!0,Sy=!1,YR="skip";function JR(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=r1(s),a=r?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const m=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return f;function f(){let m=s1,p,v,w;if((!t||i(c,u,d[d.length-1]||void 0))&&(m=QR(n(c,d)),m[0]===Sy))return m;if("children"in c&&c.children){const y=c;if(y.children&&m[0]!==YR)for(v=(r?y.children.length:-1)+a,w=d.concat(y);v>-1&&v<y.children.length;){const g=y.children[v];if(p=l(g,v,w)(),p[0]===Sy)return p;v=typeof p[1]=="number"?p[1]:v+a}}return m}}}function QR(e){return Array.isArray(e)?e:typeof e=="number"?[XR,e]:e==null?s1:[e]}function i1(e,t,n,r){let s,i,a;typeof t=="function"&&typeof n!="function"?(i=void 0,a=t,s=n):(i=t,a=n,s=r),JR(e,i,l,s);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return a(c,h,d)}}const Lh={}.hasOwnProperty,ZR={};function eD(e,t){const n=t||ZR,r=new Map,s=new Map,i=new Map,a={...OR,...n.handlers},l={all:u,applyData:nD,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:c,options:n,patch:tD,wrap:sD};return i1(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:s,f=String(d.identifier).toUpperCase();h.has(f)||h.set(f,d)}}),l;function c(d,h){const f=d.type,m=l.handlers[f];if(Lh.call(l.handlers,f)&&m)return m(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in d){const{children:v,...w}=d,y=ec(w);return y.children=l.all(d),y}return ec(d)}return(l.options.unknownHandler||rD)(l,d,h)}function u(d){const h=[];if("children"in d){const f=d.children;let m=-1;for(;++m<f.length;){const p=l.one(f[m],d);if(p){if(m&&f[m-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Ny(p.value)),!Array.isArray(p)&&p.type==="element")){const v=p.children[0];v&&v.type==="text"&&(v.value=Ny(v.value))}Array.isArray(p)?h.push(...p):h.push(p)}}}return h}}function tD(e,t){e.position&&(t.position=M5(e))}function nD(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,ec(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function rD(e,t){const n=t.data||{},r="value"in t&&!(Lh.call(n,"hProperties")||Lh.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function sD(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Ny(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function _y(e,t){const n=eD(e,t),r=n.one(e,void 0),s=BR(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function iD(e,t){return e&&"run"in e?async function(n,r){const s=_y(n,{file:r,...t});await e.run(s,r)}:function(n,r){return _y(n,{file:r,...e||t})}}function Ey(e){if(e)throw e}var pl=Object.prototype.hasOwnProperty,a1=Object.prototype.toString,Py=Object.defineProperty,Cy=Object.getOwnPropertyDescriptor,Ty=function(t){return typeof Array.isArray=="function"?Array.isArray(t):a1.call(t)==="[object Array]"},Ay=function(t){if(!t||a1.call(t)!=="[object Object]")return!1;var n=pl.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&pl.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||pl.call(t,s)},Iy=function(t,n){Py&&n.name==="__proto__"?Py(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Ry=function(t,n){if(n==="__proto__")if(pl.call(t,n)){if(Cy)return Cy(t,n).value}else return;return t[n]},aD=function e(){var t,n,r,s,i,a,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=Ry(l,n),s=Ry(t,n),l!==s&&(d&&s&&(Ay(s)||(i=Ty(s)))?(i?(i=!1,a=r&&Ty(r)?r:[]):a=r&&Ay(r)?r:{},Iy(l,{name:n,newValue:e(d,a,s)})):typeof s<"u"&&Iy(l,{name:n,newValue:s}));return l};const Fu=Fh(aD);function Oh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function oD(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...s);function l(c,...u){const d=e[++i];let h=-1;if(c){a(c);return}for(;++h<s.length;)(u[h]===null||u[h]===void 0)&&(u[h]=s[h]);s=u,d?lD(d,l)(...u):a(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function lD(e,t){let n;return r;function r(...a){const l=e.length>a.length;let c;l&&a.push(s);try{c=e.apply(this,a)}catch(u){const d=u;if(l&&n)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(a,...l){n||(n=!0,t(a,...l))}function i(a){s(null,a)}}const Fn={basename:cD,dirname:uD,extname:dD,join:hD,sep:"/"};function cD(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');wo(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function uD(e){if(wo(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function dD(e){wo(e);let t=e.length,n=-1,r=0,s=-1,i=0,a;for(;t--;){const l=e.codePointAt(t);if(l===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function hD(...e){let t=-1,n;for(;++t<e.length;)wo(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":fD(n)}function fD(e){wo(e);const t=e.codePointAt(0)===47;let n=mD(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function mD(e,t){let n="",r=0,s=-1,i=0,a=-1,l,c;for(;++a<=e.length;){if(a<e.length)l=e.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,a):n=e.slice(s+1,a),r=a-s-1;s=a,i=0}else l===46&&i>-1?i++:i=-1}return n}function wo(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const pD={cwd:gD};function gD(){return"/"}function $h(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function yD(e){if(typeof e=="string")e=new URL(e);else if(!$h(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return xD(e)}function xD(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Vu=["history","path","basename","stem","extname","dirname"];class o1{constructor(t){let n;t?$h(t)?n={path:t}:typeof t=="string"||vD(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":pD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Vu.length;){const i=Vu[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Vu.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Fn.basename(this.path):void 0}set basename(t){Uu(t,"basename"),zu(t,"basename"),this.path=Fn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Fn.dirname(this.path):void 0}set dirname(t){Dy(this.basename,"dirname"),this.path=Fn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Fn.extname(this.path):void 0}set extname(t){if(zu(t,"extname"),Dy(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Fn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){$h(t)&&(t=yD(t)),Uu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Fn.basename(this.path,this.extname):void 0}set stem(t){Uu(t,"stem"),zu(t,"stem"),this.path=Fn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Ct(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function zu(e,t){if(e&&e.includes(Fn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Fn.sep+"`")}function Uu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Dy(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function vD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const wD=function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},bD={}.hasOwnProperty;class Gm extends wD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=oD()}copy(){const t=new Gm;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Fu(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Wu("data",this.frozen),this.namespace[t]=n,this):bD.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Wu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Ko(t),r=this.parser||this.Parser;return Bu("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Bu("process",this.parser||this.Parser),Hu("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const l=Ko(t),c=r.parse(l);r.run(c,l,function(d,h,f){if(d||!h||!f)return u(d);const m=h,p=r.stringify(m,f);SD(p)?f.value=p:f.result=p,u(d,f)});function u(d,h){d||!h?a(d):i?i(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),Bu("processSync",this.parser||this.Parser),Hu("processSync",this.compiler||this.Compiler),this.process(t,s),Oy("processSync","process",n),r;function s(i,a){n=!0,Ey(i),r=a}}run(t,n,r){Ly(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,l){const c=Ko(n);s.run(t,c,u);function u(d,h,f){const m=h||t;d?l(d):a?a(m):r(void 0,m,f)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),Oy("runSync","run",r),s;function i(a,l){Ey(a),s=l,r=!0}}stringify(t,n){this.freeze();const r=Ko(n),s=this.compiler||this.Compiler;return Hu("stringify",s),Ly(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Wu("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Fu(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];i(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===u){f=h;break}if(f===-1)r.push([u,...d]);else if(d.length>0){let[m,...p]=d;const v=r[f][1];Oh(v)&&Oh(m)&&(m=Fu(!0,v,m)),r[f]=[u,m,...p]}}}}const kD=new Gm().freeze();function Bu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Hu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Wu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ly(e){if(!Oh(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Oy(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ko(e){return jD(e)?e:new o1(e)}function jD(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function SD(e){return typeof e=="string"||ND(e)}function ND(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const _D="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",$y=[],My={allowDangerousHtml:!0},ED=/^(https?|ircs?|mailto|xmpp)$/i,PD=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Mh(e){const t=CD(e),n=TD(e);return AD(t.runSync(t.parse(n),n),e)}function CD(e){const t=e.rehypePlugins||$y,n=e.remarkPlugins||$y,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...My}:My;return kD().use(uR).use(n).use(iD,r).use(t)}function TD(e){const t=e.children||"",n=new o1;return typeof t=="string"&&(n.value=t),n}function AD(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,a=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||ID;for(const d of PD)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+_D+d.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),i1(e,u),B5(e,{Fragment:o.Fragment,components:s,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function u(d,h,f){if(d.type==="raw"&&f&&typeof h=="number")return a?f.children.splice(h,1):f.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let m;for(m in Ou)if(Object.hasOwn(Ou,m)&&Object.hasOwn(d.properties,m)){const p=d.properties[m],v=Ou[m];(v===null||v.includes(d.tagName))&&(d.properties[m]=c(String(p||""),m,d))}}if(d.type==="element"){let m=n?!n.includes(d.tagName):i?i.includes(d.tagName):!1;if(!m&&r&&typeof h=="number"&&(m=!r(d,h,f)),m&&f&&typeof h=="number")return l&&d.children?f.children.splice(h,1,...d.children):f.children.splice(h,1),h}}}function ID(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||ED.test(e.slice(0,t))?e:""}function Fy({strategicDirectives:e,onUpdateChecklist:t,onSetActiveSD:n,currentSD:r,isCompact:s,detailMode:i,onRefresh:a,onUpdateStatus:l}){const{id:c}=$f(),u=Oi(),[d,h]=b.useState(null),[f,m]=b.useState("list"),[p,v]=b.useState(null),[w,y]=b.useState(()=>localStorage.getItem("sd-filter-migration-v2")?localStorage.getItem("sd-status-filter")||"active,draft":(localStorage.setItem("sd-filter-migration-v2","true"),localStorage.setItem("sd-status-filter","active,draft"),localStorage.setItem("sd-priority-filter","critical,high"),localStorage.setItem("sd-application-filter","EHG"),"active,draft")),[g,x]=b.useState(""),[S,E]=b.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-priority-filter")||"critical,high"),[j,P]=b.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-application-filter")||"EHG"),[C,O]=b.useState(null),[D,V]=b.useState(!1),[G,de]=b.useState("all"),[M,$]=b.useState(null),[W,A]=b.useState(null);b.useEffect(()=>{localStorage.setItem("sd-status-filter",w)},[w]),b.useEffect(()=>{localStorage.setItem("sd-priority-filter",S)},[S]),b.useEffect(()=>{localStorage.setItem("sd-application-filter",j)},[j]),b.useEffect(()=>{if(i&&c){console.log("Detail mode - Looking for SD with id:",c),console.log("Available SDs count:",e.length),e.length>0&&console.log("First few SDs:",e.slice(0,3).map(R=>({id:R.id,title:R.title})));const N=e.find(R=>R.id===c);N?(console.log("Found SD:",N.id,N.title),v(N),m("detail"),document.title=`${N.title||N.id} - LEO Protocol Dashboard`):e.length>0?(console.warn(`SD with id '${c}' not found in ${e.length} directives, redirecting to list`),u("/strategic-directives",{replace:!0})):console.log("Waiting for strategic directives to load...")}else i||(m("list"),v(null),document.title="Strategic Directives - LEO Protocol Dashboard")},[c,i,e,u]);const T=N=>{h(d===N?null:N)},U=N=>{navigator.clipboard.writeText(N),O(N),setTimeout(()=>O(null),2e3)},k=()=>{x(""),E("all"),y("all"),P("all"),de("all")},ee=()=>{V(!1)},se=g||S!=="all"||w!=="all"||j!=="all"||G!=="all",_=N=>{switch(N==null?void 0:N.toLowerCase()){case"critical":return"border-l-4 border-l-red-500";case"high":return"border-l-4 border-l-orange-500";case"medium":return"border-l-4 border-l-yellow-500";case"low":return"border-l-4 border-l-gray-400";default:return"border-l-4 border-l-gray-300"}},Se=N=>N===100?"bg-gradient-to-r from-green-400 to-green-600 animate-pulse":N>=76?"bg-gradient-to-r from-blue-400 to-blue-600":N>=51?"bg-gradient-to-r from-yellow-400 to-yellow-600":N>=26?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gradient-to-r from-red-400 to-red-600",it=(N,R)=>{const ye=e.find($t=>$t.id===N);ye&&ye.checklist&&ye.checklist[R]&&t(N,R,!ye.checklist[R].checked)},we=N=>{if(!N||!N.id){console.error("Invalid SD for navigation:",N);return}try{u(`/strategic-directives/${N.id}`)}catch(R){console.error("Navigation error:",R)}},Tt=async N=>{try{console.log("Generating stories for SD:",N),u(`/stories/${N}`)}catch(R){console.error("Error generating stories:",R)}};if(f==="detail"&&p)return o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>u("/strategic-directives"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[o.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Back to List"]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:[p.id,": ",p.title||"Untitled"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:p.metadata&&Object.entries(p.metadata).map(([N,R])=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:N}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:typeof R=="object"?JSON.stringify(R,null,2):String(R)})]},N))}),o.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:o.jsx(Mh,{children:p.content||"No content available"})}),p.checklist&&p.checklist.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Requirements Checklist"}),o.jsx("div",{className:"space-y-2",children:p.checklist.map((N,R)=>o.jsxs("label",{className:"flex items-start p-3 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:N.checked,onChange:()=>it(p.id,R),className:"mt-1 mr-3 w-5 h-5 text-primary-600 rounded focus:ring-primary-500"}),o.jsx("span",{className:`flex-1 ${N.checked?"line-through text-gray-500":""}`,children:N.text})]},R))})]}),p.prds&&p.prds.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[o.jsx(Et,{className:"w-5 h-5 mr-2 text-blue-600"}),"Product Requirements Documents (",p.prds.length,")"]}),o.jsx("div",{className:"space-y-4",children:p.prds.map(N=>o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:N.title}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["ID: ",N.id]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.status==="approved"?"bg-green-100 text-green-800":N.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:N.status}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.priority==="high"?"bg-red-100 text-red-800":N.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:N.priority})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Phase:"})," ",N.phase]}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Progress:"})," ",N.progress,"%"]})]}),o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Created:"})," ",new Date(N.createdAt).toLocaleDateString()]})})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:o.jsxs("button",{onClick:()=>u(`/prds/${N.id}`),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center",children:["View Full PRD ",o.jsx(Ut,{className:"w-4 h-4 ml-1"})]})})]},N.id))})]}),p.executionSequences&&p.executionSequences.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[o.jsx(ar,{className:"w-5 h-5 mr-2 text-green-600"}),"Execution Sequence Steps (",p.executionSequences.length,")"]}),o.jsx("div",{className:"space-y-3",children:p.executionSequences.map(N=>o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${N.status==="completed"?"bg-green-500 text-white":N.status==="in_progress"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:N.sequenceNumber}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:N.description}),o.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-green-700 dark:text-green-300",children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Executor:"})," ",N.executorRole]}),N.completedAt&&o.jsxs("span",{children:[o.jsx("strong",{children:"Completed:"})," ",new Date(N.completedAt).toLocaleDateString()]})]})]})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.status==="completed"?"bg-green-100 text-green-800":N.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:N.status})]})},N.id))})]})]})]});if(f==="detail"&&!p)return o.jsx("div",{className:"p-6 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading strategic directive..."})]})});const Ke=e.filter(N=>{var ie,be,Pe,ut,Ce;let R=!0;if(w!=="all"){const Ve=(ie=N.status)==null?void 0:ie.toLowerCase();R=(w.includes(",")?w.split(","):[w]).some(Te=>Te==="active"?Ve==="active":Te==="draft"?Ve==="draft":Te==="on_hold"?Ve==="on_hold":Te==="cancelled"?Ve==="cancelled":Te==="archived"?Ve==="archived"||Ve==="completed"||Ve==="complete":!1)}let ye=!0;if(g){const Ve=g.toLowerCase();ye=((be=N.id)==null?void 0:be.toLowerCase().includes(Ve))||((Pe=N.title)==null?void 0:Pe.toLowerCase().includes(Ve))||((ut=N.description)==null?void 0:ut.toLowerCase().includes(Ve))}let $t=!0;S!=="all"&&($t=(S.includes(",")?S.split(","):[S]).some(Qe=>{var Te;return((Te=N.priority)==null?void 0:Te.toLowerCase())===Qe.toLowerCase()}));let L=!0;j!=="all"&&(L=N.targetApplication===j);let J=!0;return G!=="all"&&(J=((Ce=N.category)==null?void 0:Ce.toLowerCase())===G.toLowerCase()),R&&ye&&$t&&L&&J}),cn=[...Ke].sort((N,R)=>{if(N.sequence_rank!==void 0&&R.sequence_rank!==void 0)return N.sequence_rank-R.sequence_rank;if(N.sequence_rank!==void 0)return-1;if(R.sequence_rank!==void 0)return 1;const ye=J=>{if(!J)return 999999;const ie=J.match(/SD-(\d+)/);return ie?parseInt(ie[1],10):999999},$t=ye(N.id),L=ye(R.id);return $t-L}),Jt=N=>{const R=N==null?void 0:N.toLowerCase();return R==="archived"||R==="completed"||R==="complete"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 transition-all duration-200 hover:scale-105",children:[o.jsx(Ci,{className:"w-3 h-3 mr-1"}),"Archived"]}):R==="draft"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 transition-all duration-200 hover:scale-105",children:[o.jsx(N0,{className:"w-3 h-3 mr-1"}),"Draft"]}):R==="on_hold"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400 transition-all duration-200 hover:scale-105",children:[o.jsx(xr,{className:"w-3 h-3 mr-1"}),"On Hold"]}):R==="cancelled"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 transition-all duration-200 hover:scale-105",children:[o.jsx(qr,{className:"w-3 h-3 mr-1"}),"Cancelled"]}):o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 transition-all duration-200 hover:scale-105",children:[o.jsx(Xl,{className:"w-3 h-3 mr-1 animate-pulse"}),"Active"]})};return o.jsxs("div",{className:s?"p-3":"p-6",children:[o.jsxs("div",{className:s?"mb-3":"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{children:o.jsxs("h1",{className:`${s?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white flex items-center`,children:[o.jsx(Kl,{className:"w-6 h-6 mr-2 text-primary-500 animate-pulse"}),"Strategic Directives"]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sc,{onRefresh:a,isCompact:s}),o.jsxs("button",{onClick:()=>u("/directive-lab?mode=quick"),className:`flex items-center ${s?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[o.jsx(Jb,{className:`${s?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]})]})]}),o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Yb,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 ${s?"w-4 h-4":"w-5 h-5"}`}),o.jsx("input",{type:"text",placeholder:"Search by ID, title, or description...",value:g,onChange:N=>x(N.target.value),className:`w-full ${s?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200`}),g&&o.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(qr,{className:`${s?"w-4 h-4":"w-5 h-5"}`})})]}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[o.jsxs("button",{onClick:()=>V(!D),className:`flex items-center gap-2 ${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 w-full justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[D?o.jsx(Un,{className:`${s?"w-4 h-4":"w-5 h-5"}`}):o.jsx(Ut,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),o.jsx(fh,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),o.jsx("span",{className:"font-medium",children:"Filters"})]}),o.jsx("div",{className:"flex items-center",children:o.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:[Ke.length," of ",e.length,Ke.filter(N=>N.rolled_triage).length>0&&o.jsxs("span",{className:"ml-1",children:["(",Ke.filter(N=>N.rolled_triage==="High").length,"H /",Ke.filter(N=>N.rolled_triage==="Medium").length,"M /",Ke.filter(N=>N.rolled_triage==="Low").length,"L /",Ke.filter(N=>N.rolled_triage==="Future").length,"F)"]})]})})]}),D&&o.jsxs("div",{className:"mt-4 bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg transition-all duration-300 animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"group",children:[o.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Status"}),o.jsxs("select",{value:w,onChange:N=>y(N.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[o.jsx("option",{value:"all",children:"All Statuses"}),o.jsx("option",{value:"active,draft",children:"Active & Draft (Default)"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"draft",children:"Draft Only"}),o.jsx("option",{value:"on_hold",children:"On Hold"}),o.jsx("option",{value:"cancelled",children:"Cancelled"}),o.jsx("option",{value:"archived",children:"Archived/Completed"})]})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Priority"}),o.jsxs("select",{value:S,onChange:N=>E(N.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"critical,high",children:"Critical & High (Default)"}),o.jsx("option",{value:"critical",children:"Critical"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"})]})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Application"}),o.jsxs("select",{value:j,onChange:N=>P(N.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[o.jsx("option",{value:"all",children:"All Applications"}),o.jsx("option",{value:"EHG",children:"EHG (Default)"}),o.jsx("option",{value:"EHG_ENGINEER",children:"EHG Engineer"})]})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Category"}),o.jsxs("select",{value:G,onChange:N=>de(N.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[o.jsx("option",{value:"all",children:"All Categories"}),[...new Set(e.map(N=>N.category).filter(Boolean))].map(N=>o.jsx("option",{value:N,children:N},N))]})]})]}),o.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-600",children:[o.jsx("div",{className:"flex items-center gap-2",children:se&&o.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 flex items-center gap-1`,children:[o.jsx(fh,{className:"w-4 h-4"}),"Filtering applied"]})}),o.jsxs("div",{className:"flex items-center gap-3",children:[se&&o.jsxs("button",{onClick:k,className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-2 font-medium border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500`,children:[o.jsx(qr,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Clear All"]}),o.jsxs("button",{onClick:ee,className:`${s?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"} bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg transform hover:scale-105`,children:[o.jsx(Wb,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Done"]})]})]})]})]})]})]}),Ke.length===0?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[o.jsx(Et,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e.length===0?"No strategic directives found":`No ${w==="all"?"":w} directives found`})]}):o.jsx("div",{className:"space-y-4",children:cn.map(N=>o.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${_(N.priority)}`,children:o.jsxs("div",{className:`${s?"p-3":"p-6"} relative`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>T(N.id),className:"mr-2 p-1 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/20 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 transform hover:scale-105","aria-label":d===N.id?"Collapse":"Expand",children:o.jsx(Ut,{className:`w-4 h-4 transition-transform duration-200 ease-in-out ${d===N.id?"rotate-90":""}`})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center",children:[N.sequence_rank&&o.jsxs("span",{className:"text-xs font-medium px-1.5 py-0.5 mr-2 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400 rounded",children:["#",N.sequence_rank]}),o.jsxs("span",{className:"inline-flex items-center group",children:[o.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-mono text-lg font-bold",children:N.id}),o.jsx("button",{onClick:R=>{R.stopPropagation(),U(N.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-2",title:"Copy ID",children:C===N.id?o.jsx(gi,{className:"w-3 h-3 text-green-500"}):o.jsx(vm,{className:"w-3 h-3 text-gray-500"})})]})]}),o.jsx("h2",{className:`${s?"text-base":"text-xl"} font-semibold text-gray-900 dark:text-white ${s?"line-clamp-2":""}`,children:N.title||"Untitled"})]})]}),o.jsxs("div",{className:`${s?"mt-2 gap-1":"mt-3 gap-2"} flex flex-wrap items-center`,children:[o.jsxs("div",{className:"relative inline-block",children:[o.jsxs("button",{onClick:R=>{R.stopPropagation(),A(W===N.id?null:N.id)},className:"group flex items-center gap-1 hover:opacity-80 transition-opacity",children:[Jt(N.status),o.jsx(N0,{className:"w-3 h-3 text-gray-500 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),W===N.id&&o.jsx("div",{className:"absolute left-0 mt-1 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:o.jsx("div",{className:"py-1",children:["active","draft","on_hold","cancelled","archived"].map(R=>o.jsxs("button",{onClick:ye=>{ye.stopPropagation(),l&&l(N.id,R),A(null)},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${N.status===R?"bg-gray-50 dark:bg-gray-700/50 text-primary-600":"text-gray-700 dark:text-gray-200"}`,children:[o.jsx("span",{className:"capitalize",children:R}),N.status===R&&o.jsx(gi,{className:"w-3 h-3"})]},R))})})]}),N.targetApplication&&o.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${N.targetApplication==="EHG_ENGINEER"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400":N.targetApplication==="EHG"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:N.targetApplication.replace("_"," ")}),o.jsxs("button",{onClick:R=>{R.stopPropagation(),u(`/backlog?sd=${N.sd_id||N.id}`)},className:`flex items-center ${s?"px-2 py-0.5 text-xs":"px-3 py-1 text-sm"} ${N.total_backlog_items>0||N.total_items>0||N.backlog_count>0?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800/40":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"} rounded transition-colors`,children:[o.jsx(Ci,{className:`${s?"w-3 h-3":"w-4 h-4"} mr-1`}),"Backlog",o.jsx("span",{className:`ml-1 ${s?"px-1":"px-1.5"} py-0.5 ${N.total_backlog_items>0||N.total_items>0||N.backlog_count>0?"bg-indigo-200 dark:bg-indigo-800":"bg-gray-200 dark:bg-gray-600"} rounded text-xs font-bold`,children:N.total_backlog_items||N.total_items||N.backlog_count||0})]}),N.rolled_triage&&o.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${N.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":N.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":N.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:s?N.rolled_triage[0]:`Triage: ${N.rolled_triage}`}),N.must_have_pct!==null&&o.jsxs("span",{className:`${s?"px-1.5 py-0.5":"px-2 py-1"} text-xs bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded`,children:[N.must_have_pct,"%",!s&&" Must-Have"]}),N.category&&!s&&o.jsx("span",{className:"px-2 py-1 text-xs bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:N.category}),N.metadata.Status&&N.metadata.Status!==N.status&&o.jsx("span",{className:`px-2 py-1 text-xs rounded ${N.metadata.Status==="Completed"?"bg-green-100 text-green-800":N.metadata.Status==="In Progress"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:N.metadata.Status}),N.metadata.Priority&&o.jsx("span",{className:`px-2 py-1 text-xs rounded ${N.metadata.Priority==="High"?"bg-red-100 text-red-800":N.metadata.Priority==="Medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:N.metadata.Priority}),N.metadata.Owner&&o.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded flex items-center",children:[o.jsx(Sm,{className:"w-3 h-3 mr-1"}),N.metadata.Owner]}),N.metadata.Date&&o.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded flex items-center",children:[o.jsx(Hb,{className:"w-3 h-3 mr-1"}),N.metadata.Date]})]}),o.jsxs("div",{className:`${s?"mt-2":"mt-4"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 flex items-center`,children:["Progress",N.progressTrend&&(N.progressTrend>0?o.jsx(pr,{className:"w-3 h-3 ml-1 text-green-500"}):o.jsx(Or,{className:"w-3 h-3 ml-1 text-red-500"}))]}),o.jsxs("span",{className:`${s?"text-xs":"text-sm"} font-semibold flex items-center`,children:[N.progress,"%",N.progress===100&&o.jsx(Kl,{className:"w-3 h-3 ml-1 text-green-500 animate-pulse"})]})]}),o.jsx("div",{className:`w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${s?"h-2":"h-3"} shadow-inner`,children:o.jsx("div",{className:`${s?"h-2":"h-3"} rounded-full transition-all duration-1000 ease-out ${Se(N.progress)}`,style:{width:`${N.progress}%`,boxShadow:N.progress===100?"0 0 10px rgba(34, 197, 94, 0.5)":"none"}})})]})]}),o.jsxs("div",{className:`${s?"ml-2":"ml-4"} flex flex-col items-end ${s?"space-y-1":"space-y-2"}`,children:[o.jsxs("div",{className:`flex ${s?"space-x-1":"space-x-2"}`,children:[o.jsx("button",{onClick:()=>we(N),className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg`,children:s?"View":"View Full"}),r===N.id?o.jsxs("button",{disabled:!0,className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-green-500 text-white rounded flex items-center`,children:[o.jsx(ar,{className:`${s?"w-3 h-3":"w-4 h-4"} mr-1`}),s?" Working":" Working On"]}):o.jsxs("button",{onClick:()=>n&&n(N.id),className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center`,children:[o.jsx(ar,{className:`${s?"w-3 h-3":"w-4 h-4"} ${s?"":"mr-1"} animate-pulse`}),s?"Work On":"Work On This"]})]}),N.metadata&&o.jsxs("div",{className:`${s?"mt-2":"mt-3"} space-y-1`,children:[o.jsx("div",{className:`${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 font-medium`,children:"Metadata"}),o.jsx("div",{className:"space-y-1",children:Object.entries(N.metadata).map(([R,ye])=>ye&&o.jsxs("div",{className:`flex ${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400`,children:[o.jsxs("span",{className:"font-medium mr-2 min-w-[80px]",children:[R,":"]}),o.jsx("span",{className:"break-all",children:ye})]},R))})]}),N.storySummary&&o.jsxs("div",{className:`${s?"mt-2":"mt-3"} pt-3 border-t border-gray-200 dark:border-gray-700`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:`${s?"text-xs":"text-sm"} font-medium text-gray-700 dark:text-gray-300 flex items-center`,children:" User Stories"}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-2 py-1 rounded-full`,children:N.storyCount})]}),N.storyCount>0?o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:`flex items-center space-x-2 ${s?"text-xs":"text-sm"}`,children:[o.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[" ",N.storySummary.statusBreakdown.passing]}),o.jsxs("span",{className:"text-red-600 dark:text-red-400",children:[" ",N.storySummary.statusBreakdown.failing]}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",N.storySummary.statusBreakdown.not_run]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${N.storySummary.passingPct||0}%`}})}),o.jsx(lr,{to:`/stories/${N.sdKey}`,className:`inline-flex items-center ${s?"text-xs":"text-sm"} text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300`,children:"View Stories "})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:"No stories yet"}),o.jsx("button",{onClick:()=>Tt(N.sdKey),className:`inline-flex items-center ${s?"text-xs":"text-sm"} text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300`,children:"+ Generate Stories"})]})]}),N.checklist&&N.checklist.length>0&&o.jsx("div",{className:"text-sm text-gray-600",children:o.jsxs("span",{className:"flex items-center",children:[o.jsx(gi,{className:"w-4 h-4 mr-1"}),N.checklist.filter(R=>R.checked).length,"/",N.checklist.length]})})]})]}),d===N.id&&o.jsxs("div",{className:"mt-6 border-t pt-6",children:[(N.h_count>0||N.m_count>0||N.l_count>0||N.future_count>0)&&o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(Et,{className:"w-5 h-5 mr-2 text-blue-600"}),"Backlog Items Summary"]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[N.h_count>0&&o.jsxs("div",{className:"text-center p-2 bg-red-100 dark:bg-red-900/20 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:N.h_count}),o.jsx("p",{className:"text-xs text-red-600 dark:text-red-300",children:"High Priority"})]}),N.m_count>0&&o.jsxs("div",{className:"text-center p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-400",children:N.m_count}),o.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-300",children:"Medium Priority"})]}),N.l_count>0&&o.jsxs("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/20 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:N.l_count}),o.jsx("p",{className:"text-xs text-green-600 dark:text-green-300",children:"Low Priority"})]}),N.future_count>0&&o.jsxs("div",{className:"text-center p-2 bg-gray-100 dark:bg-gray-600 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300",children:N.future_count}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Future"})]})]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total backlog items: ",(N.h_count||0)+(N.m_count||0)+(N.l_count||0)+(N.future_count||0),N.must_have_count>0&&`  Must-have: ${N.must_have_count}`]}),o.jsx("button",{onClick:()=>we(N),className:"mt-3 text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"View all backlog items "})]}),N.checklist&&N.checklist.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(ar,{className:"w-5 h-5 mr-2"}),"Requirements Checklist"]}),o.jsxs("div",{className:"space-y-2",children:[N.checklist.slice(0,5).map((R,ye)=>o.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:R.checked,onChange:()=>it(N.id,ye),className:"mr-3 w-4 h-4 text-primary-600 rounded"}),o.jsx("span",{className:`${R.checked?"line-through text-gray-500":""}`,children:R.text})]},ye)),N.checklist&&N.checklist.length>5&&o.jsxs("button",{onClick:()=>we(N),className:"text-primary-600 hover:text-primary-700 text-sm",children:["View all ",N.checklist.length," items..."]})]})]}),o.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Content Preview"}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded max-h-64 overflow-y-auto",children:o.jsx(Mh,{children:N.content.substring(0,500)+(N.content.length>500?"...":"")})}),o.jsx("button",{onClick:()=>we(N),className:"mt-3 text-primary-600 hover:text-primary-700",children:"Read full document "})]})]})]})},N.id))})]})}function Vy({prds:e,isCompact:t,detailMode:n}){const{id:r}=$f(),s=Oi(),[i,a]=b.useState("list"),[l,c]=b.useState(null);b.useEffect(()=>{if(n&&r){const d=e.find(h=>h.id===r);d?(c(d),a("detail"),document.title=`${d.title||d.id} - LEO Protocol Dashboard`):(console.warn(`PRD with id '${r}' not found, redirecting to list`),s("/prds",{replace:!0}))}else n||(a("list"),c(null),document.title="PRDs - LEO Protocol Dashboard")},[r,n,e,s]);const u=d=>{if(!d||!d.id){console.error("Invalid PRD for navigation:",d);return}try{s(`/prds/${d.id}`)}catch(h){console.error("Navigation error:",h)}};return i==="detail"&&l?o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>s("/prds"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[o.jsx(Ut,{className:"w-4 h-4 mr-1 rotate-180"}),"Back to PRDs"]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.title}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:l.directiveTitle&&`Strategic Directive: ${l.directiveTitle}`})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.status})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Priority"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.priority})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.phase})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),o.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[l.progress,"%"]})]})]}),o.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:o.jsx(Mh,{children:l.content||"No content available"})}),l.checklist&&l.checklist.length>0&&o.jsxs("div",{className:"border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Implementation Checklist"}),o.jsx("div",{className:"space-y-2",children:l.checklist.map((d,h)=>o.jsxs("div",{className:"flex items-start p-3 rounded bg-gray-50 dark:bg-gray-700",children:[d.checked?o.jsx(gi,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}):o.jsx(jm,{className:"w-5 h-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0"}),o.jsx("span",{className:`flex-1 ${d.checked?"line-through text-gray-500":""}`,children:d.text}),d.phase&&o.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded ml-2",children:d.phase})]},h))})]})]})]}):o.jsxs("div",{className:t?"p-3":"p-6",children:[o.jsx("div",{className:t?"mb-3":"mb-6",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:`${t?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white`,children:"PRDs"}),o.jsx("p",{className:`text-gray-600 dark:text-gray-400 ${t?"text-sm mt-1":"mt-2"}`,children:"Product Requirements Documents - Technical implementation details"})]})})}),e.length===0?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[o.jsx(Et,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No PRDs found"})]}):o.jsx("div",{className:"space-y-4",children:e.map(d=>o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Et,{className:"w-6 h-6 text-blue-600 mt-1"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.title}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.directiveTitle&&`SD: ${d.directiveTitle}`}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:d.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.priority==="high"?"bg-red-100 text-red-800":d.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:d.priority}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Phase: ",d.phase]}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Progress: ",d.progress,"%"]})]})]})]})}),o.jsx("div",{className:"ml-4 flex flex-col items-end space-y-2",children:o.jsx("button",{onClick:()=>u(d),className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors",children:"View Full"})})]})})},d.id))})]})}const $e=({children:e,variant:t="primary",size:n="medium",disabled:r=!1,loading:s=!1,onClick:i,type:a="button",fullWidth:l=!1,icon:c,iconPosition:u="left",ariaLabel:d,className:h="",...f})=>{const m=`
    inline-flex items-center justify-center
    font-medium transition-all duration-200
    rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    min-h-[44px] min-w-[44px]
  `,p={small:"px-3 py-1.5 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"},v={primary:`
      bg-blue-600 dark:bg-blue-600 text-white dark:text-white
      hover:bg-blue-700 dark:hover:bg-blue-700 active:bg-blue-800 dark:active:bg-blue-800
      focus:ring-blue-500 dark:focus:ring-blue-400
    `,secondary:`
      bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100
      hover:bg-gray-300 dark:hover:bg-gray-600 active:bg-gray-400 dark:active:bg-gray-500
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,ghost:`
      bg-transparent dark:bg-transparent text-gray-700 dark:text-gray-300
      hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,danger:`
      bg-red-600 dark:bg-red-600 text-white dark:text-white
      hover:bg-red-700 dark:hover:bg-red-700 active:bg-red-800 dark:active:bg-red-800
      focus:ring-red-500 dark:focus:ring-red-400
    `,success:`
      bg-green-600 dark:bg-green-600 text-white dark:text-white
      hover:bg-green-700 dark:hover:bg-green-700 active:bg-green-800 dark:active:bg-green-800
      focus:ring-green-500 dark:focus:ring-green-400
    `},w=l?"w-full":"",y=`
    ${m}
    ${p[n]}
    ${v[t]}
    ${w}
    ${h}
  `.trim().replace(/\s+/g," "),g=x=>{!r&&!s&&i&&i(x)};return o.jsxs("button",{type:a,className:y,disabled:r||s,onClick:g,"aria-label":d||(typeof e=="string"?e:void 0),"aria-busy":s,"aria-disabled":r||s,...f,children:[s&&o.jsx(MC,{className:"w-4 h-4 mr-2 animate-spin"}),!s&&c&&u==="left"&&o.jsx(c,{className:"w-4 h-4 mr-2"}),e,!s&&c&&u==="right"&&o.jsx(c,{className:"w-4 h-4 ml-2"})]})},Xo=({type:e="text",label:t,name:n,value:r,onChange:s,onBlur:i,placeholder:a,required:l=!1,disabled:c=!1,error:u,success:d,helpText:h,validationPattern:f,minLength:m,maxLength:p,rows:v=4,options:w=[],autoComplete:y,className:g="",fullWidth:x=!0,showCharCount:S=!1,...E})=>{const[j,P]=b.useState(!1),[C,O]=b.useState(!1),[D,V]=b.useState("");b.useEffect(()=>{C&&f&&(new RegExp(f).test(r)?V(""):V("Invalid format"))},[r,f,C]);const M=`
    w-full px-4 py-3 
    border rounded-lg transition-all duration-200
    text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400
    min-h-[48px]
    focus:outline-none focus:ring-2 focus:ring-offset-1
    disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-60
    bg-white dark:bg-gray-700
   ${u||D?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400 focus:border-red-500 dark:focus:border-red-400":d?"border-green-500 dark:border-green-400 focus:ring-green-500 dark:focus:ring-green-400 focus:border-green-500 dark:focus:border-green-400":j?"border-blue-500 dark:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400"} ${g}`,$=()=>{P(!0)},W=_=>{P(!1),O(!0),i&&i(_)},A=_=>{s&&s(_),C||O(!0)},T=`input-${n||Math.random().toString(36).substr(2,9)}`,U=`${T}-error`,k=`${T}-help`,ee=()=>{switch(e){case"textarea":return o.jsx("textarea",{id:T,name:n,value:r,onChange:A,onFocus:$,onBlur:W,placeholder:a,required:l,disabled:c,rows:v,minLength:m,maxLength:p,className:M,"aria-invalid":!!(u||D),"aria-describedby":`${u||D?U:""} ${h?k:""}`,...E});case"select":return o.jsxs("select",{id:T,name:n,value:r,onChange:A,onFocus:$,onBlur:W,required:l,disabled:c,className:M,"aria-invalid":!!(u||D),"aria-describedby":`${u||D?U:""} ${h?k:""}`,...E,children:[o.jsx("option",{value:"",children:"Select an option"}),w.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))]});default:return o.jsx("input",{id:T,type:e,name:n,value:r,onChange:A,onFocus:$,onBlur:W,placeholder:a,required:l,disabled:c,minLength:m,maxLength:p,autoComplete:y,className:M,"aria-invalid":!!(u||D),"aria-describedby":`${u||D?U:""} ${h?k:""}`,...E})}},se=x?"w-full":"";return o.jsxs("div",{className:`${se} mb-4`,children:[t&&o.jsxs("label",{htmlFor:T,className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",children:[t,l&&o.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[ee(),o.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:[d&&!u&&!D&&o.jsx(zn,{className:"w-5 h-5 text-green-500","aria-label":"Valid input"}),(u||D)&&o.jsx(qr,{className:"w-5 h-5 text-red-500","aria-label":"Invalid input"})]})]}),S&&p&&o.jsxs("div",{className:"mt-1 text-sm text-right text-gray-500 dark:text-gray-400",children:[(r==null?void 0:r.length)||0," / ",p]}),(u||D)&&o.jsxs("div",{id:U,className:"mt-2 flex items-start text-sm text-red-600 dark:text-red-400",role:"alert",children:[o.jsx(xr,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),u||D]}),h&&!(u||D)&&o.jsxs("div",{id:k,className:"mt-2 flex items-start text-sm text-gray-600 dark:text-gray-400",children:[o.jsx(Tn,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),h]})]})},RD=({steps:e=[],currentStep:t=1,orientation:n="horizontal",showTimeEstimates:r=!0,showStepNumbers:s=!0,compact:i=!1,hideLabelsOnMobile:a=!1,onStepClick:l,className:c=""})=>{const u=(t-1)/(e.length-1)*100,d=e.reduce((y,g)=>y+(g.timeEstimate||0),0),h=e.slice(0,t-1).reduce((y,g)=>y+(g.timeEstimate||0),0),f=y=>{if(y<60)return`${y} min`;const g=Math.floor(y/60),x=y%60;return x>0?`${g}h ${x}m`:`${g}h`},m=y=>y<t-1?"completed":y===t-1?"current":y===t?"upcoming":"locked",p=(y,g)=>{switch(y){case"completed":return o.jsx(zn,{className:"w-4 h-4"});case"current":return s?g:null;case"upcoming":return s?g:null;case"locked":return o.jsx(Xb,{className:"w-3 h-3"});default:return g}},v=y=>{const g=m(y);l&&(g==="completed"||g==="current")&&l(y+1)},w=y=>{const g=m(y);return l&&(g==="completed"||g==="current")};return n==="vertical"?o.jsxs("div",{className:`${c}`,children:[r&&!i&&o.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),o.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`},role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"})}),o.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-600 dark:text-gray-400",children:[o.jsxs("span",{children:[f(h)," completed"]}),o.jsxs("span",{children:[f(d-h)," remaining"]})]})]}),o.jsx("div",{className:"relative",children:e.map((y,g)=>{const x=m(g),S=g===e.length-1;return o.jsxs("div",{className:"flex items-start mb-8 last:mb-0",children:[!S&&o.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),o.jsx("button",{onClick:()=>v(g),disabled:!w(g),className:`
                    relative z-10 flex items-center justify-center
                    w-12 h-12 rounded-full border-2 transition-all
                    ${w(g)?"cursor-pointer":"cursor-default"}
                    ${x==="completed"?"bg-green-500 border-green-500 text-white":""}
                    ${x==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                    ${x==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                    ${x==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                  `,"aria-label":`Step ${g+1}: ${y.title} - ${x}`,children:p(x,g+1)}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("h3",{className:`
                    font-medium text-base
                    ${x==="current"?"text-blue-600":""}
                    ${x==="completed"?"text-green-600":""}
                    ${x==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),y.description&&!i&&o.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:y.description}),r&&y.timeEstimate&&o.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[o.jsx(Rn,{className:"w-3 h-3 mr-1"}),f(y.timeEstimate)]})]})]},g)})})]}):o.jsxs("div",{className:`${c}`,children:[r&&!i&&o.jsx("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Rn,{className:"w-4 h-4 mr-2 text-blue-600"}),o.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Time: ",o.jsx("span",{className:"font-medium",children:f(h)})," of"," ",o.jsx("span",{className:"font-medium",children:f(d)})]})]}),o.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"% Complete"]})]})}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-300 dark:bg-gray-600"}),o.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-blue-600 dark:bg-blue-500 transition-all duration-300",style:{width:`${u}%`}}),o.jsx("div",{className:"relative flex justify-between",children:e.map((y,g)=>{const x=m(g);return o.jsxs("div",{className:`flex flex-col items-center ${i?"flex-1":""}`,children:[o.jsxs("div",{className:"relative group",children:[o.jsx("button",{onClick:()=>v(g),disabled:!w(g),className:`
                      relative z-10 flex items-center justify-center
                      w-12 h-12 rounded-full border-2 transition-all
                      ${w(g)?"cursor-pointer hover:scale-110":"cursor-default"}
                      ${x==="completed"?"bg-green-500 border-green-500 text-white":""}
                      ${x==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                      ${x==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                      ${x==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                    `,"aria-label":`Step ${g+1}: ${y.title} - ${x}`,title:y.title,children:p(x,g+1)}),a&&o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block md:hidden z-20",children:o.jsxs("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[y.title,o.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:o.jsx("div",{className:"border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})})]}),o.jsxs("div",{className:`mt-3 text-center ${a?"hidden md:block":""}`,children:[o.jsx("p",{className:`
                    text-sm font-medium
                    ${x==="current"?"text-blue-600":""}
                    ${x==="completed"?"text-green-600":""}
                    ${x==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),r&&y.timeEstimate&&!i&&o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:f(y.timeEstimate)})]})]},g)})})]})]})},DD=({onSubmissionSelect:e,onGroupCreate:t,selectedSubmissionId:n,onSelectionChange:r,refreshTrigger:s=0})=>{const[i,a]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),[h,f]=b.useState([]),[m,p]=b.useState(!1),[v,w]=b.useState(null),[y,g]=b.useState(!1);b.useEffect(()=>{x()},[m,s]),b.useEffect(()=>{const M=()=>{w(null),g(!1)};if(v||y)return document.addEventListener("click",M),()=>document.removeEventListener("click",M)},[v,y]);const x=async()=>{try{c(!0);const M=new URLSearchParams;m&&M.append("uncombined","true"),M.append("since","30d");const $=await fetch(`/api/sdip/submissions?${M}`);if(!$.ok)throw new Error("Failed to load submissions");const W=await $.json();a(W),d(null)}catch(M){d(M.message),a([])}finally{c(!1)}},S=M=>{const $=h.includes(M)?h.filter(W=>W!==M):[...h,M];f($),r==null||r($)},E=M=>{e(M)},j=(M="intelligent")=>{h.length>=2&&t(h,M)},P=async M=>{if(confirm("Are you sure you want to delete this submission?"))try{if(!(await fetch(`/api/sdip/submissions/${M}`,{method:"DELETE"})).ok)throw new Error("Failed to delete submission");a(W=>W.filter(A=>A.id!==M)),f(W=>W.filter(A=>A!==M)),n===M&&e(null)}catch($){console.error("Error deleting submission:",$),alert("Failed to delete submission. Please try again.")}},C=M=>{const $=new Date(M),A=Math.floor((new Date-$)/(1e3*60*60));return A<1?"Just now":A<24?`${A}h ago`:A<48?"Yesterday":$.toLocaleDateString()},O=M=>{const $=M.intent_summary||M.chairman_input||M.submission_title||"Untitled Submission";return $.length>60?$.substring(0,57)+"...":$},D=M=>{var W,A,T,U,k;let $="";return((A=(W=M.synthesis)==null?void 0:W.aligned)==null?void 0:A.length)>0?$=((T=M.synthesis.aligned[0])==null?void 0:T.text)||"":(U=M.impact_analysis)!=null&&U.summary?$=M.impact_analysis.summary:(k=M.strat_tac)!=null&&k.rationale&&($=M.strat_tac.rationale),!$&&M.chairman_input&&($=M.chairman_input.substring(0,100)+"..."),$.length>120?$.substring(0,117)+"...":$},V=M=>{var A;const $=((A=M.impact_analysis)==null?void 0:A.affected_components)||[];if($.length===0)return null;const W=$.find(T=>T.impact_level==="high")||$[0];return(W==null?void 0:W.name)||(W==null?void 0:W.component)||null},G=M=>{var T,U;const $=M.status||"draft",W=M.current_step||1,A=Array.isArray(M.completed_steps)?M.completed_steps:[];return $==="submitted"||((T=M.gate_status)==null?void 0:T.status)==="submitted"||(U=M.gate_status)!=null&&U.resulting_sd_id||M.resulting_sd_id?{text:" Submitted",color:"text-green-700 bg-green-100 dark:bg-green-900/20 dark:text-green-300",icon:""}:$==="ready"||A.includes(7)||A.length===7&&W===7?{text:" Ready",color:"text-blue-700 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300",icon:""}:{text:" Draft",color:"text-yellow-700 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300",icon:""}},de=M=>i.filter($=>$.group_id===M);return l?o.jsx("div",{className:"h-full flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 text-sm",children:"Recent Submissions"}),i.length>0&&o.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded",children:i.length})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx($e,{onClick:()=>p(!m),variant:m?"primary":"ghost",size:"small",icon:fh,ariaLabel:"Show uncombined only"}),h.length>=2&&o.jsxs("div",{className:"relative",children:[o.jsxs($e,{onClick:M=>{M.stopPropagation(),g(!y)},variant:"primary",size:"small",icon:Nm,children:["Combine (",h.length,")"]}),y&&o.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-20 min-w-56",children:o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 px-2",children:"Combination Method:"}),[{id:"intelligent",name:" Intelligent",desc:"AI-driven optimal combination"},{id:"chronological",name:" Chronological",desc:"Preserve timeline order"},{id:"merge",name:" Smart Merge",desc:"Deduplicate and consensus"},{id:"priority",name:" Priority-based",desc:"Highest strategic impact first"},{id:"latest",name:" Latest Override",desc:"Most recent takes precedence"}].map(M=>o.jsxs("button",{onClick:$=>{$.stopPropagation(),j(M.id),g(!1)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex flex-col gap-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:M.name}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.desc})]},M.id))]})})]})]})]}),u&&o.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-400 flex items-start gap-2",children:[o.jsx(xr,{className:"w-5 h-5 text-red-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load submissions"}),o.jsx("p",{className:"text-red-600 text-sm",children:u}),o.jsx("button",{onClick:x,className:"mt-1 text-red-700 underline text-sm hover:no-underline",children:"Try again"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:i.length===0?o.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(Rn,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"No submissions yet"}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Create your first submission to get started with the Directive Lab"}),o.jsx("button",{onClick:()=>e(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Submission"})]}):o.jsx("div",{className:"p-2",children:i.map(M=>{const $=G(M),W=O(M),A=D(M),T=V(M),U=h.includes(M.id),k=n===M.id,ee=M.group_id?de(M.group_id):[],se=v===M.id;return o.jsx("div",{className:`p-3 mb-2 border rounded-lg transition-all cursor-pointer ${k?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700/50"}`,onClick:()=>E(M),children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{onClick:_=>{_.stopPropagation(),S(M.id)},className:"mt-1 text-gray-400 hover:text-gray-600 transition-colors",children:U?o.jsx(gi,{className:"w-4 h-4 text-blue-600"}):o.jsx(jm,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm leading-tight",children:W}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap font-medium ${$.color}`,children:$.text})]}),A&&o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 leading-relaxed",children:A}),T&&o.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[o.jsx(Et,{className:"w-3 h-3 text-gray-400"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Affects: ",o.jsx("span",{className:"font-medium",children:T})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:C(M.created_at)}),M.group_id&&ee.length>1&&o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),w(se?null:M.id)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[o.jsx(OC,{className:"w-3 h-3"}),o.jsxs("span",{className:"font-medium",children:[ee.length," items"]}),o.jsx(Un,{className:`w-3 h-3 transition-transform ${se?"rotate-180":""}`})]}),se&&o.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-48",children:o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 px-2",children:"Linked Submissions:"}),ee.map(_=>{const Se=G(_),it=O(_);return o.jsxs("button",{onClick:we=>{we.stopPropagation(),E(_),w(null)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex items-center justify-between gap-2",children:[o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate",children:it}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${Se.color}`,children:Se.icon}),o.jsx(hh,{className:"w-3 h-3 text-gray-400"})]})]},_.id)})]})})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),E(M)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[o.jsx(IC,{className:"w-3 h-3"}),"View"]}),o.jsx("button",{onClick:_=>{_.stopPropagation(),P(M.id)},className:"flex items-center gap-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete submission",children:o.jsx(KC,{className:"w-3 h-3"})})]})]})]})]})},M.id)})})}),h.length>0&&o.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-700",children:o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:[h.length," selected"]}),h.length>=2&&o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Ready to combine "})]})})]})},LD=({isOpen:e=!0,onClose:t,selectedSubmissions:n,combineMethod:r="intelligent",onCreateGroup:s,onSuccess:i})=>{const[a,l]=b.useState(""),[c,u]=b.useState(r),[d,h]=b.useState(!1),[f,m]=b.useState(null),p=async w=>{if(w.preventDefault(),!!a.trim()){h(!0),m(null);try{const y=await fetch("/api/sdip/create-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_ids:n,group_name:a.trim(),method:c})});if(!y.ok){const x=await y.json();throw new Error(x.error||"Failed to create group")}const g=await y.json();console.log(" Group created successfully:",g),i?i(g):s&&await s(g),t(),l(""),u(r)}catch(y){m(y.message)}finally{h(!1)}}};if(!e)return null;const v=[{value:"intelligent",label:" Intelligent",desc:"AI-driven optimal combination"},{value:"chronological",label:" Chronological",desc:"Keep time order"},{value:"merge",label:" Merge & Dedupe",desc:"Remove duplicates"},{value:"priority",label:" Priority-based",desc:"Highest strategic impact first"},{value:"latest",label:" Latest Priority",desc:"Latest overrides"}];return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nm,{className:"w-4 h-4 text-blue-600"}),o.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Combine ",n.length," Submissions"]})]}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:o.jsx(qr,{className:"w-4 h-4"})})]}),o.jsxs("form",{onSubmit:p,className:"p-3 space-y-3",children:[f&&o.jsxs("div",{className:"flex items-start gap-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[o.jsx(xr,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-xs",children:f})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"group-name",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name"}),o.jsx("input",{type:"text",id:"group-name",value:a,onChange:w=>l(w.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dashboard UX Improvements",required:!0,maxLength:100})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Combine Method"}),o.jsx("div",{className:"grid grid-cols-1 gap-1",children:v.map(w=>o.jsx("label",{className:`flex items-center justify-between p-2 text-xs border rounded cursor-pointer transition-colors ${c===w.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-600"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",name:"combineMethod",value:w.value,checked:c===w.value,onChange:y=>u(y.target.value),className:"text-blue-600 focus:ring-blue-500"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w.label}),o.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:[" ",w.desc]})]})]})},w.value))})]}),o.jsxs("div",{className:"flex gap-2 pt-1",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:!a.trim()||d,className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 border border-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Creating...":"Combine"})]})]})]})})},OD=({impactAnalysis:e,consistencyValidation:t,submission:n})=>{var d,h,f;const[r,s]=b.useState({overview:!0,components:!1,consistency:!1,recommendations:!1,mitigation:!1});if(!e&&!t)return o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-center",children:[o.jsx(Tn,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No impact analysis available for this submission"})]});const i=m=>{s(p=>({...p,[m]:!p[m]}))},a=m=>{switch(m){case"critical":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-100",accent:"text-red-600 dark:text-red-400",icon:Kt};case"high":return{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-100",accent:"text-orange-600 dark:text-orange-400",icon:xr};case"medium":return{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-900 dark:text-yellow-100",accent:"text-yellow-600 dark:text-yellow-400",icon:Tn};case"low":return{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-100",accent:"text-green-600 dark:text-green-400",icon:st};default:return{bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",text:"text-gray-900 dark:text-gray-100",accent:"text-gray-600 dark:text-gray-400",icon:Tn}}},l=a((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)),c=l.icon,u=m=>({ui:fl,api:DC,database:wm,authentication:no,navigation:ar,performance:pr,"design-system":fl})[m]||Tn;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:`rounded-lg border ${l.bg} ${l.border} p-6`,children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("overview"),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(c,{className:`w-6 h-6 ${l.accent}`}),o.jsxs("div",{children:[o.jsx("h3",{className:`text-lg font-semibold ${l.text}`,children:"Impact Analysis Overview"}),o.jsxs("p",{className:`text-sm ${l.text} opacity-75`,children:["Risk Level: ",((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)||"unknown").toUpperCase()]})]})]}),r.overview?o.jsx(Un,{className:`w-5 h-5 ${l.accent}`}):o.jsx(Ut,{className:`w-5 h-5 ${l.accent}`})]}),r.overview&&o.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:e.impact_score}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Impact Score"})]}),o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsxs("div",{className:`text-2xl font-bold ${l.accent}`,children:[e.effort_multiplier,"x"]}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Effort Multiplier"})]}),o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:((d=e.affected_components)==null?void 0:d.length)||0}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Affected Components"})]})]}),t&&o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${t.passed?"text-green-600":"text-red-600"}`,children:t.score}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Consistency Score"})]})]})]}),(e==null?void 0:e.affected_components)&&e.affected_components.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("components"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(fl,{className:"w-5 h-5 mr-2"}),"Affected Components"]}),r.components?o.jsx(Un,{className:"w-5 h-5 text-gray-400"}):o.jsx(Ut,{className:"w-5 h-5 text-gray-400"})]}),r.components&&o.jsx("div",{className:"mt-4 space-y-3",children:e.affected_components.map((m,p)=>{const v=u(m.name),w=a(m.risk_level);return o.jsxs("div",{className:`p-4 rounded-lg border ${w.bg} ${w.border}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(v,{className:`w-5 h-5 ${w.accent}`}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-medium ${w.text}`,children:m.name}),o.jsxs("p",{className:`text-sm ${w.text} opacity-75`,children:["Risk: ",m.risk_level,"  Confidence: ",Math.round((m.confidence||0)*100),"%"]})]})]})}),m.dependencies&&m.dependencies.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:`text-xs ${w.text} opacity-60 mb-1`,children:"Dependencies:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:m.dependencies.map((y,g)=>o.jsx("span",{className:`px-2 py-1 rounded text-xs ${w.accent} bg-white dark:bg-gray-700`,children:y},g))})]})]},p)})})]}),t&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("consistency"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(no,{className:"w-5 h-5 mr-2"}),"Consistency Validation",!t.passed&&o.jsx(Jr,{className:"w-5 h-5 ml-2 text-red-500"})]}),r.consistency?o.jsx(Un,{className:"w-5 h-5 text-gray-400"}):o.jsx(Ut,{className:"w-5 h-5 text-gray-400"})]}),r.consistency&&o.jsxs("div",{className:"mt-4 space-y-4",children:[o.jsxs("div",{className:`p-4 rounded-lg ${t.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[o.jsxs("div",{className:"flex items-center",children:[t.passed?o.jsx(st,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}):o.jsx(Jr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),o.jsx("span",{className:`font-medium ${t.passed?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:t.passed?"Validation Passed":"Validation Failed"})]}),t.blocking_issues&&t.blocking_issues.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Blocking Issues:"}),t.blocking_issues.map((m,p)=>o.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200 mb-1",children:[" ",m.message,m.suggestion&&o.jsxs("div",{className:"text-xs text-red-600 dark:text-red-300 ml-4 mt-1",children:["Suggestion: ",m.suggestion]})]},p))]})]}),t.category_scores&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Category Breakdown"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.category_scores).map(([m,p])=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:m.replace("_"," ")}),o.jsx("span",{className:`text-sm font-bold ${p>=70?"text-green-600":p>=50?"text-yellow-600":"text-red-600"}`,children:p})]}),o.jsx("div",{className:"mt-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all ${p>=70?"bg-green-500":p>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${p}%`}})})]},m))})]})]})]}),((e==null?void 0:e.recommendations)||(t==null?void 0:t.recommendations))&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("recommendations"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(ar,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),r.recommendations?o.jsx(Un,{className:"w-5 h-5 text-gray-400"}):o.jsx(Ut,{className:"w-5 h-5 text-gray-400"})]}),r.recommendations&&o.jsxs("div",{className:"mt-4 space-y-3",children:[(h=e==null?void 0:e.recommendations)==null?void 0:h.map((m,p)=>o.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Tn,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[m.type,": ",m.description]}),m.effort_reduction&&o.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Effort reduction: ",m.effort_reduction]})]})]})},`impact-${p}`)),(f=t==null?void 0:t.recommendations)==null?void 0:f.map((m,p)=>o.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(st,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:m.message}),m.priority&&o.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs mt-1 ${m.priority==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":m.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":m.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[m.priority," priority"]})]})]})},`consistency-${p}`))]})]}),(e==null?void 0:e.mitigation_strategies)&&e.mitigation_strategies.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("mitigation"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(Xl,{className:"w-5 h-5 mr-2"}),"Mitigation Strategies"]}),r.mitigation?o.jsx(Un,{className:"w-5 h-5 text-gray-400"}):o.jsx(Ut,{className:"w-5 h-5 text-gray-400"})]}),r.mitigation&&o.jsx("div",{className:"mt-4 space-y-2",children:e.mitigation_strategies.map((m,p)=>o.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsx(Xl,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:m})]},p))})]}),(e==null?void 0:e.breaking_changes)&&e.breaking_changes.length>0&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(Kt,{className:"w-6 h-6 text-red-600 dark:text-red-400 mr-2"}),o.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Breaking Changes Detected"})]}),o.jsx("div",{className:"space-y-2",children:e.breaking_changes.map((m,p)=>o.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[o.jsxs("strong",{children:[m.type,":"]})," ",m.description,m.keyword&&o.jsxs("span",{className:"ml-2 text-xs bg-red-200 dark:bg-red-800 px-2 py-1 rounded",children:['"',m.keyword,'"']})]},p))})]})]})},$D=({type:e,level:t,showTooltip:n=!0})=>{const[r,s]=b.useState(!1),a={UI:{label:"UI",description:"User Interface complexity",colors:{HIGH:"bg-blue-600 text-white",MEDIUM:"bg-blue-400 text-white",LOW:"bg-blue-200 text-blue-900"}},DB:{label:"DB",description:"Database impact and complexity",colors:{HIGH:"bg-purple-600 text-white",MEDIUM:"bg-purple-400 text-white",LOW:"bg-purple-200 text-purple-900"}},COMPLEX:{label:"COMPLEX",description:"Overall implementation complexity",colors:{HIGH:"bg-orange-600 text-white",MEDIUM:"bg-orange-400 text-white",LOW:"bg-orange-200 text-orange-900"}},ACCESS:{label:"ACCESS",description:"Access control and permissions",colors:{HIGH:"bg-green-600 text-white",MEDIUM:"bg-green-400 text-white",LOW:"bg-green-200 text-green-900"}},SECURITY:{label:"SECURITY",description:"Security implications",colors:{HIGH:"bg-red-600 text-white",MEDIUM:"bg-red-400 text-white",LOW:"bg-red-200 text-red-900"}},PROCESS:{label:"PROCESS",description:"Business process impact",colors:{HIGH:"bg-yellow-600 text-white",MEDIUM:"bg-yellow-400 text-gray-900",LOW:"bg-yellow-200 text-yellow-900"}}}[e];if(!a)return null;const l=a.colors[t]||a.colors.LOW;return o.jsxs("div",{className:"inline-flex items-center relative",children:[o.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${l} cursor-help transition-opacity hover:opacity-90`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[a.label,":",t,n&&o.jsx(Tn,{className:"w-3 h-3 ml-1 opacity-70"})]}),n&&r&&o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",children:o.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap",children:[o.jsx("div",{className:"font-semibold",children:a.description}),o.jsxs("div",{className:"text-gray-300 mt-1",children:[t==="HIGH"&&"Significant impact - careful review needed",t==="MEDIUM"&&"Moderate impact - standard review",t==="LOW"&&"Minimal impact - routine change"]}),o.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900"})]})})]})},qu=({badges:e})=>{if(!e)return null;const t=["UI","DB","COMPLEX","ACCESS","SECURITY","PROCESS"];return o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.map(n=>{const r=e[n];return r?o.jsx($D,{type:n,level:r},n):null})})},Gu=e=>{const t={},n=e.toLowerCase();return(n.includes("ui")||n.includes("interface")||n.includes("component"))&&(t.UI=n.includes("complex")||n.includes("major")?"HIGH":n.includes("update")||n.includes("modify")?"MEDIUM":"LOW"),(n.includes("database")||n.includes("schema")||n.includes("migration"))&&(t.DB=n.includes("migration")||n.includes("schema")?"HIGH":n.includes("query")||n.includes("index")?"MEDIUM":"LOW"),n.includes("architecture")||n.includes("refactor")||n.includes("system")?t.COMPLEX="HIGH":n.includes("feature")||n.includes("implement")?t.COMPLEX="MEDIUM":(n.includes("fix")||n.includes("update"))&&(t.COMPLEX="LOW"),(n.includes("permission")||n.includes("role")||n.includes("access"))&&(t.ACCESS=n.includes("admin")||n.includes("role")?"HIGH":"MEDIUM"),n.includes("security")||n.includes("auth")||n.includes("encrypt")?t.SECURITY=n.includes("auth")||n.includes("encrypt")?"HIGH":"MEDIUM":(n.includes("api")||n.includes("endpoint"))&&(t.SECURITY="LOW"),(n.includes("workflow")||n.includes("process")||n.includes("business"))&&(t.PROCESS=n.includes("workflow")?"HIGH":"MEDIUM"),Object.keys(t).length===0&&(t.COMPLEX="LOW"),t},MD=({message:e,type:t="info",duration:n=5e3,onClose:r,position:s="top-right"})=>{const[i,a]=b.useState(!1),[l,c]=b.useState(!1);b.useEffect(()=>{setTimeout(()=>a(!0),10);const p=setTimeout(()=>{u()},n);return()=>clearTimeout(p)},[n]);const u=()=>{c(!0),setTimeout(()=>{a(!1),r==null||r()},300)},d={success:{icon:st,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-800 dark:text-green-200",iconColor:"text-green-600 dark:text-green-400"},error:{icon:xr,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-800 dark:text-red-200",iconColor:"text-red-600 dark:text-red-400"},warning:{icon:Kt,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",textColor:"text-yellow-800 dark:text-yellow-200",iconColor:"text-yellow-600 dark:text-yellow-400"},info:{icon:Tn,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-800 dark:text-blue-200",iconColor:"text-blue-600 dark:text-blue-400"}},h=d[t]||d.info,f=h.icon,m={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"};return o.jsx("div",{className:`
        fixed z-50 
        ${m[s]}
        transition-all duration-300 ease-in-out
        ${i&&!l?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"}
      `,children:o.jsxs("div",{className:`
          flex items-center gap-3 p-4 rounded-lg shadow-lg
          ${h.bgColor} ${h.borderColor} ${h.textColor}
          border min-w-[300px] max-w-md
        `,children:[o.jsx(f,{className:`w-5 h-5 ${h.iconColor} flex-shrink-0`}),o.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),o.jsx("button",{onClick:u,className:`${h.iconColor} hover:opacity-70 transition-opacity`,"aria-label":"Close notification",children:o.jsx(qr,{className:"w-4 h-4"})})]})})},FD=({children:e})=>{const[t,n]=b.useState([]),r=(i,a="info",l=5e3)=>{const c=Date.now(),u={id:c,message:i,type:a,duration:l};return n(d=>[...d,u]),c},s=i=>{n(a=>a.filter(l=>l.id!==i))};return b.useEffect(()=>(window.showToast=r,()=>{delete window.showToast}),[]),o.jsxs(o.Fragment,{children:[e,o.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:t.map((i,a)=>o.jsx("div",{className:"pointer-events-auto",style:{position:"fixed",top:`${20+a*80}px`,right:"20px",transition:"all 0.3s ease-in-out"},children:o.jsx(MD,{message:i.message,type:i.type,duration:i.duration,onClose:()=>s(i.id),position:"none"})},i.id))})]})},VD=()=>{const e=(t,n="info",r=5e3)=>{if(window.showToast)return window.showToast(t,n,r);console.warn("Toast provider not found. Make sure ToastProvider is mounted.")};return{success:(t,n)=>e(t,"success",n),error:(t,n)=>e(t,"error",n),warning:(t,n)=>e(t,"warning",n),info:(t,n)=>e(t,"info",n),show:e}},zD=()=>{var kn;const e=Jn(),n=new URLSearchParams(e.search).get("mode")==="quick"?"quick":"comprehensive",[r,s]=b.useState(n),[i,a]=b.useState(1),[l,c]=b.useState(null),[u,d]=b.useState(!1),[h,f]=b.useState(null),[m,p]=b.useState(null),[v,w]=b.useState([]),[y,g]=b.useState(!1),[x,S]=b.useState("intelligent"),[E,j]=b.useState(0),[P,C]=b.useState(!1),[O,D]=b.useState("input"),[V,G]=b.useState(!1),[de,M]=b.useState(!0),[$,W]=b.useState(null),[A,T]=b.useState(null),[U,k]=b.useState({}),[ee,se]=b.useState(!1),[_,Se]=b.useState(!1),[it,we]=b.useState([]),[Tt,Ke]=b.useState(!1),[cn,Jt]=b.useState({}),N=VD(),[R,ye]=b.useState({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),[$t,L]=b.useState({}),[J,ie]=b.useState({}),[be,Pe]=b.useState({1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1}),ut=()=>r==="quick"?[{id:1,title:"Input",icon:S0,description:"Enter your directive idea",timeEstimate:2},{id:3,title:"Classification",icon:ar,description:"Strategic or Tactical",timeEstimate:1},{id:7,title:"Confirmation",icon:st,description:"Review and submit",timeEstimate:1}]:[{id:1,title:"Input & Screenshot",icon:Su,description:"Provide feedback and optional screenshot",timeEstimate:3},{id:2,title:"Intent Confirmation",icon:ar,description:"Review and confirm the extracted intent",timeEstimate:2},{id:3,title:"Classification",icon:fl,description:"Review strategic vs tactical breakdown",timeEstimate:2},{id:4,title:"Impact Analysis",icon:Kt,description:"Review application impact and consistency validation",timeEstimate:4},{id:5,title:"Synthesis Review",icon:Et,description:"Review aligned, required, and recommended items",timeEstimate:5},{id:6,title:"Questions",icon:S0,description:"Answer questions to refine the directive",timeEstimate:3},{id:7,title:"Confirmation",icon:st,description:"Review and confirm the final summary",timeEstimate:2}],Ce=z=>{if(z<i&&l){const Q=({1:[2,3,4,5,6,7],2:[3,4,5,6,7],3:[4,5,6,7],4:[5,6,7],5:[6,7],6:[7]}[z]||[]).filter(he=>{switch(he){case 2:return l.intent_summary;case 3:return l.strat_tac;case 4:return l.impact_analysis;case 5:return l.synthesis;case 6:return l.questions;case 7:return l.final_summary;default:return!1}});if(Q.length>0){const he={2:"Intent Summary",3:"Classification",4:"Impact Analysis",5:"Synthesis",6:"Clarifying Questions",7:"Final Summary"},xe=Q.map(ne=>he[ne]).join(", ");N.warning(`Editing Step ${z} may invalidate: ${xe}`,8e3),we(ne=>[...ne,{editedStep:z,timestamp:new Date().toISOString(),affectedSteps:Q}])}}},Ve=z=>r==="quick"?z===1?3:z===3?7:z:z<7?z+1:z,Qe=z=>{Ce(z),a(z)},Te=ut();b.useEffect(()=>{const z=()=>{const q=window.innerWidth<768;C(q)};return z(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[l]),b.useEffect(()=>{const z=setTimeout(()=>{(R.chairmanInput||R.intentSummary)&&(localStorage.setItem("directiveLab_draft",JSON.stringify(R)),p("Draft saved"),setTimeout(()=>p(null),3e3))},2e3);return()=>clearTimeout(z)},[R]),b.useEffect(()=>{const z=localStorage.getItem("directiveLab_draft");z&&(ye(JSON.parse(z)),p("Draft restored"),setTimeout(()=>p(null),3e3))},[]),b.useEffect(()=>{if(i===3&&(l!=null&&l.id)&&!(l!=null&&l.strat_tac)){console.log(" [STEP 3] Generating classification data...");const z=R.intentSummary||(l==null?void 0:l.intent_summary)||"",q=["vision","strategy","long-term","transform","innovation","competitive advantage","market position","growth","expansion","culture"],te=["fix","bug","update","modify","adjust","correct","improve","enhance","optimize","refactor"];let ae=0,Q=0;const he=z.toLowerCase();q.forEach(at=>{he.includes(at)&&(ae+=10)}),te.forEach(at=>{he.includes(at)&&(Q+=10)}),ae===0&&Q===0&&(ae=50,Q=50);const xe=ae+Q,ne=Math.round(ae/xe*100),dt=100-ne,Ze=ne>60?"This initiative focuses on strategic goals that will shape long-term direction and capabilities.":dt>60?"This initiative addresses immediate operational needs and improvements.":"This initiative balances both strategic vision and tactical execution needs.",Qn={strat_tac:{strategic_pct:ne,tactical_pct:dt,rationale:Ze,generated_at:new Date().toISOString()}};c(at=>({...at,...Qn})),console.log(" [STEP 3] Classification data generated locally")}},[i,l,R.intentSummary]),b.useEffect(()=>{var z;if(i===4&&(l!=null&&l.id)&&!(l!=null&&l.impact_analysis)){console.log(" [STEP 4] Generating impact analysis data...");const q=R.intentSummary||(l==null?void 0:l.intent_summary)||"",te=q.toLowerCase(),ae={dashboard:[{name:"Dashboard",risk_level:"medium",confidence:.8,dependencies:["MetricsCard","ChartComponent"]},{name:"DashboardCard",risk_level:"low",confidence:.7,dependencies:["UI Components"]},{name:"MetricsCard",risk_level:"low",confidence:.6,dependencies:["Data Fetcher"]}],form:[{name:"Form",risk_level:"medium",confidence:.9,dependencies:["Input","Button","Validation"]},{name:"Input",risk_level:"low",confidence:.8,dependencies:["Event Handlers"]},{name:"Button",risk_level:"low",confidence:.9,dependencies:["UI Components"]},{name:"Validation",risk_level:"medium",confidence:.7,dependencies:["Form State"]}],navigation:[{name:"Navigation",risk_level:"medium",confidence:.8,dependencies:["Router","Auth Context"]},{name:"Sidebar",risk_level:"low",confidence:.7,dependencies:["Navigation"]},{name:"Menu",risk_level:"low",confidence:.6,dependencies:["Navigation"]}],table:[{name:"Table",risk_level:"medium",confidence:.8,dependencies:["Data Fetcher","Pagination"]},{name:"DataGrid",risk_level:"high",confidence:.9,dependencies:["Table","Virtual Scroller"]}],modal:[{name:"Modal",risk_level:"medium",confidence:.8,dependencies:["Portal","Focus Trap"]},{name:"Dialog",risk_level:"medium",confidence:.7,dependencies:["Modal"]},{name:"Overlay",risk_level:"low",confidence:.6,dependencies:["Portal"]}],auth:[{name:"Auth",risk_level:"high",confidence:.9,dependencies:["UserContext","Token Manager"]},{name:"Login",risk_level:"high",confidence:.8,dependencies:["Auth","Form"]},{name:"UserContext",risk_level:"high",confidence:.9,dependencies:["State Management"]}],theme:[{name:"ThemeProvider",risk_level:"medium",confidence:.8,dependencies:["CSS Variables","Context API"]},{name:"Dark Mode",risk_level:"medium",confidence:.7,dependencies:["ThemeProvider"]}],api:[{name:"API Client",risk_level:"high",confidence:.9,dependencies:["HTTP Service","Error Handler"]},{name:"Data Fetcher",risk_level:"medium",confidence:.8,dependencies:["API Client"]},{name:"WebSocket",risk_level:"high",confidence:.7,dependencies:["Connection Manager"]}]},Q=[];Object.entries(ae).forEach(([ue,un])=>{(te.includes(ue)||te.includes(ue.replace(/[aeiou]/gi,""))||un.some(as=>te.includes(as.name.toLowerCase())))&&Q.push(...un)}),Q.length===0&&Q.push({name:"UI Components",risk_level:"low",confidence:.5,dependencies:["React Components"]},{name:"State Management",risk_level:"medium",confidence:.6,dependencies:["React Hooks"]},{name:"Event Handlers",risk_level:"low",confidence:.7,dependencies:["DOM Events"]});const he=["database","auth","security","payment","migration","breaking","major"],xe=["api","integration","workflow","validation","performance"];let ne="Low",dt="This change appears to be primarily cosmetic or minor functionality enhancement.";he.some(ue=>te.includes(ue))?(ne="High",dt="This change affects critical system components that could impact security, data integrity, or core functionality."):xe.some(ue=>te.includes(ue))&&(ne="Medium",dt="This change affects system integrations or business logic that requires careful testing and validation.");const Ze=[{category:"Design System",status:"compliant",details:"Change adheres to existing design tokens and component patterns"},{category:"Accessibility",status:ne==="High"?"review_required":"compliant",details:ne==="High"?"WCAG compliance review needed for this change":"No accessibility concerns identified"},{category:"Performance",status:te.includes("performance")?"improvement":"neutral",details:te.includes("performance")?"Change should improve application performance":"No significant performance impact expected"},{category:"Security",status:he.some(ue=>te.includes(ue))?"review_required":"compliant",details:he.some(ue=>te.includes(ue))?"Security review required before implementation":"No security concerns identified"}],Qn={database:3,migration:4,api:2,auth:3,integration:2,ui:1,style:.5,text:.5};let at=1;Object.entries(Qn).forEach(([ue,un])=>{te.includes(ue)&&(at+=un)});const Zn=at<=2?"1-2 days":at<=4?"3-5 days":at<=6?"1-2 weeks":"2-4 weeks",ss=Math.min(100,Math.round(Q.length*10+at*5+(ne==="High"?30:ne==="Medium"?15:5))),is=Math.round(at*10)/10,er={affected_components:Q.slice(0,8),risk_level:ne.toLowerCase(),risk_rationale:dt,impact_score:ss,effort_multiplier:is,estimated_effort:Math.ceil(at),estimated_timeline:Zn,consistency_validation:Ze,recommendations:[{type:"Testing",description:`Ensure comprehensive testing for ${Q.length} affected components`,effort_reduction:"15-20%"},{type:"Documentation",description:"Update component documentation and integration guides",effort_reduction:"10-15%"}],mitigation_strategies:["Implement feature flags to control rollout","Create comprehensive test suite before deployment","Monitor performance metrics during implementation","Prepare rollback strategy for critical issues"],generated_at:new Date().toISOString()};ne==="High"&&(er.breaking_changes=[{type:"API Change",description:"Potential modifications to component interfaces",keyword:((z=te.match(/(auth|api|database)/))==null?void 0:z[0])||"system"}]);const wr={};Ze.forEach(ue=>{const un=ue.status==="compliant"?85:ue.status==="improvement"?95:ue.status==="review_required"?25:ue.status==="warning"?60:75;wr[ue.category.toLowerCase().replace(" ","_")]=un});const br={passed:!Ze.some(ue=>ue.status==="review_required"),blocking_issues:Ze.filter(ue=>ue.status==="review_required").map(ue=>({message:`${ue.category}: ${ue.details}`,suggestion:ue.status==="review_required"?"Consider professional review before implementation":null})),warnings:Ze.filter(ue=>ue.status==="warning"),score:Math.round(Ze.filter(ue=>ue.status==="compliant"||ue.status==="improvement").length/Ze.length*100),category_scores:wr,recommendations:Ze.filter(ue=>ue.status==="improvement"||ue.status==="compliant").map(ue=>({message:ue.details,priority:ue.status==="improvement"?"medium":"low"}))};W(er),T(br);const kr={skeptical_assessment:[`Directive "${q.slice(0,50)}..." may have hidden complexities not immediately apparent`,"Resource estimates are often underestimated by 40-60% in similar projects","User requirements frequently change after initial implementation begins","Integration points with existing systems pose higher risk than anticipated"],potential_blockers:["Insufficient technical specifications may delay development","Dependency on external APIs or services may introduce instability","Browser compatibility issues may emerge during testing","Performance impact on larger datasets may require architectural changes"],risk_factors:{technical_debt:ne==="High"?"Significant":"Moderate",change_resistance:"Medium",rollback_difficulty:Zn.includes("week")?"Low":"High",maintenance_overhead:`${ne} ongoing maintenance burden expected`},recommendations:["Consider phased implementation approach to mitigate risks","Establish clear rollback procedures before deployment","Plan for 25% buffer time beyond initial estimates","Document all assumptions and validate with stakeholders"]};Jt(kr),c(ue=>({...ue,impact_analysis:er,consistency_validation:br,critical_analysis:kr})),console.log(" [STEP 4] Impact analysis data generated locally"),console.log(" [STEP 4] Risk Level:",ne),console.log(" [STEP 4] Components affected:",Q.length),console.log(" [STEP 4] Estimated timeline:",Zn)}},[i,l,R.intentSummary]),b.useEffect(()=>{var z,q;if(i===5&&(l!=null&&l.id)&&((z=l==null?void 0:l.gate_status)!=null&&z.synthesis_reviewed&&se(!0),!(l!=null&&l.synthesis))){console.log(" [STEP 5] Generating synthesis data...");const te=(l==null?void 0:l.intent_summary)||R.intentSummary||"",ae=(l==null?void 0:l.strat_tac)||{},Q=(l==null?void 0:l.impact_analysis)||{},he=[],xe=[],ne=[];(te.toLowerCase().includes("dark mode")||te.toLowerCase().includes("theme"))&&(he.push("UI theming system already supports dark/light mode switching"),he.push("CSS variables are in place for theme customization")),(te.toLowerCase().includes("dashboard")||te.toLowerCase().includes("ui"))&&(he.push("Component architecture supports modular UI updates"),he.push("Existing design system can be extended")),ae.strategic_pct>50&&(xe.push("Architecture review and approval from technical lead"),xe.push("Comprehensive testing strategy for new features"),xe.push("Documentation updates for significant changes")),((Q==null?void 0:Q.risk_level)==="High"||(Q==null?void 0:Q.risk_level)==="Critical")&&(xe.push("Risk mitigation plan implementation"),xe.push("Rollback strategy preparation")),te.toLowerCase().includes("performance")&&xe.push("Performance benchmarking before and after implementation"),(te.toLowerCase().includes("security")||te.toLowerCase().includes("auth"))&&xe.push("Security audit and penetration testing"),ae.tactical_pct>60&&(ne.push("Incremental deployment with feature flags"),ne.push("A/B testing for user-facing changes")),((q=Q==null?void 0:Q.affected_components)==null?void 0:q.length)>5&&(ne.push("Phased implementation to minimize disruption"),ne.push("Component isolation testing")),ne.push("User acceptance testing with stakeholder group"),ne.push("Performance monitoring post-deployment"),he.length===0&&(he.push("Existing infrastructure supports proposed changes"),he.push("Current tooling and frameworks are compatible")),xe.length===0&&(xe.push("Standard code review process"),xe.push("Unit and integration test coverage")),ne.length===0&&(ne.push("Progressive rollout strategy"),ne.push("User feedback collection mechanism"));const dt={synthesis:{aligned:he,required:xe,recommended:ne,generated_at:new Date().toISOString()}};console.log(" [STEP 5] Synthesis generated:",dt),c(Ze=>({...Ze,...dt}))}},[i,l,R.intentSummary]),b.useEffect(()=>{var z;if(i===6&&(l!=null&&l.id)&&(l==null?void 0:l.questions)===void 0){console.log(" [STEP 6] Generating clarifying questions...");const q=(l==null?void 0:l.intent_summary)||R.intentSummary||"",te=(l==null?void 0:l.strat_tac)||{},ae=(l==null?void 0:l.synthesis)||{},Q=[];(q.toLowerCase().includes("ui")||q.toLowerCase().includes("interface"))&&(Q.push({text:"What specific UI components or pages should be affected by these changes?",context:"Help us scope the implementation correctly"}),Q.push({text:"Do you have any specific design preferences or brand guidelines to follow?",context:"Ensures visual consistency with your requirements"})),te.strategic_pct>60&&(Q.push({text:"What is the expected timeline for this strategic initiative?",context:"Helps with resource allocation and planning"}),Q.push({text:"Are there any dependencies or prerequisites we should be aware of?",context:"Identifies potential blockers early"})),(z=ae.required)!=null&&z.some(xe=>xe.includes("performance"))&&Q.push({text:"What are your specific performance targets or requirements?",context:"Define measurable success criteria"}),(q.toLowerCase().includes("data")||q.toLowerCase().includes("database"))&&Q.push({text:"What data retention and backup policies should be considered?",context:"Ensures compliance with data governance"}),Q.length<2&&Q.push({text:"Are there any specific edge cases or scenarios we should consider?",context:"Helps identify potential issues early"});const he={questions:Q.length>0?Q:[],questions_generated_at:new Date().toISOString()};console.log(" [STEP 6] Questions generated:",he),c(xe=>({...xe,...he}))}},[i,l,R.intentSummary]),b.useEffect(()=>{var z,q,te;if(i===7&&(l!=null&&l.id)&&!(l!=null&&l.final_summary)){console.log(" [STEP 7] Generating final summary...");const ae=(l==null?void 0:l.intent_summary)||R.intentSummary||"",Q=(l==null?void 0:l.strat_tac)||{},he=(l==null?void 0:l.impact_analysis)||{},xe=(l==null?void 0:l.synthesis)||{};let ne=`This directive focuses on: ${ae}. `;Q.strategic_pct>60?ne+=`This is primarily a strategic initiative (${Q.strategic_pct}% strategic) that will shape long-term architecture. `:ne+=`This is primarily a tactical improvement (${Q.tactical_pct}% tactical) focusing on immediate enhancements. `,((z=he.affected_components)==null?void 0:z.length)>0&&(ne+=`The implementation will affect ${he.affected_components.length} components with ${he.risk_level||"moderate"} risk level. `),((q=xe.required)==null?void 0:q.length)>0&&(ne+=`Key requirements include: ${xe.required[0]}. `),((te=xe.recommended)==null?void 0:te.length)>0&&(ne+=`Recommended approach: ${xe.recommended[0]}. `),he.effort_estimate&&(ne+=`Estimated effort: ${he.effort_estimate}. `),ne+="Upon approval, this directive will be converted into a formal PRD and assigned to the implementation team.";const dt={final_summary:ne,final_summary_generated_at:new Date().toISOString()};console.log(" [STEP 7] Final summary generated:",dt),c(Ze=>({...Ze,...dt}))}},[i,l,R.intentSummary]),b.useEffect(()=>{i===2&&R.intentSummary&&setTimeout(()=>{const z=document.querySelector('textarea[name="intentSummary"]');z&&(z.style.height="auto",z.style.height=Math.min(z.scrollHeight,300)+"px")},100)},[R.intentSummary,i]);const vr=z=>z.trim()?z.length<20?(L(q=>({...q,chairmanInput:"Please provide more detailed feedback (min 20 characters)"})),ie(q=>({...q,chairmanInput:!1})),!1):(L(q=>({...q,chairmanInput:null})),ie(q=>({...q,chairmanInput:!0})),!0):(L(q=>({...q,chairmanInput:"Feedback is required"})),ie(q=>({...q,chairmanInput:!1})),!1),I=z=>{if(!z)return!0;try{return new URL(z),L(q=>({...q,screenshotUrl:null})),ie(q=>({...q,screenshotUrl:!0})),!0}catch{return L(q=>({...q,screenshotUrl:"Please enter a valid URL"})),ie(q=>({...q,screenshotUrl:!1})),!1}},F=async()=>{var z,q;if(console.log(" [STEP 1] Starting feedback submission"),console.log(" [STEP 1] Form data:",{feedback:((z=R.chairmanInput)==null?void 0:z.substring(0,50))+"...",screenshotUrl:R.screenshotUrl}),!!vr(R.chairmanInput)){d(!0),f(null);try{const te=await fetch("/api/sdip/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:R.chairmanInput,screenshot_url:R.screenshotUrl})});if(!te.ok)throw new Error("Failed to submit feedback");const ae=await te.json();console.log(" [STEP 1] Submission created successfully"),console.log(" [STEP 1] Submission ID:",((q=ae.submission)==null?void 0:q.id)||ae.id),console.log(" [STEP 1] Full submission data:",ae);const Q=ae.submission||ae;c(Q),Pe({...be,1:!0}),a(2),p("Feedback submitted successfully!"),localStorage.removeItem("directiveLab_draft"),Q.id?(console.log(" [STEP 2] Triggering intent generation for submission:",Q.id),await Z(Q.id,2,{feedback:R.chairmanInput,chairman_input:R.chairmanInput})):console.error(" [STEP 1] No submission ID received!")}catch(te){f(te.message)}finally{d(!1)}}},Z=async(z,q,te)=>{console.log(` [STEP ${q}] Updating submission: ${z}`),console.log(` [STEP ${q}] Step data:`,te);try{const ae=await fetch(`/api/sdip/submissions/${z}/step/${q}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});if(!ae.ok)throw new Error(`Failed to update step ${q}`);const Q=await ae.json();console.log(` [STEP ${q}] Update successful`),console.log(` [STEP ${q}] Response data:`,Q);const he=Q.submission||Q;return c(he),q===2&&he.intent_summary&&(console.log(" [STEP 2] Intent summary received:",he.intent_summary.substring(0,50)+"..."),ye({...R,intentSummary:he.intent_summary})),he}catch(ae){throw console.error(` [STEP ${q}] Update failed:`,ae),console.error(` [STEP ${q}] Error details:`,ae.message),f(ae.message),ae}},ce=async z=>{var q,te,ae,Q,he;console.log(` [STEP ${z}] Completing step`),console.log(` [STEP ${z}] Current submission:`,l),d(!0),f(null);try{if(l&&l.id&&z>1){console.log(` [STEP ${z}] Preparing step data for submission: ${l.id}`);let ne={};switch(z){case 2:ne={intent_summary:R.intentSummary};break;case 3:ne={strategic_pct:((q=l.strat_tac)==null?void 0:q.strategic_pct)||50,tactical_pct:((te=l.strat_tac)==null?void 0:te.tactical_pct)||50,override:R.stratTacOverride};break;case 4:ne={impact_analysis:$,consistency_validation:A};break;case 5:ne={aligned:((ae=l.synthesis)==null?void 0:ae.aligned)||[],required:((Q=l.synthesis)==null?void 0:Q.required)||[],recommended:((he=l.synthesis)==null?void 0:he.recommended)||[],synthesis_reviewed:ee};break;case 6:ne={questions_answers:R.questionAnswers};break;case 7:ne={final_summary:l.final_summary||R.intentSummary};break}console.log(` [STEP ${z}] Step data prepared:`,ne),await Z(l.id,z,ne)}else console.log(` [STEP ${z}] No submission ID, skipping update`);Pe({...be,[z]:!0});const xe=Ve(z);xe!==z?(a(xe),p(`Step ${z} completed!`)):(p("Directive submitted successfully!"),setTimeout(()=>{ye({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},summaryConfirmed:!1}),a(1),Pe({}),c(null),W(null),T(null)},2e3))}catch(xe){f(xe.message)}finally{d(!1)}},ke=async()=>{console.log(" [STEP 7] Saving submission and closing"),d(!0),f(null);try{if(l&&l.id){const z={final_summary:l.final_summary||R.intentSummary,status:"ready",completed_steps:[1,2,3,4,5,6,7]};await Z(l.id,7,z),Pe({...be,7:!0}),p("Submission saved successfully! You can find it in Recent Submissions."),setTimeout(()=>{ye({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),a(1),Pe({}),c(null),W(null),T(null),D("submissions")},2e3)}else throw new Error("No submission to save")}catch(z){f(z.message)}finally{d(!1)}},pt=async()=>{console.log(" [STEP 7] Submitting directive to create Strategic Directive"),d(!0),f(null);try{if(l&&l.id){const te={final_summary:l.final_summary||R.intentSummary,status:"submitted",completed_steps:[1,2,3,4,5,6,7]};await Z(l.id,7,te)}const z=await fetch("/api/sdip/create-strategic-directive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_id:l.id})});if(!z.ok){const te=await z.json();throw new Error(te.error||"Failed to create Strategic Directive")}const q=await z.json();Pe({...be,7:!0}),p(`Strategic Directive created successfully! ID: ${q.sd_id}`),setTimeout(()=>{ye({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),a(1),Pe({}),c(null),W(null),T(null),D("submissions")},3e3)}catch(z){f(z.message)}finally{d(!1)}},bt=z=>{var q,te,ae,Q,he,xe,ne,dt,Ze,Qn,at,Zn,ss,is,er,wr,br,kr,ue,un,as,Hi;switch(z){case 1:return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Xo,{type:"textarea",label:"Chairman Feedback",name:"chairmanInput",value:R.chairmanInput,onChange:re=>{ye({...R,chairmanInput:re.target.value}),vr(re.target.value)},placeholder:"Enter your feedback about the EHG application...",required:!0,rows:5,minLength:20,maxLength:1e3,showCharCount:!0,error:$t.chairmanInput,success:J.chairmanInput,helpText:"Provide detailed feedback about what you'd like to improve or add"}),o.jsx(Xo,{type:"url",label:"Screenshot URL",name:"screenshotUrl",value:R.screenshotUrl,onChange:re=>{ye({...R,screenshotUrl:re.target.value}),I(re.target.value)},placeholder:"https://example.com/screenshot.png",error:$t.screenshotUrl,success:J.screenshotUrl,helpText:"Optional: Add a screenshot URL to provide visual context",icon:Su}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx($e,{onClick:F,disabled:u||!R.chairmanInput.trim(),loading:u,variant:"primary",icon:hh,iconPosition:"right",children:"Submit & Analyze"}),o.jsx($e,{onClick:()=>{localStorage.setItem("directiveLab_draft",JSON.stringify(R)),p("Draft saved")},variant:"secondary",icon:_u,children:"Save Draft"})]})]});case 2:return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Xo,{type:"textarea",label:"Extracted Intent Summary",name:"intentSummary",value:R.intentSummary,onChange:re=>{ye({...R,intentSummary:re.target.value}),re.target&&(re.target.style.height="auto",re.target.style.height=Math.min(re.target.scrollHeight,300)+"px")},rows:3,style:{minHeight:"80px",maxHeight:"300px",resize:"vertical",overflow:"auto"},onFocus:re=>{re.target.style.height="auto",re.target.style.height=Math.min(re.target.scrollHeight,300)+"px"},helpText:"Review and edit if needed to accurately capture your intent",success:R.intentSummary.length>0}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx($e,{onClick:()=>Qe(1),variant:"ghost",icon:ls,children:"Back"}),o.jsx($e,{onClick:()=>ce(2),disabled:u||!R.intentSummary,loading:u,variant:"success",icon:zn,children:"Confirm Intent"})]})]});case 3:return o.jsxs("div",{className:"space-y-3",children:[l!=null&&l.strat_tac?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex justify-around mb-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[((q=R.stratTacOverride)==null?void 0:q.strategic_pct)??l.strat_tac.strategic_pct,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Strategic"})]}),o.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600"}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[((te=R.stratTacOverride)==null?void 0:te.tactical_pct)??l.strat_tac.tactical_pct,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Tactical"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg",children:[o.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Classification Rationale:"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:((ae=R.stratTacOverride)==null?void 0:ae.rationale)||l.strat_tac.rationale})]})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(UC,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mr-2"}),o.jsx("span",{className:"font-medium text-yellow-900 dark:text-yellow-100 text-sm",children:"Adjust Classification (Optional)"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-2",children:[o.jsx("span",{children:"More Tactical"}),o.jsx("span",{children:"More Strategic"})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:((Q=R.stratTacOverride)==null?void 0:Q.strategic_pct)??l.strat_tac.strategic_pct,onChange:re=>{const Xe=parseInt(re.target.value),Qt=100-Xe;let kt="";Xe>70?kt="Manually classified as highly strategic - focusing on long-term architecture and business objectives.":Xe>50?kt="Manually classified as moderately strategic - balancing long-term goals with immediate improvements.":Xe>30?kt="Manually classified as balanced - containing both strategic elements and tactical improvements.":kt="Manually classified as primarily tactical - focusing on immediate fixes and improvements.",ye({...R,stratTacOverride:{strategic_pct:Xe,tactical_pct:Qt,rationale:kt,manually_adjusted:!0,adjusted_at:new Date().toISOString()}})},className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 \r
                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 \r
                        [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer\r
                        [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 \r
                        [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none`}),o.jsxs("div",{className:"flex justify-between mt-1",children:[o.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[((he=R.stratTacOverride)==null?void 0:he.tactical_pct)??l.strat_tac.tactical_pct,"% Tactical"]}),o.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:[((xe=R.stratTacOverride)==null?void 0:xe.strategic_pct)??l.strat_tac.strategic_pct,"% Strategic"]})]})]}),R.stratTacOverride&&o.jsx($e,{onClick:()=>{ye({...R,stratTacOverride:null})},variant:"ghost",size:"small",icon:_s,children:"Reset to Auto-Classification"})]})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyzing strategic vs tactical breakdown..."})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx($e,{onClick:()=>Qe(2),variant:"ghost",icon:ls,children:"Back"}),o.jsx($e,{onClick:()=>ce(3),disabled:u,loading:u,variant:"success",icon:zn,children:R.stratTacOverride?"Accept Adjusted Classification":"Accept Classification"})]})]});case 4:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Application Impact Analysis"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the comprehensive analysis of how your proposed changes will affect the application, including component dependencies, risk assessment, and consistency validation."})]}),o.jsx(OD,{impactAnalysis:$,consistencyValidation:A,submission:l}),A&&!A.passed&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Jr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),o.jsx("span",{className:"font-medium text-red-900 dark:text-red-100",children:"Consistency Issues Found"})]}),o.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 mb-3",children:[((ne=A.blocking_issues)==null?void 0:ne.length)||0," blocking issues must be resolved before proceeding."]}),o.jsx("div",{className:"text-xs text-red-700 dark:text-red-300",children:"Review the Impact Analysis above for detailed recommendations and mitigation strategies."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx($e,{onClick:()=>Qe(3),variant:"ghost",icon:ls,children:"Back"}),o.jsx($e,{onClick:()=>ce(4),disabled:u||A&&!A.passed,loading:u,variant:(A==null?void 0:A.passed)===!1?"secondary":"success",icon:(A==null?void 0:A.passed)===!1?Kt:zn,children:(A==null?void 0:A.passed)===!1?"Acknowledge Risks & Continue":"Accept Impact Analysis"})]})]});case 5:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Synthesis Review"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the synthesized requirements and recommendations for your directive."})]}),l!=null&&l.synthesis?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(st,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),o.jsxs("span",{className:"font-medium text-green-900 dark:text-green-100",children:["Aligned Requirements (",((dt=l.synthesis.aligned)==null?void 0:dt.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(Ze=l.synthesis.aligned)==null?void 0:Ze.map((re,Xe)=>{const Qt=typeof re=="object"?re.badges:Gu(re),kt=typeof re=="object"?re.text:re;return o.jsx("li",{className:"text-sm text-green-800 dark:text-green-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-600 dark:text-green-400 mr-2",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:kt}),o.jsx(qu,{badges:Qt})]})]})},Xe)})})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Kt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),o.jsxs("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:["Required Changes (",((Qn=l.synthesis.required)==null?void 0:Qn.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(at=l.synthesis.required)==null?void 0:at.map((re,Xe)=>{const Qt=typeof re=="object"?re.badges:Gu(re),kt=typeof re=="object"?re.text:re;return o.jsx("li",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mr-2",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:kt}),o.jsx(qu,{badges:Qt})]})]})},Xe)})})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Tn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),o.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:["Recommended Enhancements (",((Zn=l.synthesis.recommended)==null?void 0:Zn.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(ss=l.synthesis.recommended)==null?void 0:ss.map((re,Xe)=>{const Qt=typeof re=="object"?re.badges:Gu(re),kt=typeof re=="object"?re.text:re;return o.jsx("li",{className:"text-sm text-blue-800 dark:text-blue-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:kt}),o.jsx(qu,{badges:Qt})]})]})},Xe)})})]})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Synthesizing requirements and recommendations..."})]})}),(l==null?void 0:l.synthesis)&&o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:o.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:ee,onChange:re=>se(re.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"I have reviewed the synthesis analysis"}),o.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["I understand the aligned requirements (",((is=l.synthesis.aligned)==null?void 0:is.length)||0,"), required changes (",((er=l.synthesis.required)==null?void 0:er.length)||0,"), and recommended enhancements (",((wr=l.synthesis.recommended)==null?void 0:wr.length)||0,") for this directive."]})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx($e,{onClick:()=>Qe(4),variant:"ghost",icon:ls,children:"Back"}),o.jsx($e,{onClick:()=>ce(5),disabled:u||!(l!=null&&l.synthesis)||!ee,loading:u,variant:"success",icon:zn,children:"Accept Synthesis"})]})]});case 6:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Clarifying Questions"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Answer any clarifying questions about your directive to ensure accurate implementation."})]}),l!=null&&l.questions&&l.questions.length>0?o.jsx("div",{className:"space-y-3",children:l.questions.map((re,Xe)=>{var Qt;return o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start mb-2",children:[o.jsx(Nu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2 mt-0.5"}),o.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:re.text})]}),o.jsx(Xo,{type:"textarea",name:`question_${Xe}`,value:((Qt=R.questionAnswers)==null?void 0:Qt[`question_${Xe}`])||"",onChange:kt=>{ye({...R,questionAnswers:{...R.questionAnswers,[`question_${Xe}`]:kt.target.value}})},placeholder:"Your answer...",rows:2,helpText:re.context})]},Xe)})}):(l==null?void 0:l.questions)===void 0?o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generating clarifying questions..."})]})}):o.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(st,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),o.jsx("p",{className:"text-green-800 dark:text-green-200",children:"No clarifying questions needed - your directive is clear!"})]})}),(l==null?void 0:l.questions)!==void 0&&o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:o.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:R.questionsReviewed||!1,onChange:re=>ye({...R,questionsReviewed:re.target.checked}),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:((br=l==null?void 0:l.questions)==null?void 0:br.length)>0?"I have provided complete answers to all questions":"I confirm no additional questions are needed"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:((kr=l==null?void 0:l.questions)==null?void 0:kr.length)>0?`All ${l.questions.length} clarifying questions have been answered to provide context for implementation.`:"The directive is sufficiently clear and no additional clarification is required."})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx($e,{onClick:()=>Qe(5),variant:"ghost",icon:ls,children:"Back"}),o.jsx($e,{onClick:()=>ce(6),disabled:u||!R.questionsReviewed,loading:u,variant:"success",icon:zn,children:((ue=l==null?void 0:l.questions)==null?void 0:ue.length)>0?"Submit Answers":"Continue"})]})]});case 7:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Final Confirmation"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the final summary and choose your next action."})]}),l!=null&&l.final_summary?o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Directive Summary"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:l.final_summary})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[((un=l.strat_tac)==null?void 0:un.strategic_pct)||0,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Strategic"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((as=l.impact_analysis)==null?void 0:as.risk_level)||"Low"}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Risk Level"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:((Hi=l.impact_analysis)==null?void 0:Hi.effort_estimate)||"Medium"}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Effort"})]})]}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsx($e,{onClick:()=>{navigator.clipboard.writeText(l.final_summary),N.success("Summary copied to clipboard")},variant:"ghost",size:"small",icon:vm,children:"Copy Summary"}),o.jsx($e,{onClick:async()=>{d(!0);try{const re=await fetch(`/api/directive-submissions/${l.id}/regenerate-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(re.ok){const Xe=await re.json();c({...l,final_summary:Xe.final_summary}),N.success("Summary regenerated successfully")}}catch{N.error("Failed to regenerate summary")}finally{d(!1)}},variant:"ghost",size:"small",icon:_s,disabled:u,children:"Regenerate"})]}),o.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:o.jsxs("label",{className:"flex items-start cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:R.finalConfirmed||!1,onChange:re=>ye({...R,finalConfirmed:re.target.checked}),className:"mt-0.5 mr-2"}),o.jsx("span",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:"I confirm that this directive accurately represents my requirements."})]})})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preparing final summary..."})]})}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Choose Your Next Action"}),o.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(_u,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Save & Close:"})," Save for later review or combine with other submissions"]})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(_0,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Submit Directive:"})," Create Strategic Directive and begin LEO Protocol workflow"]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx($e,{onClick:()=>Qe(6),variant:"ghost",icon:ls,className:"order-3 sm:order-1",children:"Back"}),o.jsxs("div",{className:"flex gap-3 order-1 sm:order-2 flex-1",children:[o.jsx($e,{onClick:ke,disabled:u||!R.finalConfirmed,loading:u,variant:"secondary",icon:_u,className:"flex-1",children:"Save & Close"}),o.jsx($e,{onClick:pt,disabled:u||!R.finalConfirmed,loading:u,variant:"primary",icon:_0,className:"flex-1",children:"Submit Directive"})]})]})]});default:return o.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Step content for Step ",z," coming soon..."]})}},je=()=>o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 py-1.5 px-4",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx($e,{onClick:()=>Qe(Math.max(1,i-1)),disabled:i===1,variant:"ghost",size:"small",icon:ls,children:"Previous"}),o.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Step ",i," of ",Te.length]}),o.jsx($e,{onClick:()=>ce(i),disabled:!be[i-1]&&i>1,variant:"primary",size:"small",icon:hh,iconPosition:"right",children:"Next"})]})});return o.jsx(FD,{children:o.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Qb,{}),o.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Directive Lab"}),o.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>s("quick"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${r==="quick"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Quick Mode"}),o.jsx("button",{onClick:()=>s("comprehensive"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${r==="comprehensive"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Comprehensive"})]})]}),o.jsx($e,{onClick:()=>G(!V),variant:"ghost",size:"small",icon:Nu,ariaLabel:"Toggle help",children:"Help"})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Step:"}),o.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:((kn=Te[i-1])==null?void 0:kn.title)||"Unknown"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",i," of ",Te.length,")"]})]})]})}),V&&o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800 px-4 py-2",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Nu,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2"}),o.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[o.jsx("p",{className:"font-medium mb-0.5",children:"Getting Started:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-blue-800 dark:text-blue-200",children:[o.jsx("li",{children:"Provide detailed feedback about what you want to improve"}),o.jsx("li",{children:"Each step builds on the previous one"}),o.jsx("li",{children:"Your progress is automatically saved"}),o.jsx("li",{children:"You can navigate back to previous steps at any time"})]})]})]})})}),m&&o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-green-800 dark:text-green-200 text-sm",children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),m]})}),h&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-red-800 dark:text-red-200 text-sm",children:[o.jsx(xr,{className:"w-4 h-4 mr-2"}),h]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx(RD,{steps:Te,currentStep:i,orientation:"horizontal",showTimeEstimates:!P,compact:!0,hideLabelsOnMobile:!0,onStepClick:Qe})})}),o.jsx(je,{}),o.jsxs("div",{className:"flex-1 px-4 py-2 flex flex-col min-h-0",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg shadow-sm border border-gray-200 dark:border-gray-700 border-b-0 flex-shrink-0",children:o.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("button",{onClick:()=>D("input"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${O==="input"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Su,{className:"w-4 h-4"}),"Input & Screenshot"]}),O==="input"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]}),o.jsxs("button",{onClick:()=>D("submissions"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${O==="submissions"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Et,{className:"w-4 h-4"}),"Recent Submissions",l&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),O==="submissions"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]})]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-b-lg shadow-sm border border-gray-200 dark:border-gray-700 border-t-0 flex-1 relative flex flex-col overflow-hidden",children:[o.jsxs("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out flex flex-col ${O==="input"?"translate-x-0 opacity-100":"translate-x-full opacity-0 pointer-events-none"}`,children:[o.jsxs("div",{className:"mb-3 flex-shrink-0",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Te[i-1].title}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:Te[i-1].description})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:bt(i)})]}),o.jsx("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out ${O==="submissions"?"translate-x-0 opacity-100":"-translate-x-full opacity-0 pointer-events-none"}`,children:o.jsxs("div",{className:"h-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Submissions"}),o.jsx($e,{onClick:()=>j(z=>z+1),variant:"ghost",size:"small",icon:_s,ariaLabel:"Refresh submissions"})]}),o.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:o.jsx(DD,{onSubmissionSelect:z=>{c(z),z&&setTimeout(()=>D("input"),300)},selectedSubmissionId:l==null?void 0:l.id,onSelectionChange:w,refreshTrigger:E,onGroupCreate:(z,q="intelligent")=>{w(z),S(q),g(!0)}})})]})})]})]}),y&&o.jsx(LD,{selectedSubmissions:v,combineMethod:x,onClose:()=>g(!1),onSuccess:()=>{g(!1),j(z=>z+1)}})]})})};function zy({backlogData:e=[],strategicDirectives:t=[],isCompact:n,onRefresh:r}){const{id:s}=$f(),i=Oi(),a=Jn(),c=new URLSearchParams(a.search).get("sd"),[u,d]=b.useState({}),[h,f]=b.useState(""),[m,p]=b.useState("all"),[v,w]=b.useState(c||"all"),[y,g]=b.useState(!1),[x,S]=b.useState("all"),[E,j]=b.useState(!0),[P,C]=b.useState([]),[O,D]=b.useState({});b.useEffect(()=>{(async()=>{j(!0);try{const W=v&&v!=="all"?`/api/backlog/strategic-directives/${v}`:"/api/backlog/strategic-directives-with-items",T=await(await fetch(W)).json();if(v&&v!=="all")C(T.backlog_items||[]),D({[T.sd_id]:{sd:T,items:T.backlog_items||[]}});else{const U={};T.forEach(ee=>{U[ee.sd_id]={sd:ee,items:ee.backlog_items||[]}}),D(U);const k=T.flatMap(ee=>ee.backlog_items||[]);C(k)}}catch(W){console.error("Error loading backlog:",W)}finally{j(!1)}})()},[v]);const V=Object.entries(O).reduce(($,[W,A])=>{let T=A.items;if(h){const U=h.toLowerCase();T=T.filter(k=>{var ee,se,_,Se;return((ee=k.backlog_title)==null?void 0:ee.toLowerCase().includes(U))||((se=k.item_description)==null?void 0:se.toLowerCase().includes(U))||((_=k.backlog_id)==null?void 0:_.toLowerCase().includes(U))||((Se=k.my_comments)==null?void 0:Se.toLowerCase().includes(U))})}return m!=="all"&&(T=T.filter(U=>{var k;return((k=U.priority)==null?void 0:k.toLowerCase())===m.toLowerCase()})),x==="yes"?T=T.filter(U=>U.new_module===!0):x==="no"&&(T=T.filter(U=>U.new_module===!1)),T.length>0&&($[W]={...A,items:T}),$},{}),G=$=>{if(!$)return null;const W=$.toLowerCase(),A={high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:pr},h:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:pr},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Or},m:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Or},low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Or},l:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Or},future:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-300",icon:Rn}},T=A[W]||A.low,U=T.icon;return o.jsxs("span",{className:`inline-flex items-center ${n?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${T.bg} ${T.text}`,children:[o.jsx(U,{className:"w-3 h-3 mr-1"}),$]})},de=$=>{d(W=>({...W,[$]:!W[$]}))};if(E)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading backlog..."})});const M=Object.values(V).reduce(($,W)=>$+W.items.length,0);return o.jsxs("div",{className:n?"p-3":"p-6",children:[o.jsxs("div",{className:n?"mb-3":"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ci,{className:n?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),o.jsx("h1",{className:n?"text-xl font-semibold":"text-2xl font-bold",children:"Backlog Management"}),o.jsxs("span",{className:`ml-3 ${n?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[M," items"]})]}),o.jsx(Sc,{onRefresh:r,isCompact:n})]}),o.jsxs("div",{className:`flex flex-wrap gap-2 ${n?"mb-3":"mb-4"}`,children:[o.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[o.jsx(Yb,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"w-4 h-4":"w-5 h-5"} text-gray-400`}),o.jsx("input",{type:"text",value:h,onChange:$=>f($.target.value),placeholder:"Search backlog items...",className:`w-full ${n?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),o.jsxs("select",{value:v,onChange:$=>w($.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Strategic Directives"}),Object.values(O).map(({sd:$})=>o.jsx("option",{value:$.sd_id,children:$.sd_title},$.sd_id))]}),o.jsxs("select",{value:m,onChange:$=>p($.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"}),o.jsx("option",{value:"future",children:"Future"})]}),o.jsxs("select",{value:x,onChange:$=>S($.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Items"}),o.jsx("option",{value:"yes",children:"New Module"}),o.jsx("option",{value:"no",children:"Existing Module"})]}),o.jsxs("button",{onClick:()=>i("/backlog/new"),className:`flex items-center ${n?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[o.jsx(HC,{className:`${n?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Backlog Item"]})]})]}),o.jsx("div",{className:"space-y-4",children:Object.entries(V).map(([$,{sd:W,items:A}])=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:`${n?"p-3":"p-4"} border-b border-gray-200 dark:border-gray-700`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:`${n?"text-base":"text-lg"} font-semibold text-gray-900 dark:text-white`,children:W.sd_title}),o.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:W.sd_id}),W.rolled_triage&&o.jsxs("span",{className:`text-xs px-2 py-1 rounded ${W.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":W.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":W.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:["Triage: ",W.rolled_triage]}),W.must_have_pct!==null&&o.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:[W.must_have_pct,"% Must-Have"]}),o.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:[A.length," items"]})]})]}),o.jsx("button",{onClick:()=>i(`/strategic-directives/${W.sd_id}`),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:o.jsx(Et,{className:n?"w-4 h-4":"w-5 h-5"})})]})}),o.jsx("div",{className:n?"p-2":"p-3",children:A.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No backlog items found"}):o.jsx("div",{className:"space-y-2",children:A.map(T=>o.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:o.jsxs("div",{className:`${n?"p-2":"p-3"} cursor-pointer`,onClick:()=>de(`${$}-${T.backlog_id}`),children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start flex-1",children:[o.jsx("div",{className:"mr-2 mt-1",children:u[`${$}-${T.backlog_id}`]?o.jsx(Un,{className:"w-4 h-4 text-gray-400"}):o.jsx(Ut,{className:"w-4 h-4 text-gray-400"})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"font-mono text-xs text-gray-500 dark:text-gray-400",children:T.backlog_id}),o.jsx("span",{className:`${n?"text-sm":"text-base"} font-medium text-gray-900 dark:text-white`,children:T.backlog_title}),T.new_module&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:"New Module"})]})})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[G(T.priority),T.stage_number&&o.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded",children:["Stage ",T.stage_number]})]})]}),u[`${$}-${T.backlog_id}`]&&o.jsxs("div",{className:`mt-3 ${n?"pl-5":"pl-6"} space-y-2`,children:[T.item_description&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:T.item_description})]}),T.my_comments&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Comments"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:T.my_comments})]}),T.phase&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Phase"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:T.phase})]}),T.description_raw&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tags"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:T.description_raw})]})]})]})},`${$}-${T.backlog_id}`))})})]},$))}),Object.keys(V).length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ci,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No backlog items found matching your filters"})]})]})}function UD({metrics:e,activeCount:t,totalReviews:n}){const r=[{title:"Active Reviews",value:t,icon:xm,color:"blue",trend:null},{title:"Pass Rate",value:`${e.passRate}%`,icon:st,color:"green",trend:e.passRate>85?"up":"down",trendValue:e.passRate>85?"Good":"Needs Improvement"},{title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,icon:Rn,color:"purple",trend:e.avgTime<5e3?"up":"down",trendValue:e.avgTime<5e3?"Fast":"Slow"},{title:"False Positive Rate",value:`${e.falsePositiveRate}%`,icon:Kt,color:e.falsePositiveRate>15?"yellow":"green",trend:e.falsePositiveRate<15?"up":"down",trendValue:e.falsePositiveRate<15?"On Target":"High"},{title:"Compliance Rate",value:`${e.complianceRate}%`,icon:no,color:e.complianceRate>=95?"green":"yellow",trend:e.complianceRate>=95?"up":"down",trendValue:`${n} total reviews`}],s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:r.map((i,a)=>{const l=i.icon,c={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400"};return o.jsxs(Y.div,{variants:s,initial:"hidden",animate:"visible",transition:{delay:a*.05},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:`p-2 rounded-lg ${c[i.color]}`,children:o.jsx(l,{className:"w-5 h-5"})}),i.trend&&o.jsx("div",{className:"flex items-center space-x-1",children:i.trend==="up"?o.jsx(pr,{className:"w-4 h-4 text-green-500"}):o.jsx(Or,{className:"w-4 h-4 text-red-500"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.value}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.title}),i.trendValue&&o.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:i.trendValue})]})]},i.title)})})}function BD({reviews:e,loading:t}){if(t)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return o.jsxs("div",{className:"text-center py-12",children:[o.jsx(bm,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Active Reviews"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All PR reviews have been completed or there are no PRs to review."})]});const n=a=>{switch(a){case"pending":return o.jsx(Rn,{className:"w-5 h-5 text-yellow-500"});case"passed":return o.jsx(st,{className:"w-5 h-5 text-green-500"});case"failed":return o.jsx(Jr,{className:"w-5 h-5 text-red-500"});case"warning":return o.jsx(Kt,{className:"w-5 h-5 text-orange-500"});default:return o.jsx(Rn,{className:"w-5 h-5 text-gray-500"})}},r=a=>{const c={security:no,performance:Xl,database:wm,testing:GC}[a]||Et;return o.jsx(c,{className:"w-4 h-4"})},s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}};return o.jsx(Y.div,{variants:s,initial:"hidden",animate:"visible",className:"space-y-4",children:e.map((a,l)=>o.jsxs(Y.div,{variants:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[n(a.status),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["PR #",a.pr_number,": ",a.pr_title]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(Kb,{className:"w-3 h-3"}),o.jsx("span",{children:a.branch})]}),o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(Sm,{className:"w-3 h-3"}),o.jsx("span",{children:a.author})]}),a.sd_link&&o.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["SD: ",a.sd_link]}),a.prd_link&&o.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["PRD: ",a.prd_link]})]})]})]}),o.jsx("a",{href:a.github_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"View on GitHub",children:o.jsx(Gl,{className:"w-5 h-5"})})]}),a.sub_agent_reviews&&a.sub_agent_reviews.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:a.sub_agent_reviews.map(c=>o.jsxs("div",{className:`
                      flex items-center space-x-2 px-3 py-2 rounded-md text-sm
                      ${c.status==="passed"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":c.status==="failed"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}
                    `,children:[r(c.sub_agent),o.jsx("span",{className:"capitalize",children:c.sub_agent})]},c.sub_agent))})]}),a.summary&&o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.summary})}),a.issues&&a.issues.length>0&&o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-md p-3",children:[o.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:["Issues Found (",a.issues.length,")"]}),o.jsxs("ul",{className:"space-y-1",children:[a.issues.slice(0,3).map((c,u)=>o.jsxs("li",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[" ",c]},u)),a.issues.length>3&&o.jsxs("li",{className:"text-sm text-yellow-600 dark:text-yellow-500 italic",children:["... and ",a.issues.length-3," more"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{children:["Started: ",new Date(a.created_at).toLocaleTimeString()]}),a.review_time_ms&&o.jsxs("span",{children:["Duration: ",(a.review_time_ms/1e3).toFixed(1),"s"]})]}),a.status==="pending"&&o.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-600 dark:text-yellow-400",children:[o.jsx(Rn,{className:"w-3 h-3 animate-pulse"}),o.jsx("span",{children:"In Progress"})]})]})]},a.id))})}function HD({reviews:e,loading:t}){const[n,r]=b.useState(new Set);if(t)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Et,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Review History"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Review history will appear here once PR reviews are completed."})]});const s=c=>{const u=new Set(n);u.has(c)?u.delete(c):u.add(c),r(u)},i=c=>{const u={passed:{icon:st,color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",label:"Passed"},failed:{icon:Jr,color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",label:"Failed"},warning:{icon:Kt,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",label:"Warning"}},d=u[c]||u.warning,h=d.icon;return o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:[o.jsx(h,{className:"w-3 h-3 mr-1"}),d.label]})},a=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=c=>{if(!c)return"N/A";const u=c/1e3;if(u<60)return`${u.toFixed(1)}s`;const d=Math.floor(u/60),h=(u%60).toFixed(0);return`${d}m ${h}s`};return o.jsx("div",{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-md rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"PR Details"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Author"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Issues"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Links"}),o.jsx("th",{className:"relative px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(c=>{var d,h;const u=n.has(c.id);return o.jsxs(ao.Fragment,{children:[o.jsxs(Y.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["PR #",c.pr_number]}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:c.pr_title}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[o.jsx(Kb,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.branch})]})]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Sm,{className:"w-4 h-4 text-gray-400 mr-2"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:c.author})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i(c.status)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((d=c.issues)==null?void 0:d.length)||0})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Rn,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{children:l(c.review_time_ms)})]}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[o.jsx(Hb,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a(c.created_at)})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[c.github_url&&o.jsx("a",{href:c.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"View on GitHub",children:o.jsx(Gl,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[c.sd_link&&o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"SD"}),c.prd_link&&o.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"PRD"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>s(c.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:u?o.jsx(Wb,{className:"w-5 h-5"}):o.jsx(Un,{className:"w-5 h-5"})})})]}),u&&o.jsx("tr",{className:"bg-gray-50 dark:bg-gray-900",children:o.jsx("td",{colSpan:"7",className:"px-6 py-4",children:o.jsxs("div",{className:"space-y-4",children:[c.summary&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Review Summary"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.summary})]}),c.sub_agent_reviews&&c.sub_agent_reviews.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:c.sub_agent_reviews.map(f=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[o.jsx("span",{className:"text-sm capitalize text-gray-700 dark:text-gray-300",children:f.sub_agent}),i(f.status)]},f.sub_agent))})]}),c.issues&&c.issues.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Issues Found"}),o.jsx("ul",{className:"space-y-1",children:c.issues.map((f,m)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",f]},m))})]}),c.metadata&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commit"}),o.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:((h=c.commit_sha)==null?void 0:h.substring(0,7))||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.leo_phase||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"False Positive"}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.is_false_positive?"Yes":"No"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Review ID"}),o.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:c.id.substring(0,8)})]})]})]})})})]},c.id)})})]})})}function WD({metrics:e,reviews:t}){const[n,r]=b.useState("7d"),[s,i]=b.useState("overview"),a=b.useMemo(()=>{if(!t||t.length===0)return null;const c=new Date,u={"24h":24*60*60*1e3,"7d":7*24*60*60*1e3,"30d":30*24*60*60*1e3},d=c-u[n],h=t.filter(p=>new Date(p.created_at)>=d),f={};h.forEach(p=>{const v=new Date(p.created_at).toLocaleDateString();f[v]||(f[v]={total:0,passed:0,failed:0,warnings:0}),f[v].total++,p.status==="passed"?f[v].passed++:p.status==="failed"?f[v].failed++:p.status==="warning"&&f[v].warnings++});const m={};return h.forEach(p=>{p.sub_agent_reviews&&p.sub_agent_reviews.forEach(v=>{m[v.sub_agent]||(m[v.sub_agent]={total:0,passed:0,failed:0,avgTime:[]}),m[v.sub_agent].total++,v.status==="passed"?m[v.sub_agent].passed++:m[v.sub_agent].failed++,v.review_time_ms&&m[v.sub_agent].avgTime.push(v.review_time_ms)})}),Object.keys(m).forEach(p=>{const v=m[p];v.passRate=(v.passed/v.total*100).toFixed(1),v.avgTime.length>0&&(v.avgTimeMs=v.avgTime.reduce((w,y)=>w+y,0)/v.avgTime.length)}),{dailyData:Object.entries(f).slice(-7),subAgentStats:m,totalReviews:h.length,passRate:h.length>0?(h.filter(p=>p.status==="passed").length/h.length*100).toFixed(1):0}},[t,n]),l=[{id:"compliance",title:"Compliance Rate",value:`${e.complianceRate}%`,target:"95%",status:e.complianceRate>=95?"good":"warning",description:"SD/PRD linkage compliance"},{id:"false-positive",title:"False Positive Rate",value:`${e.falsePositiveRate}%`,target:"<15%",status:e.falsePositiveRate<=15?"good":"warning",description:"Reviews marked as false positives"},{id:"avg-time",title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,target:"<5s",status:e.avgTime<5e3?"good":"warning",description:"Average time per review"},{id:"coverage",title:"Coverage",value:`${(a==null?void 0:a.totalReviews)||0}`,target:"PRs",status:"neutral",description:`Reviews in ${n}`}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Metrics"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("select",{value:n,onChange:c=>r(c.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[o.jsx("option",{value:"24h",children:"Last 24 Hours"}),o.jsx("option",{value:"7d",children:"Last 7 Days"}),o.jsx("option",{value:"30d",children:"Last 30 Days"})]}),o.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Export Metrics",children:o.jsx(AC,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(c=>o.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.title}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.value})]}),o.jsx("div",{className:`
                p-2 rounded-lg
                ${c.status==="good"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":c.status==="warning"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}
              `,children:c.status==="good"?o.jsx(pr,{className:"w-4 h-4"}):c.status==="warning"?o.jsx(Or,{className:"w-4 h-4"}):o.jsx(xm,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Target: ",c.target]}),o.jsx("span",{className:"text-gray-400 dark:text-gray-500",title:c.description,children:o.jsx(Tn,{className:"w-3 h-3"})})]})]},c.id))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[o.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(PC,{className:"w-5 h-5 mr-2"}),"Daily Review Trend"]}),a!=null&&a.dailyData&&a.dailyData.length>0?o.jsxs("div",{className:"space-y-3",children:[a.dailyData.map(([c,u])=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),o.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[o.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 overflow-hidden",children:o.jsxs("div",{className:"h-full flex",children:[o.jsx("div",{className:"bg-green-500 transition-all duration-300",style:{width:`${u.passed/u.total*100}%`}}),o.jsx("div",{className:"bg-red-500 transition-all duration-300",style:{width:`${u.failed/u.total*100}%`}}),o.jsx("div",{className:"bg-yellow-500 transition-all duration-300",style:{width:`${u.warnings/u.total*100}%`}})]})}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 w-10",children:u.total})]})]},c)),o.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Passed"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Failed"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Warnings"})]})]})]}):o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available for selected period"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[o.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(BC,{className:"w-5 h-5 mr-2"}),"Sub-Agent Performance"]}),a!=null&&a.subAgentStats&&Object.keys(a.subAgentStats).length>0?o.jsx("div",{className:"space-y-3",children:Object.entries(a.subAgentStats).map(([c,u])=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:c}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[u.total," reviews"]}),o.jsxs("span",{className:`font-medium ${parseFloat(u.passRate)>=85?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:[u.passRate,"% pass"]})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${parseFloat(u.passRate)>=85?"bg-green-500":"bg-yellow-500"}`,style:{width:`${u.passRate}%`}})}),u.avgTimeMs&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg time: ",(u.avgTimeMs/1e3).toFixed(1),"s"]})]},c))}):o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No sub-agent data available"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"System Health Summary"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),o.jsx("p",{className:`text-lg font-semibold ${e.falsePositiveRate<=15&&e.complianceRate>=95?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:e.falsePositiveRate<=15&&e.complianceRate>=95?"Healthy":"Needs Attention"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Reviews"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.totalToday})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pass Rate Trend"}),o.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(a==null?void 0:a.passRate)||e.passRate,"%",(a==null?void 0:a.passRate)>e.passRate?o.jsx(pr,{className:"w-4 h-4 ml-2 text-green-500"}):o.jsx(Or,{className:"w-4 h-4 ml-2 text-red-500"})]})]})]})]})]})}function qD({state:e,isConnected:t,refreshData:n}){const[r,s]=b.useState([]),[i,a]=b.useState({totalToday:0,passRate:0,avgTime:0,falsePositiveRate:0,complianceRate:0}),[l,c]=b.useState(!0),[u,d]=b.useState("active"),[h,f]=b.useState("all");b.useEffect(()=>{m(),p()},[]),b.useEffect(()=>{e!=null&&e.prReviews&&(e.prReviews.reviews&&s(e.prReviews.reviews),e.prReviews.metrics&&a(e.prReviews.metrics))},[e==null?void 0:e.prReviews]);const m=async()=>{try{const S=await(await fetch("/api/pr-reviews")).json();s(S||[])}catch(x){console.error("Failed to load PR reviews:",x)}finally{c(!1)}},p=async()=>{try{const S=await(await fetch("/api/pr-reviews/metrics")).json();a(S)}catch(x){console.error("Failed to load metrics:",x)}},v=async()=>{c(!0),await Promise.all([m(),p()]),c(!1)},w=r.filter(x=>x.status==="pending");r.filter(x=>x.status!=="pending");const y=h==="all"?r:r.filter(x=>x.status===h),g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Y.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(bm,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"PR Reviews"}),t&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300",children:"Live"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:v,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Refresh",children:o.jsx(_s,{className:`w-5 h-5 ${l?"animate-spin":""}`})}),o.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Settings",children:o.jsx(WC,{className:"w-5 h-5"})})]})]}),o.jsx(UD,{metrics:i,activeCount:w.length,totalReviews:r.length}),o.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:o.jsx("nav",{className:"-mb-px flex space-x-8",children:["active","history","metrics"].map(x=>o.jsxs("button",{onClick:()=>d(x),className:`
                py-2 px-1 border-b-2 font-medium text-sm capitalize
                ${u===x?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
              `,children:[x==="active"&&`Active (${w.length})`,x==="history"&&"Review History",x==="metrics"&&"Metrics & Trends"]},x))})}),o.jsxs(Y.div,{variants:g,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:[u==="active"&&o.jsx(BD,{reviews:w,loading:l}),u==="history"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filter:"}),o.jsxs("select",{value:h,onChange:x=>f(x.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[o.jsx("option",{value:"all",children:"All Reviews"}),o.jsx("option",{value:"passed",children:"Passed"}),o.jsx("option",{value:"failed",children:"Failed"}),o.jsx("option",{value:"warning",children:"Warnings"})]}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",y.length," reviews"]})]}),o.jsx(HD,{reviews:y.filter(x=>x.status!=="pending"),loading:l})]}),u==="metrics"&&o.jsx(WD,{metrics:i,reviews:r})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(xm,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.totalToday," reviews today"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(st,{className:"w-4 h-4 text-green-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.passRate,"% pass rate"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rn,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[(i.avgTime/1e3).toFixed(1),"s avg time"]})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:i.falsePositiveRate>15?o.jsxs("span",{className:"flex items-center space-x-1 text-sm text-yellow-600 dark:text-yellow-400",children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"High false positive rate"})]}):o.jsxs("span",{className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400",children:[o.jsx(st,{className:"w-4 h-4"}),o.jsx("span",{children:"System healthy"})]})})]})]})}const Yo=window.location.hostname==="localhost",sa={log:(...e)=>{Yo&&console.log(...e)},error:(...e)=>{console.error(...e)},warn:(...e)=>{Yo&&console.warn(...e)},info:(...e)=>{Yo&&console.info(...e)},debug:(...e)=>{Yo&&console.debug(...e)}};function GD(){var S,E;const[e,t]=b.useState({leoProtocol:{version:"detecting...",activeRole:null,currentSD:null,currentPRD:null,phase:null},context:{usage:0,total:18e4,breakdown:{}},handoffs:[],strategicDirectives:[],prds:[],checklists:{},progress:{overall:0,byPhase:{}}}),[n,r]=b.useState(!1),[s,i]=b.useState(!1),{preferences:a}=G2(),[l,c]=lu("checklists",{}),[u,d]=lu("sidebarCollapsed",!1),[h,f]=lu("compactMode",!1),m=q2("ws://localhost:3000",{onOpen:()=>{r(!0),sa.log("Connected to dashboard server")},onMessage:j=>{try{const P=JSON.parse(j.data);P.type==="state"&&t(P.data)}catch(P){sa.error("Error parsing WebSocket message:",P)}},onClose:()=>{r(!1),sa.log("Disconnected from dashboard server")},onError:j=>{sa.error("WebSocket error:",j)}});b.useEffect(()=>{fetch("/api/state").then(j=>j.json()).then(j=>{const P={...j,checklists:{...j.checklists,...l}};t(P)}).catch(j=>sa.error("Error loading state:",j))},[]),b.useEffect(()=>{Object.keys(e.checklists).length>0&&c(e.checklists)},[e.checklists]),b.useEffect(()=>{a.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[a.theme]);const p=()=>{m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"refresh"}))},v=(j,P,C)=>{m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"updateChecklist",data:{documentId:j,itemIndex:P,checked:C}}))},w=(j,P)=>{m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"requestHandoff",data:{type:j,checklist:P}}))},y=()=>{m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"compactContext"}))},g=j=>{t(P=>({...P,leoProtocol:{...P.leoProtocol,currentSD:j}})),m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"setActiveSD",data:{sdId:j}}))},x=(j,P)=>{t(C=>({...C,strategicDirectives:C.strategicDirectives.map(O=>O.id===j?{...O,status:P}:O)})),m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"updateSDStatus",data:{sdId:j,status:P}}))};return o.jsx(F2,{children:o.jsx(A2,{children:o.jsxs(At,{path:"/",element:o.jsx(nT,{state:e,isConnected:n,isSidebarCollapsed:u,setIsSidebarCollapsed:d,isCompactMode:h,setIsCompactMode:f,isMobileMenuOpen:s,setIsMobileMenuOpen:i,updateChecklist:v,requestHandoff:w,compactContext:y,refreshData:p,setActiveSD:g}),children:[o.jsx(At,{index:!0,element:o.jsx(G3,{state:e,onRefresh:p,onSetActiveSD:g,isCompact:h})}),o.jsxs(At,{path:"strategic-directives",children:[o.jsx(At,{index:!0,element:o.jsx(Fy,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:g,onUpdateStatus:x,currentSD:(S=e.leoProtocol)==null?void 0:S.currentSD,isCompact:h,onRefresh:p})}),o.jsx(At,{path:":id",element:o.jsx(Fy,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:g,onUpdateStatus:x,currentSD:(E=e.leoProtocol)==null?void 0:E.currentSD,isCompact:h,detailMode:!0,onRefresh:p})})]}),o.jsxs(At,{path:"prds",children:[o.jsx(At,{index:!0,element:o.jsx(Vy,{prds:e.prds,isCompact:h})}),o.jsx(At,{path:":id",element:o.jsx(Vy,{prds:e.prds,isCompact:h,detailMode:!0})})]}),o.jsxs(At,{path:"backlog",children:[o.jsx(At,{index:!0,element:o.jsx(zy,{strategicDirectives:e.strategicDirectives,isCompact:h,onRefresh:p})}),o.jsx(At,{path:":id",element:o.jsx(zy,{strategicDirectives:e.strategicDirectives,isCompact:h,detailMode:!0,onRefresh:p})})]}),o.jsx(At,{path:"directive-lab",element:o.jsx(zD,{state:e,onRefresh:p,isCompact:h})}),o.jsx(At,{path:"pr-reviews",element:o.jsx(qD,{state:e,isConnected:n,refreshData:p})}),o.jsx(At,{path:"*",element:o.jsx(P2,{to:"/",replace:!0})})]})})})}class KD extends ao.Component{constructor(n){super(n);Dc(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});Dc(this,"handleHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){window.location.hostname==="localhost"&&console.error("ErrorBoundary caught:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Kt,{className:"w-8 h-8 text-red-500 mr-3"}),o.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Something went wrong"})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We encountered an unexpected error. The application may not work correctly."}),window.location.hostname==="localhost"&&o.jsxs("details",{className:"mb-4",children:[o.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Error details (development only)"}),o.jsxs("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto",children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(_s,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),o.jsxs("button",{onClick:this.handleHome,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[o.jsx(km,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}Ku.createRoot(document.getElementById("root")).render(o.jsx(ao.StrictMode,{children:o.jsx(KD,{children:o.jsx(GD,{})})}));
//# sourceMappingURL=index-CRvBMeyo.js.map
