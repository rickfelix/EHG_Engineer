var c1=Object.defineProperty;var u1=(e,t,n)=>t in e?c1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Lc=(e,t,n)=>u1(e,typeof t!="symbol"?t+"":t,n);function d1(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var zy={exports:{}},tc={},Uy={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=Symbol.for("react.element"),f1=Symbol.for("react.portal"),p1=Symbol.for("react.fragment"),m1=Symbol.for("react.strict_mode"),g1=Symbol.for("react.profiler"),y1=Symbol.for("react.provider"),x1=Symbol.for("react.context"),v1=Symbol.for("react.forward_ref"),w1=Symbol.for("react.suspense"),b1=Symbol.for("react.memo"),k1=Symbol.for("react.lazy"),Yp=Symbol.iterator;function j1(e){return e===null||typeof e!="object"?null:(e=Yp&&e[Yp]||e["@@iterator"],typeof e=="function"?e:null)}var By={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hy=Object.assign,Wy={};function Ai(e,t,n){this.props=e,this.context=t,this.refs=Wy,this.updater=n||By}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ai.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qy(){}qy.prototype=Ai.prototype;function zh(e,t,n){this.props=e,this.context=t,this.refs=Wy,this.updater=n||By}var Uh=zh.prototype=new qy;Uh.constructor=zh;Hy(Uh,Ai.prototype);Uh.isPureReactComponent=!0;var Qp=Array.isArray,Ky=Object.prototype.hasOwnProperty,Bh={current:null},Gy={key:!0,ref:!0,__self:!0,__source:!0};function Xy(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Ky.call(t,r)&&!Gy.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:so,type:e,key:i,ref:a,props:s,_owner:Bh.current}}function S1(e,t){return{$$typeof:so,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Hh(e){return typeof e=="object"&&e!==null&&e.$$typeof===so}function N1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jp=/\/+/g;function Oc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?N1(""+e.key):t.toString(36)}function Qo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case so:case f1:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Oc(a,0):r,Qp(s)?(n="",e!=null&&(n=e.replace(Jp,"$&/")+"/"),Qo(s,t,n,"",function(u){return u})):s!=null&&(Hh(s)&&(s=S1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Jp,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Qp(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Oc(i,l);a+=Qo(i,t,n,c,s)}else if(c=j1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Oc(i,l++),a+=Qo(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function bo(e,t,n){if(e==null)return e;var r=[],s=0;return Qo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function _1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $t={current:null},Jo={transition:null},E1={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Jo,ReactCurrentOwner:Bh};function Yy(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:bo,forEach:function(e,t,n){bo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bo(e,function(){t++}),t},toArray:function(e){return bo(e,function(t){return t})||[]},only:function(e){if(!Hh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Ai;we.Fragment=p1;we.Profiler=g1;we.PureComponent=zh;we.StrictMode=m1;we.Suspense=w1;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E1;we.act=Yy;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Hy({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Bh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Ky.call(t,c)&&!Gy.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:so,type:e.type,key:s,ref:i,props:r,_owner:a}};we.createContext=function(e){return e={$$typeof:x1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:y1,_context:e},e.Consumer=e};we.createElement=Xy;we.createFactory=function(e){var t=Xy.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:v1,render:e}};we.isValidElement=Hh;we.lazy=function(e){return{$$typeof:k1,_payload:{_status:-1,_result:e},_init:_1}};we.memo=function(e,t){return{$$typeof:b1,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=Jo.transition;Jo.transition={};try{e()}finally{Jo.transition=t}};we.unstable_act=Yy;we.useCallback=function(e,t){return $t.current.useCallback(e,t)};we.useContext=function(e){return $t.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return $t.current.useDeferredValue(e)};we.useEffect=function(e,t){return $t.current.useEffect(e,t)};we.useId=function(){return $t.current.useId()};we.useImperativeHandle=function(e,t,n){return $t.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return $t.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return $t.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return $t.current.useMemo(e,t)};we.useReducer=function(e,t,n){return $t.current.useReducer(e,t,n)};we.useRef=function(e){return $t.current.useRef(e)};we.useState=function(e){return $t.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return $t.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return $t.current.useTransition()};we.version="18.3.1";Uy.exports=we;var b=Uy.exports;const io=Vh(b),P1=d1({__proto__:null,default:io},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1=b,T1=Symbol.for("react.element"),A1=Symbol.for("react.fragment"),R1=Object.prototype.hasOwnProperty,I1=C1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D1={key:!0,ref:!0,__self:!0,__source:!0};function Qy(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)R1.call(t,r)&&!D1.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:T1,type:e,key:i,ref:a,props:s,_owner:I1.current}}tc.Fragment=A1;tc.jsx=Qy;tc.jsxs=Qy;zy.exports=tc;var o=zy.exports,Yu={},Jy={exports:{}},an={},Zy={exports:{}},ex={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,z){var k=C.length;C.push(z);e:for(;0<k;){var Q=k-1>>>1,Z=C[Q];if(0<s(Z,z))C[Q]=z,C[k]=Z,k=Q;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var z=C[0],k=C.pop();if(k!==z){C[0]=k;e:for(var Q=0,Z=C.length,_=Z>>>1;Q<_;){var je=2*(Q+1)-1,at=C[je],N=je+1,J=C[N];if(0>s(at,k))N<Z&&0>s(J,at)?(C[Q]=J,C[N]=k,Q=N):(C[Q]=at,C[je]=k,Q=je);else if(N<Z&&0>s(J,k))C[Q]=J,C[N]=k,Q=N;else break e}}return z}function s(C,z){var k=C.sortIndex-z.sortIndex;return k!==0?k:C.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(C){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=C)r(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(u)}}function S(C){if(v=!1,y(C),!m)if(n(c)!==null)m=!0,H(E);else{var z=n(u);z!==null&&A(S,z.startTime-C)}}function E(C,z){m=!1,v&&(v=!1,g(T),T=-1),f=!0;var k=p;try{for(y(z),h=n(c);h!==null&&(!(h.expirationTime>z)||C&&!F());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,p=h.priorityLevel;var Z=Q(h.expirationTime<=z);z=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(c)&&r(c),y(z)}else r(c);h=n(c)}if(h!==null)var _=!0;else{var je=n(u);je!==null&&A(S,je.startTime-z),_=!1}return _}finally{h=null,p=k,f=!1}}var j=!1,P=null,T=-1,$=5,L=-1;function F(){return!(e.unstable_now()-L<$)}function q(){if(P!==null){var C=e.unstable_now();L=C;var z=!0;try{z=P(!0,C)}finally{z?he():(j=!1,P=null)}}else j=!1}var he;if(typeof x=="function")he=function(){x(q)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,I=O.port2;O.port1.onmessage=q,he=function(){I.postMessage(null)}}else he=function(){w(q,0)};function H(C){P=C,j||(j=!0,he())}function A(C,z){T=w(function(){C(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,H(E))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(C){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var k=p;p=z;try{return C()}finally{p=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,z){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var k=p;p=C;try{return z()}finally{p=k}},e.unstable_scheduleCallback=function(C,z,k){var Q=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?Q+k:Q):k=Q,C){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=k+Z,C={id:d++,callback:z,priorityLevel:C,startTime:k,expirationTime:Z,sortIndex:-1},k>Q?(C.sortIndex=k,t(u,C),n(c)===null&&C===n(u)&&(v?(g(T),T=-1):v=!0,A(S,k-Q))):(C.sortIndex=Z,t(c,C),m||f||(m=!0,H(E))),C},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(C){var z=p;return function(){var k=p;p=z;try{return C.apply(this,arguments)}finally{p=k}}}})(ex);Zy.exports=ex;var L1=Zy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=b,sn=L1;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tx=new Set,Ta={};function Ds(e,t){wi(e,t),wi(e+"Capture",t)}function wi(e,t){for(Ta[e]=t,e=0;e<t.length;e++)tx.add(t[e])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qu=Object.prototype.hasOwnProperty,$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zp={},em={};function M1(e){return Qu.call(em,e)?!0:Qu.call(Zp,e)?!1:$1.test(e)?em[e]=!0:(Zp[e]=!0,!1)}function F1(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function V1(e,t,n,r){if(t===null||typeof t>"u"||F1(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mt(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bt[e]=new Mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bt[t]=new Mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bt[e]=new Mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bt[e]=new Mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bt[e]=new Mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bt[e]=new Mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bt[e]=new Mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bt[e]=new Mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bt[e]=new Mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wh=/[\-:]([a-z])/g;function qh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wh,qh);bt[t]=new Mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wh,qh);bt[t]=new Mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wh,qh);bt[t]=new Mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Kh(e,t,n,r){var s=bt.hasOwnProperty(t)?bt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(V1(t,n,s,r)&&(n=null),r||s===null?M1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gr=O1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ko=Symbol.for("react.element"),Ks=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),Gh=Symbol.for("react.strict_mode"),Ju=Symbol.for("react.profiler"),nx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),Xh=Symbol.for("react.forward_ref"),Zu=Symbol.for("react.suspense"),ed=Symbol.for("react.suspense_list"),Yh=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),sx=Symbol.for("react.offscreen"),tm=Symbol.iterator;function Wi(e){return e===null||typeof e!="object"?null:(e=tm&&e[tm]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,$c;function sa(e){if($c===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$c=t&&t[1]||""}return`
`+$c+e}var Mc=!1;function Fc(e,t){if(!e||Mc)return"";Mc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Mc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?sa(e):""}function z1(e){switch(e.tag){case 5:return sa(e.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return e=Fc(e.type,!1),e;case 11:return e=Fc(e.type.render,!1),e;case 1:return e=Fc(e.type,!0),e;default:return""}}function td(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gs:return"Fragment";case Ks:return"Portal";case Ju:return"Profiler";case Gh:return"StrictMode";case Zu:return"Suspense";case ed:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rx:return(e.displayName||"Context")+".Consumer";case nx:return(e._context.displayName||"Context")+".Provider";case Xh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yh:return t=e.displayName||null,t!==null?t:td(e.type)||"Memo";case Er:t=e._payload,e=e._init;try{return td(e(t))}catch{}}return null}function U1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return td(t);case 8:return t===Gh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ix(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function B1(e){var t=ix(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jo(e){e._valueTracker||(e._valueTracker=B1(e))}function ax(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ix(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nd(e,t){var n=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nm(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ox(e,t){t=t.checked,t!=null&&Kh(e,"checked",t,!1)}function rd(e,t){ox(e,t);var n=qr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sd(e,t.type,n):t.hasOwnProperty("defaultValue")&&sd(e,t.type,qr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function sd(e,t,n){(t!=="number"||gl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ia=Array.isArray;function di(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function id(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(U(92));if(ia(n)){if(1<n.length)throw Error(U(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qr(n)}}function lx(e,t){var n=qr(t.value),r=qr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function im(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ad(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var So,ux=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(So=So||document.createElement("div"),So.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=So.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Aa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ua={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H1=["Webkit","ms","Moz","O"];Object.keys(ua).forEach(function(e){H1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ua[t]=ua[e]})});function dx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ua.hasOwnProperty(e)&&ua[e]?(""+t).trim():t+"px"}function hx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var W1=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(e,t){if(t){if(W1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function ld(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cd=null;function Qh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ud=null,hi=null,fi=null;function am(e){if(e=lo(e)){if(typeof ud!="function")throw Error(U(280));var t=e.stateNode;t&&(t=ac(t),ud(e.stateNode,e.type,t))}}function fx(e){hi?fi?fi.push(e):fi=[e]:hi=e}function px(){if(hi){var e=hi,t=fi;if(fi=hi=null,am(e),t)for(e=0;e<t.length;e++)am(t[e])}}function mx(e,t){return e(t)}function gx(){}var Vc=!1;function yx(e,t,n){if(Vc)return e(t,n);Vc=!0;try{return mx(e,t,n)}finally{Vc=!1,(hi!==null||fi!==null)&&(gx(),px())}}function Ra(e,t){var n=e.stateNode;if(n===null)return null;var r=ac(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var dd=!1;if(cr)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){dd=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{dd=!1}function q1(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var da=!1,yl=null,xl=!1,hd=null,K1={onError:function(e){da=!0,yl=e}};function G1(e,t,n,r,s,i,a,l,c){da=!1,yl=null,q1.apply(K1,arguments)}function X1(e,t,n,r,s,i,a,l,c){if(G1.apply(this,arguments),da){if(da){var u=yl;da=!1,yl=null}else throw Error(U(198));xl||(xl=!0,hd=u)}}function Ls(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function om(e){if(Ls(e)!==e)throw Error(U(188))}function Y1(e){var t=e.alternate;if(!t){if(t=Ls(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return om(s),e;if(i===r)return om(s),t;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function vx(e){return e=Y1(e),e!==null?wx(e):null}function wx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wx(e);if(t!==null)return t;e=e.sibling}return null}var bx=sn.unstable_scheduleCallback,lm=sn.unstable_cancelCallback,Q1=sn.unstable_shouldYield,J1=sn.unstable_requestPaint,Xe=sn.unstable_now,Z1=sn.unstable_getCurrentPriorityLevel,Jh=sn.unstable_ImmediatePriority,kx=sn.unstable_UserBlockingPriority,vl=sn.unstable_NormalPriority,ej=sn.unstable_LowPriority,jx=sn.unstable_IdlePriority,nc=null,Hn=null;function tj(e){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(nc,e,void 0,(e.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:sj,nj=Math.log,rj=Math.LN2;function sj(e){return e>>>=0,e===0?32:31-(nj(e)/rj|0)|0}var No=64,_o=4194304;function aa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=aa(l):(i&=a,i!==0&&(r=aa(i)))}else a=n&~s,a!==0?r=aa(a):i!==0&&(r=aa(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tn(t),s=1<<n,r|=e[n],t&=~s;return r}function ij(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Tn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=ij(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function fd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Sx(){var e=No;return No<<=1,!(No&4194240)&&(No=64),e}function zc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ao(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tn(t),e[t]=n}function oj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Tn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Zh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var _e=0;function Nx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _x,ef,Ex,Px,Cx,pd=!1,Eo=[],Or=null,$r=null,Mr=null,Ia=new Map,Da=new Map,Cr=[],lj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cm(e,t){switch(e){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Ia.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(t.pointerId)}}function Ki(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=lo(t),t!==null&&ef(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cj(e,t,n,r,s){switch(t){case"focusin":return Or=Ki(Or,e,t,n,r,s),!0;case"dragenter":return $r=Ki($r,e,t,n,r,s),!0;case"mouseover":return Mr=Ki(Mr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ia.set(i,Ki(Ia.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Da.set(i,Ki(Da.get(i)||null,e,t,n,r,s)),!0}return!1}function Tx(e){var t=ys(e.target);if(t!==null){var n=Ls(t);if(n!==null){if(t=n.tag,t===13){if(t=xx(n),t!==null){e.blockedOn=t,Cx(e.priority,function(){Ex(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=md(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);cd=r,n.target.dispatchEvent(r),cd=null}else return t=lo(n),t!==null&&ef(t),e.blockedOn=n,!1;t.shift()}return!0}function um(e,t,n){Zo(e)&&n.delete(t)}function uj(){pd=!1,Or!==null&&Zo(Or)&&(Or=null),$r!==null&&Zo($r)&&($r=null),Mr!==null&&Zo(Mr)&&(Mr=null),Ia.forEach(um),Da.forEach(um)}function Gi(e,t){e.blockedOn===t&&(e.blockedOn=null,pd||(pd=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,uj)))}function La(e){function t(s){return Gi(s,e)}if(0<Eo.length){Gi(Eo[0],e);for(var n=1;n<Eo.length;n++){var r=Eo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Or!==null&&Gi(Or,e),$r!==null&&Gi($r,e),Mr!==null&&Gi(Mr,e),Ia.forEach(t),Da.forEach(t),n=0;n<Cr.length;n++)r=Cr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)Tx(n),n.blockedOn===null&&Cr.shift()}var pi=gr.ReactCurrentBatchConfig,bl=!0;function dj(e,t,n,r){var s=_e,i=pi.transition;pi.transition=null;try{_e=1,tf(e,t,n,r)}finally{_e=s,pi.transition=i}}function hj(e,t,n,r){var s=_e,i=pi.transition;pi.transition=null;try{_e=4,tf(e,t,n,r)}finally{_e=s,pi.transition=i}}function tf(e,t,n,r){if(bl){var s=md(e,t,n,r);if(s===null)Qc(e,t,r,kl,n),cm(e,r);else if(cj(s,e,t,n,r))r.stopPropagation();else if(cm(e,r),t&4&&-1<lj.indexOf(e)){for(;s!==null;){var i=lo(s);if(i!==null&&_x(i),i=md(e,t,n,r),i===null&&Qc(e,t,r,kl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qc(e,t,r,null,n)}}var kl=null;function md(e,t,n,r){if(kl=null,e=Qh(r),e=ys(e),e!==null)if(t=Ls(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return kl=e,null}function Ax(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z1()){case Jh:return 1;case kx:return 4;case vl:case ej:return 16;case jx:return 536870912;default:return 16}default:return 16}}var Rr=null,nf=null,el=null;function Rx(){if(el)return el;var e,t=nf,n=t.length,r,s="value"in Rr?Rr.value:Rr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return el=s.slice(e,1<r?1-r:void 0)}function tl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Po(){return!0}function dm(){return!1}function on(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Po:dm,this.isPropagationStopped=dm,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),t}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rf=on(Ri),oo=Be({},Ri,{view:0,detail:0}),fj=on(oo),Uc,Bc,Xi,rc=Be({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xi&&(Xi&&e.type==="mousemove"?(Uc=e.screenX-Xi.screenX,Bc=e.screenY-Xi.screenY):Bc=Uc=0,Xi=e),Uc)},movementY:function(e){return"movementY"in e?e.movementY:Bc}}),hm=on(rc),pj=Be({},rc,{dataTransfer:0}),mj=on(pj),gj=Be({},oo,{relatedTarget:0}),Hc=on(gj),yj=Be({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),xj=on(yj),vj=Be({},Ri,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wj=on(vj),bj=Be({},Ri,{data:0}),fm=on(bj),kj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sj[e])?!!t[e]:!1}function sf(){return Nj}var _j=Be({},oo,{key:function(e){if(e.key){var t=kj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sf,charCode:function(e){return e.type==="keypress"?tl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ej=on(_j),Pj=Be({},rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pm=on(Pj),Cj=Be({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sf}),Tj=on(Cj),Aj=Be({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rj=on(Aj),Ij=Be({},rc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dj=on(Ij),Lj=[9,13,27,32],af=cr&&"CompositionEvent"in window,ha=null;cr&&"documentMode"in document&&(ha=document.documentMode);var Oj=cr&&"TextEvent"in window&&!ha,Ix=cr&&(!af||ha&&8<ha&&11>=ha),mm=" ",gm=!1;function Dx(e,t){switch(e){case"keyup":return Lj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xs=!1;function $j(e,t){switch(e){case"compositionend":return Lx(t);case"keypress":return t.which!==32?null:(gm=!0,mm);case"textInput":return e=t.data,e===mm&&gm?null:e;default:return null}}function Mj(e,t){if(Xs)return e==="compositionend"||!af&&Dx(e,t)?(e=Rx(),el=nf=Rr=null,Xs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ix&&t.locale!=="ko"?null:t.data;default:return null}}var Fj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ym(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fj[e.type]:t==="textarea"}function Ox(e,t,n,r){fx(r),t=jl(t,"onChange"),0<t.length&&(n=new rf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var fa=null,Oa=null;function Vj(e){Kx(e,0)}function sc(e){var t=Js(e);if(ax(t))return e}function zj(e,t){if(e==="change")return t}var $x=!1;if(cr){var Wc;if(cr){var qc="oninput"in document;if(!qc){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),qc=typeof xm.oninput=="function"}Wc=qc}else Wc=!1;$x=Wc&&(!document.documentMode||9<document.documentMode)}function vm(){fa&&(fa.detachEvent("onpropertychange",Mx),Oa=fa=null)}function Mx(e){if(e.propertyName==="value"&&sc(Oa)){var t=[];Ox(t,Oa,e,Qh(e)),yx(Vj,t)}}function Uj(e,t,n){e==="focusin"?(vm(),fa=t,Oa=n,fa.attachEvent("onpropertychange",Mx)):e==="focusout"&&vm()}function Bj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sc(Oa)}function Hj(e,t){if(e==="click")return sc(t)}function Wj(e,t){if(e==="input"||e==="change")return sc(t)}function qj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var In=typeof Object.is=="function"?Object.is:qj;function $a(e,t){if(In(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qu.call(t,s)||!In(e[s],t[s]))return!1}return!0}function wm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bm(e,t){var n=wm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wm(n)}}function Fx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vx(){for(var e=window,t=gl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gl(e.document)}return t}function of(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kj(e){var t=Vx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Fx(n.ownerDocument.documentElement,n)){if(r!==null&&of(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=bm(n,i);var a=bm(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gj=cr&&"documentMode"in document&&11>=document.documentMode,Ys=null,gd=null,pa=null,yd=!1;function km(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yd||Ys==null||Ys!==gl(r)||(r=Ys,"selectionStart"in r&&of(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pa&&$a(pa,r)||(pa=r,r=jl(gd,"onSelect"),0<r.length&&(t=new rf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ys)))}function Co(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qs={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionend:Co("Transition","TransitionEnd")},Kc={},zx={};cr&&(zx=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function ic(e){if(Kc[e])return Kc[e];if(!Qs[e])return e;var t=Qs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zx)return Kc[e]=t[n];return e}var Ux=ic("animationend"),Bx=ic("animationiteration"),Hx=ic("animationstart"),Wx=ic("transitionend"),qx=new Map,jm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(e,t){qx.set(e,t),Ds(t,[e])}for(var Gc=0;Gc<jm.length;Gc++){var Xc=jm[Gc],Xj=Xc.toLowerCase(),Yj=Xc[0].toUpperCase()+Xc.slice(1);Qr(Xj,"on"+Yj)}Qr(Ux,"onAnimationEnd");Qr(Bx,"onAnimationIteration");Qr(Hx,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(Wx,"onTransitionEnd");wi("onMouseEnter",["mouseout","mouseover"]);wi("onMouseLeave",["mouseout","mouseover"]);wi("onPointerEnter",["pointerout","pointerover"]);wi("onPointerLeave",["pointerout","pointerover"]);Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qj=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function Sm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,X1(r,t,void 0,e),e.currentTarget=null}function Kx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Sm(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Sm(s,l,u),i=c}}}if(xl)throw e=hd,xl=!1,hd=null,e}function Ie(e,t){var n=t[kd];n===void 0&&(n=t[kd]=new Set);var r=e+"__bubble";n.has(r)||(Gx(t,e,2,!1),n.add(r))}function Yc(e,t,n){var r=0;t&&(r|=4),Gx(n,e,r,t)}var To="_reactListening"+Math.random().toString(36).slice(2);function Ma(e){if(!e[To]){e[To]=!0,tx.forEach(function(n){n!=="selectionchange"&&(Qj.has(n)||Yc(n,!1,e),Yc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[To]||(t[To]=!0,Yc("selectionchange",!1,t))}}function Gx(e,t,n,r){switch(Ax(t)){case 1:var s=dj;break;case 4:s=hj;break;default:s=tf}n=s.bind(null,t,n,e),s=void 0,!dd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Qc(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ys(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}yx(function(){var u=i,d=Qh(n),h=[];e:{var p=qx.get(e);if(p!==void 0){var f=rf,m=e;switch(e){case"keypress":if(tl(n)===0)break e;case"keydown":case"keyup":f=Ej;break;case"focusin":m="focus",f=Hc;break;case"focusout":m="blur",f=Hc;break;case"beforeblur":case"afterblur":f=Hc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=mj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Tj;break;case Ux:case Bx:case Hx:f=xj;break;case Wx:f=Rj;break;case"scroll":f=fj;break;case"wheel":f=Dj;break;case"copy":case"cut":case"paste":f=wj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=pm}var v=(t&4)!==0,w=!v&&e==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var x=u,y;x!==null;){y=x;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,g!==null&&(S=Ra(x,g),S!=null&&v.push(Fa(x,S,y)))),w)break;x=x.return}0<v.length&&(p=new f(p,m,null,n,d),h.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&n!==cd&&(m=n.relatedTarget||n.fromElement)&&(ys(m)||m[ur]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=u,m=m?ys(m):null,m!==null&&(w=Ls(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(v=hm,S="onMouseLeave",g="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=pm,S="onPointerLeave",g="onPointerEnter",x="pointer"),w=f==null?p:Js(f),y=m==null?p:Js(m),p=new v(S,x+"leave",f,n,d),p.target=w,p.relatedTarget=y,S=null,ys(d)===u&&(v=new v(g,x+"enter",m,n,d),v.target=y,v.relatedTarget=w,S=v),w=S,f&&m)t:{for(v=f,g=m,x=0,y=v;y;y=Ms(y))x++;for(y=0,S=g;S;S=Ms(S))y++;for(;0<x-y;)v=Ms(v),x--;for(;0<y-x;)g=Ms(g),y--;for(;x--;){if(v===g||g!==null&&v===g.alternate)break t;v=Ms(v),g=Ms(g)}v=null}else v=null;f!==null&&Nm(h,p,f,v,!1),m!==null&&w!==null&&Nm(h,w,m,v,!0)}}e:{if(p=u?Js(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var E=zj;else if(ym(p))if($x)E=Wj;else{E=Bj;var j=Uj}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=Hj);if(E&&(E=E(e,u))){Ox(h,E,n,d);break e}j&&j(e,p,u),e==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&sd(p,"number",p.value)}switch(j=u?Js(u):window,e){case"focusin":(ym(j)||j.contentEditable==="true")&&(Ys=j,gd=u,pa=null);break;case"focusout":pa=gd=Ys=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,km(h,n,d);break;case"selectionchange":if(Gj)break;case"keydown":case"keyup":km(h,n,d)}var P;if(af)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Xs?Dx(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Ix&&n.locale!=="ko"&&(Xs||T!=="onCompositionStart"?T==="onCompositionEnd"&&Xs&&(P=Rx()):(Rr=d,nf="value"in Rr?Rr.value:Rr.textContent,Xs=!0)),j=jl(u,T),0<j.length&&(T=new fm(T,e,null,n,d),h.push({event:T,listeners:j}),P?T.data=P:(P=Lx(n),P!==null&&(T.data=P)))),(P=Oj?$j(e,n):Mj(e,n))&&(u=jl(u,"onBeforeInput"),0<u.length&&(d=new fm("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=P))}Kx(h,t)})}function Fa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ra(e,n),i!=null&&r.unshift(Fa(e,i,s)),i=Ra(e,t),i!=null&&r.push(Fa(e,i,s))),e=e.return}return r}function Ms(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nm(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ra(n,i),c!=null&&a.unshift(Fa(n,c,l))):s||(c=Ra(n,i),c!=null&&a.push(Fa(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Jj=/\r\n?/g,Zj=/\u0000|\uFFFD/g;function _m(e){return(typeof e=="string"?e:""+e).replace(Jj,`
`).replace(Zj,"")}function Ao(e,t,n){if(t=_m(t),_m(e)!==t&&n)throw Error(U(425))}function Sl(){}var xd=null,vd=null;function wd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,Em=typeof Promise=="function"?Promise:void 0,tS=typeof queueMicrotask=="function"?queueMicrotask:typeof Em<"u"?function(e){return Em.resolve(null).then(e).catch(nS)}:bd;function nS(e){setTimeout(function(){throw e})}function Jc(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),La(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);La(t)}function Fr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ii=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Ii,Va="__reactProps$"+Ii,ur="__reactContainer$"+Ii,kd="__reactEvents$"+Ii,rS="__reactListeners$"+Ii,sS="__reactHandles$"+Ii;function ys(e){var t=e[Vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ur]||n[Vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pm(e);e!==null;){if(n=e[Vn])return n;e=Pm(e)}return t}e=n,n=e.parentNode}return null}function lo(e){return e=e[Vn]||e[ur],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Js(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function ac(e){return e[Va]||null}var jd=[],Zs=-1;function Jr(e){return{current:e}}function De(e){0>Zs||(e.current=jd[Zs],jd[Zs]=null,Zs--)}function Te(e,t){Zs++,jd[Zs]=e.current,e.current=t}var Kr={},Ct=Jr(Kr),Ht=Jr(!1),Ps=Kr;function bi(e,t){var n=e.type.contextTypes;if(!n)return Kr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Wt(e){return e=e.childContextTypes,e!=null}function Nl(){De(Ht),De(Ct)}function Cm(e,t,n){if(Ct.current!==Kr)throw Error(U(168));Te(Ct,t),Te(Ht,n)}function Xx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(U(108,U1(e)||"Unknown",s));return Be({},n,r)}function _l(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kr,Ps=Ct.current,Te(Ct,e),Te(Ht,Ht.current),!0}function Tm(e,t,n){var r=e.stateNode;if(!r)throw Error(U(169));n?(e=Xx(e,t,Ps),r.__reactInternalMemoizedMergedChildContext=e,De(Ht),De(Ct),Te(Ct,e)):De(Ht),Te(Ht,n)}var sr=null,oc=!1,Zc=!1;function Yx(e){sr===null?sr=[e]:sr.push(e)}function iS(e){oc=!0,Yx(e)}function Zr(){if(!Zc&&sr!==null){Zc=!0;var e=0,t=_e;try{var n=sr;for(_e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}sr=null,oc=!1}catch(s){throw sr!==null&&(sr=sr.slice(e+1)),bx(Jh,Zr),s}finally{_e=t,Zc=!1}}return null}var ei=[],ti=0,El=null,Pl=0,dn=[],hn=0,Cs=null,ir=1,ar="";function ds(e,t){ei[ti++]=Pl,ei[ti++]=El,El=e,Pl=t}function Qx(e,t,n){dn[hn++]=ir,dn[hn++]=ar,dn[hn++]=Cs,Cs=e;var r=ir;e=ar;var s=32-Tn(r)-1;r&=~(1<<s),n+=1;var i=32-Tn(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ir=1<<32-Tn(t)+s|n<<s|r,ar=i+e}else ir=1<<i|n<<s|r,ar=e}function lf(e){e.return!==null&&(ds(e,1),Qx(e,1,0))}function cf(e){for(;e===El;)El=ei[--ti],ei[ti]=null,Pl=ei[--ti],ei[ti]=null;for(;e===Cs;)Cs=dn[--hn],dn[hn]=null,ar=dn[--hn],dn[hn]=null,ir=dn[--hn],dn[hn]=null}var rn=null,tn=null,$e=!1,Pn=null;function Jx(e,t){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Am(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rn=e,tn=Fr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rn=e,tn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Cs!==null?{id:ir,overflow:ar}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rn=e,tn=null,!0):!1;default:return!1}}function Sd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nd(e){if($e){var t=tn;if(t){var n=t;if(!Am(e,t)){if(Sd(e))throw Error(U(418));t=Fr(n.nextSibling);var r=rn;t&&Am(e,t)?Jx(r,n):(e.flags=e.flags&-4097|2,$e=!1,rn=e)}}else{if(Sd(e))throw Error(U(418));e.flags=e.flags&-4097|2,$e=!1,rn=e}}}function Rm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rn=e}function Ro(e){if(e!==rn)return!1;if(!$e)return Rm(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wd(e.type,e.memoizedProps)),t&&(t=tn)){if(Sd(e))throw Zx(),Error(U(418));for(;t;)Jx(e,t),t=Fr(t.nextSibling)}if(Rm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tn=Fr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tn=null}}else tn=rn?Fr(e.stateNode.nextSibling):null;return!0}function Zx(){for(var e=tn;e;)e=Fr(e.nextSibling)}function ki(){tn=rn=null,$e=!1}function uf(e){Pn===null?Pn=[e]:Pn.push(e)}var aS=gr.ReactCurrentBatchConfig;function Yi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,e))}return e}function Io(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Im(e){var t=e._init;return t(e._payload)}function ev(e){function t(g,x){if(e){var y=g.deletions;y===null?(g.deletions=[x],g.flags|=16):y.push(x)}}function n(g,x){if(!e)return null;for(;x!==null;)t(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function s(g,x){return g=Br(g,x),g.index=0,g.sibling=null,g}function i(g,x,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<x?(g.flags|=2,x):y):(g.flags|=2,x)):(g.flags|=1048576,x)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,x,y,S){return x===null||x.tag!==6?(x=au(y,g.mode,S),x.return=g,x):(x=s(x,y),x.return=g,x)}function c(g,x,y,S){var E=y.type;return E===Gs?d(g,x,y.props.children,S,y.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Er&&Im(E)===x.type)?(S=s(x,y.props),S.ref=Yi(g,x,y),S.return=g,S):(S=ll(y.type,y.key,y.props,null,g.mode,S),S.ref=Yi(g,x,y),S.return=g,S)}function u(g,x,y,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=ou(y,g.mode,S),x.return=g,x):(x=s(x,y.children||[]),x.return=g,x)}function d(g,x,y,S,E){return x===null||x.tag!==7?(x=js(y,g.mode,S,E),x.return=g,x):(x=s(x,y),x.return=g,x)}function h(g,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=au(""+x,g.mode,y),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ko:return y=ll(x.type,x.key,x.props,null,g.mode,y),y.ref=Yi(g,null,x),y.return=g,y;case Ks:return x=ou(x,g.mode,y),x.return=g,x;case Er:var S=x._init;return h(g,S(x._payload),y)}if(ia(x)||Wi(x))return x=js(x,g.mode,y,null),x.return=g,x;Io(g,x)}return null}function p(g,x,y,S){var E=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:l(g,x,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ko:return y.key===E?c(g,x,y,S):null;case Ks:return y.key===E?u(g,x,y,S):null;case Er:return E=y._init,p(g,x,E(y._payload),S)}if(ia(y)||Wi(y))return E!==null?null:d(g,x,y,S,null);Io(g,y)}return null}function f(g,x,y,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(y)||null,l(x,g,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ko:return g=g.get(S.key===null?y:S.key)||null,c(x,g,S,E);case Ks:return g=g.get(S.key===null?y:S.key)||null,u(x,g,S,E);case Er:var j=S._init;return f(g,x,y,j(S._payload),E)}if(ia(S)||Wi(S))return g=g.get(y)||null,d(x,g,S,E,null);Io(x,S)}return null}function m(g,x,y,S){for(var E=null,j=null,P=x,T=x=0,$=null;P!==null&&T<y.length;T++){P.index>T?($=P,P=null):$=P.sibling;var L=p(g,P,y[T],S);if(L===null){P===null&&(P=$);break}e&&P&&L.alternate===null&&t(g,P),x=i(L,x,T),j===null?E=L:j.sibling=L,j=L,P=$}if(T===y.length)return n(g,P),$e&&ds(g,T),E;if(P===null){for(;T<y.length;T++)P=h(g,y[T],S),P!==null&&(x=i(P,x,T),j===null?E=P:j.sibling=P,j=P);return $e&&ds(g,T),E}for(P=r(g,P);T<y.length;T++)$=f(P,g,T,y[T],S),$!==null&&(e&&$.alternate!==null&&P.delete($.key===null?T:$.key),x=i($,x,T),j===null?E=$:j.sibling=$,j=$);return e&&P.forEach(function(F){return t(g,F)}),$e&&ds(g,T),E}function v(g,x,y,S){var E=Wi(y);if(typeof E!="function")throw Error(U(150));if(y=E.call(y),y==null)throw Error(U(151));for(var j=E=null,P=x,T=x=0,$=null,L=y.next();P!==null&&!L.done;T++,L=y.next()){P.index>T?($=P,P=null):$=P.sibling;var F=p(g,P,L.value,S);if(F===null){P===null&&(P=$);break}e&&P&&F.alternate===null&&t(g,P),x=i(F,x,T),j===null?E=F:j.sibling=F,j=F,P=$}if(L.done)return n(g,P),$e&&ds(g,T),E;if(P===null){for(;!L.done;T++,L=y.next())L=h(g,L.value,S),L!==null&&(x=i(L,x,T),j===null?E=L:j.sibling=L,j=L);return $e&&ds(g,T),E}for(P=r(g,P);!L.done;T++,L=y.next())L=f(P,g,T,L.value,S),L!==null&&(e&&L.alternate!==null&&P.delete(L.key===null?T:L.key),x=i(L,x,T),j===null?E=L:j.sibling=L,j=L);return e&&P.forEach(function(q){return t(g,q)}),$e&&ds(g,T),E}function w(g,x,y,S){if(typeof y=="object"&&y!==null&&y.type===Gs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ko:e:{for(var E=y.key,j=x;j!==null;){if(j.key===E){if(E=y.type,E===Gs){if(j.tag===7){n(g,j.sibling),x=s(j,y.props.children),x.return=g,g=x;break e}}else if(j.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Er&&Im(E)===j.type){n(g,j.sibling),x=s(j,y.props),x.ref=Yi(g,j,y),x.return=g,g=x;break e}n(g,j);break}else t(g,j);j=j.sibling}y.type===Gs?(x=js(y.props.children,g.mode,S,y.key),x.return=g,g=x):(S=ll(y.type,y.key,y.props,null,g.mode,S),S.ref=Yi(g,x,y),S.return=g,g=S)}return a(g);case Ks:e:{for(j=y.key;x!==null;){if(x.key===j)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(g,x.sibling),x=s(x,y.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else t(g,x);x=x.sibling}x=ou(y,g.mode,S),x.return=g,g=x}return a(g);case Er:return j=y._init,w(g,x,j(y._payload),S)}if(ia(y))return m(g,x,y,S);if(Wi(y))return v(g,x,y,S);Io(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(g,x.sibling),x=s(x,y),x.return=g,g=x):(n(g,x),x=au(y,g.mode,S),x.return=g,g=x),a(g)):n(g,x)}return w}var ji=ev(!0),tv=ev(!1),Cl=Jr(null),Tl=null,ni=null,df=null;function hf(){df=ni=Tl=null}function ff(e){var t=Cl.current;De(Cl),e._currentValue=t}function _d(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function mi(e,t){Tl=e,df=ni=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ut=!0),e.firstContext=null)}function yn(e){var t=e._currentValue;if(df!==e)if(e={context:e,memoizedValue:t,next:null},ni===null){if(Tl===null)throw Error(U(308));ni=e,Tl.dependencies={lanes:0,firstContext:e}}else ni=ni.next=e;return t}var xs=null;function pf(e){xs===null?xs=[e]:xs.push(e)}function nv(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,pf(t)):(n.next=s.next,s.next=n),t.interleaved=n,dr(e,r)}function dr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Pr=!1;function mf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,dr(e,n)}return s=r.interleaved,s===null?(t.next=t,pf(r)):(t.next=s.next,s.next=t),r.interleaved=t,dr(e,n)}function nl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zh(e,n)}}function Dm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Al(e,t,n,r){var s=e.updateQueue;Pr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var p=l.lane,f=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,v=l;switch(p=t,f=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(f,h,p);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,p=typeof m=="function"?m.call(f,h,p):m,p==null)break e;h=Be({},h,p);break e;case 2:Pr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);As|=a,e.lanes=a,e.memoizedState=h}}function Lm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var co={},Wn=Jr(co),za=Jr(co),Ua=Jr(co);function vs(e){if(e===co)throw Error(U(174));return e}function gf(e,t){switch(Te(Ua,t),Te(za,e),Te(Wn,co),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ad(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ad(t,e)}De(Wn),Te(Wn,t)}function Si(){De(Wn),De(za),De(Ua)}function sv(e){vs(Ua.current);var t=vs(Wn.current),n=ad(t,e.type);t!==n&&(Te(za,e),Te(Wn,n))}function yf(e){za.current===e&&(De(Wn),De(za))}var Fe=Jr(0);function Rl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var eu=[];function xf(){for(var e=0;e<eu.length;e++)eu[e]._workInProgressVersionPrimary=null;eu.length=0}var rl=gr.ReactCurrentDispatcher,tu=gr.ReactCurrentBatchConfig,Ts=0,ze=null,st=null,ct=null,Il=!1,ma=!1,Ba=0,oS=0;function Nt(){throw Error(U(321))}function vf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!In(e[n],t[n]))return!1;return!0}function wf(e,t,n,r,s,i){if(Ts=i,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rl.current=e===null||e.memoizedState===null?dS:hS,e=n(r,s),ma){i=0;do{if(ma=!1,Ba=0,25<=i)throw Error(U(301));i+=1,ct=st=null,t.updateQueue=null,rl.current=fS,e=n(r,s)}while(ma)}if(rl.current=Dl,t=st!==null&&st.next!==null,Ts=0,ct=st=ze=null,Il=!1,t)throw Error(U(300));return e}function bf(){var e=Ba!==0;return Ba=0,e}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?ze.memoizedState=ct=e:ct=ct.next=e,ct}function xn(){if(st===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=ct===null?ze.memoizedState:ct.next;if(t!==null)ct=t,st=e;else{if(e===null)throw Error(U(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ct===null?ze.memoizedState=ct=e:ct=ct.next=e}return ct}function Ha(e,t){return typeof t=="function"?t(e):t}function nu(e){var t=xn(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var r=st,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Ts&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,ze.lanes|=d,As|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,In(r,t.memoizedState)||(Ut=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ze.lanes|=i,As|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ru(e){var t=xn(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);In(i,t.memoizedState)||(Ut=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function iv(){}function av(e,t){var n=ze,r=xn(),s=t(),i=!In(r.memoizedState,s);if(i&&(r.memoizedState=s,Ut=!0),r=r.queue,kf(cv.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Wa(9,lv.bind(null,n,r,s,t),void 0,null),ht===null)throw Error(U(349));Ts&30||ov(n,t,s)}return s}function ov(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lv(e,t,n,r){t.value=n,t.getSnapshot=r,uv(t)&&dv(e)}function cv(e,t,n){return n(function(){uv(t)&&dv(e)})}function uv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!In(e,n)}catch{return!0}}function dv(e){var t=dr(e,1);t!==null&&An(t,e,1,-1)}function Om(e){var t=$n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},t.queue=e,e=e.dispatch=uS.bind(null,ze,e),[t.memoizedState,e]}function Wa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hv(){return xn().memoizedState}function sl(e,t,n,r){var s=$n();ze.flags|=e,s.memoizedState=Wa(1|t,n,void 0,r===void 0?null:r)}function lc(e,t,n,r){var s=xn();r=r===void 0?null:r;var i=void 0;if(st!==null){var a=st.memoizedState;if(i=a.destroy,r!==null&&vf(r,a.deps)){s.memoizedState=Wa(t,n,i,r);return}}ze.flags|=e,s.memoizedState=Wa(1|t,n,i,r)}function $m(e,t){return sl(8390656,8,e,t)}function kf(e,t){return lc(2048,8,e,t)}function fv(e,t){return lc(4,2,e,t)}function pv(e,t){return lc(4,4,e,t)}function mv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gv(e,t,n){return n=n!=null?n.concat([e]):null,lc(4,4,mv.bind(null,t,e),n)}function jf(){}function yv(e,t){var n=xn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xv(e,t){var n=xn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vv(e,t,n){return Ts&21?(In(n,t)||(n=Sx(),ze.lanes|=n,As|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ut=!0),e.memoizedState=n)}function lS(e,t){var n=_e;_e=n!==0&&4>n?n:4,e(!0);var r=tu.transition;tu.transition={};try{e(!1),t()}finally{_e=n,tu.transition=r}}function wv(){return xn().memoizedState}function cS(e,t,n){var r=Ur(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bv(e))kv(t,n);else if(n=nv(e,t,n,r),n!==null){var s=Ot();An(n,e,r,s),jv(n,t,r)}}function uS(e,t,n){var r=Ur(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bv(e))kv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,In(l,a)){var c=t.interleaved;c===null?(s.next=s,pf(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=nv(e,t,s,r),n!==null&&(s=Ot(),An(n,e,r,s),jv(n,t,r))}}function bv(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function kv(e,t){ma=Il=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jv(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zh(e,n)}}var Dl={readContext:yn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},dS={readContext:yn,useCallback:function(e,t){return $n().memoizedState=[e,t===void 0?null:t],e},useContext:yn,useEffect:$m,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,sl(4194308,4,mv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sl(4194308,4,e,t)},useInsertionEffect:function(e,t){return sl(4,2,e,t)},useMemo:function(e,t){var n=$n();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$n();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cS.bind(null,ze,e),[r.memoizedState,e]},useRef:function(e){var t=$n();return e={current:e},t.memoizedState=e},useState:Om,useDebugValue:jf,useDeferredValue:function(e){return $n().memoizedState=e},useTransition:function(){var e=Om(!1),t=e[0];return e=lS.bind(null,e[1]),$n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ze,s=$n();if($e){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),ht===null)throw Error(U(349));Ts&30||ov(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,$m(cv.bind(null,r,i,e),[e]),r.flags|=2048,Wa(9,lv.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=$n(),t=ht.identifierPrefix;if($e){var n=ar,r=ir;n=(r&~(1<<32-Tn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ba++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=oS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hS={readContext:yn,useCallback:yv,useContext:yn,useEffect:kf,useImperativeHandle:gv,useInsertionEffect:fv,useLayoutEffect:pv,useMemo:xv,useReducer:nu,useRef:hv,useState:function(){return nu(Ha)},useDebugValue:jf,useDeferredValue:function(e){var t=xn();return vv(t,st.memoizedState,e)},useTransition:function(){var e=nu(Ha)[0],t=xn().memoizedState;return[e,t]},useMutableSource:iv,useSyncExternalStore:av,useId:wv,unstable_isNewReconciler:!1},fS={readContext:yn,useCallback:yv,useContext:yn,useEffect:kf,useImperativeHandle:gv,useInsertionEffect:fv,useLayoutEffect:pv,useMemo:xv,useReducer:ru,useRef:hv,useState:function(){return ru(Ha)},useDebugValue:jf,useDeferredValue:function(e){var t=xn();return st===null?t.memoizedState=e:vv(t,st.memoizedState,e)},useTransition:function(){var e=ru(Ha)[0],t=xn().memoizedState;return[e,t]},useMutableSource:iv,useSyncExternalStore:av,useId:wv,unstable_isNewReconciler:!1};function jn(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ed(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var cc={isMounted:function(e){return(e=e._reactInternals)?Ls(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ot(),s=Ur(e),i=lr(r,s);i.payload=t,n!=null&&(i.callback=n),t=Vr(e,i,s),t!==null&&(An(t,e,s,r),nl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ot(),s=Ur(e),i=lr(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Vr(e,i,s),t!==null&&(An(t,e,s,r),nl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ot(),r=Ur(e),s=lr(n,r);s.tag=2,t!=null&&(s.callback=t),t=Vr(e,s,r),t!==null&&(An(t,e,r,n),nl(t,e,r))}};function Mm(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!$a(n,r)||!$a(s,i):!0}function Sv(e,t,n){var r=!1,s=Kr,i=t.contextType;return typeof i=="object"&&i!==null?i=yn(i):(s=Wt(t)?Ps:Ct.current,r=t.contextTypes,i=(r=r!=null)?bi(e,s):Kr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&cc.enqueueReplaceState(t,t.state,null)}function Pd(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},mf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=yn(i):(i=Wt(t)?Ps:Ct.current,s.context=bi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ed(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&cc.enqueueReplaceState(s,s.state,null),Al(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ni(e,t){try{var n="",r=t;do n+=z1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function su(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Cd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pS=typeof WeakMap=="function"?WeakMap:Map;function Nv(e,t,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ol||(Ol=!0,Fd=r),Cd(e,t)},n}function _v(e,t,n){n=lr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Cd(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cd(e,t),typeof r!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Vm(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new pS;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=PS.bind(null,e,t,n),t.then(e,e))}function zm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Um(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=lr(-1,1),t.tag=2,Vr(n,t,1))),n.lanes|=1),e)}var mS=gr.ReactCurrentOwner,Ut=!1;function Dt(e,t,n,r){t.child=e===null?tv(t,null,n,r):ji(t,e.child,n,r)}function Bm(e,t,n,r,s){n=n.render;var i=t.ref;return mi(t,s),r=wf(e,t,n,r,i,s),n=bf(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hr(e,t,s)):($e&&n&&lf(t),t.flags|=1,Dt(e,t,r,s),t.child)}function Hm(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Af(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Ev(e,t,i,r,s)):(e=ll(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:$a,n(a,r)&&e.ref===t.ref)return hr(e,t,s)}return t.flags|=1,e=Br(i,r),e.ref=t.ref,e.return=t,t.child=e}function Ev(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if($a(i,r)&&e.ref===t.ref)if(Ut=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ut=!0);else return t.lanes=e.lanes,hr(e,t,s)}return Td(e,t,n,r,s)}function Pv(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(si,Jt),Jt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(si,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(si,Jt),Jt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Te(si,Jt),Jt|=r;return Dt(e,t,s,n),t.child}function Cv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Td(e,t,n,r,s){var i=Wt(n)?Ps:Ct.current;return i=bi(t,i),mi(t,s),n=wf(e,t,n,r,i,s),r=bf(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hr(e,t,s)):($e&&r&&lf(t),t.flags|=1,Dt(e,t,n,s),t.child)}function Wm(e,t,n,r,s){if(Wt(n)){var i=!0;_l(t)}else i=!1;if(mi(t,s),t.stateNode===null)il(e,t),Sv(t,n,r),Pd(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=yn(u):(u=Wt(n)?Ps:Ct.current,u=bi(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Fm(t,a,r,u),Pr=!1;var p=t.memoizedState;a.state=p,Al(t,r,a,s),c=t.memoizedState,l!==r||p!==c||Ht.current||Pr?(typeof d=="function"&&(Ed(t,n,d,r),c=t.memoizedState),(l=Pr||Mm(t,n,l,r,p,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,rv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:jn(t.type,l),a.props=u,h=t.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=yn(c):(c=Wt(n)?Ps:Ct.current,c=bi(t,c));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||p!==c)&&Fm(t,a,r,c),Pr=!1,p=t.memoizedState,a.state=p,Al(t,r,a,s);var m=t.memoizedState;l!==h||p!==m||Ht.current||Pr?(typeof f=="function"&&(Ed(t,n,f,r),m=t.memoizedState),(u=Pr||Mm(t,n,u,r,p,m,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ad(e,t,n,r,i,s)}function Ad(e,t,n,r,s,i){Cv(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Tm(t,n,!1),hr(e,t,i);r=t.stateNode,mS.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ji(t,e.child,null,i),t.child=ji(t,null,l,i)):Dt(e,t,l,i),t.memoizedState=r.state,s&&Tm(t,n,!0),t.child}function Tv(e){var t=e.stateNode;t.pendingContext?Cm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cm(e,t.context,!1),gf(e,t.containerInfo)}function qm(e,t,n,r,s){return ki(),uf(s),t.flags|=256,Dt(e,t,n,r),t.child}var Rd={dehydrated:null,treeContext:null,retryLane:0};function Id(e){return{baseLanes:e,cachePool:null,transitions:null}}function Av(e,t,n){var r=t.pendingProps,s=Fe.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Te(Fe,s&1),e===null)return Nd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=hc(a,r,0,null),e=js(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Id(n),t.memoizedState=Rd,e):Sf(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gS(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Br(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Br(l,i):(i=js(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Id(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Rd,r}return i=e.child,e=i.sibling,r=Br(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Sf(e,t){return t=hc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Do(e,t,n,r){return r!==null&&uf(r),ji(t,e.child,null,n),e=Sf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gS(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=su(Error(U(422))),Do(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=hc({mode:"visible",children:r.children},s,0,null),i=js(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ji(t,e.child,null,a),t.child.memoizedState=Id(a),t.memoizedState=Rd,i);if(!(t.mode&1))return Do(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=su(i,r,void 0),Do(e,t,a,r)}if(l=(a&e.childLanes)!==0,Ut||l){if(r=ht,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,dr(e,s),An(r,e,s,-1))}return Tf(),r=su(Error(U(421))),Do(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=CS.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,tn=Fr(s.nextSibling),rn=t,$e=!0,Pn=null,e!==null&&(dn[hn++]=ir,dn[hn++]=ar,dn[hn++]=Cs,ir=e.id,ar=e.overflow,Cs=t),t=Sf(t,r.children),t.flags|=4096,t)}function Km(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_d(e.return,t,n)}function iu(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Rv(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Dt(e,t,r.children,n),r=Fe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Km(e,n,t);else if(e.tag===19)Km(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Fe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Rl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),iu(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Rl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}iu(t,!0,n,null,i);break;case"together":iu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function il(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),As|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=Br(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Br(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yS(e,t,n){switch(t.tag){case 3:Tv(t),ki();break;case 5:sv(t);break;case 1:Wt(t.type)&&_l(t);break;case 4:gf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Te(Cl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Fe,Fe.current&1),t.flags|=128,null):n&t.child.childLanes?Av(e,t,n):(Te(Fe,Fe.current&1),e=hr(e,t,n),e!==null?e.sibling:null);Te(Fe,Fe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Rv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Fe,Fe.current),r)break;return null;case 22:case 23:return t.lanes=0,Pv(e,t,n)}return hr(e,t,n)}var Iv,Dd,Dv,Lv;Iv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dd=function(){};Dv=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,vs(Wn.current);var i=null;switch(n){case"input":s=nd(e,s),r=nd(e,r),i=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),i=[];break;case"textarea":s=id(e,s),r=id(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Sl)}od(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ta.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ta.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ie("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Lv=function(e,t,n,r){n!==r&&(t.flags|=4)};function Qi(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function _t(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function xS(e,t,n){var r=t.pendingProps;switch(cf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(t),null;case 1:return Wt(t.type)&&Nl(),_t(t),null;case 3:return r=t.stateNode,Si(),De(Ht),De(Ct),xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ro(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pn!==null&&(Ud(Pn),Pn=null))),Dd(e,t),_t(t),null;case 5:yf(t);var s=vs(Ua.current);if(n=t.type,e!==null&&t.stateNode!=null)Dv(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(U(166));return _t(t),null}if(e=vs(Wn.current),Ro(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Vn]=t,r[Va]=i,e=(t.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(s=0;s<oa.length;s++)Ie(oa[s],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":nm(r,i),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",r);break;case"textarea":sm(r,i),Ie("invalid",r)}od(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ao(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ao(r.textContent,l,e),s=["children",""+l]):Ta.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ie("scroll",r)}switch(n){case"input":jo(r),rm(r,i,!0);break;case"textarea":jo(r),im(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cx(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Vn]=t,e[Va]=r,Iv(e,t,!1,!1),t.stateNode=e;e:{switch(a=ld(n,r),n){case"dialog":Ie("cancel",e),Ie("close",e),s=r;break;case"iframe":case"object":case"embed":Ie("load",e),s=r;break;case"video":case"audio":for(s=0;s<oa.length;s++)Ie(oa[s],e);s=r;break;case"source":Ie("error",e),s=r;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),s=r;break;case"details":Ie("toggle",e),s=r;break;case"input":nm(e,r),s=nd(e,r),Ie("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Ie("invalid",e);break;case"textarea":sm(e,r),s=id(e,r),Ie("invalid",e);break;default:s=r}od(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?hx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ux(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Aa(e,c):typeof c=="number"&&Aa(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ta.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ie("scroll",e):c!=null&&Kh(e,i,c,a))}switch(n){case"input":jo(e),rm(e,r,!1);break;case"textarea":jo(e),im(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?di(e,!!r.multiple,i,!1):r.defaultValue!=null&&di(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Sl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _t(t),null;case 6:if(e&&t.stateNode!=null)Lv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(U(166));if(n=vs(Ua.current),vs(Wn.current),Ro(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vn]=t,(i=r.nodeValue!==n)&&(e=rn,e!==null))switch(e.tag){case 3:Ao(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ao(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=t,t.stateNode=r}return _t(t),null;case 13:if(De(Fe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&tn!==null&&t.mode&1&&!(t.flags&128))Zx(),ki(),t.flags|=98560,i=!1;else if(i=Ro(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(U(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Vn]=t}else ki(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_t(t),i=!1}else Pn!==null&&(Ud(Pn),Pn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Fe.current&1?it===0&&(it=3):Tf())),t.updateQueue!==null&&(t.flags|=4),_t(t),null);case 4:return Si(),Dd(e,t),e===null&&Ma(t.stateNode.containerInfo),_t(t),null;case 10:return ff(t.type._context),_t(t),null;case 17:return Wt(t.type)&&Nl(),_t(t),null;case 19:if(De(Fe),i=t.memoizedState,i===null)return _t(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Qi(i,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Rl(e),a!==null){for(t.flags|=128,Qi(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Fe,Fe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Xe()>_i&&(t.flags|=128,r=!0,Qi(i,!1),t.lanes=4194304)}else{if(!r)if(e=Rl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!$e)return _t(t),null}else 2*Xe()-i.renderingStartTime>_i&&n!==1073741824&&(t.flags|=128,r=!0,Qi(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=Fe.current,Te(Fe,r?n&1|2:n&1),t):(_t(t),null);case 22:case 23:return Cf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Jt&1073741824&&(_t(t),t.subtreeFlags&6&&(t.flags|=8192)):_t(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function vS(e,t){switch(cf(t),t.tag){case 1:return Wt(t.type)&&Nl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Si(),De(Ht),De(Ct),xf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yf(t),null;case 13:if(De(Fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));ki()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De(Fe),null;case 4:return Si(),null;case 10:return ff(t.type._context),null;case 22:case 23:return Cf(),null;case 24:return null;default:return null}}var Lo=!1,Et=!1,wS=typeof WeakSet=="function"?WeakSet:Set,X=null;function ri(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function Ld(e,t,n){try{n()}catch(r){We(e,t,r)}}var Gm=!1;function bS(e,t){if(xd=bl,e=Vx(),of(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===s&&(l=a),p===i&&++d===r&&(c=a),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(vd={focusedElem:e,selectionRange:n},bl=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,w=m.memoizedState,g=t.stateNode,x=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:jn(t.type,v),w);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(S){We(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return m=Gm,Gm=!1,m}function ga(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ld(t,n,i)}s=s.next}while(s!==r)}}function uc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Od(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ov(e){var t=e.alternate;t!==null&&(e.alternate=null,Ov(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vn],delete t[Va],delete t[kd],delete t[rS],delete t[sS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $v(e){return e.tag===5||e.tag===3||e.tag===4}function Xm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$v(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $d(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sl));else if(r!==4&&(e=e.child,e!==null))for($d(e,t,n),e=e.sibling;e!==null;)$d(e,t,n),e=e.sibling}function Md(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Md(e,t,n),e=e.sibling;e!==null;)Md(e,t,n),e=e.sibling}var yt=null,_n=!1;function kr(e,t,n){for(n=n.child;n!==null;)Mv(e,t,n),n=n.sibling}function Mv(e,t,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(nc,n)}catch{}switch(n.tag){case 5:Et||ri(n,t);case 6:var r=yt,s=_n;yt=null,kr(e,t,n),yt=r,_n=s,yt!==null&&(_n?(e=yt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(_n?(e=yt,n=n.stateNode,e.nodeType===8?Jc(e.parentNode,n):e.nodeType===1&&Jc(e,n),La(e)):Jc(yt,n.stateNode));break;case 4:r=yt,s=_n,yt=n.stateNode.containerInfo,_n=!0,kr(e,t,n),yt=r,_n=s;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ld(n,t,a),s=s.next}while(s!==r)}kr(e,t,n);break;case 1:if(!Et&&(ri(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){We(n,t,l)}kr(e,t,n);break;case 21:kr(e,t,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,kr(e,t,n),Et=r):kr(e,t,n);break;default:kr(e,t,n)}}function Ym(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wS),t.forEach(function(r){var s=TS.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:yt=l.stateNode,_n=!1;break e;case 3:yt=l.stateNode.containerInfo,_n=!0;break e;case 4:yt=l.stateNode.containerInfo,_n=!0;break e}l=l.return}if(yt===null)throw Error(U(160));Mv(i,a,s),yt=null,_n=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){We(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fv(t,e),t=t.sibling}function Fv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wn(t,e),On(e),r&4){try{ga(3,e,e.return),uc(3,e)}catch(v){We(e,e.return,v)}try{ga(5,e,e.return)}catch(v){We(e,e.return,v)}}break;case 1:wn(t,e),On(e),r&512&&n!==null&&ri(n,n.return);break;case 5:if(wn(t,e),On(e),r&512&&n!==null&&ri(n,n.return),e.flags&32){var s=e.stateNode;try{Aa(s,"")}catch(v){We(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ox(s,i),ld(l,a);var u=ld(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?hx(s,h):d==="dangerouslySetInnerHTML"?ux(s,h):d==="children"?Aa(s,h):Kh(s,d,h,u)}switch(l){case"input":rd(s,i);break;case"textarea":lx(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?di(s,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?di(s,!!i.multiple,i.defaultValue,!0):di(s,!!i.multiple,i.multiple?[]:"",!1))}s[Va]=i}catch(v){We(e,e.return,v)}}break;case 6:if(wn(t,e),On(e),r&4){if(e.stateNode===null)throw Error(U(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){We(e,e.return,v)}}break;case 3:if(wn(t,e),On(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{La(t.containerInfo)}catch(v){We(e,e.return,v)}break;case 4:wn(t,e),On(e);break;case 13:wn(t,e),On(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ef=Xe())),r&4&&Ym(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Et=(u=Et)||d,wn(t,e),Et=u):wn(t,e),On(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(X=e,d=e.child;d!==null;){for(h=X=d;X!==null;){switch(p=X,f=p.child,p.tag){case 0:case 11:case 14:case 15:ga(4,p,p.return);break;case 1:ri(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){We(r,n,v)}}break;case 5:ri(p,p.return);break;case 22:if(p.memoizedState!==null){Jm(h);continue}}f!==null?(f.return=p,X=f):Jm(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=dx("display",a))}catch(v){We(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){We(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wn(t,e),On(e),r&4&&Ym(e);break;case 21:break;default:wn(t,e),On(e)}}function On(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($v(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Aa(s,""),r.flags&=-33);var i=Xm(e);Md(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Xm(e);$d(e,l,a);break;default:throw Error(U(161))}}catch(c){We(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kS(e,t,n){X=e,Vv(e)}function Vv(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Lo;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Et;l=Lo;var u=Et;if(Lo=a,(Et=c)&&!u)for(X=s;X!==null;)a=X,c=a.child,a.tag===22&&a.memoizedState!==null?Zm(s):c!==null?(c.return=a,X=c):Zm(s);for(;i!==null;)X=i,Vv(i),i=i.sibling;X=s,Lo=l,Et=u}Qm(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Qm(e)}}function Qm(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Et||uc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Et)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:jn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Lm(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lm(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&La(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Et||t.flags&512&&Od(t)}catch(p){We(t,t.return,p)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function Jm(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Zm(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{uc(4,t)}catch(c){We(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){We(t,s,c)}}var i=t.return;try{Od(t)}catch(c){We(t,i,c)}break;case 5:var a=t.return;try{Od(t)}catch(c){We(t,a,c)}}}catch(c){We(t,t.return,c)}if(t===e){X=null;break}var l=t.sibling;if(l!==null){l.return=t.return,X=l;break}X=t.return}}var jS=Math.ceil,Ll=gr.ReactCurrentDispatcher,Nf=gr.ReactCurrentOwner,mn=gr.ReactCurrentBatchConfig,Se=0,ht=null,Ze=null,vt=0,Jt=0,si=Jr(0),it=0,qa=null,As=0,dc=0,_f=0,ya=null,Vt=null,Ef=0,_i=1/0,nr=null,Ol=!1,Fd=null,zr=null,Oo=!1,Ir=null,$l=0,xa=0,Vd=null,al=-1,ol=0;function Ot(){return Se&6?Xe():al!==-1?al:al=Xe()}function Ur(e){return e.mode&1?Se&2&&vt!==0?vt&-vt:aS.transition!==null?(ol===0&&(ol=Sx()),ol):(e=_e,e!==0||(e=window.event,e=e===void 0?16:Ax(e.type)),e):1}function An(e,t,n,r){if(50<xa)throw xa=0,Vd=null,Error(U(185));ao(e,n,r),(!(Se&2)||e!==ht)&&(e===ht&&(!(Se&2)&&(dc|=n),it===4&&Tr(e,vt)),qt(e,r),n===1&&Se===0&&!(t.mode&1)&&(_i=Xe()+500,oc&&Zr()))}function qt(e,t){var n=e.callbackNode;aj(e,t);var r=wl(e,e===ht?vt:0);if(r===0)n!==null&&lm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lm(n),t===1)e.tag===0?iS(eg.bind(null,e)):Yx(eg.bind(null,e)),tS(function(){!(Se&6)&&Zr()}),n=null;else{switch(Nx(r)){case 1:n=Jh;break;case 4:n=kx;break;case 16:n=vl;break;case 536870912:n=jx;break;default:n=vl}n=Gv(n,zv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zv(e,t){if(al=-1,ol=0,Se&6)throw Error(U(327));var n=e.callbackNode;if(gi()&&e.callbackNode!==n)return null;var r=wl(e,e===ht?vt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ml(e,r);else{t=r;var s=Se;Se|=2;var i=Bv();(ht!==e||vt!==t)&&(nr=null,_i=Xe()+500,ks(e,t));do try{_S();break}catch(l){Uv(e,l)}while(!0);hf(),Ll.current=i,Se=s,Ze!==null?t=0:(ht=null,vt=0,t=it)}if(t!==0){if(t===2&&(s=fd(e),s!==0&&(r=s,t=zd(e,s))),t===1)throw n=qa,ks(e,0),Tr(e,r),qt(e,Xe()),n;if(t===6)Tr(e,r);else{if(s=e.current.alternate,!(r&30)&&!SS(s)&&(t=Ml(e,r),t===2&&(i=fd(e),i!==0&&(r=i,t=zd(e,i))),t===1))throw n=qa,ks(e,0),Tr(e,r),qt(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(U(345));case 2:hs(e,Vt,nr);break;case 3:if(Tr(e,r),(r&130023424)===r&&(t=Ef+500-Xe(),10<t)){if(wl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ot(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=bd(hs.bind(null,e,Vt,nr),t);break}hs(e,Vt,nr);break;case 4:if(Tr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Tn(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jS(r/1960))-r,10<r){e.timeoutHandle=bd(hs.bind(null,e,Vt,nr),r);break}hs(e,Vt,nr);break;case 5:hs(e,Vt,nr);break;default:throw Error(U(329))}}}return qt(e,Xe()),e.callbackNode===n?zv.bind(null,e):null}function zd(e,t){var n=ya;return e.current.memoizedState.isDehydrated&&(ks(e,t).flags|=256),e=Ml(e,t),e!==2&&(t=Vt,Vt=n,t!==null&&Ud(t)),e}function Ud(e){Vt===null?Vt=e:Vt.push.apply(Vt,e)}function SS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!In(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tr(e,t){for(t&=~_f,t&=~dc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tn(t),r=1<<n;e[n]=-1,t&=~r}}function eg(e){if(Se&6)throw Error(U(327));gi();var t=wl(e,0);if(!(t&1))return qt(e,Xe()),null;var n=Ml(e,t);if(e.tag!==0&&n===2){var r=fd(e);r!==0&&(t=r,n=zd(e,r))}if(n===1)throw n=qa,ks(e,0),Tr(e,t),qt(e,Xe()),n;if(n===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hs(e,Vt,nr),qt(e,Xe()),null}function Pf(e,t){var n=Se;Se|=1;try{return e(t)}finally{Se=n,Se===0&&(_i=Xe()+500,oc&&Zr())}}function Rs(e){Ir!==null&&Ir.tag===0&&!(Se&6)&&gi();var t=Se;Se|=1;var n=mn.transition,r=_e;try{if(mn.transition=null,_e=1,e)return e()}finally{_e=r,mn.transition=n,Se=t,!(Se&6)&&Zr()}}function Cf(){Jt=si.current,De(si)}function ks(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,eS(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(cf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:Si(),De(Ht),De(Ct),xf();break;case 5:yf(r);break;case 4:Si();break;case 13:De(Fe);break;case 19:De(Fe);break;case 10:ff(r.type._context);break;case 22:case 23:Cf()}n=n.return}if(ht=e,Ze=e=Br(e.current,null),vt=Jt=t,it=0,qa=null,_f=dc=As=0,Vt=ya=null,xs!==null){for(t=0;t<xs.length;t++)if(n=xs[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}xs=null}return e}function Uv(e,t){do{var n=Ze;try{if(hf(),rl.current=Dl,Il){for(var r=ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Il=!1}if(Ts=0,ct=st=ze=null,ma=!1,Ba=0,Nf.current=null,n===null||n.return===null){it=1,qa=t,Ze=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=vt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=zm(a);if(f!==null){f.flags&=-257,Um(f,a,l,i,t),f.mode&1&&Vm(i,u,t),t=f,c=u;var m=t.updateQueue;if(m===null){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}else{if(!(t&1)){Vm(i,u,t),Tf();break e}c=Error(U(426))}}else if($e&&l.mode&1){var w=zm(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Um(w,a,l,i,t),uf(Ni(c,l));break e}}i=c=Ni(c,l),it!==4&&(it=2),ya===null?ya=[i]:ya.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Nv(i,c,t);Dm(i,g);break e;case 1:l=c;var x=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zr===null||!zr.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=_v(i,l,t);Dm(i,S);break e}}i=i.return}while(i!==null)}Wv(n)}catch(E){t=E,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function Bv(){var e=Ll.current;return Ll.current=Dl,e===null?Dl:e}function Tf(){(it===0||it===3||it===2)&&(it=4),ht===null||!(As&268435455)&&!(dc&268435455)||Tr(ht,vt)}function Ml(e,t){var n=Se;Se|=2;var r=Bv();(ht!==e||vt!==t)&&(nr=null,ks(e,t));do try{NS();break}catch(s){Uv(e,s)}while(!0);if(hf(),Se=n,Ll.current=r,Ze!==null)throw Error(U(261));return ht=null,vt=0,it}function NS(){for(;Ze!==null;)Hv(Ze)}function _S(){for(;Ze!==null&&!Q1();)Hv(Ze)}function Hv(e){var t=Kv(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?Wv(e):Ze=t,Nf.current=null}function Wv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vS(n,t),n!==null){n.flags&=32767,Ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,Ze=null;return}}else if(n=xS(n,t,Jt),n!==null){Ze=n;return}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);it===0&&(it=5)}function hs(e,t,n){var r=_e,s=mn.transition;try{mn.transition=null,_e=1,ES(e,t,n,r)}finally{mn.transition=s,_e=r}return null}function ES(e,t,n,r){do gi();while(Ir!==null);if(Se&6)throw Error(U(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(oj(e,i),e===ht&&(Ze=ht=null,vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oo||(Oo=!0,Gv(vl,function(){return gi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mn.transition,mn.transition=null;var a=_e;_e=1;var l=Se;Se|=4,Nf.current=null,bS(e,n),Fv(n,e),Kj(vd),bl=!!xd,vd=xd=null,e.current=n,kS(n),J1(),Se=l,_e=a,mn.transition=i}else e.current=n;if(Oo&&(Oo=!1,Ir=e,$l=s),i=e.pendingLanes,i===0&&(zr=null),tj(n.stateNode),qt(e,Xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ol)throw Ol=!1,e=Fd,Fd=null,e;return $l&1&&e.tag!==0&&gi(),i=e.pendingLanes,i&1?e===Vd?xa++:(xa=0,Vd=e):xa=0,Zr(),null}function gi(){if(Ir!==null){var e=Nx($l),t=mn.transition,n=_e;try{if(mn.transition=null,_e=16>e?16:e,Ir===null)var r=!1;else{if(e=Ir,Ir=null,$l=0,Se&6)throw Error(U(331));var s=Se;for(Se|=4,X=e.current;X!==null;){var i=X,a=i.child;if(X.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:ga(8,d,i)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var p=d.sibling,f=d.return;if(Ov(d),d===u){X=null;break}if(p!==null){p.return=f,X=p;break}X=f}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}X=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,X=a;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ga(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,X=g;break e}X=i.return}}var x=e.current;for(X=x;X!==null;){a=X;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,X=y;else e:for(a=x;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uc(9,l)}}catch(E){We(l,l.return,E)}if(l===a){X=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,X=S;break e}X=l.return}}if(Se=s,Zr(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(nc,e)}catch{}r=!0}return r}finally{_e=n,mn.transition=t}}return!1}function tg(e,t,n){t=Ni(n,t),t=Nv(e,t,1),e=Vr(e,t,1),t=Ot(),e!==null&&(ao(e,1,t),qt(e,t))}function We(e,t,n){if(e.tag===3)tg(e,e,n);else for(;t!==null;){if(t.tag===3){tg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zr===null||!zr.has(r))){e=Ni(n,e),e=_v(t,e,1),t=Vr(t,e,1),e=Ot(),t!==null&&(ao(t,1,e),qt(t,e));break}}t=t.return}}function PS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&n,ht===e&&(vt&n)===n&&(it===4||it===3&&(vt&130023424)===vt&&500>Xe()-Ef?ks(e,0):_f|=n),qt(e,t)}function qv(e,t){t===0&&(e.mode&1?(t=_o,_o<<=1,!(_o&130023424)&&(_o=4194304)):t=1);var n=Ot();e=dr(e,t),e!==null&&(ao(e,t,n),qt(e,n))}function CS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qv(e,n)}function TS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(t),qv(e,n)}var Kv;Kv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Ut=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ut=!1,yS(e,t,n);Ut=!!(e.flags&131072)}else Ut=!1,$e&&t.flags&1048576&&Qx(t,Pl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;il(e,t),e=t.pendingProps;var s=bi(t,Ct.current);mi(t,n),s=wf(null,t,r,e,s,n);var i=bf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wt(r)?(i=!0,_l(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mf(t),s.updater=cc,t.stateNode=s,s._reactInternals=t,Pd(t,r,e,n),t=Ad(null,t,r,!0,i,n)):(t.tag=0,$e&&i&&lf(t),Dt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(il(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=RS(r),e=jn(r,e),s){case 0:t=Td(null,t,r,e,n);break e;case 1:t=Wm(null,t,r,e,n);break e;case 11:t=Bm(null,t,r,e,n);break e;case 14:t=Hm(null,t,r,jn(r.type,e),n);break e}throw Error(U(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:jn(r,s),Td(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:jn(r,s),Wm(e,t,r,s,n);case 3:e:{if(Tv(t),e===null)throw Error(U(387));r=t.pendingProps,i=t.memoizedState,s=i.element,rv(e,t),Al(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ni(Error(U(423)),t),t=qm(e,t,r,n,s);break e}else if(r!==s){s=Ni(Error(U(424)),t),t=qm(e,t,r,n,s);break e}else for(tn=Fr(t.stateNode.containerInfo.firstChild),rn=t,$e=!0,Pn=null,n=tv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ki(),r===s){t=hr(e,t,n);break e}Dt(e,t,r,n)}t=t.child}return t;case 5:return sv(t),e===null&&Nd(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,wd(r,s)?a=null:i!==null&&wd(r,i)&&(t.flags|=32),Cv(e,t),Dt(e,t,a,n),t.child;case 6:return e===null&&Nd(t),null;case 13:return Av(e,t,n);case 4:return gf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ji(t,null,r,n):Dt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:jn(r,s),Bm(e,t,r,s,n);case 7:return Dt(e,t,t.pendingProps,n),t.child;case 8:return Dt(e,t,t.pendingProps.children,n),t.child;case 12:return Dt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Te(Cl,r._currentValue),r._currentValue=a,i!==null)if(In(i.value,a)){if(i.children===s.children&&!Ht.current){t=hr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=lr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),_d(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),_d(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Dt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,mi(t,n),s=yn(s),r=r(s),t.flags|=1,Dt(e,t,r,n),t.child;case 14:return r=t.type,s=jn(r,t.pendingProps),s=jn(r.type,s),Hm(e,t,r,s,n);case 15:return Ev(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:jn(r,s),il(e,t),t.tag=1,Wt(r)?(e=!0,_l(t)):e=!1,mi(t,n),Sv(t,r,s),Pd(t,r,s,n),Ad(null,t,r,!0,e,n);case 19:return Rv(e,t,n);case 22:return Pv(e,t,n)}throw Error(U(156,t.tag))};function Gv(e,t){return bx(e,t)}function AS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(e,t,n,r){return new AS(e,t,n,r)}function Af(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RS(e){if(typeof e=="function")return Af(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xh)return 11;if(e===Yh)return 14}return 2}function Br(e,t){var n=e.alternate;return n===null?(n=pn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ll(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Af(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Gs:return js(n.children,s,i,t);case Gh:a=8,s|=8;break;case Ju:return e=pn(12,n,t,s|2),e.elementType=Ju,e.lanes=i,e;case Zu:return e=pn(13,n,t,s),e.elementType=Zu,e.lanes=i,e;case ed:return e=pn(19,n,t,s),e.elementType=ed,e.lanes=i,e;case sx:return hc(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nx:a=10;break e;case rx:a=9;break e;case Xh:a=11;break e;case Yh:a=14;break e;case Er:a=16,r=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=pn(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function js(e,t,n,r){return e=pn(7,e,r,t),e.lanes=n,e}function hc(e,t,n,r){return e=pn(22,e,r,t),e.elementType=sx,e.lanes=n,e.stateNode={isHidden:!1},e}function au(e,t,n){return e=pn(6,e,null,t),e.lanes=n,e}function ou(e,t,n){return t=pn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IS(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rf(e,t,n,r,s,i,a,l,c){return e=new IS(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=pn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mf(i),e}function DS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ks,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Xv(e){if(!e)return Kr;e=e._reactInternals;e:{if(Ls(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var n=e.type;if(Wt(n))return Xx(e,n,t)}return t}function Yv(e,t,n,r,s,i,a,l,c){return e=Rf(n,r,!0,e,s,i,a,l,c),e.context=Xv(null),n=e.current,r=Ot(),s=Ur(n),i=lr(r,s),i.callback=t??null,Vr(n,i,s),e.current.lanes=s,ao(e,s,r),qt(e,r),e}function fc(e,t,n,r){var s=t.current,i=Ot(),a=Ur(s);return n=Xv(n),t.context===null?t.context=n:t.pendingContext=n,t=lr(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vr(s,t,a),e!==null&&(An(e,s,a,i),nl(e,s,a)),a}function Fl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ng(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function If(e,t){ng(e,t),(e=e.alternate)&&ng(e,t)}function LS(){return null}var Qv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Df(e){this._internalRoot=e}pc.prototype.render=Df.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));fc(e,t,null,null)};pc.prototype.unmount=Df.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rs(function(){fc(null,e,null,null)}),t[ur]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Px();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cr.length&&t!==0&&t<Cr[n].priority;n++);Cr.splice(n,0,e),n===0&&Tx(e)}};function Lf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rg(){}function OS(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Fl(a);i.call(u)}}var a=Yv(t,r,e,0,null,!1,!1,"",rg);return e._reactRootContainer=a,e[ur]=a.current,Ma(e.nodeType===8?e.parentNode:e),Rs(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Fl(c);l.call(u)}}var c=Rf(e,0,!1,null,null,!1,!1,"",rg);return e._reactRootContainer=c,e[ur]=c.current,Ma(e.nodeType===8?e.parentNode:e),Rs(function(){fc(t,c,n,r)}),c}function gc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Fl(a);l.call(c)}}fc(t,a,e,s)}else a=OS(n,t,e,s,r);return Fl(a)}_x=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=aa(t.pendingLanes);n!==0&&(Zh(t,n|1),qt(t,Xe()),!(Se&6)&&(_i=Xe()+500,Zr()))}break;case 13:Rs(function(){var r=dr(e,1);if(r!==null){var s=Ot();An(r,e,1,s)}}),If(e,1)}};ef=function(e){if(e.tag===13){var t=dr(e,134217728);if(t!==null){var n=Ot();An(t,e,134217728,n)}If(e,134217728)}};Ex=function(e){if(e.tag===13){var t=Ur(e),n=dr(e,t);if(n!==null){var r=Ot();An(n,e,t,r)}If(e,t)}};Px=function(){return _e};Cx=function(e,t){var n=_e;try{return _e=e,t()}finally{_e=n}};ud=function(e,t,n){switch(t){case"input":if(rd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ac(r);if(!s)throw Error(U(90));ax(r),rd(r,s)}}}break;case"textarea":lx(e,n);break;case"select":t=n.value,t!=null&&di(e,!!n.multiple,t,!1)}};mx=Pf;gx=Rs;var $S={usingClientEntryPoint:!1,Events:[lo,Js,ac,fx,px,Pf]},Ji={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MS={bundleType:Ji.bundleType,version:Ji.version,rendererPackageName:Ji.rendererPackageName,rendererConfig:Ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vx(e),e===null?null:e.stateNode},findFiberByHostInstance:Ji.findFiberByHostInstance||LS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$o.isDisabled&&$o.supportsFiber)try{nc=$o.inject(MS),Hn=$o}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$S;an.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lf(t))throw Error(U(200));return DS(e,t,null,n)};an.createRoot=function(e,t){if(!Lf(e))throw Error(U(299));var n=!1,r="",s=Qv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Rf(e,1,!1,null,null,n,!1,r,s),e[ur]=t.current,Ma(e.nodeType===8?e.parentNode:e),new Df(t)};an.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=vx(t),e=e===null?null:e.stateNode,e};an.flushSync=function(e){return Rs(e)};an.hydrate=function(e,t,n){if(!mc(t))throw Error(U(200));return gc(null,e,t,!0,n)};an.hydrateRoot=function(e,t,n){if(!Lf(e))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Qv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Yv(t,null,e,1,n??null,s,!1,i,a),e[ur]=t.current,Ma(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new pc(t)};an.render=function(e,t,n){if(!mc(t))throw Error(U(200));return gc(null,e,t,!1,n)};an.unmountComponentAtNode=function(e){if(!mc(e))throw Error(U(40));return e._reactRootContainer?(Rs(function(){gc(null,null,e,!1,function(){e._reactRootContainer=null,e[ur]=null})}),!0):!1};an.unstable_batchedUpdates=Pf;an.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!mc(n))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return gc(e,t,n,!1,r)};an.version="18.3.1-next-f1338f8080-20240426";function Jv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jv)}catch(e){console.error(e)}}Jv(),Jy.exports=an;var FS=Jy.exports,sg=FS;Yu.createRoot=sg.createRoot,Yu.hydrateRoot=sg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka.apply(this,arguments)}var Dr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Dr||(Dr={}));const ig="popstate";function VS(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return Bd("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vl(s)}return US(t,n,null,e)}function Ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zS(){return Math.random().toString(36).substr(2,8)}function ag(e,t){return{usr:e.state,key:e.key,idx:t}}function Bd(e,t,n,r){return n===void 0&&(n=null),Ka({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Di(t):t,{state:n,key:t&&t.key||r||zS()})}function Vl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Di(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function US(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=Dr.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Ka({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Dr.Pop;let w=d(),g=w==null?null:w-u;u=w,c&&c({action:l,location:v.location,delta:g})}function p(w,g){l=Dr.Push;let x=Bd(v.location,w,g);u=d()+1;let y=ag(x,u),S=v.createHref(x);try{a.pushState(y,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(S)}i&&c&&c({action:l,location:v.location,delta:1})}function f(w,g){l=Dr.Replace;let x=Bd(v.location,w,g);u=d();let y=ag(x,u),S=v.createHref(x);a.replaceState(y,"",S),i&&c&&c({action:l,location:v.location,delta:0})}function m(w){let g=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:Vl(w);return x=x.replace(/ $/,"%20"),Ue(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let v={get action(){return l},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ig,h),c=w,()=>{s.removeEventListener(ig,h),c=null}},createHref(w){return t(s,w)},createURL:m,encodeLocation(w){let g=m(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:f,go(w){return a.go(w)}};return v}var og;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(og||(og={}));function BS(e,t,n){return n===void 0&&(n="/"),HS(e,t,n)}function HS(e,t,n,r){let s=typeof t=="string"?Di(t):t,i=Ei(s.pathname||"/",n);if(i==null)return null;let a=ew(e);WS(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=n2(i);l=e2(a[c],u)}return l}function ew(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Ue(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Hr([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(Ue(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ew(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:JS(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of tw(i.path))s(i,a,c)}),t}function tw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=tw(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function WS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ZS(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qS=/^:[\w-]+$/,KS=3,GS=2,XS=1,YS=10,QS=-2,lg=e=>e==="*";function JS(e,t){let n=e.split("/"),r=n.length;return n.some(lg)&&(r+=QS),t&&(r+=GS),n.filter(s=>!lg(s)).reduce((s,i)=>s+(qS.test(i)?KS:i===""?XS:YS),r)}function ZS(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function e2(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Hd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Hr([i,h.pathname]),pathnameBase:a2(Hr([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Hr([i,h.pathnameBase]))}return a}function Hd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=t2(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:f}=d;if(p==="*"){let v=l[h]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[h];return f&&!m?u[p]=void 0:u[p]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function t2(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Zv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function n2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ei(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function r2(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Di(e):e;return{pathname:n?n.startsWith("/")?n:s2(n,t):t,search:o2(r),hash:l2(s)}}function s2(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function lu(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i2(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Of(e,t){let n=i2(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $f(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Di(e):(s=Ka({},e),Ue(!s.pathname||!s.pathname.includes("?"),lu("?","pathname","search",s)),Ue(!s.pathname||!s.pathname.includes("#"),lu("#","pathname","hash",s)),Ue(!s.search||!s.search.includes("#"),lu("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=r2(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Hr=e=>e.join("/").replace(/\/\/+/g,"/"),a2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),o2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,l2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function c2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nw=["post","put","patch","delete"];new Set(nw);const u2=["get",...nw];new Set(u2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ga.apply(this,arguments)}const yc=b.createContext(null),rw=b.createContext(null),yr=b.createContext(null),xc=b.createContext(null),Yn=b.createContext({outlet:null,matches:[],isDataRoute:!1}),sw=b.createContext(null);function d2(e,t){let{relative:n}=t===void 0?{}:t;Li()||Ue(!1);let{basename:r,navigator:s}=b.useContext(yr),{hash:i,pathname:a,search:l}=vc(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Hr([r,a])),s.createHref({pathname:c,search:l,hash:i})}function Li(){return b.useContext(xc)!=null}function Qn(){return Li()||Ue(!1),b.useContext(xc).location}function iw(e){b.useContext(yr).static||b.useLayoutEffect(e)}function Oi(){let{isDataRoute:e}=b.useContext(Yn);return e?_2():h2()}function h2(){Li()||Ue(!1);let e=b.useContext(yc),{basename:t,future:n,navigator:r}=b.useContext(yr),{matches:s}=b.useContext(Yn),{pathname:i}=Qn(),a=JSON.stringify(Of(s,n.v7_relativeSplatPath)),l=b.useRef(!1);return iw(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=$f(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Hr([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,a,i,e])}const f2=b.createContext(null);function p2(e){let t=b.useContext(Yn).outlet;return t&&b.createElement(f2.Provider,{value:e},t)}function Mf(){let{matches:e}=b.useContext(Yn),t=e[e.length-1];return t?t.params:{}}function vc(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(yr),{matches:s}=b.useContext(Yn),{pathname:i}=Qn(),a=JSON.stringify(Of(s,r.v7_relativeSplatPath));return b.useMemo(()=>$f(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function m2(e,t){return g2(e,t)}function g2(e,t,n,r){Li()||Ue(!1);let{navigator:s}=b.useContext(yr),{matches:i}=b.useContext(Yn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Qn(),d;if(t){var h;let w=typeof t=="string"?Di(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||Ue(!1),d=w}else d=u;let p=d.pathname||"/",f=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=BS(e,{pathname:f}),v=b2(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Hr([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Hr([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return t&&v?b.createElement(xc.Provider,{value:{location:Ga({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Dr.Pop}},v):v}function y2(){let e=N2(),t=c2(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:s},n):null,null)}const x2=b.createElement(y2,null);class v2 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(Yn.Provider,{value:this.props.routeContext},b.createElement(sw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w2(e){let{routeContext:t,match:n,children:r}=e,s=b.useContext(yc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Yn.Provider,{value:t},r)}function b2(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Ue(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:f}=n,m=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||m){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,p)=>{let f,m=!1,v=null,w=null;n&&(f=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||x2,c&&(u<0&&p===0?(E2("route-fallback"),m=!0,w=null):u===p&&(m=!0,w=h.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,p+1)),x=()=>{let y;return f?y=v:m?y=w:h.route.Component?y=b.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,b.createElement(w2,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?b.createElement(v2,{location:n.location,revalidation:n.revalidation,component:v,error:f,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var aw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(aw||{}),ow=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ow||{});function k2(e){let t=b.useContext(yc);return t||Ue(!1),t}function j2(e){let t=b.useContext(rw);return t||Ue(!1),t}function S2(e){let t=b.useContext(Yn);return t||Ue(!1),t}function lw(e){let t=S2(),n=t.matches[t.matches.length-1];return n.route.id||Ue(!1),n.route.id}function N2(){var e;let t=b.useContext(sw),n=j2(),r=lw();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function _2(){let{router:e}=k2(aw.UseNavigateStable),t=lw(ow.UseNavigateStable),n=b.useRef(!1);return iw(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ga({fromRouteId:t},i)))},[e,t])}const cg={};function E2(e,t,n){cg[e]||(cg[e]=!0)}function P2(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function C2(e){let{to:t,replace:n,state:r,relative:s}=e;Li()||Ue(!1);let{future:i,static:a}=b.useContext(yr),{matches:l}=b.useContext(Yn),{pathname:c}=Qn(),u=Oi(),d=$f(t,Of(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function T2(e){return p2(e.context)}function It(e){Ue(!1)}function A2(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Dr.Pop,navigator:i,static:a=!1,future:l}=e;Li()&&Ue(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:a,future:Ga({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=Di(r));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:m="default"}=r,v=b.useMemo(()=>{let w=Ei(d,c);return w==null?null:{location:{pathname:w,search:h,hash:p,state:f,key:m},navigationType:s}},[c,d,h,p,f,m,s]);return v==null?null:b.createElement(yr.Provider,{value:u},b.createElement(xc.Provider,{children:n,value:v}))}function R2(e){let{children:t,location:n}=e;return m2(Wd(t),n)}new Promise(()=>{});function Wd(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(r,s)=>{if(!b.isValidElement(r))return;let i=[...t,s];if(r.type===b.Fragment){n.push.apply(n,Wd(r.props.children,i));return}r.type!==It&&Ue(!1),!r.props.index||!r.props.children||Ue(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Wd(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zl.apply(this,arguments)}function cw(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function I2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function D2(e,t){return e.button===0&&(!t||t==="_self")&&!I2(e)}const L2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],O2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],$2="6";try{window.__reactRouterVersion=$2}catch{}const M2=b.createContext({isTransitioning:!1}),F2="startTransition",ug=P1[F2];function V2(e){let{basename:t,children:n,future:r,window:s}=e,i=b.useRef();i.current==null&&(i.current=VS({window:s,v5Compat:!0}));let a=i.current,[l,c]=b.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=b.useCallback(h=>{u&&ug?ug(()=>c(h)):c(h)},[c,u]);return b.useLayoutEffect(()=>a.listen(d),[a,d]),b.useEffect(()=>P2(r),[r]),b.createElement(A2,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const z2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wr=b.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,p=cw(t,L2),{basename:f}=b.useContext(yr),m,v=!1;if(typeof u=="string"&&U2.test(u)&&(m=u,z2))try{let y=new URL(window.location.href),S=u.startsWith("//")?new URL(y.protocol+u):new URL(u),E=Ei(S.pathname,f);S.origin===y.origin&&E!=null?u=E+S.search+S.hash:v=!0}catch{}let w=d2(u,{relative:s}),g=W2(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function x(y){r&&r(y),y.defaultPrevented||g(y)}return b.createElement("a",zl({},p,{href:m||w,onClick:v||i?r:x,ref:n,target:c}))}),B2=b.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=t,h=cw(t,O2),p=vc(c,{relative:h.relative}),f=Qn(),m=b.useContext(rw),{navigator:v,basename:w}=b.useContext(yr),g=m!=null&&q2(p)&&u===!0,x=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,y=f.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(y=y.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&w&&(S=Ei(S,w)||S);const E=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=y===x||!a&&y.startsWith(x)&&y.charAt(E)==="/",P=S!=null&&(S===x||!a&&S.startsWith(x)&&S.charAt(x.length)==="/"),T={isActive:j,isPending:P,isTransitioning:g},$=j?r:void 0,L;typeof i=="function"?L=i(T):L=[i,j?"active":null,P?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let F=typeof l=="function"?l(T):l;return b.createElement(Wr,zl({},h,{"aria-current":$,className:L,ref:n,style:F,to:c,viewTransition:u}),typeof d=="function"?d(T):d)});var qd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(qd||(qd={}));var dg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dg||(dg={}));function H2(e){let t=b.useContext(yc);return t||Ue(!1),t}function W2(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=Oi(),u=Qn(),d=vc(e,{relative:a});return b.useCallback(h=>{if(D2(h,n)){h.preventDefault();let p=r!==void 0?r:Vl(u)===Vl(d);c(e,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,i,a,l])}function q2(e,t){t===void 0&&(t={});let n=b.useContext(M2);n==null&&Ue(!1);let{basename:r}=H2(qd.useViewTransitionState),s=vc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Ei(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Ei(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Hd(s.pathname,a)!=null||Hd(s.pathname,i)!=null}function K2(e,t={}){const n=b.useRef(null),r=b.useRef(null),s=b.useRef(0),i=t.maxReconnectAttempts||10,a=t.reconnectDelay||3e3,l=()=>{try{n.current=new WebSocket(e),n.current.onopen=c=>{console.log("WebSocket connected"),s.current=0,t.onOpen&&t.onOpen(c)},n.current.onmessage=c=>{t.onMessage&&t.onMessage(c)},n.current.onerror=c=>{console.error("WebSocket error:",c),t.onError&&t.onError(c)},n.current.onclose=c=>{console.log("WebSocket closed"),t.onClose&&t.onClose(c),s.current<i&&(s.current++,console.log(`Reconnecting... (attempt ${s.current}/${i})`),r.current=setTimeout(()=>{l()},a))}}catch(c){console.error("Failed to create WebSocket:",c)}};return b.useEffect(()=>(l(),()=>{r.current&&clearTimeout(r.current),n.current&&n.current.close()}),[e]),n.current}function uw(e,t){const[n,r]=b.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return b.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch(i){console.error(`Error saving to localStorage key "${e}":`,i)}},[e,n]),[n,i=>{try{const a=i instanceof Function?i(n):i;r(a)}catch(a){console.error(`Error setting localStorage key "${e}":`,a)}}]}function G2(){const[e,t]=uw("leo-dashboard-preferences",{theme:"light",sidebarCollapsed:!1,refreshInterval:3e4,notifications:!0,compactView:!1});return{preferences:e,updatePreference:(r,s)=>{t(i=>({...i,[r]:s}))}}}function cu(e,t){const[n,r]=uw(`leo-dashboard-${e}`,t);return[n,r,()=>{window.localStorage.removeItem(`leo-dashboard-${e}`),r(t)}]}const Ff=b.createContext({});function Vf(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}const zf=typeof window<"u",dw=zf?b.useLayoutEffect:b.useEffect,wc=b.createContext(null);function Uf(e,t){e.indexOf(t)===-1&&e.push(t)}function Bf(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const fr=(e,t,n)=>n>t?t:n<e?e:n;let Hf=()=>{};const pr={},hw=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function fw(e){return typeof e=="object"&&e!==null}const pw=e=>/^0[^.\s]+$/u.test(e);function Wf(e){let t;return()=>(t===void 0&&(t=e()),t)}const gn=e=>e,X2=(e,t)=>n=>t(e(n)),uo=(...e)=>e.reduce(X2),Xa=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class qf{constructor(){this.subscriptions=[]}add(t){return Uf(this.subscriptions,t),()=>Bf(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qn=e=>e*1e3,Kn=e=>e/1e3;function mw(e,t){return t?e*(1e3/t):0}const gw=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Y2=1e-7,Q2=12;function J2(e,t,n,r,s){let i,a,l=0;do a=t+(n-t)/2,i=gw(a,r,s)-e,i>0?n=a:t=a;while(Math.abs(i)>Y2&&++l<Q2);return a}function ho(e,t,n,r){if(e===t&&n===r)return gn;const s=i=>J2(i,0,1,e,n);return i=>i===0||i===1?i:gw(s(i),t,r)}const yw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xw=e=>t=>1-e(1-t),vw=ho(.33,1.53,.69,.99),Kf=xw(vw),ww=yw(Kf),bw=e=>(e*=2)<1?.5*Kf(e):.5*(2-Math.pow(2,-10*(e-1))),Gf=e=>1-Math.sin(Math.acos(e)),kw=xw(Gf),jw=yw(Gf),Z2=ho(.42,0,1,1),eN=ho(0,0,.58,1),Sw=ho(.42,0,.58,1),tN=e=>Array.isArray(e)&&typeof e[0]!="number",Nw=e=>Array.isArray(e)&&typeof e[0]=="number",nN={linear:gn,easeIn:Z2,easeInOut:Sw,easeOut:eN,circIn:Gf,circInOut:jw,circOut:kw,backIn:Kf,backInOut:ww,backOut:vw,anticipate:bw},rN=e=>typeof e=="string",hg=e=>{if(Nw(e)){Hf(e.length===4);const[t,n,r,s]=e;return ho(t,n,r,s)}else if(rN(e))return nN[e];return e},Mo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function sN(e,t){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){a.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,h=!1,p=!1)=>{const m=p&&s?n:r;return h&&a.add(d),m.has(d)||m.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(l=d,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const iN=40;function _w(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=Mo.reduce((y,S)=>(y[S]=sN(i),y),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:p,render:f,postRender:m}=a,v=()=>{const y=pr.useManualTiming?s.timestamp:performance.now();n=!1,pr.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(y-s.timestamp,iN),1)),s.timestamp=y,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),p.process(s),f.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(v))},w=()=>{n=!0,r=!0,s.isProcessing||e(v)};return{schedule:Mo.reduce((y,S)=>{const E=a[S];return y[S]=(j,P=!1,T=!1)=>(n||w(),E.schedule(j,P,T)),y},{}),cancel:y=>{for(let S=0;S<Mo.length;S++)a[Mo[S]].cancel(y)},state:s,steps:a}}const{schedule:Me,cancel:Gr,state:xt,steps:uu}=_w(typeof requestAnimationFrame<"u"?requestAnimationFrame:gn,!0);let cl;function aN(){cl=void 0}const Bt={now:()=>(cl===void 0&&Bt.set(xt.isProcessing||pr.useManualTiming?xt.timestamp:performance.now()),cl),set:e=>{cl=e,queueMicrotask(aN)}},Ew=e=>t=>typeof t=="string"&&t.startsWith(e),Xf=Ew("--"),oN=Ew("var(--"),Yf=e=>oN(e)?lN.test(e.split("/*")[0].trim()):!1,lN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$i={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ya={...$i,transform:e=>fr(0,1,e)},Fo={...$i,default:1},va=e=>Math.round(e*1e5)/1e5,Qf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cN(e){return e==null}const uN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jf=(e,t)=>n=>!!(typeof n=="string"&&uN.test(n)&&n.startsWith(e)||t&&!cN(n)&&Object.prototype.hasOwnProperty.call(n,t)),Pw=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,l]=r.match(Qf);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},dN=e=>fr(0,255,e),du={...$i,transform:e=>Math.round(dN(e))},ws={test:Jf("rgb","red"),parse:Pw("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+du.transform(e)+", "+du.transform(t)+", "+du.transform(n)+", "+va(Ya.transform(r))+")"};function hN(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Kd={test:Jf("#"),parse:hN,transform:ws.transform},fo=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Nr=fo("deg"),Gn=fo("%"),le=fo("px"),fN=fo("vh"),pN=fo("vw"),fg={...Gn,parse:e=>Gn.parse(e)/100,transform:e=>Gn.transform(e*100)},ii={test:Jf("hsl","hue"),parse:Pw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gn.transform(va(t))+", "+Gn.transform(va(n))+", "+va(Ya.transform(r))+")"},Je={test:e=>ws.test(e)||Kd.test(e)||ii.test(e),parse:e=>ws.test(e)?ws.parse(e):ii.test(e)?ii.parse(e):Kd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ws.transform(e):ii.transform(e),getAnimatableNone:e=>{const t=Je.parse(e);return t.alpha=0,Je.transform(t)}},mN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gN(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Qf))==null?void 0:t.length)||0)+(((n=e.match(mN))==null?void 0:n.length)||0)>0}const Cw="number",Tw="color",yN="var",xN="var(",pg="${}",vN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qa(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(vN,c=>(Je.test(c)?(r.color.push(i),s.push(Tw),n.push(Je.parse(c))):c.startsWith(xN)?(r.var.push(i),s.push(yN),n.push(c)):(r.number.push(i),s.push(Cw),n.push(parseFloat(c))),++i,pg)).split(pg);return{values:n,split:l,indexes:r,types:s}}function Aw(e){return Qa(e).values}function Rw(e){const{split:t,types:n}=Qa(e),r=t.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],s[a]!==void 0){const l=n[a];l===Cw?i+=va(s[a]):l===Tw?i+=Je.transform(s[a]):i+=s[a]}return i}}const wN=e=>typeof e=="number"?0:Je.test(e)?Je.getAnimatableNone(e):e;function bN(e){const t=Aw(e);return Rw(e)(t.map(wN))}const Xr={test:gN,parse:Aw,createTransformer:Rw,getAnimatableNone:bN};function hu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function kN({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=hu(c,l,e+1/3),i=hu(c,l,e),a=hu(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Ul(e,t){return n=>n>0?t:e}const Ve=(e,t,n)=>e+(t-e)*n,fu=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},jN=[Kd,ws,ii],SN=e=>jN.find(t=>t.test(e));function mg(e){const t=SN(e);if(!t)return!1;let n=t.parse(e);return t===ii&&(n=kN(n)),n}const gg=(e,t)=>{const n=mg(e),r=mg(t);if(!n||!r)return Ul(e,t);const s={...n};return i=>(s.red=fu(n.red,r.red,i),s.green=fu(n.green,r.green,i),s.blue=fu(n.blue,r.blue,i),s.alpha=Ve(n.alpha,r.alpha,i),ws.transform(s))},Gd=new Set(["none","hidden"]);function NN(e,t){return Gd.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function _N(e,t){return n=>Ve(e,t,n)}function Zf(e){return typeof e=="number"?_N:typeof e=="string"?Yf(e)?Ul:Je.test(e)?gg:CN:Array.isArray(e)?Iw:typeof e=="object"?Je.test(e)?gg:EN:Ul}function Iw(e,t){const n=[...e],r=n.length,s=e.map((i,a)=>Zf(i)(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function EN(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Zf(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function PN(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][r[i]],l=e.values[a]??0;n[s]=l,r[i]++}return n}const CN=(e,t)=>{const n=Xr.createTransformer(t),r=Qa(e),s=Qa(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Gd.has(e)&&!s.values.length||Gd.has(t)&&!r.values.length?NN(e,t):uo(Iw(PN(r,s),s.values),n):Ul(e,t)};function Dw(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ve(e,t,n):Zf(e)(e,t)}const TN=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Me.update(t,n),stop:()=>Gr(t),now:()=>xt.isProcessing?xt.timestamp:Bt.now()}},Lw=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Bl=2e4;function ep(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Bl;)t+=n,r=e.next(t);return t>=Bl?1/0:t}function AN(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(ep(r),Bl);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:Kn(s)}}const RN=5;function Ow(e,t,n){const r=Math.max(t-RN,0);return mw(n-e(r),t-r)}const He={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pu=.001;function IN({duration:e=He.duration,bounce:t=He.bounce,velocity:n=He.velocity,mass:r=He.mass}){let s,i,a=1-t;a=fr(He.minDamping,He.maxDamping,a),e=fr(He.minDuration,He.maxDuration,Kn(e)),a<1?(s=u=>{const d=u*a,h=d*e,p=d-n,f=Xd(u,a),m=Math.exp(-h);return pu-p/f*m},i=u=>{const h=u*a*e,p=h*n+n,f=Math.pow(a,2)*Math.pow(u,2)*e,m=Math.exp(-h),v=Xd(Math.pow(u,2),a);return(-s(u)+pu>0?-1:1)*((p-f)*m)/v}):(s=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-pu+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=LN(s,i,l);if(e=qn(e),isNaN(c))return{stiffness:He.stiffness,damping:He.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const DN=12;function LN(e,t,n){let r=n;for(let s=1;s<DN;s++)r=r-e(r)/t(r);return r}function Xd(e,t){return e*Math.sqrt(1-t*t)}const ON=["duration","bounce"],$N=["stiffness","damping","mass"];function yg(e,t){return t.some(n=>e[n]!==void 0)}function MN(e){let t={velocity:He.velocity,stiffness:He.stiffness,damping:He.damping,mass:He.mass,isResolvedFromDuration:!1,...e};if(!yg(e,$N)&&yg(e,ON))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*fr(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:He.mass,stiffness:s,damping:i}}else{const n=IN(e);t={...t,...n,mass:He.mass},t.isResolvedFromDuration=!0}return t}function Hl(e=He.visualDuration,t=He.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:f}=MN({...n,velocity:-Kn(n.velocity||0)}),m=p||0,v=u/(2*Math.sqrt(c*d)),w=a-i,g=Kn(Math.sqrt(c/d)),x=Math.abs(w)<5;r||(r=x?He.restSpeed.granular:He.restSpeed.default),s||(s=x?He.restDelta.granular:He.restDelta.default);let y;if(v<1){const E=Xd(g,v);y=j=>{const P=Math.exp(-v*g*j);return a-P*((m+v*g*w)/E*Math.sin(E*j)+w*Math.cos(E*j))}}else if(v===1)y=E=>a-Math.exp(-g*E)*(w+(m+g*w)*E);else{const E=g*Math.sqrt(v*v-1);y=j=>{const P=Math.exp(-v*g*j),T=Math.min(E*j,300);return a-P*((m+v*g*w)*Math.sinh(T)+E*w*Math.cosh(T))/E}}const S={calculatedDuration:f&&h||null,next:E=>{const j=y(E);if(f)l.done=E>=h;else{let P=E===0?m:0;v<1&&(P=E===0?qn(m):Ow(y,E,j));const T=Math.abs(P)<=r,$=Math.abs(a-j)<=s;l.done=T&&$}return l.value=l.done?a:j,l},toString:()=>{const E=Math.min(ep(S),Bl),j=Lw(P=>S.next(E*P).value,E,30);return E+"ms "+j},toTransition:()=>{}};return S}Hl.applyToOptions=e=>{const t=AN(e,100,Hl);return e.ease=t.ease,e.duration=qn(t.duration),e.type="keyframes",e};function Yd({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],p={done:!1,value:h},f=T=>l!==void 0&&T<l||c!==void 0&&T>c,m=T=>l===void 0?c:c===void 0||Math.abs(l-T)<Math.abs(c-T)?l:c;let v=n*t;const w=h+v,g=a===void 0?w:a(w);g!==w&&(v=g-h);const x=T=>-v*Math.exp(-T/r),y=T=>g+x(T),S=T=>{const $=x(T),L=y(T);p.done=Math.abs($)<=u,p.value=p.done?g:L};let E,j;const P=T=>{f(p.value)&&(E=T,j=Hl({keyframes:[p.value,m(p.value)],velocity:Ow(y,T,p.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:T=>{let $=!1;return!j&&E===void 0&&($=!0,S(T),P(T)),E!==void 0&&T>=E?j.next(T-E):(!$&&S(T),p)}}}function FN(e,t,n){const r=[],s=n||pr.mix||Dw,i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||gn:t;l=uo(c,l)}r.push(l)}return r}function VN(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Hf(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=FN(t,r,s),c=l.length,u=d=>{if(a&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const p=Xa(e[h],e[h+1],d);return l[h](p)};return n?d=>u(fr(e[0],e[i-1],d)):u}function zN(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Xa(0,t,r);e.push(Ve(n,1,s))}}function UN(e){const t=[0];return zN(t,e.length-1),t}function BN(e,t){return e.map(n=>n*t)}function HN(e,t){return e.map(()=>t||Sw).splice(0,e.length-1)}function wa({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=tN(r)?r.map(hg):hg(r),i={done:!1,value:t[0]},a=BN(n&&n.length===t.length?n:UN(t),e),l=VN(a,t,{ease:Array.isArray(s)?s:HN(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const WN=e=>e!==null;function tp(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(WN),l=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const qN={decay:Yd,inertia:Yd,tween:wa,keyframes:wa,spring:Hl};function $w(e){typeof e.type=="string"&&(e.type=qN[e.type])}class np{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const KN=e=>e/100;class rp extends np{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Bt.now()&&this.tick(Bt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;$w(t);const{type:n=wa,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=t;let{keyframes:l}=t;const c=n||wa;c!==wa&&typeof l[0]!="number"&&(this.mixKeyframes=uo(KN,Dw(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=ep(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:f,type:m,onUpdate:v,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let y=this.currentTime,S=r;if(h){const T=Math.min(this.currentTime,s)/l;let $=Math.floor(T),L=T%1;!L&&T>=1&&(L=1),L===1&&$--,$=Math.min($,h+1),!!($%2)&&(p==="reverse"?(L=1-L,f&&(L-=f/l)):p==="mirror"&&(S=a)),y=fr(0,1,L)*l}const E=x?{done:!1,value:d[0]}:S.next(y);i&&(E.value=i(E.value));let{done:j}=E;!x&&c!==null&&(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return P&&m!==Yd&&(E.value=tp(d,this.options,w,this.speed)),v&&v(E.value),P&&this.finish(),E}then(t,n){return this.finished.then(t,n)}get duration(){return Kn(this.calculatedDuration)}get time(){return Kn(this.currentTime)}set time(t){var n;t=qn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Bt.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Kn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=TN,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function GN(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const bs=e=>e*180/Math.PI,Qd=e=>{const t=bs(Math.atan2(e[1],e[0]));return Jd(t)},XN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Qd,rotateZ:Qd,skewX:e=>bs(Math.atan(e[1])),skewY:e=>bs(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Jd=e=>(e=e%360,e<0&&(e+=360),e),xg=Qd,vg=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),wg=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),YN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vg,scaleY:wg,scale:e=>(vg(e)+wg(e))/2,rotateX:e=>Jd(bs(Math.atan2(e[6],e[5]))),rotateY:e=>Jd(bs(Math.atan2(-e[2],e[0]))),rotateZ:xg,rotate:xg,skewX:e=>bs(Math.atan(e[4])),skewY:e=>bs(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Zd(e){return e.includes("scale")?1:0}function eh(e,t){if(!e||e==="none")return Zd(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=YN,s=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=XN,s=l}if(!s)return Zd(t);const i=r[t],a=s[1].split(",").map(JN);return typeof i=="function"?i(a):a[i]}const QN=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return eh(n,t)};function JN(e){return parseFloat(e.trim())}const Mi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fi=new Set(Mi),bg=e=>e===$i||e===le,ZN=new Set(["x","y","z"]),e_=Mi.filter(e=>!ZN.has(e));function t_(e){const t=[];return e_.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ss={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>eh(t,"x"),y:(e,{transform:t})=>eh(t,"y")};Ss.translateX=Ss.x;Ss.translateY=Ss.y;const Ns=new Set;let th=!1,nh=!1,rh=!1;function Mw(){if(nh){const e=Array.from(Ns).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=t_(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var l;(l=r.getValue(i))==null||l.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}nh=!1,th=!1,Ns.forEach(e=>e.complete(rh)),Ns.clear()}function Fw(){Ns.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(nh=!0)})}function n_(){rh=!0,Fw(),Mw(),rh=!1}class sp{constructor(t,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Ns.add(this),th||(th=!0,Me.read(Fw),Me.resolveKeyframes(Mw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),s&&i===void 0&&s.set(t[0])}GN(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ns.delete(this)}cancel(){this.state==="scheduled"&&(Ns.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const r_=e=>e.startsWith("--");function s_(e,t,n){r_(t)?e.style.setProperty(t,n):e.style[t]=n}const i_=Wf(()=>window.ScrollTimeline!==void 0),a_={};function o_(e,t){const n=Wf(e);return()=>a_[t]??n()}const Vw=o_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),la=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,kg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:la([0,.65,.55,1]),circOut:la([.55,0,1,.45]),backIn:la([.31,.01,.66,-.59]),backOut:la([.33,1.53,.69,.99])};function zw(e,t){if(e)return typeof e=="function"?Vw()?Lw(e,t):"ease-out":Nw(e)?la(e):Array.isArray(e)?e.map(n=>zw(n,t)||kg.easeOut):kg[e]}function l_(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const h=zw(l,s);Array.isArray(h)&&(d.easing=h);const p={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(d,p)}function Uw(e){return typeof e=="function"&&"applyToOptions"in e}function c_({type:e,...t}){return Uw(e)&&Vw()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class u_ extends np{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,Hf(typeof t.type!="string");const u=c_(t);this.animation=l_(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=tp(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):s_(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Kn(Number(t))}get time(){return Kn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=qn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&i_()?(this.animation.timeline=t,gn):n(this)}}const Bw={anticipate:bw,backInOut:ww,circInOut:jw};function d_(e){return e in Bw}function h_(e){typeof e.ease=="string"&&d_(e.ease)&&(e.ease=Bw[e.ease])}const jg=10;class f_ extends u_{constructor(t){h_(t),$w(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new rp({...a,autoplay:!1}),c=qn(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-jg).value,l.sample(c).value,jg),l.stop()}}const Sg=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Xr.test(e)||e==="0")&&!e.startsWith("url("));function p_(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function m_(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=Sg(s,t),l=Sg(i,t);return!a||!l?!1:p_(e)||(n==="spring"||Uw(n))&&r}function sh(e){e.duration=0,e.type}const g_=new Set(["opacity","clipPath","filter","transform"]),y_=Wf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function x_(e){var d;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return y_()&&n&&g_.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const v_=40;class w_ extends np{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var m;super(),this.stop=()=>{var v,w;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Bt.now();const p={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:c,motionValue:u,element:d,...h},f=(d==null?void 0:d.KeyframeResolver)||sp;this.keyframeResolver=new f(l,(v,w,g)=>this.onKeyframesResolved(v,w,p,!g),c,u,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Bt.now(),m_(t,i,a,l)||((pr.instantAnimations||!c)&&(d==null||d(tp(t,r,n))),t[0]=t[t.length-1],sh(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>v_?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},f=!u&&x_(p)?new f_({...p,element:p.motionValue.owner.current}):new rp(p);f.finished.then(()=>this.notifyFinished()).catch(gn),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),n_()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const b_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function k_(e){const t=b_.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function Hw(e,t,n=1){const[r,s]=k_(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return hw(a)?parseFloat(a):a}return Yf(s)?Hw(s,t,n+1):s}function ip(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Ww=new Set(["width","height","top","left","right","bottom",...Mi]),j_={test:e=>e==="auto",parse:e=>e},qw=e=>t=>t.test(e),Kw=[$i,le,Gn,Nr,pN,fN,j_],Ng=e=>Kw.find(qw(e));function S_(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||pw(e):!0}const N_=new Set(["brightness","contrast","saturate","opacity"]);function __(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Qf)||[];if(!r)return e;const s=n.replace(r,"");let i=N_.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const E_=/\b([a-z-]*)\(.*?\)/gu,ih={...Xr,getAnimatableNone:e=>{const t=e.match(E_);return t?t.map(__).join(" "):e}},_g={...$i,transform:Math.round},P_={rotate:Nr,rotateX:Nr,rotateY:Nr,rotateZ:Nr,scale:Fo,scaleX:Fo,scaleY:Fo,scaleZ:Fo,skew:Nr,skewX:Nr,skewY:Nr,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:Ya,originX:fg,originY:fg,originZ:le},ap={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le,...P_,zIndex:_g,fillOpacity:Ya,strokeOpacity:Ya,numOctaves:_g},C_={...ap,color:Je,backgroundColor:Je,outlineColor:Je,fill:Je,stroke:Je,borderColor:Je,borderTopColor:Je,borderRightColor:Je,borderBottomColor:Je,borderLeftColor:Je,filter:ih,WebkitFilter:ih},Gw=e=>C_[e];function Xw(e,t){let n=Gw(e);return n!==ih&&(n=Xr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const T_=new Set(["auto","none","0"]);function A_(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!T_.has(i)&&Qa(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=Xw(n,s)}class R_ extends sp{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Yf(u))){const d=Hw(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Ww.has(r)||t.length!==2)return;const[s,i]=t,a=Ng(s),l=Ng(i);if(a!==l)if(bg(a)&&bg(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Ss[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||S_(t[s]))&&r.push(s);r.length&&A_(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ss[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=Ss[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function I_(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Yw=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Qw(e){return fw(e)&&"offsetHeight"in e}const Eg=30,D_=e=>!isNaN(parseFloat(e));class L_{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Bt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Bt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=D_(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new qf);const r=this.events[t].add(n);return t==="change"?()=>{r(),Me.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Bt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Eg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Eg);return mw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pi(e,t){return new L_(e,t)}const{schedule:op}=_w(queueMicrotask,!1),kn={x:!1,y:!1};function Jw(){return kn.x||kn.y}function O_(e){return e==="x"||e==="y"?kn[e]?null:(kn[e]=!0,()=>{kn[e]=!1}):kn.x||kn.y?null:(kn.x=kn.y=!0,()=>{kn.x=kn.y=!1})}function Zw(e,t){const n=I_(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Pg(e){return!(e.pointerType==="touch"||Jw())}function $_(e,t,n={}){const[r,s,i]=Zw(e,n),a=l=>{if(!Pg(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{Pg(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",a,s)}),i}const eb=(e,t)=>t?e===t?!0:eb(e,t.parentElement):!1,lp=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,M_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function F_(e){return M_.has(e.tagName)||e.tabIndex!==-1}const ul=new WeakSet;function Cg(e){return t=>{t.key==="Enter"&&e(t)}}function mu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const V_=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Cg(()=>{if(ul.has(n))return;mu(n,"down");const s=Cg(()=>{mu(n,"up")}),i=()=>mu(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Tg(e){return lp(e)&&!Jw()}function z_(e,t,n={}){const[r,s,i]=Zw(e,n),a=l=>{const c=l.currentTarget;if(!Tg(l))return;ul.add(c);const u=t(c,l),d=(f,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),ul.has(c)&&ul.delete(c),Tg(f)&&typeof u=="function"&&u(f,{success:m})},h=f=>{d(f,c===window||c===document||n.useGlobalTarget||eb(c,f.target))},p=f=>{d(f,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",p,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),Qw(l)&&(l.addEventListener("focus",u=>V_(u,s)),!F_(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function tb(e){return fw(e)&&"ownerSVGElement"in e}function U_(e){return tb(e)&&e.tagName==="svg"}const Pt=e=>!!(e&&e.getVelocity),B_=[...Kw,Je,Xr],H_=e=>B_.find(qw(e)),cp=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class W_ extends b.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Qw(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function q_({children:e,isPresent:t,anchorX:n,root:r}){const s=b.useId(),i=b.useRef(null),a=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=b.useContext(cp);return b.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:h,right:p}=a.current;if(t||!i.current||!c||!u)return;const f=n==="left"?`left: ${h}`:`right: ${p}`;i.current.dataset.motionPopId=s;const m=document.createElement("style");l&&(m.nonce=l);const v=r??document.head;return v.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${f}px !important;
            top: ${d}px !important;
          }
        `),()=>{v.contains(m)&&v.removeChild(m)}},[t]),o.jsx(W_,{isPresent:t,childRef:i,sizeRef:a,children:b.cloneElement(e,{ref:i})})}const K_=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a,anchorX:l,root:c})=>{const u=Vf(G_),d=b.useId();let h=!0,p=b.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:n,custom:s,onExitComplete:f=>{u.set(f,!0);for(const m of u.values())if(!m)return;r&&r()},register:f=>(u.set(f,!1),()=>u.delete(f))}),[n,u,r]);return i&&h&&(p={...p}),b.useMemo(()=>{u.forEach((f,m)=>u.set(m,!1))},[n]),b.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),a==="popLayout"&&(e=o.jsx(q_,{isPresent:n,anchorX:l,root:c,children:e})),o.jsx(wc.Provider,{value:p,children:e})};function G_(){return new Map}function nb(e=!0){const t=b.useContext(wc);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=b.useId();b.useEffect(()=>{if(e)return s(i)},[e]);const a=b.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,a]:[!0]}const Vo=e=>e.key||"";function Ag(e){const t=[];return b.Children.forEach(e,n=>{b.isValidElement(n)&&t.push(n)}),t}const Zt=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[u,d]=nb(a),h=b.useMemo(()=>Ag(e),[e]),p=a&&!u?[]:h.map(Vo),f=b.useRef(!0),m=b.useRef(h),v=Vf(()=>new Map),[w,g]=b.useState(h),[x,y]=b.useState(h);dw(()=>{f.current=!1,m.current=h;for(let j=0;j<x.length;j++){const P=Vo(x[j]);p.includes(P)?v.delete(P):v.get(P)!==!0&&v.set(P,!1)}},[x,p.length,p.join("-")]);const S=[];if(h!==w){let j=[...h];for(let P=0;P<x.length;P++){const T=x[P],$=Vo(T);p.includes($)||(j.splice(P,0,T),S.push(T))}return i==="wait"&&S.length&&(j=S),y(Ag(j)),g(h),null}const{forceRender:E}=b.useContext(Ff);return o.jsx(o.Fragment,{children:x.map(j=>{const P=Vo(j),T=a&&!u?!1:h===x||p.includes(P),$=()=>{if(v.has(P))v.set(P,!0);else return;let L=!0;v.forEach(F=>{F||(L=!1)}),L&&(E==null||E(),y(m.current),a&&(d==null||d()),r&&r())};return o.jsx(K_,{isPresent:T,initial:!f.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:T?void 0:$,anchorX:l,children:j},P)})})},rb=b.createContext({strict:!1}),Rg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ci={};for(const e in Rg)Ci[e]={isEnabled:t=>Rg[e].some(n=>!!t[n])};function X_(e){for(const t in e)Ci[t]={...Ci[t],...e[t]}}const Y_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Y_.has(e)}let sb=e=>!Wl(e);function Q_(e){typeof e=="function"&&(sb=t=>t.startsWith("on")?!Wl(t):e(t))}try{Q_(require("@emotion/is-prop-valid").default)}catch{}function J_(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(sb(s)||n===!0&&Wl(s)||!t&&!Wl(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const bc=b.createContext({});function kc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ja(e){return typeof e=="string"||Array.isArray(e)}const up=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dp=["initial",...up];function jc(e){return kc(e.animate)||dp.some(t=>Ja(e[t]))}function ib(e){return!!(jc(e)||e.variants)}function Z_(e,t){if(jc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ja(n)?n:void 0,animate:Ja(r)?r:void 0}}return e.inherit!==!1?t:{}}function eE(e){const{initial:t,animate:n}=Z_(e,b.useContext(bc));return b.useMemo(()=>({initial:t,animate:n}),[Ig(t),Ig(n)])}function Ig(e){return Array.isArray(e)?e.join(" "):e}const Za={};function tE(e){for(const t in e)Za[t]=e[t],Xf(t)&&(Za[t].isCSSVariable=!0)}function ab(e,{layout:t,layoutId:n}){return Fi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Za[e]||e==="opacity")}const nE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rE=Mi.length;function sE(e,t,n){let r="",s=!0;for(let i=0;i<rE;i++){const a=Mi[i],l=e[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=Yw(l,ap[a]);if(!c){s=!1;const d=nE[a]||a;r+=`${d}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function hp(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let a=!1,l=!1;for(const c in t){const u=t[c];if(Fi.has(c)){a=!0;continue}else if(Xf(c)){s[c]=u;continue}else{const d=Yw(u,ap[c]);c.startsWith("origin")?(l=!0,i[c]=d):r[c]=d}}if(t.transform||(a||n?r.transform=sE(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const fp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ob(e,t,n){for(const r in t)!Pt(t[r])&&!ab(r,n)&&(e[r]=t[r])}function iE({transformTemplate:e},t){return b.useMemo(()=>{const n=fp();return hp(n,t,e),Object.assign({},n.vars,n.style)},[t])}function aE(e,t){const n=e.style||{},r={};return ob(r,n,e),Object.assign(r,iE(e,t)),r}function oE(e,t){const n={},r=aE(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const lE={offset:"stroke-dashoffset",array:"stroke-dasharray"},cE={offset:"strokeDashoffset",array:"strokeDasharray"};function uE(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?lE:cE;e[i.offset]=le.transform(-r);const a=le.transform(t),l=le.transform(n);e[i.array]=`${a} ${l}`}function lb(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...l},c,u,d){if(hp(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p}=e;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&uE(h,s,i,a,!1)}const cb=()=>({...fp(),attrs:{}}),ub=e=>typeof e=="string"&&e.toLowerCase()==="svg";function dE(e,t,n,r){const s=b.useMemo(()=>{const i=cb();return lb(i,t,ub(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};ob(i,e.style,e),s.style={...i,...s.style}}return s}const hE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pp(e){return typeof e!="string"||e.includes("-")?!1:!!(hE.indexOf(e)>-1||/[A-Z]/u.test(e))}function fE(e,t,n,{latestValues:r},s,i=!1){const l=(pp(e)?dE:oE)(t,r,s,e),c=J_(t,typeof e=="string",i),u=e!==b.Fragment?{...c,...l,ref:n}:{},{children:d}=t,h=b.useMemo(()=>Pt(d)?d.get():d,[d]);return b.createElement(e,{...u,children:h})}function Dg(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function mp(e,t,n,r){if(typeof t=="function"){const[s,i]=Dg(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Dg(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function dl(e){return Pt(e)?e.get():e}function pE({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:mE(n,r,s,e),renderState:t()}}function mE(e,t,n,r){const s={},i=r(e,{});for(const p in i)s[p]=dl(i[p]);let{initial:a,animate:l}=e;const c=jc(e),u=ib(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;if(h&&typeof h!="boolean"&&!kc(h)){const p=Array.isArray(h)?h:[h];for(let f=0;f<p.length;f++){const m=mp(e,p[f]);if(m){const{transitionEnd:v,transition:w,...g}=m;for(const x in g){let y=g[x];if(Array.isArray(y)){const S=d?y.length-1:0;y=y[S]}y!==null&&(s[x]=y)}for(const x in v)s[x]=v[x]}}}return s}const db=e=>(t,n)=>{const r=b.useContext(bc),s=b.useContext(wc),i=()=>pE(e,t,r,s);return n?i():Vf(i)};function gp(e,t,n){var i;const{style:r}=e,s={};for(const a in r)(Pt(r[a])||t.style&&Pt(t.style[a])||ab(a,e)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const gE=db({scrapeMotionValuesFromProps:gp,createRenderState:fp});function hb(e,t,n){const r=gp(e,t,n);for(const s in e)if(Pt(e[s])||Pt(t[s])){const i=Mi.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const yE=db({scrapeMotionValuesFromProps:hb,createRenderState:cb}),xE=Symbol.for("motionComponentSymbol");function ai(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function vE(e,t,n){return b.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ai(n)&&(n.current=r))},[t])}const yp=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),wE="framerAppearId",fb="data-"+yp(wE),pb=b.createContext({});function bE(e,t,n,r,s){var v,w;const{visualElement:i}=b.useContext(bc),a=b.useContext(rb),l=b.useContext(wc),c=b.useContext(cp).reducedMotion,u=b.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=b.useContext(pb);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&kE(u.current,n,s,h);const p=b.useRef(!1);b.useInsertionEffect(()=>{d&&p.current&&d.update(n,l)});const f=n[fb],m=b.useRef(!!f&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,f))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,f)));return dw(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),b.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,f)}),m.current=!1),d.enteringChildren=void 0)}),d}function kE(e,t,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:mb(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||l&&ai(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function mb(e){if(e)return e.options.allowProjection!==!1?e.projection:mb(e.parent)}function gu(e,{forwardMotionProps:t=!1}={},n,r){n&&X_(n);const s=pp(e)?yE:gE;function i(l,c){let u;const d={...b.useContext(cp),...l,layoutId:jE(l)},{isStatic:h}=d,p=eE(l),f=s(l,h);if(!h&&zf){SE();const m=NE(d);u=m.MeasureLayout,p.visualElement=bE(e,f,d,r,m.ProjectionNode)}return o.jsxs(bc.Provider,{value:p,children:[u&&p.visualElement?o.jsx(u,{visualElement:p.visualElement,...d}):null,fE(e,l,vE(f,p.visualElement,c),f,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const a=b.forwardRef(i);return a[xE]=e,a}function jE({layoutId:e}){const t=b.useContext(Ff).id;return t&&e!==void 0?t+"-"+e:e}function SE(e,t){b.useContext(rb).strict}function NE(e){const{drag:t,layout:n}=Ci;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function _E(e,t){if(typeof Proxy>"u")return gu;const n=new Map,r=(i,a)=>gu(i,a,e,t),s=(i,a)=>r(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,gu(a,void 0,e,t)),n.get(a))})}function gb({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function EE({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function PE(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function yu(e){return e===void 0||e===1}function ah({scale:e,scaleX:t,scaleY:n}){return!yu(e)||!yu(t)||!yu(n)}function fs(e){return ah(e)||yb(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function yb(e){return Lg(e.x)||Lg(e.y)}function Lg(e){return e&&e!=="0%"}function ql(e,t,n){const r=e-n,s=t*r;return n+s}function Og(e,t,n,r,s){return s!==void 0&&(e=ql(e,s,r)),ql(e,n,r)+t}function oh(e,t=0,n=1,r,s){e.min=Og(e.min,t,n,r,s),e.max=Og(e.max,t,n,r,s)}function xb(e,{x:t,y:n}){oh(e.x,t.translate,t.scale,t.originPoint),oh(e.y,n.translate,n.scale,n.originPoint)}const $g=.999999999999,Mg=1.0000000000001;function CE(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=n[l],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&li(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,xb(e,a)),r&&fs(i.latestValues)&&li(e,i.latestValues))}t.x<Mg&&t.x>$g&&(t.x=1),t.y<Mg&&t.y>$g&&(t.y=1)}function oi(e,t){e.min=e.min+t,e.max=e.max+t}function Fg(e,t,n,r,s=.5){const i=Ve(e.min,e.max,s);oh(e,t,n,i,r)}function li(e,t){Fg(e.x,t.x,t.scaleX,t.scale,t.originX),Fg(e.y,t.y,t.scaleY,t.scale,t.originY)}function vb(e,t){return gb(PE(e.getBoundingClientRect(),t))}function TE(e,t,n){const r=vb(e,n),{scroll:s}=t;return s&&(oi(r.x,s.offset.x),oi(r.y,s.offset.y)),r}const Vg=()=>({translate:0,scale:1,origin:0,originPoint:0}),ci=()=>({x:Vg(),y:Vg()}),zg=()=>({min:0,max:0}),Ge=()=>({x:zg(),y:zg()}),lh={current:null},wb={current:!1};function AE(){if(wb.current=!0,!!zf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>lh.current=e.matches;e.addEventListener("change",t),t()}else lh.current=!1}const RE=new WeakMap;function IE(e,t,n){for(const r in t){const s=t[r],i=n[r];if(Pt(s))e.addValue(r,s);else if(Pt(i))e.addValue(r,Pi(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(r);e.addValue(r,Pi(a!==void 0?a:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Ug=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DE{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Bt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Me.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=jc(n),this.isVariantNode=ib(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const f=h[p];c[p]!==void 0&&Pt(f)&&f.set(c[p])}}mount(t){var n;this.current=t,RE.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),wb.current||AE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lh.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Gr(this.notifyUpdate),Gr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Fi.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Me.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ci){const n=Ci[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ge()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ug.length;r++){const s=Ug[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=t[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=IE(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Pi(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(hw(r)||pw(r))?r=parseFloat(r):!H_(r)&&Xr.test(n)&&(r=Xw(t,n)),this.setBaseTarget(t,Pt(r)?r.get():r)),Pt(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=mp(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Pt(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new qf),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){op.render(this.render)}}class bb extends DE{constructor(){super(...arguments),this.KeyframeResolver=R_}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Pt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function kb(e,{style:t,vars:n},r,s){const i=e.style;let a;for(a in t)i[a]=t[a];s==null||s.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function LE(e){return window.getComputedStyle(e)}class OE extends bb{constructor(){super(...arguments),this.type="html",this.renderInstance=kb}readValueFromInstance(t,n){var r;if(Fi.has(n))return(r=this.projection)!=null&&r.isProjecting?Zd(n):QN(t,n);{const s=LE(t),i=(Xf(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return vb(t,n)}build(t,n,r){hp(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return gp(t,n,r)}}const jb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $E(e,t,n,r){kb(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(jb.has(s)?s:yp(s),t.attrs[s])}class ME extends bb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ge}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Fi.has(n)){const r=Gw(n);return r&&r.default||0}return n=jb.has(n)?n:yp(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return hb(t,n,r)}build(t,n,r){lb(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){$E(t,n,r,s)}mount(t){this.isSVGTag=ub(t.tagName),super.mount(t)}}const FE=(e,t)=>pp(e)?new ME(t):new OE(t,{allowProjection:e!==b.Fragment});function yi(e,t,n){const r=e.getProps();return mp(r,t,n!==void 0?n:r.custom,e)}const ch=e=>Array.isArray(e);function VE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Pi(n))}function zE(e){return ch(e)?e[e.length-1]||0:e}function UE(e,t){const n=yi(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const l=zE(i[a]);VE(e,a,l)}}function BE(e){return!!(Pt(e)&&e.add)}function uh(e,t){const n=e.getValue("willChange");if(BE(n))return n.add(t);if(!n&&pr.WillChange){const r=new pr.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Sb(e){return e.props[fb]}const HE=e=>e!==null;function WE(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(HE),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const qE={type:"spring",stiffness:500,damping:25,restSpeed:10},KE=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),GE={type:"keyframes",duration:.8},XE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},YE=(e,{keyframes:t})=>t.length>2?GE:Fi.has(e)?e.startsWith("scale")?KE(t[1]):qE:XE;function QE({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const xp=(e,t,n,r={},s,i)=>a=>{const l=ip(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-qn(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:p=>{t.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};QE(l)||Object.assign(d,YE(e,d)),d.duration&&(d.duration=qn(d.duration)),d.repeatDelay&&(d.repeatDelay=qn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(sh(d),d.delay===0&&(h=!0)),(pr.instantAnimations||pr.skipAnimations)&&(h=!0,sh(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const p=WE(d.keyframes,l);if(p!==void 0){Me.update(()=>{d.onUpdate(p),d.onComplete()});return}}return l.isSync?new rp(d):new w_(d)};function JE({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Nb(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(i=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),p=l[d];if(p===void 0||u&&JE(u,d))continue;const f={delay:n,...ip(i||{},d)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===m&&!f.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const g=Sb(e);if(g){const x=window.MotionHandoffAnimation(g,d,Me);x!==null&&(f.startTime=x,v=!0)}}uh(e,d),h.start(xp(d,h,p,e.shouldReduceMotion&&Ww.has(d)?{type:!1}:f,e,v));const w=h.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{Me.update(()=>{a&&UE(e,a)})}),c}function _b(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),a=e.size,l=(a-1)*r;return typeof n=="function"?n(i,a):s===1?i*r:l-i*r}function dh(e,t,n={}){var c;const r=yi(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Nb(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=s;return ZE(e,t,u,d,h,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,a]:[a,i];return u().then(()=>d())}else return Promise.all([i(),a(n.delay)])}function ZE(e,t,n=0,r=0,s=0,i=1,a){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(dh(c,t,{...a,delay:n+(typeof r=="function"?0:r)+_b(e.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function eP(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>dh(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=dh(e,t,n);else{const s=typeof t=="function"?yi(e,t,n.custom):t;r=Promise.all(Nb(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Eb(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const tP=dp.length;function Pb(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Pb(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<tP;n++){const r=dp[n],s=e.props[r];(Ja(s)||s===!1)&&(t[r]=s)}return t}const nP=[...up].reverse(),rP=up.length;function sP(e){return t=>Promise.all(t.map(({animation:n,options:r})=>eP(e,n,r)))}function iP(e){let t=sP(e),n=Bg(),r=!0;const s=c=>(u,d)=>{var p;const h=yi(e,d,c==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:f,transitionEnd:m,...v}=h;u={...u,...v,...m}}return u};function i(c){t=c(e)}function a(c){const{props:u}=e,d=Pb(e.parent)||{},h=[],p=new Set;let f={},m=1/0;for(let w=0;w<rP;w++){const g=nP[w],x=n[g],y=u[g]!==void 0?u[g]:d[g],S=Ja(y),E=g===c?x.isActive:null;E===!1&&(m=w);let j=y===d[g]&&y!==u[g]&&S;if(j&&r&&e.manuallyAnimateOnMount&&(j=!1),x.protectedKeys={...f},!x.isActive&&E===null||!y&&!x.prevProp||kc(y)||typeof y=="boolean")continue;const P=aP(x.prevProp,y);let T=P||g===c&&x.isActive&&!j&&S||w>m&&S,$=!1;const L=Array.isArray(y)?y:[y];let F=L.reduce(s(g),{});E===!1&&(F={});const{prevResolvedValues:q={}}=x,he={...q,...F},O=A=>{T=!0,p.has(A)&&($=!0,p.delete(A)),x.needsAnimating[A]=!0;const C=e.getValue(A);C&&(C.liveStyle=!1)};for(const A in he){const C=F[A],z=q[A];if(f.hasOwnProperty(A))continue;let k=!1;ch(C)&&ch(z)?k=!Eb(C,z):k=C!==z,k?C!=null?O(A):p.add(A):C!==void 0&&p.has(A)?O(A):x.protectedKeys[A]=!0}x.prevProp=y,x.prevResolvedValues=F,x.isActive&&(f={...f,...F}),r&&e.blockInitialAnimation&&(T=!1);const I=j&&P;T&&(!I||$)&&h.push(...L.map(A=>{const C={type:g};if(typeof A=="string"&&r&&!I&&e.manuallyAnimateOnMount&&e.parent){const{parent:z}=e,k=yi(z,A);if(z.enteringChildren&&k){const{delayChildren:Q}=k.transition||{};C.delay=_b(z.enteringChildren,e,Q)}}return{animation:A,options:C}}))}if(p.size){const w={};if(typeof u.initial!="boolean"){const g=yi(e,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(w.transition=g.transition)}p.forEach(g=>{const x=e.getBaseTarget(g),y=e.getValue(g);y&&(y.liveStyle=!0),w[g]=x??null}),h.push({animation:w})}let v=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(p=>{var f;return(f=p.animationState)==null?void 0:f.setActive(c,u)}),n[c].isActive=u;const d=a(c);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Bg(),r=!0}}}function aP(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Eb(t,e):!1}function os(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Bg(){return{animate:os(!0),whileInView:os(),whileHover:os(),whileTap:os(),whileDrag:os(),whileFocus:os(),exit:os()}}class es{constructor(t){this.isMounted=!1,this.node=t}update(){}}class oP extends es{constructor(t){super(t),t.animationState||(t.animationState=iP(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();kc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let lP=0;class cP extends es{constructor(){super(...arguments),this.id=lP++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const uP={animation:{Feature:oP},exit:{Feature:cP}};function eo(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function po(e){return{point:{x:e.pageX,y:e.pageY}}}const dP=e=>t=>lp(t)&&e(t,po(t));function ba(e,t,n,r){return eo(e,t,dP(n),r)}const Cb=1e-4,hP=1-Cb,fP=1+Cb,Tb=.01,pP=0-Tb,mP=0+Tb;function Lt(e){return e.max-e.min}function gP(e,t,n){return Math.abs(e-t)<=n}function Hg(e,t,n,r=.5){e.origin=r,e.originPoint=Ve(t.min,t.max,e.origin),e.scale=Lt(n)/Lt(t),e.translate=Ve(n.min,n.max,e.origin)-e.originPoint,(e.scale>=hP&&e.scale<=fP||isNaN(e.scale))&&(e.scale=1),(e.translate>=pP&&e.translate<=mP||isNaN(e.translate))&&(e.translate=0)}function ka(e,t,n,r){Hg(e.x,t.x,n.x,r?r.originX:void 0),Hg(e.y,t.y,n.y,r?r.originY:void 0)}function Wg(e,t,n){e.min=n.min+t.min,e.max=e.min+Lt(t)}function yP(e,t,n){Wg(e.x,t.x,n.x),Wg(e.y,t.y,n.y)}function qg(e,t,n){e.min=t.min-n.min,e.max=e.min+Lt(t)}function ja(e,t,n){qg(e.x,t.x,n.x),qg(e.y,t.y,n.y)}function un(e){return[e("x"),e("y")]}const Ab=({current:e})=>e?e.ownerDocument.defaultView:null,Kg=(e,t)=>Math.abs(e-t);function xP(e,t){const n=Kg(e.x,t.x),r=Kg(e.y,t.y);return Math.sqrt(n**2+r**2)}class Rb{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=vu(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=xP(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!m)return;const{point:v}=p,{timestamp:w}=xt;this.history.push({...v,timestamp:w});const{onStart:g,onMove:x}=this.handlers;f||(g&&g(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,p)},this.handlePointerMove=(p,f)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=xu(f,this.transformPagePoint),Me.update(this.updatePoint,!0)},this.handlePointerUp=(p,f)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=vu(p.type==="pointercancel"?this.lastMoveEventInfo:xu(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(p,g),v&&v(p,g)},!lp(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const l=po(t),c=xu(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=xt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,vu(c,this.history)),this.removeListeners=uo(ba(this.contextWindow,"pointermove",this.handlePointerMove),ba(this.contextWindow,"pointerup",this.handlePointerUp),ba(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Gr(this.updatePoint)}}function xu(e,t){return t?{point:t(e.point)}:e}function Gg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function vu({point:e},t){return{point:e,delta:Gg(e,Ib(t)),offset:Gg(e,vP(t)),velocity:wP(t,.1)}}function vP(e){return e[0]}function Ib(e){return e[e.length-1]}function wP(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Ib(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>qn(t)));)n--;if(!r)return{x:0,y:0};const i=Kn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function bP(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ve(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ve(n,e,r.max):Math.min(e,n)),e}function Xg(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function kP(e,{top:t,left:n,bottom:r,right:s}){return{x:Xg(e.x,n,s),y:Xg(e.y,t,r)}}function Yg(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function jP(e,t){return{x:Yg(e.x,t.x),y:Yg(e.y,t.y)}}function SP(e,t){let n=.5;const r=Lt(e),s=Lt(t);return s>r?n=Xa(t.min,t.max-r,e.min):r>s&&(n=Xa(e.min,e.max-s,t.min)),fr(0,1,n)}function NP(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const hh=.35;function _P(e=hh){return e===!1?e=0:e===!0&&(e=hh),{x:Qg(e,"left","right"),y:Qg(e,"top","bottom")}}function Qg(e,t,n){return{min:Jg(e,t),max:Jg(e,n)}}function Jg(e,t){return typeof e=="number"?e:e[t]||0}const EP=new WeakMap;class PP{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ge(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(po(h).point)},a=(h,p)=>{const{drag:f,dragPropagation:m,onDragStart:v}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=O_(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),un(g=>{let x=this.getAxisMotionValue(g).get()||0;if(Gn.test(x)){const{projection:y}=this.visualElement;if(y&&y.layout){const S=y.layout.layoutBox[g];S&&(x=Lt(S)*(parseFloat(x)/100))}}this.originPoint[g]=x}),v&&Me.postRender(()=>v(h,p)),uh(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:v,onDrag:w}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:g}=p;if(m&&this.currentDirection===null){this.currentDirection=CP(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,g),this.updateAxis("y",p.point,g),this.visualElement.render(),w&&w(h,p)},c=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>un(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Rb(t,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Ab(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Me.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!zo(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=bP(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&ai(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=kP(r.layoutBox,t):this.constraints=!1,this.elastic=_P(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&un(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=NP(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ai(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=TE(r,s.root,this.visualElement.getTransformPagePoint());let a=jP(s.layout.layoutBox,i);if(n){const l=n(EE(a));this.hasMutatedConstraints=!!l,l&&(a=gb(l))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=un(d=>{if(!zo(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const p=s?200:1e6,f=s?40:1e7,m={type:"inertia",velocity:r?t[d]:0,bounceStiffness:p,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return uh(this.visualElement,t),r.start(xp(t,r,0,n,this.visualElement,!1))}stopAnimation(){un(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){un(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){un(n=>{const{drag:r}=this.getProps();if(!zo(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];i.set(t[n]-Ve(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ai(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};un(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=SP({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),un(a=>{if(!zo(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Ve(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;EP.set(this.visualElement,this);const t=this.visualElement.current,n=ba(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ai(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Me.read(r);const a=eo(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(un(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=hh,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function zo(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function CP(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class TP extends es{constructor(t){super(t),this.removeGroupControls=gn,this.removeListeners=gn,this.controls=new PP(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zg=e=>(t,n)=>{e&&Me.postRender(()=>e(t,n))};class AP extends es{constructor(){super(...arguments),this.removePointerDownListener=gn}onPointerDown(t){this.session=new Rb(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ab(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Zg(t),onStart:Zg(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Me.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=ba(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function e0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Zi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(le.test(e))e=parseFloat(e);else return e;const n=e0(e,t.target.x),r=e0(e,t.target.y);return`${n}% ${r}%`}},RP={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Xr.parse(e);if(s.length>5)return r;const i=Xr.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=Ve(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};let wu=!1;class IP extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;tE(DP),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),wu&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),hl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,wu=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Me.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),op.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;wu=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Db(e){const[t,n]=nb(),r=b.useContext(Ff);return o.jsx(IP,{...e,layoutGroup:r,switchLayoutGroup:b.useContext(pb),isPresent:t,safeToRemove:n})}const DP={borderRadius:{...Zi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zi,borderTopRightRadius:Zi,borderBottomLeftRadius:Zi,borderBottomRightRadius:Zi,boxShadow:RP};function LP(e,t,n){const r=Pt(e)?e:Pi(e);return r.start(xp("",r,t,n)),r.animation}const OP=(e,t)=>e.depth-t.depth;class $P{constructor(){this.children=[],this.isDirty=!1}add(t){Uf(this.children,t),this.isDirty=!0}remove(t){Bf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(OP),this.isDirty=!1,this.children.forEach(t)}}function MP(e,t){const n=Bt.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Gr(r),e(i-t))};return Me.setup(r,!0),()=>Gr(r)}const Lb=["TopLeft","TopRight","BottomLeft","BottomRight"],FP=Lb.length,t0=e=>typeof e=="string"?parseFloat(e):e,n0=e=>typeof e=="number"||le.test(e);function VP(e,t,n,r,s,i){s?(e.opacity=Ve(0,n.opacity??1,zP(r)),e.opacityExit=Ve(t.opacity??1,0,UP(r))):i&&(e.opacity=Ve(t.opacity??1,n.opacity??1,r));for(let a=0;a<FP;a++){const l=`border${Lb[a]}Radius`;let c=r0(t,l),u=r0(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||n0(c)===n0(u)?(e[l]=Math.max(Ve(t0(c),t0(u),r),0),(Gn.test(u)||Gn.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Ve(t.rotate||0,n.rotate||0,r))}function r0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const zP=Ob(0,.5,kw),UP=Ob(.5,.95,gn);function Ob(e,t,n){return r=>r<e?0:r>t?1:n(Xa(e,t,r))}function s0(e,t){e.min=t.min,e.max=t.max}function cn(e,t){s0(e.x,t.x),s0(e.y,t.y)}function i0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function a0(e,t,n,r,s){return e-=t,e=ql(e,1/n,r),s!==void 0&&(e=ql(e,1/s,r)),e}function BP(e,t=0,n=1,r=.5,s,i=e,a=e){if(Gn.test(t)&&(t=parseFloat(t),t=Ve(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Ve(i.min,i.max,r);e===i&&(l-=t),e.min=a0(e.min,t,n,l,s),e.max=a0(e.max,t,n,l,s)}function o0(e,t,[n,r,s],i,a){BP(e,t[n],t[r],t[s],t.scale,i,a)}const HP=["x","scaleX","originX"],WP=["y","scaleY","originY"];function l0(e,t,n,r){o0(e.x,t,HP,n?n.x:void 0,r?r.x:void 0),o0(e.y,t,WP,n?n.y:void 0,r?r.y:void 0)}function c0(e){return e.translate===0&&e.scale===1}function $b(e){return c0(e.x)&&c0(e.y)}function u0(e,t){return e.min===t.min&&e.max===t.max}function qP(e,t){return u0(e.x,t.x)&&u0(e.y,t.y)}function d0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Mb(e,t){return d0(e.x,t.x)&&d0(e.y,t.y)}function h0(e){return Lt(e.x)/Lt(e.y)}function f0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class KP{constructor(){this.members=[]}add(t){Uf(this.members,t),t.scheduleRender()}remove(t){if(Bf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GP(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:p,skewX:f,skewY:m}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),f&&(r+=`skewX(${f}deg) `),m&&(r+=`skewY(${m}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const bu=["","X","Y","Z"],XP=1e3;let YP=0;function ku(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Fb(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Sb(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Me,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Fb(r)}function Vb({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=YP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ZP),this.nodes.forEach(rC),this.nodes.forEach(sC),this.nodes.forEach(eC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new $P)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new qf),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=tb(a)&&!U_(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const p=()=>this.root.updateBlockedByResize=!1;Me.read(()=>{h=window.innerWidth}),e(a,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,d&&d(),d=MP(p,250),hl.hasAnimatedSinceResize&&(hl.hasAnimatedSinceResize=!1,this.nodes.forEach(g0)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||cC,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=u.getProps(),g=!this.targetLayout||!Mb(this.targetLayout,f),x=!h&&p;if(this.options.layoutRoot||this.resumeFrom||x||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...ip(m,"layout"),onPlay:v,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(d,x)}else h||g0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Gr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iC),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Fb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(p0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(m0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nC),this.nodes.forEach(QP),this.nodes.forEach(JP)):this.nodes.forEach(m0),this.clearAllSnapshots();const l=Bt.now();xt.delta=fr(0,1e3/60,l-xt.timestamp),xt.timestamp=l,xt.isProcessing=!0,uu.update.process(xt),uu.preRender.process(xt),uu.render.process(xt),xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,op.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tC),this.sharedNodes.forEach(aC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Lt(this.snapshot.measuredBox.x)&&!Lt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!$b(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||fs(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),uC(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return Ge();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(dC))){const{scroll:d}=this.root;d&&(oi(l.x,d.offset.x),oi(l.y,d.offset.y))}return l}removeElementScroll(a){var c;const l=Ge();if(cn(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&cn(l,a),oi(l.x,h.offset.x),oi(l.y,h.offset.y))}return l}applyTransform(a,l=!1){const c=Ge();cn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&li(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),fs(d.latestValues)&&li(c,d.latestValues)}return fs(this.latestValues)&&li(c,this.latestValues),c}removeTransform(a){const l=Ge();cn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!fs(u.latestValues))continue;ah(u.latestValues)&&u.updateSnapshot();const d=Ge(),h=u.measurePageBox();cn(d,h),l0(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return fs(this.latestValues)&&l0(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var p;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=xt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),ja(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ge(),this.targetWithTransforms=Ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cn(this.target,this.layout.layoutBox),xb(this.target,this.targetDelta)):cn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),ja(this.relativeTargetOrigin,this.target,f.target),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ah(this.parent.latestValues)||yb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===xt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;cn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;CE(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ge());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(i0(this.prevProjectionDelta.x,this.projectionDelta.x),i0(this.prevProjectionDelta.y,this.projectionDelta.y)),ka(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!f0(this.projectionDelta.x,this.prevProjectionDelta.x)||!f0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ci(),this.projectionDelta=ci(),this.projectionDeltaWithTransform=ci()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=ci();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=Ge(),f=c?c.source:void 0,m=this.layout?this.layout.source:void 0,v=f!==m,w=this.getStack(),g=!w||w.members.length<=1,x=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(lC));this.animationProgress=0;let y;this.mixTargetDelta=S=>{const E=S/1e3;y0(h.x,a.x,E),y0(h.y,a.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ja(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oC(this.relativeTarget,this.relativeTargetOrigin,p,E),y&&qP(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Ge()),cn(y,this.relativeTarget)),v&&(this.animationValues=d,VP(d,u,this.latestValues,E,x,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Gr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Me.update(()=>{hl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Pi(0)),this.currentAnimation=LP(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&zb(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ge();const h=Lt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const p=Lt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+p}cn(l,c),li(l,d),ka(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new KP),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&ku("z",a,u,this.animationValues);for(let d=0;d<bu.length;d++)ku(`rotate${bu[d]}`,a,u,this.animationValues),ku(`skew${bu[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=dl(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=dl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!fs(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=GP(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),a.transform=h;const{x:p,y:f}=this.projectionDelta;a.transformOrigin=`${p.origin*100}% ${f.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Za){if(d[m]===void 0)continue;const{correct:v,applyTo:w,isCSSVariable:g}=Za[m],x=h==="none"?d[m]:v(d[m],u);if(w){const y=w.length;for(let S=0;S<y;S++)a[w[S]]=x}else g?this.options.visualElement.renderState.vars[m]=x:a[m]=x}this.options.layoutId&&(a.pointerEvents=u===this?dl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(p0),this.root.sharedNodes.clear()}}}function QP(e){e.updateLayout()}function JP(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i==="size"?un(h=>{const p=a?t.measuredBox[h]:t.layoutBox[h],f=Lt(p);p.min=r[h].min,p.max=p.min+f}):zb(i,t.layoutBox,r)&&un(h=>{const p=a?t.measuredBox[h]:t.layoutBox[h],f=Lt(r[h]);p.max=p.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+f)});const l=ci();ka(l,r,t.layoutBox);const c=ci();a?ka(c,e.applyTransform(s,!0),t.measuredBox):ka(c,r,t.layoutBox);const u=!$b(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:f}=h;if(p&&f){const m=Ge();ja(m,t.layoutBox,p.layoutBox);const v=Ge();ja(v,r,f.layoutBox),Mb(m,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=m,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function ZP(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function eC(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tC(e){e.clearSnapshot()}function p0(e){e.clearMeasurements()}function m0(e){e.isLayoutDirty=!1}function nC(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function g0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function rC(e){e.resolveTargetDelta()}function sC(e){e.calcProjection()}function iC(e){e.resetSkewAndRotation()}function aC(e){e.removeLeadSnapshot()}function y0(e,t,n){e.translate=Ve(t.translate,0,n),e.scale=Ve(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function x0(e,t,n,r){e.min=Ve(t.min,n.min,r),e.max=Ve(t.max,n.max,r)}function oC(e,t,n,r){x0(e.x,t.x,n.x,r),x0(e.y,t.y,n.y,r)}function lC(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const cC={duration:.45,ease:[.4,0,.1,1]},v0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),w0=v0("applewebkit/")&&!v0("chrome/")?Math.round:gn;function b0(e){e.min=w0(e.min),e.max=w0(e.max)}function uC(e){b0(e.x),b0(e.y)}function zb(e,t,n){return e==="position"||e==="preserve-aspect"&&!gP(h0(t),h0(n),.2)}function dC(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const hC=Vb({attachResizeListener:(e,t)=>eo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ju={current:void 0},Ub=Vb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ju.current){const e=new hC({});e.mount(window),e.setOptions({layoutScroll:!0}),ju.current=e}return ju.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),fC={pan:{Feature:AP},drag:{Feature:TP,ProjectionNode:Ub,MeasureLayout:Db}};function k0(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Me.postRender(()=>i(t,po(t)))}class pC extends es{mount(){const{current:t}=this.node;t&&(this.unmount=$_(t,(n,r)=>(k0(this.node,r,"Start"),s=>k0(this.node,s,"End"))))}unmount(){}}class mC extends es{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=uo(eo(this.node.current,"focus",()=>this.onFocus()),eo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function j0(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Me.postRender(()=>i(t,po(t)))}class gC extends es{mount(){const{current:t}=this.node;t&&(this.unmount=z_(t,(n,r)=>(j0(this.node,r,"Start"),(s,{success:i})=>j0(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fh=new WeakMap,Su=new WeakMap,yC=e=>{const t=fh.get(e.target);t&&t(e)},xC=e=>{e.forEach(yC)};function vC({root:e,...t}){const n=e||document;Su.has(n)||Su.set(n,{});const r=Su.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(xC,{root:e,...t})),r[s]}function wC(e,t,n){const r=vC(t);return fh.set(e,n),r.observe(e),()=>{fh.delete(e),r.unobserve(e)}}const bC={some:0,all:1};class kC extends es{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:bC[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=u?d:h;p&&p(c)};return wC(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(jC(t,n))&&this.startObserver()}unmount(){}}function jC({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const SC={inView:{Feature:kC},tap:{Feature:gC},focus:{Feature:mC},hover:{Feature:pC}},NC={layout:{ProjectionNode:Ub,MeasureLayout:Db}},_C={...uP,...SC,...fC,...NC},Y=_E(_C,FE);var EC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const PC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...c},u)=>b.createElement("svg",{ref:u,...EC,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${PC(e)}`,...c},[...t.map(([d,h])=>b.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n},Sc=G("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ts=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Kt=G("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),S0=G("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),ls=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ph=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),CC=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),TC=G("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Bb=G("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Nu=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),AC=G("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),et=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Sn=G("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),zn=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Un=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),en=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),RC=G("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Hb=G("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),Rn=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),vp=G("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),wp=G("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),IC=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Kl=G("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),DC=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),dt=G("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Wb=G("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),qb=G("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Kb=G("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),LC=G("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]),bp=G("GitPullRequest",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]),OC=G("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),_u=G("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),kp=G("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Cn=G("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),fl=G("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),$C=G("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),MC=G("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),FC=G("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),VC=G("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Gb=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),zC=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),N0=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),UC=G("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),BC=G("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),_s=G("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Eu=G("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),HC=G("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),WC=G("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),qC=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Es=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Pu=G("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Xb=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),_0=G("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),KC=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),to=G("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Gl=G("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),jp=G("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),GC=G("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),or=G("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),XC=G("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),YC=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Lr=G("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),mr=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),QC=G("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Sp=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Np=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Yb=G("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Yr=G("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Is=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xl=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function JC({isCompact:e}){const n=Qn().pathname.split("/").filter(s=>s),r={"strategic-directives":"Strategic Directives",prds:"PRDs",handoffs:"Handoffs",context:"Context Monitor",progress:"Progress Tracker"};return o.jsxs("nav",{className:`flex items-center ${e?"py-1 px-2":"py-2 px-4"}`,children:[o.jsxs(Wr,{to:"/",className:"flex items-center text-purple-100 hover:text-white transition-colors drop-shadow-sm",children:[o.jsx(kp,{className:e?"w-3 h-3":"w-4 h-4"}),o.jsx("span",{className:`${e?"ml-1 text-xs":"ml-2 text-sm"}`,children:"Dashboard"})]}),n.map((s,i)=>{const a=`/${n.slice(0,i+1).join("/")}`,l=i===n.length-1,c=r[s]||s;return o.jsxs(io.Fragment,{children:[o.jsx(en,{className:`${e?"w-3 h-3 mx-1":"w-4 h-4 mx-2"} text-purple-200`}),l?o.jsx("span",{className:`${e?"text-xs":"text-sm"} font-medium text-white drop-shadow-sm`,children:c}):o.jsx(Wr,{to:a,className:`${e?"text-xs":"text-sm"} text-purple-100 hover:text-white transition-colors drop-shadow-sm`,children:c})]},s)})]})}function Nc({onRefresh:e,isCompact:t=!1,isCollapsed:n=!1}){const[r,s]=b.useState("idle"),[i,a]=b.useState(""),[l,c]=b.useState(null),u=async()=>{console.log(" Manual Refresh: Starting database sync..."),s("refreshing"),a("Syncing with database...");try{const f=await fetch("/api/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"database"})});if(!f.ok)throw new Error("Database refresh failed");const m=await f.json();console.log(" Database refreshed:",m),e&&(console.log(" Triggering UI refresh..."),await e()),s("complete"),a(`Refreshed: ${m.sds||0} SDs, ${m.prds||0} PRDs`),c(new Date),setTimeout(()=>{s("idle"),a("")},3e3)}catch(f){console.error(" Refresh Error:",f),s("error"),a(`Failed: ${f.message}`),setTimeout(()=>{s("idle"),a("")},5e3)}},d=()=>{switch(r){case"refreshing":return o.jsx(wp,{className:"w-4 h-4 animate-spin"});case"complete":return o.jsx(et,{className:"w-4 h-4 text-green-500"});case"error":return o.jsx(ts,{className:"w-4 h-4 text-red-500"});default:return o.jsx(Es,{className:"w-4 h-4"})}},h=()=>{switch(r){case"refreshing":return"bg-blue-500 hover:bg-blue-600";case"complete":return"bg-green-500 hover:bg-green-600";case"error":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-600 hover:bg-gray-700"}},p=r==="refreshing";return o.jsxs("div",{className:"relative flex items-center",children:[o.jsxs(Y.button,{onClick:u,disabled:p,className:`
          flex items-center ${n?"justify-center w-full":""} transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
          ${h()} text-white rounded hover:opacity-90
          ${n?"px-2 py-2":t?"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm":"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base"}
        `,whileHover:{scale:p?1:1.05},whileTap:{scale:p?1:.95},title:n?"Manual Refresh - Sync with database":"Manually sync with database (automatic real-time updates are active)",children:[d(),!n&&o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:`${t?"ml-1":"ml-1 sm:ml-2"} hidden xs:inline`,children:[r==="idle"&&"Manual Refresh",r==="refreshing"&&"Syncing...",r==="complete"&&"Synced!",r==="error"&&"Failed"]}),o.jsxs("span",{className:"xs:hidden ml-1",children:[r==="idle"&&"",r==="refreshing"&&"",r==="complete"&&"",r==="error"&&""]})]})]}),o.jsx(Zt,{children:i&&!n&&o.jsx(Y.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`
              absolute left-full ml-4 top-1/2 transform -translate-y-1/2
              text-sm px-3 py-1 rounded-lg whitespace-nowrap z-50
              ${r==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":r==="complete"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}
              ${t?"text-xs px-2 py-0.5":""}
            `,children:i})}),o.jsx(Zt,{children:n&&i&&o.jsxs(Y.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`
              absolute left-full ml-2 top-1/2 transform -translate-y-1/2
              text-xs px-2 py-1 rounded-lg whitespace-nowrap z-50 pointer-events-none
              ${r==="error"?"bg-red-900 text-red-200":r==="complete"?"bg-green-900 text-green-200":"bg-blue-900 text-blue-200"}
            `,children:[r==="refreshing"&&"Syncing",r==="complete"&&"Done!",r==="error"&&"Error"]})}),l&&r==="idle"&&o.jsxs("div",{className:`absolute left-full ml-4 top-full mt-1 text-gray-500 dark:text-gray-400 whitespace-nowrap ${t?"text-xs":"text-sm"}`,children:["Last refresh: ",l.toLocaleTimeString()]}),o.jsx("div",{className:"absolute -top-1 -right-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-400 rounded-full animate-ping"})]})})]})}const Qb=({className:e=""})=>{const t=()=>{const c=localStorage.getItem("theme");return c?c==="dark":!0},[n,r]=b.useState(t),[s,i]=b.useState(!1);b.useLayoutEffect(()=>{const c=document.documentElement;n?(c.classList.add("dark"),c.classList.remove("light"),localStorage.setItem("theme","dark")):(c.classList.remove("dark"),c.classList.add("light"),localStorage.setItem("theme","light"))},[n]),b.useEffect(()=>{const c=setTimeout(()=>{const u=document.documentElement,d=localStorage.getItem("theme");d!=="light"?(u.classList.add("dark"),u.classList.remove("light"),d||localStorage.setItem("theme","dark"),r(!0)):(u.classList.remove("dark"),u.classList.add("light"),r(!1))},10);return()=>clearTimeout(c)},[]);const a=c=>{const u=document.documentElement;c?(u.classList.add("dark"),u.classList.remove("light"),localStorage.setItem("theme","dark")):(u.classList.remove("dark"),u.classList.add("light"),localStorage.setItem("theme","light"))},l=()=>{if(s)return;i(!0);const c=!n;r(c),a(c),setTimeout(()=>i(!1),300)};return o.jsxs("button",{onClick:l,className:`
        relative flex items-center justify-center
        w-12 h-6 rounded-full transition-all duration-300 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${n?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-600"}
        ${s?"scale-95":"hover:scale-105"}
        ${e}
      `,title:n?"Switch to light mode":"Switch to dark mode","aria-label":n?"Switch to light mode":"Switch to dark mode",disabled:s,children:[o.jsx("div",{className:`
        absolute inset-0 rounded-full transition-all duration-300
        ${n?"bg-gradient-to-r from-blue-600 to-blue-500":"bg-gradient-to-r from-gray-300 to-gray-200"}
      `}),o.jsxs("div",{className:`
        relative w-5 h-5 rounded-full transition-all duration-300 ease-in-out transform
        bg-white dark:bg-gray-100 shadow-lg
        flex items-center justify-center
        ${n?"translate-x-3":"-translate-x-3"}
        ${s?"scale-90":""}
      `,children:[o.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${n?"opacity-100":"opacity-0"}
        `,children:o.jsx(BC,{className:"w-3 h-3 text-blue-600 dark:text-blue-500"})}),o.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${n?"opacity-0":"opacity-100"}
        `,children:o.jsx(GC,{className:"w-3 h-3 text-yellow-500"})})]}),o.jsx("div",{className:`
        absolute inset-0 rounded-full opacity-0 transition-opacity duration-300
        ${n?"bg-blue-400 group-hover:opacity-20":"bg-yellow-400 group-hover:opacity-20"}
        pointer-events-none
      `})]})};function _p(){const[e,t]=b.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return b.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=s=>{t(s.matches)};if(n.addEventListener)return n.addEventListener("change",r),()=>n.removeEventListener("change",r);if(n.addListener)return n.addListener(r),()=>n.removeListener(r)},[]),e}const ZC={normal:200},Jb={easeOut:[0,0,.2,1],spring:{type:"spring",stiffness:300,damping:30}},eT={slideUp:{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:ZC.normal/1e3,ease:Jb.easeOut}}},tT={container:{animate:{transition:{staggerChildren:.05,delayChildren:.1}}}},E0=Jb.spring,nT=eT.slideUp,rT=tT.container;function sT({state:e,isConnected:t,isSidebarCollapsed:n,setIsSidebarCollapsed:r,isCompactMode:s,setIsCompactMode:i,isMobileMenuOpen:a,setIsMobileMenuOpen:l,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h,setActiveSD:p}){var E;const f=_p(),m=Qn(),v=[{path:"/",icon:kp,label:"Dashboard",tooltip:"Dashboard"},{path:"/strategic-directives",icon:dt,label:"Strategic Directives",tooltip:"SDs"},{path:"/backlog",icon:_s,label:"Backlog",tooltip:"Backlog"},{path:"/directive-lab",icon:qb,label:"Directive Lab",tooltip:"Lab"},{path:"/pr-reviews",icon:bp,label:"PR Reviews",tooltip:"PRs"}],w={expanded:{width:"16rem",transition:f?{duration:0}:E0},collapsed:{width:"4rem",transition:f?{duration:0}:E0}},g={rest:{scale:1,transition:{duration:.2}},hover:{scale:f?1:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:f?1:.98}},x={hidden:{opacity:0,x:-10,transition:{duration:.1}},visible:{opacity:1,x:0,transition:{duration:.2,delay:.5}}},y=m.pathname==="/directive-lab",S=s?"p-2 pt-16 md:pt-2":y?"p-0":"p-6 pt-20 md:pt-6";return o.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 relative",children:[o.jsx(Y.button,{onClick:()=>l(!a),className:"mobile-menu-button fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg md:hidden",whileHover:{scale:f?1:1.05},whileTap:{scale:f?1:.95},children:o.jsx(Zt,{mode:"wait",children:a?o.jsx(Y.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:f?0:.2},children:o.jsx(Is,{className:"w-6 h-6"})},"close"):o.jsx(Y.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:f?0:.2},children:o.jsx(zC,{className:"w-6 h-6"})},"menu")})}),o.jsx(Zt,{children:a&&o.jsx(Y.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>l(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:f?0:.2}})}),o.jsxs(Y.div,{className:`
          fixed md:static inset-y-0 left-0 bg-gradient-to-br from-purple-600 via-purple-700 to-blue-800 shadow-2xl 
          z-50 flex flex-col overflow-hidden transition-transform duration-300 ease-in-out
          md:transform-none backdrop-blur-xl
          ${a?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,initial:!1,animate:n?"collapsed":"expanded",variants:w,children:[o.jsxs("div",{className:`${s?"p-2":"p-4"} border-b border-purple-400/30 backdrop-blur-sm relative overflow-hidden`,children:[o.jsx(Y.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:f?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:f?0:4,repeat:1/0,ease:"linear"}}),o.jsxs("div",{className:`flex items-center ${n?"justify-center":"justify-between"}`,children:[o.jsx(Zt,{children:!n&&o.jsx(Y.h1,{className:"text-xl font-bold text-white relative z-10 drop-shadow-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:f?0:.15},children:"LEO Protocol"})}),o.jsx(Y.button,{onClick:()=>r(!n),className:"hidden md:block p-1 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/10 relative z-10",title:n?"Expand sidebar":"Collapse sidebar",whileHover:{scale:f?1:1.1},whileTap:{scale:f?1:.9},children:o.jsx(Y.div,{animate:{rotate:n?0:180},transition:{duration:f?0:.15},children:o.jsx(en,{className:"w-5 h-5"})})})]}),o.jsx(Zt,{children:!n&&o.jsxs(Y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:f?0:.15},children:[o.jsxs("div",{className:"mt-2 flex items-center",children:[o.jsx(Y.div,{className:`w-2 h-2 rounded-full mr-2 ${t?"bg-green-500":"bg-red-500"}`,animate:{scale:t?[1,1.2,1]:1},transition:{duration:2,repeat:t?1/0:0,repeatType:"loop"}}),o.jsx("span",{className:"text-sm text-purple-100 relative z-10",children:t?"Connected":"Disconnected"})]}),o.jsxs(Y.span,{className:"text-xs px-2 py-1 bg-white/20 text-white rounded-full inline-block mt-2 backdrop-blur-sm border border-white/20 relative z-10 font-medium",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:["v",((E=e.leoProtocol)==null?void 0:E.version)||"detecting..."]})]})})]}),o.jsxs("nav",{className:`flex-1 ${s?"p-2":"p-4"} relative`,children:[o.jsx(Y.div,{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"20px 20px"},animate:{backgroundPosition:f?"0px 0px":["0px 0px","20px 20px","0px 0px"]},transition:{duration:f?0:20,repeat:1/0,ease:"linear"}}),o.jsx(Y.ul,{className:"space-y-1",variants:rT,initial:"hidden",animate:"visible",children:v.map(({path:j,icon:P,label:T,tooltip:$},L)=>o.jsx(Y.li,{variants:nT,custom:L,children:o.jsx(B2,{to:j,className:({isActive:F})=>`block ${F?"active-nav-item":""}`,onClick:()=>l(!1),children:({isActive:F})=>o.jsxs(Y.div,{className:`flex items-center ${s?"p-1.5":"p-2"} rounded-lg transition-all duration-300 group relative backdrop-blur-sm ${F?"bg-white/25 text-white border border-white/30 shadow-lg backdrop-blur-md":"hover:bg-white/10 text-purple-100 hover:text-white border border-transparent hover:border-white/20"}`,variants:g,initial:"rest",whileHover:"hover",whileTap:"tap",layout:!0,children:[F&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(Y.div,{className:"absolute inset-0 rounded-lg bg-white/30 blur-xl",initial:{opacity:0,scale:.8},animate:{opacity:.6,scale:1},transition:{duration:.3}}),o.jsx(Y.div,{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400/40 to-blue-400/40",animate:{background:["linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))","linear-gradient(to right, rgba(59, 130, 246, 0.4), rgba(168, 85, 247, 0.4))","linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]}),o.jsx(P,{className:`${s?"w-4 h-4":"w-5 h-5"} ${n?"":"mr-3"} relative z-10`}),o.jsx(Zt,{children:!n&&o.jsx(Y.span,{className:`${s?"text-sm":""} relative z-10`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:f?0:.2},children:T})}),o.jsxs(Y.span,{className:`absolute ${n?"left-full ml-2 top-1/2 transform -translate-y-1/2":"bottom-full mb-2 left-1/2 transform -translate-x-1/2"} px-2 py-1 bg-gray-900/90 backdrop-blur-md text-white text-xs rounded whitespace-nowrap pointer-events-none z-30 opacity-0 group-hover:opacity-100 transition-all duration-200 delay-300 border border-white/20 shadow-xl`,style:{visibility:"hidden"},animate:{opacity:0,visibility:"hidden"},whileHover:{opacity:1,visibility:"visible"},children:[$,o.jsx("div",{className:`absolute ${n?"right-full top-1/2 transform -translate-y-1/2 border-l-0 border-r-4 border-r-gray-900 dark:border-r-gray-700 border-t-4 border-b-4 border-t-transparent border-b-transparent":"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900 dark:border-t-gray-700 border-l-4 border-r-4 border-l-transparent border-r-transparent border-b-0"}`})]})]})})},j))})]}),o.jsxs(Y.div,{className:`border-t border-purple-400/30 ${s?"p-2":"p-4"} relative backdrop-blur-sm`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[o.jsxs(Y.button,{onClick:()=>i(!s),className:`w-full flex items-center ${s?"p-1.5":"p-2"} rounded-lg hover:bg-white/10 text-purple-100 hover:text-white transition-all duration-300 group relative border border-transparent hover:border-white/20 backdrop-blur-sm`,title:s?"Standard view":"Compact view",whileHover:{scale:f?1:1.02},whileTap:{scale:f?1:.98},children:[o.jsx(Y.div,{animate:{rotate:s?180:0},transition:{duration:f?0:.15},children:o.jsx(UC,{className:`${s?"w-4 h-4":"w-5 h-5"} ${n?"":"mr-3"}`})}),o.jsx(Zt,{children:!n&&o.jsx(Y.span,{className:s?"text-sm":"",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?"Standard View":"Compact View"})}),o.jsx(Zt,{children:n&&o.jsx(Y.span,{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap pointer-events-none z-10",variants:x,initial:"hidden",whileHover:"visible",exit:"hidden",children:s?"Standard":"Compact"})})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-purple-400/30",children:o.jsx(Nc,{onRefresh:h,isCompact:s,isCollapsed:n})})]})]}),o.jsxs(Y.div,{className:"flex-1 flex flex-col overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:f?0:.08},style:{paddingTop:"env(safe-area-inset-top)"},children:[o.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-600 via-purple-700 to-blue-800 border-b border-purple-400/30 shadow-lg relative overflow-hidden backdrop-blur-xl",children:[o.jsx(Y.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:f?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:f?0:4,repeat:1/0,ease:"linear"}}),o.jsx(Y.div,{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"40px 40px"},animate:{backgroundPosition:f?"0px 0px":["0px 0px","40px 40px","0px 0px"]},transition:{duration:f?0:15,repeat:1/0,ease:"linear"}}),o.jsx("div",{className:"flex-1 relative z-10",children:o.jsx(JC,{isCompact:s})}),o.jsx("div",{className:"flex items-center px-4 py-2 relative z-10",children:o.jsx(Qb,{})})]}),o.jsx("main",{className:`flex-1 overflow-y-auto ${S}`,children:o.jsx(Zt,{children:o.jsx(Y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:f?0:.1,ease:"easeOut"},children:o.jsx(T2,{context:{state:e,isCompactMode:s,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h}})},m.pathname)})})]})]})}var Ep={},mh={exports:{}};(function(e,t){(function(n,r){r(t)})(wt,function(n){var r=function(){return r=Object.assign||function(i){for(var a,l=1,c=arguments.length;l<c;l++)for(var u in a=arguments[l])Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u]);return i},r.apply(this,arguments)},s=function(){function i(a,l,c){var u=this;this.endVal=l,this.options=c,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(d){u.startTime||(u.startTime=d);var h=d-u.startTime;u.remaining=u.duration-h,u.useEasing?u.countDown?u.frameVal=u.startVal-u.easingFn(h,0,u.startVal-u.endVal,u.duration):u.frameVal=u.easingFn(h,u.startVal,u.endVal-u.startVal,u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(h/u.duration);var p=u.countDown?u.frameVal<u.endVal:u.frameVal>u.endVal;u.frameVal=p?u.endVal:u.frameVal,u.frameVal=Number(u.frameVal.toFixed(u.options.decimalPlaces)),u.printValue(u.frameVal),h<u.duration?u.rAF=requestAnimationFrame(u.count):u.finalEndVal!==null?u.update(u.finalEndVal):u.options.onCompleteCallback&&u.options.onCompleteCallback()},this.formatNumber=function(d){var h,p,f,m,v=d<0?"-":"";h=Math.abs(d).toFixed(u.options.decimalPlaces);var w=(h+="").split(".");if(p=w[0],f=w.length>1?u.options.decimal+w[1]:"",u.options.useGrouping){m="";for(var g=3,x=0,y=0,S=p.length;y<S;++y)u.options.useIndianSeparators&&y===4&&(g=2,x=1),y!==0&&x%g==0&&(m=u.options.separator+m),x++,m=p[S-y-1]+m;p=m}return u.options.numerals&&u.options.numerals.length&&(p=p.replace(/[0-9]/g,function(E){return u.options.numerals[+E]}),f=f.replace(/[0-9]/g,function(E){return u.options.numerals[+E]})),v+u.options.prefix+p+f+u.options.suffix},this.easeOutExpo=function(d,h,p,f){return p*(1-Math.pow(2,-10*d/f))*1024/1023+h},this.options=r(r({},this.defaults),c),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el=typeof a=="string"?document.getElementById(a):a,l=l??this.parse(this.el.innerHTML),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(l),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,a):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return u.handleScroll(u)}),window.onscroll=function(){window.onScrollFns.forEach(function(d){return d()})},this.handleScroll(this)))}return i.prototype.handleScroll=function(a){if(a&&window&&!a.once){var l=window.innerHeight+window.scrollY,c=a.el.getBoundingClientRect(),u=c.top+window.pageYOffset,d=c.top+c.height+window.pageYOffset;d<l&&d>window.scrollY&&a.paused?(a.paused=!1,setTimeout(function(){return a.start()},a.options.scrollSpyDelay),a.options.scrollSpyOnce&&(a.once=!0)):(window.scrollY>d||u>l)&&!a.paused&&a.reset()}},i.prototype.determineDirectionAndSmartEasing=function(){var a=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>a;var l=a-this.startVal;if(Math.abs(l)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=a;var c=this.countDown?1:-1;this.endVal=a+c*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=a,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},i.prototype.start=function(a){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),a&&(this.options.onCompleteCallback=a),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},i.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},i.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},i.prototype.update=function(a){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(a),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},i.prototype.printValue=function(a){var l;if(this.el){var c=this.formattingFn(a);!((l=this.options.plugin)===null||l===void 0)&&l.render?this.options.plugin.render(this.el,c):this.el.tagName==="INPUT"?this.el.value=c:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=c:this.el.innerHTML=c}},i.prototype.ensureNumber=function(a){return typeof a=="number"&&!isNaN(a)},i.prototype.validateValue=function(a){var l=Number(a);return this.ensureNumber(l)?l:(this.error="[CountUp] invalid start or end value: ".concat(a),null)},i.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},i.prototype.parse=function(a){var l=function(h){return h.replace(/([.,' ])/g,"\\$1")},c=l(this.options.separator),u=l(this.options.decimal),d=a.replace(new RegExp(c,"g"),"").replace(new RegExp(u,"g"),".");return parseFloat(d)},i}();n.CountUp=s})})(mh,mh.exports);var iT=mh.exports;Object.defineProperty(Ep,"__esModule",{value:!0});var ut=b,aT=iT;function oT(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function P0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P0(Object(n),!0).forEach(function(r){uT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lT(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cT(e){var t=lT(e,"string");return typeof t=="symbol"?t:String(t)}function uT(e,t,n){return t=cT(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gh(){return gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gh.apply(this,arguments)}function dT(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Zb(e,t){if(e==null)return{};var n=dT(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hT(e,t){return fT(e)||oT(e,t)||pT(e,t)||mT()}function fT(e){if(Array.isArray(e))return e}function pT(e,t){if(e){if(typeof e=="string")return C0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C0(e,t)}}function C0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ut.useLayoutEffect:ut.useEffect;function Nn(e){var t=ut.useRef(e);return gT(function(){t.current=e}),ut.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current.apply(void 0,r)},[])}var yT=function(t,n){var r=n.decimal,s=n.decimals,i=n.duration,a=n.easingFn,l=n.end,c=n.formattingFn,u=n.numerals,d=n.prefix,h=n.separator,p=n.start,f=n.suffix,m=n.useEasing,v=n.useGrouping,w=n.useIndianSeparators,g=n.enableScrollSpy,x=n.scrollSpyDelay,y=n.scrollSpyOnce,S=n.plugin;return new aT.CountUp(t,l,{startVal:p,duration:i,decimal:r,decimalPlaces:s,easingFn:a,formattingFn:c,numerals:u,separator:h,prefix:d,suffix:f,plugin:S,useEasing:m,useIndianSeparators:w,useGrouping:v,enableScrollSpy:g,scrollSpyDelay:x,scrollSpyOnce:y})},xT=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],vT={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},ek=function(t){var n=Object.fromEntries(Object.entries(t).filter(function($){var L=hT($,2),F=L[1];return F!==void 0})),r=ut.useMemo(function(){return Yl(Yl({},vT),n)},[t]),s=r.ref,i=r.startOnMount,a=r.enableReinitialize,l=r.delay,c=r.onEnd,u=r.onStart,d=r.onPauseResume,h=r.onReset,p=r.onUpdate,f=Zb(r,xT),m=ut.useRef(),v=ut.useRef(),w=ut.useRef(!1),g=Nn(function(){return yT(typeof s=="string"?s:s.current,f)}),x=Nn(function($){var L=m.current;if(L&&!$)return L;var F=g();return m.current=F,F}),y=Nn(function(){var $=function(){return x(!0).start(function(){c==null||c({pauseResume:S,reset:E,start:P,update:j})})};l&&l>0?v.current=setTimeout($,l*1e3):$(),u==null||u({pauseResume:S,reset:E,update:j})}),S=Nn(function(){x().pauseResume(),d==null||d({reset:E,start:P,update:j})}),E=Nn(function(){x().el&&(v.current&&clearTimeout(v.current),x().reset(),h==null||h({pauseResume:S,start:P,update:j}))}),j=Nn(function($){x().update($),p==null||p({pauseResume:S,reset:E,start:P})}),P=Nn(function(){E(),y()}),T=Nn(function($){i&&($&&E(),y())});return ut.useEffect(function(){w.current?a&&T(!0):(w.current=!0,T())},[a,w,T,l,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.formattingFn]),ut.useEffect(function(){return function(){E()}},[E]),{start:P,pauseResume:S,reset:E,update:j,getCountUp:x}},wT=["className","redraw","containerProps","children","style"],bT=function(t){var n=t.className,r=t.redraw,s=t.containerProps,i=t.children,a=t.style,l=Zb(t,wT),c=ut.useRef(null),u=ut.useRef(!1),d=ek(Yl(Yl({},l),{},{ref:c,startOnMount:typeof i!="function"||t.delay===0,enableReinitialize:!1})),h=d.start,p=d.reset,f=d.update,m=d.pauseResume,v=d.getCountUp,w=Nn(function(){h()}),g=Nn(function(S){t.preserveValue||p(),f(S)}),x=Nn(function(){if(typeof t.children=="function"&&!(c.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}v()});ut.useEffect(function(){x()},[x]),ut.useEffect(function(){u.current&&g(t.end)},[t.end,g]);var y=r&&t;return ut.useEffect(function(){r&&u.current&&w()},[w,r,y]),ut.useEffect(function(){!r&&u.current&&w()},[w,r,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.className,t.formattingFn]),ut.useEffect(function(){u.current=!0},[]),typeof i=="function"?i({countUpRef:c,start:h,reset:p,update:f,pauseResume:m,getCountUp:v}):ut.createElement("span",gh({className:n,ref:c,style:a},s),typeof t.start<"u"?v().formattingFn(t.start):"")},ui=Ep.default=bT;Ep.useCountUp=ek;function kT({sdId:e,onClose:t}){var d,h;const[n,r]=b.useState(null),[s,i]=b.useState(!0),[a,l]=b.useState(null);b.useEffect(()=>{c()},[e]);const c=async()=>{try{i(!0);const p=await fetch(`/api/progress/audit/${e||""}`);if(!p.ok)throw new Error("Failed to fetch audit");const f=await p.json();r(f)}catch(p){l(p.message)}finally{i(!1)}};if(s)return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})});if(a)return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[o.jsxs("p",{className:"text-red-500",children:["Error: ",a]}),o.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-gray-500 text-white rounded",children:"Close"})]})});if(!n)return null;const u=p=>p.complete?"text-green-500":p.progress>0?"text-yellow-500":"text-gray-400";return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Hb,{className:"w-6 h-6 mr-2 text-blue-500"}),o.jsx("h2",{className:"text-xl font-semibold",children:"Progress Validation Audit"})]}),o.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:o.jsx(Is,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:n.title}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Calculated Progress"}),o.jsxs("p",{className:"text-2xl font-bold",children:[n.summary.calculatedProgress,"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Phase"}),o.jsx("p",{className:"text-2xl font-bold",children:n.summary.currentPhase})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Database Status"}),o.jsx("p",{className:"text-2xl font-bold",children:n.summary.databaseStatus})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Can Complete"}),o.jsx("div",{className:"text-2xl font-bold",children:n.summary.canComplete?o.jsx(et,{className:"w-8 h-8 text-green-500"}):o.jsx(Yr,{className:"w-8 h-8 text-red-500"})})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(mr,{className:"w-5 h-5 mr-2"}),"Phase Breakdown"]}),o.jsx("div",{className:"space-y-4",children:Object.entries(n.phaseBreakdown).map(([p,f])=>o.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsxs("span",{className:`text-lg font-semibold ${u(f)}`,children:[p," Agent"]}),o.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(Weight: ",f.weight,"%)"]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("span",{className:"text-lg font-bold",children:[f.progress,"%"]}),f.complete&&o.jsx(et,{className:"w-5 h-5 text-green-500"})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3",children:o.jsx("div",{className:`h-2 rounded-full ${f.complete?"bg-green-500":"bg-blue-500"}`,style:{width:`${f.progress}%`}})}),f.checklist&&f.checklist.length>0&&o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Checklist Items:"}),o.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:f.checklist.map((m,v)=>o.jsxs("div",{className:"flex items-start text-sm",children:[m.checked?o.jsx(Sn,{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}):o.jsx(jp,{className:"w-4 h-4 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),o.jsxs("span",{className:m.checked?"text-gray-600 line-through":"",children:[m.text,m.source&&o.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",m.source,")"]})]})]},v))})]}),p==="EXEC"&&f.indicators&&o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Implementation Indicators:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(f.indicators.indicators).map(([m,v])=>o.jsxs("div",{className:"flex items-center text-sm",children:[v.status?o.jsx(et,{className:"w-4 h-4 text-green-500 mr-2"}):o.jsx(Yr,{className:"w-4 h-4 text-red-500 mr-2"}),o.jsxs("span",{children:[m,": ",v.details||"Not found"]})]},m))})]})]},p))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(TC,{className:"w-5 h-5 mr-2"}),"Progress Calculation"]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[((h=(d=n.phaseBreakdown)==null?void 0:d.PLAN)==null?void 0:h.checklist)&&n.phaseBreakdown.PLAN.checklist.filter(p=>p.text.includes("PRD created and saved")||p.text.includes("requirements mapped")||p.text.includes("specifications complete")||p.text.includes("Prerequisites verified")||p.text.includes("Risk mitigation")||p.text.includes("Context usage")).every(p=>p.checked)&&o.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded",children:[o.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:" Progress Calculation Note:"}),o.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"The PLAN phase handoff checklist is complete (PRD created with all handoff items done), but the system is incorrectly counting implementation acceptance criteria as PLAN phase items. According to LEO Protocol v4.0, PLAN phase should be 100% complete when the PRD is created with the handoff checklist done. The actual progress should be approximately 66% (LEAD + PLAN complete)."})]}),o.jsx("p",{className:"font-mono text-sm mb-2",children:n.calculations.formula}),o.jsx("div",{className:"space-y-1",children:n.calculations.breakdown.map((p,f)=>o.jsx("p",{className:`font-mono text-sm ${p.startsWith("Total")?"font-bold text-blue-600 dark:text-blue-400":""}`,children:p},f))})]})]}),n.validation.uncompletedItems>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(Kt,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Validation Issues"]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("p",{className:"font-semibold mb-2",children:[n.validation.uncompletedItems," uncompleted items preventing completion:"]}),n.validation.details.map((p,f)=>o.jsxs("div",{className:"mb-2",children:[o.jsxs("p",{className:"font-medium text-sm",children:[p.source," (",p.phase,"): ",p.items.length," items"]}),o.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400 ml-4",children:p.items.map((m,v)=>o.jsx("li",{children:m},v))})]},f))]})]}),n.recommendations.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(dt,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),o.jsx("div",{className:"space-y-2",children:n.recommendations.map((p,f)=>o.jsxs("div",{className:`flex items-start p-3 rounded-lg ${p.includes("WARNING")?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"}`,children:[p.includes("WARNING")?o.jsx(Kt,{className:"w-5 h-5 text-red-500 mr-2 flex-shrink-0 mt-0.5"}):o.jsx(et,{className:"w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"text-sm",children:p})]},f))})]})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("p",{className:"text-xs text-gray-500",children:["Generated: ",new Date(n.timestamp).toLocaleString()]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Refresh"}),o.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Close"})]})]})]})})}function jT({strategicDirectives:e,prds:t,currentSD:n,onSetActiveSD:r,isCompact:s}){var Ee,ft,kt,ot,K,qe,Dn;const i=_p(),[a,l]=b.useState(!1),[c,u]=b.useState(!1),[d,h]=b.useState(!1),[p,f]=b.useState(!1),[m,v]=b.useState(0),[w,g]=b.useState(null),[x,y]=b.useState(""),[S,E]=b.useState({}),[j,P]=b.useState(null),T=b.useRef(null),$=b.useRef(null),L=b.useRef(null);b.useEffect(()=>{function D(ne){T.current&&!T.current.contains(ne.target)&&l(!1)}if(a)return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[a]);const F=D=>{E(ne=>({...ne,[D]:!ne[D]}))},q=D=>({LEAD_PLANNING:"Strategic planning and directive creation",PLAN_DESIGN:"Technical planning and PRD creation",EXEC_IMPLEMENTATION:"Implementation and development work",PLAN_VERIFICATION:"Testing and verification",LEAD_APPROVAL:"Final approval and deployment",COMPLETE:"All phases completed"})[D]||"Unknown phase",he=D=>{var ye,Re,At,Le,Ln,pt,mt,xr,R;if(!D)return[];const ne=[];D.checklist&&D.checklist.filter(M=>!M.checked).forEach(M=>{ne.push({type:"SD",text:M.text,phase:"LEAD_PLANNING"})});const ae=((ye=D.prds)==null?void 0:ye[0])||(t==null?void 0:t.find(M=>M.directiveId===D.id||M.id===`PRD-${D.id}`))||((At=(Re=e.find(M=>M.id===D.id))==null?void 0:Re.prds)==null?void 0:At[0]);if(ae){const te=(ae.plan_checklist||[]).filter(ke=>typeof ke=="object"?!ke.checked:!0);te.length>0&&ne.push({type:"PLAN_DESIGN",text:`Complete ${te.length} planning checklist items`,phase:"PLAN_DESIGN",details:te.slice(0,3).map(ke=>typeof ke=="object"?ke.text:ke)});const be=(ae.exec_checklist||[]).filter(ke=>typeof ke=="object"?!ke.checked:!0);be.length>0&&ne.push({type:"EXEC_IMPLEMENTATION",text:`Complete ${be.length} implementation tasks`,phase:"EXEC_IMPLEMENTATION",details:be.slice(0,3).map(ke=>typeof ke=="object"?ke.text:ke)});const jt=(ae.validation_checklist||[]).filter(ke=>typeof ke=="object"?!ke.checked:!0);jt.length>0&&ne.push({type:"PLAN_VERIFICATION",text:`Complete ${jt.length} verification items`,phase:"PLAN_VERIFICATION",details:jt.slice(0,3).map(ke=>typeof ke=="object"?ke.text:ke)})}return D.progress>=100&&ne.length>0?(console.log(" Progress/Pending Mismatch Detected:",{sdId:D.id,sdProgress:D.progress,pendingCount:ne.length,message:"SD shows 100% but has pending items - clearing pending list to match progress"}),[]):(ne.length>0&&console.log(" Pending Items Debug:",{sdId:D.id,sdProgress:D.progress,totalPendingItems:ne.length,pendingByPhase:ne.reduce((M,te)=>(M[te.phase]=(M[te.phase]||0)+1,M),{}),associatedPRDId:ae==null?void 0:ae.id,prdSource:ae?(Le=D.prds)!=null&&Le[0]?"SD.prds":t!=null&&t.find(M=>M.directiveId===D.id)?"global prds prop":"strategicDirectives fallback":"none",sdChecklist:(Ln=D.checklist)==null?void 0:Ln.length,uncheckedSDItems:(pt=D.checklist)==null?void 0:pt.filter(M=>!M.checked).length,prdChecklists:ae?{plan:(mt=ae.plan_checklist)==null?void 0:mt.length,exec:(xr=ae.exec_checklist)==null?void 0:xr.length,validation:(R=ae.validation_checklist)==null?void 0:R.length}:null}),ne)},O=(D,ne,ae)=>{var R,M,te,ue,be,gt,jt,ke,vn,V,W,re,oe,ee,fe,xe,se,lt,Ye,Jn,tt,Zn,ss,is,er,vr,wr,br,de,ln,as,Hi,ie,Ke,Yt,St,Gp,Xp;if(!D)return"";const ye=((R=D.checklist)==null?void 0:R.filter(ge=>!ge.checked))||[],Re=((te=(M=D.leoPhase)==null?void 0:M.validation)==null?void 0:te.details)||[],At=((ue=D.leoPhase)==null?void 0:ue.remainingTasks)||[],Le=((be=D.leoPhase)==null?void 0:be.phaseProgress)||{},Ln=((jt=(gt=ae==null?void 0:ae.phaseBreakdown)==null?void 0:gt.PLAN)==null?void 0:jt.checklist)||[],pt=Ln.filter(ge=>ge.text.includes("PRD created and saved")||ge.text.includes("SD requirements mapped")||ge.text.includes("Technical specifications complete")||ge.text.includes("Prerequisites verified")||ge.text.includes("Test requirements")||ge.text.includes("Acceptance criteria")||ge.text.includes("Risk mitigation")||ge.text.includes("Context usage")||ge.text.includes("summary created")||ge.text.includes("architecture documented")||ge.text.includes("phases clearly defined")||ge.text.includes("Documentation requirements")),mt=Ln.filter(ge=>!pt.includes(ge)&&!ge.checked);return`# Strategic Directive Completion Request
Generated: ${new Date().toLocaleString()}

## Context
**Project**: LEO Protocol Dashboard Implementation
**SD ID**: ${D.id}
**Title**: ${D.title}
**Priority**: ${((ke=D.metadata)==null?void 0:ke.priority)||"Normal"}
**Owner**: ${((vn=D.metadata)==null?void 0:vn.owner)||"System Administrator"}

## Current Status
- **Overall Progress**: ${ne}% complete
- **Active Phase**: ${((V=D.leoPhase)==null?void 0:V.current)||"LEAD"} Agent
- **Phase Status**: ${((W=D.leoPhase)==null?void 0:W.status)||"In Progress"}
- **Database Status**: ${((re=D.metadata)==null?void 0:re.Status)||"In Progress"}

## Phase Breakdown
### LEAD Phase (Strategic Planning) - ${((oe=Le.LEAD)==null?void 0:oe.progress)||0}%
Status: ${(ee=Le.LEAD)!=null&&ee.complete?" Complete":" In Progress"}

### PLAN Phase (Technical Planning) - ${((fe=Le.PLAN)==null?void 0:fe.progress)||0}%
Status: ${(xe=Le.PLAN)!=null&&xe.complete?" Complete":((se=Le.PLAN)==null?void 0:se.progress)>0?" In Progress":" Not Started"}

### EXEC Phase (Implementation) - ${((lt=Le.EXEC)==null?void 0:lt.progress)||0}%
Status: ${(Ye=Le.EXEC)!=null&&Ye.complete?" Complete":((Jn=Le.EXEC)==null?void 0:Jn.progress)>0?" In Progress":" Not Started"}

## Remaining Tasks

### Strategic Directive Checklist (${ye.length} items)
${ye.length>0?ye.map(ge=>`- [ ] ${ge.text}`).join(`
`):" All SD checklist items complete"}

${mt.length>0?`### Implementation Tasks (EXEC Phase - ${mt.length} items)
Note: PLAN phase handoff checklist is complete. These are EXEC phase implementation acceptance criteria.
${mt.slice(0,10).map(ge=>`- [ ] ${ge.text}`).join(`
`)}
${mt.length>10?`
... and ${mt.length-10} more implementation tasks`:""}`:""}

${At.length>0?`### Phase-Specific Tasks
${At.map(ge=>`
**${ge.phase} Phase**: ${ge.description}
${ge.tasks?ge.tasks.map(wo=>`  - ${wo}`).join(`
`):""}`).join(`
`)}`:""}

## Validation Issues
${Re.length>0?Re.map(ge=>`- **${ge.source}** (${ge.phase}): ${ge.items.length} unchecked items`).join(`
`):" No validation issues"}

${ae?`## Progress Audit Analysis

### Important Note on Progress Calculation
The dashboard currently shows ${ne}% overall progress. However, according to LEO Protocol v4.0:
- LEAD Phase (33.33%): ${(tt=Le.LEAD)!=null&&tt.complete?" COMPLETE":"In Progress"} 
- PLAN Phase (33.33%): ${(Zn=Le.PLAN)!=null&&Zn.complete||pt.every(ge=>ge.checked)?" COMPLETE (PRD created with handoff checklist done)":"In Progress"}
- EXEC Phase (33.34%): ${((ss=Le.EXEC)==null?void 0:ss.progress)>0?`In Progress (${(is=Le.EXEC)==null?void 0:is.progress}%)`:"Not Started"}

**Actual Progress**: ${(er=Le.LEAD)!=null&&er.complete&&((vr=Le.PLAN)!=null&&vr.complete||pt.every(ge=>ge.checked))?"66%":ne+"%"} - PLAN phase should be marked complete when PRD is created with handoff checklist done.

### Calculation Breakdown
${((br=(wr=ae.calculations)==null?void 0:wr.breakdown)==null?void 0:br.join(`
`))||"No calculation data available"}

### Audit Recommendations
${((de=ae.recommendations)==null?void 0:de.length)>0?ae.recommendations.map(ge=>`- ${ge}`).join(`
`):" No issues found in audit"}

### Implementation Indicators
${(as=(ln=ae.phaseBreakdown)==null?void 0:ln.EXEC)!=null&&as.indicators?Object.entries(ae.phaseBreakdown.EXEC.indicators.indicators||{}).map(([ge,wo])=>`- ${ge}: ${wo.status?"":""} ${wo.details||""}`).join(`
`):"No implementation indicators available"}
`:""}

## Next Steps
${((Hi=D.leoPhase)==null?void 0:Hi.current)==="LEAD"&&((ie=Le.LEAD)!=null&&ie.complete)?`1. Create a Product Requirements Document (PRD) for technical planning
2. Perform LEAD-to-PLAN handoff`:""}
${((Ke=D.leoPhase)==null?void 0:Ke.current)==="PLAN"&&((Yt=Le.PLAN)!=null&&Yt.complete)?`1. Begin implementation phase
2. Perform PLAN-to-EXEC handoff`:""}
${((St=D.leoPhase)==null?void 0:St.current)==="EXEC"&&((Gp=Le.EXEC)!=null&&Gp.complete)?`1. Complete final testing and validation
2. Perform EXEC-to-COMPLETE handoff`:""}
${ye.length>0||Ln.length>0?"Priority: Complete all unchecked items listed above":""}

## Instructions
Please help me complete the remaining tasks for this Strategic Directive following LEO Protocol v4.0 standards. Focus on:
1. Completing all unchecked checklist items
2. Ensuring proper handoffs between phases
3. Maintaining documentation and test coverage
4. Following the established project patterns and conventions

${(Xp=D.metadata)!=null&&Xp.PRD?`PRD Location: ${D.metadata.PRD}`:"Note: No PRD linked yet"}

Please proceed with the implementation.`},I=n?e.find(D=>D.id===n):null,H=!I&&e.length>0?e.find(D=>{var ye,Re;const ne=((ye=D.checklist)==null?void 0:ye.filter(At=>At.checked).length)||0,ae=((Re=D.checklist)==null?void 0:Re.length)||0;return ae>0&&ne<ae})||e[0]:null,A=I||H;if(b.useEffect(()=>{(c||m>0)&&A&&fetch(`/api/progress/audit/${A.id}`).then(D=>D.json()).then(D=>g(D)).catch(D=>console.error("Failed to fetch audit:",D))},[c,m,A==null?void 0:A.id]),!A)return o.jsx("div",{className:`bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 border-l-4 border-gray-400 ${s?"p-3":"p-4"} mb-6 rounded-lg`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Kt,{className:`${s?"w-5 h-5":"w-6 h-6"} text-gray-500 mr-3`}),o.jsxs("div",{children:[o.jsx("h3",{className:`${s?"text-sm":"text-base"} font-semibold text-gray-700 dark:text-gray-300`,children:"No Active Strategic Directive"}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 mt-1`,children:"Create a new Strategic Directive to start tracking progress"})]})]})});const C=((Ee=A.checklist)==null?void 0:Ee.filter(D=>D.checked).length)||0,z=((ft=A.checklist)==null?void 0:ft.length)||0,k=A.progress!==void 0?A.progress:z>0?Math.round(C/z*100):0,Z=k===100?{status:"Complete",color:"text-green-700 dark:text-green-300",bgColor:"from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",borderColor:"border-green-400",progressColor:"bg-green-500",icon:et}:k>=50?{status:"In Progress",color:"text-blue-700 dark:text-blue-300",bgColor:"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",borderColor:"border-blue-400",progressColor:"bg-blue-500",icon:or}:{status:"Just Started",color:"text-amber-700 dark:text-amber-300",bgColor:"from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20",borderColor:"border-amber-400",progressColor:"bg-amber-500",icon:Rn},_=Z.icon,je=e.filter(D=>{var ae,ye;if(!x.trim())return!0;const ne=x.toLowerCase();return D.id.toLowerCase().includes(ne)||D.title&&D.title.toLowerCase().includes(ne)||((ae=D.metadata)==null?void 0:ae.Status)&&D.metadata.Status.toLowerCase().includes(ne)||((ye=D.metadata)==null?void 0:ye.Priority)&&D.metadata.Priority.toLowerCase().includes(ne)}),at=()=>{l(!a),a||setTimeout(()=>{var D;(D=L.current)==null||D.focus()},100)},N=D=>{y(D.target.value)},J=D=>{if(D.key==="Escape")l(!1),y("");else if(D.key==="Enter"&&je.length>0){const ne=je[0];r&&ne.id!==n&&(r(ne.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:ne.id,sd:ne}}))),l(!1),y("")}};return o.jsxs("div",{className:`bg-gradient-to-r ${Z.bgColor} border-l-4 ${Z.borderColor} ${s?"p-2 sm:p-3":"p-3 sm:p-4"} mb-4 sm:mb-6 rounded-lg shadow-sm`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[o.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[o.jsx(_,{className:`${s?"w-4 sm:w-5 h-4 sm:h-5":"w-5 sm:w-6 h-5 sm:h-6"} ${Z.color} mr-2 sm:mr-3 flex-shrink-0`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"relative",ref:T,children:[o.jsxs(Y.button,{onClick:at,className:`flex items-center justify-between w-full text-left ${s?"text-xs sm:text-sm":"text-sm sm:text-base"} font-semibold ${Z.color} hover:bg-white/10 rounded px-1 sm:px-2 py-1 transition-colors min-w-0`,whileHover:{scale:i?1:1.02},whileTap:{scale:i?1:.98},"aria-label":"Select Strategic Directive","aria-expanded":a,"aria-haspopup":"listbox",children:[o.jsxs("span",{className:"truncate",children:["Active: ",A.title&&A.title!=="[Enter Strategic Directive Title]"?A.title:A.id]}),o.jsx(Y.div,{animate:{rotate:a?180:0},transition:{duration:i?0:.2,ease:"easeOut"},className:"flex-shrink-0 ml-1",children:o.jsx(Un,{className:`${s?"w-3 sm:w-4 h-3 sm:h-4":"w-4 sm:w-5 h-4 sm:h-5"}`})})]}),o.jsx(Zt,{children:a&&e.length>0&&o.jsxs(Y.div,{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-80 flex flex-col",initial:{opacity:0,y:i?0:-10,scale:i?1:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:i?0:-10,scale:i?1:.95},transition:{duration:i?0:.2,ease:"easeOut"},children:[o.jsxs("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:[o.jsx("input",{ref:L,type:"text",placeholder:"Search Strategic Directives...",value:x,onChange:N,onKeyDown:J,className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-500 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-label":"Search Strategic Directives"}),x&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[je.length," of ",e.length," results"]})]}),o.jsx("div",{className:"max-h-60 overflow-y-auto",children:je.length===0&&x?o.jsxs("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-sm",children:['No Strategic Directives found for "',x,'"']}):je.map((D,ne)=>{const ae=D.id===n||D.id===A.id&&!n,ye=D.progress!==void 0?D.progress:0;return o.jsx("button",{onClick:()=>(r&&(r(D.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:D.id,sd:D}}))),l(!1),y(""),!1),className:`w-full text-left px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${ae?"bg-primary-50 dark:bg-primary-900/20":""}`,children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center",children:[ae&&o.jsx(zn,{className:"w-4 h-4 text-primary-600 mr-2 flex-shrink-0"}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} font-medium text-gray-900 dark:text-white truncate ${ae?"ml-0":"ml-6"}`,children:D.title&&D.title!=="[Enter Strategic Directive Title]"?D.title:D.id})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1 overflow-hidden",children:o.jsx(Y.div,{className:`h-1 rounded-full ${ye===100?"bg-green-500":ye>=50?"bg-blue-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${ye}%`},transition:{duration:i?0:.8,ease:"easeOut",delay:i?0:ne*.1}})})}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 ml-2`,children:o.jsx(ui,{end:ye,duration:i?0:1,preserveValue:!0,suffix:"%"})})]}),D.leoPhase&&o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${D.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${D.leoPhase.phases.PLAN?"bg-green-500":D.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${D.leoPhase.phases.EXEC?"bg-green-500":D.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:D.leoPhase.current})]})]})})},D.id)})})]})})]}),o.jsx("p",{className:`${s?"text-xs":"text-xs sm:text-sm"} text-gray-600 dark:text-gray-400 mt-1`,children:A.leoPhase?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"font-medium",children:"LEO Protocol:"})," ",A.leoPhase.status]}):`${Z.status}  ${C} of ${z} items completed`}),A.leoPhase&&o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 mt-2",children:[o.jsxs("div",{className:`flex items-center text-xs ${A.leoPhase.phases.LEAD?"text-green-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${A.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),"LEAD"]}),o.jsxs("div",{className:`flex items-center text-xs ${A.leoPhase.phases.PLAN?"text-green-600 font-medium":A.leoPhase.current==="PLAN"?"text-blue-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${A.leoPhase.phases.PLAN?"bg-green-500":A.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),"PLAN"]}),o.jsxs("div",{className:`flex items-center text-xs ${A.leoPhase.phases.EXEC?"text-green-600 font-medium":A.leoPhase.current==="EXEC"?"text-blue-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${A.leoPhase.phases.EXEC?"bg-green-500":A.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),"EXEC"]})]})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1 sm:gap-2 flex-shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:`${s?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold ${Z.color}`,children:o.jsx(ui,{end:k,duration:i?0:2,preserveValue:!0,suffix:"%"})}),((kt=A.metadata)==null?void 0:kt.priority)&&o.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Priority: ",A.metadata.priority]})]}),o.jsxs("div",{className:"flex gap-1 flex-wrap justify-end",children:[o.jsxs(Y.button,{onClick:()=>f(!0),className:"flex items-center px-2 py-1 text-xs bg-blue-500/20 dark:bg-blue-400/20 hover:bg-blue-500/30 dark:hover:bg-blue-400/30 rounded transition-all",title:"View progress validation audit",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[o.jsx(Hb,{className:"w-3 h-3 mr-1"}),o.jsx("span",{children:"Audit"})]}),o.jsxs(Y.button,{onClick:()=>u(!c),className:"flex items-center px-2 py-1 text-xs bg-purple-500/20 dark:bg-purple-400/20 hover:bg-purple-500/30 dark:hover:bg-purple-400/30 rounded transition-all",title:"Generate AI prompt for remaining tasks",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[o.jsx(Gl,{className:"w-3 h-3 mr-1"}),o.jsx("span",{children:"AI Prompt"})]})]})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3 overflow-hidden",children:o.jsx(Y.div,{className:`h-3 ${Z.progressColor} rounded-full relative`,initial:{width:0},animate:{width:`${k}%`},transition:{duration:i?0:1.2,ease:"easeOut",delay:i?0:.2},children:!i&&o.jsxs(o.Fragment,{children:[o.jsx(Y.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,ease:"linear"}}),o.jsx(Y.div,{className:"absolute inset-0 bg-white/20 rounded-full",animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})})}),o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:`${s?"text-sm":"text-base"} font-semibold ${Z.color}`,children:["Current Phase: ",((ot=A.metadata)==null?void 0:ot["Current Phase"])||"LEAD_PLANNING"]}),o.jsxs("button",{onClick:()=>F("phaseInfo"),className:"flex items-center text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:[o.jsx(Cn,{className:"w-3 h-3 mr-1"}),"Info"]})]}),((K=A.metadata)==null?void 0:K.date)&&o.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Created: ",new Date(A.metadata.date).toLocaleDateString()]})]}),o.jsx(Zt,{children:S.phaseInfo&&o.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.2},className:"overflow-hidden",children:o.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-blue-800 dark:text-blue-200`,children:[o.jsx("strong",{children:"LEO Protocol Flow:"})," LEAD  PLAN  EXEC  VERIFICATION  APPROVAL"]}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-blue-700 dark:text-blue-300 mt-1`,children:q(((qe=A.metadata)==null?void 0:qe["Current Phase"])||"LEAD_PLANNING")})]})})}),((Dn=A.metadata)==null?void 0:Dn["Phase Progress"])&&typeof A.metadata["Phase Progress"]=="object"&&o.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(A.metadata["Phase Progress"]).map(([D,ne])=>{var At;const ae=typeof ne=="number"?ne:parseInt(ne)||0,ye=ae===100,Re=D===((At=A.metadata)==null?void 0:At["Current Phase"]);return o.jsxs("div",{className:`text-center p-2 rounded ${ye?"bg-green-50 dark:bg-green-900/20":Re?"bg-blue-50 dark:bg-blue-900/20":"bg-gray-50 dark:bg-gray-800"}`,children:[o.jsx("div",{className:`${s?"text-xs":"text-sm"} font-medium ${ye?"text-green-700 dark:text-green-300":Re?"text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400"}`,children:D.split("_")[0]}),o.jsx("div",{className:`${s?"text-xs":"text-sm"} font-bold ${ye?"text-green-600 dark:text-green-400":Re?"text-blue-600 dark:text-blue-400":"text-gray-400"}`,children:ye?o.jsx(zn,{className:"w-4 h-4 mx-auto"}):`${ae}%`})]},D)})}),(()=>{const D=he(A);return D.length===0?null:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>F("pendingWork"),className:"flex items-center justify-between w-full p-2 bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg border border-amber-200 dark:border-amber-700 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(FC,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 mr-2"}),o.jsxs("span",{className:`${s?"text-sm":"text-base"} font-medium text-amber-800 dark:text-amber-200`,children:[D.length," Pending Task",D.length>1?"s":""]})]}),o.jsx(en,{className:`w-4 h-4 text-amber-600 dark:text-amber-400 transform transition-transform ${S.pendingWork?"rotate-90":""}`})]}),o.jsx(Zt,{children:S.pendingWork&&o.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.3},className:"overflow-hidden",children:o.jsxs("div",{className:"space-y-2 pl-4",children:[D.slice(0,5).map((ne,ae)=>o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 mt-2 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-700 dark:text-gray-300`,children:ne.text}),o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:[ne.phase.replace("_"," ")," Phase  ",ne.type]}),ne.details&&ne.details.length>0&&o.jsx("div",{className:"mt-1 pl-2 border-l-2 border-amber-200 dark:border-amber-700",children:ne.details.map((ye,Re)=>o.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:[" ",ye]},Re))})]})]},ae)),D.length>5&&o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 italic pl-4`,children:["... and ",D.length-5," more items"]})]})})})]})})(),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(Wr,{to:`/strategic-directives/${A.id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full transition-colors",children:[o.jsx(dt,{className:"w-3 h-3 mr-1"}),"View SD Document",o.jsx(Kl,{className:"w-3 h-3 ml-1"})]}),A.prds&&A.prds.length>0&&o.jsxs(Wr,{to:`/prds/${A.prds[0].id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50 text-green-700 dark:text-green-300 rounded-full transition-colors",children:[o.jsx(dt,{className:"w-3 h-3 mr-1"}),"View PRD Document",o.jsx(Kl,{className:"w-3 h-3 ml-1"})]})]})]}),c&&o.jsxs("div",{className:"mt-4 p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Gl,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mr-2"}),o.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:"AI Prompt for Remaining Tasks"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>v(D=>D+1),className:"flex items-center px-2 py-1 text-xs bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700 rounded transition-all",title:"Refresh prompt with latest data",children:[o.jsx(Es,{className:"w-3 h-3 mr-1"}),"Refresh"]}),o.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:""})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("pre",{ref:$,className:"bg-white dark:bg-gray-800 p-3 rounded border border-purple-200 dark:border-purple-700 text-sm overflow-x-auto whitespace-pre-wrap max-h-96 overflow-y-auto",children:O(A,k,w)},m),o.jsx("button",{onClick:()=>{var ne;const D=((ne=$.current)==null?void 0:ne.innerText)||"";navigator.clipboard.writeText(D).then(()=>{h(!0),setTimeout(()=>h(!1),2e3)})},className:`absolute top-2 right-2 flex items-center px-2 py-1 text-xs rounded transition-all ${d?"bg-green-500 text-white":"bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700"}`,children:d?o.jsxs(o.Fragment,{children:[o.jsx(zn,{className:"w-3 h-3 mr-1"}),"Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(vp,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Copy this prompt and paste it into Claude Code to get help completing the remaining tasks."})]}),p&&o.jsx(kT,{sdId:A.id,onClose:()=>f(!1)})]})}const ST="modulepreload",NT=function(e){return"/"+e},T0={},mo=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=NT(c),c in T0)return;T0[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ST,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},_T=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>mo(async()=>{const{default:r}=await Promise.resolve().then(()=>Vi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Pp extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class ET extends Pp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class A0 extends Pp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class R0 extends Pp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yh||(yh={}));var PT=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class CT{constructor(t,{headers:n={},customFetch:r,region:s=yh.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=_T(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return PT(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(v=>{throw new ET(v)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new A0(h);if(!h.ok)throw new R0(h);let f=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield h.json():f==="application/octet-stream"?m=yield h.blob():f==="text/event-stream"?m=h:f==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof R0||s instanceof A0?s.context:void 0}}})}}var zt={},Cp={},_c={},go={},Ec={},Pc={},TT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ti=TT();const AT=Ti.fetch,tk=Ti.fetch.bind(Ti),nk=Ti.Headers,RT=Ti.Request,IT=Ti.Response,Vi=Object.freeze(Object.defineProperty({__proto__:null,Headers:nk,Request:RT,Response:IT,default:tk,fetch:AT},Symbol.toStringTag,{value:"Module"})),DT=h1(Vi);var Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});let LT=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Cc.default=LT;var rk=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pc,"__esModule",{value:!0});const OT=rk(DT),$T=rk(Cc);let MT=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=OT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,u;let d=null,h=null,p=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,f=406,m="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const w=await i.text();try{d=JSON.parse(w),Array.isArray(d)&&i.status===404&&(h=[],d=null,f=200,m="OK")}catch{i.status===404&&w===""?(f=204,m="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new $T.default(d)}return{error:d,data:h,count:p,status:f,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Pc.default=MT;var FT=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ec,"__esModule",{value:!0});const VT=FT(Pc);let zT=class extends VT.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ec.default=zT;var UT=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(go,"__esModule",{value:!0});const BT=UT(Ec);let HT=class extends BT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};go.default=HT;var WT=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_c,"__esModule",{value:!0});const ea=WT(go);let qT=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new ea.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ea.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ea.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ea.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ea.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};_c.default=qT;var sk=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cp,"__esModule",{value:!0});const KT=sk(_c),GT=sk(go);let XT=class ik{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new KT.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ik(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new GT.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Cp.default=XT;var zi=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zt,"__esModule",{value:!0});zt.PostgrestError=zt.PostgrestBuilder=zt.PostgrestTransformBuilder=zt.PostgrestFilterBuilder=zt.PostgrestQueryBuilder=zt.PostgrestClient=void 0;const ak=zi(Cp);zt.PostgrestClient=ak.default;const ok=zi(_c);zt.PostgrestQueryBuilder=ok.default;const lk=zi(go);zt.PostgrestFilterBuilder=lk.default;const ck=zi(Ec);zt.PostgrestTransformBuilder=ck.default;const uk=zi(Pc);zt.PostgrestBuilder=uk.default;const dk=zi(Cc);zt.PostgrestError=dk.default;var YT=zt.default={PostgrestClient:ak.default,PostgrestQueryBuilder:ok.default,PostgrestFilterBuilder:lk.default,PostgrestTransformBuilder:ck.default,PostgrestBuilder:uk.default,PostgrestError:dk.default};const{PostgrestClient:QT,PostgrestQueryBuilder:XD,PostgrestFilterBuilder:YD,PostgrestTransformBuilder:QD,PostgrestBuilder:JD,PostgrestError:ZD}=YT;class JT{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const ZT="2.15.4",e4=`realtime-js/${ZT}`,t4="1.0.0",xh=1e4,n4=1e3,r4=100;var Sa;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Sa||(Sa={}));var nt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nt||(nt={}));var En;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(En||(En={}));var vh;(function(e){e.websocket="websocket"})(vh||(vh={}));var ms;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ms||(ms={}));class s4{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class hk{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Pe||(Pe={}));const I0=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=i4(a,e,t,s),i),{})},i4=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?fk(i,a):wh(a)},fk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return c4(t,n)}switch(e){case Pe.bool:return a4(t);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return o4(t);case Pe.json:case Pe.jsonb:return l4(t);case Pe.timestamp:return u4(t);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return wh(t);default:return wh(t)}},wh=e=>e,a4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},o4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},l4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},c4=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>fk(t,l))}return e},u4=e=>typeof e=="string"?e.replace(" ","T"):e,pk=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Cu{constructor(t,n,r={},s=xh){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var D0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(D0||(D0={}));class Na{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Na.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Na.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Na.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const p=d.map(w=>w.presence_ref),f=h.map(w=>w.presence_ref),m=d.filter(w=>f.indexOf(w.presence_ref)<0),v=h.filter(w=>p.indexOf(w.presence_ref)<0);m.length>0&&(l[u]=m),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(f=>f.presence_ref),p=d.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...p)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var L0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(L0||(L0={}));var _a;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(_a||(_a={}));var rr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(rr||(rr={}));class Tp{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Cu(this,En.join,this.params,this.timeout),this.rejoinTimer=new hk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(En.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Na(this),this.broadcastEndpointURL=pk(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[_a.PRESENCE]&&this.bindings[_a.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},p={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(rr.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(rr.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){t==null||t(rr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,g=[];for(let x=0;x<w;x++){const y=v[x],{filter:{event:S,schema:E,table:j,filter:P}}=y,T=f&&f[x];if(T&&T.event===S&&T.schema===E&&T.table===j&&T.filter===P)g.push(Object.assign(Object.assign({},y),{id:T.id}));else{this.unsubscribe(),this.state=nt.errored,t==null||t(rr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(rr.SUBSCRIBED);return}}).receive("error",f=>{this.state=nt.errored,t==null||t(rr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(rr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===nt.joined&&t===_a.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(En.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Cu(this,En.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Cu(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>r4){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=En;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var m,v,w;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((w=(v=f.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(f=>f.callback(p,r)):(i=this.bindings[a])===null||i===void 0||i.filter(f=>{var m,v,w,g,x,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const S=f.id,E=(m=f.filter)===null||m===void 0?void 0:m.event;return S&&((v=n.ids)===null||v===void 0?void 0:v.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(x=(g=f==null?void 0:f.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return S==="*"||S===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof p=="object"&&"ids"in p){const m=p.data,{schema:v,table:w,commit_timestamp:g,type:x,errors:y}=m;p=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:g,eventType:x,new:{},old:{},errors:y}),this._getPayloadRecords(m))}f.callback(p,r)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Tp.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(En.close,{},t)}_onError(t){this._on(En.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=I0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=I0(t.columns,t.old_record)),n}}const Tu=()=>{},Uo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},d4=[1e3,2e3,5e3,1e4],h4=1e4,f4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class p4{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xh,this.transport=null,this.heartbeatIntervalMs=Uo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tu,this.ref=0,this.reconnectTimer=null,this.logger=Tu,this.conn=null,this.sendBuffer=[],this.serializer=new s4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>mo(async()=>{const{default:l}=await Promise.resolve().then(()=>Vi);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${vh.websocket}`,this.httpEndpoint=pk(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=JT.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t4}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Sa.connecting:return ms.Connecting;case Sa.open:return ms.Open;case Sa.closing:return ms.Closing;default:return ms.Closed}}isConnected(){return this.connectionState()===ms.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Tp(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(n4,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Uo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(En.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([f4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:e4};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(En.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new hk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Uo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:xh,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Uo.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Tu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>d4[h-1]||h4,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,p)=>p(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ap extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function rt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class m4 extends Ap{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bh extends Ap{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var g4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const mk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>mo(async()=>{const{default:r}=await Promise.resolve().then(()=>Vi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},y4=()=>g4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield mo(()=>Promise.resolve().then(()=>Vi),void 0)).Response:Response}),kh=e=>{if(Array.isArray(e))return e.map(n=>kh(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=kh(r)}),t},x4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Os=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Au=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),v4=(e,t,n)=>Os(void 0,void 0,void 0,function*(){const r=yield y4();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new m4(Au(s),i,a))}).catch(s=>{t(new bh(Au(s),s))}):t(new bh(Au(e),e))}),w4=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(x4(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function yo(e,t,n,r,s,i){return Os(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,w4(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>v4(c,l,r))})})}function Ql(e,t,n,r){return Os(this,void 0,void 0,function*(){return yo(e,"GET",t,n,r)})}function Mn(e,t,n,r,s){return Os(this,void 0,void 0,function*(){return yo(e,"POST",t,r,s,n)})}function jh(e,t,n,r,s){return Os(this,void 0,void 0,function*(){return yo(e,"PUT",t,r,s,n)})}function b4(e,t,n,r){return Os(this,void 0,void 0,function*(){return yo(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function gk(e,t,n,r,s){return Os(this,void 0,void 0,function*(){return yo(e,"DELETE",t,r,s,n)})}var Rt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const k4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},O0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class j4{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=mk(s)}uploadOrUpdate(t,n,r,s){return Rt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},O0),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?jh:Mn)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(rt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Rt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:O0.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield jh(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(rt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Rt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Mn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Ap("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Rt(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Mn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Rt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Mn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Rt(this,void 0,void 0,function*(){try{const s=yield Mn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}download(t,n){return Rt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Ql(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(rt(l))return{data:null,error:l};throw l}})}info(t){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Ql(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:kh(r),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}exists(t){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield b4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(rt(r)&&r instanceof bh){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield gk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Rt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},k4),n),{prefix:t||""});return{data:yield Mn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Rt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Mn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const S4="2.11.0",N4={"X-Client-Info":`storage-js/${S4}`};var Fs=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class _4{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},N4),n),this.fetch=mk(r)}listBuckets(){return Fs(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(rt(t))return{data:null,error:t};throw t}})}getBucket(t){return Fs(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Fs(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Fs(this,void 0,void 0,function*(){try{return{data:yield jh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Fs(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Fs(this,void 0,void 0,function*(){try{return{data:yield gk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}}class E4 extends _4{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new j4(this.url,this.headers,t,this.fetch)}}const P4="2.56.1";let ca="";typeof Deno<"u"?ca="deno":typeof document<"u"?ca="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ca="react-native":ca="node";const C4={"X-Client-Info":`supabase-js-${ca}/${P4}`},T4={headers:C4},A4={schema:"public"},R4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},I4={};var D4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const L4=e=>{let t;return e?t=e:typeof fetch>"u"?t=tk:t=fetch,(...n)=>t(...n)},O4=()=>typeof Headers>"u"?nk:Headers,$4=(e,t,n)=>{const r=L4(n),s=O4();return(i,a)=>D4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var M4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function F4(e){return e.endsWith("/")?e:e+"/"}function V4(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>M4(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const yk="2.71.1",Ws=30*1e3,Sh=3,Ru=Sh*Ws,z4="http://localhost:9999",U4="supabase.auth.token",B4={"X-Client-Info":`gotrue-js/${yk}`},Nh="X-Supabase-Api-Version",xk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},H4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W4=10*60*1e3;class Rp extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function pe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class q4 extends Rp{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function K4(e){return pe(e)&&e.name==="AuthApiError"}class vk extends Rp{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ns extends Rp{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class _r extends ns{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function G4(e){return pe(e)&&e.name==="AuthSessionMissingError"}class Bo extends ns{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ho extends ns{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wo extends ns{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X4(e){return pe(e)&&e.name==="AuthImplicitGrantRedirectError"}class $0 extends ns{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _h extends ns{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Iu(e){return pe(e)&&e.name==="AuthRetryableFetchError"}class M0 extends ns{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Eh extends ns{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),F0=` 	
\r=`.split(""),Y4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<F0.length;t+=1)e[F0[t].charCodeAt(0)]=-2;for(let t=0;t<Jl.length;t+=1)e[Jl[t].charCodeAt(0)]=t;return e})();function V0(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Jl[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Jl[r]),t.queuedBits-=6}}function wk(e,t,n){const r=Y4[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function z0(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{Z4(a,r,n)};for(let a=0;a<e.length;a+=1)wk(e.charCodeAt(a),s,i);return t.join("")}function Q4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function J4(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Q4(r,t)}}function Z4(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function e3(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)wk(e.charCodeAt(s),n,r);return new Uint8Array(t)}function t3(e){const t=[];return J4(e,n=>t.push(n)),new Uint8Array(t)}function n3(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>V0(s,n,r)),V0(null,n,r),t.join("")}function r3(e){return Math.round(Date.now()/1e3)+e}function s3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const bn=()=>typeof window<"u"&&typeof document<"u",cs={tested:!1,writable:!1},bk=()=>{if(!bn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cs.tested)return cs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cs.tested=!0,cs.writable=!0}catch{cs.tested=!0,cs.writable=!1}return cs.writable};function i3(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const kk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>mo(async()=>{const{default:r}=await Promise.resolve().then(()=>Vi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},a3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",qs=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},us=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},jr=async(e,t)=>{await e.removeItem(t)};class Tc{constructor(){this.promise=new Tc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Tc.promiseConstructor=Promise;function Du(e){const t=e.split(".");if(t.length!==3)throw new Eh("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!H4.test(t[r]))throw new Eh("JWT not in base64url format");return{header:JSON.parse(z0(t[0])),payload:JSON.parse(z0(t[1])),signature:e3(t[2]),raw:{header:t[0],payload:t[1]}}}async function o3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function l3(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function c3(e){return("0"+e.toString(16)).substr(-2)}function u3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,c3).join("")}async function d3(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function h3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await d3(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vs(e,t,n=!1){const r=u3();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await qs(e,`${t}-code-verifier`,s);const i=await h3(r);return[i,r===i?"plain":"s256"]}const f3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function p3(e){const t=e.headers.get(Nh);if(!t||!t.match(f3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function m3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function g3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const y3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zs(e){if(!y3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function U0(e){return JSON.parse(JSON.stringify(e))}var x3=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ps=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),v3=[502,503,504];async function B0(e){var t;if(!a3(e))throw new _h(ps(e),0);if(v3.includes(e.status))throw new _h(ps(e),e.status);let n;try{n=await e.json()}catch(i){throw new vk(ps(i),i)}let r;const s=p3(e);if(s&&s.getTime()>=xk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new M0(ps(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new _r}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new M0(ps(n),e.status,n.weak_password.reasons);throw new q4(ps(n),e.status||500,r)}const w3=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ve(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Nh]||(i[Nh]=xk["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await b3(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function b3(e,t,n,r,s,i){const a=w3(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new _h(ps(c),0)}if(l.ok||await B0(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await B0(c)}}function tr(e){var t;let n=null;N3(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=r3(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function H0(e){const t=tr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ar(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function k3(e){return{data:e,error:null}}function j3(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=x3(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function S3(e){return e}function N3(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ou=["global","local","others"];var _3=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class E3{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=kk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Ou[0]){if(Ou.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ou.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ar})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=_3(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:j3,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(pe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ar})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:S3});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(pe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){zs(t);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ar})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){zs(t);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ar})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){zs(t);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ar})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){zs(t.userId);try{const{data:n,error:r}=await ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){zs(t.userId),zs(t.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}}function W0(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function P3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Us={debug:!!(globalThis&&bk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class C3 extends jk{}async function T3(e,t,n){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new C3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Us.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}P3();const A3={url:z4,storageKey:U4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:B4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function q0(e,t,n){return await n()}const Bs={};class no{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=no.nextInstanceID,no.nextInstanceID+=1,this.instanceID>0&&bn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},A3),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new E3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=kk(s.fetch),this.lock=s.lock||q0,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:bn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=T3:this.lock=q0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:bk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=W0(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=W0(this.memoryStorage)),bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Bs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Bs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=i3(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),bn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),X4(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return pe(n)?{error:n}:{error:new vk("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:tr}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(pe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:h,options:p}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Vs(this.storage,this.storageKey)),i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:m},xform:tr})}else if("phone"in t){const{phone:d,password:h,options:p}=t;i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:tr})}else throw new Ho("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(pe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:H0})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:H0})}else throw new Ho("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Bo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,h,p,f;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:w,wallet:g,statement:x,options:y}=t;let S;if(bn())if(typeof g=="object")S=g;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=g}const E=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),x?{statement:x}:null));let P;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")P=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)P=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)m=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(m),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=j}}try{const{data:w,error:g}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:n3(v)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:tr});if(g)throw g;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Bo}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:g})}catch(w){if(pe(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await us(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:tr});if(await jr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Bo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(pe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:tr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Bo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Vs(this.storage,this.storageKey));const{error:h}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ho("You must provide either an email or phone number.")}catch(l){if(pe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:tr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Vs(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:k3})}catch(i){if(pe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new _r;const{error:s}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(pe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ho("You must provide either an email or phone number and a type")}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await us(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Ru:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await us(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Lu()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ar}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _r}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ar})})}catch(n){if(pe(n))return G4(n)&&(await this._removeSession(),await jr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new _r;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Vs(this.storage,this.storageKey));const{data:u,error:d}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Ar});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new _r;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Du(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(pe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new _r;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!bn())throw new Wo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new $0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new $0("No code detected.");const{data:x,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Wo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;c&&(p=parseInt(c));const f=p-d;f*1e3<=Ws&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const m=p-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,p,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,p,d);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:p,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(pe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await us(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(K4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await jr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=s3(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Vs(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(pe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:p}=i;if(p)throw p;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return bn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(pe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await l3(async s=>(s>0&&await o3(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:tr})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Iu(i)&&Date.now()+a-r<Ws})}catch(r){if(this._debug(n,"error",r),pe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),bn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await us(this.storage,this.storageKey);if(s&&this.userStorage){let a=await us(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await qs(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Lu()}else if(s&&!s.user&&!s.user){const a=await us(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await jr(this.storage,this.storageKey+"-user"),await qs(this.storage,this.storageKey,s)):s.user=Lu()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ru;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Ru}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Iu(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new _r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Tc;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new _r;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),pe(i)){const a={session:null,error:i};return Iu(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await qs(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=U0(s);await qs(this.storage,this.storageKey,i)}else{const s=U0(n);await qs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await jr(this.storage,this.storageKey),await jr(this.storage,this.storageKey+"-code-verifier"),await jr(this.storage,this.storageKey+"-user"),this.userStorage&&await jr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&bn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ws);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ws);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ws}ms, refresh threshold is ${Sh} ticks`),s<=Sh&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof jk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Vs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(pe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(pe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Du(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+W4>s)return r;const{data:i,error:a}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};r=f.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Du(r);n!=null&&n.allowExpired||m3(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:a},error:null}}const d=g3(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,t3(`${l}.${c}`)))throw new Eh("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}}}no.nextInstanceID=0;const R3=no;class I3 extends R3{constructor(t){super(t)}}var D3=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class L3{constructor(t,n,r){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=F4(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:A4,realtime:I4,auth:Object.assign(Object.assign({},R4),{storageKey:u}),global:T4},h=V4(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=$4(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new QT(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new E4(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new CT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return D3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new I3({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new p4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const O3=(e,t,n)=>new L3(e,t,n);function $3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}$3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Sk={};const Nk=Sk.NEXT_PUBLIC_SUPABASE_URL,_k=Sk.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!Nk||!_k)throw new Error("Missing Supabase environment variables");const K0=O3(Nk,_k,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});var M3={};function F3({sdKey:e,isCompact:t=!1}){const[n,r]=b.useState(null),[s,i]=b.useState(!0),[a,l]=b.useState(null);b.useEffect(()=>{if(e){c();const j=K0.channel("release-gates").on("postgres_changes",{event:"*",schema:"public",table:"sd_backlog_map",filter:`sd_id=eq.${e}`},()=>{c()}).subscribe();return()=>{j.unsubscribe()}}},[e]);async function c(){try{i(!0);const{data:j,error:P}=await K0.from("v_sd_release_gate").select("*").eq("sd_key",e).single();if(P)throw P;r(j),l(null)}catch(j){console.error("Failed to load gate data:",j),l(j.message),r(null)}finally{i(!1)}}if(!e)return null;if(s)return o.jsx("div",{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow animate-pulse`,children:o.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})});if(a||!n)return null;const{ready:u,passing_pct:d=0,passing_count:h=0,failing_count:p=0,not_run_count:f=0,total_stories:m=0,avg_coverage:v=0}=n,w=u?"text-green-500":"text-red-500",g=u?o.jsx(QC,{className:"w-5 h-5"}):o.jsx(Gb,{className:"w-5 h-5"}),x=u?"READY TO MERGE":"BLOCKED",y=u?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",S=Math.min(100,Math.max(0,d)),E=80;return o.jsxs(Y.div,{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow-lg border ${y}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(to,{className:`w-5 h-5 ${w}`}),o.jsx("h3",{className:`${t?"text-sm":"text-base"} font-semibold text-gray-900 dark:text-white`,children:"Release Gate"})]}),o.jsxs("div",{className:`flex items-center gap-1 ${w}`,children:[g,o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-bold`,children:x})]})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Story Verification"}),o.jsxs("span",{className:`text-xs font-bold ${S>=E?"text-green-600":"text-amber-600"}`,children:[S.toFixed(0),"% / ",E,"%"]})]}),o.jsxs("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-gray-400 dark:bg-gray-500 z-10",style:{left:`${E}%`}}),o.jsx(Y.div,{className:`h-full ${S>=E?"bg-green-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${S}%`},transition:{duration:.5,ease:"easeOut"}})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(AC,{className:"w-3 h-3 text-green-500"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-green-600 dark:text-green-400`,children:h})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Passing"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(Yr,{className:"w-3 h-3 text-red-500"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-red-600 dark:text-red-400`,children:p})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Failing"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(ts,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-gray-600 dark:text-gray-400`,children:f})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Not Run"})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(mr,{className:"w-3 h-3 text-blue-500"}),o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Coverage: ",v.toFixed(0),"%"]})]}),o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Total: ",m," stories"]})]}),!u&&m>0&&o.jsx(Y.div,{className:"mt-3 p-2 bg-amber-100 dark:bg-amber-900/30 rounded text-xs text-amber-800 dark:text-amber-200",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(LC,{className:"w-3 h-3"}),o.jsxs("span",{children:["Need ",Math.ceil(m*.8)-h," more passing stories to merge"]})]})}),M3.REACT_APP_FEATURE_STORY_GATES==="false"&&o.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 italic",children:"Gates tracking only (not enforcing)"})]})}function V3({state:e,onRefresh:t,onSetActiveSD:n,isCompact:r}){var d,h;const s=Oi(),[i,a]=b.useState({tests:{total:0,passed:0,failed:0},coverage:{lines:0,branches:0,functions:0,statements:0},git:{branch:"unknown",uncommittedChanges:0,lastCommit:""}}),l=_p();b.useEffect(()=>{fetch("/api/metrics").then(p=>p.json()).then(p=>a(p)).catch(p=>console.error("Error loading metrics:",p))},[]);const c=r?"bg-white dark:bg-gray-800 rounded-lg shadow p-2 sm:p-3":"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6",u={hidden:{opacity:0,y:l?0:10},visible:p=>({opacity:1,y:0,transition:{duration:l?0:.1,delay:l?0:p*.02}})};return o.jsxs("div",{className:r?"space-y-2 sm:space-y-3":"space-y-4 sm:space-y-6",children:[o.jsxs(Y.div,{className:"flex items-center justify-between",initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.08},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx($C,{className:r?"w-5 h-5 sm:w-6 sm:h-6 mr-2":"w-6 sm:w-8 h-6 sm:h-8 mr-2 sm:mr-3"}),o.jsx("h1",{className:r?"text-xl sm:text-2xl font-bold":"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Y.button,{onClick:()=>s("/directive-lab?mode=quick"),className:`flex items-center ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,whileHover:{scale:l?1:1.05},whileTap:{scale:l?1:.95},children:[o.jsx(Yb,{className:`${r?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]}),o.jsx(Nc,{onRefresh:t,isCompact:r})]})]}),o.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1},children:o.jsx(jT,{strategicDirectives:e.strategicDirectives,prds:e.prds,currentSD:(d=e.leoProtocol)==null?void 0:d.currentSD,onSetActiveSD:n,isCompact:r})}),((h=e.leoProtocol)==null?void 0:h.currentSD)&&o.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1,delay:.05},children:o.jsx(F3,{sdKey:e.leoProtocol.currentSD,isCompact:r})}),o.jsxs("div",{className:`grid gap-${r?"2 sm:gap-3":"3 sm:gap-4"} grid-cols-1`,children:[o.jsx(Y.div,{className:c,initial:"hidden",animate:"visible",custom:1,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Active Role"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold truncate":"text-xl sm:text-2xl font-bold truncate",children:e.leoProtocol.activeRole||"Awaiting SD"}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 min-w-0",children:[o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#4f9cf9"},children:["LEO v",e.leoProtocol.version]}),e.leoProtocol.lastHandoff&&o.jsxs("span",{className:`${r?"text-xs":"text-xs sm:text-sm"} text-gray-500 truncate`,children:[" ",new Date(e.leoProtocol.lastHandoff.timestamp).toLocaleTimeString()]})]})]}),o.jsx(Np,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 ${e.leoProtocol.activeRole==="LEAD"?"text-blue-500":e.leoProtocol.activeRole==="PLAN"?"text-purple-500":e.leoProtocol.activeRole==="EXEC"?"text-green-500":"text-gray-400"}`})]})}),o.jsx(Y.div,{className:c,initial:"hidden",animate:"visible",custom:2,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx(Wr,{to:"/strategic-directives",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strategic Directives"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:o.jsx(ui,{end:e.strategicDirectives.length,duration:l?0:1.5,preserveValue:!0})}),o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#10b981"},children:[o.jsx(ui,{end:e.strategicDirectives.filter(p=>{var f;return((f=p.metadata)==null?void 0:f.Status)==="Active"}).length,duration:l?0:1.2,preserveValue:!0})," Active"]})]}),o.jsx(dt,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-blue-500`})]})})}),o.jsx(Y.div,{className:c,initial:"hidden",animate:"visible",custom:3,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx(Wr,{to:"/backlog",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Backlog Items"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:o.jsx(ui,{end:e.strategicDirectives.reduce((p,f)=>p+(f.total_backlog_items||f.total_items||f.backlog_count||0),0),duration:l?0:1.5,preserveValue:!0})}),o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#6366f1"},children:[o.jsx(ui,{end:e.strategicDirectives.filter(p=>(p.total_backlog_items||p.total_items||p.backlog_count||0)>0).length,duration:l?0:1.2,preserveValue:!0})," SDs with items"]})]}),o.jsx(_s,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-indigo-500`})]})})}),o.jsx(Y.div,{className:c,initial:"hidden",animate:"visible",custom:4,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx(Wr,{to:"/directive-lab",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"SDIP Submissions"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:"Directive Lab"}),o.jsx("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#8b5cf6"},children:"Ready to submit"})]}),o.jsx(qb,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-purple-500`})]})})})]})]})}function z3(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const U3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,B3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,H3={};function G0(e,t){return(H3.jsx?B3:U3).test(e)}const W3=/[ \t\n\f\r]/g;function q3(e){return typeof e=="object"?e.type==="text"?X0(e.value):!1:X0(e)}function X0(e){return e.replace(W3,"")===""}class xo{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}xo.prototype.normal={};xo.prototype.property={};xo.prototype.space=void 0;function Ek(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new xo(n,r,t)}function Ph(e){return e.toLowerCase()}class Xt{constructor(t,n){this.attribute=n,this.property=t}}Xt.prototype.attribute="";Xt.prototype.booleanish=!1;Xt.prototype.boolean=!1;Xt.prototype.commaOrSpaceSeparated=!1;Xt.prototype.commaSeparated=!1;Xt.prototype.defined=!1;Xt.prototype.mustUseProperty=!1;Xt.prototype.number=!1;Xt.prototype.overloadedBoolean=!1;Xt.prototype.property="";Xt.prototype.spaceSeparated=!1;Xt.prototype.space=void 0;let K3=0;const me=$s(),Qe=$s(),Ch=$s(),B=$s(),Ce=$s(),xi=$s(),Qt=$s();function $s(){return 2**++K3}const Th=Object.freeze(Object.defineProperty({__proto__:null,boolean:me,booleanish:Qe,commaOrSpaceSeparated:Qt,commaSeparated:xi,number:B,overloadedBoolean:Ch,spaceSeparated:Ce},Symbol.toStringTag,{value:"Module"})),$u=Object.keys(Th);class Ip extends Xt{constructor(t,n,r,s){let i=-1;if(super(t,n),Y0(this,"space",s),typeof r=="number")for(;++i<$u.length;){const a=$u[i];Y0(this,$u[i],(r&Th[a])===Th[a])}}}Ip.prototype.defined=!0;function Y0(e,t,n){n&&(e[t]=n)}function Ui(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new Ip(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[Ph(r)]=r,n[Ph(i.attribute)]=r}return new xo(t,n,e.space)}const Pk=Ui({properties:{ariaActiveDescendant:null,ariaAtomic:Qe,ariaAutoComplete:null,ariaBusy:Qe,ariaChecked:Qe,ariaColCount:B,ariaColIndex:B,ariaColSpan:B,ariaControls:Ce,ariaCurrent:null,ariaDescribedBy:Ce,ariaDetails:null,ariaDisabled:Qe,ariaDropEffect:Ce,ariaErrorMessage:null,ariaExpanded:Qe,ariaFlowTo:Ce,ariaGrabbed:Qe,ariaHasPopup:null,ariaHidden:Qe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ce,ariaLevel:B,ariaLive:null,ariaModal:Qe,ariaMultiLine:Qe,ariaMultiSelectable:Qe,ariaOrientation:null,ariaOwns:Ce,ariaPlaceholder:null,ariaPosInSet:B,ariaPressed:Qe,ariaReadOnly:Qe,ariaRelevant:null,ariaRequired:Qe,ariaRoleDescription:Ce,ariaRowCount:B,ariaRowIndex:B,ariaRowSpan:B,ariaSelected:Qe,ariaSetSize:B,ariaSort:null,ariaValueMax:B,ariaValueMin:B,ariaValueNow:B,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Ck(e,t){return t in e?e[t]:t}function Tk(e,t){return Ck(e,t.toLowerCase())}const G3=Ui({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:xi,acceptCharset:Ce,accessKey:Ce,action:null,allow:null,allowFullScreen:me,allowPaymentRequest:me,allowUserMedia:me,alt:null,as:null,async:me,autoCapitalize:null,autoComplete:Ce,autoFocus:me,autoPlay:me,blocking:Ce,capture:null,charSet:null,checked:me,cite:null,className:Ce,cols:B,colSpan:null,content:null,contentEditable:Qe,controls:me,controlsList:Ce,coords:B|xi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:me,defer:me,dir:null,dirName:null,disabled:me,download:Ch,draggable:Qe,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:me,formTarget:null,headers:Ce,height:B,hidden:Ch,high:B,href:null,hrefLang:null,htmlFor:Ce,httpEquiv:Ce,id:null,imageSizes:null,imageSrcSet:null,inert:me,inputMode:null,integrity:null,is:null,isMap:me,itemId:null,itemProp:Ce,itemRef:Ce,itemScope:me,itemType:Ce,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:me,low:B,manifest:null,max:null,maxLength:B,media:null,method:null,min:null,minLength:B,multiple:me,muted:me,name:null,nonce:null,noModule:me,noValidate:me,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:me,optimum:B,pattern:null,ping:Ce,placeholder:null,playsInline:me,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:me,referrerPolicy:null,rel:Ce,required:me,reversed:me,rows:B,rowSpan:B,sandbox:Ce,scope:null,scoped:me,seamless:me,selected:me,shadowRootClonable:me,shadowRootDelegatesFocus:me,shadowRootMode:null,shape:null,size:B,sizes:null,slot:null,span:B,spellCheck:Qe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:B,step:null,style:null,tabIndex:B,target:null,title:null,translate:null,type:null,typeMustMatch:me,useMap:null,value:Qe,width:B,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ce,axis:null,background:null,bgColor:null,border:B,borderColor:null,bottomMargin:B,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:me,declare:me,event:null,face:null,frame:null,frameBorder:null,hSpace:B,leftMargin:B,link:null,longDesc:null,lowSrc:null,marginHeight:B,marginWidth:B,noResize:me,noHref:me,noShade:me,noWrap:me,object:null,profile:null,prompt:null,rev:null,rightMargin:B,rules:null,scheme:null,scrolling:Qe,standby:null,summary:null,text:null,topMargin:B,valueType:null,version:null,vAlign:null,vLink:null,vSpace:B,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:me,disableRemotePlayback:me,prefix:null,property:null,results:B,security:null,unselectable:null},space:"html",transform:Tk}),X3=Ui({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Qt,accentHeight:B,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:B,amplitude:B,arabicForm:null,ascent:B,attributeName:null,attributeType:null,azimuth:B,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:B,by:null,calcMode:null,capHeight:B,className:Ce,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:B,diffuseConstant:B,direction:null,display:null,dur:null,divisor:B,dominantBaseline:null,download:me,dx:null,dy:null,edgeMode:null,editable:null,elevation:B,enableBackground:null,end:null,event:null,exponent:B,externalResourcesRequired:null,fill:null,fillOpacity:B,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:xi,g2:xi,glyphName:xi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:B,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:B,horizOriginX:B,horizOriginY:B,id:null,ideographic:B,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:B,k:B,k1:B,k2:B,k3:B,k4:B,kernelMatrix:Qt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:B,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:B,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:B,overlineThickness:B,paintOrder:null,panose1:null,path:null,pathLength:B,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ce,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:B,pointsAtY:B,pointsAtZ:B,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Qt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Qt,rev:Qt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Qt,requiredFeatures:Qt,requiredFonts:Qt,requiredFormats:Qt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:B,specularExponent:B,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:B,strikethroughThickness:B,string:null,stroke:null,strokeDashArray:Qt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:B,strokeOpacity:B,strokeWidth:null,style:null,surfaceScale:B,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Qt,tabIndex:B,tableValues:null,target:null,targetX:B,targetY:B,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Qt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:B,underlineThickness:B,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:B,values:null,vAlphabetic:B,vMathematical:B,vectorEffect:null,vHanging:B,vIdeographic:B,version:null,vertAdvY:B,vertOriginX:B,vertOriginY:B,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:B,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ck}),Ak=Ui({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Rk=Ui({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Tk}),Ik=Ui({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Y3={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Q3=/[A-Z]/g,Q0=/-[a-z]/g,J3=/^data[-\w.:]+$/i;function Z3(e,t){const n=Ph(t);let r=t,s=Xt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&J3.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Q0,t5);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Q0.test(i)){let a=i.replace(Q3,e5);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}s=Ip}return new s(r,t)}function e5(e){return"-"+e.toLowerCase()}function t5(e){return e.charAt(1).toUpperCase()}const n5=Ek([Pk,G3,Ak,Rk,Ik],"html"),Dp=Ek([Pk,X3,Ak,Rk,Ik],"svg");function r5(e){return e.join(" ").trim()}var Lp={},J0=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,s5=/\n/g,i5=/^\s*/,a5=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o5=/^:\s*/,l5=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c5=/^[;\s]*/,u5=/^\s+|\s+$/g,d5=`
`,Z0="/",ey="*",gs="",h5="comment",f5="declaration",p5=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(m){var v=m.match(s5);v&&(n+=v.length);var w=m.lastIndexOf(d5);r=~w?m.length-w:r+m.length}function i(){var m={line:n,column:r};return function(v){return v.position=new a(m),u(),v}}function a(m){this.start=m,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function l(m){var v=new Error(t.source+":"+n+":"+r+": "+m);if(v.reason=m,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(m){var v=m.exec(e);if(v){var w=v[0];return s(w),e=e.slice(w.length),v}}function u(){c(i5)}function d(m){var v;for(m=m||[];v=h();)v!==!1&&m.push(v);return m}function h(){var m=i();if(!(Z0!=e.charAt(0)||ey!=e.charAt(1))){for(var v=2;gs!=e.charAt(v)&&(ey!=e.charAt(v)||Z0!=e.charAt(v+1));)++v;if(v+=2,gs===e.charAt(v-1))return l("End of comment missing");var w=e.slice(2,v-2);return r+=2,s(w),e=e.slice(v),r+=2,m({type:h5,comment:w})}}function p(){var m=i(),v=c(a5);if(v){if(h(),!c(o5))return l("property missing ':'");var w=c(l5),g=m({type:f5,property:ty(v[0].replace(J0,gs)),value:w?ty(w[0].replace(J0,gs)):gs});return c(c5),g}}function f(){var m=[];d(m);for(var v;v=p();)v!==!1&&(m.push(v),d(m));return m}return u(),f()};function ty(e){return e?e.replace(u5,gs):gs}var m5=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lp,"__esModule",{value:!0});Lp.default=y5;var g5=m5(p5);function y5(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,g5.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var a=i.property,l=i.value;s?t(a,l,i):l&&(n=n||{},n[a]=l)}}),n}var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.camelCase=void 0;var x5=/^--[a-zA-Z0-9_-]+$/,v5=/-([a-z])/g,w5=/^[^-]+$/,b5=/^-(webkit|moz|ms|o|khtml)-/,k5=/^-(ms)-/,j5=function(e){return!e||w5.test(e)||x5.test(e)},S5=function(e,t){return t.toUpperCase()},ny=function(e,t){return"".concat(t,"-")},N5=function(e,t){return t===void 0&&(t={}),j5(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(k5,ny):e=e.replace(b5,ny),e.replace(v5,S5))};Ac.camelCase=N5;var _5=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},E5=_5(Lp),P5=Ac;function Ah(e,t){var n={};return!e||typeof e!="string"||(0,E5.default)(e,function(r,s){r&&s&&(n[(0,P5.camelCase)(r,t)]=s)}),n}Ah.default=Ah;var C5=Ah;const T5=Vh(C5),Dk=Lk("end"),Op=Lk("start");function Lk(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function A5(e){const t=Op(e),n=Dk(e);if(t&&n)return{start:t,end:n}}function Ea(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?ry(e.position):"start"in e||"end"in e?ry(e):"line"in e||"column"in e?Rh(e):""}function Rh(e){return sy(e&&e.line)+":"+sy(e&&e.column)}function ry(e){return Rh(e&&e.start)+"-"+Rh(e&&e.end)}function sy(e){return e&&typeof e=="number"?e:1}class Tt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(a=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=Ea(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Tt.prototype.file="";Tt.prototype.name="";Tt.prototype.reason="";Tt.prototype.message="";Tt.prototype.stack="";Tt.prototype.column=void 0;Tt.prototype.line=void 0;Tt.prototype.ancestors=void 0;Tt.prototype.cause=void 0;Tt.prototype.fatal=void 0;Tt.prototype.place=void 0;Tt.prototype.ruleId=void 0;Tt.prototype.source=void 0;const $p={}.hasOwnProperty,R5=new Map,I5=/[A-Z]/g,D5=new Set(["table","tbody","thead","tfoot","tr"]),L5=new Set(["td","th"]),Ok="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function O5(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=H5(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=B5(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Dp:n5,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=$k(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function $k(e,t,n){if(t.type==="element")return $5(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return M5(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return V5(e,t,n);if(t.type==="mdxjsEsm")return F5(e,t);if(t.type==="root")return z5(e,t,n);if(t.type==="text")return U5(e,t)}function $5(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Dp,e.schema=s),e.ancestors.push(t);const i=Fk(e,t.tagName,!1),a=W5(e,t);let l=Fp(e,t);return D5.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!q3(c):!0})),Mk(e,a,i,t),Mp(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function M5(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}ro(e,t.position)}function F5(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ro(e,t.position)}function V5(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Dp,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:Fk(e,t.name,!0),a=q5(e,t),l=Fp(e,t);return Mk(e,a,i,t),Mp(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function z5(e,t,n){const r={};return Mp(r,Fp(e,t)),e.create(t,e.Fragment,r,n)}function U5(e,t){return t.value}function Mk(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Mp(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function B5(e,t,n){return r;function r(s,i,a,l){const u=Array.isArray(a.children)?n:t;return l?u(i,a,l):u(i,a)}}function H5(e,t){return n;function n(r,s,i,a){const l=Array.isArray(i.children),c=Op(r);return t(s,i,a,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function W5(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&$p.call(t.properties,s)){const i=K5(e,s,t.properties[s]);if(i){const[a,l]=i;e.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&L5.has(t.tagName)?r=l:n[a]=l}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function q5(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else ro(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else ro(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function Fp(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:R5;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;a=c+"-"+u,s.set(c,u+1)}}const l=$k(e,i,a);l!==void 0&&n.push(l)}return n}function K5(e,t,n){const r=Z3(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?z3(n):r5(n)),r.property==="style"){let s=typeof n=="object"?n:G5(e,String(n));return e.stylePropertyNameCase==="css"&&(s=X5(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?Y3[r.property]||r.property:r.attribute,n]}}function G5(e,t){try{return T5(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new Tt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Ok+"#cannot-parse-style-attribute",s}}function Fk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,a;for(;++i<s.length;){const l=G0(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=a}else r=G0(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return $p.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);ro(e)}function ro(e,t){const n=new Tt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Ok+"#cannot-handle-mdx-estrees-without-createevaluater",n}function X5(e){const t={};let n;for(n in e)$p.call(e,n)&&(t[Y5(n)]=e[n]);return t}function Y5(e){let t=e.replace(I5,Q5);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Q5(e){return"-"+e.toLowerCase()}const Mu={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},J5={};function Z5(e,t){const n=J5,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Vk(e,r,s)}function Vk(e,t,n){if(eA(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return iy(e.children,t,n)}return Array.isArray(e)?iy(e,t,n):""}function iy(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Vk(e[s],t,n);return r.join("")}function eA(e){return!!(e&&typeof e=="object")}const ay=document.createElement("i");function Vp(e){const t="&"+e+";";ay.innerHTML=t;const n=ay.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Xn(e,t,n,r){const s=e.length;let i=0,a;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function fn(e,t){return e.length>0?(Xn(e,e.length,0,t),e):t}const oy={}.hasOwnProperty;function tA(e){const t={};let n=-1;for(;++n<e.length;)nA(t,e[n]);return t}function nA(e,t){let n;for(n in t){const s=(oy.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){oy.call(s,a)||(s[a]=[]);const l=i[a];rA(s[a],Array.isArray(l)?l:l?[l]:[])}}}function rA(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Xn(e,0,0,r)}function zk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function vi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Bn=rs(/[A-Za-z]/),nn=rs(/[\dA-Za-z]/),sA=rs(/[#-'*+\--9=?A-Z^-~]/);function Ih(e){return e!==null&&(e<32||e===127)}const Dh=rs(/\d/),iA=rs(/[\dA-Fa-f]/),aA=rs(/[!-/:-@[-`{-~]/);function ce(e){return e!==null&&e<-2}function Gt(e){return e!==null&&(e<0||e===32)}function Ne(e){return e===-2||e===-1||e===32}const oA=rs(new RegExp("\\p{P}|\\p{S}","u")),lA=rs(/\s/);function rs(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Bi(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(i===37&&nn(e.charCodeAt(n+1))&&nn(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(a=String.fromCharCode(i,l),s=1):a=""}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Ae(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(c){return Ne(c)?(e.enter(n),l(c)):t(c)}function l(c){return Ne(c)&&i++<s?(e.consume(c),l):(e.exit(n),t(c))}}const cA={tokenize:uA};function uA(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Ae(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return ce(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),a)}}const dA={tokenize:hA},ly={tokenize:fA};function hA(e){const t=this,n=[];let r=0,s,i,a;return l;function l(y){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,c,u)(y)}return u(y)}function c(y){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&x();const S=t.events.length;let E=S,j;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){j=t.events[E][1].end;break}g(r);let P=S;for(;P<t.events.length;)t.events[P][1].end={...j},P++;return Xn(t.events,E+1,0,t.events.slice(S)),t.events.length=P,u(y)}return l(y)}function u(y){if(r===n.length){if(!s)return p(y);if(s.currentConstruct&&s.currentConstruct.concrete)return m(y);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ly,d,h)(y)}function d(y){return s&&x(),g(r),p(y)}function h(y){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,m(y)}function p(y){return t.containerState={},e.attempt(ly,f,m)(y)}function f(y){return r++,n.push([t.currentConstruct,t.containerState]),p(y)}function m(y){if(y===null){s&&x(),g(0),e.consume(y);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),v(y)}function v(y){if(y===null){w(e.exit("chunkFlow"),!0),g(0),e.consume(y);return}return ce(y)?(e.consume(y),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(y),v)}function w(y,S){const E=t.sliceStream(y);if(S&&E.push(null),y.previous=i,i&&(i.next=y),i=y,s.defineSkip(y.start),s.write(E),t.parser.lazy[y.start.line]){let j=s.events.length;for(;j--;)if(s.events[j][1].start.offset<a&&(!s.events[j][1].end||s.events[j][1].end.offset>a))return;const P=t.events.length;let T=P,$,L;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if($){L=t.events[T][1].end;break}$=!0}for(g(r),j=P;j<t.events.length;)t.events[j][1].end={...L},j++;Xn(t.events,T+1,0,t.events.slice(P)),t.events.length=j}}function g(y){let S=n.length;for(;S-- >y;){const E=n[S];t.containerState=E[1],E[0].exit.call(t,e)}n.length=y}function x(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function fA(e,t,n){return Ae(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function cy(e){if(e===null||Gt(e)||lA(e))return 1;if(oA(e))return 2}function zp(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const Lh={name:"attention",resolveAll:pA,tokenize:mA};function pA(e,t){let n=-1,r,s,i,a,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},p={...e[n][1].start};uy(h,-c),uy(p,c),a={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:p},i={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},e[r][1].end={...a.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=fn(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=fn(u,[["enter",s,t],["enter",a,t],["exit",a,t],["enter",i,t]]),u=fn(u,zp(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=fn(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=fn(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Xn(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function mA(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=cy(r);let i;return a;function a(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),d=cy(c),h=!d||d===2&&s||n.includes(c),p=!s||s===2&&d||n.includes(r);return u._open=!!(i===42?h:h&&(s||!p)),u._close=!!(i===42?p:p&&(d||!h)),t(c)}}function uy(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const gA={name:"autolink",tokenize:yA};function yA(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return Bn(f)?(e.consume(f),a):f===64?n(f):u(f)}function a(f){return f===43||f===45||f===46||nn(f)?(r=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||nn(f))&&r++<32?(e.consume(f),l):(r=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||Ih(f)?n(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),d):sA(f)?(e.consume(f),u):n(f)}function d(f){return nn(f)?h(f):n(f)}function h(f){return f===46?(e.consume(f),r=0,d):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):p(f)}function p(f){if((f===45||nn(f))&&r++<63){const m=f===45?p:h;return e.consume(f),m}return n(f)}}const Rc={partial:!0,tokenize:xA};function xA(e,t,n){return r;function r(i){return Ne(i)?Ae(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||ce(i)?t(i):n(i)}}const Uk={continuation:{tokenize:wA},exit:bA,name:"blockQuote",tokenize:vA};function vA(e,t,n){const r=this;return s;function s(a){if(a===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),i}return n(a)}function i(a){return Ne(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function wA(e,t,n){const r=this;return s;function s(a){return Ne(a)?Ae(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return e.attempt(Uk,t,n)(a)}}function bA(e){e.exit("blockQuote")}const Bk={name:"characterEscape",tokenize:kA};function kA(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return aA(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const Hk={name:"characterReference",tokenize:jA};function jA(e,t,n){const r=this;let s=0,i,a;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,a=nn,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=iA,d):(e.enter("characterReferenceValue"),i=7,a=Dh,d(h))}function d(h){if(h===59&&s){const p=e.exit("characterReferenceValue");return a===nn&&!Vp(r.sliceSerialize(p))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(h)&&s++<i?(e.consume(h),d):n(h)}}const dy={partial:!0,tokenize:NA},hy={concrete:!0,name:"codeFenced",tokenize:SA};function SA(e,t,n){const r=this,s={partial:!0,tokenize:E};let i=0,a=0,l;return c;function c(j){return u(j)}function u(j){const P=r.events[r.events.length-1];return i=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,l=j,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(j)}function d(j){return j===l?(a++,e.consume(j),d):a<3?n(j):(e.exit("codeFencedFenceSequence"),Ne(j)?Ae(e,h,"whitespace")(j):h(j))}function h(j){return j===null||ce(j)?(e.exit("codeFencedFence"),r.interrupt?t(j):e.check(dy,v,S)(j)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(j))}function p(j){return j===null||ce(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(j)):Ne(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ae(e,f,"whitespace")(j)):j===96&&j===l?n(j):(e.consume(j),p)}function f(j){return j===null||ce(j)?h(j):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(j))}function m(j){return j===null||ce(j)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(j)):j===96&&j===l?n(j):(e.consume(j),m)}function v(j){return e.attempt(s,S,w)(j)}function w(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),g}function g(j){return i>0&&Ne(j)?Ae(e,x,"linePrefix",i+1)(j):x(j)}function x(j){return j===null||ce(j)?e.check(dy,v,S)(j):(e.enter("codeFlowValue"),y(j))}function y(j){return j===null||ce(j)?(e.exit("codeFlowValue"),x(j)):(e.consume(j),y)}function S(j){return e.exit("codeFenced"),t(j)}function E(j,P,T){let $=0;return L;function L(I){return j.enter("lineEnding"),j.consume(I),j.exit("lineEnding"),F}function F(I){return j.enter("codeFencedFence"),Ne(I)?Ae(j,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):q(I)}function q(I){return I===l?(j.enter("codeFencedFenceSequence"),he(I)):T(I)}function he(I){return I===l?($++,j.consume(I),he):$>=a?(j.exit("codeFencedFenceSequence"),Ne(I)?Ae(j,O,"whitespace")(I):O(I)):T(I)}function O(I){return I===null||ce(I)?(j.exit("codeFencedFence"),P(I)):T(I)}}}function NA(e,t,n){const r=this;return s;function s(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const Fu={name:"codeIndented",tokenize:EA},_A={partial:!0,tokenize:PA};function EA(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),Ae(e,i,"linePrefix",5)(u)}function i(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):ce(u)?e.attempt(_A,a,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||ce(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function PA(e,t,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):ce(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):Ae(e,i,"linePrefix",5)(a)}function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):ce(a)?s(a):n(a)}}const CA={name:"codeText",previous:AA,resolve:TA,tokenize:RA};function TA(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function AA(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function RA(e,t,n){let r=0,s,i;return a;function a(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(i=e.enter("codeTextSequence"),s=0,d(h)):ce(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||ce(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),s++,d):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",u(h))}}class IA{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&ta(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ta(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ta(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ta(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ta(this.left,n.reverse())}}}function ta(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Wk(e){const t={};let n=-1,r,s,i,a,l,c,u;const d=new IA(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,DA(d,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=d.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return Xn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function DA(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],u={};let d,h,p=-1,f=n,m=0,v=0;const w=[v];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(d=r.sliceStream(f),f.next||d.push(null),h&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++p<l.length;)l[p][0]==="exit"&&l[p-1][0]==="enter"&&l[p][1].type===l[p-1][1].type&&l[p][1].start.line!==l[p][1].end.line&&(v=p+1,w.push(v),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):w.pop(),p=w.length;p--;){const g=l.slice(w[p],w[p+1]),x=i.pop();c.push([x,x+g.length-1]),e.splice(x,2,g)}for(c.reverse(),p=-1;++p<c.length;)u[m+c[p][0]]=m+c[p][1],m+=c[p][1]-c[p][0]-1;return u}const LA={resolve:$A,tokenize:MA},OA={partial:!0,tokenize:FA};function $A(e){return Wk(e),e}function MA(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):ce(l)?e.check(OA,a,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function a(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function FA(e,t,n){const r=this;return s;function s(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ae(e,i,"linePrefix")}function i(a){if(a===null||ce(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function qk(e,t,n,r,s,i,a,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(g){return g===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(g),e.exit(i),p):g===null||g===32||g===41||Ih(g)?n(g):(e.enter(r),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(g))}function p(g){return g===62?(e.enter(i),e.consume(g),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(e.exit("chunkString"),e.exit(l),p(g)):g===null||g===60||ce(g)?n(g):(e.consume(g),g===92?m:f)}function m(g){return g===60||g===62||g===92?(e.consume(g),f):f(g)}function v(g){return!d&&(g===null||g===41||Gt(g))?(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(g)):d<u&&g===40?(e.consume(g),d++,v):g===41?(e.consume(g),d--,v):g===null||g===32||g===40||Ih(g)?n(g):(e.consume(g),g===92?w:v)}function w(g){return g===40||g===41||g===92?(e.consume(g),v):v(g)}}function Kk(e,t,n,r,s,i){const a=this;let l=0,c;return u;function u(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(i),d}function d(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(f):f===93?(e.exit(i),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):ce(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||ce(f)||l++>999?(e.exit("chunkString"),d(f)):(e.consume(f),c||(c=!Ne(f)),f===92?p:h)}function p(f){return f===91||f===92||f===93?(e.consume(f),l++,h):h(f)}}function Gk(e,t,n,r,s,i){let a;return l;function l(p){return p===34||p===39||p===40?(e.enter(r),e.enter(s),e.consume(p),e.exit(s),a=p===40?41:p,c):n(p)}function c(p){return p===a?(e.enter(s),e.consume(p),e.exit(s),e.exit(r),t):(e.enter(i),u(p))}function u(p){return p===a?(e.exit(i),c(a)):p===null?n(p):ce(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),Ae(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===a||p===null||ce(p)?(e.exit("chunkString"),u(p)):(e.consume(p),p===92?h:d)}function h(p){return p===a||p===92?(e.consume(p),d):d(p)}}function Pa(e,t){let n;return r;function r(s){return ce(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Ne(s)?Ae(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const VA={name:"definition",tokenize:UA},zA={partial:!0,tokenize:BA};function UA(e,t,n){const r=this;let s;return i;function i(f){return e.enter("definition"),a(f)}function a(f){return Kk.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=vi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return Gt(f)?Pa(e,u)(f):u(f)}function u(f){return qk(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return e.attempt(zA,h,h)(f)}function h(f){return Ne(f)?Ae(e,p,"whitespace")(f):p(f)}function p(f){return f===null||ce(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function BA(e,t,n){return r;function r(l){return Gt(l)?Pa(e,s)(l):n(l)}function s(l){return Gk(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return Ne(l)?Ae(e,a,"whitespace")(l):a(l)}function a(l){return l===null||ce(l)?t(l):n(l)}}const HA={name:"hardBreakEscape",tokenize:WA};function WA(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return ce(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const qA={name:"headingAtx",resolve:KA,tokenize:GA};function KA(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Xn(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function GA(e,t,n){let r=0;return s;function s(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(e.consume(d),a):d===null||Gt(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||ce(d)?(e.exit("atxHeading"),t(d)):Ne(d)?Ae(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Gt(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const XA=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fy=["pre","script","style","textarea"],YA={concrete:!0,name:"htmlFlow",resolveTo:ZA,tokenize:eR},QA={partial:!0,tokenize:nR},JA={partial:!0,tokenize:tR};function ZA(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function eR(e,t,n){const r=this;let s,i,a,l,c;return u;function u(_){return d(_)}function d(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),h}function h(_){return _===33?(e.consume(_),p):_===47?(e.consume(_),i=!0,v):_===63?(e.consume(_),s=3,r.interrupt?t:k):Bn(_)?(e.consume(_),a=String.fromCharCode(_),w):n(_)}function p(_){return _===45?(e.consume(_),s=2,f):_===91?(e.consume(_),s=5,l=0,m):Bn(_)?(e.consume(_),s=4,r.interrupt?t:k):n(_)}function f(_){return _===45?(e.consume(_),r.interrupt?t:k):n(_)}function m(_){const je="CDATA[";return _===je.charCodeAt(l++)?(e.consume(_),l===je.length?r.interrupt?t:q:m):n(_)}function v(_){return Bn(_)?(e.consume(_),a=String.fromCharCode(_),w):n(_)}function w(_){if(_===null||_===47||_===62||Gt(_)){const je=_===47,at=a.toLowerCase();return!je&&!i&&fy.includes(at)?(s=1,r.interrupt?t(_):q(_)):XA.includes(a.toLowerCase())?(s=6,je?(e.consume(_),g):r.interrupt?t(_):q(_)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):i?x(_):y(_))}return _===45||nn(_)?(e.consume(_),a+=String.fromCharCode(_),w):n(_)}function g(_){return _===62?(e.consume(_),r.interrupt?t:q):n(_)}function x(_){return Ne(_)?(e.consume(_),x):L(_)}function y(_){return _===47?(e.consume(_),L):_===58||_===95||Bn(_)?(e.consume(_),S):Ne(_)?(e.consume(_),y):L(_)}function S(_){return _===45||_===46||_===58||_===95||nn(_)?(e.consume(_),S):E(_)}function E(_){return _===61?(e.consume(_),j):Ne(_)?(e.consume(_),E):y(_)}function j(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),c=_,P):Ne(_)?(e.consume(_),j):T(_)}function P(_){return _===c?(e.consume(_),c=null,$):_===null||ce(_)?n(_):(e.consume(_),P)}function T(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||Gt(_)?E(_):(e.consume(_),T)}function $(_){return _===47||_===62||Ne(_)?y(_):n(_)}function L(_){return _===62?(e.consume(_),F):n(_)}function F(_){return _===null||ce(_)?q(_):Ne(_)?(e.consume(_),F):n(_)}function q(_){return _===45&&s===2?(e.consume(_),H):_===60&&s===1?(e.consume(_),A):_===62&&s===4?(e.consume(_),Q):_===63&&s===3?(e.consume(_),k):_===93&&s===5?(e.consume(_),z):ce(_)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(QA,Z,he)(_)):_===null||ce(_)?(e.exit("htmlFlowData"),he(_)):(e.consume(_),q)}function he(_){return e.check(JA,O,Z)(_)}function O(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),I}function I(_){return _===null||ce(_)?he(_):(e.enter("htmlFlowData"),q(_))}function H(_){return _===45?(e.consume(_),k):q(_)}function A(_){return _===47?(e.consume(_),a="",C):q(_)}function C(_){if(_===62){const je=a.toLowerCase();return fy.includes(je)?(e.consume(_),Q):q(_)}return Bn(_)&&a.length<8?(e.consume(_),a+=String.fromCharCode(_),C):q(_)}function z(_){return _===93?(e.consume(_),k):q(_)}function k(_){return _===62?(e.consume(_),Q):_===45&&s===2?(e.consume(_),k):q(_)}function Q(_){return _===null||ce(_)?(e.exit("htmlFlowData"),Z(_)):(e.consume(_),Q)}function Z(_){return e.exit("htmlFlow"),t(_)}}function tR(e,t,n){const r=this;return s;function s(a){return ce(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function nR(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Rc,t,n)}}const rR={name:"htmlText",tokenize:sR};function sR(e,t,n){const r=this;let s,i,a;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),u):k===47?(e.consume(k),E):k===63?(e.consume(k),y):Bn(k)?(e.consume(k),T):n(k)}function u(k){return k===45?(e.consume(k),d):k===91?(e.consume(k),i=0,m):Bn(k)?(e.consume(k),x):n(k)}function d(k){return k===45?(e.consume(k),f):n(k)}function h(k){return k===null?n(k):k===45?(e.consume(k),p):ce(k)?(a=h,A(k)):(e.consume(k),h)}function p(k){return k===45?(e.consume(k),f):h(k)}function f(k){return k===62?H(k):k===45?p(k):h(k)}function m(k){const Q="CDATA[";return k===Q.charCodeAt(i++)?(e.consume(k),i===Q.length?v:m):n(k)}function v(k){return k===null?n(k):k===93?(e.consume(k),w):ce(k)?(a=v,A(k)):(e.consume(k),v)}function w(k){return k===93?(e.consume(k),g):v(k)}function g(k){return k===62?H(k):k===93?(e.consume(k),g):v(k)}function x(k){return k===null||k===62?H(k):ce(k)?(a=x,A(k)):(e.consume(k),x)}function y(k){return k===null?n(k):k===63?(e.consume(k),S):ce(k)?(a=y,A(k)):(e.consume(k),y)}function S(k){return k===62?H(k):y(k)}function E(k){return Bn(k)?(e.consume(k),j):n(k)}function j(k){return k===45||nn(k)?(e.consume(k),j):P(k)}function P(k){return ce(k)?(a=P,A(k)):Ne(k)?(e.consume(k),P):H(k)}function T(k){return k===45||nn(k)?(e.consume(k),T):k===47||k===62||Gt(k)?$(k):n(k)}function $(k){return k===47?(e.consume(k),H):k===58||k===95||Bn(k)?(e.consume(k),L):ce(k)?(a=$,A(k)):Ne(k)?(e.consume(k),$):H(k)}function L(k){return k===45||k===46||k===58||k===95||nn(k)?(e.consume(k),L):F(k)}function F(k){return k===61?(e.consume(k),q):ce(k)?(a=F,A(k)):Ne(k)?(e.consume(k),F):$(k)}function q(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),s=k,he):ce(k)?(a=q,A(k)):Ne(k)?(e.consume(k),q):(e.consume(k),O)}function he(k){return k===s?(e.consume(k),s=void 0,I):k===null?n(k):ce(k)?(a=he,A(k)):(e.consume(k),he)}function O(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||Gt(k)?$(k):(e.consume(k),O)}function I(k){return k===47||k===62||Gt(k)?$(k):n(k)}function H(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function A(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),C}function C(k){return Ne(k)?Ae(e,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):z(k)}function z(k){return e.enter("htmlTextData"),a(k)}}const Up={name:"labelEnd",resolveAll:lR,resolveTo:cR,tokenize:uR},iR={tokenize:dR},aR={tokenize:hR},oR={tokenize:fR};function lR(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Xn(e,0,e.length,n),e}function cR(e,t){let n=e.length,r=0,s,i,a,l;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[a][1].end}},d={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[a-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=fn(l,e.slice(i+1,i+r+3)),l=fn(l,[["enter",d,t]]),l=fn(l,zp(t.parser.constructs.insideSpan.null,e.slice(i+r+4,a-3),t)),l=fn(l,[["exit",d,t],e[a-2],e[a-1],["exit",u,t]]),l=fn(l,e.slice(a+1)),l=fn(l,[["exit",c,t]]),Xn(e,i,e.length,l),e}function uR(e,t,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(p){return i?i._inactive?h(p):(a=r.parser.defined.includes(vi(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),c):n(p)}function c(p){return p===40?e.attempt(iR,d,a?d:h)(p):p===91?e.attempt(aR,d,a?u:h)(p):a?d(p):h(p)}function u(p){return e.attempt(oR,d,h)(p)}function d(p){return t(p)}function h(p){return i._balanced=!0,n(p)}}function dR(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return Gt(h)?Pa(e,i)(h):i(h)}function i(h){return h===41?d(h):qk(e,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return Gt(h)?Pa(e,c)(h):d(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?Gk(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return Gt(h)?Pa(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function hR(e,t,n){const r=this;return s;function s(l){return Kk.call(r,e,i,a,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(vi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function a(l){return n(l)}}function fR(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const pR={name:"labelStartImage",resolveAll:Up.resolveAll,tokenize:mR};function mR(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const gR={name:"labelStartLink",resolveAll:Up.resolveAll,tokenize:yR};function yR(e,t,n){const r=this;return s;function s(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Vu={name:"lineEnding",tokenize:xR};function xR(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ae(e,t,"linePrefix")}}const pl={name:"thematicBreak",tokenize:vR};function vR(e,t,n){let r=0,s;return i;function i(u){return e.enter("thematicBreak"),a(u)}function a(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||ce(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Ne(u)?Ae(e,l,"whitespace")(u):l(u))}}const Ft={continuation:{tokenize:jR},exit:NR,name:"list",tokenize:kR},wR={partial:!0,tokenize:_R},bR={partial:!0,tokenize:SR};function kR(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return l;function l(f){const m=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Dh(f)){if(r.containerState.type||(r.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(pl,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return Dh(f)&&++a<10?(e.consume(f),c):(!r.interrupt||a<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Rc,r.interrupt?n:d,e.attempt(wR,p,h))}function d(f){return r.containerState.initialBlankLine=!0,i++,p(f)}function h(f){return Ne(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),p):n(f)}function p(f){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function jR(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Rc,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ae(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!Ne(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(bR,t,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ae(e,e.attempt(Ft,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function SR(e,t,n){const r=this;return Ae(e,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(i):n(i)}}function NR(e){e.exit(this.containerState.type)}function _R(e,t,n){const r=this;return Ae(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!Ne(i)&&a&&a[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const py={name:"setextUnderline",resolveTo:ER,tokenize:PR};function ER(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",a,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function PR(e,t,n){const r=this;let s;return i;function i(u){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),s=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Ne(u)?Ae(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||ce(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const CR={tokenize:TR};function TR(e){const t=this,n=e.attempt(Rc,r,e.attempt(this.parser.constructs.flowInitial,s,Ae(e,e.attempt(this.parser.constructs.flow,s,e.attempt(LA,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const AR={resolveAll:Yk()},RR=Xk("string"),IR=Xk("text");function Xk(e){return{resolveAll:Yk(e==="text"?DR:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,a,l);return a;function a(d){return u(d)?i(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),i(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const h=s[d];let p=-1;if(h)for(;++p<h.length;){const f=h[p];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Yk(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function DR(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,a=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const LR={42:Ft,43:Ft,45:Ft,48:Ft,49:Ft,50:Ft,51:Ft,52:Ft,53:Ft,54:Ft,55:Ft,56:Ft,57:Ft,62:Uk},OR={91:VA},$R={[-2]:Fu,[-1]:Fu,32:Fu},MR={35:qA,42:pl,45:[py,pl],60:YA,61:py,95:pl,96:hy,126:hy},FR={38:Hk,92:Bk},VR={[-5]:Vu,[-4]:Vu,[-3]:Vu,33:pR,38:Hk,42:Lh,60:[gA,rR],91:gR,92:[HA,Bk],93:Up,95:Lh,96:CA},zR={null:[Lh,AR]},UR={null:[42,95]},BR={null:[]},HR=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:UR,contentInitial:OR,disable:BR,document:LR,flow:MR,flowInitial:$R,insideSpan:zR,string:FR,text:VR},Symbol.toStringTag,{value:"Module"}));function WR(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],l=[];const c={attempt:P(E),check:P(j),consume:x,enter:y,exit:S,interrupt:P(j,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:m,parser:e,previous:null,sliceSerialize:p,sliceStream:f,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function h(F){return a=fn(a,F),w(),a[a.length-1]!==null?[]:(T(t,0),u.events=zp(i,u.events,u),u.events)}function p(F,q){return KR(f(F),q)}function f(F){return qR(a,F)}function m(){const{_bufferIndex:F,_index:q,line:he,column:O,offset:I}=r;return{_bufferIndex:F,_index:q,line:he,column:O,offset:I}}function v(F){s[F.line]=F.column,L()}function w(){let F;for(;r._index<a.length;){const q=a[r._index];if(typeof q=="string")for(F=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===F&&r._bufferIndex<q.length;)g(q.charCodeAt(r._bufferIndex));else g(q)}}function g(F){d=d(F)}function x(F){ce(F)?(r.line++,r.column=1,r.offset+=F===-3?2:1,L()):F!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=F}function y(F,q){const he=q||{};return he.type=F,he.start=m(),u.events.push(["enter",he,u]),l.push(he),he}function S(F){const q=l.pop();return q.end=m(),u.events.push(["exit",q,u]),q}function E(F,q){T(F,q.from)}function j(F,q){q.restore()}function P(F,q){return he;function he(O,I,H){let A,C,z,k;return Array.isArray(O)?Z(O):"tokenize"in O?Z([O]):Q(O);function Q(N){return J;function J(Ee){const ft=Ee!==null&&N[Ee],kt=Ee!==null&&N.null,ot=[...Array.isArray(ft)?ft:ft?[ft]:[],...Array.isArray(kt)?kt:kt?[kt]:[]];return Z(ot)(Ee)}}function Z(N){return A=N,C=0,N.length===0?H:_(N[C])}function _(N){return J;function J(Ee){return k=$(),z=N,N.partial||(u.currentConstruct=N),N.name&&u.parser.constructs.disable.null.includes(N.name)?at():N.tokenize.call(q?Object.assign(Object.create(u),q):u,c,je,at)(Ee)}}function je(N){return F(z,k),I}function at(N){return k.restore(),++C<A.length?_(A[C]):H}}}function T(F,q){F.resolveAll&&!i.includes(F)&&i.push(F),F.resolve&&Xn(u.events,q,u.events.length-q,F.resolve(u.events.slice(q),u)),F.resolveTo&&(u.events=F.resolveTo(u.events,u))}function $(){const F=m(),q=u.previous,he=u.currentConstruct,O=u.events.length,I=Array.from(l);return{from:O,restore:H};function H(){r=F,u.previous=q,u.currentConstruct=he,u.events.length=O,l=I,L()}}function L(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function qR(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}function KR(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function GR(e){const r={constructs:tA([HR,...(e||{}).extensions||[]]),content:s(cA),defined:[],document:s(dA),flow:s(CR),lazy:{},string:s(RR),text:s(IR)};return r;function s(i){return a;function a(l){return WR(r,i,l)}}}function XR(e){for(;!Wk(e););return e}const my=/[\0\t\n\r]/g;function YR(){let e=1,t="",n=!0,r;return s;function s(i,a,l){const c=[];let u,d,h,p,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),h=0,t="",n&&(i.charCodeAt(0)===65279&&h++,n=void 0);h<i.length;){if(my.lastIndex=h,u=my.exec(i),p=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(p),!u){t=i.slice(h);break}if(f===10&&h===p&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<p&&(c.push(i.slice(h,p)),e+=p-h),f){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=p+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const QR=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function JR(e){return e.replace(QR,ZR)}function ZR(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return zk(n.slice(i?2:1),i?16:10)}return Vp(n)||e}const Qk={}.hasOwnProperty;function eI(e,t,n){return typeof t!="string"&&(n=t,t=void 0),tI(n)(XR(GR(n).document().write(YR()(e,t,!0))))}function tI(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Re),autolinkProtocol:$,autolinkEmail:$,atxHeading:i(D),blockQuote:i(kt),characterEscape:$,characterReference:$,codeFenced:i(ot),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(ot,a),codeText:i(K,a),codeTextData:$,data:$,codeFlowValue:$,definition:i(qe),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(Dn),hardBreakEscape:i(ne),hardBreakTrailing:i(ne),htmlFlow:i(ae,a),htmlFlowData:$,htmlText:i(ae,a),htmlTextData:$,image:i(ye),label:a,link:i(Re),listItem:i(Le),listItemValue:p,listOrdered:i(At,h),listUnordered:i(At),paragraph:i(Ln),reference:_,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(D),strong:i(pt),thematicBreak:i(xr)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:ft,autolinkProtocol:Ee,blockQuote:c(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:at,characterReferenceMarkerNumeric:at,characterReferenceValue:N,characterReference:J,codeFenced:c(w),codeFencedFence:v,codeFencedFenceInfo:f,codeFencedFenceMeta:m,codeFlowValue:L,codeIndented:c(g),codeText:c(I),codeTextData:L,data:L,definition:c(),definitionDestinationString:S,definitionLabelString:x,definitionTitleString:y,emphasis:c(),hardBreakEscape:c(q),hardBreakTrailing:c(q),htmlFlow:c(he),htmlFlowData:L,htmlText:c(O),htmlTextData:L,image:c(A),label:z,labelText:C,lineEnding:F,link:c(H),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:je,resourceDestinationString:k,resourceTitleString:Q,resource:Z,setextHeading:c(T),setextHeadingLineSequence:P,setextHeadingText:j,strong:c(),thematicBreak:c()}};Jk(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(R){let M={type:"root",children:[]};const te={stack:[M],tokenStack:[],config:t,enter:l,exit:u,buffer:a,resume:d,data:n},ue=[];let be=-1;for(;++be<R.length;)if(R[be][1].type==="listOrdered"||R[be][1].type==="listUnordered")if(R[be][0]==="enter")ue.push(be);else{const gt=ue.pop();be=s(R,gt,be)}for(be=-1;++be<R.length;){const gt=t[R[be][0]];Qk.call(gt,R[be][1].type)&&gt[R[be][1].type].call(Object.assign({sliceSerialize:R[be][2].sliceSerialize},te),R[be][1])}if(te.tokenStack.length>0){const gt=te.tokenStack[te.tokenStack.length-1];(gt[1]||gy).call(te,void 0,gt[0])}for(M.position={start:Sr(R.length>0?R[0][1].start:{line:1,column:1,offset:0}),end:Sr(R.length>0?R[R.length-2][1].end:{line:1,column:1,offset:0})},be=-1;++be<t.transforms.length;)M=t.transforms[be](M)||M;return M}function s(R,M,te){let ue=M-1,be=-1,gt=!1,jt,ke,vn,V;for(;++ue<=te;){const W=R[ue];switch(W[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{W[0]==="enter"?be++:be--,V=void 0;break}case"lineEndingBlank":{W[0]==="enter"&&(jt&&!V&&!be&&!vn&&(vn=ue),V=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:V=void 0}if(!be&&W[0]==="enter"&&W[1].type==="listItemPrefix"||be===-1&&W[0]==="exit"&&(W[1].type==="listUnordered"||W[1].type==="listOrdered")){if(jt){let re=ue;for(ke=void 0;re--;){const oe=R[re];if(oe[1].type==="lineEnding"||oe[1].type==="lineEndingBlank"){if(oe[0]==="exit")continue;ke&&(R[ke][1].type="lineEndingBlank",gt=!0),oe[1].type="lineEnding",ke=re}else if(!(oe[1].type==="linePrefix"||oe[1].type==="blockQuotePrefix"||oe[1].type==="blockQuotePrefixWhitespace"||oe[1].type==="blockQuoteMarker"||oe[1].type==="listItemIndent"))break}vn&&(!ke||vn<ke)&&(jt._spread=!0),jt.end=Object.assign({},ke?R[ke][1].start:W[1].end),R.splice(ke||ue,0,["exit",jt,W[2]]),ue++,te++}if(W[1].type==="listItemPrefix"){const re={type:"listItem",_spread:!1,start:Object.assign({},W[1].start),end:void 0};jt=re,R.splice(ue,0,["enter",re,W[2]]),ue++,te++,vn=void 0,V=!0}}}return R[M][1]._spread=gt,te}function i(R,M){return te;function te(ue){l.call(this,R(ue),ue),M&&M.call(this,ue)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(R,M,te){this.stack[this.stack.length-1].children.push(R),this.stack.push(R),this.tokenStack.push([M,te||void 0]),R.position={start:Sr(M.start),end:void 0}}function c(R){return M;function M(te){R&&R.call(this,te),u.call(this,te)}}function u(R,M){const te=this.stack.pop(),ue=this.tokenStack.pop();if(ue)ue[0].type!==R.type&&(M?M.call(this,R,ue[0]):(ue[1]||gy).call(this,R,ue[0]));else throw new Error("Cannot close `"+R.type+"` ("+Ea({start:R.start,end:R.end})+"): its not open");te.position.end=Sr(R.end)}function d(){return Z5(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function p(R){if(this.data.expectingFirstListItemValue){const M=this.stack[this.stack.length-2];M.start=Number.parseInt(this.sliceSerialize(R),10),this.data.expectingFirstListItemValue=void 0}}function f(){const R=this.resume(),M=this.stack[this.stack.length-1];M.lang=R}function m(){const R=this.resume(),M=this.stack[this.stack.length-1];M.meta=R}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const R=this.resume(),M=this.stack[this.stack.length-1];M.value=R.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const R=this.resume(),M=this.stack[this.stack.length-1];M.value=R.replace(/(\r?\n|\r)$/g,"")}function x(R){const M=this.resume(),te=this.stack[this.stack.length-1];te.label=M,te.identifier=vi(this.sliceSerialize(R)).toLowerCase()}function y(){const R=this.resume(),M=this.stack[this.stack.length-1];M.title=R}function S(){const R=this.resume(),M=this.stack[this.stack.length-1];M.url=R}function E(R){const M=this.stack[this.stack.length-1];if(!M.depth){const te=this.sliceSerialize(R).length;M.depth=te}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function P(R){const M=this.stack[this.stack.length-1];M.depth=this.sliceSerialize(R).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function $(R){const te=this.stack[this.stack.length-1].children;let ue=te[te.length-1];(!ue||ue.type!=="text")&&(ue=mt(),ue.position={start:Sr(R.start),end:void 0},te.push(ue)),this.stack.push(ue)}function L(R){const M=this.stack.pop();M.value+=this.sliceSerialize(R),M.position.end=Sr(R.end)}function F(R){const M=this.stack[this.stack.length-1];if(this.data.atHardBreak){const te=M.children[M.children.length-1];te.position.end=Sr(R.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(M.type)&&($.call(this,R),L.call(this,R))}function q(){this.data.atHardBreak=!0}function he(){const R=this.resume(),M=this.stack[this.stack.length-1];M.value=R}function O(){const R=this.resume(),M=this.stack[this.stack.length-1];M.value=R}function I(){const R=this.resume(),M=this.stack[this.stack.length-1];M.value=R}function H(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const M=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=M,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function A(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const M=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=M,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function C(R){const M=this.sliceSerialize(R),te=this.stack[this.stack.length-2];te.label=JR(M),te.identifier=vi(M).toLowerCase()}function z(){const R=this.stack[this.stack.length-1],M=this.resume(),te=this.stack[this.stack.length-1];if(this.data.inReference=!0,te.type==="link"){const ue=R.children;te.children=ue}else te.alt=M}function k(){const R=this.resume(),M=this.stack[this.stack.length-1];M.url=R}function Q(){const R=this.resume(),M=this.stack[this.stack.length-1];M.title=R}function Z(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function je(R){const M=this.resume(),te=this.stack[this.stack.length-1];te.label=M,te.identifier=vi(this.sliceSerialize(R)).toLowerCase(),this.data.referenceType="full"}function at(R){this.data.characterReferenceType=R.type}function N(R){const M=this.sliceSerialize(R),te=this.data.characterReferenceType;let ue;te?(ue=zk(M,te==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ue=Vp(M);const be=this.stack[this.stack.length-1];be.value+=ue}function J(R){const M=this.stack.pop();M.position.end=Sr(R.end)}function Ee(R){L.call(this,R);const M=this.stack[this.stack.length-1];M.url=this.sliceSerialize(R)}function ft(R){L.call(this,R);const M=this.stack[this.stack.length-1];M.url="mailto:"+this.sliceSerialize(R)}function kt(){return{type:"blockquote",children:[]}}function ot(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function qe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Dn(){return{type:"emphasis",children:[]}}function D(){return{type:"heading",depth:0,children:[]}}function ne(){return{type:"break"}}function ae(){return{type:"html",value:""}}function ye(){return{type:"image",title:null,url:"",alt:null}}function Re(){return{type:"link",title:null,url:"",children:[]}}function At(R){return{type:"list",ordered:R.type==="listOrdered",start:null,spread:R._spread,children:[]}}function Le(R){return{type:"listItem",spread:R._spread,checked:null,children:[]}}function Ln(){return{type:"paragraph",children:[]}}function pt(){return{type:"strong",children:[]}}function mt(){return{type:"text",value:""}}function xr(){return{type:"thematicBreak"}}}function Sr(e){return{line:e.line,column:e.column,offset:e.offset}}function Jk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Jk(e,r):nI(e,r)}}function nI(e,t){let n;for(n in t)if(Qk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function gy(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ea({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ea({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ea({start:t.start,end:t.end})+") is still open")}function rI(e){const t=this;t.parser=n;function n(r){return eI(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function sI(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function iI(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function aI(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function oI(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function lI(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function cI(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Bi(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function uI(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function dI(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Zk(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function hI(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Zk(e,t);const s={src:Bi(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function fI(e,t){const n={src:Bi(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function pI(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function mI(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Zk(e,t);const s={href:Bi(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function gI(e,t){const n={href:Bi(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function yI(e,t,n){const r=e.all(t),s=n?xI(n):e1(t),i={},a=[];if(typeof t.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?a.push(...d.children):a.push(d)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,u),e.applyData(t,u)}function xI(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=e1(n[r])}return t}function e1(e){const t=e.spread;return t??e.children.length>1}function vI(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function wI(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bI(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function kI(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jI(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Op(t.children[1]),c=Dk(t.children[t.children.length-1]);l&&c&&(a.position={start:l,end:c}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function SI(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],p={},f=a?a[c]:void 0;f&&(p.align=f);let m={type:"element",tagName:i,properties:p,children:[]};h&&(m.children=e.all(h),e.patch(h,m),m=e.applyData(h,m)),u.push(m)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function NI(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const yy=9,xy=32;function _I(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(vy(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(vy(t.slice(s),s>0,!1)),i.join("")}function vy(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===yy||i===xy;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===yy||i===xy;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function EI(e,t){const n={type:"text",value:_I(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function PI(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const CI={blockquote:sI,break:iI,code:aI,delete:oI,emphasis:lI,footnoteReference:cI,heading:uI,html:dI,imageReference:hI,image:fI,inlineCode:pI,linkReference:mI,link:gI,listItem:yI,list:vI,paragraph:wI,root:bI,strong:kI,table:jI,tableCell:NI,tableRow:SI,text:EI,thematicBreak:PI,toml:qo,yaml:qo,definition:qo,footnoteDefinition:qo};function qo(){}const t1=-1,Ic=0,Ca=1,Zl=2,Bp=3,Hp=4,Wp=5,qp=6,n1=7,r1=8,wy=typeof self=="object"?self:globalThis,TI=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case Ic:case t1:return n(a,s);case Ca:{const l=n([],s);for(const c of a)l.push(r(c));return l}case Zl:{const l=n({},s);for(const[c,u]of a)l[r(c)]=r(u);return l}case Bp:return n(new Date(a),s);case Hp:{const{source:l,flags:c}=a;return n(new RegExp(l,c),s)}case Wp:{const l=n(new Map,s);for(const[c,u]of a)l.set(r(c),r(u));return l}case qp:{const l=n(new Set,s);for(const c of a)l.add(r(c));return l}case n1:{const{name:l,message:c}=a;return n(new wy[l](c),s)}case r1:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new wy[i](a),s)};return r},by=e=>TI(new Map,e)(0),Hs="",{toString:AI}={},{keys:RI}=Object,na=e=>{const t=typeof e;if(t!=="object"||!e)return[Ic,t];const n=AI.call(e).slice(8,-1);switch(n){case"Array":return[Ca,Hs];case"Object":return[Zl,Hs];case"Date":return[Bp,Hs];case"RegExp":return[Hp,Hs];case"Map":return[Wp,Hs];case"Set":return[qp,Hs];case"DataView":return[Ca,n]}return n.includes("Array")?[Ca,n]:n.includes("Error")?[n1,n]:[Zl,n]},Ko=([e,t])=>e===Ic&&(t==="function"||t==="symbol"),II=(e,t,n,r)=>{const s=(a,l)=>{const c=r.push(a)-1;return n.set(l,c),c},i=a=>{if(n.has(a))return n.get(a);let[l,c]=na(a);switch(l){case Ic:{let d=a;switch(c){case"bigint":l=r1,d=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([t1],a)}return s([l,d],a)}case Ca:{if(c){let p=a;return c==="DataView"?p=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(p=new Uint8Array(a)),s([c,[...p]],a)}const d=[],h=s([l,d],a);for(const p of a)d.push(i(p));return h}case Zl:{if(c)switch(c){case"BigInt":return s([c,a.toString()],a);case"Boolean":case"Number":case"String":return s([c,a.valueOf()],a)}if(t&&"toJSON"in a)return i(a.toJSON());const d=[],h=s([l,d],a);for(const p of RI(a))(e||!Ko(na(a[p])))&&d.push([i(p),i(a[p])]);return h}case Bp:return s([l,a.toISOString()],a);case Hp:{const{source:d,flags:h}=a;return s([l,{source:d,flags:h}],a)}case Wp:{const d=[],h=s([l,d],a);for(const[p,f]of a)(e||!(Ko(na(p))||Ko(na(f))))&&d.push([i(p),i(f)]);return h}case qp:{const d=[],h=s([l,d],a);for(const p of a)(e||!Ko(na(p)))&&d.push(i(p));return h}}const{message:u}=a;return s([l,{name:c,message:u}],a)};return i},ky=(e,{json:t,lossy:n}={})=>{const r=[];return II(!(t||n),!!t,new Map,r)(e),r},ec=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?by(ky(e,t)):structuredClone(e):(e,t)=>by(ky(e,t));function DI(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function LI(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function OI(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||DI,r=e.options.footnoteBackLabel||LI,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),p=Bi(h.toLowerCase());let f=0;const m=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++f<=v;){m.length>0&&m.push({type:"text",value:" "});let x=typeof n=="string"?n:n(c,f);typeof x=="string"&&(x={type:"text",value:x}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+p+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const w=d[d.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const x=w.children[w.children.length-1];x&&x.type==="text"?x.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...m)}else d.push(...m);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+p},children:e.wrap(d,!0)};e.patch(u,g),l.push(g)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...ec(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const s1=function(e){if(e==null)return VI;if(typeof e=="function")return Dc(e);if(typeof e=="object")return Array.isArray(e)?$I(e):MI(e);if(typeof e=="string")return FI(e);throw new Error("Expected function, string, or object as test")};function $I(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=s1(e[n]);return Dc(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function MI(e){const t=e;return Dc(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function FI(e){return Dc(t);function t(n){return n&&n.type===e}}function Dc(e){return t;function t(n,r,s){return!!(zI(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function VI(){return!0}function zI(e){return e!==null&&typeof e=="object"&&"type"in e}const i1=[],UI=!0,jy=!1,BI="skip";function HI(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=s1(s),a=r?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return p;function p(){let f=i1,m,v,w;if((!t||i(c,u,d[d.length-1]||void 0))&&(f=WI(n(c,d)),f[0]===jy))return f;if("children"in c&&c.children){const g=c;if(g.children&&f[0]!==BI)for(v=(r?g.children.length:-1)+a,w=d.concat(g);v>-1&&v<g.children.length;){const x=g.children[v];if(m=l(x,v,w)(),m[0]===jy)return m;v=typeof m[1]=="number"?m[1]:v+a}}return f}}}function WI(e){return Array.isArray(e)?e:typeof e=="number"?[UI,e]:e==null?i1:[e]}function a1(e,t,n,r){let s,i,a;typeof t=="function"&&typeof n!="function"?(i=void 0,a=t,s=n):(i=t,a=n,s=r),HI(e,i,l,s);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return a(c,h,d)}}const Oh={}.hasOwnProperty,qI={};function KI(e,t){const n=t||qI,r=new Map,s=new Map,i=new Map,a={...CI,...n.handlers},l={all:u,applyData:XI,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:c,options:n,patch:GI,wrap:QI};return a1(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:s,p=String(d.identifier).toUpperCase();h.has(p)||h.set(p,d)}}),l;function c(d,h){const p=d.type,f=l.handlers[p];if(Oh.call(l.handlers,p)&&f)return f(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(p)){if("children"in d){const{children:v,...w}=d,g=ec(w);return g.children=l.all(d),g}return ec(d)}return(l.options.unknownHandler||YI)(l,d,h)}function u(d){const h=[];if("children"in d){const p=d.children;let f=-1;for(;++f<p.length;){const m=l.one(p[f],d);if(m){if(f&&p[f-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Sy(m.value)),!Array.isArray(m)&&m.type==="element")){const v=m.children[0];v&&v.type==="text"&&(v.value=Sy(v.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function GI(e,t){e.position&&(t.position=A5(e))}function XI(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,ec(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function YI(e,t){const n=t.data||{},r="value"in t&&!(Oh.call(n,"hProperties")||Oh.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function QI(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Sy(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ny(e,t){const n=KI(e,t),r=n.one(e,void 0),s=OI(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function JI(e,t){return e&&"run"in e?async function(n,r){const s=Ny(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Ny(n,{file:r,...e||t})}}function _y(e){if(e)throw e}var ml=Object.prototype.hasOwnProperty,o1=Object.prototype.toString,Ey=Object.defineProperty,Py=Object.getOwnPropertyDescriptor,Cy=function(t){return typeof Array.isArray=="function"?Array.isArray(t):o1.call(t)==="[object Array]"},Ty=function(t){if(!t||o1.call(t)!=="[object Object]")return!1;var n=ml.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&ml.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||ml.call(t,s)},Ay=function(t,n){Ey&&n.name==="__proto__"?Ey(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Ry=function(t,n){if(n==="__proto__")if(ml.call(t,n)){if(Py)return Py(t,n).value}else return;return t[n]},ZI=function e(){var t,n,r,s,i,a,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=Ry(l,n),s=Ry(t,n),l!==s&&(d&&s&&(Ty(s)||(i=Cy(s)))?(i?(i=!1,a=r&&Cy(r)?r:[]):a=r&&Ty(r)?r:{},Ay(l,{name:n,newValue:e(d,a,s)})):typeof s<"u"&&Ay(l,{name:n,newValue:s}));return l};const zu=Vh(ZI);function $h(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function eD(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...s);function l(c,...u){const d=e[++i];let h=-1;if(c){a(c);return}for(;++h<s.length;)(u[h]===null||u[h]===void 0)&&(u[h]=s[h]);s=u,d?tD(d,l)(...u):a(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function tD(e,t){let n;return r;function r(...a){const l=e.length>a.length;let c;l&&a.push(s);try{c=e.apply(this,a)}catch(u){const d=u;if(l&&n)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(a,...l){n||(n=!0,t(a,...l))}function i(a){s(null,a)}}const Fn={basename:nD,dirname:rD,extname:sD,join:iD,sep:"/"};function nD(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');vo(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function rD(e){if(vo(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function sD(e){vo(e);let t=e.length,n=-1,r=0,s=-1,i=0,a;for(;t--;){const l=e.codePointAt(t);if(l===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function iD(...e){let t=-1,n;for(;++t<e.length;)vo(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":aD(n)}function aD(e){vo(e);const t=e.codePointAt(0)===47;let n=oD(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function oD(e,t){let n="",r=0,s=-1,i=0,a=-1,l,c;for(;++a<=e.length;){if(a<e.length)l=e.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,a):n=e.slice(s+1,a),r=a-s-1;s=a,i=0}else l===46&&i>-1?i++:i=-1}return n}function vo(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const lD={cwd:cD};function cD(){return"/"}function Mh(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function uD(e){if(typeof e=="string")e=new URL(e);else if(!Mh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return dD(e)}function dD(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Uu=["history","path","basename","stem","extname","dirname"];class l1{constructor(t){let n;t?Mh(t)?n={path:t}:typeof t=="string"||hD(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":lD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Uu.length;){const i=Uu[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Uu.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Fn.basename(this.path):void 0}set basename(t){Hu(t,"basename"),Bu(t,"basename"),this.path=Fn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Fn.dirname(this.path):void 0}set dirname(t){Iy(this.basename,"dirname"),this.path=Fn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Fn.extname(this.path):void 0}set extname(t){if(Bu(t,"extname"),Iy(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Fn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Mh(t)&&(t=uD(t)),Hu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Fn.basename(this.path,this.extname):void 0}set stem(t){Hu(t,"stem"),Bu(t,"stem"),this.path=Fn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Tt(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Bu(e,t){if(e&&e.includes(Fn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Fn.sep+"`")}function Hu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Iy(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function hD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const fD=function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},pD={}.hasOwnProperty;class Kp extends fD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=eD()}copy(){const t=new Kp;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(zu(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Ku("data",this.frozen),this.namespace[t]=n,this):pD.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Ku("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Go(t),r=this.parser||this.Parser;return Wu("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Wu("process",this.parser||this.Parser),qu("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const l=Go(t),c=r.parse(l);r.run(c,l,function(d,h,p){if(d||!h||!p)return u(d);const f=h,m=r.stringify(f,p);yD(m)?p.value=m:p.result=m,u(d,p)});function u(d,h){d||!h?a(d):i?i(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),Wu("processSync",this.parser||this.Parser),qu("processSync",this.compiler||this.Compiler),this.process(t,s),Ly("processSync","process",n),r;function s(i,a){n=!0,_y(i),r=a}}run(t,n,r){Dy(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,l){const c=Go(n);s.run(t,c,u);function u(d,h,p){const f=h||t;d?l(d):a?a(f):r(void 0,f,p)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),Ly("runSync","run",r),s;function i(a,l){_y(a),s=l,r=!0}}stringify(t,n){this.freeze();const r=Go(n),s=this.compiler||this.Compiler;return qu("stringify",s),Dy(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Ku("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=zu(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];i(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,p=-1;for(;++h<r.length;)if(r[h][0]===u){p=h;break}if(p===-1)r.push([u,...d]);else if(d.length>0){let[f,...m]=d;const v=r[p][1];$h(v)&&$h(f)&&(f=zu(!0,v,f)),r[p]=[u,f,...m]}}}}const mD=new Kp().freeze();function Wu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function qu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Ku(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Dy(e){if(!$h(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Ly(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Go(e){return gD(e)?e:new l1(e)}function gD(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function yD(e){return typeof e=="string"||xD(e)}function xD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const vD="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Oy=[],$y={allowDangerousHtml:!0},wD=/^(https?|ircs?|mailto|xmpp)$/i,bD=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Fh(e){const t=kD(e),n=jD(e);return SD(t.runSync(t.parse(n),n),e)}function kD(e){const t=e.rehypePlugins||Oy,n=e.remarkPlugins||Oy,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...$y}:$y;return mD().use(rI).use(n).use(JI,r).use(t)}function jD(e){const t=e.children||"",n=new l1;return typeof t=="string"&&(n.value=t),n}function SD(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,a=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||ND;for(const d of bD)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+vD+d.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),a1(e,u),O5(e,{Fragment:o.Fragment,components:s,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function u(d,h,p){if(d.type==="raw"&&p&&typeof h=="number")return a?p.children.splice(h,1):p.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let f;for(f in Mu)if(Object.hasOwn(Mu,f)&&Object.hasOwn(d.properties,f)){const m=d.properties[f],v=Mu[f];(v===null||v.includes(d.tagName))&&(d.properties[f]=c(String(m||""),f,d))}}if(d.type==="element"){let f=n?!n.includes(d.tagName):i?i.includes(d.tagName):!1;if(!f&&r&&typeof h=="number"&&(f=!r(d,h,p)),f&&p&&typeof h=="number")return l&&d.children?p.children.splice(h,1,...d.children):p.children.splice(h,1),h}}}function ND(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||wD.test(e.slice(0,t))?e:""}function My({strategicDirectives:e,onUpdateChecklist:t,onSetActiveSD:n,currentSD:r,isCompact:s,detailMode:i,onRefresh:a,onUpdateStatus:l}){const{id:c}=Mf(),u=Oi(),[d,h]=b.useState(null),[p,f]=b.useState("list"),[m,v]=b.useState(null),[w,g]=b.useState(()=>localStorage.getItem("sd-status-filter")||"active"),[x,y]=b.useState(!1),[S,E]=b.useState(""),[j,P]=b.useState("all"),[T,$]=b.useState(null),[L,F]=b.useState(null),[q,he]=b.useState(null);b.useEffect(()=>{localStorage.setItem("sd-status-filter",w)},[w]),b.useEffect(()=>{if(i&&c){console.log("Detail mode - Looking for SD with id:",c),console.log("Available SDs count:",e.length),e.length>0&&console.log("First few SDs:",e.slice(0,3).map(J=>({id:J.id,title:J.title})));const N=e.find(J=>J.id===c);N?(console.log("Found SD:",N.id,N.title),v(N),f("detail"),document.title=`${N.title||N.id} - LEO Protocol Dashboard`):e.length>0?(console.warn(`SD with id '${c}' not found in ${e.length} directives, redirecting to list`),u("/strategic-directives",{replace:!0})):console.log("Waiting for strategic directives to load...")}else i||(f("list"),v(null),document.title="Strategic Directives - LEO Protocol Dashboard")},[c,i,e,u]);const O=N=>{h(d===N?null:N)},I=N=>{navigator.clipboard.writeText(N),$(N),setTimeout(()=>$(null),2e3)},H=()=>{E(""),P("all"),g("all")},A=S||j!=="all"||w!=="all",C=N=>{switch(N==null?void 0:N.toLowerCase()){case"critical":return"border-l-4 border-l-red-500";case"high":return"border-l-4 border-l-orange-500";case"medium":return"border-l-4 border-l-yellow-500";case"low":return"border-l-4 border-l-gray-400";default:return"border-l-4 border-l-gray-300"}},z=N=>N===100?"bg-gradient-to-r from-green-400 to-green-600 animate-pulse":N>=76?"bg-gradient-to-r from-blue-400 to-blue-600":N>=51?"bg-gradient-to-r from-yellow-400 to-yellow-600":N>=26?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gradient-to-r from-red-400 to-red-600",k=(N,J)=>{const Ee=e.find(ft=>ft.id===N);Ee&&Ee.checklist&&Ee.checklist[J]&&t(N,J,!Ee.checklist[J].checked)},Q=N=>{if(!N||!N.id){console.error("Invalid SD for navigation:",N);return}try{u(`/strategic-directives/${N.id}`)}catch(J){console.error("Navigation error:",J)}};if(p==="detail"&&m)return o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>u("/strategic-directives"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[o.jsx(en,{className:"w-4 h-4 mr-1"}),"Back to List"]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:[m.id,": ",m.title||"Untitled"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:m.metadata&&Object.entries(m.metadata).map(([N,J])=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:N}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:typeof J=="object"?JSON.stringify(J,null,2):String(J)})]},N))}),o.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:o.jsx(Fh,{children:m.content||"No content available"})}),m.checklist&&m.checklist.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Requirements Checklist"}),o.jsx("div",{className:"space-y-2",children:m.checklist.map((N,J)=>o.jsxs("label",{className:"flex items-start p-3 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:N.checked,onChange:()=>k(m.id,J),className:"mt-1 mr-3 w-5 h-5 text-primary-600 rounded focus:ring-primary-500"}),o.jsx("span",{className:`flex-1 ${N.checked?"line-through text-gray-500":""}`,children:N.text})]},J))})]}),m.prds&&m.prds.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[o.jsx(dt,{className:"w-5 h-5 mr-2 text-blue-600"}),"Product Requirements Documents (",m.prds.length,")"]}),o.jsx("div",{className:"space-y-4",children:m.prds.map(N=>o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:N.title}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["ID: ",N.id]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.status==="approved"?"bg-green-100 text-green-800":N.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:N.status}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.priority==="high"?"bg-red-100 text-red-800":N.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:N.priority})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Phase:"})," ",N.phase]}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Progress:"})," ",N.progress,"%"]})]}),o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Created:"})," ",new Date(N.createdAt).toLocaleDateString()]})})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:o.jsxs("button",{onClick:()=>u(`/prds/${N.id}`),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center",children:["View Full PRD ",o.jsx(en,{className:"w-4 h-4 ml-1"})]})})]},N.id))})]}),m.executionSequences&&m.executionSequences.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[o.jsx(or,{className:"w-5 h-5 mr-2 text-green-600"}),"Execution Sequence Steps (",m.executionSequences.length,")"]}),o.jsx("div",{className:"space-y-3",children:m.executionSequences.map(N=>o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${N.status==="completed"?"bg-green-500 text-white":N.status==="in_progress"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:N.sequenceNumber}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:N.description}),o.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-green-700 dark:text-green-300",children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Executor:"})," ",N.executorRole]}),N.completedAt&&o.jsxs("span",{children:[o.jsx("strong",{children:"Completed:"})," ",new Date(N.completedAt).toLocaleDateString()]})]})]})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.status==="completed"?"bg-green-100 text-green-800":N.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:N.status})]})},N.id))})]})]})]});if(p==="detail"&&!m)return o.jsx("div",{className:"p-6 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading strategic directive..."})]})});const Z=e.filter(N=>{var kt,ot,K,qe,Dn,D,ne,ae;let J=!0;w!=="all"&&(w==="active"&&(J=((kt=N.status)==null?void 0:kt.toLowerCase())==="active"),w==="draft"&&(J=((ot=N.status)==null?void 0:ot.toLowerCase())==="draft"),w==="superseded"&&(J=((K=N.status)==null?void 0:K.toLowerCase())==="superseded"),w==="archived"&&(J=((qe=N.status)==null?void 0:qe.toLowerCase())==="archived"));let Ee=!0;if(S){const ye=S.toLowerCase();Ee=((Dn=N.id)==null?void 0:Dn.toLowerCase().includes(ye))||((D=N.title)==null?void 0:D.toLowerCase().includes(ye))||((ne=N.description)==null?void 0:ne.toLowerCase().includes(ye))}let ft=!0;return j!=="all"&&(ft=((ae=N.priority)==null?void 0:ae.toLowerCase())===j.toLowerCase()),J&&Ee&&ft}),_=[...Z].sort((N,J)=>{if(N.sequence_rank!==void 0&&J.sequence_rank!==void 0)return N.sequence_rank-J.sequence_rank;if(N.sequence_rank!==void 0)return-1;if(J.sequence_rank!==void 0)return 1;const Ee=ot=>{if(!ot)return 999999;const K=ot.match(/SD-(\d+)/);return K?parseInt(K[1],10):999999},ft=Ee(N.id),kt=Ee(J.id);return ft-kt}),je=()=>{switch(w){case"active":return"Active Only";case"draft":return"Draft Only";case"superseded":return"Superseded Only";case"archived":return"Archived Only";case"all":return"All Directives";default:return"Active Only"}},at=N=>(N==null?void 0:N.toLowerCase())==="archived"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 transition-all duration-200 hover:scale-105",children:[o.jsx(_s,{className:"w-3 h-3 mr-1"}),"Archived"]}):(N==null?void 0:N.toLowerCase())==="draft"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 transition-all duration-200 hover:scale-105",children:[o.jsx(Eu,{className:"w-3 h-3 mr-1"}),"Draft"]}):(N==null?void 0:N.toLowerCase())==="superseded"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 transition-all duration-200 hover:scale-105",children:[o.jsx(S0,{className:"w-3 h-3 mr-1"}),"Superseded"]}):o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 transition-all duration-200 hover:scale-105",children:[o.jsx(Xl,{className:"w-3 h-3 mr-1 animate-pulse"}),"Active"]});return o.jsxs("div",{className:s?"p-3":"p-6",children:[o.jsxs("div",{className:s?"mb-3":"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:`${s?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white flex items-center`,children:[o.jsx(Gl,{className:"w-6 h-6 mr-2 text-primary-500 animate-pulse"}),"Strategic Directives"]}),o.jsxs("p",{className:`text-gray-600 dark:text-gray-400 ${s?"text-sm mt-1":"mt-2"}`,children:["Showing ",Z.length," of ",e.length," directives",Z.filter(N=>N.rolled_triage).length>0&&o.jsxs("span",{className:"ml-2",children:["(",Z.filter(N=>N.rolled_triage==="High").length,"H /",Z.filter(N=>N.rolled_triage==="Medium").length,"M /",Z.filter(N=>N.rolled_triage==="Low").length,"L /",Z.filter(N=>N.rolled_triage==="Future").length,"F)"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>y(!x),className:`flex items-center gap-2 ${s?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors`,children:[o.jsx(Wb,{className:`${s?"w-3.5 h-3.5":"w-4 h-4"}`}),je(),o.jsx(Un,{className:`${s?"w-3.5 h-3.5":"w-4 h-4"}`})]}),x&&o.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{g("all"),y(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${w==="all"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(dt,{className:"w-4 h-4 mr-2"}),"All Directives"]}),w==="all"&&o.jsx(Sn,{className:"w-4 h-4"})]}),o.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),o.jsxs("button",{onClick:()=>{g("active"),y(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${w==="active"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(Sc,{className:"w-4 h-4 mr-2"}),"Active Only"]}),w==="active"&&o.jsx(Sn,{className:"w-4 h-4"})]}),o.jsxs("button",{onClick:()=>{g("draft"),y(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${w==="draft"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(Eu,{className:"w-4 h-4 mr-2"}),"Draft Only"]}),w==="draft"&&o.jsx(Sn,{className:"w-4 h-4"})]}),o.jsxs("button",{onClick:()=>{g("superseded"),y(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${w==="superseded"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(S0,{className:"w-4 h-4 mr-2"}),"Superseded Only"]}),w==="superseded"&&o.jsx(Sn,{className:"w-4 h-4"})]}),o.jsxs("button",{onClick:()=>{g("archived"),y(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${w==="archived"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(_s,{className:"w-4 h-4 mr-2"}),"Archived Only"]}),w==="archived"&&o.jsx(Sn,{className:"w-4 h-4"})]})]})})]}),o.jsx(Nc,{onRefresh:a,isCompact:s}),o.jsxs("button",{onClick:()=>u("/directive-lab?mode=quick"),className:`flex items-center ${s?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[o.jsx(Yb,{className:`${s?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]})]})]}),o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Xb,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 ${s?"w-4 h-4":"w-5 h-5"}`}),o.jsx("input",{type:"text",placeholder:"Search by ID, title, or description...",value:S,onChange:N=>E(N.target.value),className:`w-full ${s?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200`}),S&&o.jsx("button",{onClick:()=>E(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(Is,{className:`${s?"w-4 h-4":"w-5 h-5"}`})})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 mr-2`,children:"Priority:"}),["all","critical","high","medium","low"].map(N=>o.jsx("button",{onClick:()=>P(N),className:`${s?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"} rounded-full transition-all duration-200 ${j===N?N==="critical"?"bg-red-500 text-white":N==="high"?"bg-orange-500 text-white":N==="medium"?"bg-yellow-500 text-white":N==="low"?"bg-gray-500 text-white":"bg-primary-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:N.charAt(0).toUpperCase()+N.slice(1)},N)),A&&o.jsxs("button",{onClick:H,className:`ml-auto ${s?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"} bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full hover:bg-red-200 dark:hover:bg-red-900/50 transition-all duration-200 flex items-center gap-1`,children:[o.jsx(Is,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Clear Filters"]})]})]})]}),Z.length===0?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[o.jsx(dt,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e.length===0?"No strategic directives found":`No ${w==="all"?"":w} directives found`})]}):o.jsx("div",{className:"space-y-4",children:_.map(N=>o.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${C(N.priority)}`,children:o.jsxs("div",{className:`${s?"p-3":"p-6"} relative`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>O(N.id),className:"mr-2 p-1 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/20 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 transform hover:scale-105","aria-label":d===N.id?"Collapse":"Expand",children:o.jsx(en,{className:`w-4 h-4 transition-transform duration-200 ease-in-out ${d===N.id?"rotate-90":""}`})}),o.jsxs("h2",{className:`${s?"text-base":"text-xl"} font-semibold text-gray-900 dark:text-white`,children:[N.sequence_rank&&o.jsxs("span",{className:"text-xs font-medium px-1.5 py-0.5 mr-2 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400 rounded",children:["#",N.sequence_rank]}),o.jsxs("span",{className:"inline-flex items-center group",children:[o.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-mono mr-1",children:N.id}),o.jsx("button",{onClick:J=>{J.stopPropagation(),I(N.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-1 mr-2",title:"Copy ID",children:T===N.id?o.jsx(Sn,{className:"w-3 h-3 text-green-500"}):o.jsx(vp,{className:"w-3 h-3 text-gray-500"})}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400 mr-2",children:":"})]}),o.jsx("span",{className:s?"line-clamp-1":"",children:N.title||"Untitled"})]})]}),o.jsxs("div",{className:`${s?"mt-2 gap-1":"mt-3 gap-2"} flex flex-wrap items-center`,children:[o.jsxs("div",{className:"relative inline-block",children:[o.jsxs("button",{onClick:J=>{J.stopPropagation(),he(q===N.id?null:N.id)},className:"group flex items-center gap-1 hover:opacity-80 transition-opacity",children:[at(N.status),o.jsx(Eu,{className:"w-3 h-3 text-gray-500 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),q===N.id&&o.jsx("div",{className:"absolute left-0 mt-1 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:o.jsx("div",{className:"py-1",children:["active","draft","superseded","archived"].map(J=>o.jsxs("button",{onClick:Ee=>{Ee.stopPropagation(),l&&l(N.id,J),he(null)},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${N.status===J?"bg-gray-50 dark:bg-gray-700/50 text-primary-600":"text-gray-700 dark:text-gray-200"}`,children:[o.jsx("span",{className:"capitalize",children:J}),N.status===J&&o.jsx(Sn,{className:"w-3 h-3"})]},J))})})]}),o.jsxs("button",{onClick:J=>{J.stopPropagation(),u(`/backlog?sd=${N.sd_id||N.id}`)},className:`flex items-center ${s?"px-2 py-0.5 text-xs":"px-3 py-1 text-sm"} ${N.total_backlog_items>0||N.total_items>0||N.backlog_count>0?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800/40":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"} rounded transition-colors`,children:[o.jsx(_s,{className:`${s?"w-3 h-3":"w-4 h-4"} mr-1`}),"Backlog",o.jsx("span",{className:`ml-1 ${s?"px-1":"px-1.5"} py-0.5 ${N.total_backlog_items>0||N.total_items>0||N.backlog_count>0?"bg-indigo-200 dark:bg-indigo-800":"bg-gray-200 dark:bg-gray-600"} rounded text-xs font-bold`,children:N.total_backlog_items||N.total_items||N.backlog_count||0})]}),N.rolled_triage&&o.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${N.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":N.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":N.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:s?N.rolled_triage[0]:`Triage: ${N.rolled_triage}`}),N.must_have_pct!==null&&o.jsxs("span",{className:`${s?"px-1.5 py-0.5":"px-2 py-1"} text-xs bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded`,children:[N.must_have_pct,"%",!s&&" Must-Have"]}),N.category&&!s&&o.jsx("span",{className:"px-2 py-1 text-xs bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:N.category}),N.metadata.Status&&N.metadata.Status!==N.status&&o.jsx("span",{className:`px-2 py-1 text-xs rounded ${N.metadata.Status==="Completed"?"bg-green-100 text-green-800":N.metadata.Status==="In Progress"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:N.metadata.Status}),N.metadata.Priority&&o.jsx("span",{className:`px-2 py-1 text-xs rounded ${N.metadata.Priority==="High"?"bg-red-100 text-red-800":N.metadata.Priority==="Medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:N.metadata.Priority}),N.metadata.Owner&&o.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded flex items-center",children:[o.jsx(Sp,{className:"w-3 h-3 mr-1"}),N.metadata.Owner]}),N.metadata.Date&&o.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded flex items-center",children:[o.jsx(Bb,{className:"w-3 h-3 mr-1"}),N.metadata.Date]})]}),o.jsxs("div",{className:`${s?"mt-2":"mt-4"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 flex items-center`,children:["Progress",N.progressTrend&&(N.progressTrend>0?o.jsx(mr,{className:"w-3 h-3 ml-1 text-green-500"}):o.jsx(Lr,{className:"w-3 h-3 ml-1 text-red-500"}))]}),o.jsxs("span",{className:`${s?"text-xs":"text-sm"} font-semibold flex items-center`,children:[N.progress,"%",N.progress===100&&o.jsx(Gl,{className:"w-3 h-3 ml-1 text-green-500 animate-pulse"})]})]}),o.jsx("div",{className:`w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${s?"h-2":"h-3"} shadow-inner`,children:o.jsx("div",{className:`${s?"h-2":"h-3"} rounded-full transition-all duration-1000 ease-out ${z(N.progress)}`,style:{width:`${N.progress}%`,boxShadow:N.progress===100?"0 0 10px rgba(34, 197, 94, 0.5)":"none"}})})]})]}),o.jsxs("div",{className:`${s?"ml-2":"ml-4"} flex flex-col items-end ${s?"space-y-1":"space-y-2"}`,children:[(N.h_count||0)+(N.m_count||0)+(N.l_count||0)+(N.future_count||0)>0&&o.jsxs("button",{onClick:()=>O(N.id),className:`${s?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"} bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors flex items-center ${s?"space-x-1":"space-x-2"}`,children:[o.jsx(dt,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),o.jsx("span",{className:"font-semibold",children:(N.h_count||0)+(N.m_count||0)+(N.l_count||0)+(N.future_count||0)}),!s&&o.jsx("span",{children:"Backlog Items"})]}),o.jsxs("div",{className:`flex ${s?"space-x-1":"space-x-2"}`,children:[o.jsx("button",{onClick:()=>Q(N),className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg`,children:s?"View":"View Full"}),r===N.id?o.jsxs("button",{disabled:!0,className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-green-500 text-white rounded flex items-center`,children:[o.jsx(or,{className:`${s?"w-3 h-3":"w-4 h-4"} mr-1`}),s?"":"Active"]}):o.jsxs("button",{onClick:()=>n&&n(N.id),className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center`,children:[o.jsx(or,{className:`${s?"w-3 h-3":"w-4 h-4"} ${s?"":"mr-1"} animate-pulse`}),!s&&"Set Active"]})]}),N.checklist&&N.checklist.length>0&&o.jsx("div",{className:"text-sm text-gray-600",children:o.jsxs("span",{className:"flex items-center",children:[o.jsx(Sn,{className:"w-4 h-4 mr-1"}),N.checklist.filter(J=>J.checked).length,"/",N.checklist.length]})})]})]}),d===N.id&&o.jsxs("div",{className:"mt-6 border-t pt-6",children:[(N.h_count>0||N.m_count>0||N.l_count>0||N.future_count>0)&&o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(dt,{className:"w-5 h-5 mr-2 text-blue-600"}),"Backlog Items Summary"]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[N.h_count>0&&o.jsxs("div",{className:"text-center p-2 bg-red-100 dark:bg-red-900/20 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:N.h_count}),o.jsx("p",{className:"text-xs text-red-600 dark:text-red-300",children:"High Priority"})]}),N.m_count>0&&o.jsxs("div",{className:"text-center p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-400",children:N.m_count}),o.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-300",children:"Medium Priority"})]}),N.l_count>0&&o.jsxs("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/20 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:N.l_count}),o.jsx("p",{className:"text-xs text-green-600 dark:text-green-300",children:"Low Priority"})]}),N.future_count>0&&o.jsxs("div",{className:"text-center p-2 bg-gray-100 dark:bg-gray-600 rounded",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300",children:N.future_count}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Future"})]})]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total backlog items: ",(N.h_count||0)+(N.m_count||0)+(N.l_count||0)+(N.future_count||0),N.must_have_count>0&&`  Must-have: ${N.must_have_count}`]}),o.jsx("button",{onClick:()=>Q(N),className:"mt-3 text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"View all backlog items "})]}),N.checklist&&N.checklist.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(or,{className:"w-5 h-5 mr-2"}),"Requirements Checklist"]}),o.jsxs("div",{className:"space-y-2",children:[N.checklist.slice(0,5).map((J,Ee)=>o.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:J.checked,onChange:()=>k(N.id,Ee),className:"mr-3 w-4 h-4 text-primary-600 rounded"}),o.jsx("span",{className:`${J.checked?"line-through text-gray-500":""}`,children:J.text})]},Ee)),N.checklist&&N.checklist.length>5&&o.jsxs("button",{onClick:()=>Q(N),className:"text-primary-600 hover:text-primary-700 text-sm",children:["View all ",N.checklist.length," items..."]})]})]}),o.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Content Preview"}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded max-h-64 overflow-y-auto",children:o.jsx(Fh,{children:N.content.substring(0,500)+(N.content.length>500?"...":"")})}),o.jsx("button",{onClick:()=>Q(N),className:"mt-3 text-primary-600 hover:text-primary-700",children:"Read full document "})]})]})]})},N.id))})]})}function Fy({prds:e,isCompact:t,detailMode:n}){const{id:r}=Mf(),s=Oi(),[i,a]=b.useState("list"),[l,c]=b.useState(null);b.useEffect(()=>{if(n&&r){const d=e.find(h=>h.id===r);d?(c(d),a("detail"),document.title=`${d.title||d.id} - LEO Protocol Dashboard`):(console.warn(`PRD with id '${r}' not found, redirecting to list`),s("/prds",{replace:!0}))}else n||(a("list"),c(null),document.title="PRDs - LEO Protocol Dashboard")},[r,n,e,s]);const u=d=>{if(!d||!d.id){console.error("Invalid PRD for navigation:",d);return}try{s(`/prds/${d.id}`)}catch(h){console.error("Navigation error:",h)}};return i==="detail"&&l?o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>s("/prds"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[o.jsx(en,{className:"w-4 h-4 mr-1 rotate-180"}),"Back to PRDs"]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.title}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:l.directiveTitle&&`Strategic Directive: ${l.directiveTitle}`})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.status})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Priority"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.priority})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.phase})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),o.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[l.progress,"%"]})]})]}),o.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:o.jsx(Fh,{children:l.content||"No content available"})}),l.checklist&&l.checklist.length>0&&o.jsxs("div",{className:"border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Implementation Checklist"}),o.jsx("div",{className:"space-y-2",children:l.checklist.map((d,h)=>o.jsxs("div",{className:"flex items-start p-3 rounded bg-gray-50 dark:bg-gray-700",children:[d.checked?o.jsx(Sn,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}):o.jsx(jp,{className:"w-5 h-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0"}),o.jsx("span",{className:`flex-1 ${d.checked?"line-through text-gray-500":""}`,children:d.text}),d.phase&&o.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded ml-2",children:d.phase})]},h))})]})]})]}):o.jsxs("div",{className:t?"p-3":"p-6",children:[o.jsx("div",{className:t?"mb-3":"mb-6",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:`${t?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white`,children:"PRDs"}),o.jsx("p",{className:`text-gray-600 dark:text-gray-400 ${t?"text-sm mt-1":"mt-2"}`,children:"Product Requirements Documents - Technical implementation details"})]})})}),e.length===0?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[o.jsx(dt,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No PRDs found"})]}):o.jsx("div",{className:"space-y-4",children:e.map(d=>o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(dt,{className:"w-6 h-6 text-blue-600 mt-1"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.title}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.directiveTitle&&`SD: ${d.directiveTitle}`}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:d.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.priority==="high"?"bg-red-100 text-red-800":d.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:d.priority}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Phase: ",d.phase]}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Progress: ",d.progress,"%"]})]})]})]})}),o.jsx("div",{className:"ml-4 flex flex-col items-end space-y-2",children:o.jsx("button",{onClick:()=>u(d),className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors",children:"View Full"})})]})})},d.id))})]})}const Oe=({children:e,variant:t="primary",size:n="medium",disabled:r=!1,loading:s=!1,onClick:i,type:a="button",fullWidth:l=!1,icon:c,iconPosition:u="left",ariaLabel:d,className:h="",...p})=>{const f=`
    inline-flex items-center justify-center
    font-medium transition-all duration-200
    rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    min-h-[44px] min-w-[44px]
  `,m={small:"px-3 py-1.5 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"},v={primary:`
      bg-blue-600 dark:bg-blue-600 text-white dark:text-white
      hover:bg-blue-700 dark:hover:bg-blue-700 active:bg-blue-800 dark:active:bg-blue-800
      focus:ring-blue-500 dark:focus:ring-blue-400
    `,secondary:`
      bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100
      hover:bg-gray-300 dark:hover:bg-gray-600 active:bg-gray-400 dark:active:bg-gray-500
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,ghost:`
      bg-transparent dark:bg-transparent text-gray-700 dark:text-gray-300
      hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,danger:`
      bg-red-600 dark:bg-red-600 text-white dark:text-white
      hover:bg-red-700 dark:hover:bg-red-700 active:bg-red-800 dark:active:bg-red-800
      focus:ring-red-500 dark:focus:ring-red-400
    `,success:`
      bg-green-600 dark:bg-green-600 text-white dark:text-white
      hover:bg-green-700 dark:hover:bg-green-700 active:bg-green-800 dark:active:bg-green-800
      focus:ring-green-500 dark:focus:ring-green-400
    `},w=l?"w-full":"",g=`
    ${f}
    ${m[n]}
    ${v[t]}
    ${w}
    ${h}
  `.trim().replace(/\s+/g," "),x=y=>{!r&&!s&&i&&i(y)};return o.jsxs("button",{type:a,className:g,disabled:r||s,onClick:x,"aria-label":d||(typeof e=="string"?e:void 0),"aria-busy":s,"aria-disabled":r||s,...p,children:[s&&o.jsx(VC,{className:"w-4 h-4 mr-2 animate-spin"}),!s&&c&&u==="left"&&o.jsx(c,{className:"w-4 h-4 mr-2"}),e,!s&&c&&u==="right"&&o.jsx(c,{className:"w-4 h-4 ml-2"})]})},Xo=({type:e="text",label:t,name:n,value:r,onChange:s,onBlur:i,placeholder:a,required:l=!1,disabled:c=!1,error:u,success:d,helpText:h,validationPattern:p,minLength:f,maxLength:m,rows:v=4,options:w=[],autoComplete:g,className:x="",fullWidth:y=!0,showCharCount:S=!1,...E})=>{const[j,P]=b.useState(!1),[T,$]=b.useState(!1),[L,F]=b.useState("");b.useEffect(()=>{T&&p&&(new RegExp(p).test(r)?F(""):F("Invalid format"))},[r,p,T]);const O=`
    w-full px-4 py-3 
    border rounded-lg transition-all duration-200
    text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400
    min-h-[48px]
    focus:outline-none focus:ring-2 focus:ring-offset-1
    disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-60
    bg-white dark:bg-gray-700
   ${u||L?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400 focus:border-red-500 dark:focus:border-red-400":d?"border-green-500 dark:border-green-400 focus:ring-green-500 dark:focus:ring-green-400 focus:border-green-500 dark:focus:border-green-400":j?"border-blue-500 dark:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400"} ${x}`,I=()=>{P(!0)},H=_=>{P(!1),$(!0),i&&i(_)},A=_=>{s&&s(_),T||$(!0)},C=`input-${n||Math.random().toString(36).substr(2,9)}`,z=`${C}-error`,k=`${C}-help`,Q=()=>{switch(e){case"textarea":return o.jsx("textarea",{id:C,name:n,value:r,onChange:A,onFocus:I,onBlur:H,placeholder:a,required:l,disabled:c,rows:v,minLength:f,maxLength:m,className:O,"aria-invalid":!!(u||L),"aria-describedby":`${u||L?z:""} ${h?k:""}`,...E});case"select":return o.jsxs("select",{id:C,name:n,value:r,onChange:A,onFocus:I,onBlur:H,required:l,disabled:c,className:O,"aria-invalid":!!(u||L),"aria-describedby":`${u||L?z:""} ${h?k:""}`,...E,children:[o.jsx("option",{value:"",children:"Select an option"}),w.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))]});default:return o.jsx("input",{id:C,type:e,name:n,value:r,onChange:A,onFocus:I,onBlur:H,placeholder:a,required:l,disabled:c,minLength:f,maxLength:m,autoComplete:g,className:O,"aria-invalid":!!(u||L),"aria-describedby":`${u||L?z:""} ${h?k:""}`,...E})}},Z=y?"w-full":"";return o.jsxs("div",{className:`${Z} mb-4`,children:[t&&o.jsxs("label",{htmlFor:C,className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",children:[t,l&&o.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[Q(),o.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:[d&&!u&&!L&&o.jsx(zn,{className:"w-5 h-5 text-green-500","aria-label":"Valid input"}),(u||L)&&o.jsx(Is,{className:"w-5 h-5 text-red-500","aria-label":"Invalid input"})]})]}),S&&m&&o.jsxs("div",{className:"mt-1 text-sm text-right text-gray-500 dark:text-gray-400",children:[(r==null?void 0:r.length)||0," / ",m]}),(u||L)&&o.jsxs("div",{id:z,className:"mt-2 flex items-start text-sm text-red-600 dark:text-red-400",role:"alert",children:[o.jsx(ts,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),u||L]}),h&&!(u||L)&&o.jsxs("div",{id:k,className:"mt-2 flex items-start text-sm text-gray-600 dark:text-gray-400",children:[o.jsx(Cn,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),h]})]})},_D=({steps:e=[],currentStep:t=1,orientation:n="horizontal",showTimeEstimates:r=!0,showStepNumbers:s=!0,compact:i=!1,hideLabelsOnMobile:a=!1,onStepClick:l,className:c=""})=>{const u=(t-1)/(e.length-1)*100,d=e.reduce((g,x)=>g+(x.timeEstimate||0),0),h=e.slice(0,t-1).reduce((g,x)=>g+(x.timeEstimate||0),0),p=g=>{if(g<60)return`${g} min`;const x=Math.floor(g/60),y=g%60;return y>0?`${x}h ${y}m`:`${x}h`},f=g=>g<t-1?"completed":g===t-1?"current":g===t?"upcoming":"locked",m=(g,x)=>{switch(g){case"completed":return o.jsx(zn,{className:"w-4 h-4"});case"current":return s?x:null;case"upcoming":return s?x:null;case"locked":return o.jsx(Gb,{className:"w-3 h-3"});default:return x}},v=g=>{const x=f(g);l&&(x==="completed"||x==="current")&&l(g+1)},w=g=>{const x=f(g);return l&&(x==="completed"||x==="current")};return n==="vertical"?o.jsxs("div",{className:`${c}`,children:[r&&!i&&o.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),o.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`},role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"})}),o.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-600 dark:text-gray-400",children:[o.jsxs("span",{children:[p(h)," completed"]}),o.jsxs("span",{children:[p(d-h)," remaining"]})]})]}),o.jsx("div",{className:"relative",children:e.map((g,x)=>{const y=f(x),S=x===e.length-1;return o.jsxs("div",{className:"flex items-start mb-8 last:mb-0",children:[!S&&o.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),o.jsx("button",{onClick:()=>v(x),disabled:!w(x),className:`
                    relative z-10 flex items-center justify-center
                    w-12 h-12 rounded-full border-2 transition-all
                    ${w(x)?"cursor-pointer":"cursor-default"}
                    ${y==="completed"?"bg-green-500 border-green-500 text-white":""}
                    ${y==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                    ${y==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                    ${y==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                  `,"aria-label":`Step ${x+1}: ${g.title} - ${y}`,children:m(y,x+1)}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("h3",{className:`
                    font-medium text-base
                    ${y==="current"?"text-blue-600":""}
                    ${y==="completed"?"text-green-600":""}
                    ${y==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:g.title}),g.description&&!i&&o.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:g.description}),r&&g.timeEstimate&&o.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[o.jsx(Rn,{className:"w-3 h-3 mr-1"}),p(g.timeEstimate)]})]})]},x)})})]}):o.jsxs("div",{className:`${c}`,children:[r&&!i&&o.jsx("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Rn,{className:"w-4 h-4 mr-2 text-blue-600"}),o.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Time: ",o.jsx("span",{className:"font-medium",children:p(h)})," of"," ",o.jsx("span",{className:"font-medium",children:p(d)})]})]}),o.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"% Complete"]})]})}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-300 dark:bg-gray-600"}),o.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-blue-600 dark:bg-blue-500 transition-all duration-300",style:{width:`${u}%`}}),o.jsx("div",{className:"relative flex justify-between",children:e.map((g,x)=>{const y=f(x);return o.jsxs("div",{className:`flex flex-col items-center ${i?"flex-1":""}`,children:[o.jsxs("div",{className:"relative group",children:[o.jsx("button",{onClick:()=>v(x),disabled:!w(x),className:`
                      relative z-10 flex items-center justify-center
                      w-12 h-12 rounded-full border-2 transition-all
                      ${w(x)?"cursor-pointer hover:scale-110":"cursor-default"}
                      ${y==="completed"?"bg-green-500 border-green-500 text-white":""}
                      ${y==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                      ${y==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                      ${y==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                    `,"aria-label":`Step ${x+1}: ${g.title} - ${y}`,title:g.title,children:m(y,x+1)}),a&&o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block md:hidden z-20",children:o.jsxs("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[g.title,o.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:o.jsx("div",{className:"border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})})]}),o.jsxs("div",{className:`mt-3 text-center ${a?"hidden md:block":""}`,children:[o.jsx("p",{className:`
                    text-sm font-medium
                    ${y==="current"?"text-blue-600":""}
                    ${y==="completed"?"text-green-600":""}
                    ${y==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:g.title}),r&&g.timeEstimate&&!i&&o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:p(g.timeEstimate)})]})]},x)})})]})]})},ED=({onSubmissionSelect:e,onGroupCreate:t,selectedSubmissionId:n,onSelectionChange:r,refreshTrigger:s=0})=>{const[i,a]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),[h,p]=b.useState([]),[f,m]=b.useState(!1),[v,w]=b.useState(null),[g,x]=b.useState(!1);b.useEffect(()=>{y()},[f,s]),b.useEffect(()=>{const O=()=>{w(null),x(!1)};if(v||g)return document.addEventListener("click",O),()=>document.removeEventListener("click",O)},[v,g]);const y=async()=>{try{c(!0);const O=new URLSearchParams;f&&O.append("uncombined","true"),O.append("since","30d");const I=await fetch(`/api/sdip/submissions?${O}`);if(!I.ok)throw new Error("Failed to load submissions");const H=await I.json();a(H),d(null)}catch(O){d(O.message),a([])}finally{c(!1)}},S=O=>{const I=h.includes(O)?h.filter(H=>H!==O):[...h,O];p(I),r==null||r(I)},E=O=>{e(O)},j=(O="intelligent")=>{h.length>=2&&t(h,O)},P=async O=>{if(confirm("Are you sure you want to delete this submission?"))try{if(!(await fetch(`/api/sdip/submissions/${O}`,{method:"DELETE"})).ok)throw new Error("Failed to delete submission");a(H=>H.filter(A=>A.id!==O)),p(H=>H.filter(A=>A!==O)),n===O&&e(null)}catch(I){console.error("Error deleting submission:",I),alert("Failed to delete submission. Please try again.")}},T=O=>{const I=new Date(O),A=Math.floor((new Date-I)/(1e3*60*60));return A<1?"Just now":A<24?`${A}h ago`:A<48?"Yesterday":I.toLocaleDateString()},$=O=>{const I=O.intent_summary||O.chairman_input||O.submission_title||"Untitled Submission";return I.length>60?I.substring(0,57)+"...":I},L=O=>{var H,A,C,z,k;let I="";return((A=(H=O.synthesis)==null?void 0:H.aligned)==null?void 0:A.length)>0?I=((C=O.synthesis.aligned[0])==null?void 0:C.text)||"":(z=O.impact_analysis)!=null&&z.summary?I=O.impact_analysis.summary:(k=O.strat_tac)!=null&&k.rationale&&(I=O.strat_tac.rationale),!I&&O.chairman_input&&(I=O.chairman_input.substring(0,100)+"..."),I.length>120?I.substring(0,117)+"...":I},F=O=>{var A;const I=((A=O.impact_analysis)==null?void 0:A.affected_components)||[];if(I.length===0)return null;const H=I.find(C=>C.impact_level==="high")||I[0];return(H==null?void 0:H.name)||(H==null?void 0:H.component)||null},q=O=>{var C,z;const I=O.status||"draft",H=O.current_step||1,A=Array.isArray(O.completed_steps)?O.completed_steps:[];return I==="submitted"||((C=O.gate_status)==null?void 0:C.status)==="submitted"||(z=O.gate_status)!=null&&z.resulting_sd_id||O.resulting_sd_id?{text:" Submitted",color:"text-green-700 bg-green-100 dark:bg-green-900/20 dark:text-green-300",icon:""}:I==="ready"||A.includes(7)||A.length===7&&H===7?{text:" Ready",color:"text-blue-700 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300",icon:""}:{text:" Draft",color:"text-yellow-700 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300",icon:""}},he=O=>i.filter(I=>I.group_id===O);return l?o.jsx("div",{className:"h-full flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 text-sm",children:"Recent Submissions"}),i.length>0&&o.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded",children:i.length})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Oe,{onClick:()=>m(!f),variant:f?"primary":"ghost",size:"small",icon:Wb,ariaLabel:"Show uncombined only"}),h.length>=2&&o.jsxs("div",{className:"relative",children:[o.jsxs(Oe,{onClick:O=>{O.stopPropagation(),x(!g)},variant:"primary",size:"small",icon:Np,children:["Combine (",h.length,")"]}),g&&o.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-20 min-w-56",children:o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 px-2",children:"Combination Method:"}),[{id:"intelligent",name:" Intelligent",desc:"AI-driven optimal combination"},{id:"chronological",name:" Chronological",desc:"Preserve timeline order"},{id:"merge",name:" Smart Merge",desc:"Deduplicate and consensus"},{id:"priority",name:" Priority-based",desc:"Highest strategic impact first"},{id:"latest",name:" Latest Override",desc:"Most recent takes precedence"}].map(O=>o.jsxs("button",{onClick:I=>{I.stopPropagation(),j(O.id),x(!1)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex flex-col gap-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:O.name}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:O.desc})]},O.id))]})})]})]})]}),u&&o.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-400 flex items-start gap-2",children:[o.jsx(ts,{className:"w-5 h-5 text-red-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load submissions"}),o.jsx("p",{className:"text-red-600 text-sm",children:u}),o.jsx("button",{onClick:y,className:"mt-1 text-red-700 underline text-sm hover:no-underline",children:"Try again"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:i.length===0?o.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(Rn,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"No submissions yet"}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Create your first submission to get started with the Directive Lab"}),o.jsx("button",{onClick:()=>e(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Submission"})]}):o.jsx("div",{className:"p-2",children:i.map(O=>{const I=q(O),H=$(O),A=L(O),C=F(O),z=h.includes(O.id),k=n===O.id,Q=O.group_id?he(O.group_id):[],Z=v===O.id;return o.jsx("div",{className:`p-3 mb-2 border rounded-lg transition-all cursor-pointer ${k?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700/50"}`,onClick:()=>E(O),children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{onClick:_=>{_.stopPropagation(),S(O.id)},className:"mt-1 text-gray-400 hover:text-gray-600 transition-colors",children:z?o.jsx(Sn,{className:"w-4 h-4 text-blue-600"}):o.jsx(jp,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm leading-tight",children:H}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap font-medium ${I.color}`,children:I.text})]}),A&&o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 leading-relaxed",children:A}),C&&o.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[o.jsx(dt,{className:"w-3 h-3 text-gray-400"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Affects: ",o.jsx("span",{className:"font-medium",children:C})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:T(O.created_at)}),O.group_id&&Q.length>1&&o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),w(Z?null:O.id)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[o.jsx(MC,{className:"w-3 h-3"}),o.jsxs("span",{className:"font-medium",children:[Q.length," items"]}),o.jsx(Un,{className:`w-3 h-3 transition-transform ${Z?"rotate-180":""}`})]}),Z&&o.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-48",children:o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 px-2",children:"Linked Submissions:"}),Q.map(_=>{const je=q(_),at=$(_);return o.jsxs("button",{onClick:N=>{N.stopPropagation(),E(_),w(null)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex items-center justify-between gap-2",children:[o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate",children:at}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${je.color}`,children:je.icon}),o.jsx(ph,{className:"w-3 h-3 text-gray-400"})]})]},_.id)})]})})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),E(O)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[o.jsx(DC,{className:"w-3 h-3"}),"View"]}),o.jsx("button",{onClick:_=>{_.stopPropagation(),P(O.id)},className:"flex items-center gap-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete submission",children:o.jsx(YC,{className:"w-3 h-3"})})]})]})]})]})},O.id)})})}),h.length>0&&o.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-700",children:o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:[h.length," selected"]}),h.length>=2&&o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Ready to combine "})]})})]})},PD=({isOpen:e=!0,onClose:t,selectedSubmissions:n,combineMethod:r="intelligent",onCreateGroup:s,onSuccess:i})=>{const[a,l]=b.useState(""),[c,u]=b.useState(r),[d,h]=b.useState(!1),[p,f]=b.useState(null),m=async w=>{if(w.preventDefault(),!!a.trim()){h(!0),f(null);try{const g=await fetch("/api/sdip/create-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_ids:n,group_name:a.trim(),method:c})});if(!g.ok){const y=await g.json();throw new Error(y.error||"Failed to create group")}const x=await g.json();console.log(" Group created successfully:",x),i?i(x):s&&await s(x),t(),l(""),u(r)}catch(g){f(g.message)}finally{h(!1)}}};if(!e)return null;const v=[{value:"intelligent",label:" Intelligent",desc:"AI-driven optimal combination"},{value:"chronological",label:" Chronological",desc:"Keep time order"},{value:"merge",label:" Merge & Dedupe",desc:"Remove duplicates"},{value:"priority",label:" Priority-based",desc:"Highest strategic impact first"},{value:"latest",label:" Latest Priority",desc:"Latest overrides"}];return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Np,{className:"w-4 h-4 text-blue-600"}),o.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Combine ",n.length," Submissions"]})]}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:o.jsx(Is,{className:"w-4 h-4"})})]}),o.jsxs("form",{onSubmit:m,className:"p-3 space-y-3",children:[p&&o.jsxs("div",{className:"flex items-start gap-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[o.jsx(ts,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-xs",children:p})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"group-name",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name"}),o.jsx("input",{type:"text",id:"group-name",value:a,onChange:w=>l(w.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dashboard UX Improvements",required:!0,maxLength:100})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Combine Method"}),o.jsx("div",{className:"grid grid-cols-1 gap-1",children:v.map(w=>o.jsx("label",{className:`flex items-center justify-between p-2 text-xs border rounded cursor-pointer transition-colors ${c===w.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-600"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",name:"combineMethod",value:w.value,checked:c===w.value,onChange:g=>u(g.target.value),className:"text-blue-600 focus:ring-blue-500"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w.label}),o.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:[" ",w.desc]})]})]})},w.value))})]}),o.jsxs("div",{className:"flex gap-2 pt-1",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:!a.trim()||d,className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 border border-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Creating...":"Combine"})]})]})]})})},CD=({impactAnalysis:e,consistencyValidation:t,submission:n})=>{var d,h,p;const[r,s]=b.useState({overview:!0,components:!1,consistency:!1,recommendations:!1,mitigation:!1});if(!e&&!t)return o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-center",children:[o.jsx(Cn,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No impact analysis available for this submission"})]});const i=f=>{s(m=>({...m,[f]:!m[f]}))},a=f=>{switch(f){case"critical":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-100",accent:"text-red-600 dark:text-red-400",icon:Kt};case"high":return{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-100",accent:"text-orange-600 dark:text-orange-400",icon:ts};case"medium":return{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-900 dark:text-yellow-100",accent:"text-yellow-600 dark:text-yellow-400",icon:Cn};case"low":return{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-100",accent:"text-green-600 dark:text-green-400",icon:et};default:return{bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",text:"text-gray-900 dark:text-gray-100",accent:"text-gray-600 dark:text-gray-400",icon:Cn}}},l=a((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)),c=l.icon,u=f=>({ui:fl,api:OC,database:wp,authentication:to,navigation:or,performance:mr,"design-system":fl})[f]||Cn;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:`rounded-lg border ${l.bg} ${l.border} p-6`,children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("overview"),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(c,{className:`w-6 h-6 ${l.accent}`}),o.jsxs("div",{children:[o.jsx("h3",{className:`text-lg font-semibold ${l.text}`,children:"Impact Analysis Overview"}),o.jsxs("p",{className:`text-sm ${l.text} opacity-75`,children:["Risk Level: ",((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)||"unknown").toUpperCase()]})]})]}),r.overview?o.jsx(Un,{className:`w-5 h-5 ${l.accent}`}):o.jsx(en,{className:`w-5 h-5 ${l.accent}`})]}),r.overview&&o.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:e.impact_score}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Impact Score"})]}),o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsxs("div",{className:`text-2xl font-bold ${l.accent}`,children:[e.effort_multiplier,"x"]}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Effort Multiplier"})]}),o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:((d=e.affected_components)==null?void 0:d.length)||0}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Affected Components"})]})]}),t&&o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${t.passed?"text-green-600":"text-red-600"}`,children:t.score}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Consistency Score"})]})]})]}),(e==null?void 0:e.affected_components)&&e.affected_components.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("components"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(fl,{className:"w-5 h-5 mr-2"}),"Affected Components"]}),r.components?o.jsx(Un,{className:"w-5 h-5 text-gray-400"}):o.jsx(en,{className:"w-5 h-5 text-gray-400"})]}),r.components&&o.jsx("div",{className:"mt-4 space-y-3",children:e.affected_components.map((f,m)=>{const v=u(f.name),w=a(f.risk_level);return o.jsxs("div",{className:`p-4 rounded-lg border ${w.bg} ${w.border}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(v,{className:`w-5 h-5 ${w.accent}`}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-medium ${w.text}`,children:f.name}),o.jsxs("p",{className:`text-sm ${w.text} opacity-75`,children:["Risk: ",f.risk_level,"  Confidence: ",Math.round((f.confidence||0)*100),"%"]})]})]})}),f.dependencies&&f.dependencies.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:`text-xs ${w.text} opacity-60 mb-1`,children:"Dependencies:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:f.dependencies.map((g,x)=>o.jsx("span",{className:`px-2 py-1 rounded text-xs ${w.accent} bg-white dark:bg-gray-700`,children:g},x))})]})]},m)})})]}),t&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("consistency"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(to,{className:"w-5 h-5 mr-2"}),"Consistency Validation",!t.passed&&o.jsx(Yr,{className:"w-5 h-5 ml-2 text-red-500"})]}),r.consistency?o.jsx(Un,{className:"w-5 h-5 text-gray-400"}):o.jsx(en,{className:"w-5 h-5 text-gray-400"})]}),r.consistency&&o.jsxs("div",{className:"mt-4 space-y-4",children:[o.jsxs("div",{className:`p-4 rounded-lg ${t.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[o.jsxs("div",{className:"flex items-center",children:[t.passed?o.jsx(et,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}):o.jsx(Yr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),o.jsx("span",{className:`font-medium ${t.passed?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:t.passed?"Validation Passed":"Validation Failed"})]}),t.blocking_issues&&t.blocking_issues.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Blocking Issues:"}),t.blocking_issues.map((f,m)=>o.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200 mb-1",children:[" ",f.message,f.suggestion&&o.jsxs("div",{className:"text-xs text-red-600 dark:text-red-300 ml-4 mt-1",children:["Suggestion: ",f.suggestion]})]},m))]})]}),t.category_scores&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Category Breakdown"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.category_scores).map(([f,m])=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:f.replace("_"," ")}),o.jsx("span",{className:`text-sm font-bold ${m>=70?"text-green-600":m>=50?"text-yellow-600":"text-red-600"}`,children:m})]}),o.jsx("div",{className:"mt-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all ${m>=70?"bg-green-500":m>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${m}%`}})})]},f))})]})]})]}),((e==null?void 0:e.recommendations)||(t==null?void 0:t.recommendations))&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("recommendations"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(or,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),r.recommendations?o.jsx(Un,{className:"w-5 h-5 text-gray-400"}):o.jsx(en,{className:"w-5 h-5 text-gray-400"})]}),r.recommendations&&o.jsxs("div",{className:"mt-4 space-y-3",children:[(h=e==null?void 0:e.recommendations)==null?void 0:h.map((f,m)=>o.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Cn,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[f.type,": ",f.description]}),f.effort_reduction&&o.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Effort reduction: ",f.effort_reduction]})]})]})},`impact-${m}`)),(p=t==null?void 0:t.recommendations)==null?void 0:p.map((f,m)=>o.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(et,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:f.message}),f.priority&&o.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs mt-1 ${f.priority==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":f.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":f.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[f.priority," priority"]})]})]})},`consistency-${m}`))]})]}),(e==null?void 0:e.mitigation_strategies)&&e.mitigation_strategies.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("mitigation"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(Xl,{className:"w-5 h-5 mr-2"}),"Mitigation Strategies"]}),r.mitigation?o.jsx(Un,{className:"w-5 h-5 text-gray-400"}):o.jsx(en,{className:"w-5 h-5 text-gray-400"})]}),r.mitigation&&o.jsx("div",{className:"mt-4 space-y-2",children:e.mitigation_strategies.map((f,m)=>o.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsx(Xl,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:f})]},m))})]}),(e==null?void 0:e.breaking_changes)&&e.breaking_changes.length>0&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(Kt,{className:"w-6 h-6 text-red-600 dark:text-red-400 mr-2"}),o.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Breaking Changes Detected"})]}),o.jsx("div",{className:"space-y-2",children:e.breaking_changes.map((f,m)=>o.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[o.jsxs("strong",{children:[f.type,":"]})," ",f.description,f.keyword&&o.jsxs("span",{className:"ml-2 text-xs bg-red-200 dark:bg-red-800 px-2 py-1 rounded",children:['"',f.keyword,'"']})]},m))})]})]})},TD=({type:e,level:t,showTooltip:n=!0})=>{const[r,s]=b.useState(!1),a={UI:{label:"UI",description:"User Interface complexity",colors:{HIGH:"bg-blue-600 text-white",MEDIUM:"bg-blue-400 text-white",LOW:"bg-blue-200 text-blue-900"}},DB:{label:"DB",description:"Database impact and complexity",colors:{HIGH:"bg-purple-600 text-white",MEDIUM:"bg-purple-400 text-white",LOW:"bg-purple-200 text-purple-900"}},COMPLEX:{label:"COMPLEX",description:"Overall implementation complexity",colors:{HIGH:"bg-orange-600 text-white",MEDIUM:"bg-orange-400 text-white",LOW:"bg-orange-200 text-orange-900"}},ACCESS:{label:"ACCESS",description:"Access control and permissions",colors:{HIGH:"bg-green-600 text-white",MEDIUM:"bg-green-400 text-white",LOW:"bg-green-200 text-green-900"}},SECURITY:{label:"SECURITY",description:"Security implications",colors:{HIGH:"bg-red-600 text-white",MEDIUM:"bg-red-400 text-white",LOW:"bg-red-200 text-red-900"}},PROCESS:{label:"PROCESS",description:"Business process impact",colors:{HIGH:"bg-yellow-600 text-white",MEDIUM:"bg-yellow-400 text-gray-900",LOW:"bg-yellow-200 text-yellow-900"}}}[e];if(!a)return null;const l=a.colors[t]||a.colors.LOW;return o.jsxs("div",{className:"inline-flex items-center relative",children:[o.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${l} cursor-help transition-opacity hover:opacity-90`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[a.label,":",t,n&&o.jsx(Cn,{className:"w-3 h-3 ml-1 opacity-70"})]}),n&&r&&o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",children:o.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap",children:[o.jsx("div",{className:"font-semibold",children:a.description}),o.jsxs("div",{className:"text-gray-300 mt-1",children:[t==="HIGH"&&"Significant impact - careful review needed",t==="MEDIUM"&&"Moderate impact - standard review",t==="LOW"&&"Minimal impact - routine change"]}),o.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900"})]})})]})},Gu=({badges:e})=>{if(!e)return null;const t=["UI","DB","COMPLEX","ACCESS","SECURITY","PROCESS"];return o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.map(n=>{const r=e[n];return r?o.jsx(TD,{type:n,level:r},n):null})})},Xu=e=>{const t={},n=e.toLowerCase();return(n.includes("ui")||n.includes("interface")||n.includes("component"))&&(t.UI=n.includes("complex")||n.includes("major")?"HIGH":n.includes("update")||n.includes("modify")?"MEDIUM":"LOW"),(n.includes("database")||n.includes("schema")||n.includes("migration"))&&(t.DB=n.includes("migration")||n.includes("schema")?"HIGH":n.includes("query")||n.includes("index")?"MEDIUM":"LOW"),n.includes("architecture")||n.includes("refactor")||n.includes("system")?t.COMPLEX="HIGH":n.includes("feature")||n.includes("implement")?t.COMPLEX="MEDIUM":(n.includes("fix")||n.includes("update"))&&(t.COMPLEX="LOW"),(n.includes("permission")||n.includes("role")||n.includes("access"))&&(t.ACCESS=n.includes("admin")||n.includes("role")?"HIGH":"MEDIUM"),n.includes("security")||n.includes("auth")||n.includes("encrypt")?t.SECURITY=n.includes("auth")||n.includes("encrypt")?"HIGH":"MEDIUM":(n.includes("api")||n.includes("endpoint"))&&(t.SECURITY="LOW"),(n.includes("workflow")||n.includes("process")||n.includes("business"))&&(t.PROCESS=n.includes("workflow")?"HIGH":"MEDIUM"),Object.keys(t).length===0&&(t.COMPLEX="LOW"),t},AD=({message:e,type:t="info",duration:n=5e3,onClose:r,position:s="top-right"})=>{const[i,a]=b.useState(!1),[l,c]=b.useState(!1);b.useEffect(()=>{setTimeout(()=>a(!0),10);const m=setTimeout(()=>{u()},n);return()=>clearTimeout(m)},[n]);const u=()=>{c(!0),setTimeout(()=>{a(!1),r==null||r()},300)},d={success:{icon:et,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-800 dark:text-green-200",iconColor:"text-green-600 dark:text-green-400"},error:{icon:ts,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-800 dark:text-red-200",iconColor:"text-red-600 dark:text-red-400"},warning:{icon:Kt,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",textColor:"text-yellow-800 dark:text-yellow-200",iconColor:"text-yellow-600 dark:text-yellow-400"},info:{icon:Cn,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-800 dark:text-blue-200",iconColor:"text-blue-600 dark:text-blue-400"}},h=d[t]||d.info,p=h.icon,f={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"};return o.jsx("div",{className:`
        fixed z-50 
        ${f[s]}
        transition-all duration-300 ease-in-out
        ${i&&!l?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"}
      `,children:o.jsxs("div",{className:`
          flex items-center gap-3 p-4 rounded-lg shadow-lg
          ${h.bgColor} ${h.borderColor} ${h.textColor}
          border min-w-[300px] max-w-md
        `,children:[o.jsx(p,{className:`w-5 h-5 ${h.iconColor} flex-shrink-0`}),o.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),o.jsx("button",{onClick:u,className:`${h.iconColor} hover:opacity-70 transition-opacity`,"aria-label":"Close notification",children:o.jsx(Is,{className:"w-4 h-4"})})]})})},RD=({children:e})=>{const[t,n]=b.useState([]),r=(i,a="info",l=5e3)=>{const c=Date.now(),u={id:c,message:i,type:a,duration:l};return n(d=>[...d,u]),c},s=i=>{n(a=>a.filter(l=>l.id!==i))};return b.useEffect(()=>(window.showToast=r,()=>{delete window.showToast}),[]),o.jsxs(o.Fragment,{children:[e,o.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:t.map((i,a)=>o.jsx("div",{className:"pointer-events-auto",style:{position:"fixed",top:`${20+a*80}px`,right:"20px",transition:"all 0.3s ease-in-out"},children:o.jsx(AD,{message:i.message,type:i.type,duration:i.duration,onClose:()=>s(i.id),position:"none"})},i.id))})]})},ID=()=>{const e=(t,n="info",r=5e3)=>{if(window.showToast)return window.showToast(t,n,r);console.warn("Toast provider not found. Make sure ToastProvider is mounted.")};return{success:(t,n)=>e(t,"success",n),error:(t,n)=>e(t,"error",n),warning:(t,n)=>e(t,"warning",n),info:(t,n)=>e(t,"info",n),show:e}},DD=()=>{var vn;const e=Qn(),n=new URLSearchParams(e.search).get("mode")==="quick"?"quick":"comprehensive",[r,s]=b.useState(n),[i,a]=b.useState(1),[l,c]=b.useState(null),[u,d]=b.useState(!1),[h,p]=b.useState(null),[f,m]=b.useState(null),[v,w]=b.useState([]),[g,x]=b.useState(!1),[y,S]=b.useState("intelligent"),[E,j]=b.useState(0),[P,T]=b.useState(!1),[$,L]=b.useState("input"),[F,q]=b.useState(!1),[he,O]=b.useState(!0),[I,H]=b.useState(null),[A,C]=b.useState(null),[z,k]=b.useState({}),[Q,Z]=b.useState(!1),[_,je]=b.useState(!1),[at,N]=b.useState([]),[J,Ee]=b.useState(!1),[ft,kt]=b.useState({}),ot=ID(),[K,qe]=b.useState({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),[Dn,D]=b.useState({}),[ne,ae]=b.useState({}),[ye,Re]=b.useState({1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1}),At=()=>r==="quick"?[{id:1,title:"Input",icon:N0,description:"Enter your directive idea",timeEstimate:2},{id:3,title:"Classification",icon:or,description:"Strategic or Tactical",timeEstimate:1},{id:7,title:"Confirmation",icon:et,description:"Review and submit",timeEstimate:1}]:[{id:1,title:"Input & Screenshot",icon:Nu,description:"Provide feedback and optional screenshot",timeEstimate:3},{id:2,title:"Intent Confirmation",icon:or,description:"Review and confirm the extracted intent",timeEstimate:2},{id:3,title:"Classification",icon:fl,description:"Review strategic vs tactical breakdown",timeEstimate:2},{id:4,title:"Impact Analysis",icon:Kt,description:"Review application impact and consistency validation",timeEstimate:4},{id:5,title:"Synthesis Review",icon:dt,description:"Review aligned, required, and recommended items",timeEstimate:5},{id:6,title:"Questions",icon:N0,description:"Answer questions to refine the directive",timeEstimate:3},{id:7,title:"Confirmation",icon:et,description:"Review and confirm the final summary",timeEstimate:2}],Le=V=>{if(V<i&&l){const ee=({1:[2,3,4,5,6,7],2:[3,4,5,6,7],3:[4,5,6,7],4:[5,6,7],5:[6,7],6:[7]}[V]||[]).filter(fe=>{switch(fe){case 2:return l.intent_summary;case 3:return l.strat_tac;case 4:return l.impact_analysis;case 5:return l.synthesis;case 6:return l.questions;case 7:return l.final_summary;default:return!1}});if(ee.length>0){const fe={2:"Intent Summary",3:"Classification",4:"Impact Analysis",5:"Synthesis",6:"Clarifying Questions",7:"Final Summary"},xe=ee.map(se=>fe[se]).join(", ");ot.warning(`Editing Step ${V} may invalidate: ${xe}`,8e3),N(se=>[...se,{editedStep:V,timestamp:new Date().toISOString(),affectedSteps:ee}])}}},Ln=V=>r==="quick"?V===1?3:V===3?7:V:V<7?V+1:V,pt=V=>{Le(V),a(V)},mt=At();b.useEffect(()=>{const V=()=>{const W=window.innerWidth<768;T(W)};return V(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[l]),b.useEffect(()=>{const V=setTimeout(()=>{(K.chairmanInput||K.intentSummary)&&(localStorage.setItem("directiveLab_draft",JSON.stringify(K)),m("Draft saved"),setTimeout(()=>m(null),3e3))},2e3);return()=>clearTimeout(V)},[K]),b.useEffect(()=>{const V=localStorage.getItem("directiveLab_draft");V&&(qe(JSON.parse(V)),m("Draft restored"),setTimeout(()=>m(null),3e3))},[]),b.useEffect(()=>{if(i===3&&(l!=null&&l.id)&&!(l!=null&&l.strat_tac)){console.log(" [STEP 3] Generating classification data...");const V=K.intentSummary||(l==null?void 0:l.intent_summary)||"",W=["vision","strategy","long-term","transform","innovation","competitive advantage","market position","growth","expansion","culture"],re=["fix","bug","update","modify","adjust","correct","improve","enhance","optimize","refactor"];let oe=0,ee=0;const fe=V.toLowerCase();W.forEach(tt=>{fe.includes(tt)&&(oe+=10)}),re.forEach(tt=>{fe.includes(tt)&&(ee+=10)}),oe===0&&ee===0&&(oe=50,ee=50);const xe=oe+ee,se=Math.round(oe/xe*100),lt=100-se,Ye=se>60?"This initiative focuses on strategic goals that will shape long-term direction and capabilities.":lt>60?"This initiative addresses immediate operational needs and improvements.":"This initiative balances both strategic vision and tactical execution needs.",Jn={strat_tac:{strategic_pct:se,tactical_pct:lt,rationale:Ye,generated_at:new Date().toISOString()}};c(tt=>({...tt,...Jn})),console.log(" [STEP 3] Classification data generated locally")}},[i,l,K.intentSummary]),b.useEffect(()=>{var V;if(i===4&&(l!=null&&l.id)&&!(l!=null&&l.impact_analysis)){console.log(" [STEP 4] Generating impact analysis data...");const W=K.intentSummary||(l==null?void 0:l.intent_summary)||"",re=W.toLowerCase(),oe={dashboard:[{name:"Dashboard",risk_level:"medium",confidence:.8,dependencies:["MetricsCard","ChartComponent"]},{name:"DashboardCard",risk_level:"low",confidence:.7,dependencies:["UI Components"]},{name:"MetricsCard",risk_level:"low",confidence:.6,dependencies:["Data Fetcher"]}],form:[{name:"Form",risk_level:"medium",confidence:.9,dependencies:["Input","Button","Validation"]},{name:"Input",risk_level:"low",confidence:.8,dependencies:["Event Handlers"]},{name:"Button",risk_level:"low",confidence:.9,dependencies:["UI Components"]},{name:"Validation",risk_level:"medium",confidence:.7,dependencies:["Form State"]}],navigation:[{name:"Navigation",risk_level:"medium",confidence:.8,dependencies:["Router","Auth Context"]},{name:"Sidebar",risk_level:"low",confidence:.7,dependencies:["Navigation"]},{name:"Menu",risk_level:"low",confidence:.6,dependencies:["Navigation"]}],table:[{name:"Table",risk_level:"medium",confidence:.8,dependencies:["Data Fetcher","Pagination"]},{name:"DataGrid",risk_level:"high",confidence:.9,dependencies:["Table","Virtual Scroller"]}],modal:[{name:"Modal",risk_level:"medium",confidence:.8,dependencies:["Portal","Focus Trap"]},{name:"Dialog",risk_level:"medium",confidence:.7,dependencies:["Modal"]},{name:"Overlay",risk_level:"low",confidence:.6,dependencies:["Portal"]}],auth:[{name:"Auth",risk_level:"high",confidence:.9,dependencies:["UserContext","Token Manager"]},{name:"Login",risk_level:"high",confidence:.8,dependencies:["Auth","Form"]},{name:"UserContext",risk_level:"high",confidence:.9,dependencies:["State Management"]}],theme:[{name:"ThemeProvider",risk_level:"medium",confidence:.8,dependencies:["CSS Variables","Context API"]},{name:"Dark Mode",risk_level:"medium",confidence:.7,dependencies:["ThemeProvider"]}],api:[{name:"API Client",risk_level:"high",confidence:.9,dependencies:["HTTP Service","Error Handler"]},{name:"Data Fetcher",risk_level:"medium",confidence:.8,dependencies:["API Client"]},{name:"WebSocket",risk_level:"high",confidence:.7,dependencies:["Connection Manager"]}]},ee=[];Object.entries(oe).forEach(([de,ln])=>{(re.includes(de)||re.includes(de.replace(/[aeiou]/gi,""))||ln.some(as=>re.includes(as.name.toLowerCase())))&&ee.push(...ln)}),ee.length===0&&ee.push({name:"UI Components",risk_level:"low",confidence:.5,dependencies:["React Components"]},{name:"State Management",risk_level:"medium",confidence:.6,dependencies:["React Hooks"]},{name:"Event Handlers",risk_level:"low",confidence:.7,dependencies:["DOM Events"]});const fe=["database","auth","security","payment","migration","breaking","major"],xe=["api","integration","workflow","validation","performance"];let se="Low",lt="This change appears to be primarily cosmetic or minor functionality enhancement.";fe.some(de=>re.includes(de))?(se="High",lt="This change affects critical system components that could impact security, data integrity, or core functionality."):xe.some(de=>re.includes(de))&&(se="Medium",lt="This change affects system integrations or business logic that requires careful testing and validation.");const Ye=[{category:"Design System",status:"compliant",details:"Change adheres to existing design tokens and component patterns"},{category:"Accessibility",status:se==="High"?"review_required":"compliant",details:se==="High"?"WCAG compliance review needed for this change":"No accessibility concerns identified"},{category:"Performance",status:re.includes("performance")?"improvement":"neutral",details:re.includes("performance")?"Change should improve application performance":"No significant performance impact expected"},{category:"Security",status:fe.some(de=>re.includes(de))?"review_required":"compliant",details:fe.some(de=>re.includes(de))?"Security review required before implementation":"No security concerns identified"}],Jn={database:3,migration:4,api:2,auth:3,integration:2,ui:1,style:.5,text:.5};let tt=1;Object.entries(Jn).forEach(([de,ln])=>{re.includes(de)&&(tt+=ln)});const Zn=tt<=2?"1-2 days":tt<=4?"3-5 days":tt<=6?"1-2 weeks":"2-4 weeks",ss=Math.min(100,Math.round(ee.length*10+tt*5+(se==="High"?30:se==="Medium"?15:5))),is=Math.round(tt*10)/10,er={affected_components:ee.slice(0,8),risk_level:se.toLowerCase(),risk_rationale:lt,impact_score:ss,effort_multiplier:is,estimated_effort:Math.ceil(tt),estimated_timeline:Zn,consistency_validation:Ye,recommendations:[{type:"Testing",description:`Ensure comprehensive testing for ${ee.length} affected components`,effort_reduction:"15-20%"},{type:"Documentation",description:"Update component documentation and integration guides",effort_reduction:"10-15%"}],mitigation_strategies:["Implement feature flags to control rollout","Create comprehensive test suite before deployment","Monitor performance metrics during implementation","Prepare rollback strategy for critical issues"],generated_at:new Date().toISOString()};se==="High"&&(er.breaking_changes=[{type:"API Change",description:"Potential modifications to component interfaces",keyword:((V=re.match(/(auth|api|database)/))==null?void 0:V[0])||"system"}]);const vr={};Ye.forEach(de=>{const ln=de.status==="compliant"?85:de.status==="improvement"?95:de.status==="review_required"?25:de.status==="warning"?60:75;vr[de.category.toLowerCase().replace(" ","_")]=ln});const wr={passed:!Ye.some(de=>de.status==="review_required"),blocking_issues:Ye.filter(de=>de.status==="review_required").map(de=>({message:`${de.category}: ${de.details}`,suggestion:de.status==="review_required"?"Consider professional review before implementation":null})),warnings:Ye.filter(de=>de.status==="warning"),score:Math.round(Ye.filter(de=>de.status==="compliant"||de.status==="improvement").length/Ye.length*100),category_scores:vr,recommendations:Ye.filter(de=>de.status==="improvement"||de.status==="compliant").map(de=>({message:de.details,priority:de.status==="improvement"?"medium":"low"}))};H(er),C(wr);const br={skeptical_assessment:[`Directive "${W.slice(0,50)}..." may have hidden complexities not immediately apparent`,"Resource estimates are often underestimated by 40-60% in similar projects","User requirements frequently change after initial implementation begins","Integration points with existing systems pose higher risk than anticipated"],potential_blockers:["Insufficient technical specifications may delay development","Dependency on external APIs or services may introduce instability","Browser compatibility issues may emerge during testing","Performance impact on larger datasets may require architectural changes"],risk_factors:{technical_debt:se==="High"?"Significant":"Moderate",change_resistance:"Medium",rollback_difficulty:Zn.includes("week")?"Low":"High",maintenance_overhead:`${se} ongoing maintenance burden expected`},recommendations:["Consider phased implementation approach to mitigate risks","Establish clear rollback procedures before deployment","Plan for 25% buffer time beyond initial estimates","Document all assumptions and validate with stakeholders"]};kt(br),c(de=>({...de,impact_analysis:er,consistency_validation:wr,critical_analysis:br})),console.log(" [STEP 4] Impact analysis data generated locally"),console.log(" [STEP 4] Risk Level:",se),console.log(" [STEP 4] Components affected:",ee.length),console.log(" [STEP 4] Estimated timeline:",Zn)}},[i,l,K.intentSummary]),b.useEffect(()=>{var V,W;if(i===5&&(l!=null&&l.id)&&((V=l==null?void 0:l.gate_status)!=null&&V.synthesis_reviewed&&Z(!0),!(l!=null&&l.synthesis))){console.log(" [STEP 5] Generating synthesis data...");const re=(l==null?void 0:l.intent_summary)||K.intentSummary||"",oe=(l==null?void 0:l.strat_tac)||{},ee=(l==null?void 0:l.impact_analysis)||{},fe=[],xe=[],se=[];(re.toLowerCase().includes("dark mode")||re.toLowerCase().includes("theme"))&&(fe.push("UI theming system already supports dark/light mode switching"),fe.push("CSS variables are in place for theme customization")),(re.toLowerCase().includes("dashboard")||re.toLowerCase().includes("ui"))&&(fe.push("Component architecture supports modular UI updates"),fe.push("Existing design system can be extended")),oe.strategic_pct>50&&(xe.push("Architecture review and approval from technical lead"),xe.push("Comprehensive testing strategy for new features"),xe.push("Documentation updates for significant changes")),((ee==null?void 0:ee.risk_level)==="High"||(ee==null?void 0:ee.risk_level)==="Critical")&&(xe.push("Risk mitigation plan implementation"),xe.push("Rollback strategy preparation")),re.toLowerCase().includes("performance")&&xe.push("Performance benchmarking before and after implementation"),(re.toLowerCase().includes("security")||re.toLowerCase().includes("auth"))&&xe.push("Security audit and penetration testing"),oe.tactical_pct>60&&(se.push("Incremental deployment with feature flags"),se.push("A/B testing for user-facing changes")),((W=ee==null?void 0:ee.affected_components)==null?void 0:W.length)>5&&(se.push("Phased implementation to minimize disruption"),se.push("Component isolation testing")),se.push("User acceptance testing with stakeholder group"),se.push("Performance monitoring post-deployment"),fe.length===0&&(fe.push("Existing infrastructure supports proposed changes"),fe.push("Current tooling and frameworks are compatible")),xe.length===0&&(xe.push("Standard code review process"),xe.push("Unit and integration test coverage")),se.length===0&&(se.push("Progressive rollout strategy"),se.push("User feedback collection mechanism"));const lt={synthesis:{aligned:fe,required:xe,recommended:se,generated_at:new Date().toISOString()}};console.log(" [STEP 5] Synthesis generated:",lt),c(Ye=>({...Ye,...lt}))}},[i,l,K.intentSummary]),b.useEffect(()=>{var V;if(i===6&&(l!=null&&l.id)&&(l==null?void 0:l.questions)===void 0){console.log(" [STEP 6] Generating clarifying questions...");const W=(l==null?void 0:l.intent_summary)||K.intentSummary||"",re=(l==null?void 0:l.strat_tac)||{},oe=(l==null?void 0:l.synthesis)||{},ee=[];(W.toLowerCase().includes("ui")||W.toLowerCase().includes("interface"))&&(ee.push({text:"What specific UI components or pages should be affected by these changes?",context:"Help us scope the implementation correctly"}),ee.push({text:"Do you have any specific design preferences or brand guidelines to follow?",context:"Ensures visual consistency with your requirements"})),re.strategic_pct>60&&(ee.push({text:"What is the expected timeline for this strategic initiative?",context:"Helps with resource allocation and planning"}),ee.push({text:"Are there any dependencies or prerequisites we should be aware of?",context:"Identifies potential blockers early"})),(V=oe.required)!=null&&V.some(xe=>xe.includes("performance"))&&ee.push({text:"What are your specific performance targets or requirements?",context:"Define measurable success criteria"}),(W.toLowerCase().includes("data")||W.toLowerCase().includes("database"))&&ee.push({text:"What data retention and backup policies should be considered?",context:"Ensures compliance with data governance"}),ee.length<2&&ee.push({text:"Are there any specific edge cases or scenarios we should consider?",context:"Helps identify potential issues early"});const fe={questions:ee.length>0?ee:[],questions_generated_at:new Date().toISOString()};console.log(" [STEP 6] Questions generated:",fe),c(xe=>({...xe,...fe}))}},[i,l,K.intentSummary]),b.useEffect(()=>{var V,W,re;if(i===7&&(l!=null&&l.id)&&!(l!=null&&l.final_summary)){console.log(" [STEP 7] Generating final summary...");const oe=(l==null?void 0:l.intent_summary)||K.intentSummary||"",ee=(l==null?void 0:l.strat_tac)||{},fe=(l==null?void 0:l.impact_analysis)||{},xe=(l==null?void 0:l.synthesis)||{};let se=`This directive focuses on: ${oe}. `;ee.strategic_pct>60?se+=`This is primarily a strategic initiative (${ee.strategic_pct}% strategic) that will shape long-term architecture. `:se+=`This is primarily a tactical improvement (${ee.tactical_pct}% tactical) focusing on immediate enhancements. `,((V=fe.affected_components)==null?void 0:V.length)>0&&(se+=`The implementation will affect ${fe.affected_components.length} components with ${fe.risk_level||"moderate"} risk level. `),((W=xe.required)==null?void 0:W.length)>0&&(se+=`Key requirements include: ${xe.required[0]}. `),((re=xe.recommended)==null?void 0:re.length)>0&&(se+=`Recommended approach: ${xe.recommended[0]}. `),fe.effort_estimate&&(se+=`Estimated effort: ${fe.effort_estimate}. `),se+="Upon approval, this directive will be converted into a formal PRD and assigned to the implementation team.";const lt={final_summary:se,final_summary_generated_at:new Date().toISOString()};console.log(" [STEP 7] Final summary generated:",lt),c(Ye=>({...Ye,...lt}))}},[i,l,K.intentSummary]),b.useEffect(()=>{i===2&&K.intentSummary&&setTimeout(()=>{const V=document.querySelector('textarea[name="intentSummary"]');V&&(V.style.height="auto",V.style.height=Math.min(V.scrollHeight,300)+"px")},100)},[K.intentSummary,i]);const xr=V=>V.trim()?V.length<20?(D(W=>({...W,chairmanInput:"Please provide more detailed feedback (min 20 characters)"})),ae(W=>({...W,chairmanInput:!1})),!1):(D(W=>({...W,chairmanInput:null})),ae(W=>({...W,chairmanInput:!0})),!0):(D(W=>({...W,chairmanInput:"Feedback is required"})),ae(W=>({...W,chairmanInput:!1})),!1),R=V=>{if(!V)return!0;try{return new URL(V),D(W=>({...W,screenshotUrl:null})),ae(W=>({...W,screenshotUrl:!0})),!0}catch{return D(W=>({...W,screenshotUrl:"Please enter a valid URL"})),ae(W=>({...W,screenshotUrl:!1})),!1}},M=async()=>{var V,W;if(console.log(" [STEP 1] Starting feedback submission"),console.log(" [STEP 1] Form data:",{feedback:((V=K.chairmanInput)==null?void 0:V.substring(0,50))+"...",screenshotUrl:K.screenshotUrl}),!!xr(K.chairmanInput)){d(!0),p(null);try{const re=await fetch("/api/sdip/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:K.chairmanInput,screenshot_url:K.screenshotUrl})});if(!re.ok)throw new Error("Failed to submit feedback");const oe=await re.json();console.log(" [STEP 1] Submission created successfully"),console.log(" [STEP 1] Submission ID:",((W=oe.submission)==null?void 0:W.id)||oe.id),console.log(" [STEP 1] Full submission data:",oe);const ee=oe.submission||oe;c(ee),Re({...ye,1:!0}),a(2),m("Feedback submitted successfully!"),localStorage.removeItem("directiveLab_draft"),ee.id?(console.log(" [STEP 2] Triggering intent generation for submission:",ee.id),await te(ee.id,2,{feedback:K.chairmanInput,chairman_input:K.chairmanInput})):console.error(" [STEP 1] No submission ID received!")}catch(re){p(re.message)}finally{d(!1)}}},te=async(V,W,re)=>{console.log(` [STEP ${W}] Updating submission: ${V}`),console.log(` [STEP ${W}] Step data:`,re);try{const oe=await fetch(`/api/sdip/submissions/${V}/step/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(re)});if(!oe.ok)throw new Error(`Failed to update step ${W}`);const ee=await oe.json();console.log(` [STEP ${W}] Update successful`),console.log(` [STEP ${W}] Response data:`,ee);const fe=ee.submission||ee;return c(fe),W===2&&fe.intent_summary&&(console.log(" [STEP 2] Intent summary received:",fe.intent_summary.substring(0,50)+"..."),qe({...K,intentSummary:fe.intent_summary})),fe}catch(oe){throw console.error(` [STEP ${W}] Update failed:`,oe),console.error(` [STEP ${W}] Error details:`,oe.message),p(oe.message),oe}},ue=async V=>{var W,re,oe,ee,fe;console.log(` [STEP ${V}] Completing step`),console.log(` [STEP ${V}] Current submission:`,l),d(!0),p(null);try{if(l&&l.id&&V>1){console.log(` [STEP ${V}] Preparing step data for submission: ${l.id}`);let se={};switch(V){case 2:se={intent_summary:K.intentSummary};break;case 3:se={strategic_pct:((W=l.strat_tac)==null?void 0:W.strategic_pct)||50,tactical_pct:((re=l.strat_tac)==null?void 0:re.tactical_pct)||50,override:K.stratTacOverride};break;case 4:se={impact_analysis:I,consistency_validation:A};break;case 5:se={aligned:((oe=l.synthesis)==null?void 0:oe.aligned)||[],required:((ee=l.synthesis)==null?void 0:ee.required)||[],recommended:((fe=l.synthesis)==null?void 0:fe.recommended)||[],synthesis_reviewed:Q};break;case 6:se={questions_answers:K.questionAnswers};break;case 7:se={final_summary:l.final_summary||K.intentSummary};break}console.log(` [STEP ${V}] Step data prepared:`,se),await te(l.id,V,se)}else console.log(` [STEP ${V}] No submission ID, skipping update`);Re({...ye,[V]:!0});const xe=Ln(V);xe!==V?(a(xe),m(`Step ${V} completed!`)):(m("Directive submitted successfully!"),setTimeout(()=>{qe({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},summaryConfirmed:!1}),a(1),Re({}),c(null),H(null),C(null)},2e3))}catch(xe){p(xe.message)}finally{d(!1)}},be=async()=>{console.log(" [STEP 7] Saving submission and closing"),d(!0),p(null);try{if(l&&l.id){const V={final_summary:l.final_summary||K.intentSummary,status:"ready",completed_steps:[1,2,3,4,5,6,7]};await te(l.id,7,V),Re({...ye,7:!0}),m("Submission saved successfully! You can find it in Recent Submissions."),setTimeout(()=>{qe({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),a(1),Re({}),c(null),H(null),C(null),L("submissions")},2e3)}else throw new Error("No submission to save")}catch(V){p(V.message)}finally{d(!1)}},gt=async()=>{console.log(" [STEP 7] Submitting directive to create Strategic Directive"),d(!0),p(null);try{if(l&&l.id){const re={final_summary:l.final_summary||K.intentSummary,status:"submitted",completed_steps:[1,2,3,4,5,6,7]};await te(l.id,7,re)}const V=await fetch("/api/sdip/create-strategic-directive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_id:l.id})});if(!V.ok){const re=await V.json();throw new Error(re.error||"Failed to create Strategic Directive")}const W=await V.json();Re({...ye,7:!0}),m(`Strategic Directive created successfully! ID: ${W.sd_id}`),setTimeout(()=>{qe({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),a(1),Re({}),c(null),H(null),C(null),L("submissions")},3e3)}catch(V){p(V.message)}finally{d(!1)}},jt=V=>{var W,re,oe,ee,fe,xe,se,lt,Ye,Jn,tt,Zn,ss,is,er,vr,wr,br,de,ln,as,Hi;switch(V){case 1:return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Xo,{type:"textarea",label:"Chairman Feedback",name:"chairmanInput",value:K.chairmanInput,onChange:ie=>{qe({...K,chairmanInput:ie.target.value}),xr(ie.target.value)},placeholder:"Enter your feedback about the EHG application...",required:!0,rows:5,minLength:20,maxLength:1e3,showCharCount:!0,error:Dn.chairmanInput,success:ne.chairmanInput,helpText:"Provide detailed feedback about what you'd like to improve or add"}),o.jsx(Xo,{type:"url",label:"Screenshot URL",name:"screenshotUrl",value:K.screenshotUrl,onChange:ie=>{qe({...K,screenshotUrl:ie.target.value}),R(ie.target.value)},placeholder:"https://example.com/screenshot.png",error:Dn.screenshotUrl,success:ne.screenshotUrl,helpText:"Optional: Add a screenshot URL to provide visual context",icon:Nu}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Oe,{onClick:M,disabled:u||!K.chairmanInput.trim(),loading:u,variant:"primary",icon:ph,iconPosition:"right",children:"Submit & Analyze"}),o.jsx(Oe,{onClick:()=>{localStorage.setItem("directiveLab_draft",JSON.stringify(K)),m("Draft saved")},variant:"secondary",icon:Pu,children:"Save Draft"})]})]});case 2:return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Xo,{type:"textarea",label:"Extracted Intent Summary",name:"intentSummary",value:K.intentSummary,onChange:ie=>{qe({...K,intentSummary:ie.target.value}),ie.target&&(ie.target.style.height="auto",ie.target.style.height=Math.min(ie.target.scrollHeight,300)+"px")},rows:3,style:{minHeight:"80px",maxHeight:"300px",resize:"vertical",overflow:"auto"},onFocus:ie=>{ie.target.style.height="auto",ie.target.style.height=Math.min(ie.target.scrollHeight,300)+"px"},helpText:"Review and edit if needed to accurately capture your intent",success:K.intentSummary.length>0}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Oe,{onClick:()=>pt(1),variant:"ghost",icon:ls,children:"Back"}),o.jsx(Oe,{onClick:()=>ue(2),disabled:u||!K.intentSummary,loading:u,variant:"success",icon:zn,children:"Confirm Intent"})]})]});case 3:return o.jsxs("div",{className:"space-y-3",children:[l!=null&&l.strat_tac?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex justify-around mb-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[((W=K.stratTacOverride)==null?void 0:W.strategic_pct)??l.strat_tac.strategic_pct,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Strategic"})]}),o.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600"}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[((re=K.stratTacOverride)==null?void 0:re.tactical_pct)??l.strat_tac.tactical_pct,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Tactical"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg",children:[o.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Classification Rationale:"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:((oe=K.stratTacOverride)==null?void 0:oe.rationale)||l.strat_tac.rationale})]})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(HC,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mr-2"}),o.jsx("span",{className:"font-medium text-yellow-900 dark:text-yellow-100 text-sm",children:"Adjust Classification (Optional)"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-2",children:[o.jsx("span",{children:"More Tactical"}),o.jsx("span",{children:"More Strategic"})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:((ee=K.stratTacOverride)==null?void 0:ee.strategic_pct)??l.strat_tac.strategic_pct,onChange:ie=>{const Ke=parseInt(ie.target.value),Yt=100-Ke;let St="";Ke>70?St="Manually classified as highly strategic - focusing on long-term architecture and business objectives.":Ke>50?St="Manually classified as moderately strategic - balancing long-term goals with immediate improvements.":Ke>30?St="Manually classified as balanced - containing both strategic elements and tactical improvements.":St="Manually classified as primarily tactical - focusing on immediate fixes and improvements.",qe({...K,stratTacOverride:{strategic_pct:Ke,tactical_pct:Yt,rationale:St,manually_adjusted:!0,adjusted_at:new Date().toISOString()}})},className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 \r
                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 \r
                        [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer\r
                        [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 \r
                        [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none`}),o.jsxs("div",{className:"flex justify-between mt-1",children:[o.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[((fe=K.stratTacOverride)==null?void 0:fe.tactical_pct)??l.strat_tac.tactical_pct,"% Tactical"]}),o.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:[((xe=K.stratTacOverride)==null?void 0:xe.strategic_pct)??l.strat_tac.strategic_pct,"% Strategic"]})]})]}),K.stratTacOverride&&o.jsx(Oe,{onClick:()=>{qe({...K,stratTacOverride:null})},variant:"ghost",size:"small",icon:Es,children:"Reset to Auto-Classification"})]})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyzing strategic vs tactical breakdown..."})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Oe,{onClick:()=>pt(2),variant:"ghost",icon:ls,children:"Back"}),o.jsx(Oe,{onClick:()=>ue(3),disabled:u,loading:u,variant:"success",icon:zn,children:K.stratTacOverride?"Accept Adjusted Classification":"Accept Classification"})]})]});case 4:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Application Impact Analysis"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the comprehensive analysis of how your proposed changes will affect the application, including component dependencies, risk assessment, and consistency validation."})]}),o.jsx(CD,{impactAnalysis:I,consistencyValidation:A,submission:l}),A&&!A.passed&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Yr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),o.jsx("span",{className:"font-medium text-red-900 dark:text-red-100",children:"Consistency Issues Found"})]}),o.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 mb-3",children:[((se=A.blocking_issues)==null?void 0:se.length)||0," blocking issues must be resolved before proceeding."]}),o.jsx("div",{className:"text-xs text-red-700 dark:text-red-300",children:"Review the Impact Analysis above for detailed recommendations and mitigation strategies."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Oe,{onClick:()=>pt(3),variant:"ghost",icon:ls,children:"Back"}),o.jsx(Oe,{onClick:()=>ue(4),disabled:u||A&&!A.passed,loading:u,variant:(A==null?void 0:A.passed)===!1?"secondary":"success",icon:(A==null?void 0:A.passed)===!1?Kt:zn,children:(A==null?void 0:A.passed)===!1?"Acknowledge Risks & Continue":"Accept Impact Analysis"})]})]});case 5:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Synthesis Review"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the synthesized requirements and recommendations for your directive."})]}),l!=null&&l.synthesis?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(et,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),o.jsxs("span",{className:"font-medium text-green-900 dark:text-green-100",children:["Aligned Requirements (",((lt=l.synthesis.aligned)==null?void 0:lt.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(Ye=l.synthesis.aligned)==null?void 0:Ye.map((ie,Ke)=>{const Yt=typeof ie=="object"?ie.badges:Xu(ie),St=typeof ie=="object"?ie.text:ie;return o.jsx("li",{className:"text-sm text-green-800 dark:text-green-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-600 dark:text-green-400 mr-2",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:St}),o.jsx(Gu,{badges:Yt})]})]})},Ke)})})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Kt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),o.jsxs("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:["Required Changes (",((Jn=l.synthesis.required)==null?void 0:Jn.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(tt=l.synthesis.required)==null?void 0:tt.map((ie,Ke)=>{const Yt=typeof ie=="object"?ie.badges:Xu(ie),St=typeof ie=="object"?ie.text:ie;return o.jsx("li",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mr-2",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:St}),o.jsx(Gu,{badges:Yt})]})]})},Ke)})})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Cn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),o.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:["Recommended Enhancements (",((Zn=l.synthesis.recommended)==null?void 0:Zn.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(ss=l.synthesis.recommended)==null?void 0:ss.map((ie,Ke)=>{const Yt=typeof ie=="object"?ie.badges:Xu(ie),St=typeof ie=="object"?ie.text:ie;return o.jsx("li",{className:"text-sm text-blue-800 dark:text-blue-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:St}),o.jsx(Gu,{badges:Yt})]})]})},Ke)})})]})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Synthesizing requirements and recommendations..."})]})}),(l==null?void 0:l.synthesis)&&o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:o.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:Q,onChange:ie=>Z(ie.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"I have reviewed the synthesis analysis"}),o.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["I understand the aligned requirements (",((is=l.synthesis.aligned)==null?void 0:is.length)||0,"), required changes (",((er=l.synthesis.required)==null?void 0:er.length)||0,"), and recommended enhancements (",((vr=l.synthesis.recommended)==null?void 0:vr.length)||0,") for this directive."]})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Oe,{onClick:()=>pt(4),variant:"ghost",icon:ls,children:"Back"}),o.jsx(Oe,{onClick:()=>ue(5),disabled:u||!(l!=null&&l.synthesis)||!Q,loading:u,variant:"success",icon:zn,children:"Accept Synthesis"})]})]});case 6:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Clarifying Questions"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Answer any clarifying questions about your directive to ensure accurate implementation."})]}),l!=null&&l.questions&&l.questions.length>0?o.jsx("div",{className:"space-y-3",children:l.questions.map((ie,Ke)=>{var Yt;return o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start mb-2",children:[o.jsx(_u,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2 mt-0.5"}),o.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:ie.text})]}),o.jsx(Xo,{type:"textarea",name:`question_${Ke}`,value:((Yt=K.questionAnswers)==null?void 0:Yt[`question_${Ke}`])||"",onChange:St=>{qe({...K,questionAnswers:{...K.questionAnswers,[`question_${Ke}`]:St.target.value}})},placeholder:"Your answer...",rows:2,helpText:ie.context})]},Ke)})}):(l==null?void 0:l.questions)===void 0?o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generating clarifying questions..."})]})}):o.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(et,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),o.jsx("p",{className:"text-green-800 dark:text-green-200",children:"No clarifying questions needed - your directive is clear!"})]})}),(l==null?void 0:l.questions)!==void 0&&o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:o.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:K.questionsReviewed||!1,onChange:ie=>qe({...K,questionsReviewed:ie.target.checked}),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:((wr=l==null?void 0:l.questions)==null?void 0:wr.length)>0?"I have provided complete answers to all questions":"I confirm no additional questions are needed"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:((br=l==null?void 0:l.questions)==null?void 0:br.length)>0?`All ${l.questions.length} clarifying questions have been answered to provide context for implementation.`:"The directive is sufficiently clear and no additional clarification is required."})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Oe,{onClick:()=>pt(5),variant:"ghost",icon:ls,children:"Back"}),o.jsx(Oe,{onClick:()=>ue(6),disabled:u||!K.questionsReviewed,loading:u,variant:"success",icon:zn,children:((de=l==null?void 0:l.questions)==null?void 0:de.length)>0?"Submit Answers":"Continue"})]})]});case 7:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Final Confirmation"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the final summary and choose your next action."})]}),l!=null&&l.final_summary?o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Directive Summary"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:l.final_summary})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[((ln=l.strat_tac)==null?void 0:ln.strategic_pct)||0,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Strategic"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((as=l.impact_analysis)==null?void 0:as.risk_level)||"Low"}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Risk Level"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:((Hi=l.impact_analysis)==null?void 0:Hi.effort_estimate)||"Medium"}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Effort"})]})]}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsx(Oe,{onClick:()=>{navigator.clipboard.writeText(l.final_summary),ot.success("Summary copied to clipboard")},variant:"ghost",size:"small",icon:vp,children:"Copy Summary"}),o.jsx(Oe,{onClick:async()=>{d(!0);try{const ie=await fetch(`/api/directive-submissions/${l.id}/regenerate-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(ie.ok){const Ke=await ie.json();c({...l,final_summary:Ke.final_summary}),ot.success("Summary regenerated successfully")}}catch{ot.error("Failed to regenerate summary")}finally{d(!1)}},variant:"ghost",size:"small",icon:Es,disabled:u,children:"Regenerate"})]}),o.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:o.jsxs("label",{className:"flex items-start cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:K.finalConfirmed||!1,onChange:ie=>qe({...K,finalConfirmed:ie.target.checked}),className:"mt-0.5 mr-2"}),o.jsx("span",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:"I confirm that this directive accurately represents my requirements."})]})})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preparing final summary..."})]})}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Choose Your Next Action"}),o.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Pu,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Save & Close:"})," Save for later review or combine with other submissions"]})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(_0,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Submit Directive:"})," Create Strategic Directive and begin LEO Protocol workflow"]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(Oe,{onClick:()=>pt(6),variant:"ghost",icon:ls,className:"order-3 sm:order-1",children:"Back"}),o.jsxs("div",{className:"flex gap-3 order-1 sm:order-2 flex-1",children:[o.jsx(Oe,{onClick:be,disabled:u||!K.finalConfirmed,loading:u,variant:"secondary",icon:Pu,className:"flex-1",children:"Save & Close"}),o.jsx(Oe,{onClick:gt,disabled:u||!K.finalConfirmed,loading:u,variant:"primary",icon:_0,className:"flex-1",children:"Submit Directive"})]})]})]});default:return o.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Step content for Step ",V," coming soon..."]})}},ke=()=>o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 py-1.5 px-4",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(Oe,{onClick:()=>pt(Math.max(1,i-1)),disabled:i===1,variant:"ghost",size:"small",icon:ls,children:"Previous"}),o.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Step ",i," of ",mt.length]}),o.jsx(Oe,{onClick:()=>ue(i),disabled:!ye[i-1]&&i>1,variant:"primary",size:"small",icon:ph,iconPosition:"right",children:"Next"})]})});return o.jsx(RD,{children:o.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Qb,{}),o.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Directive Lab"}),o.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>s("quick"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${r==="quick"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Quick Mode"}),o.jsx("button",{onClick:()=>s("comprehensive"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${r==="comprehensive"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Comprehensive"})]})]}),o.jsx(Oe,{onClick:()=>q(!F),variant:"ghost",size:"small",icon:_u,ariaLabel:"Toggle help",children:"Help"})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Step:"}),o.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:((vn=mt[i-1])==null?void 0:vn.title)||"Unknown"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",i," of ",mt.length,")"]})]})]})}),F&&o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800 px-4 py-2",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(_u,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2"}),o.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[o.jsx("p",{className:"font-medium mb-0.5",children:"Getting Started:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-blue-800 dark:text-blue-200",children:[o.jsx("li",{children:"Provide detailed feedback about what you want to improve"}),o.jsx("li",{children:"Each step builds on the previous one"}),o.jsx("li",{children:"Your progress is automatically saved"}),o.jsx("li",{children:"You can navigate back to previous steps at any time"})]})]})]})})}),f&&o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-green-800 dark:text-green-200 text-sm",children:[o.jsx(et,{className:"w-4 h-4 mr-2"}),f]})}),h&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-red-800 dark:text-red-200 text-sm",children:[o.jsx(ts,{className:"w-4 h-4 mr-2"}),h]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx(_D,{steps:mt,currentStep:i,orientation:"horizontal",showTimeEstimates:!P,compact:!0,hideLabelsOnMobile:!0,onStepClick:pt})})}),o.jsx(ke,{}),o.jsxs("div",{className:"flex-1 px-4 py-2 flex flex-col min-h-0",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg shadow-sm border border-gray-200 dark:border-gray-700 border-b-0 flex-shrink-0",children:o.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("button",{onClick:()=>L("input"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${$==="input"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nu,{className:"w-4 h-4"}),"Input & Screenshot"]}),$==="input"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]}),o.jsxs("button",{onClick:()=>L("submissions"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${$==="submissions"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dt,{className:"w-4 h-4"}),"Recent Submissions",l&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),$==="submissions"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]})]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-b-lg shadow-sm border border-gray-200 dark:border-gray-700 border-t-0 flex-1 relative flex flex-col overflow-hidden",children:[o.jsxs("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out flex flex-col ${$==="input"?"translate-x-0 opacity-100":"translate-x-full opacity-0 pointer-events-none"}`,children:[o.jsxs("div",{className:"mb-3 flex-shrink-0",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:mt[i-1].title}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:mt[i-1].description})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:jt(i)})]}),o.jsx("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out ${$==="submissions"?"translate-x-0 opacity-100":"-translate-x-full opacity-0 pointer-events-none"}`,children:o.jsxs("div",{className:"h-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Submissions"}),o.jsx(Oe,{onClick:()=>j(V=>V+1),variant:"ghost",size:"small",icon:Es,ariaLabel:"Refresh submissions"})]}),o.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:o.jsx(ED,{onSubmissionSelect:V=>{c(V),V&&setTimeout(()=>L("input"),300)},selectedSubmissionId:l==null?void 0:l.id,onSelectionChange:w,refreshTrigger:E,onGroupCreate:(V,W="intelligent")=>{w(V),S(W),x(!0)}})})]})})]})]}),g&&o.jsx(PD,{selectedSubmissions:v,combineMethod:y,onClose:()=>x(!1),onSuccess:()=>{x(!1),j(V=>V+1)}})]})})};function Vy({backlogData:e=[],strategicDirectives:t=[],isCompact:n,onRefresh:r}){const{id:s}=Mf(),i=Oi(),a=Qn(),c=new URLSearchParams(a.search).get("sd"),[u,d]=b.useState({}),[h,p]=b.useState(""),[f,m]=b.useState("all"),[v,w]=b.useState(c||"all"),[g,x]=b.useState(!1),[y,S]=b.useState("all"),[E,j]=b.useState(!0),[P,T]=b.useState([]),[$,L]=b.useState({});b.useEffect(()=>{(async()=>{j(!0);try{const H=v&&v!=="all"?`/api/backlog/strategic-directives/${v}`:"/api/backlog/strategic-directives-with-items",C=await(await fetch(H)).json();if(v&&v!=="all")T(C.backlog_items||[]),L({[C.sd_id]:{sd:C,items:C.backlog_items||[]}});else{const z={};C.forEach(Q=>{z[Q.sd_id]={sd:Q,items:Q.backlog_items||[]}}),L(z);const k=C.flatMap(Q=>Q.backlog_items||[]);T(k)}}catch(H){console.error("Error loading backlog:",H)}finally{j(!1)}})()},[v]);const F=Object.entries($).reduce((I,[H,A])=>{let C=A.items;if(h){const z=h.toLowerCase();C=C.filter(k=>{var Q,Z,_,je;return((Q=k.backlog_title)==null?void 0:Q.toLowerCase().includes(z))||((Z=k.item_description)==null?void 0:Z.toLowerCase().includes(z))||((_=k.backlog_id)==null?void 0:_.toLowerCase().includes(z))||((je=k.my_comments)==null?void 0:je.toLowerCase().includes(z))})}return f!=="all"&&(C=C.filter(z=>{var k;return((k=z.priority)==null?void 0:k.toLowerCase())===f.toLowerCase()})),y==="yes"?C=C.filter(z=>z.new_module===!0):y==="no"&&(C=C.filter(z=>z.new_module===!1)),C.length>0&&(I[H]={...A,items:C}),I},{}),q=I=>{if(!I)return null;const H=I.toLowerCase(),A={high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:mr},h:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:mr},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Lr},m:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Lr},low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Lr},l:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Lr},future:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-300",icon:Rn}},C=A[H]||A.low,z=C.icon;return o.jsxs("span",{className:`inline-flex items-center ${n?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${C.bg} ${C.text}`,children:[o.jsx(z,{className:"w-3 h-3 mr-1"}),I]})},he=I=>{d(H=>({...H,[I]:!H[I]}))};if(E)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading backlog..."})});const O=Object.values(F).reduce((I,H)=>I+H.items.length,0);return o.jsxs("div",{className:n?"p-3":"p-6",children:[o.jsxs("div",{className:n?"mb-3":"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(_s,{className:n?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),o.jsx("h1",{className:n?"text-xl font-semibold":"text-2xl font-bold",children:"Backlog Management"}),o.jsxs("span",{className:`ml-3 ${n?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[O," items"]})]}),o.jsx(Nc,{onRefresh:r,isCompact:n})]}),o.jsxs("div",{className:`flex flex-wrap gap-2 ${n?"mb-3":"mb-4"}`,children:[o.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[o.jsx(Xb,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"w-4 h-4":"w-5 h-5"} text-gray-400`}),o.jsx("input",{type:"text",value:h,onChange:I=>p(I.target.value),placeholder:"Search backlog items...",className:`w-full ${n?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),o.jsxs("select",{value:v,onChange:I=>w(I.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Strategic Directives"}),Object.values($).map(({sd:I})=>o.jsx("option",{value:I.sd_id,children:I.sd_title},I.sd_id))]}),o.jsxs("select",{value:f,onChange:I=>m(I.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"}),o.jsx("option",{value:"future",children:"Future"})]}),o.jsxs("select",{value:y,onChange:I=>S(I.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Items"}),o.jsx("option",{value:"yes",children:"New Module"}),o.jsx("option",{value:"no",children:"Existing Module"})]}),o.jsxs("button",{onClick:()=>i("/backlog/new"),className:`flex items-center ${n?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[o.jsx(qC,{className:`${n?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Backlog Item"]})]})]}),o.jsx("div",{className:"space-y-4",children:Object.entries(F).map(([I,{sd:H,items:A}])=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:`${n?"p-3":"p-4"} border-b border-gray-200 dark:border-gray-700`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:`${n?"text-base":"text-lg"} font-semibold text-gray-900 dark:text-white`,children:H.sd_title}),o.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:H.sd_id}),H.rolled_triage&&o.jsxs("span",{className:`text-xs px-2 py-1 rounded ${H.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":H.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":H.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:["Triage: ",H.rolled_triage]}),H.must_have_pct!==null&&o.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:[H.must_have_pct,"% Must-Have"]}),o.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:[A.length," items"]})]})]}),o.jsx("button",{onClick:()=>i(`/strategic-directives/${H.sd_id}`),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:o.jsx(dt,{className:n?"w-4 h-4":"w-5 h-5"})})]})}),o.jsx("div",{className:n?"p-2":"p-3",children:A.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No backlog items found"}):o.jsx("div",{className:"space-y-2",children:A.map(C=>o.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:o.jsxs("div",{className:`${n?"p-2":"p-3"} cursor-pointer`,onClick:()=>he(`${I}-${C.backlog_id}`),children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start flex-1",children:[o.jsx("div",{className:"mr-2 mt-1",children:u[`${I}-${C.backlog_id}`]?o.jsx(Un,{className:"w-4 h-4 text-gray-400"}):o.jsx(en,{className:"w-4 h-4 text-gray-400"})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"font-mono text-xs text-gray-500 dark:text-gray-400",children:C.backlog_id}),o.jsx("span",{className:`${n?"text-sm":"text-base"} font-medium text-gray-900 dark:text-white`,children:C.backlog_title}),C.new_module&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:"New Module"})]})})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[q(C.priority),C.stage_number&&o.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded",children:["Stage ",C.stage_number]})]})]}),u[`${I}-${C.backlog_id}`]&&o.jsxs("div",{className:`mt-3 ${n?"pl-5":"pl-6"} space-y-2`,children:[C.item_description&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.item_description})]}),C.my_comments&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Comments"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.my_comments})]}),C.phase&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Phase"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.phase})]}),C.description_raw&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tags"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.description_raw})]})]})]})},`${I}-${C.backlog_id}`))})})]},I))}),Object.keys(F).length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(_s,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No backlog items found matching your filters"})]})]})}function LD({metrics:e,activeCount:t,totalReviews:n}){const r=[{title:"Active Reviews",value:t,icon:Sc,color:"blue",trend:null},{title:"Pass Rate",value:`${e.passRate}%`,icon:et,color:"green",trend:e.passRate>85?"up":"down",trendValue:e.passRate>85?"Good":"Needs Improvement"},{title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,icon:Rn,color:"purple",trend:e.avgTime<5e3?"up":"down",trendValue:e.avgTime<5e3?"Fast":"Slow"},{title:"False Positive Rate",value:`${e.falsePositiveRate}%`,icon:Kt,color:e.falsePositiveRate>15?"yellow":"green",trend:e.falsePositiveRate<15?"up":"down",trendValue:e.falsePositiveRate<15?"On Target":"High"},{title:"Compliance Rate",value:`${e.complianceRate}%`,icon:to,color:e.complianceRate>=95?"green":"yellow",trend:e.complianceRate>=95?"up":"down",trendValue:`${n} total reviews`}],s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:r.map((i,a)=>{const l=i.icon,c={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400"};return o.jsxs(Y.div,{variants:s,initial:"hidden",animate:"visible",transition:{delay:a*.05},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:`p-2 rounded-lg ${c[i.color]}`,children:o.jsx(l,{className:"w-5 h-5"})}),i.trend&&o.jsx("div",{className:"flex items-center space-x-1",children:i.trend==="up"?o.jsx(mr,{className:"w-4 h-4 text-green-500"}):o.jsx(Lr,{className:"w-4 h-4 text-red-500"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.value}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.title}),i.trendValue&&o.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:i.trendValue})]})]},i.title)})})}function OD({reviews:e,loading:t}){if(t)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return o.jsxs("div",{className:"text-center py-12",children:[o.jsx(bp,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Active Reviews"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All PR reviews have been completed or there are no PRs to review."})]});const n=a=>{switch(a){case"pending":return o.jsx(Rn,{className:"w-5 h-5 text-yellow-500"});case"passed":return o.jsx(et,{className:"w-5 h-5 text-green-500"});case"failed":return o.jsx(Yr,{className:"w-5 h-5 text-red-500"});case"warning":return o.jsx(Kt,{className:"w-5 h-5 text-orange-500"});default:return o.jsx(Rn,{className:"w-5 h-5 text-gray-500"})}},r=a=>{const c={security:to,performance:Xl,database:wp,testing:XC}[a]||dt;return o.jsx(c,{className:"w-4 h-4"})},s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}};return o.jsx(Y.div,{variants:s,initial:"hidden",animate:"visible",className:"space-y-4",children:e.map((a,l)=>o.jsxs(Y.div,{variants:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[n(a.status),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["PR #",a.pr_number,": ",a.pr_title]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(Kb,{className:"w-3 h-3"}),o.jsx("span",{children:a.branch})]}),o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(Sp,{className:"w-3 h-3"}),o.jsx("span",{children:a.author})]}),a.sd_link&&o.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["SD: ",a.sd_link]}),a.prd_link&&o.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["PRD: ",a.prd_link]})]})]})]}),o.jsx("a",{href:a.github_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"View on GitHub",children:o.jsx(Kl,{className:"w-5 h-5"})})]}),a.sub_agent_reviews&&a.sub_agent_reviews.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:a.sub_agent_reviews.map(c=>o.jsxs("div",{className:`
                      flex items-center space-x-2 px-3 py-2 rounded-md text-sm
                      ${c.status==="passed"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":c.status==="failed"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}
                    `,children:[r(c.sub_agent),o.jsx("span",{className:"capitalize",children:c.sub_agent})]},c.sub_agent))})]}),a.summary&&o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.summary})}),a.issues&&a.issues.length>0&&o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-md p-3",children:[o.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:["Issues Found (",a.issues.length,")"]}),o.jsxs("ul",{className:"space-y-1",children:[a.issues.slice(0,3).map((c,u)=>o.jsxs("li",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[" ",c]},u)),a.issues.length>3&&o.jsxs("li",{className:"text-sm text-yellow-600 dark:text-yellow-500 italic",children:["... and ",a.issues.length-3," more"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{children:["Started: ",new Date(a.created_at).toLocaleTimeString()]}),a.review_time_ms&&o.jsxs("span",{children:["Duration: ",(a.review_time_ms/1e3).toFixed(1),"s"]})]}),a.status==="pending"&&o.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-600 dark:text-yellow-400",children:[o.jsx(Rn,{className:"w-3 h-3 animate-pulse"}),o.jsx("span",{children:"In Progress"})]})]})]},a.id))})}function $D({reviews:e,loading:t}){const[n,r]=b.useState(new Set);if(t)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return o.jsxs("div",{className:"text-center py-12",children:[o.jsx(dt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Review History"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Review history will appear here once PR reviews are completed."})]});const s=c=>{const u=new Set(n);u.has(c)?u.delete(c):u.add(c),r(u)},i=c=>{const u={passed:{icon:et,color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",label:"Passed"},failed:{icon:Yr,color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",label:"Failed"},warning:{icon:Kt,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",label:"Warning"}},d=u[c]||u.warning,h=d.icon;return o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:[o.jsx(h,{className:"w-3 h-3 mr-1"}),d.label]})},a=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=c=>{if(!c)return"N/A";const u=c/1e3;if(u<60)return`${u.toFixed(1)}s`;const d=Math.floor(u/60),h=(u%60).toFixed(0);return`${d}m ${h}s`};return o.jsx("div",{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-md rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"PR Details"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Author"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Issues"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Links"}),o.jsx("th",{className:"relative px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(c=>{var d,h;const u=n.has(c.id);return o.jsxs(io.Fragment,{children:[o.jsxs(Y.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["PR #",c.pr_number]}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:c.pr_title}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[o.jsx(Kb,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.branch})]})]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Sp,{className:"w-4 h-4 text-gray-400 mr-2"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:c.author})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i(c.status)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((d=c.issues)==null?void 0:d.length)||0})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Rn,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{children:l(c.review_time_ms)})]}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[o.jsx(Bb,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a(c.created_at)})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[c.github_url&&o.jsx("a",{href:c.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"View on GitHub",children:o.jsx(Kl,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[c.sd_link&&o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"SD"}),c.prd_link&&o.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"PRD"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>s(c.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:u?o.jsx(RC,{className:"w-5 h-5"}):o.jsx(Un,{className:"w-5 h-5"})})})]}),u&&o.jsx("tr",{className:"bg-gray-50 dark:bg-gray-900",children:o.jsx("td",{colSpan:"7",className:"px-6 py-4",children:o.jsxs("div",{className:"space-y-4",children:[c.summary&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Review Summary"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.summary})]}),c.sub_agent_reviews&&c.sub_agent_reviews.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:c.sub_agent_reviews.map(p=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[o.jsx("span",{className:"text-sm capitalize text-gray-700 dark:text-gray-300",children:p.sub_agent}),i(p.status)]},p.sub_agent))})]}),c.issues&&c.issues.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Issues Found"}),o.jsx("ul",{className:"space-y-1",children:c.issues.map((p,f)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",p]},f))})]}),c.metadata&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commit"}),o.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:((h=c.commit_sha)==null?void 0:h.substring(0,7))||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.leo_phase||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"False Positive"}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.is_false_positive?"Yes":"No"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Review ID"}),o.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:c.id.substring(0,8)})]})]})]})})})]},c.id)})})]})})}function MD({metrics:e,reviews:t}){const[n,r]=b.useState("7d"),[s,i]=b.useState("overview"),a=b.useMemo(()=>{if(!t||t.length===0)return null;const c=new Date,u={"24h":24*60*60*1e3,"7d":7*24*60*60*1e3,"30d":30*24*60*60*1e3},d=c-u[n],h=t.filter(m=>new Date(m.created_at)>=d),p={};h.forEach(m=>{const v=new Date(m.created_at).toLocaleDateString();p[v]||(p[v]={total:0,passed:0,failed:0,warnings:0}),p[v].total++,m.status==="passed"?p[v].passed++:m.status==="failed"?p[v].failed++:m.status==="warning"&&p[v].warnings++});const f={};return h.forEach(m=>{m.sub_agent_reviews&&m.sub_agent_reviews.forEach(v=>{f[v.sub_agent]||(f[v.sub_agent]={total:0,passed:0,failed:0,avgTime:[]}),f[v.sub_agent].total++,v.status==="passed"?f[v.sub_agent].passed++:f[v.sub_agent].failed++,v.review_time_ms&&f[v.sub_agent].avgTime.push(v.review_time_ms)})}),Object.keys(f).forEach(m=>{const v=f[m];v.passRate=(v.passed/v.total*100).toFixed(1),v.avgTime.length>0&&(v.avgTimeMs=v.avgTime.reduce((w,g)=>w+g,0)/v.avgTime.length)}),{dailyData:Object.entries(p).slice(-7),subAgentStats:f,totalReviews:h.length,passRate:h.length>0?(h.filter(m=>m.status==="passed").length/h.length*100).toFixed(1):0}},[t,n]),l=[{id:"compliance",title:"Compliance Rate",value:`${e.complianceRate}%`,target:"95%",status:e.complianceRate>=95?"good":"warning",description:"SD/PRD linkage compliance"},{id:"false-positive",title:"False Positive Rate",value:`${e.falsePositiveRate}%`,target:"<15%",status:e.falsePositiveRate<=15?"good":"warning",description:"Reviews marked as false positives"},{id:"avg-time",title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,target:"<5s",status:e.avgTime<5e3?"good":"warning",description:"Average time per review"},{id:"coverage",title:"Coverage",value:`${(a==null?void 0:a.totalReviews)||0}`,target:"PRs",status:"neutral",description:`Reviews in ${n}`}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Metrics"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("select",{value:n,onChange:c=>r(c.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[o.jsx("option",{value:"24h",children:"Last 24 Hours"}),o.jsx("option",{value:"7d",children:"Last 7 Days"}),o.jsx("option",{value:"30d",children:"Last 30 Days"})]}),o.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Export Metrics",children:o.jsx(IC,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(c=>o.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.title}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.value})]}),o.jsx("div",{className:`
                p-2 rounded-lg
                ${c.status==="good"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":c.status==="warning"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}
              `,children:c.status==="good"?o.jsx(mr,{className:"w-4 h-4"}):c.status==="warning"?o.jsx(Lr,{className:"w-4 h-4"}):o.jsx(Sc,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Target: ",c.target]}),o.jsx("span",{className:"text-gray-400 dark:text-gray-500",title:c.description,children:o.jsx(Cn,{className:"w-3 h-3"})})]})]},c.id))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[o.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(CC,{className:"w-5 h-5 mr-2"}),"Daily Review Trend"]}),a!=null&&a.dailyData&&a.dailyData.length>0?o.jsxs("div",{className:"space-y-3",children:[a.dailyData.map(([c,u])=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),o.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[o.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 overflow-hidden",children:o.jsxs("div",{className:"h-full flex",children:[o.jsx("div",{className:"bg-green-500 transition-all duration-300",style:{width:`${u.passed/u.total*100}%`}}),o.jsx("div",{className:"bg-red-500 transition-all duration-300",style:{width:`${u.failed/u.total*100}%`}}),o.jsx("div",{className:"bg-yellow-500 transition-all duration-300",style:{width:`${u.warnings/u.total*100}%`}})]})}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 w-10",children:u.total})]})]},c)),o.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Passed"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Failed"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Warnings"})]})]})]}):o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available for selected period"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[o.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(WC,{className:"w-5 h-5 mr-2"}),"Sub-Agent Performance"]}),a!=null&&a.subAgentStats&&Object.keys(a.subAgentStats).length>0?o.jsx("div",{className:"space-y-3",children:Object.entries(a.subAgentStats).map(([c,u])=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:c}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[u.total," reviews"]}),o.jsxs("span",{className:`font-medium ${parseFloat(u.passRate)>=85?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:[u.passRate,"% pass"]})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${parseFloat(u.passRate)>=85?"bg-green-500":"bg-yellow-500"}`,style:{width:`${u.passRate}%`}})}),u.avgTimeMs&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg time: ",(u.avgTimeMs/1e3).toFixed(1),"s"]})]},c))}):o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No sub-agent data available"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"System Health Summary"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),o.jsx("p",{className:`text-lg font-semibold ${e.falsePositiveRate<=15&&e.complianceRate>=95?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:e.falsePositiveRate<=15&&e.complianceRate>=95?"Healthy":"Needs Attention"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Reviews"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.totalToday})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pass Rate Trend"}),o.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(a==null?void 0:a.passRate)||e.passRate,"%",(a==null?void 0:a.passRate)>e.passRate?o.jsx(mr,{className:"w-4 h-4 ml-2 text-green-500"}):o.jsx(Lr,{className:"w-4 h-4 ml-2 text-red-500"})]})]})]})]})]})}function FD({state:e,isConnected:t,refreshData:n}){const[r,s]=b.useState([]),[i,a]=b.useState({totalToday:0,passRate:0,avgTime:0,falsePositiveRate:0,complianceRate:0}),[l,c]=b.useState(!0),[u,d]=b.useState("active"),[h,p]=b.useState("all");b.useEffect(()=>{f(),m()},[]),b.useEffect(()=>{e!=null&&e.prReviews&&(e.prReviews.reviews&&s(e.prReviews.reviews),e.prReviews.metrics&&a(e.prReviews.metrics))},[e==null?void 0:e.prReviews]);const f=async()=>{try{const S=await(await fetch("/api/pr-reviews")).json();s(S||[])}catch(y){console.error("Failed to load PR reviews:",y)}finally{c(!1)}},m=async()=>{try{const S=await(await fetch("/api/pr-reviews/metrics")).json();a(S)}catch(y){console.error("Failed to load metrics:",y)}},v=async()=>{c(!0),await Promise.all([f(),m()]),c(!1)},w=r.filter(y=>y.status==="pending");r.filter(y=>y.status!=="pending");const g=h==="all"?r:r.filter(y=>y.status===h),x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Y.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(bp,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"PR Reviews"}),t&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300",children:"Live"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:v,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Refresh",children:o.jsx(Es,{className:`w-5 h-5 ${l?"animate-spin":""}`})}),o.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Settings",children:o.jsx(KC,{className:"w-5 h-5"})})]})]}),o.jsx(LD,{metrics:i,activeCount:w.length,totalReviews:r.length}),o.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:o.jsx("nav",{className:"-mb-px flex space-x-8",children:["active","history","metrics"].map(y=>o.jsxs("button",{onClick:()=>d(y),className:`
                py-2 px-1 border-b-2 font-medium text-sm capitalize
                ${u===y?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
              `,children:[y==="active"&&`Active (${w.length})`,y==="history"&&"Review History",y==="metrics"&&"Metrics & Trends"]},y))})}),o.jsxs(Y.div,{variants:x,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:[u==="active"&&o.jsx(OD,{reviews:w,loading:l}),u==="history"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filter:"}),o.jsxs("select",{value:h,onChange:y=>p(y.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[o.jsx("option",{value:"all",children:"All Reviews"}),o.jsx("option",{value:"passed",children:"Passed"}),o.jsx("option",{value:"failed",children:"Failed"}),o.jsx("option",{value:"warning",children:"Warnings"})]}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",g.length," reviews"]})]}),o.jsx($D,{reviews:g.filter(y=>y.status!=="pending"),loading:l})]}),u==="metrics"&&o.jsx(MD,{metrics:i,reviews:r})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Sc,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.totalToday," reviews today"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(et,{className:"w-4 h-4 text-green-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.passRate,"% pass rate"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rn,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[(i.avgTime/1e3).toFixed(1),"s avg time"]})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:i.falsePositiveRate>15?o.jsxs("span",{className:"flex items-center space-x-1 text-sm text-yellow-600 dark:text-yellow-400",children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"High false positive rate"})]}):o.jsxs("span",{className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400",children:[o.jsx(et,{className:"w-4 h-4"}),o.jsx("span",{children:"System healthy"})]})})]})]})}const Yo=window.location.hostname==="localhost",ra={log:(...e)=>{Yo&&console.log(...e)},error:(...e)=>{console.error(...e)},warn:(...e)=>{Yo&&console.warn(...e)},info:(...e)=>{Yo&&console.info(...e)},debug:(...e)=>{Yo&&console.debug(...e)}};function VD(){var S,E;const[e,t]=b.useState({leoProtocol:{version:"detecting...",activeRole:null,currentSD:null,currentPRD:null,phase:null},context:{usage:0,total:18e4,breakdown:{}},handoffs:[],strategicDirectives:[],prds:[],checklists:{},progress:{overall:0,byPhase:{}}}),[n,r]=b.useState(!1),[s,i]=b.useState(!1),{preferences:a}=G2(),[l,c]=cu("checklists",{}),[u,d]=cu("sidebarCollapsed",!1),[h,p]=cu("compactMode",!1),f=K2("ws://localhost:3000",{onOpen:()=>{r(!0),ra.log("Connected to dashboard server")},onMessage:j=>{try{const P=JSON.parse(j.data);P.type==="state"&&t(P.data)}catch(P){ra.error("Error parsing WebSocket message:",P)}},onClose:()=>{r(!1),ra.log("Disconnected from dashboard server")},onError:j=>{ra.error("WebSocket error:",j)}});b.useEffect(()=>{fetch("/api/state").then(j=>j.json()).then(j=>{const P={...j,checklists:{...j.checklists,...l}};t(P)}).catch(j=>ra.error("Error loading state:",j))},[]),b.useEffect(()=>{Object.keys(e.checklists).length>0&&c(e.checklists)},[e.checklists]),b.useEffect(()=>{a.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[a.theme]);const m=()=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"refresh"}))},v=(j,P,T)=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"updateChecklist",data:{documentId:j,itemIndex:P,checked:T}}))},w=(j,P)=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"requestHandoff",data:{type:j,checklist:P}}))},g=()=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"compactContext"}))},x=j=>{t(P=>({...P,leoProtocol:{...P.leoProtocol,currentSD:j}})),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"setActiveSD",data:{sdId:j}}))},y=(j,P)=>{t(T=>({...T,strategicDirectives:T.strategicDirectives.map($=>$.id===j?{...$,status:P}:$)})),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"updateSDStatus",data:{sdId:j,status:P}}))};return o.jsx(V2,{children:o.jsx(R2,{children:o.jsxs(It,{path:"/",element:o.jsx(sT,{state:e,isConnected:n,isSidebarCollapsed:u,setIsSidebarCollapsed:d,isCompactMode:h,setIsCompactMode:p,isMobileMenuOpen:s,setIsMobileMenuOpen:i,updateChecklist:v,requestHandoff:w,compactContext:g,refreshData:m,setActiveSD:x}),children:[o.jsx(It,{index:!0,element:o.jsx(V3,{state:e,onRefresh:m,onSetActiveSD:x,isCompact:h})}),o.jsxs(It,{path:"strategic-directives",children:[o.jsx(It,{index:!0,element:o.jsx(My,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:x,onUpdateStatus:y,currentSD:(S=e.leoProtocol)==null?void 0:S.currentSD,isCompact:h,onRefresh:m})}),o.jsx(It,{path:":id",element:o.jsx(My,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:x,onUpdateStatus:y,currentSD:(E=e.leoProtocol)==null?void 0:E.currentSD,isCompact:h,detailMode:!0,onRefresh:m})})]}),o.jsxs(It,{path:"prds",children:[o.jsx(It,{index:!0,element:o.jsx(Fy,{prds:e.prds,isCompact:h})}),o.jsx(It,{path:":id",element:o.jsx(Fy,{prds:e.prds,isCompact:h,detailMode:!0})})]}),o.jsxs(It,{path:"backlog",children:[o.jsx(It,{index:!0,element:o.jsx(Vy,{strategicDirectives:e.strategicDirectives,isCompact:h,onRefresh:m})}),o.jsx(It,{path:":id",element:o.jsx(Vy,{strategicDirectives:e.strategicDirectives,isCompact:h,detailMode:!0,onRefresh:m})})]}),o.jsx(It,{path:"directive-lab",element:o.jsx(DD,{state:e,onRefresh:m,isCompact:h})}),o.jsx(It,{path:"pr-reviews",element:o.jsx(FD,{state:e,isConnected:n,refreshData:m})}),o.jsx(It,{path:"*",element:o.jsx(C2,{to:"/",replace:!0})})]})})})}class zD extends io.Component{constructor(n){super(n);Lc(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});Lc(this,"handleHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){window.location.hostname==="localhost"&&console.error("ErrorBoundary caught:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Kt,{className:"w-8 h-8 text-red-500 mr-3"}),o.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Something went wrong"})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We encountered an unexpected error. The application may not work correctly."}),window.location.hostname==="localhost"&&o.jsxs("details",{className:"mb-4",children:[o.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Error details (development only)"}),o.jsxs("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto",children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(Es,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),o.jsxs("button",{onClick:this.handleHome,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[o.jsx(kp,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}Yu.createRoot(document.getElementById("root")).render(o.jsx(io.StrictMode,{children:o.jsx(zD,{children:o.jsx(VD,{})})}));
//# sourceMappingURL=index-GAZd2de5.js.map
