{"version":3,"file":"SDManager-CinUB68x.js","sources":["../../node_modules/lucide-react/dist/esm/icons/archive.js","../../node_modules/lucide-react/dist/esm/icons/grip-vertical.js","../../node_modules/lucide-react/dist/esm/icons/pen-line.js","../../src/components/SDManager.jsx"],"sourcesContent":["/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Archive = createLucideIcon(\"Archive\", [\n  [\n    \"rect\",\n    { width: \"20\", height: \"5\", x: \"2\", y: \"3\", rx: \"1\", key: \"1wp1u1\" }\n  ],\n  [\"path\", { d: \"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8\", key: \"1s80jp\" }],\n  [\"path\", { d: \"M10 12h4\", key: \"a56b0p\" }]\n]);\n\nexport { Archive as default };\n//# sourceMappingURL=archive.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst GripVertical = createLucideIcon(\"GripVertical\", [\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"1\", key: \"1vctgf\" }],\n  [\"circle\", { cx: \"9\", cy: \"5\", r: \"1\", key: \"hp0tcf\" }],\n  [\"circle\", { cx: \"9\", cy: \"19\", r: \"1\", key: \"fkjjf6\" }],\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"1\", key: \"1tmaij\" }],\n  [\"circle\", { cx: \"15\", cy: \"5\", r: \"1\", key: \"19l28e\" }],\n  [\"circle\", { cx: \"15\", cy: \"19\", r: \"1\", key: \"f4zoj3\" }]\n]);\n\nexport { GripVertical as default };\n//# sourceMappingURL=grip-vertical.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PenLine = createLucideIcon(\"PenLine\", [\n  [\"path\", { d: \"M12 20h9\", key: \"t2du7b\" }],\n  [\n    \"path\",\n    { d: \"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z\", key: \"ymcmye\" }\n  ]\n]);\n\nexport { PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  FileText,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  ChevronRight,\r\n  CheckSquare,\r\n  GripVertical,\r\n  Square,\r\n  Calendar,\r\n  User,\r\n  Target,\r\n  AlertCircle,\r\n  Plus,\r\n  Wand2,\r\n  Filter,\r\n  Archive,\r\n  Activity,\r\n  Search,\r\n  Copy,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  Zap,\r\n  Package,\r\n  Edit3,\r\n  Edit2,\r\n  X,\r\n  Sparkles,\r\n  MessageSquare,\r\n  Loader2\r\n} from 'lucide-react';\r\nimport ReactMarkdown from 'react-markdown';\r\n// SDAssistant removed - using DirectiveLab instead\r\nimport SmartRefreshButton from './SmartRefreshButton';\r\n\r\nfunction SDManager({ strategicDirectives, onUpdateChecklist, onSetActiveSD, currentSD, isCompact, detailMode, onRefresh, onUpdateStatus }) {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [expandedSD, setExpandedSD] = useState(null);\r\n  const [viewMode, setViewMode] = useState('list'); // 'list' or 'detail'\r\n  const [selectedSD, setSelectedSD] = useState(null);\r\n  // SDAssistant state removed - using DirectiveLab navigation instead\r\n  const [statusFilter, setStatusFilter] = useState(() => {\r\n    // Load filter preference from localStorage, default to 'active_draft'\r\n    return localStorage.getItem('sd-status-filter') || 'active_draft';\r\n  });\r\n  const [showFilterDropdown, setShowFilterDropdown] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [priorityFilter, setPriorityFilter] = useState('all');\r\n  const [targetAppFilter, setTargetAppFilter] = useState('all');\r\n  const [copiedId, setCopiedId] = useState(null);\r\n  const [editingStatus, setEditingStatus] = useState(null);\r\n  const [statusDropdownOpen, setStatusDropdownOpen] = useState(null);\r\n  const [reorderingId, setReorderingId] = useState(null);\r\n\r\n  // Backlog summary state\r\n  const [backlogSummaries, setBacklogSummaries] = useState({});\r\n  const [expandedSummaries, setExpandedSummaries] = useState({});\r\n  const [loadingSummaries, setLoadingSummaries] = useState({});\r\n  \r\n  // Save filter preference when it changes - MUST be before any conditional returns\r\n  useEffect(() => {\r\n    localStorage.setItem('sd-status-filter', statusFilter);\r\n  }, [statusFilter]);\r\n  \r\n  // Handle URL-based detail view with navigation guards\r\n  useEffect(() => {\r\n    if (detailMode && id) {\r\n      // Debug logging\r\n      console.log('Detail mode - Looking for SD with id:', id);\r\n      console.log('Available SDs count:', strategicDirectives.length);\r\n      if (strategicDirectives.length > 0) {\r\n        console.log('First few SDs:', strategicDirectives.slice(0, 3).map(d => ({ id: d.id, title: d.title })));\r\n      }\r\n      \r\n      // Navigation guard: Check if SD exists\r\n      const sd = strategicDirectives.find(d => d.id === id);\r\n      if (sd) {\r\n        console.log('Found SD:', sd.id, sd.title);\r\n        setSelectedSD(sd);\r\n        setViewMode('detail');\r\n        // Update browser title\r\n        document.title = `${sd.title || sd.id} - LEO Protocol Dashboard`;\r\n      } else {\r\n        // SD not found - only redirect if we've loaded the directives\r\n        if (strategicDirectives.length > 0) {\r\n          console.warn(`SD with id '${id}' not found in ${strategicDirectives.length} directives, redirecting to list`);\r\n          navigate('/strategic-directives', { replace: true });\r\n        } else {\r\n          console.log('Waiting for strategic directives to load...');\r\n        }\r\n      }\r\n    } else if (!detailMode) {\r\n      setViewMode('list');\r\n      setSelectedSD(null);\r\n      // Reset browser title\r\n      document.title = 'Strategic Directives - LEO Protocol Dashboard';\r\n    }\r\n  }, [id, detailMode, strategicDirectives, navigate]);\r\n\r\n  const toggleExpand = (sdId) => {\r\n    setExpandedSD(expandedSD === sdId ? null : sdId);\r\n  };\r\n\r\n  const copyToClipboard = (text) => {\r\n    navigator.clipboard.writeText(text);\r\n    setCopiedId(text);\r\n    setTimeout(() => setCopiedId(null), 2000);\r\n  };\r\n\r\n  // Fetch backlog summary for an SD\r\n  const fetchBacklogSummary = async (sdId) => {\r\n    if (backlogSummaries[sdId] || loadingSummaries[sdId]) {\r\n      return; // Already have it or currently loading\r\n    }\r\n\r\n    setLoadingSummaries(prev => ({ ...prev, [sdId]: true }));\r\n\r\n    try {\r\n      const response = await fetch(`/api/strategic-directives/${sdId}/backlog-summary`);\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setBacklogSummaries(prev => ({\r\n          ...prev,\r\n          [sdId]: data\r\n        }));\r\n      } else {\r\n        console.error('Failed to fetch backlog summary:', data.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching backlog summary:', error);\r\n    } finally {\r\n      setLoadingSummaries(prev => ({ ...prev, [sdId]: false }));\r\n    }\r\n  };\r\n\r\n  // Toggle backlog summary expansion\r\n  const toggleSummaryExpansion = (sdId) => {\r\n    const isExpanded = expandedSummaries[sdId];\r\n\r\n    if (isExpanded) {\r\n      setExpandedSummaries(prev => ({ ...prev, [sdId]: false }));\r\n    } else {\r\n      setExpandedSummaries(prev => ({ ...prev, [sdId]: true }));\r\n      // Fetch summary when expanding if not already available\r\n      fetchBacklogSummary(sdId);\r\n    }\r\n  };\r\n  \r\n  const clearFilters = () => {\r\n    setSearchQuery('');\r\n    setPriorityFilter('all');\r\n    setStatusFilter('all');\r\n    setTargetAppFilter('all');\r\n  };\r\n\r\n  const hasActiveFilters = searchQuery || priorityFilter !== 'all' || statusFilter !== 'all' || targetAppFilter !== 'all';\r\n  \r\n  const getPriorityBorderColor = (priority) => {\r\n    switch(priority?.toLowerCase()) {\r\n      case 'critical': return 'border-l-4 border-l-red-500';\r\n      case 'high': return 'border-l-4 border-l-orange-500';\r\n      case 'medium': return 'border-l-4 border-l-yellow-500';\r\n      case 'low': return 'border-l-4 border-l-gray-400';\r\n      default: return 'border-l-4 border-l-gray-300';\r\n    }\r\n  };\r\n  \r\n  const getProgressBarGradient = (progress) => {\r\n    if (progress === 100) return 'bg-gradient-to-r from-green-400 to-green-600 animate-pulse';\r\n    if (progress >= 76) return 'bg-gradient-to-r from-blue-400 to-blue-600';\r\n    if (progress >= 51) return 'bg-gradient-to-r from-yellow-400 to-yellow-600';\r\n    if (progress >= 26) return 'bg-gradient-to-r from-orange-400 to-orange-600';\r\n    return 'bg-gradient-to-r from-red-400 to-red-600';\r\n  };\r\n\r\n  const handleChecklistToggle = (documentId, itemIndex) => {\r\n    const sd = strategicDirectives.find(d => d.id === documentId);\r\n    if (sd && sd.checklist && sd.checklist[itemIndex]) {\r\n      onUpdateChecklist(documentId, itemIndex, !sd.checklist[itemIndex].checked);\r\n    }\r\n  };\r\n\r\n  const handleReorder = async (sdId, direction) => {\r\n    setReorderingId(sdId);\r\n\r\n    try {\r\n      const response = await fetch(`/api/strategic-directives/${sdId}/reorder`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ direction })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to reorder');\r\n      }\r\n\r\n      // Refresh the directives list to get updated order\r\n      if (onRefresh) {\r\n        await onRefresh();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error reordering strategic directive:', error);\r\n    } finally {\r\n      setReorderingId(null);\r\n    }\r\n  };\r\n\r\n  const viewDetail = (sd) => {\r\n    // Navigation guard: Validate SD before navigating\r\n    if (!sd || !sd.id) {\r\n      console.error('Invalid SD for navigation:', sd);\r\n      return;\r\n    }\r\n\r\n    // Navigate to detail URL instead of just changing state\r\n    try {\r\n      navigate(`/strategic-directives/${sd.id}`);\r\n    } catch (error) {\r\n      console.error('Navigation error:', error);\r\n      // Fallback: Stay on current page\r\n    }\r\n  };\r\n\r\n  if (viewMode === 'detail' && selectedSD) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <button\r\n          onClick={() => navigate('/strategic-directives')}\r\n          className=\"mb-4 text-primary-600 hover:text-primary-700 flex items-center\"\r\n        >\r\n          <ChevronRight className=\"w-4 h-4 mr-1\" />\r\n          Back to List\r\n        </button>\r\n        \r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\r\n          {/* SD Code */}\r\n          <div className=\"text-primary-600 dark:text-primary-400 font-mono text-lg font-semibold mb-2\">\r\n            {selectedSD.id}\r\n          </div>\r\n\r\n          {/* Title */}\r\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">\r\n            {selectedSD.title || 'Untitled'}\r\n          </h1>\r\n          \r\n          {/* Metadata */}\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n            {selectedSD.metadata && Object.entries(selectedSD.metadata).map(([key, value]) => (\r\n              <div key={key} className=\"bg-gray-50 dark:bg-gray-700 p-3 rounded\">\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">{key}</p>\r\n                <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n                  {typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value)}\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Full Content - No Truncation */}\r\n          <div className=\"prose prose-lg dark:prose-invert max-w-none mb-6\">\r\n            <ReactMarkdown>{selectedSD.content || 'No content available'}</ReactMarkdown>\r\n          </div>\r\n\r\n          {/* Interactive Checklist */}\r\n          {selectedSD.checklist && selectedSD.checklist.length > 0 && (\r\n            <div className=\"border-t pt-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold mb-4\">Requirements Checklist</h3>\r\n              <div className=\"space-y-2\">\r\n                {selectedSD.checklist.map((item, index) => (\r\n                  <label\r\n                    key={index}\r\n                    className=\"flex items-start p-3 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer\"\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={item.checked}\r\n                      onChange={() => handleChecklistToggle(selectedSD.id, index)}\r\n                      className=\"mt-1 mr-3 w-5 h-5 text-primary-600 rounded focus:ring-primary-500\"\r\n                    />\r\n                    <span className={`flex-1 ${item.checked ? 'line-through text-gray-500' : ''}`}>\r\n                      {item.text}\r\n                    </span>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Associated PRDs */}\r\n          {selectedSD.prds && selectedSD.prds.length > 0 && (\r\n            <div className=\"border-t pt-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold mb-4 flex items-center\">\r\n                <FileText className=\"w-5 h-5 mr-2 text-blue-600\" />\r\n                Product Requirements Documents ({selectedSD.prds.length})\r\n              </h3>\r\n              <div className=\"space-y-4\">\r\n                {selectedSD.prds.map((prd) => (\r\n                  <div key={prd.id} className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4\">\r\n                    <div className=\"flex items-start justify-between mb-3\">\r\n                      <div className=\"flex-1\">\r\n                        <h4 className=\"font-semibold text-blue-900 dark:text-blue-100\">\r\n                          {prd.title}\r\n                        </h4>\r\n                        <p className=\"text-sm text-blue-700 dark:text-blue-300 mt-1\">\r\n                          ID: {prd.id}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                          prd.status === 'approved' ? 'bg-green-100 text-green-800' :\r\n                          prd.status === 'in_progress' ? 'bg-blue-100 text-blue-800' :\r\n                          'bg-gray-100 text-gray-800'\r\n                        }`}>\r\n                          {prd.status}\r\n                        </span>\r\n                        <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                          prd.priority === 'high' ? 'bg-red-100 text-red-800' :\r\n                          prd.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :\r\n                          'bg-green-100 text-green-800'\r\n                        }`}>\r\n                          {prd.priority}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <p className=\"text-sm text-blue-700 dark:text-blue-300\">\r\n                          <strong>Phase:</strong> {prd.phase}\r\n                        </p>\r\n                        <p className=\"text-sm text-blue-700 dark:text-blue-300\">\r\n                          <strong>Progress:</strong> {prd.progress}%\r\n                        </p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-sm text-blue-700 dark:text-blue-300\">\r\n                          <strong>Created:</strong> {new Date(prd.createdAt).toLocaleDateString()}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800\">\r\n                      <button\r\n                        onClick={() => navigate(`/prds/${prd.id}`)}\r\n                        className=\"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center\"\r\n                      >\r\n                        View Full PRD <ChevronRight className=\"w-4 h-4 ml-1\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Associated EES Items */}\r\n          {selectedSD.executionSequences && selectedSD.executionSequences.length > 0 && (\r\n            <div className=\"border-t pt-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold mb-4 flex items-center\">\r\n                <Target className=\"w-5 h-5 mr-2 text-green-600\" />\r\n                Execution Sequence Steps ({selectedSD.executionSequences.length})\r\n              </h3>\r\n              <div className=\"space-y-3\">\r\n                {selectedSD.executionSequences.map((ees) => (\r\n                  <div key={ees.id} className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex items-start space-x-3 flex-1\">\r\n                        <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${\r\n                          ees.status === 'completed' ? 'bg-green-500 text-white' :\r\n                          ees.status === 'in_progress' ? 'bg-blue-500 text-white' :\r\n                          'bg-gray-300 text-gray-600'\r\n                        }`}>\r\n                          {ees.sequenceNumber}\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"font-medium text-green-900 dark:text-green-100\">\r\n                            {ees.description}\r\n                          </p>\r\n                          <div className=\"mt-2 flex items-center space-x-4 text-sm text-green-700 dark:text-green-300\">\r\n                            <span>\r\n                              <strong>Executor:</strong> {ees.executorRole}\r\n                            </span>\r\n                            {ees.completedAt && (\r\n                              <span>\r\n                                <strong>Completed:</strong> {new Date(ees.completedAt).toLocaleDateString()}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                        ees.status === 'completed' ? 'bg-green-100 text-green-800' :\r\n                        ees.status === 'in_progress' ? 'bg-blue-100 text-blue-800' :\r\n                        'bg-gray-100 text-gray-800'\r\n                      }`}>\r\n                        {ees.status}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If in detail mode but no selectedSD yet, show loading\r\n  if (viewMode === 'detail' && !selectedSD) {\r\n    return (\r\n      <div className=\"p-6 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600 dark:text-gray-400\">Loading strategic directive...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Filter directives based on selected status, search query, and priority\r\n  const filteredDirectives = strategicDirectives.filter(sd => {\r\n    // Status filter\r\n    let statusMatch = true;\r\n    if (statusFilter !== 'all') {\r\n      if (statusFilter === 'active_draft') {\r\n        statusMatch = sd.status?.toLowerCase() === 'active' || sd.status?.toLowerCase() === 'draft';\r\n      } else if (statusFilter === 'active') {\r\n        statusMatch = sd.status?.toLowerCase() === 'active';\r\n      } else if (statusFilter === 'draft') {\r\n        statusMatch = sd.status?.toLowerCase() === 'draft';\r\n      } else if (statusFilter === 'superseded') {\r\n        statusMatch = sd.status?.toLowerCase() === 'superseded';\r\n      } else if (statusFilter === 'completed') {\r\n        statusMatch = sd.status?.toLowerCase() === 'completed';\r\n      }\r\n    }\r\n    \r\n    // Search filter\r\n    let searchMatch = true;\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase();\r\n      searchMatch = \r\n        sd.id?.toLowerCase().includes(query) ||\r\n        sd.title?.toLowerCase().includes(query) ||\r\n        sd.description?.toLowerCase().includes(query);\r\n    }\r\n    \r\n    // Priority filter\r\n    let priorityMatch = true;\r\n    if (priorityFilter !== 'all') {\r\n      priorityMatch = sd.priority?.toLowerCase() === priorityFilter.toLowerCase();\r\n    }\r\n\r\n    // Target Application filter\r\n    let targetAppMatch = true;\r\n    if (targetAppFilter !== 'all') {\r\n      if (targetAppFilter === 'ehg_engineer') {\r\n        targetAppMatch = sd.target_application === 'EHG_ENGINEER';\r\n      } else if (targetAppFilter === 'ehg') {\r\n        targetAppMatch = sd.target_application === 'EHG' || !sd.target_application;\r\n      }\r\n    }\r\n\r\n    return statusMatch && searchMatch && priorityMatch && targetAppMatch;\r\n  });\r\n  \r\n  // Sort directives by execution_order (set by WSJF scoring)\r\n  const sortedDirectives = [...filteredDirectives].sort((a, b) => {\r\n    // Primary sort by execution_order if it exists\r\n    if (a.execution_order !== undefined && b.execution_order !== undefined) {\r\n      return a.execution_order - b.execution_order;\r\n    }\r\n    // If only one has execution_order, put it first\r\n    if (a.execution_order !== undefined) return -1;\r\n    if (b.execution_order !== undefined) return 1;\r\n\r\n    // Secondary sort by sequence_rank if it exists\r\n    if (a.sequence_rank !== undefined && b.sequence_rank !== undefined) {\r\n      return a.sequence_rank - b.sequence_rank;\r\n    }\r\n    if (a.sequence_rank !== undefined) return -1;\r\n    if (b.sequence_rank !== undefined) return 1;\r\n\r\n    // Tertiary fallback to ID-based sorting\r\n    const getNumericId = (id) => {\r\n      if (!id) return 999999;\r\n      const match = id.match(/SD-(\\d+)/);\r\n      return match ? parseInt(match[1], 10) : 999999;\r\n    };\r\n\r\n    const aNum = getNumericId(a.id);\r\n    const bNum = getNumericId(b.id);\r\n\r\n    return aNum - bNum;\r\n  });\r\n\r\n  const getFilterLabel = () => {\r\n    switch (statusFilter) {\r\n      case 'active_draft': return 'Active & Draft';\r\n      case 'active': return 'Active Only';\r\n      case 'draft': return 'Draft Only';\r\n      case 'superseded': return 'Superseded Only';\r\n      case 'completed': return 'Completed Only';\r\n      case 'all': return 'All Directives';\r\n      default: return 'Active & Draft';\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    if (status?.toLowerCase() === 'completed') {\r\n      return (\r\n        <span className=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700 dark:bg-green-700 dark:text-green-300 transition-all duration-200 hover:scale-105\">\r\n          <CheckSquare className=\"w-3 h-3 mr-1\" />\r\n          Completed\r\n        </span>\r\n      );\r\n    } else if (status?.toLowerCase() === 'draft') {\r\n      return (\r\n        <span className=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 transition-all duration-200 hover:scale-105\">\r\n          <Edit3 className=\"w-3 h-3 mr-1\" />\r\n          Draft\r\n        </span>\r\n      );\r\n    } else if (status?.toLowerCase() === 'superseded') {\r\n      return (\r\n        <span className=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 transition-all duration-200 hover:scale-105\">\r\n          <Archive className=\"w-3 h-3 mr-1\" />\r\n          Superseded\r\n        </span>\r\n      );\r\n    }\r\n    return (\r\n      <span className=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 transition-all duration-200 hover:scale-105\">\r\n        <Zap className=\"w-3 h-3 mr-1 animate-pulse\" />\r\n        Active\r\n      </span>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={isCompact ? 'p-3' : 'p-6'}>\r\n      {/* SDAssistant removed - now navigating to DirectiveLab */}\r\n      \r\n      <div className=\"space-y-4 mb-6\">\r\n        {/* Page Header Section */}\r\n        <div className=\"flex items-start justify-between\">\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Sparkles className=\"w-6 h-6 text-primary-500 animate-pulse\" />\r\n              <h1 className={`${isCompact ? 'text-2xl' : 'text-3xl'} font-bold text-gray-900 dark:text-white`}>\r\n                Strategic Directives\r\n              </h1>\r\n            </div>\r\n            <div className=\"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400\">\r\n              <span>\r\n                Showing {filteredDirectives.length} of {strategicDirectives.length} directives\r\n              </span>\r\n              {filteredDirectives.filter(sd => sd.rolled_triage).length > 0 && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"w-1 h-1 bg-gray-400 rounded-full\"></span>\r\n                  <span className=\"font-medium\">\r\n                    {filteredDirectives.filter(sd => sd.rolled_triage === 'High').length}H /\r\n                    {filteredDirectives.filter(sd => sd.rolled_triage === 'Medium').length}M /\r\n                    {filteredDirectives.filter(sd => sd.rolled_triage === 'Low').length}L /\r\n                    {filteredDirectives.filter(sd => sd.rolled_triage === 'Future').length}F\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <SmartRefreshButton onRefresh={onRefresh} className={isCompact ? 'p-1.5' : 'p-2'} />\r\n            <button\r\n              onClick={() => navigate('/directive-lab')}\r\n              className={`flex items-center gap-2 ${isCompact ? 'px-3 py-1.5 text-sm' : 'px-4 py-2'} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`}\r\n            >\r\n              <Plus className={`${isCompact ? 'w-3.5 h-3.5' : 'w-4 h-4'}`} />\r\n              New Directive\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Bar Section */}\r\n        <div className=\"w-full\">\r\n          {(() => {\r\n            const currentSDData = strategicDirectives.find(sd => sd.id === currentSD);\r\n            const isCurrentSDCompleted = currentSDData?.status?.toLowerCase() === 'completed';\r\n\r\n            if (currentSD && !isCurrentSDCompleted) {\r\n              // Show active work status (purple)\r\n              return (\r\n                <div className=\"w-full p-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg flex items-center transition-all duration-200\">\r\n                  <Zap className=\"w-4 h-4 mr-2 text-purple-600 dark:text-purple-400 animate-pulse\" />\r\n                  <span className=\"text-purple-700 dark:text-purple-300 font-medium\">\r\n                    Currently Working On: {currentSDData?.title || currentSD}\r\n                  </span>\r\n                </div>\r\n              );\r\n            } else {\r\n              // Show \"select new directive\" status (green)\r\n              return (\r\n                <div className=\"w-full p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg flex items-center transition-all duration-200\">\r\n                  <Target className=\"w-4 h-4 mr-2 text-green-600 dark:text-green-400\" />\r\n                  <span className=\"text-green-700 dark:text-green-300 font-medium\">\r\n                    Select a new strategic directive to work on\r\n                  </span>\r\n                </div>\r\n              );\r\n            }\r\n          })()}\r\n        </div>\r\n\r\n        {/* Search and Filter Controls Section */}\r\n        <div className=\"flex flex-col lg:flex-row gap-4 items-stretch lg:items-center\">\r\n          {/* Search Input - Full width on mobile, flex-1 on desktop */}\r\n          <div className=\"flex-1 relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search strategic directives...\"\r\n              className=\"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n            />\r\n            {searchQuery && (\r\n              <button\r\n                onClick={() => setSearchQuery('')}\r\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n              >\r\n                <X className=\"w-4 h-4\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Filter Controls Group */}\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            {/* Status Filter Dropdown */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => setShowFilterDropdown(!showFilterDropdown)}\r\n                className={`flex items-center gap-2 ${isCompact ? 'px-3 py-1.5 text-sm' : 'px-4 py-2'} bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors`}\r\n              >\r\n                <Filter className={`${isCompact ? 'w-3.5 h-3.5' : 'w-4 h-4'}`} />\r\n                {getFilterLabel()}\r\n                <ChevronDown className={`${isCompact ? 'w-3.5 h-3.5' : 'w-4 h-4'}`} />\r\n              </button>\r\n\r\n              {showFilterDropdown && (\r\n                <div className=\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50\">\r\n                  <div className=\"py-1\">\r\n                    <button\r\n                      onClick={() => {\r\n                        setStatusFilter('active_draft');\r\n                        setShowFilterDropdown(false);\r\n                      }}\r\n                      className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\r\n                        statusFilter === 'active_draft' ? 'bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400' : 'text-gray-700 dark:text-gray-200'\r\n                      }`}\r\n                    >\r\n                      <span className=\"flex items-center\">\r\n                        <Activity className=\"w-4 h-4 mr-2\" />\r\n                        Active & Draft\r\n                      </span>\r\n                      {statusFilter === 'active_draft' && <CheckSquare className=\"w-4 h-4\" />}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setStatusFilter('all');\r\n                        setShowFilterDropdown(false);\r\n                      }}\r\n                      className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\r\n                        statusFilter === 'all' ? 'bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400' : 'text-gray-700 dark:text-gray-200'\r\n                      }`}\r\n                    >\r\n                      <span className=\"flex items-center\">\r\n                        <FileText className=\"w-4 h-4 mr-2\" />\r\n                        All Directives\r\n                      </span>\r\n                      {statusFilter === 'all' && <CheckSquare className=\"w-4 h-4\" />}\r\n                    </button>\r\n                    <div className=\"border-t border-gray-200 dark:border-gray-700 my-1\"></div>\r\n                    <button\r\n                      onClick={() => {\r\n                        setStatusFilter('active');\r\n                        setShowFilterDropdown(false);\r\n                      }}\r\n                      className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\r\n                        statusFilter === 'active' ? 'bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400' : 'text-gray-700 dark:text-gray-200'\r\n                      }`}\r\n                    >\r\n                      <span className=\"flex items-center\">\r\n                        <Activity className=\"w-4 h-4 mr-2\" />\r\n                        Active Only\r\n                      </span>\r\n                      {statusFilter === 'active' && <CheckSquare className=\"w-4 h-4\" />}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setStatusFilter('draft');\r\n                        setShowFilterDropdown(false);\r\n                      }}\r\n                      className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\r\n                        statusFilter === 'draft' ? 'bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400' : 'text-gray-700 dark:text-gray-200'\r\n                      }`}\r\n                    >\r\n                      <span className=\"flex items-center\">\r\n                        <Edit3 className=\"w-4 h-4 mr-2\" />\r\n                        Draft Only\r\n                      </span>\r\n                      {statusFilter === 'draft' && <CheckSquare className=\"w-4 h-4\" />}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setStatusFilter('superseded');\r\n                        setShowFilterDropdown(false);\r\n                      }}\r\n                      className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\r\n                        statusFilter === 'superseded' ? 'bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400' : 'text-gray-700 dark:text-gray-200'\r\n                      }`}\r\n                    >\r\n                      <span className=\"flex items-center\">\r\n                        <Archive className=\"w-4 h-4 mr-2\" />\r\n                        Superseded Only\r\n                      </span>\r\n                      {statusFilter === 'superseded' && <CheckSquare className=\"w-4 h-4\" />}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setStatusFilter('completed');\r\n                        setShowFilterDropdown(false);\r\n                      }}\r\n                      className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${\r\n                        statusFilter === 'completed' ? 'bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400' : 'text-gray-700 dark:text-gray-200'\r\n                      }`}\r\n                    >\r\n                      <span className=\"flex items-center\">\r\n                        <CheckSquare className=\"w-4 h-4 mr-2\" />\r\n                        Completed Only\r\n                      </span>\r\n                      {statusFilter === 'completed' && <CheckSquare className=\"w-4 h-4\" />}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Priority Filter Pills */}\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">Priority:</span>\r\n              {['all', 'critical', 'high', 'medium', 'low'].map((priority) => (\r\n                <button\r\n                  key={priority}\r\n                  onClick={() => setPriorityFilter(priority)}\r\n                  className={`px-2 py-1 text-xs rounded-full transition-all duration-200 ${\r\n                    priorityFilter === priority\r\n                      ? priority === 'critical' ? 'bg-red-500 text-white' :\r\n                        priority === 'high' ? 'bg-orange-500 text-white' :\r\n                        priority === 'medium' ? 'bg-yellow-500 text-white' :\r\n                        priority === 'low' ? 'bg-gray-500 text-white' :\r\n                        'bg-primary-500 text-white'\r\n                      : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n                  }`}\r\n                >\r\n                  {priority.charAt(0).toUpperCase() + priority.slice(1)}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Target Application Filter */}\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">Target:</span>\r\n              {[\r\n                { value: 'all', label: 'All', icon: '📱' },\r\n                { value: 'ehg_engineer', label: 'EHG_Engineer', icon: '🛠️' },\r\n                { value: 'ehg', label: 'EHG', icon: '🚀' }\r\n              ].map((option) => (\r\n                <button\r\n                  key={option.value}\r\n                  onClick={() => setTargetAppFilter(option.value)}\r\n                  className={`px-2 py-1 text-xs rounded-full transition-all duration-200 flex items-center gap-1 ${\r\n                    targetAppFilter === option.value\r\n                      ? option.value === 'ehg_engineer'\r\n                        ? 'bg-purple-500 text-white'\r\n                        : option.value === 'ehg'\r\n                        ? 'bg-blue-500 text-white'\r\n                        : 'bg-primary-500 text-white'\r\n                      : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n                  }`}\r\n                  title={\r\n                    option.value === 'ehg_engineer'\r\n                      ? 'LEO Protocol development platform'\r\n                      : option.value === 'ehg'\r\n                      ? 'Business application features'\r\n                      : 'Show all strategic directives'\r\n                  }\r\n                >\r\n                  <span>{option.icon}</span>\r\n                  {option.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Clear Filters Button */}\r\n            {hasActiveFilters && (\r\n              <button\r\n                onClick={clearFilters}\r\n                className=\"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full hover:bg-red-200 dark:hover:bg-red-900/50 transition-all duration-200 flex items-center gap-1\"\r\n              >\r\n                <X className=\"w-3 h-3\" />\r\n                Clear Filters\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {filteredDirectives.length === 0 ? (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center\">\r\n          <FileText className=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\r\n          <p className=\"text-gray-500 dark:text-gray-400\">\r\n            {strategicDirectives.length === 0 \r\n              ? 'No strategic directives found'\r\n              : `No ${statusFilter === 'all' ? '' : statusFilter} directives found`}\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {sortedDirectives.map((sd) => (\r\n            <div\r\n              key={sd.id}\r\n              className={`bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${getPriorityBorderColor(sd.priority)}`}\r\n            >\r\n              <div className={`${isCompact ? 'p-3' : 'p-6'} relative group`}>\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center\">\r\n                      {/* Reorder Control Zone - Enhanced Visibility */}\r\n                      <div className=\"flex items-center mr-3\">\r\n                        {/* Grip Handle */}\r\n                        <div className=\"text-gray-400 dark:text-gray-500 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-grab active:cursor-grabbing\">\r\n                          <GripVertical className=\"w-5 h-5\" />\r\n                        </div>\r\n\r\n                        {/* Reorder Buttons - Always Visible with Enhanced Styling */}\r\n                        <div className=\"flex flex-col gap-1 bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-1\">\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              handleReorder(sd.id, 'up');\r\n                            }}\r\n                            disabled={sortedDirectives.indexOf(sd) === 0 || reorderingId === sd.id}\r\n                            className={`p-2 rounded-md transition-all duration-200 ${\r\n                              sortedDirectives.indexOf(sd) === 0 || reorderingId === sd.id\r\n                                ? 'opacity-40 cursor-not-allowed bg-gray-100 dark:bg-gray-800'\r\n                                : 'bg-white dark:bg-gray-700 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:shadow-md border border-transparent hover:border-primary-200 dark:hover:border-primary-700'\r\n                            }`}\r\n                            aria-label=\"Move up in priority\"\r\n                            title=\"Move up\"\r\n                          >\r\n                            <ChevronUp className={`w-5 h-5 ${\r\n                              sortedDirectives.indexOf(sd) === 0 || reorderingId === sd.id\r\n                                ? 'text-gray-400 dark:text-gray-600'\r\n                                : 'text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400'\r\n                            }`} />\r\n                          </button>\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              handleReorder(sd.id, 'down');\r\n                            }}\r\n                            disabled={sortedDirectives.indexOf(sd) === sortedDirectives.length - 1 || reorderingId === sd.id}\r\n                            className={`p-2 rounded-md transition-all duration-200 ${\r\n                              sortedDirectives.indexOf(sd) === sortedDirectives.length - 1 || reorderingId === sd.id\r\n                                ? 'opacity-40 cursor-not-allowed bg-gray-100 dark:bg-gray-800'\r\n                                : 'bg-white dark:bg-gray-700 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:shadow-md border border-transparent hover:border-primary-200 dark:hover:border-primary-700'\r\n                            }`}\r\n                            aria-label=\"Move down in priority\"\r\n                            title=\"Move down\"\r\n                          >\r\n                            <ChevronDown className={`w-5 h-5 ${\r\n                              sortedDirectives.indexOf(sd) === sortedDirectives.length - 1 || reorderingId === sd.id\r\n                                ? 'text-gray-400 dark:text-gray-600'\r\n                                : 'text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400'\r\n                            }`} />\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Expand Button */}\r\n                      <button\r\n                        onClick={() => toggleExpand(sd.id)}\r\n                        className=\"mr-3 p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/20 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 transform hover:scale-110\"\r\n                        aria-label={expandedSD === sd.id ? 'Collapse details' : 'Expand details'}\r\n                      >\r\n                        <ChevronRight\r\n                          className={`w-5 h-5 transition-transform duration-200 ease-in-out ${\r\n                            expandedSD === sd.id ? 'rotate-90' : ''\r\n                          }`}\r\n                        />\r\n                      </button>\r\n\r\n                      {/* Title Section */}\r\n                      <div className=\"flex-1\">\r\n                        {/* SD Code Line */}\r\n                        <div className=\"flex items-center mb-1\">\r\n                          {/* Execution Order Badge - Enhanced */}\r\n                          {sd.execution_order && (\r\n                            <span className=\"inline-flex items-center mr-2\">\r\n                              <span className=\"text-sm font-bold px-2.5 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-md shadow-md\" title={`Execution order (WSJF Score: ${sd.metadata?.wsjf_score || 'N/A'})`}>\r\n                                #{sd.execution_order}\r\n                              </span>\r\n                            </span>\r\n                          )}\r\n\r\n                          {/* Loading state during reorder */}\r\n                          {reorderingId === sd.id && (\r\n                            <span className=\"inline-flex items-center mr-2\">\r\n                              <span className=\"px-2.5 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 rounded-md text-sm font-medium animate-pulse shadow-sm\">\r\n                                <Loader2 className=\"w-4 h-4 inline mr-1 animate-spin\" />\r\n                                Updating...\r\n                              </span>\r\n                            </span>\r\n                          )}\r\n                          <span className=\"inline-flex items-center group\">\r\n                            <span className=\"text-primary-600 dark:text-primary-400 font-mono text-sm font-semibold\">{sd.id}</span>\r\n                            <button\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                copyToClipboard(sd.id);\r\n                              }}\r\n                              className=\"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-1\"\r\n                              title=\"Copy ID\"\r\n                            >\r\n                              {copiedId === sd.id ? (\r\n                                <CheckSquare className=\"w-3 h-3 text-green-500\" />\r\n                              ) : (\r\n                                <Copy className=\"w-3 h-3 text-gray-500\" />\r\n                              )}\r\n                            </button>\r\n                          </span>\r\n                        </div>\r\n\r\n                        {/* Title Line */}\r\n                        <h2 className={`${isCompact ? 'text-base' : 'text-xl'} font-semibold text-gray-900 dark:text-white ${isCompact ? 'line-clamp-1' : ''}`}>\r\n                          {sd.title || 'Untitled'}\r\n                        </h2>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Keep only metadata badges on left side - all other attributes moved to right */}\r\n                    {(sd.metadata?.Owner || sd.metadata?.Date) && (\r\n                      <div className={`${isCompact ? 'mt-2 gap-1' : 'mt-3 gap-2'} flex flex-wrap items-center`}>\r\n                        {sd.metadata.Owner && (\r\n                          <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded flex items-center\">\r\n                            <User className=\"w-3 h-3 mr-1\" />\r\n                            {sd.metadata.Owner}\r\n                          </span>\r\n                        )}\r\n                        {sd.metadata.Date && (\r\n                          <span className=\"px-2 py-1 text-xs bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded flex items-center\">\r\n                            <Calendar className=\"w-3 h-3 mr-1\" />\r\n                            {sd.metadata.Date}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Backlog Summary Section */}\r\n                    {sd.total_items && sd.total_items > 0 && (\r\n                      <div className={`${isCompact ? 'mt-2' : 'mt-3'} border-t border-gray-200 dark:border-gray-700 pt-3`}>\r\n                        <button\r\n                          onClick={() => toggleSummaryExpansion(sd.id)}\r\n                          className=\"flex items-center text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200\"\r\n                        >\r\n                          <MessageSquare className=\"w-4 h-4 mr-2\" />\r\n                          {expandedSummaries[sd.id] ? 'Hide' : 'Show'} backlog summary\r\n                          {loadingSummaries[sd.id] && <Loader2 className=\"w-4 h-4 ml-2 animate-spin\" />}\r\n                        </button>\r\n\r\n                        {expandedSummaries[sd.id] && (\r\n                          <div className=\"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700\">\r\n                            {loadingSummaries[sd.id] ? (\r\n                              <div className=\"flex items-center justify-center py-4\">\r\n                                <Loader2 className=\"w-6 h-6 animate-spin text-blue-500\" />\r\n                                <span className=\"ml-2 text-sm text-gray-600 dark:text-gray-400\">Generating AI summary...</span>\r\n                              </div>\r\n                            ) : backlogSummaries[sd.id] ? (\r\n                              <div>\r\n                                <p className=\"text-sm text-gray-700 dark:text-gray-300 leading-relaxed\">\r\n                                  {backlogSummaries[sd.id].summary}\r\n                                </p>\r\n                                <div className=\"mt-2 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400\">\r\n                                  <span>Based on {backlogSummaries[sd.id].item_count} backlog items</span>\r\n                                  <span className=\"flex items-center\">\r\n                                    {backlogSummaries[sd.id].ai_generated ? (\r\n                                      <>🤖 AI Generated</>\r\n                                    ) : (\r\n                                      <>📝 Text Summary</>\r\n                                    )}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                            ) : (\r\n                              <div className=\"text-sm text-gray-500 dark:text-gray-400 italic\">\r\n                                Failed to load summary. Please try again.\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Enhanced Progress Bar */}\r\n                    <div className={`${isCompact ? 'mt-2' : 'mt-4'}`}>\r\n                      <div className=\"flex justify-between items-center mb-1\">\r\n                        <span className={`${isCompact ? 'text-xs' : 'text-sm'} text-gray-600 dark:text-gray-400 flex items-center`}>\r\n                          Progress\r\n                          {sd.progressTrend && (\r\n                            sd.progressTrend > 0 ? \r\n                              <TrendingUp className=\"w-3 h-3 ml-1 text-green-500\" /> :\r\n                              <TrendingDown className=\"w-3 h-3 ml-1 text-red-500\" />\r\n                          )}\r\n                        </span>\r\n                        <span className={`${isCompact ? 'text-xs' : 'text-sm'} font-semibold flex items-center`}>\r\n                          {typeof sd.progress === 'object' ? sd.progress.total : sd.progress}%\r\n                          {(typeof sd.progress === 'object' ? sd.progress.total : sd.progress) === 100 && <Sparkles className=\"w-3 h-3 ml-1 text-green-500 animate-pulse\" />}\r\n                        </span>\r\n                      </div>\r\n                      <div className={`w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${isCompact ? 'h-2' : 'h-3'} shadow-inner`}>\r\n                        <div\r\n                          className={`${isCompact ? 'h-2' : 'h-3'} rounded-full transition-all duration-1000 ease-out ${getProgressBarGradient(typeof sd.progress === 'object' ? sd.progress.total : sd.progress)}`}\r\n                          style={{\r\n                            width: `${typeof sd.progress === 'object' ? sd.progress.total : sd.progress}%`,\r\n                            boxShadow: (typeof sd.progress === 'object' ? sd.progress.total : sd.progress) === 100 ? '0 0 10px rgba(34, 197, 94, 0.5)' : 'none'\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className={`${isCompact ? 'ml-2' : 'ml-4'} flex flex-col items-end ${isCompact ? 'space-y-1' : 'space-y-2'}`}>\r\n                    {/* Action Buttons */}\r\n                    <div className={`flex ${isCompact ? 'space-x-1' : 'space-x-2'}`}>\r\n                      <button\r\n                        onClick={() => viewDetail(sd)}\r\n                        className={`${isCompact ? 'px-2 py-1 text-xs' : 'px-4 py-2'} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg`}\r\n                      >\r\n                        {isCompact ? 'View' : 'View Full'}\r\n                      </button>\r\n                      {currentSD === sd.id && sd.status?.toLowerCase() !== 'completed' ? (\r\n                        <button\r\n                          disabled\r\n                          className={`${isCompact ? 'px-2 py-1 text-xs' : 'px-4 py-2'} bg-purple-600 text-white rounded flex items-center`}\r\n                          title=\"This is the SD currently being worked on\"\r\n                        >\r\n                          <Zap className={`${isCompact ? 'w-3 h-3' : 'w-4 h-4'} mr-1`} />\r\n                          {isCompact ? '⚡' : 'Working On'}\r\n                        </button>\r\n                      ) : sd.status?.toLowerCase() === 'completed' ? (\r\n                        <button\r\n                          disabled\r\n                          className={`${isCompact ? 'px-2 py-1 text-xs' : 'px-4 py-2'} bg-green-400 text-green-800 rounded flex items-center cursor-not-allowed`}\r\n                          title=\"Cannot set completed directives as active\"\r\n                        >\r\n                          <CheckSquare className={`${isCompact ? 'w-3 h-3' : 'w-4 h-4'} ${isCompact ? '' : 'mr-1'}`} />\r\n                          {!isCompact && 'Completed'}\r\n                        </button>\r\n                      ) : (\r\n                        <button\r\n                          onClick={() => onSetActiveSD && onSetActiveSD(sd.id)}\r\n                          className={`${isCompact ? 'px-2 py-1 text-xs' : 'px-4 py-2'} bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center`}\r\n                          title=\"Select this SD to work on\"\r\n                        >\r\n                          <Zap className={`${isCompact ? 'w-3 h-3' : 'w-4 h-4'} ${isCompact ? '' : 'mr-1'} animate-pulse`} />\r\n                          {!isCompact && 'Start Work'}\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Attributes Grid - Moved from left side */}\r\n                    <div className={`${isCompact ? 'mt-2' : 'mt-3'} grid ${isCompact ? 'grid-cols-2 gap-1' : 'grid-cols-2 gap-2'} w-full`}>\r\n                      {/* Target Application Badge */}\r\n                      {sd.target_application && (\r\n                        <span className={`${isCompact ? 'px-1.5 py-0.5 text-xs' : 'px-2 py-1 text-xs'} font-medium rounded text-center ${\r\n                          sd.target_application === 'EHG_Engineer'\r\n                            ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                            : 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\r\n                        }`}>\r\n                          {isCompact ? (sd.target_application === 'EHG_Engineer' ? 'Eng' : 'EHG') : sd.target_application}\r\n                        </span>\r\n                      )}\r\n\r\n                      {/* Status Badge with Edit */}\r\n                      <div className=\"flex items-center justify-center\">\r\n                        {editingStatus === sd.id ? (\r\n                          <select\r\n                            value={sd.status}\r\n                            onChange={(e) => handleStatusChange(sd, e.target.value)}\r\n                            onBlur={() => setEditingStatus(null)}\r\n                            className={`${isCompact ? 'text-xs px-1 py-0.5' : 'text-sm px-2 py-1'} rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500`}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                          >\r\n                            <option value=\"draft\">Draft</option>\r\n                            <option value=\"active\">Active</option>\r\n                            <option value=\"in_progress\">In Progress</option>\r\n                            <option value=\"completed\">Completed</option>\r\n                            <option value=\"archived\">Archived</option>\r\n                          </select>\r\n                        ) : (\r\n                          <div\r\n                            className=\"flex items-center cursor-pointer group\"\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              setEditingStatus(sd.id);\r\n                            }}\r\n                          >\r\n                            {getStatusBadge(sd.status)}\r\n                            <Edit2 className={`${isCompact ? 'w-2 h-2' : 'w-3 h-3'} ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300`} />\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Category */}\r\n                      {sd.category && (\r\n                        <span className={`${isCompact ? 'px-1.5 py-0.5 text-xs' : 'px-2 py-1 text-xs'} bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded text-center`}>\r\n                          {isCompact && sd.category.length > 8 ? sd.category.substring(0, 8) + '...' : sd.category}\r\n                        </span>\r\n                      )}\r\n\r\n                      {/* Priority/Metadata Priority */}\r\n                      {(sd.priority || sd.metadata?.Priority) && (\r\n                        <span className={`${isCompact ? 'px-1.5 py-0.5 text-xs' : 'px-2 py-1 text-xs'} rounded text-center ${\r\n                          (sd.priority || sd.metadata?.Priority) === 'High' ? 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400' :\r\n                          (sd.priority || sd.metadata?.Priority) === 'Medium' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400' :\r\n                          'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\r\n                        }`}>\r\n                          {isCompact ? (sd.priority || sd.metadata?.Priority)[0] : (sd.priority || sd.metadata?.Priority)}\r\n                        </span>\r\n                      )}\r\n\r\n                      {/* View Backlog button - moved from left side */}\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          navigate(`/backlog?sd=${sd.sd_id || sd.id}`);\r\n                        }}\r\n                        className={`col-span-2 flex items-center justify-center ${isCompact ? 'px-2 py-0.5 text-xs' : 'px-3 py-1 text-sm'} ${\r\n                          (sd.total_backlog_items > 0 || sd.total_items > 0 || sd.backlog_count > 0)\r\n                            ? 'bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800/40'\r\n                            : 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n                        } rounded transition-colors`}\r\n                      >\r\n                        <Package className={`${isCompact ? 'w-3 h-3' : 'w-4 h-4'} mr-1`} />\r\n                        Backlog\r\n                        <span className={`ml-1 ${isCompact ? 'px-1' : 'px-1.5'} py-0.5 ${\r\n                          (sd.total_backlog_items > 0 || sd.total_items > 0 || sd.backlog_count > 0)\r\n                            ? 'bg-indigo-200 dark:bg-indigo-800'\r\n                            : 'bg-gray-200 dark:bg-gray-600'\r\n                        } rounded text-xs font-bold`}>\r\n                          {sd.total_backlog_items || sd.total_items || sd.backlog_count || 0}\r\n                        </span>\r\n                      </button>\r\n\r\n                      {/* Rolled Triage */}\r\n                      {sd.rolled_triage && (\r\n                        <span className={`${isCompact ? 'px-1.5 py-0.5 text-xs' : 'px-2 py-1 text-xs'} font-medium rounded text-center ${\r\n                          sd.rolled_triage === 'High' ? 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400' :\r\n                          sd.rolled_triage === 'Medium' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400' :\r\n                          sd.rolled_triage === 'Low' ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400' :\r\n                          'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'\r\n                        }`}>\r\n                          {isCompact ? sd.rolled_triage[0] : `Triage: ${sd.rolled_triage}`}\r\n                        </span>\r\n                      )}\r\n\r\n                      {/* Must-Have Percentage */}\r\n                      {sd.must_have_pct !== null && sd.must_have_pct !== undefined && (\r\n                        <span className={`${isCompact ? 'px-1.5 py-0.5' : 'px-2 py-1'} text-xs bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded text-center`}>\r\n                          {sd.must_have_pct}%{!isCompact && ' Must-Have'}\r\n                        </span>\r\n                      )}\r\n\r\n                      {/* Checklist Progress */}\r\n                      {sd.checklist && sd.checklist.length > 0 && (\r\n                        <div className=\"col-span-2 text-sm text-gray-600 dark:text-gray-400 flex items-center justify-center\">\r\n                          <CheckSquare className=\"w-4 h-4 mr-1\" />\r\n                          {sd.checklist.filter(item => item.checked).length}/{sd.checklist.length}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Expanded Content */}\r\n                {expandedSD === sd.id && (\r\n                  <div className=\"mt-6 border-t pt-6\">\r\n                    {/* Backlog Items Summary */}\r\n                    {(sd.h_count > 0 || sd.m_count > 0 || sd.l_count > 0 || sd.future_count > 0) && (\r\n                      <div className=\"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                        <h3 className=\"text-lg font-semibold mb-3 flex items-center\">\r\n                          <FileText className=\"w-5 h-5 mr-2 text-blue-600\" />\r\n                          Backlog Items Summary\r\n                        </h3>\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3\">\r\n                          {sd.h_count > 0 && (\r\n                            <div className=\"text-center p-2 bg-red-100 dark:bg-red-900/20 rounded\">\r\n                              <p className=\"text-2xl font-bold text-red-700 dark:text-red-400\">{sd.h_count}</p>\r\n                              <p className=\"text-xs text-red-600 dark:text-red-300\">High Priority</p>\r\n                            </div>\r\n                          )}\r\n                          {sd.m_count > 0 && (\r\n                            <div className=\"text-center p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded\">\r\n                              <p className=\"text-2xl font-bold text-yellow-700 dark:text-yellow-400\">{sd.m_count}</p>\r\n                              <p className=\"text-xs text-yellow-600 dark:text-yellow-300\">Medium Priority</p>\r\n                            </div>\r\n                          )}\r\n                          {sd.l_count > 0 && (\r\n                            <div className=\"text-center p-2 bg-green-100 dark:bg-green-900/20 rounded\">\r\n                              <p className=\"text-2xl font-bold text-green-700 dark:text-green-400\">{sd.l_count}</p>\r\n                              <p className=\"text-xs text-green-600 dark:text-green-300\">Low Priority</p>\r\n                            </div>\r\n                          )}\r\n                          {sd.future_count > 0 && (\r\n                            <div className=\"text-center p-2 bg-gray-100 dark:bg-gray-600 rounded\">\r\n                              <p className=\"text-2xl font-bold text-gray-700 dark:text-gray-300\">{sd.future_count}</p>\r\n                              <p className=\"text-xs text-gray-600 dark:text-gray-400\">Future</p>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                          Total backlog items: {(sd.h_count || 0) + (sd.m_count || 0) + (sd.l_count || 0) + (sd.future_count || 0)}\r\n                          {sd.must_have_count > 0 && ` • Must-have: ${sd.must_have_count}`}\r\n                        </p>\r\n                        <button\r\n                          onClick={() => viewDetail(sd)}\r\n                          className=\"mt-3 text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium\"\r\n                        >\r\n                          View all backlog items →\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    {/* Checklist Preview */}\r\n                    {sd.checklist && sd.checklist.length > 0 && (\r\n                      <div className=\"mb-6\">\r\n                        <h3 className=\"text-lg font-semibold mb-3 flex items-center\">\r\n                          <Target className=\"w-5 h-5 mr-2\" />\r\n                          Requirements Checklist\r\n                        </h3>\r\n                        <div className=\"space-y-2\">\r\n                          {sd.checklist.slice(0, 5).map((item, index) => (\r\n                            <label\r\n                              key={index}\r\n                              className=\"flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer\"\r\n                            >\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                checked={item.checked}\r\n                                onChange={() => handleChecklistToggle(sd.id, index)}\r\n                                className=\"mr-3 w-4 h-4 text-primary-600 rounded\"\r\n                              />\r\n                              <span className={`${item.checked ? 'line-through text-gray-500' : ''}`}>\r\n                                {item.text}\r\n                              </span>\r\n                            </label>\r\n                          ))}\r\n                          {sd.checklist && sd.checklist.length > 5 && (\r\n                            <button\r\n                              onClick={() => viewDetail(sd)}\r\n                              className=\"text-primary-600 hover:text-primary-700 text-sm\"\r\n                            >\r\n                              View all {sd.checklist.length} items...\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Content Preview */}\r\n                    <div className=\"prose dark:prose-invert max-w-none\">\r\n                      <h3 className=\"text-lg font-semibold mb-3\">Content Preview</h3>\r\n                      <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded max-h-64 overflow-y-auto\">\r\n                        <ReactMarkdown>\r\n                          {sd.content.substring(0, 500) + (sd.content.length > 500 ? '...' : '')}\r\n                        </ReactMarkdown>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => viewDetail(sd)}\r\n                        className=\"mt-3 text-primary-600 hover:text-primary-700\"\r\n                      >\r\n                        Read full document →\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SDManager;"],"names":["Archive","createLucideIcon","GripVertical","PenLine","SDManager","strategicDirectives","onUpdateChecklist","onSetActiveSD","currentSD","isCompact","detailMode","onRefresh","onUpdateStatus","id","useParams","navigate","useNavigate","expandedSD","setExpandedSD","useState","viewMode","setViewMode","selectedSD","setSelectedSD","statusFilter","setStatusFilter","showFilterDropdown","setShowFilterDropdown","searchQuery","setSearchQuery","priorityFilter","setPriorityFilter","targetAppFilter","setTargetAppFilter","copiedId","setCopiedId","editingStatus","setEditingStatus","statusDropdownOpen","setStatusDropdownOpen","reorderingId","setReorderingId","backlogSummaries","setBacklogSummaries","expandedSummaries","setExpandedSummaries","loadingSummaries","setLoadingSummaries","useEffect","d","sd","toggleExpand","sdId","copyToClipboard","text","fetchBacklogSummary","prev","response","data","error","toggleSummaryExpansion","clearFilters","hasActiveFilters","getPriorityBorderColor","priority","getProgressBarGradient","progress","handleChecklistToggle","documentId","itemIndex","handleReorder","direction","viewDetail","jsxs","jsx","ChevronRight","key","value","ReactMarkdown","item","index","FileText","prd","Target","ees","filteredDirectives","statusMatch","_a","_b","_c","_d","_e","_f","searchMatch","query","_g","_h","_i","priorityMatch","_j","targetAppMatch","sortedDirectives","a","b","getNumericId","match","aNum","bNum","getFilterLabel","getStatusBadge","status","CheckSquare","Edit3","Zap","Sparkles","SmartRefreshButton","Plus","currentSDData","isCurrentSDCompleted","Search","X","Filter","ChevronDown","Activity","option","e","ChevronUp","Loader2","Copy","User","Calendar","MessageSquare","Fragment","TrendingUp","TrendingDown","Edit2","Package"],"mappings":"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","x_google_ignoreList":[0,1,2]}