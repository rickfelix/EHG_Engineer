var n1=Object.defineProperty;var s1=(e,t,r)=>t in e?n1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var zc=(e,t,r)=>s1(e,typeof t!="symbol"?t+"":t,r);function i1(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var _t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Bx={exports:{}},oc={},Vx={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ao=Symbol.for("react.element"),o1=Symbol.for("react.portal"),l1=Symbol.for("react.fragment"),c1=Symbol.for("react.strict_mode"),u1=Symbol.for("react.profiler"),d1=Symbol.for("react.provider"),h1=Symbol.for("react.context"),f1=Symbol.for("react.forward_ref"),m1=Symbol.for("react.suspense"),p1=Symbol.for("react.memo"),g1=Symbol.for("react.lazy"),Zm=Symbol.iterator;function x1(e){return e===null||typeof e!="object"?null:(e=Zm&&e[Zm]||e["@@iterator"],typeof e=="function"?e:null)}var Hx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qx=Object.assign,Wx={};function _i(e,t,r){this.props=e,this.context=t,this.refs=Wx,this.updater=r||Hx}_i.prototype.isReactComponent={};_i.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gx(){}Gx.prototype=_i.prototype;function qh(e,t,r){this.props=e,this.context=t,this.refs=Wx,this.updater=r||Hx}var Wh=qh.prototype=new Gx;Wh.constructor=qh;qx(Wh,_i.prototype);Wh.isPureReactComponent=!0;var ep=Array.isArray,Kx=Object.prototype.hasOwnProperty,Gh={current:null},Jx={key:!0,ref:!0,__self:!0,__source:!0};function Xx(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Kx.call(t,n)&&!Jx.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ao,type:e,key:i,ref:o,props:s,_owner:Gh.current}}function y1(e,t){return{$$typeof:ao,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kh(e){return typeof e=="object"&&e!==null&&e.$$typeof===ao}function v1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var tp=/\/+/g;function Uc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?v1(""+e.key):t.toString(36)}function tl(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ao:case o1:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Uc(o,0):n,ep(s)?(r="",e!=null&&(r=e.replace(tp,"$&/")+"/"),tl(s,t,r,"",function(u){return u})):s!=null&&(Kh(s)&&(s=y1(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tp,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",ep(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Uc(i,l);o+=tl(i,t,r,c,s)}else if(c=x1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Uc(i,l++),o+=tl(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _o(e,t,r){if(e==null)return e;var n=[],s=0;return tl(e,n,"","",function(i){return t.call(r,i,s++)}),n}function b1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Lt={current:null},rl={transition:null},w1={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:rl,ReactCurrentOwner:Gh};function Qx(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:_o,forEach:function(e,t,r){_o(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _o(e,function(){t++}),t},toArray:function(e){return _o(e,function(t){return t})||[]},only:function(e){if(!Kh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=_i;ve.Fragment=l1;ve.Profiler=u1;ve.PureComponent=qh;ve.StrictMode=c1;ve.Suspense=m1;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w1;ve.act=Qx;ve.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=qx({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Gh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Kx.call(t,c)&&!Jx.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ao,type:e.type,key:s,ref:i,props:n,_owner:o}};ve.createContext=function(e){return e={$$typeof:h1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:d1,_context:e},e.Consumer=e};ve.createElement=Xx;ve.createFactory=function(e){var t=Xx.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:f1,render:e}};ve.isValidElement=Kh;ve.lazy=function(e){return{$$typeof:g1,_payload:{_status:-1,_result:e},_init:b1}};ve.memo=function(e,t){return{$$typeof:p1,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=rl.transition;rl.transition={};try{e()}finally{rl.transition=t}};ve.unstable_act=Qx;ve.useCallback=function(e,t){return Lt.current.useCallback(e,t)};ve.useContext=function(e){return Lt.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return Lt.current.useDeferredValue(e)};ve.useEffect=function(e,t){return Lt.current.useEffect(e,t)};ve.useId=function(){return Lt.current.useId()};ve.useImperativeHandle=function(e,t,r){return Lt.current.useImperativeHandle(e,t,r)};ve.useInsertionEffect=function(e,t){return Lt.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return Lt.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return Lt.current.useMemo(e,t)};ve.useReducer=function(e,t,r){return Lt.current.useReducer(e,t,r)};ve.useRef=function(e){return Lt.current.useRef(e)};ve.useState=function(e){return Lt.current.useState(e)};ve.useSyncExternalStore=function(e,t,r){return Lt.current.useSyncExternalStore(e,t,r)};ve.useTransition=function(){return Lt.current.useTransition()};ve.version="18.3.1";Vx.exports=ve;var w=Vx.exports;const Vr=Hh(w),k1=i1({__proto__:null,default:Vr},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1=w,S1=Symbol.for("react.element"),N1=Symbol.for("react.fragment"),_1=Object.prototype.hasOwnProperty,C1=j1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E1={key:!0,ref:!0,__self:!0,__source:!0};function Yx(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)_1.call(t,n)&&!E1.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:S1,type:e,key:i,ref:o,props:s,_owner:C1.current}}oc.Fragment=N1;oc.jsx=Yx;oc.jsxs=Yx;Bx.exports=oc;var a=Bx.exports,rd={},Zx={exports:{}},ir={},ey={exports:{}},ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,B){var S=A.length;A.push(B);e:for(;0<S;){var U=S-1>>>1,re=A[U];if(0<s(re,B))A[U]=B,A[S]=re,S=U;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var B=A[0],S=A.pop();if(S!==B){A[0]=S;e:for(var U=0,re=A.length,_=re>>>1;U<_;){var Ne=2*(U+1)-1,tt=A[Ne],be=Ne+1,xt=A[be];if(0>s(tt,S))be<re&&0>s(xt,tt)?(A[U]=xt,A[be]=S,U=be):(A[U]=tt,A[Ne]=S,U=Ne);else if(be<re&&0>s(xt,S))A[U]=xt,A[be]=S,U=be;else break e}}return B}function s(A,B){var S=A.sortIndex-B.sortIndex;return S!==0?S:A.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(A){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=A)n(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function j(A){if(v=!1,p(A),!g)if(r(c)!==null)g=!0,V(E);else{var B=r(u);B!==null&&z(j,B.startTime-A)}}function E(A,B){g=!1,v&&(v=!1,y(T),T=-1),f=!0;var S=m;try{for(p(B),h=r(c);h!==null&&(!(h.expirationTime>B)||A&&!P());){var U=h.callback;if(typeof U=="function"){h.callback=null,m=h.priorityLevel;var re=U(h.expirationTime<=B);B=e.unstable_now(),typeof re=="function"?h.callback=re:h===r(c)&&n(c),p(B)}else n(c);h=r(c)}if(h!==null)var _=!0;else{var Ne=r(u);Ne!==null&&z(j,Ne.startTime-B),_=!1}return _}finally{h=null,m=S,f=!1}}var N=!1,C=null,T=-1,D=5,R=-1;function P(){return!(e.unstable_now()-R<D)}function L(){if(C!==null){var A=e.unstable_now();R=A;var B=!0;try{B=C(!0,A)}finally{B?J():(N=!1,C=null)}}else N=!1}var J;if(typeof x=="function")J=function(){x(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,M=I.port2;I.port1.onmessage=L,J=function(){M.postMessage(null)}}else J=function(){b(L,0)};function V(A){C=A,N||(N=!0,J())}function z(A,B){T=b(function(){A(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,V(E))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var S=m;m=B;try{return A()}finally{m=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,B){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var S=m;m=A;try{return B()}finally{m=S}},e.unstable_scheduleCallback=function(A,B,S){var U=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?U+S:U):S=U,A){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=S+re,A={id:d++,callback:B,priorityLevel:A,startTime:S,expirationTime:re,sortIndex:-1},S>U?(A.sortIndex=S,t(u,A),r(c)===null&&A===r(u)&&(v?(y(T),T=-1):v=!0,z(j,S-U))):(A.sortIndex=re,t(c,A),g||f||(g=!0,V(E))),A},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(A){var B=m;return function(){var S=m;m=B;try{return A.apply(this,arguments)}finally{m=S}}}})(ty);ey.exports=ty;var T1=ey.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=w,nr=T1;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ry=new Set,Aa={};function Ns(e,t){fi(e,t),fi(e+"Capture",t)}function fi(e,t){for(Aa[e]=t,e=0;e<t.length;e++)ry.add(t[e])}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nd=Object.prototype.hasOwnProperty,A1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rp={},np={};function I1(e){return nd.call(np,e)?!0:nd.call(rp,e)?!1:A1.test(e)?np[e]=!0:(rp[e]=!0,!1)}function R1(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function D1(e,t,r,n){if(t===null||typeof t>"u"||R1(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){gt[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];gt[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){gt[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){gt[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){gt[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){gt[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){gt[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){gt[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){gt[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jh=/[\-:]([a-z])/g;function Xh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jh,Xh);gt[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jh,Xh);gt[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jh,Xh);gt[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){gt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){gt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qh(e,t,r,n){var s=gt.hasOwnProperty(t)?gt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(D1(t,r,s,n)&&(r=null),n||s===null?I1(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var pn=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Co=Symbol.for("react.element"),Us=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),Yh=Symbol.for("react.strict_mode"),sd=Symbol.for("react.profiler"),ny=Symbol.for("react.provider"),sy=Symbol.for("react.context"),Zh=Symbol.for("react.forward_ref"),id=Symbol.for("react.suspense"),ad=Symbol.for("react.suspense_list"),ef=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),iy=Symbol.for("react.offscreen"),sp=Symbol.iterator;function Hi(e){return e===null||typeof e!="object"?null:(e=sp&&e[sp]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,Bc;function sa(e){if(Bc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Bc=t&&t[1]||""}return`
`+Bc+e}var Vc=!1;function Hc(e,t){if(!e||Vc)return"";Vc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?sa(e):""}function L1(e){switch(e.tag){case 5:return sa(e.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return e=Hc(e.type,!1),e;case 11:return e=Hc(e.type.render,!1),e;case 1:return e=Hc(e.type,!0),e;default:return""}}function od(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bs:return"Fragment";case Us:return"Portal";case sd:return"Profiler";case Yh:return"StrictMode";case id:return"Suspense";case ad:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sy:return(e.displayName||"Context")+".Consumer";case ny:return(e._context.displayName||"Context")+".Provider";case Zh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ef:return t=e.displayName||null,t!==null?t:od(e.type)||"Memo";case jn:t=e._payload,e=e._init;try{return od(e(t))}catch{}}return null}function O1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return od(t);case 8:return t===Yh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ay(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function M1(e){var t=ay(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Eo(e){e._valueTracker||(e._valueTracker=M1(e))}function oy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ay(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ld(e,t){var r=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ip(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Vn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ly(e,t){t=t.checked,t!=null&&Qh(e,"checked",t,!1)}function cd(e,t){ly(e,t);var r=Vn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ud(e,t.type,r):t.hasOwnProperty("defaultValue")&&ud(e,t.type,Vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ap(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ud(e,t,r){(t!=="number"||wl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ia=Array.isArray;function si(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Vn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function dd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function op(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(q(92));if(ia(r)){if(1<r.length)throw Error(q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vn(r)}}function cy(e,t){var r=Vn(t.value),n=Vn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function lp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var To,dy=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(To=To||document.createElement("div"),To.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=To.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ia(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ua={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$1=["Webkit","ms","Moz","O"];Object.keys(ua).forEach(function(e){$1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ua[t]=ua[e]})});function hy(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ua.hasOwnProperty(e)&&ua[e]?(""+t).trim():t+"px"}function fy(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=hy(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var F1=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fd(e,t){if(t){if(F1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function md(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pd=null;function tf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gd=null,ii=null,ai=null;function cp(e){if(e=co(e)){if(typeof gd!="function")throw Error(q(280));var t=e.stateNode;t&&(t=hc(t),gd(e.stateNode,e.type,t))}}function my(e){ii?ai?ai.push(e):ai=[e]:ii=e}function py(){if(ii){var e=ii,t=ai;if(ai=ii=null,cp(e),t)for(e=0;e<t.length;e++)cp(t[e])}}function gy(e,t){return e(t)}function xy(){}var qc=!1;function yy(e,t,r){if(qc)return e(t,r);qc=!0;try{return gy(e,t,r)}finally{qc=!1,(ii!==null||ai!==null)&&(xy(),py())}}function Ra(e,t){var r=e.stateNode;if(r===null)return null;var n=hc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(q(231,t,typeof r));return r}var xd=!1;if(ln)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){xd=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{xd=!1}function z1(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var da=!1,kl=null,jl=!1,yd=null,U1={onError:function(e){da=!0,kl=e}};function B1(e,t,r,n,s,i,o,l,c){da=!1,kl=null,z1.apply(U1,arguments)}function V1(e,t,r,n,s,i,o,l,c){if(B1.apply(this,arguments),da){if(da){var u=kl;da=!1,kl=null}else throw Error(q(198));jl||(jl=!0,yd=u)}}function _s(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function vy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function up(e){if(_s(e)!==e)throw Error(q(188))}function H1(e){var t=e.alternate;if(!t){if(t=_s(e),t===null)throw Error(q(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return up(s),e;if(i===n)return up(s),t;i=i.sibling}throw Error(q(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(q(189))}}if(r.alternate!==n)throw Error(q(190))}if(r.tag!==3)throw Error(q(188));return r.stateNode.current===r?e:t}function by(e){return e=H1(e),e!==null?wy(e):null}function wy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wy(e);if(t!==null)return t;e=e.sibling}return null}var ky=nr.unstable_scheduleCallback,dp=nr.unstable_cancelCallback,q1=nr.unstable_shouldYield,W1=nr.unstable_requestPaint,Je=nr.unstable_now,G1=nr.unstable_getCurrentPriorityLevel,rf=nr.unstable_ImmediatePriority,jy=nr.unstable_UserBlockingPriority,Sl=nr.unstable_NormalPriority,K1=nr.unstable_LowPriority,Sy=nr.unstable_IdlePriority,lc=null,Hr=null;function J1(e){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(lc,e,void 0,(e.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:Y1,X1=Math.log,Q1=Math.LN2;function Y1(e){return e>>>=0,e===0?32:31-(X1(e)/Q1|0)|0}var Po=64,Ao=4194304;function aa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Nl(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=aa(l):(i&=o,i!==0&&(n=aa(i)))}else o=r&~s,o!==0?n=aa(o):i!==0&&(n=aa(i));if(n===0)return 0;if(t!==0&&t!==n&&(t&s)===0&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Er(t),s=1<<r,n|=e[r],t&=~s;return n}function Z1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ej(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Er(i),l=1<<o,c=s[o];c===-1?((l&r)===0||(l&n)!==0)&&(s[o]=Z1(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function vd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ny(){var e=Po;return Po<<=1,(Po&4194240)===0&&(Po=64),e}function Wc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function oo(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Er(t),e[t]=r}function tj(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Er(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function nf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Er(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ee=0;function _y(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Cy,sf,Ey,Ty,Py,bd=!1,Io=[],Rn=null,Dn=null,Ln=null,Da=new Map,La=new Map,Nn=[],rj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hp(e,t){switch(e){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(t.pointerId)}}function Wi(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=co(t),t!==null&&sf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function nj(e,t,r,n,s){switch(t){case"focusin":return Rn=Wi(Rn,e,t,r,n,s),!0;case"dragenter":return Dn=Wi(Dn,e,t,r,n,s),!0;case"mouseover":return Ln=Wi(Ln,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Da.set(i,Wi(Da.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,La.set(i,Wi(La.get(i)||null,e,t,r,n,s)),!0}return!1}function Ay(e){var t=cs(e.target);if(t!==null){var r=_s(t);if(r!==null){if(t=r.tag,t===13){if(t=vy(r),t!==null){e.blockedOn=t,Py(e.priority,function(){Ey(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=wd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);pd=n,r.target.dispatchEvent(n),pd=null}else return t=co(r),t!==null&&sf(t),e.blockedOn=r,!1;t.shift()}return!0}function fp(e,t,r){nl(e)&&r.delete(t)}function sj(){bd=!1,Rn!==null&&nl(Rn)&&(Rn=null),Dn!==null&&nl(Dn)&&(Dn=null),Ln!==null&&nl(Ln)&&(Ln=null),Da.forEach(fp),La.forEach(fp)}function Gi(e,t){e.blockedOn===t&&(e.blockedOn=null,bd||(bd=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,sj)))}function Oa(e){function t(s){return Gi(s,e)}if(0<Io.length){Gi(Io[0],e);for(var r=1;r<Io.length;r++){var n=Io[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Rn!==null&&Gi(Rn,e),Dn!==null&&Gi(Dn,e),Ln!==null&&Gi(Ln,e),Da.forEach(t),La.forEach(t),r=0;r<Nn.length;r++)n=Nn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Nn.length&&(r=Nn[0],r.blockedOn===null);)Ay(r),r.blockedOn===null&&Nn.shift()}var oi=pn.ReactCurrentBatchConfig,_l=!0;function ij(e,t,r,n){var s=Ee,i=oi.transition;oi.transition=null;try{Ee=1,af(e,t,r,n)}finally{Ee=s,oi.transition=i}}function aj(e,t,r,n){var s=Ee,i=oi.transition;oi.transition=null;try{Ee=4,af(e,t,r,n)}finally{Ee=s,oi.transition=i}}function af(e,t,r,n){if(_l){var s=wd(e,t,r,n);if(s===null)ru(e,t,n,Cl,r),hp(e,n);else if(nj(s,e,t,r,n))n.stopPropagation();else if(hp(e,n),t&4&&-1<rj.indexOf(e)){for(;s!==null;){var i=co(s);if(i!==null&&Cy(i),i=wd(e,t,r,n),i===null&&ru(e,t,n,Cl,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ru(e,t,n,null,r)}}var Cl=null;function wd(e,t,r,n){if(Cl=null,e=tf(n),e=cs(e),e!==null)if(t=_s(e),t===null)e=null;else if(r=t.tag,r===13){if(e=vy(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Cl=e,null}function Iy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G1()){case rf:return 1;case jy:return 4;case Sl:case K1:return 16;case Sy:return 536870912;default:return 16}default:return 16}}var En=null,of=null,sl=null;function Ry(){if(sl)return sl;var e,t=of,r=t.length,n,s="value"in En?En.value:En.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return sl=s.slice(e,1<n?1-n:void 0)}function il(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ro(){return!0}function mp(){return!1}function ar(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ro:mp,this.isPropagationStopped=mp,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),t}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lf=ar(Ci),lo=Be({},Ci,{view:0,detail:0}),oj=ar(lo),Gc,Kc,Ki,cc=Be({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ki&&(Ki&&e.type==="mousemove"?(Gc=e.screenX-Ki.screenX,Kc=e.screenY-Ki.screenY):Kc=Gc=0,Ki=e),Gc)},movementY:function(e){return"movementY"in e?e.movementY:Kc}}),pp=ar(cc),lj=Be({},cc,{dataTransfer:0}),cj=ar(lj),uj=Be({},lo,{relatedTarget:0}),Jc=ar(uj),dj=Be({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),hj=ar(dj),fj=Be({},Ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mj=ar(fj),pj=Be({},Ci,{data:0}),gp=ar(pj),gj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yj[e])?!!t[e]:!1}function cf(){return vj}var bj=Be({},lo,{key:function(e){if(e.key){var t=gj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=il(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cf,charCode:function(e){return e.type==="keypress"?il(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?il(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wj=ar(bj),kj=Be({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xp=ar(kj),jj=Be({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cf}),Sj=ar(jj),Nj=Be({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),_j=ar(Nj),Cj=Be({},cc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ej=ar(Cj),Tj=[9,13,27,32],uf=ln&&"CompositionEvent"in window,ha=null;ln&&"documentMode"in document&&(ha=document.documentMode);var Pj=ln&&"TextEvent"in window&&!ha,Dy=ln&&(!uf||ha&&8<ha&&11>=ha),yp=" ",vp=!1;function Ly(e,t){switch(e){case"keyup":return Tj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vs=!1;function Aj(e,t){switch(e){case"compositionend":return Oy(t);case"keypress":return t.which!==32?null:(vp=!0,yp);case"textInput":return e=t.data,e===yp&&vp?null:e;default:return null}}function Ij(e,t){if(Vs)return e==="compositionend"||!uf&&Ly(e,t)?(e=Ry(),sl=of=En=null,Vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dy&&t.locale!=="ko"?null:t.data;default:return null}}var Rj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rj[e.type]:t==="textarea"}function My(e,t,r,n){my(n),t=El(t,"onChange"),0<t.length&&(r=new lf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var fa=null,Ma=null;function Dj(e){Ky(e,0)}function uc(e){var t=Ws(e);if(oy(t))return e}function Lj(e,t){if(e==="change")return t}var $y=!1;if(ln){var Xc;if(ln){var Qc="oninput"in document;if(!Qc){var wp=document.createElement("div");wp.setAttribute("oninput","return;"),Qc=typeof wp.oninput=="function"}Xc=Qc}else Xc=!1;$y=Xc&&(!document.documentMode||9<document.documentMode)}function kp(){fa&&(fa.detachEvent("onpropertychange",Fy),Ma=fa=null)}function Fy(e){if(e.propertyName==="value"&&uc(Ma)){var t=[];My(t,Ma,e,tf(e)),yy(Dj,t)}}function Oj(e,t,r){e==="focusin"?(kp(),fa=t,Ma=r,fa.attachEvent("onpropertychange",Fy)):e==="focusout"&&kp()}function Mj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uc(Ma)}function $j(e,t){if(e==="click")return uc(t)}function Fj(e,t){if(e==="input"||e==="change")return uc(t)}function zj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ar=typeof Object.is=="function"?Object.is:zj;function $a(e,t){if(Ar(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!nd.call(t,s)||!Ar(e[s],t[s]))return!1}return!0}function jp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sp(e,t){var r=jp(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jp(r)}}function zy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uy(){for(var e=window,t=wl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=wl(e.document)}return t}function df(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Uj(e){var t=Uy(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&zy(r.ownerDocument.documentElement,r)){if(n!==null&&df(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Sp(r,i);var o=Sp(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bj=ln&&"documentMode"in document&&11>=document.documentMode,Hs=null,kd=null,ma=null,jd=!1;function Np(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;jd||Hs==null||Hs!==wl(n)||(n=Hs,"selectionStart"in n&&df(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ma&&$a(ma,n)||(ma=n,n=El(kd,"onSelect"),0<n.length&&(t=new lf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Hs)))}function Do(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var qs={animationend:Do("Animation","AnimationEnd"),animationiteration:Do("Animation","AnimationIteration"),animationstart:Do("Animation","AnimationStart"),transitionend:Do("Transition","TransitionEnd")},Yc={},By={};ln&&(By=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function dc(e){if(Yc[e])return Yc[e];if(!qs[e])return e;var t=qs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in By)return Yc[e]=t[r];return e}var Vy=dc("animationend"),Hy=dc("animationiteration"),qy=dc("animationstart"),Wy=dc("transitionend"),Gy=new Map,_p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(e,t){Gy.set(e,t),Ns(t,[e])}for(var Zc=0;Zc<_p.length;Zc++){var eu=_p[Zc],Vj=eu.toLowerCase(),Hj=eu[0].toUpperCase()+eu.slice(1);Gn(Vj,"on"+Hj)}Gn(Vy,"onAnimationEnd");Gn(Hy,"onAnimationIteration");Gn(qy,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(Wy,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qj=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function Cp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,V1(n,t,void 0,e),e.currentTarget=null}function Ky(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Cp(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Cp(s,l,u),i=c}}}if(jl)throw e=yd,jl=!1,yd=null,e}function Re(e,t){var r=t[Ed];r===void 0&&(r=t[Ed]=new Set);var n=e+"__bubble";r.has(n)||(Jy(t,e,2,!1),r.add(n))}function tu(e,t,r){var n=0;t&&(n|=4),Jy(r,e,n,t)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function Fa(e){if(!e[Lo]){e[Lo]=!0,ry.forEach(function(r){r!=="selectionchange"&&(qj.has(r)||tu(r,!1,e),tu(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lo]||(t[Lo]=!0,tu("selectionchange",!1,t))}}function Jy(e,t,r,n){switch(Iy(t)){case 1:var s=ij;break;case 4:s=aj;break;default:s=af}r=s.bind(null,t,r,e),s=void 0,!xd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ru(e,t,r,n,s){var i=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=cs(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}yy(function(){var u=i,d=tf(r),h=[];e:{var m=Gy.get(e);if(m!==void 0){var f=lf,g=e;switch(e){case"keypress":if(il(r)===0)break e;case"keydown":case"keyup":f=wj;break;case"focusin":g="focus",f=Jc;break;case"focusout":g="blur",f=Jc;break;case"beforeblur":case"afterblur":f=Jc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=cj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Sj;break;case Vy:case Hy:case qy:f=hj;break;case Wy:f=_j;break;case"scroll":f=oj;break;case"wheel":f=Ej;break;case"copy":case"cut":case"paste":f=mj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=xp}var v=(t&4)!==0,b=!v&&e==="scroll",y=v?m!==null?m+"Capture":null:m;v=[];for(var x=u,p;x!==null;){p=x;var j=p.stateNode;if(p.tag===5&&j!==null&&(p=j,y!==null&&(j=Ra(x,y),j!=null&&v.push(za(x,j,p)))),b)break;x=x.return}0<v.length&&(m=new f(m,g,null,r,d),h.push({event:m,listeners:v}))}}if((t&7)===0){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&r!==pd&&(g=r.relatedTarget||r.fromElement)&&(cs(g)||g[cn]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(g=r.relatedTarget||r.toElement,f=u,g=g?cs(g):null,g!==null&&(b=_s(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(v=pp,j="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=xp,j="onPointerLeave",y="onPointerEnter",x="pointer"),b=f==null?m:Ws(f),p=g==null?m:Ws(g),m=new v(j,x+"leave",f,r,d),m.target=b,m.relatedTarget=p,j=null,cs(d)===u&&(v=new v(y,x+"enter",g,r,d),v.target=p,v.relatedTarget=b,j=v),b=j,f&&g)t:{for(v=f,y=g,x=0,p=v;p;p=Is(p))x++;for(p=0,j=y;j;j=Is(j))p++;for(;0<x-p;)v=Is(v),x--;for(;0<p-x;)y=Is(y),p--;for(;x--;){if(v===y||y!==null&&v===y.alternate)break t;v=Is(v),y=Is(y)}v=null}else v=null;f!==null&&Ep(h,m,f,v,!1),g!==null&&b!==null&&Ep(h,b,g,v,!0)}}e:{if(m=u?Ws(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var E=Lj;else if(bp(m))if($y)E=Fj;else{E=Mj;var N=Oj}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=$j);if(E&&(E=E(e,u))){My(h,E,r,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&ud(m,"number",m.value)}switch(N=u?Ws(u):window,e){case"focusin":(bp(N)||N.contentEditable==="true")&&(Hs=N,kd=u,ma=null);break;case"focusout":ma=kd=Hs=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,Np(h,r,d);break;case"selectionchange":if(Bj)break;case"keydown":case"keyup":Np(h,r,d)}var C;if(uf)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Vs?Ly(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(Dy&&r.locale!=="ko"&&(Vs||T!=="onCompositionStart"?T==="onCompositionEnd"&&Vs&&(C=Ry()):(En=d,of="value"in En?En.value:En.textContent,Vs=!0)),N=El(u,T),0<N.length&&(T=new gp(T,e,null,r,d),h.push({event:T,listeners:N}),C?T.data=C:(C=Oy(r),C!==null&&(T.data=C)))),(C=Pj?Aj(e,r):Ij(e,r))&&(u=El(u,"onBeforeInput"),0<u.length&&(d=new gp("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=C))}Ky(h,t)})}function za(e,t,r){return{instance:e,listener:t,currentTarget:r}}function El(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ra(e,r),i!=null&&n.unshift(za(e,i,s)),i=Ra(e,t),i!=null&&n.push(za(e,i,s))),e=e.return}return n}function Is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ep(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Ra(r,i),c!=null&&o.unshift(za(r,c,l))):s||(c=Ra(r,i),c!=null&&o.push(za(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Wj=/\r\n?/g,Gj=/\u0000|\uFFFD/g;function Tp(e){return(typeof e=="string"?e:""+e).replace(Wj,`
`).replace(Gj,"")}function Oo(e,t,r){if(t=Tp(t),Tp(e)!==t&&r)throw Error(q(425))}function Tl(){}var Sd=null,Nd=null;function _d(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,Kj=typeof clearTimeout=="function"?clearTimeout:void 0,Pp=typeof Promise=="function"?Promise:void 0,Jj=typeof queueMicrotask=="function"?queueMicrotask:typeof Pp<"u"?function(e){return Pp.resolve(null).then(e).catch(Xj)}:Cd;function Xj(e){setTimeout(function(){throw e})}function nu(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Oa(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Oa(t)}function On(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ap(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),zr="__reactFiber$"+Ei,Ua="__reactProps$"+Ei,cn="__reactContainer$"+Ei,Ed="__reactEvents$"+Ei,Qj="__reactListeners$"+Ei,Yj="__reactHandles$"+Ei;function cs(e){var t=e[zr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[cn]||r[zr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ap(e);e!==null;){if(r=e[zr])return r;e=Ap(e)}return t}e=r,r=e.parentNode}return null}function co(e){return e=e[zr]||e[cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ws(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function hc(e){return e[Ua]||null}var Td=[],Gs=-1;function Kn(e){return{current:e}}function De(e){0>Gs||(e.current=Td[Gs],Td[Gs]=null,Gs--)}function Ae(e,t){Gs++,Td[Gs]=e.current,e.current=t}var Hn={},Ct=Kn(Hn),Ht=Kn(!1),vs=Hn;function mi(e,t){var r=e.type.contextTypes;if(!r)return Hn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function qt(e){return e=e.childContextTypes,e!=null}function Pl(){De(Ht),De(Ct)}function Ip(e,t,r){if(Ct.current!==Hn)throw Error(q(168));Ae(Ct,t),Ae(Ht,r)}function Xy(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(q(108,O1(e)||"Unknown",s));return Be({},r,n)}function Al(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hn,vs=Ct.current,Ae(Ct,e),Ae(Ht,Ht.current),!0}function Rp(e,t,r){var n=e.stateNode;if(!n)throw Error(q(169));r?(e=Xy(e,t,vs),n.__reactInternalMemoizedMergedChildContext=e,De(Ht),De(Ct),Ae(Ct,e)):De(Ht),Ae(Ht,r)}var tn=null,fc=!1,su=!1;function Qy(e){tn===null?tn=[e]:tn.push(e)}function Zj(e){fc=!0,Qy(e)}function Jn(){if(!su&&tn!==null){su=!0;var e=0,t=Ee;try{var r=tn;for(Ee=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}tn=null,fc=!1}catch(s){throw tn!==null&&(tn=tn.slice(e+1)),ky(rf,Jn),s}finally{Ee=t,su=!1}}return null}var Ks=[],Js=0,Il=null,Rl=0,ur=[],dr=0,bs=null,nn=1,sn="";function rs(e,t){Ks[Js++]=Rl,Ks[Js++]=Il,Il=e,Rl=t}function Yy(e,t,r){ur[dr++]=nn,ur[dr++]=sn,ur[dr++]=bs,bs=e;var n=nn;e=sn;var s=32-Er(n)-1;n&=~(1<<s),r+=1;var i=32-Er(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,nn=1<<32-Er(t)+s|r<<s|n,sn=i+e}else nn=1<<i|r<<s|n,sn=e}function hf(e){e.return!==null&&(rs(e,1),Yy(e,1,0))}function ff(e){for(;e===Il;)Il=Ks[--Js],Ks[Js]=null,Rl=Ks[--Js],Ks[Js]=null;for(;e===bs;)bs=ur[--dr],ur[dr]=null,sn=ur[--dr],ur[dr]=null,nn=ur[--dr],ur[dr]=null}var rr=null,er=null,Oe=!1,Cr=null;function Zy(e,t){var r=fr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Dp(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rr=e,er=On(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rr=e,er=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=bs!==null?{id:nn,overflow:sn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=fr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rr=e,er=null,!0):!1;default:return!1}}function Pd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ad(e){if(Oe){var t=er;if(t){var r=t;if(!Dp(e,t)){if(Pd(e))throw Error(q(418));t=On(r.nextSibling);var n=rr;t&&Dp(e,t)?Zy(n,r):(e.flags=e.flags&-4097|2,Oe=!1,rr=e)}}else{if(Pd(e))throw Error(q(418));e.flags=e.flags&-4097|2,Oe=!1,rr=e}}}function Lp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rr=e}function Mo(e){if(e!==rr)return!1;if(!Oe)return Lp(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_d(e.type,e.memoizedProps)),t&&(t=er)){if(Pd(e))throw ev(),Error(q(418));for(;t;)Zy(e,t),t=On(t.nextSibling)}if(Lp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){er=On(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}er=null}}else er=rr?On(e.stateNode.nextSibling):null;return!0}function ev(){for(var e=er;e;)e=On(e.nextSibling)}function pi(){er=rr=null,Oe=!1}function mf(e){Cr===null?Cr=[e]:Cr.push(e)}var e2=pn.ReactCurrentBatchConfig;function Ji(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(q(309));var n=r.stateNode}if(!n)throw Error(q(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(q(284));if(!r._owner)throw Error(q(290,e))}return e}function $o(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Op(e){var t=e._init;return t(e._payload)}function tv(e){function t(y,x){if(e){var p=y.deletions;p===null?(y.deletions=[x],y.flags|=16):p.push(x)}}function r(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function n(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=zn(y,x),y.index=0,y.sibling=null,y}function i(y,x,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<x?(y.flags|=2,x):p):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,x,p,j){return x===null||x.tag!==6?(x=du(p,y.mode,j),x.return=y,x):(x=s(x,p),x.return=y,x)}function c(y,x,p,j){var E=p.type;return E===Bs?d(y,x,p.props.children,j,p.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===jn&&Op(E)===x.type)?(j=s(x,p.props),j.ref=Ji(y,x,p),j.return=y,j):(j=hl(p.type,p.key,p.props,null,y.mode,j),j.ref=Ji(y,x,p),j.return=y,j)}function u(y,x,p,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==p.containerInfo||x.stateNode.implementation!==p.implementation?(x=hu(p,y.mode,j),x.return=y,x):(x=s(x,p.children||[]),x.return=y,x)}function d(y,x,p,j,E){return x===null||x.tag!==7?(x=ps(p,y.mode,j,E),x.return=y,x):(x=s(x,p),x.return=y,x)}function h(y,x,p){if(typeof x=="string"&&x!==""||typeof x=="number")return x=du(""+x,y.mode,p),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Co:return p=hl(x.type,x.key,x.props,null,y.mode,p),p.ref=Ji(y,null,x),p.return=y,p;case Us:return x=hu(x,y.mode,p),x.return=y,x;case jn:var j=x._init;return h(y,j(x._payload),p)}if(ia(x)||Hi(x))return x=ps(x,y.mode,p,null),x.return=y,x;$o(y,x)}return null}function m(y,x,p,j){var E=x!==null?x.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return E!==null?null:l(y,x,""+p,j);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Co:return p.key===E?c(y,x,p,j):null;case Us:return p.key===E?u(y,x,p,j):null;case jn:return E=p._init,m(y,x,E(p._payload),j)}if(ia(p)||Hi(p))return E!==null?null:d(y,x,p,j,null);$o(y,p)}return null}function f(y,x,p,j,E){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(p)||null,l(x,y,""+j,E);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Co:return y=y.get(j.key===null?p:j.key)||null,c(x,y,j,E);case Us:return y=y.get(j.key===null?p:j.key)||null,u(x,y,j,E);case jn:var N=j._init;return f(y,x,p,N(j._payload),E)}if(ia(j)||Hi(j))return y=y.get(p)||null,d(x,y,j,E,null);$o(x,j)}return null}function g(y,x,p,j){for(var E=null,N=null,C=x,T=x=0,D=null;C!==null&&T<p.length;T++){C.index>T?(D=C,C=null):D=C.sibling;var R=m(y,C,p[T],j);if(R===null){C===null&&(C=D);break}e&&C&&R.alternate===null&&t(y,C),x=i(R,x,T),N===null?E=R:N.sibling=R,N=R,C=D}if(T===p.length)return r(y,C),Oe&&rs(y,T),E;if(C===null){for(;T<p.length;T++)C=h(y,p[T],j),C!==null&&(x=i(C,x,T),N===null?E=C:N.sibling=C,N=C);return Oe&&rs(y,T),E}for(C=n(y,C);T<p.length;T++)D=f(C,y,T,p[T],j),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?T:D.key),x=i(D,x,T),N===null?E=D:N.sibling=D,N=D);return e&&C.forEach(function(P){return t(y,P)}),Oe&&rs(y,T),E}function v(y,x,p,j){var E=Hi(p);if(typeof E!="function")throw Error(q(150));if(p=E.call(p),p==null)throw Error(q(151));for(var N=E=null,C=x,T=x=0,D=null,R=p.next();C!==null&&!R.done;T++,R=p.next()){C.index>T?(D=C,C=null):D=C.sibling;var P=m(y,C,R.value,j);if(P===null){C===null&&(C=D);break}e&&C&&P.alternate===null&&t(y,C),x=i(P,x,T),N===null?E=P:N.sibling=P,N=P,C=D}if(R.done)return r(y,C),Oe&&rs(y,T),E;if(C===null){for(;!R.done;T++,R=p.next())R=h(y,R.value,j),R!==null&&(x=i(R,x,T),N===null?E=R:N.sibling=R,N=R);return Oe&&rs(y,T),E}for(C=n(y,C);!R.done;T++,R=p.next())R=f(C,y,T,R.value,j),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?T:R.key),x=i(R,x,T),N===null?E=R:N.sibling=R,N=R);return e&&C.forEach(function(L){return t(y,L)}),Oe&&rs(y,T),E}function b(y,x,p,j){if(typeof p=="object"&&p!==null&&p.type===Bs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Co:e:{for(var E=p.key,N=x;N!==null;){if(N.key===E){if(E=p.type,E===Bs){if(N.tag===7){r(y,N.sibling),x=s(N,p.props.children),x.return=y,y=x;break e}}else if(N.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===jn&&Op(E)===N.type){r(y,N.sibling),x=s(N,p.props),x.ref=Ji(y,N,p),x.return=y,y=x;break e}r(y,N);break}else t(y,N);N=N.sibling}p.type===Bs?(x=ps(p.props.children,y.mode,j,p.key),x.return=y,y=x):(j=hl(p.type,p.key,p.props,null,y.mode,j),j.ref=Ji(y,x,p),j.return=y,y=j)}return o(y);case Us:e:{for(N=p.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===p.containerInfo&&x.stateNode.implementation===p.implementation){r(y,x.sibling),x=s(x,p.children||[]),x.return=y,y=x;break e}else{r(y,x);break}else t(y,x);x=x.sibling}x=hu(p,y.mode,j),x.return=y,y=x}return o(y);case jn:return N=p._init,b(y,x,N(p._payload),j)}if(ia(p))return g(y,x,p,j);if(Hi(p))return v(y,x,p,j);$o(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,x!==null&&x.tag===6?(r(y,x.sibling),x=s(x,p),x.return=y,y=x):(r(y,x),x=du(p,y.mode,j),x.return=y,y=x),o(y)):r(y,x)}return b}var gi=tv(!0),rv=tv(!1),Dl=Kn(null),Ll=null,Xs=null,pf=null;function gf(){pf=Xs=Ll=null}function xf(e){var t=Dl.current;De(Dl),e._currentValue=t}function Id(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function li(e,t){Ll=e,pf=Xs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Bt=!0),e.firstContext=null)}function vr(e){var t=e._currentValue;if(pf!==e)if(e={context:e,memoizedValue:t,next:null},Xs===null){if(Ll===null)throw Error(q(308));Xs=e,Ll.dependencies={lanes:0,firstContext:e}}else Xs=Xs.next=e;return t}var us=null;function yf(e){us===null?us=[e]:us.push(e)}function nv(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,yf(t)):(r.next=s.next,s.next=r),t.interleaved=r,un(e,n)}function un(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Sn=!1;function vf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Se&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,un(e,r)}return s=n.interleaved,s===null?(t.next=t,yf(n)):(t.next=s.next,s.next=t),n.interleaved=t,un(e,r)}function al(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nf(e,r)}}function Mp(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ol(e,t,r,n){var s=e.updateQueue;Sn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(m=t,f=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(f,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(f,h,m):g,m==null)break e;h=Be({},h,m);break e;case 2:Sn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ks|=o,e.lanes=o,e.memoizedState=h}}function $p(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(q(191,s));s.call(n)}}}var uo={},qr=Kn(uo),Ba=Kn(uo),Va=Kn(uo);function ds(e){if(e===uo)throw Error(q(174));return e}function bf(e,t){switch(Ae(Va,t),Ae(Ba,e),Ae(qr,uo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hd(t,e)}De(qr),Ae(qr,t)}function xi(){De(qr),De(Ba),De(Va)}function iv(e){ds(Va.current);var t=ds(qr.current),r=hd(t,e.type);t!==r&&(Ae(Ba,e),Ae(qr,r))}function wf(e){Ba.current===e&&(De(qr),De(Ba))}var $e=Kn(0);function Ml(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var iu=[];function kf(){for(var e=0;e<iu.length;e++)iu[e]._workInProgressVersionPrimary=null;iu.length=0}var ol=pn.ReactCurrentDispatcher,au=pn.ReactCurrentBatchConfig,ws=0,ze=null,st=null,ot=null,$l=!1,pa=!1,Ha=0,t2=0;function wt(){throw Error(q(321))}function jf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ar(e[r],t[r]))return!1;return!0}function Sf(e,t,r,n,s,i){if(ws=i,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ol.current=e===null||e.memoizedState===null?i2:a2,e=r(n,s),pa){i=0;do{if(pa=!1,Ha=0,25<=i)throw Error(q(301));i+=1,ot=st=null,t.updateQueue=null,ol.current=o2,e=r(n,s)}while(pa)}if(ol.current=Fl,t=st!==null&&st.next!==null,ws=0,ot=st=ze=null,$l=!1,t)throw Error(q(300));return e}function Nf(){var e=Ha!==0;return Ha=0,e}function Or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?ze.memoizedState=ot=e:ot=ot.next=e,ot}function br(){if(st===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=ot===null?ze.memoizedState:ot.next;if(t!==null)ot=t,st=e;else{if(e===null)throw Error(q(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ot===null?ze.memoizedState=ot=e:ot=ot.next=e}return ot}function qa(e,t){return typeof t=="function"?t(e):t}function ou(e){var t=br(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var n=st,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ws&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,ze.lanes|=d,ks|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Ar(n,t.memoizedState)||(Bt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ze.lanes|=i,ks|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function lu(e){var t=br(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ar(i,t.memoizedState)||(Bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function av(){}function ov(e,t){var r=ze,n=br(),s=t(),i=!Ar(n.memoizedState,s);if(i&&(n.memoizedState=s,Bt=!0),n=n.queue,_f(uv.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ot!==null&&ot.memoizedState.tag&1){if(r.flags|=2048,Wa(9,cv.bind(null,r,n,s,t),void 0,null),lt===null)throw Error(q(349));(ws&30)!==0||lv(r,t,s)}return s}function lv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function cv(e,t,r,n){t.value=r,t.getSnapshot=n,dv(t)&&hv(e)}function uv(e,t,r){return r(function(){dv(t)&&hv(e)})}function dv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ar(e,r)}catch{return!0}}function hv(e){var t=un(e,1);t!==null&&Tr(t,e,1,-1)}function Fp(e){var t=Or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:e},t.queue=e,e=e.dispatch=s2.bind(null,ze,e),[t.memoizedState,e]}function Wa(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function fv(){return br().memoizedState}function ll(e,t,r,n){var s=Or();ze.flags|=e,s.memoizedState=Wa(1|t,r,void 0,n===void 0?null:n)}function mc(e,t,r,n){var s=br();n=n===void 0?null:n;var i=void 0;if(st!==null){var o=st.memoizedState;if(i=o.destroy,n!==null&&jf(n,o.deps)){s.memoizedState=Wa(t,r,i,n);return}}ze.flags|=e,s.memoizedState=Wa(1|t,r,i,n)}function zp(e,t){return ll(8390656,8,e,t)}function _f(e,t){return mc(2048,8,e,t)}function mv(e,t){return mc(4,2,e,t)}function pv(e,t){return mc(4,4,e,t)}function gv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xv(e,t,r){return r=r!=null?r.concat([e]):null,mc(4,4,gv.bind(null,t,e),r)}function Cf(){}function yv(e,t){var r=br();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function vv(e,t){var r=br();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function bv(e,t,r){return(ws&21)===0?(e.baseState&&(e.baseState=!1,Bt=!0),e.memoizedState=r):(Ar(r,t)||(r=Ny(),ze.lanes|=r,ks|=r,e.baseState=!0),t)}function r2(e,t){var r=Ee;Ee=r!==0&&4>r?r:4,e(!0);var n=au.transition;au.transition={};try{e(!1),t()}finally{Ee=r,au.transition=n}}function wv(){return br().memoizedState}function n2(e,t,r){var n=Fn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},kv(e))jv(t,r);else if(r=nv(e,t,r,n),r!==null){var s=Dt();Tr(r,e,n,s),Sv(r,t,n)}}function s2(e,t,r){var n=Fn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(kv(e))jv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Ar(l,o)){var c=t.interleaved;c===null?(s.next=s,yf(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=nv(e,t,s,n),r!==null&&(s=Dt(),Tr(r,e,n,s),Sv(r,t,n))}}function kv(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function jv(e,t){pa=$l=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Sv(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nf(e,r)}}var Fl={readContext:vr,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},i2={readContext:vr,useCallback:function(e,t){return Or().memoizedState=[e,t===void 0?null:t],e},useContext:vr,useEffect:zp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ll(4194308,4,gv.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ll(4194308,4,e,t)},useInsertionEffect:function(e,t){return ll(4,2,e,t)},useMemo:function(e,t){var r=Or();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Or();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=n2.bind(null,ze,e),[n.memoizedState,e]},useRef:function(e){var t=Or();return e={current:e},t.memoizedState=e},useState:Fp,useDebugValue:Cf,useDeferredValue:function(e){return Or().memoizedState=e},useTransition:function(){var e=Fp(!1),t=e[0];return e=r2.bind(null,e[1]),Or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ze,s=Or();if(Oe){if(r===void 0)throw Error(q(407));r=r()}else{if(r=t(),lt===null)throw Error(q(349));(ws&30)!==0||lv(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,zp(uv.bind(null,n,i,e),[e]),n.flags|=2048,Wa(9,cv.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Or(),t=lt.identifierPrefix;if(Oe){var r=sn,n=nn;r=(n&~(1<<32-Er(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ha++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=t2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a2={readContext:vr,useCallback:yv,useContext:vr,useEffect:_f,useImperativeHandle:xv,useInsertionEffect:mv,useLayoutEffect:pv,useMemo:vv,useReducer:ou,useRef:fv,useState:function(){return ou(qa)},useDebugValue:Cf,useDeferredValue:function(e){var t=br();return bv(t,st.memoizedState,e)},useTransition:function(){var e=ou(qa)[0],t=br().memoizedState;return[e,t]},useMutableSource:av,useSyncExternalStore:ov,useId:wv,unstable_isNewReconciler:!1},o2={readContext:vr,useCallback:yv,useContext:vr,useEffect:_f,useImperativeHandle:xv,useInsertionEffect:mv,useLayoutEffect:pv,useMemo:vv,useReducer:lu,useRef:fv,useState:function(){return lu(qa)},useDebugValue:Cf,useDeferredValue:function(e){var t=br();return st===null?t.memoizedState=e:bv(t,st.memoizedState,e)},useTransition:function(){var e=lu(qa)[0],t=br().memoizedState;return[e,t]},useMutableSource:av,useSyncExternalStore:ov,useId:wv,unstable_isNewReconciler:!1};function Sr(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Rd(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Be({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var pc={isMounted:function(e){return(e=e._reactInternals)?_s(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Dt(),s=Fn(e),i=on(n,s);i.payload=t,r!=null&&(i.callback=r),t=Mn(e,i,s),t!==null&&(Tr(t,e,s,n),al(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Dt(),s=Fn(e),i=on(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Mn(e,i,s),t!==null&&(Tr(t,e,s,n),al(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Dt(),n=Fn(e),s=on(r,n);s.tag=2,t!=null&&(s.callback=t),t=Mn(e,s,n),t!==null&&(Tr(t,e,n,r),al(t,e,n))}};function Up(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!$a(r,n)||!$a(s,i):!0}function Nv(e,t,r){var n=!1,s=Hn,i=t.contextType;return typeof i=="object"&&i!==null?i=vr(i):(s=qt(t)?vs:Ct.current,n=t.contextTypes,i=(n=n!=null)?mi(e,s):Hn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Bp(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&pc.enqueueReplaceState(t,t.state,null)}function Dd(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},vf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=vr(i):(i=qt(t)?vs:Ct.current,s.context=mi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Rd(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&pc.enqueueReplaceState(s,s.state,null),Ol(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function yi(e,t){try{var r="",n=t;do r+=L1(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function cu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ld(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var l2=typeof WeakMap=="function"?WeakMap:Map;function _v(e,t,r){r=on(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ul||(Ul=!0,qd=n),Ld(e,t)},r}function Cv(e,t,r){r=on(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Ld(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ld(e,t),typeof n!="function"&&($n===null?$n=new Set([this]):$n.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Vp(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new l2;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=k2.bind(null,e,t,r),t.then(e,e))}function Hp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qp(e,t,r,n,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=on(-1,1),t.tag=2,Mn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var c2=pn.ReactCurrentOwner,Bt=!1;function At(e,t,r,n){t.child=e===null?rv(t,null,r,n):gi(t,e.child,r,n)}function Wp(e,t,r,n,s){r=r.render;var i=t.ref;return li(t,s),n=Sf(e,t,r,n,i,s),r=Nf(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,dn(e,t,s)):(Oe&&r&&hf(t),t.flags|=1,At(e,t,n,s),t.child)}function Gp(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Lf(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Ev(e,t,i,n,s)):(e=hl(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,(e.lanes&s)===0){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:$a,r(o,n)&&e.ref===t.ref)return dn(e,t,s)}return t.flags|=1,e=zn(i,n),e.ref=t.ref,e.return=t,t.child=e}function Ev(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if($a(i,n)&&e.ref===t.ref)if(Bt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)(e.flags&131072)!==0&&(Bt=!0);else return t.lanes=e.lanes,dn(e,t,s)}return Od(e,t,r,n,s)}function Tv(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ys,Yt),Yt|=r;else{if((r&1073741824)===0)return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ae(Ys,Yt),Yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ae(Ys,Yt),Yt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ae(Ys,Yt),Yt|=n;return At(e,t,s,r),t.child}function Pv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Od(e,t,r,n,s){var i=qt(r)?vs:Ct.current;return i=mi(t,i),li(t,s),r=Sf(e,t,r,n,i,s),n=Nf(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,dn(e,t,s)):(Oe&&n&&hf(t),t.flags|=1,At(e,t,r,s),t.child)}function Kp(e,t,r,n,s){if(qt(r)){var i=!0;Al(t)}else i=!1;if(li(t,s),t.stateNode===null)cl(e,t),Nv(t,r,n),Dd(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=vr(u):(u=qt(r)?vs:Ct.current,u=mi(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Bp(t,o,n,u),Sn=!1;var m=t.memoizedState;o.state=m,Ol(t,n,o,s),c=t.memoizedState,l!==n||m!==c||Ht.current||Sn?(typeof d=="function"&&(Rd(t,r,d,n),c=t.memoizedState),(l=Sn||Up(t,r,l,n,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,sv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Sr(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=vr(c):(c=qt(r)?vs:Ct.current,c=mi(t,c));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&Bp(t,o,n,c),Sn=!1,m=t.memoizedState,o.state=m,Ol(t,n,o,s);var g=t.memoizedState;l!==h||m!==g||Ht.current||Sn?(typeof f=="function"&&(Rd(t,r,f,n),g=t.memoizedState),(u=Sn||Up(t,r,u,n,m,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Md(e,t,r,n,i,s)}function Md(e,t,r,n,s,i){Pv(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Rp(t,r,!1),dn(e,t,i);n=t.stateNode,c2.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=gi(t,e.child,null,i),t.child=gi(t,null,l,i)):At(e,t,l,i),t.memoizedState=n.state,s&&Rp(t,r,!0),t.child}function Av(e){var t=e.stateNode;t.pendingContext?Ip(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ip(e,t.context,!1),bf(e,t.containerInfo)}function Jp(e,t,r,n,s){return pi(),mf(s),t.flags|=256,At(e,t,r,n),t.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function Fd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Iv(e,t,r){var n=t.pendingProps,s=$e.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ae($e,s&1),e===null)return Ad(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},(n&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yc(o,n,0,null),e=ps(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Fd(r),t.memoizedState=$d,e):Ef(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return u2(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return(o&1)===0&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=zn(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=zn(l,i):(i=ps(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Fd(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=$d,n}return i=e.child,e=i.sibling,n=zn(i,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ef(e,t){return t=yc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fo(e,t,r,n){return n!==null&&mf(n),gi(t,e.child,null,r),e=Ef(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function u2(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=cu(Error(q(422))),Fo(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=yc({mode:"visible",children:n.children},s,0,null),i=ps(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,(t.mode&1)!==0&&gi(t,e.child,null,o),t.child.memoizedState=Fd(o),t.memoizedState=$d,i);if((t.mode&1)===0)return Fo(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(q(419)),n=cu(i,n,void 0),Fo(e,t,o,n)}if(l=(o&e.childLanes)!==0,Bt||l){if(n=lt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(n.suspendedLanes|o))!==0?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,un(e,s),Tr(n,e,s,-1))}return Df(),n=cu(Error(q(421))),Fo(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=j2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,er=On(s.nextSibling),rr=t,Oe=!0,Cr=null,e!==null&&(ur[dr++]=nn,ur[dr++]=sn,ur[dr++]=bs,nn=e.id,sn=e.overflow,bs=t),t=Ef(t,n.children),t.flags|=4096,t)}function Xp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Id(e.return,t,r)}function uu(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Rv(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(At(e,t,n.children,r),n=$e.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xp(e,r,t);else if(e.tag===19)Xp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ae($e,n),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ml(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),uu(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ml(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}uu(t,!0,r,null,i);break;case"together":uu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cl(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ks|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,r=zn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function d2(e,t,r){switch(t.tag){case 3:Av(t),pi();break;case 5:iv(t);break;case 1:qt(t.type)&&Al(t);break;case 4:bf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ae(Dl,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ae($e,$e.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Iv(e,t,r):(Ae($e,$e.current&1),e=dn(e,t,r),e!==null?e.sibling:null);Ae($e,$e.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return Rv(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae($e,$e.current),n)break;return null;case 22:case 23:return t.lanes=0,Tv(e,t,r)}return dn(e,t,r)}var Dv,zd,Lv,Ov;Dv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};zd=function(){};Lv=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ds(qr.current);var i=null;switch(r){case"input":s=ld(e,s),n=ld(e,n),i=[];break;case"select":s=Be({},s,{value:void 0}),n=Be({},n,{value:void 0}),i=[];break;case"textarea":s=dd(e,s),n=dd(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Tl)}fd(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Aa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Aa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Re("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Ov=function(e,t,r,n){r!==n&&(t.flags|=4)};function Xi(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function h2(e,t,r){var n=t.pendingProps;switch(ff(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return qt(t.type)&&Pl(),kt(t),null;case 3:return n=t.stateNode,xi(),De(Ht),De(Ct),kf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Mo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Cr!==null&&(Kd(Cr),Cr=null))),zd(e,t),kt(t),null;case 5:wf(t);var s=ds(Va.current);if(r=t.type,e!==null&&t.stateNode!=null)Lv(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(q(166));return kt(t),null}if(e=ds(qr.current),Mo(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[zr]=t,n[Ua]=i,e=(t.mode&1)!==0,r){case"dialog":Re("cancel",n),Re("close",n);break;case"iframe":case"object":case"embed":Re("load",n);break;case"video":case"audio":for(s=0;s<oa.length;s++)Re(oa[s],n);break;case"source":Re("error",n);break;case"img":case"image":case"link":Re("error",n),Re("load",n);break;case"details":Re("toggle",n);break;case"input":ip(n,i),Re("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Re("invalid",n);break;case"textarea":op(n,i),Re("invalid",n)}fd(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Oo(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Oo(n.textContent,l,e),s=["children",""+l]):Aa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Re("scroll",n)}switch(r){case"input":Eo(n),ap(n,i,!0);break;case"textarea":Eo(n),lp(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Tl)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uy(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[zr]=t,e[Ua]=n,Dv(e,t,!1,!1),t.stateNode=e;e:{switch(o=md(r,n),r){case"dialog":Re("cancel",e),Re("close",e),s=n;break;case"iframe":case"object":case"embed":Re("load",e),s=n;break;case"video":case"audio":for(s=0;s<oa.length;s++)Re(oa[s],e);s=n;break;case"source":Re("error",e),s=n;break;case"img":case"image":case"link":Re("error",e),Re("load",e),s=n;break;case"details":Re("toggle",e),s=n;break;case"input":ip(e,n),s=ld(e,n),Re("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Be({},n,{value:void 0}),Re("invalid",e);break;case"textarea":op(e,n),s=dd(e,n),Re("invalid",e);break;default:s=n}fd(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?fy(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dy(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ia(e,c):typeof c=="number"&&Ia(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Aa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Re("scroll",e):c!=null&&Qh(e,i,c,o))}switch(r){case"input":Eo(e),ap(e,n,!1);break;case"textarea":Eo(e),lp(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Vn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?si(e,!!n.multiple,i,!1):n.defaultValue!=null&&si(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Tl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)Ov(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(q(166));if(r=ds(Va.current),ds(qr.current),Mo(t)){if(n=t.stateNode,r=t.memoizedProps,n[zr]=t,(i=n.nodeValue!==r)&&(e=rr,e!==null))switch(e.tag){case 3:Oo(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Oo(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[zr]=t,t.stateNode=n}return kt(t),null;case 13:if(De($e),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&er!==null&&(t.mode&1)!==0&&(t.flags&128)===0)ev(),pi(),t.flags|=98560,i=!1;else if(i=Mo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[zr]=t}else pi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;kt(t),i=!1}else Cr!==null&&(Kd(Cr),Cr=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||($e.current&1)!==0?it===0&&(it=3):Df())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return xi(),zd(e,t),e===null&&Fa(t.stateNode.containerInfo),kt(t),null;case 10:return xf(t.type._context),kt(t),null;case 17:return qt(t.type)&&Pl(),kt(t),null;case 19:if(De($e),i=t.memoizedState,i===null)return kt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Xi(i,!1);else{if(it!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Ml(e),o!==null){for(t.flags|=128,Xi(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ae($e,$e.current&1|2),t.child}e=e.sibling}i.tail!==null&&Je()>vi&&(t.flags|=128,n=!0,Xi(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ml(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Xi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Oe)return kt(t),null}else 2*Je()-i.renderingStartTime>vi&&r!==1073741824&&(t.flags|=128,n=!0,Xi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,r=$e.current,Ae($e,n?r&1|2:r&1),t):(kt(t),null);case 22:case 23:return Rf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(Yt&1073741824)!==0&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function f2(e,t){switch(ff(t),t.tag){case 1:return qt(t.type)&&Pl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xi(),De(Ht),De(Ct),kf(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return wf(t),null;case 13:if(De($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));pi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De($e),null;case 4:return xi(),null;case 10:return xf(t.type._context),null;case 22:case 23:return Rf(),null;case 24:return null;default:return null}}var zo=!1,jt=!1,m2=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Qs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){qe(e,t,n)}else r.current=null}function Ud(e,t,r){try{r()}catch(n){qe(e,t,n)}}var Qp=!1;function p2(e,t){if(Sd=_l,e=Uy(),df(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===n&&(c=o),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nd={focusedElem:e,selectionRange:r},_l=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var g=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,b=g.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Sr(t.type,v),b);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(j){qe(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return g=Qp,Qp=!1,g}function ga(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ud(t,r,i)}s=s.next}while(s!==n)}}function gc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Bd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Mv(e){var t=e.alternate;t!==null&&(e.alternate=null,Mv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zr],delete t[Ua],delete t[Ed],delete t[Qj],delete t[Yj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $v(e){return e.tag===5||e.tag===3||e.tag===4}function Yp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$v(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Tl));else if(n!==4&&(e=e.child,e!==null))for(Vd(e,t,r),e=e.sibling;e!==null;)Vd(e,t,r),e=e.sibling}function Hd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Hd(e,t,r),e=e.sibling;e!==null;)Hd(e,t,r),e=e.sibling}var ft=null,Nr=!1;function xn(e,t,r){for(r=r.child;r!==null;)Fv(e,t,r),r=r.sibling}function Fv(e,t,r){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(lc,r)}catch{}switch(r.tag){case 5:jt||Qs(r,t);case 6:var n=ft,s=Nr;ft=null,xn(e,t,r),ft=n,Nr=s,ft!==null&&(Nr?(e=ft,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ft.removeChild(r.stateNode));break;case 18:ft!==null&&(Nr?(e=ft,r=r.stateNode,e.nodeType===8?nu(e.parentNode,r):e.nodeType===1&&nu(e,r),Oa(e)):nu(ft,r.stateNode));break;case 4:n=ft,s=Nr,ft=r.stateNode.containerInfo,Nr=!0,xn(e,t,r),ft=n,Nr=s;break;case 0:case 11:case 14:case 15:if(!jt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!==0||(i&4)!==0)&&Ud(r,t,o),s=s.next}while(s!==n)}xn(e,t,r);break;case 1:if(!jt&&(Qs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){qe(r,t,l)}xn(e,t,r);break;case 21:xn(e,t,r);break;case 22:r.mode&1?(jt=(n=jt)||r.memoizedState!==null,xn(e,t,r),jt=n):xn(e,t,r);break;default:xn(e,t,r)}}function Zp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new m2),t.forEach(function(n){var s=S2.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function kr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ft=l.stateNode,Nr=!1;break e;case 3:ft=l.stateNode.containerInfo,Nr=!0;break e;case 4:ft=l.stateNode.containerInfo,Nr=!0;break e}l=l.return}if(ft===null)throw Error(q(160));Fv(i,o,s),ft=null,Nr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){qe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zv(t,e),t=t.sibling}function zv(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kr(t,e),Dr(e),n&4){try{ga(3,e,e.return),gc(3,e)}catch(v){qe(e,e.return,v)}try{ga(5,e,e.return)}catch(v){qe(e,e.return,v)}}break;case 1:kr(t,e),Dr(e),n&512&&r!==null&&Qs(r,r.return);break;case 5:if(kr(t,e),Dr(e),n&512&&r!==null&&Qs(r,r.return),e.flags&32){var s=e.stateNode;try{Ia(s,"")}catch(v){qe(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ly(s,i),md(l,o);var u=md(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?fy(s,h):d==="dangerouslySetInnerHTML"?dy(s,h):d==="children"?Ia(s,h):Qh(s,d,h,u)}switch(l){case"input":cd(s,i);break;case"textarea":cy(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?si(s,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?si(s,!!i.multiple,i.defaultValue,!0):si(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ua]=i}catch(v){qe(e,e.return,v)}}break;case 6:if(kr(t,e),Dr(e),n&4){if(e.stateNode===null)throw Error(q(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){qe(e,e.return,v)}}break;case 3:if(kr(t,e),Dr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Oa(t.containerInfo)}catch(v){qe(e,e.return,v)}break;case 4:kr(t,e),Dr(e);break;case 13:kr(t,e),Dr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Af=Je())),n&4&&Zp(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(jt=(u=jt)||d,kr(t,e),jt=u):kr(t,e),Dr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&(e.mode&1)!==0)for(ee=e,d=e.child;d!==null;){for(h=ee=d;ee!==null;){switch(m=ee,f=m.child,m.tag){case 0:case 11:case 14:case 15:ga(4,m,m.return);break;case 1:Qs(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){qe(n,r,v)}}break;case 5:Qs(m,m.return);break;case 22:if(m.memoizedState!==null){t0(h);continue}}f!==null?(f.return=m,ee=f):t0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=hy("display",o))}catch(v){qe(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){qe(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:kr(t,e),Dr(e),n&4&&Zp(e);break;case 21:break;default:kr(t,e),Dr(e)}}function Dr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if($v(r)){var n=r;break e}r=r.return}throw Error(q(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ia(s,""),n.flags&=-33);var i=Yp(e);Hd(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Yp(e);Vd(e,l,o);break;default:throw Error(q(161))}}catch(c){qe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function g2(e,t,r){ee=e,Uv(e)}function Uv(e,t,r){for(var n=(e.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||zo;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||jt;l=zo;var u=jt;if(zo=o,(jt=c)&&!u)for(ee=s;ee!==null;)o=ee,c=o.child,o.tag===22&&o.memoizedState!==null?r0(s):c!==null?(c.return=o,ee=c):r0(s);for(;i!==null;)ee=i,Uv(i),i=i.sibling;ee=s,zo=l,jt=u}e0(e)}else(s.subtreeFlags&8772)!==0&&i!==null?(i.return=s,ee=i):e0(e)}}function e0(e){for(;ee!==null;){var t=ee;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:jt||gc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!jt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Sr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&$p(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}$p(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Oa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}jt||t.flags&512&&Bd(t)}catch(m){qe(t,t.return,m)}}if(t===e){ee=null;break}if(r=t.sibling,r!==null){r.return=t.return,ee=r;break}ee=t.return}}function t0(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ee=r;break}ee=t.return}}function r0(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{gc(4,t)}catch(c){qe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){qe(t,s,c)}}var i=t.return;try{Bd(t)}catch(c){qe(t,i,c)}break;case 5:var o=t.return;try{Bd(t)}catch(c){qe(t,o,c)}}}catch(c){qe(t,t.return,c)}if(t===e){ee=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ee=l;break}ee=t.return}}var x2=Math.ceil,zl=pn.ReactCurrentDispatcher,Tf=pn.ReactCurrentOwner,pr=pn.ReactCurrentBatchConfig,Se=0,lt=null,et=null,pt=0,Yt=0,Ys=Kn(0),it=0,Ga=null,ks=0,xc=0,Pf=0,xa=null,zt=null,Af=0,vi=1/0,Zr=null,Ul=!1,qd=null,$n=null,Uo=!1,Tn=null,Bl=0,ya=0,Wd=null,ul=-1,dl=0;function Dt(){return(Se&6)!==0?Je():ul!==-1?ul:ul=Je()}function Fn(e){return(e.mode&1)===0?1:(Se&2)!==0&&pt!==0?pt&-pt:e2.transition!==null?(dl===0&&(dl=Ny()),dl):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:Iy(e.type)),e)}function Tr(e,t,r,n){if(50<ya)throw ya=0,Wd=null,Error(q(185));oo(e,r,n),((Se&2)===0||e!==lt)&&(e===lt&&((Se&2)===0&&(xc|=r),it===4&&_n(e,pt)),Wt(e,n),r===1&&Se===0&&(t.mode&1)===0&&(vi=Je()+500,fc&&Jn()))}function Wt(e,t){var r=e.callbackNode;ej(e,t);var n=Nl(e,e===lt?pt:0);if(n===0)r!==null&&dp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&dp(r),t===1)e.tag===0?Zj(n0.bind(null,e)):Qy(n0.bind(null,e)),Jj(function(){(Se&6)===0&&Jn()}),r=null;else{switch(_y(n)){case 1:r=rf;break;case 4:r=jy;break;case 16:r=Sl;break;case 536870912:r=Sy;break;default:r=Sl}r=Jv(r,Bv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Bv(e,t){if(ul=-1,dl=0,(Se&6)!==0)throw Error(q(327));var r=e.callbackNode;if(ci()&&e.callbackNode!==r)return null;var n=Nl(e,e===lt?pt:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=Vl(e,n);else{t=n;var s=Se;Se|=2;var i=Hv();(lt!==e||pt!==t)&&(Zr=null,vi=Je()+500,ms(e,t));do try{b2();break}catch(l){Vv(e,l)}while(!0);gf(),zl.current=i,Se=s,et!==null?t=0:(lt=null,pt=0,t=it)}if(t!==0){if(t===2&&(s=vd(e),s!==0&&(n=s,t=Gd(e,s))),t===1)throw r=Ga,ms(e,0),_n(e,n),Wt(e,Je()),r;if(t===6)_n(e,n);else{if(s=e.current.alternate,(n&30)===0&&!y2(s)&&(t=Vl(e,n),t===2&&(i=vd(e),i!==0&&(n=i,t=Gd(e,i))),t===1))throw r=Ga,ms(e,0),_n(e,n),Wt(e,Je()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(q(345));case 2:ns(e,zt,Zr);break;case 3:if(_n(e,n),(n&130023424)===n&&(t=Af+500-Je(),10<t)){if(Nl(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Dt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Cd(ns.bind(null,e,zt,Zr),t);break}ns(e,zt,Zr);break;case 4:if(_n(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Er(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=Je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*x2(n/1960))-n,10<n){e.timeoutHandle=Cd(ns.bind(null,e,zt,Zr),n);break}ns(e,zt,Zr);break;case 5:ns(e,zt,Zr);break;default:throw Error(q(329))}}}return Wt(e,Je()),e.callbackNode===r?Bv.bind(null,e):null}function Gd(e,t){var r=xa;return e.current.memoizedState.isDehydrated&&(ms(e,t).flags|=256),e=Vl(e,t),e!==2&&(t=zt,zt=r,t!==null&&Kd(t)),e}function Kd(e){zt===null?zt=e:zt.push.apply(zt,e)}function y2(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ar(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _n(e,t){for(t&=~Pf,t&=~xc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Er(t),n=1<<r;e[r]=-1,t&=~n}}function n0(e){if((Se&6)!==0)throw Error(q(327));ci();var t=Nl(e,0);if((t&1)===0)return Wt(e,Je()),null;var r=Vl(e,t);if(e.tag!==0&&r===2){var n=vd(e);n!==0&&(t=n,r=Gd(e,n))}if(r===1)throw r=Ga,ms(e,0),_n(e,t),Wt(e,Je()),r;if(r===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ns(e,zt,Zr),Wt(e,Je()),null}function If(e,t){var r=Se;Se|=1;try{return e(t)}finally{Se=r,Se===0&&(vi=Je()+500,fc&&Jn())}}function js(e){Tn!==null&&Tn.tag===0&&(Se&6)===0&&ci();var t=Se;Se|=1;var r=pr.transition,n=Ee;try{if(pr.transition=null,Ee=1,e)return e()}finally{Ee=n,pr.transition=r,Se=t,(Se&6)===0&&Jn()}}function Rf(){Yt=Ys.current,De(Ys)}function ms(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Kj(r)),et!==null)for(r=et.return;r!==null;){var n=r;switch(ff(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Pl();break;case 3:xi(),De(Ht),De(Ct),kf();break;case 5:wf(n);break;case 4:xi();break;case 13:De($e);break;case 19:De($e);break;case 10:xf(n.type._context);break;case 22:case 23:Rf()}r=r.return}if(lt=e,et=e=zn(e.current,null),pt=Yt=t,it=0,Ga=null,Pf=xc=ks=0,zt=xa=null,us!==null){for(t=0;t<us.length;t++)if(r=us[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}us=null}return e}function Vv(e,t){do{var r=et;try{if(gf(),ol.current=Fl,$l){for(var n=ze.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}$l=!1}if(ws=0,ot=st=ze=null,pa=!1,Ha=0,Tf.current=null,r===null||r.return===null){it=1,Ga=t,et=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if((d.mode&1)===0&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Hp(o);if(f!==null){f.flags&=-257,qp(f,o,l,i,t),f.mode&1&&Vp(i,u,t),t=f,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if((t&1)===0){Vp(i,u,t),Df();break e}c=Error(q(426))}}else if(Oe&&l.mode&1){var b=Hp(o);if(b!==null){(b.flags&65536)===0&&(b.flags|=256),qp(b,o,l,i,t),mf(yi(c,l));break e}}i=c=yi(c,l),it!==4&&(it=2),xa===null?xa=[i]:xa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=_v(i,c,t);Mp(i,y);break e;case 1:l=c;var x=i.type,p=i.stateNode;if((i.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&($n===null||!$n.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=Cv(i,l,t);Mp(i,j);break e}}i=i.return}while(i!==null)}Wv(r)}catch(E){t=E,et===r&&r!==null&&(et=r=r.return);continue}break}while(!0)}function Hv(){var e=zl.current;return zl.current=Fl,e===null?Fl:e}function Df(){(it===0||it===3||it===2)&&(it=4),lt===null||(ks&268435455)===0&&(xc&268435455)===0||_n(lt,pt)}function Vl(e,t){var r=Se;Se|=2;var n=Hv();(lt!==e||pt!==t)&&(Zr=null,ms(e,t));do try{v2();break}catch(s){Vv(e,s)}while(!0);if(gf(),Se=r,zl.current=n,et!==null)throw Error(q(261));return lt=null,pt=0,it}function v2(){for(;et!==null;)qv(et)}function b2(){for(;et!==null&&!q1();)qv(et)}function qv(e){var t=Kv(e.alternate,e,Yt);e.memoizedProps=e.pendingProps,t===null?Wv(e):et=t,Tf.current=null}function Wv(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=h2(r,t,Yt),r!==null){et=r;return}}else{if(r=f2(r,t),r!==null){r.flags&=32767,et=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,et=null;return}}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);it===0&&(it=5)}function ns(e,t,r){var n=Ee,s=pr.transition;try{pr.transition=null,Ee=1,w2(e,t,r,n)}finally{pr.transition=s,Ee=n}return null}function w2(e,t,r,n){do ci();while(Tn!==null);if((Se&6)!==0)throw Error(q(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(tj(e,i),e===lt&&(et=lt=null,pt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Uo||(Uo=!0,Jv(Sl,function(){return ci(),null})),i=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||i){i=pr.transition,pr.transition=null;var o=Ee;Ee=1;var l=Se;Se|=4,Tf.current=null,p2(e,r),zv(r,e),Uj(Nd),_l=!!Sd,Nd=Sd=null,e.current=r,g2(r),W1(),Se=l,Ee=o,pr.transition=i}else e.current=r;if(Uo&&(Uo=!1,Tn=e,Bl=s),i=e.pendingLanes,i===0&&($n=null),J1(r.stateNode),Wt(e,Je()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ul)throw Ul=!1,e=qd,qd=null,e;return(Bl&1)!==0&&e.tag!==0&&ci(),i=e.pendingLanes,(i&1)!==0?e===Wd?ya++:(ya=0,Wd=e):ya=0,Jn(),null}function ci(){if(Tn!==null){var e=_y(Bl),t=pr.transition,r=Ee;try{if(pr.transition=null,Ee=16>e?16:e,Tn===null)var n=!1;else{if(e=Tn,Tn=null,Bl=0,(Se&6)!==0)throw Error(q(331));var s=Se;for(Se|=4,ee=e.current;ee!==null;){var i=ee,o=i.child;if((ee.flags&16)!==0){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:ga(8,d,i)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var m=d.sibling,f=d.return;if(Mv(d),d===u){ee=null;break}if(m!==null){m.return=f,ee=m;break}ee=f}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}ee=i}}if((i.subtreeFlags&2064)!==0&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:ga(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ee=y;break e}ee=i.return}}var x=e.current;for(ee=x;ee!==null;){o=ee;var p=o.child;if((o.subtreeFlags&2064)!==0&&p!==null)p.return=o,ee=p;else e:for(o=x;ee!==null;){if(l=ee,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:gc(9,l)}}catch(E){qe(l,l.return,E)}if(l===o){ee=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ee=j;break e}ee=l.return}}if(Se=s,Jn(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(lc,e)}catch{}n=!0}return n}finally{Ee=r,pr.transition=t}}return!1}function s0(e,t,r){t=yi(r,t),t=_v(e,t,1),e=Mn(e,t,1),t=Dt(),e!==null&&(oo(e,1,t),Wt(e,t))}function qe(e,t,r){if(e.tag===3)s0(e,e,r);else for(;t!==null;){if(t.tag===3){s0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($n===null||!$n.has(n))){e=yi(r,e),e=Cv(t,e,1),t=Mn(t,e,1),e=Dt(),t!==null&&(oo(t,1,e),Wt(t,e));break}}t=t.return}}function k2(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&r,lt===e&&(pt&r)===r&&(it===4||it===3&&(pt&130023424)===pt&&500>Je()-Af?ms(e,0):Pf|=r),Wt(e,t)}function Gv(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ao,Ao<<=1,(Ao&130023424)===0&&(Ao=4194304)));var r=Dt();e=un(e,t),e!==null&&(oo(e,t,r),Wt(e,r))}function j2(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Gv(e,r)}function S2(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(q(314))}n!==null&&n.delete(t),Gv(e,r)}var Kv;Kv=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Bt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Bt=!1,d2(e,t,r);Bt=(e.flags&131072)!==0}else Bt=!1,Oe&&(t.flags&1048576)!==0&&Yy(t,Rl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;cl(e,t),e=t.pendingProps;var s=mi(t,Ct.current);li(t,r),s=Sf(null,t,n,e,s,r);var i=Nf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qt(n)?(i=!0,Al(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vf(t),s.updater=pc,t.stateNode=s,s._reactInternals=t,Dd(t,n,e,r),t=Md(null,t,n,!0,i,r)):(t.tag=0,Oe&&i&&hf(t),At(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(cl(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=_2(n),e=Sr(n,e),s){case 0:t=Od(null,t,n,e,r);break e;case 1:t=Kp(null,t,n,e,r);break e;case 11:t=Wp(null,t,n,e,r);break e;case 14:t=Gp(null,t,n,Sr(n.type,e),r);break e}throw Error(q(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Sr(n,s),Od(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Sr(n,s),Kp(e,t,n,s,r);case 3:e:{if(Av(t),e===null)throw Error(q(387));n=t.pendingProps,i=t.memoizedState,s=i.element,sv(e,t),Ol(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=yi(Error(q(423)),t),t=Jp(e,t,n,r,s);break e}else if(n!==s){s=yi(Error(q(424)),t),t=Jp(e,t,n,r,s);break e}else for(er=On(t.stateNode.containerInfo.firstChild),rr=t,Oe=!0,Cr=null,r=rv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pi(),n===s){t=dn(e,t,r);break e}At(e,t,n,r)}t=t.child}return t;case 5:return iv(t),e===null&&Ad(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,_d(n,s)?o=null:i!==null&&_d(n,i)&&(t.flags|=32),Pv(e,t),At(e,t,o,r),t.child;case 6:return e===null&&Ad(t),null;case 13:return Iv(e,t,r);case 4:return bf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=gi(t,null,n,r):At(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Sr(n,s),Wp(e,t,n,s,r);case 7:return At(e,t,t.pendingProps,r),t.child;case 8:return At(e,t,t.pendingProps.children,r),t.child;case 12:return At(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ae(Dl,n._currentValue),n._currentValue=o,i!==null)if(Ar(i.value,o)){if(i.children===s.children&&!Ht.current){t=dn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=on(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Id(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Id(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}At(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,li(t,r),s=vr(s),n=n(s),t.flags|=1,At(e,t,n,r),t.child;case 14:return n=t.type,s=Sr(n,t.pendingProps),s=Sr(n.type,s),Gp(e,t,n,s,r);case 15:return Ev(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Sr(n,s),cl(e,t),t.tag=1,qt(n)?(e=!0,Al(t)):e=!1,li(t,r),Nv(t,n,s),Dd(t,n,s,r),Md(null,t,n,!0,e,r);case 19:return Rv(e,t,r);case 22:return Tv(e,t,r)}throw Error(q(156,t.tag))};function Jv(e,t){return ky(e,t)}function N2(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(e,t,r,n){return new N2(e,t,r,n)}function Lf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _2(e){if(typeof e=="function")return Lf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zh)return 11;if(e===ef)return 14}return 2}function zn(e,t){var r=e.alternate;return r===null?(r=fr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function hl(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Lf(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Bs:return ps(r.children,s,i,t);case Yh:o=8,s|=8;break;case sd:return e=fr(12,r,t,s|2),e.elementType=sd,e.lanes=i,e;case id:return e=fr(13,r,t,s),e.elementType=id,e.lanes=i,e;case ad:return e=fr(19,r,t,s),e.elementType=ad,e.lanes=i,e;case iy:return yc(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ny:o=10;break e;case sy:o=9;break e;case Zh:o=11;break e;case ef:o=14;break e;case jn:o=16,n=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=fr(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function ps(e,t,r,n){return e=fr(7,e,n,t),e.lanes=r,e}function yc(e,t,r,n){return e=fr(22,e,n,t),e.elementType=iy,e.lanes=r,e.stateNode={isHidden:!1},e}function du(e,t,r){return e=fr(6,e,null,t),e.lanes=r,e}function hu(e,t,r){return t=fr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function C2(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wc(0),this.expirationTimes=Wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wc(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Of(e,t,r,n,s,i,o,l,c){return e=new C2(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=fr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vf(i),e}function E2(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Us,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Xv(e){if(!e)return Hn;e=e._reactInternals;e:{if(_s(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var r=e.type;if(qt(r))return Xy(e,r,t)}return t}function Qv(e,t,r,n,s,i,o,l,c){return e=Of(r,n,!0,e,s,i,o,l,c),e.context=Xv(null),r=e.current,n=Dt(),s=Fn(r),i=on(n,s),i.callback=t??null,Mn(r,i,s),e.current.lanes=s,oo(e,s,n),Wt(e,n),e}function vc(e,t,r,n){var s=t.current,i=Dt(),o=Fn(s);return r=Xv(r),t.context===null?t.context=r:t.pendingContext=r,t=on(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Mn(s,t,o),e!==null&&(Tr(e,s,o,i),al(e,s,o)),o}function Hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function i0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Mf(e,t){i0(e,t),(e=e.alternate)&&i0(e,t)}function T2(){return null}var Yv=typeof reportError=="function"?reportError:function(e){console.error(e)};function $f(e){this._internalRoot=e}bc.prototype.render=$f.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));vc(e,t,null,null)};bc.prototype.unmount=$f.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;js(function(){vc(null,e,null,null)}),t[cn]=null}};function bc(e){this._internalRoot=e}bc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ty();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nn.length&&t!==0&&t<Nn[r].priority;r++);Nn.splice(r,0,e),r===0&&Ay(e)}};function Ff(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function a0(){}function P2(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Hl(o);i.call(u)}}var o=Qv(t,n,e,0,null,!1,!1,"",a0);return e._reactRootContainer=o,e[cn]=o.current,Fa(e.nodeType===8?e.parentNode:e),js(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Hl(c);l.call(u)}}var c=Of(e,0,!1,null,null,!1,!1,"",a0);return e._reactRootContainer=c,e[cn]=c.current,Fa(e.nodeType===8?e.parentNode:e),js(function(){vc(t,c,r,n)}),c}function kc(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Hl(o);l.call(c)}}vc(t,o,e,s)}else o=P2(r,t,e,s,n);return Hl(o)}Cy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=aa(t.pendingLanes);r!==0&&(nf(t,r|1),Wt(t,Je()),(Se&6)===0&&(vi=Je()+500,Jn()))}break;case 13:js(function(){var n=un(e,1);if(n!==null){var s=Dt();Tr(n,e,1,s)}}),Mf(e,1)}};sf=function(e){if(e.tag===13){var t=un(e,134217728);if(t!==null){var r=Dt();Tr(t,e,134217728,r)}Mf(e,134217728)}};Ey=function(e){if(e.tag===13){var t=Fn(e),r=un(e,t);if(r!==null){var n=Dt();Tr(r,e,t,n)}Mf(e,t)}};Ty=function(){return Ee};Py=function(e,t){var r=Ee;try{return Ee=e,t()}finally{Ee=r}};gd=function(e,t,r){switch(t){case"input":if(cd(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=hc(n);if(!s)throw Error(q(90));oy(n),cd(n,s)}}}break;case"textarea":cy(e,r);break;case"select":t=r.value,t!=null&&si(e,!!r.multiple,t,!1)}};gy=If;xy=js;var A2={usingClientEntryPoint:!1,Events:[co,Ws,hc,my,py,If]},Qi={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I2={bundleType:Qi.bundleType,version:Qi.version,rendererPackageName:Qi.rendererPackageName,rendererConfig:Qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=by(e),e===null?null:e.stateNode},findFiberByHostInstance:Qi.findFiberByHostInstance||T2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{lc=Bo.inject(I2),Hr=Bo}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A2;ir.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(t))throw Error(q(200));return E2(e,t,null,r)};ir.createRoot=function(e,t){if(!Ff(e))throw Error(q(299));var r=!1,n="",s=Yv;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Of(e,1,!1,null,null,r,!1,n,s),e[cn]=t.current,Fa(e.nodeType===8?e.parentNode:e),new $f(t)};ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=by(t),e=e===null?null:e.stateNode,e};ir.flushSync=function(e){return js(e)};ir.hydrate=function(e,t,r){if(!wc(t))throw Error(q(200));return kc(null,e,t,!0,r)};ir.hydrateRoot=function(e,t,r){if(!Ff(e))throw Error(q(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Yv;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Qv(t,null,e,1,r??null,s,!1,i,o),e[cn]=t.current,Fa(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new bc(t)};ir.render=function(e,t,r){if(!wc(t))throw Error(q(200));return kc(null,e,t,!1,r)};ir.unmountComponentAtNode=function(e){if(!wc(e))throw Error(q(40));return e._reactRootContainer?(js(function(){kc(null,null,e,!1,function(){e._reactRootContainer=null,e[cn]=null})}),!0):!1};ir.unstable_batchedUpdates=If;ir.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!wc(r))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return kc(e,t,r,!1,n)};ir.version="18.3.1-next-f1338f8080-20240426";function Zv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zv)}catch(e){console.error(e)}}Zv(),Zx.exports=ir;var R2=Zx.exports,o0=R2;rd.createRoot=o0.createRoot,rd.hydrateRoot=o0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ka.apply(this,arguments)}var Pn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pn||(Pn={}));const l0="popstate";function D2(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Jd("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ql(s)}return O2(t,r,null,e)}function Ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function eb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function L2(){return Math.random().toString(36).substr(2,8)}function c0(e,t){return{usr:e.state,key:e.key,idx:t}}function Jd(e,t,r,n){return r===void 0&&(r=null),Ka({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ti(t):t,{state:r,key:t&&t.key||n||L2()})}function ql(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ti(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function O2(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Pn.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ka({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Pn.Pop;let b=d(),y=b==null?null:b-u;u=b,c&&c({action:l,location:v.location,delta:y})}function m(b,y){l=Pn.Push;let x=Jd(v.location,b,y);u=d()+1;let p=c0(x,u),j=v.createHref(x);try{o.pushState(p,"",j)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(j)}i&&c&&c({action:l,location:v.location,delta:1})}function f(b,y){l=Pn.Replace;let x=Jd(v.location,b,y);u=d();let p=c0(x,u),j=v.createHref(x);o.replaceState(p,"",j),i&&c&&c({action:l,location:v.location,delta:0})}function g(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof b=="string"?b:ql(b);return x=x.replace(/ $/,"%20"),Ue(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let v={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(l0,h),c=b,()=>{s.removeEventListener(l0,h),c=null}},createHref(b){return t(s,b)},createURL:g,encodeLocation(b){let y=g(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:f,go(b){return o.go(b)}};return v}var u0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(u0||(u0={}));function M2(e,t,r){return r===void 0&&(r="/"),$2(e,t,r)}function $2(e,t,r,n){let s=typeof t=="string"?Ti(t):t,i=bi(s.pathname||"/",r);if(i==null)return null;let o=tb(e);F2(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=X2(i);l=K2(o[c],u)}return l}function tb(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ue(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Un([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Ue(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),tb(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:W2(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of rb(i.path))s(i,o,c)}),t}function rb(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=rb(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function F2(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:G2(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const z2=/^:[\w-]+$/,U2=3,B2=2,V2=1,H2=10,q2=-2,d0=e=>e==="*";function W2(e,t){let r=e.split("/"),n=r.length;return r.some(d0)&&(n+=q2),t&&(n+=B2),r.filter(s=>!d0(s)).reduce((s,i)=>s+(z2.test(i)?U2:i===""?V2:H2),n)}function G2(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function K2(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Xd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Un([i,h.pathname]),pathnameBase:eS(Un([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Un([i,h.pathnameBase]))}return o}function Xd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=J2(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:f}=d;if(m==="*"){let v=l[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[h];return f&&!g?u[m]=void 0:u[m]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function J2(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),eb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function X2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return eb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function bi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Q2(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Ti(e):e;return{pathname:r?r.startsWith("/")?r:Y2(r,t):t,search:tS(n),hash:rS(s)}}function Y2(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function fu(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Z2(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function zf(e,t){let r=Z2(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Uf(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Ti(e):(s=Ka({},e),Ue(!s.pathname||!s.pathname.includes("?"),fu("?","pathname","search",s)),Ue(!s.pathname||!s.pathname.includes("#"),fu("#","pathname","hash",s)),Ue(!s.search||!s.search.includes("#"),fu("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=Q2(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Un=e=>e.join("/").replace(/\/\/+/g,"/"),eS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nb=["post","put","patch","delete"];new Set(nb);const sS=["get",...nb];new Set(sS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ja.apply(this,arguments)}const jc=w.createContext(null),sb=w.createContext(null),gn=w.createContext(null),Sc=w.createContext(null),Jr=w.createContext({outlet:null,matches:[],isDataRoute:!1}),ib=w.createContext(null);function iS(e,t){let{relative:r}=t===void 0?{}:t;Pi()||Ue(!1);let{basename:n,navigator:s}=w.useContext(gn),{hash:i,pathname:o,search:l}=Nc(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Un([n,o])),s.createHref({pathname:c,search:l,hash:i})}function Pi(){return w.useContext(Sc)!=null}function Xr(){return Pi()||Ue(!1),w.useContext(Sc).location}function ab(e){w.useContext(gn).static||w.useLayoutEffect(e)}function Ai(){let{isDataRoute:e}=w.useContext(Jr);return e?bS():aS()}function aS(){Pi()||Ue(!1);let e=w.useContext(jc),{basename:t,future:r,navigator:n}=w.useContext(gn),{matches:s}=w.useContext(Jr),{pathname:i}=Xr(),o=JSON.stringify(zf(s,r.v7_relativeSplatPath)),l=w.useRef(!1);return ab(()=>{l.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=Uf(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Un([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}const oS=w.createContext(null);function lS(e){let t=w.useContext(Jr).outlet;return t&&w.createElement(oS.Provider,{value:e},t)}function Bf(){let{matches:e}=w.useContext(Jr),t=e[e.length-1];return t?t.params:{}}function Nc(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=w.useContext(gn),{matches:s}=w.useContext(Jr),{pathname:i}=Xr(),o=JSON.stringify(zf(s,n.v7_relativeSplatPath));return w.useMemo(()=>Uf(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function cS(e,t){return uS(e,t)}function uS(e,t,r,n){Pi()||Ue(!1);let{navigator:s}=w.useContext(gn),{matches:i}=w.useContext(Jr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Xr(),d;if(t){var h;let b=typeof t=="string"?Ti(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Ue(!1),d=b}else d=u;let m=d.pathname||"/",f=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=M2(e,{pathname:f}),v=pS(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Un([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Un([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&v?w.createElement(Sc.Provider,{value:{location:Ja({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Pn.Pop}},v):v}function dS(){let e=vS(),t=nS(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,null)}const hS=w.createElement(dS,null);class fS extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(Jr.Provider,{value:this.props.routeContext},w.createElement(ib.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mS(e){let{routeContext:t,match:r,children:n}=e,s=w.useContext(jc);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(Jr.Provider,{value:t},n)}function pS(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Ue(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:f}=r,g=h.route.loader&&m[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let f,g=!1,v=null,b=null;r&&(f=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||hS,c&&(u<0&&m===0?(wS("route-fallback"),g=!0,b=null):u===m&&(g=!0,b=h.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,m+1)),x=()=>{let p;return f?p=v:g?p=b:h.route.Component?p=w.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=d,w.createElement(mS,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:p})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?w.createElement(fS,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var ob=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(ob||{}),lb=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(lb||{});function gS(e){let t=w.useContext(jc);return t||Ue(!1),t}function xS(e){let t=w.useContext(sb);return t||Ue(!1),t}function yS(e){let t=w.useContext(Jr);return t||Ue(!1),t}function cb(e){let t=yS(),r=t.matches[t.matches.length-1];return r.route.id||Ue(!1),r.route.id}function vS(){var e;let t=w.useContext(ib),r=xS(),n=cb();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function bS(){let{router:e}=gS(ob.UseNavigateStable),t=cb(lb.UseNavigateStable),r=w.useRef(!1);return ab(()=>{r.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ja({fromRouteId:t},i)))},[e,t])}const h0={};function wS(e,t,r){h0[e]||(h0[e]=!0)}function kS(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function jS(e){let{to:t,replace:r,state:n,relative:s}=e;Pi()||Ue(!1);let{future:i,static:o}=w.useContext(gn),{matches:l}=w.useContext(Jr),{pathname:c}=Xr(),u=Ai(),d=Uf(t,zf(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return w.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function SS(e){return lS(e.context)}function ht(e){Ue(!1)}function NS(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Pn.Pop,navigator:i,static:o=!1,future:l}=e;Pi()&&Ue(!1);let c=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Ja({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Ti(n));let{pathname:d="/",search:h="",hash:m="",state:f=null,key:g="default"}=n,v=w.useMemo(()=>{let b=bi(d,c);return b==null?null:{location:{pathname:b,search:h,hash:m,state:f,key:g},navigationType:s}},[c,d,h,m,f,g,s]);return v==null?null:w.createElement(gn.Provider,{value:u},w.createElement(Sc.Provider,{children:r,value:v}))}function _S(e){let{children:t,location:r}=e;return cS(Qd(t),r)}new Promise(()=>{});function Qd(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let i=[...t,s];if(n.type===w.Fragment){r.push.apply(r,Qd(n.props.children,i));return}n.type!==ht&&Ue(!1),!n.props.index||!n.props.children||Ue(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Qd(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wl.apply(this,arguments)}function ub(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function CS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ES(e,t){return e.button===0&&(!t||t==="_self")&&!CS(e)}const TS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],AS="6";try{window.__reactRouterVersion=AS}catch{}const IS=w.createContext({isTransitioning:!1}),RS="startTransition",f0=k1[RS];function DS(e){let{basename:t,children:r,future:n,window:s}=e,i=w.useRef();i.current==null&&(i.current=D2({window:s,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=w.useCallback(h=>{u&&f0?f0(()=>c(h)):c(h)},[c,u]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>kS(n),[n]),w.createElement(NS,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const LS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gl=w.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=ub(t,TS),{basename:f}=w.useContext(gn),g,v=!1;if(typeof u=="string"&&OS.test(u)&&(g=u,LS))try{let p=new URL(window.location.href),j=u.startsWith("//")?new URL(p.protocol+u):new URL(u),E=bi(j.pathname,f);j.origin===p.origin&&E!=null?u=E+j.search+j.hash:v=!0}catch{}let b=iS(u,{relative:s}),y=FS(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function x(p){n&&n(p),p.defaultPrevented||y(p)}return w.createElement("a",Wl({},m,{href:g||b,onClick:v||i?n:x,ref:r,target:c}))}),MS=w.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=ub(t,PS),m=Nc(c,{relative:h.relative}),f=Xr(),g=w.useContext(sb),{navigator:v,basename:b}=w.useContext(gn),y=g!=null&&zS(m)&&u===!0,x=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,p=f.pathname,j=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(p=p.toLowerCase(),j=j?j.toLowerCase():null,x=x.toLowerCase()),j&&b&&(j=bi(j,b)||j);const E=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=p===x||!o&&p.startsWith(x)&&p.charAt(E)==="/",C=j!=null&&(j===x||!o&&j.startsWith(x)&&j.charAt(x.length)==="/"),T={isActive:N,isPending:C,isTransitioning:y},D=N?n:void 0,R;typeof i=="function"?R=i(T):R=[i,N?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(T):l;return w.createElement(Gl,Wl({},h,{"aria-current":D,className:R,ref:r,style:P,to:c,viewTransition:u}),typeof d=="function"?d(T):d)});var Yd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Yd||(Yd={}));var m0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(m0||(m0={}));function $S(e){let t=w.useContext(jc);return t||Ue(!1),t}function FS(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ai(),u=Xr(),d=Nc(e,{relative:o});return w.useCallback(h=>{if(ES(h,r)){h.preventDefault();let m=n!==void 0?n:ql(u)===ql(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function zS(e,t){t===void 0&&(t={});let r=w.useContext(IS);r==null&&Ue(!1);let{basename:n}=$S(Yd.useViewTransitionState),s=Nc(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=bi(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=bi(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Xd(s.pathname,o)!=null||Xd(s.pathname,i)!=null}function US(e,t={}){const r=w.useRef(null),n=w.useRef(null),s=w.useRef(0),i=t.maxReconnectAttempts||10,o=t.reconnectDelay||3e3,l=()=>{try{r.current=new WebSocket(e),r.current.onopen=c=>{console.log("WebSocket connected"),s.current=0,t.onOpen&&t.onOpen(c)},r.current.onmessage=c=>{t.onMessage&&t.onMessage(c)},r.current.onerror=c=>{console.error("WebSocket error:",c),t.onError&&t.onError(c)},r.current.onclose=c=>{console.log("WebSocket closed"),t.onClose&&t.onClose(c),s.current<i&&(s.current++,console.log(`Reconnecting... (attempt ${s.current}/${i})`),n.current=setTimeout(()=>{l()},o))}}catch(c){console.error("Failed to create WebSocket:",c)}};return w.useEffect(()=>(l(),()=>{n.current&&clearTimeout(n.current),r.current&&r.current.close()}),[e]),r.current}function db(e,t){const[r,n]=w.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return w.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(r))}catch(i){console.error(`Error saving to localStorage key "${e}":`,i)}},[e,r]),[r,i=>{try{const o=i instanceof Function?i(r):i;n(o)}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}}]}function BS(){const[e,t]=db("leo-dashboard-preferences",{theme:"light",sidebarCollapsed:!1,refreshInterval:3e4,notifications:!0,compactView:!1});return{preferences:e,updatePreference:(n,s)=>{t(i=>({...i,[n]:s}))}}}function mu(e,t){const[r,n]=db(`leo-dashboard-${e}`,t);return[r,n,()=>{window.localStorage.removeItem(`leo-dashboard-${e}`),n(t)}]}const Vf=w.createContext({});function Hf(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const qf=typeof window<"u",hb=qf?w.useLayoutEffect:w.useEffect,_c=w.createContext(null);function Wf(e,t){e.indexOf(t)===-1&&e.push(t)}function Gf(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const hn=(e,t,r)=>r>t?t:r<e?e:r;let Kf=()=>{};const fn={},fb=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function mb(e){return typeof e=="object"&&e!==null}const pb=e=>/^0[^.\s]+$/u.test(e);function Jf(e){let t;return()=>(t===void 0&&(t=e()),t)}const gr=e=>e,VS=(e,t)=>r=>t(e(r)),ho=(...e)=>e.reduce(VS),Xa=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class Xf{constructor(){this.subscriptions=[]}add(t){return Wf(this.subscriptions,t),()=>Gf(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wr=e=>e*1e3,mr=e=>e/1e3;function gb(e,t){return t?e*(1e3/t):0}const xb=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,HS=1e-7,qS=12;function WS(e,t,r,n,s){let i,o,l=0;do o=t+(r-t)/2,i=xb(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>HS&&++l<qS);return o}function fo(e,t,r,n){if(e===t&&r===n)return gr;const s=i=>WS(i,0,1,e,r);return i=>i===0||i===1?i:xb(s(i),t,n)}const yb=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,vb=e=>t=>1-e(1-t),bb=fo(.33,1.53,.69,.99),Qf=vb(bb),wb=yb(Qf),kb=e=>(e*=2)<1?.5*Qf(e):.5*(2-Math.pow(2,-10*(e-1))),Yf=e=>1-Math.sin(Math.acos(e)),jb=vb(Yf),Sb=yb(Yf),GS=fo(.42,0,1,1),KS=fo(0,0,.58,1),Nb=fo(.42,0,.58,1),JS=e=>Array.isArray(e)&&typeof e[0]!="number",_b=e=>Array.isArray(e)&&typeof e[0]=="number",XS={linear:gr,easeIn:GS,easeInOut:Nb,easeOut:KS,circIn:Yf,circInOut:Sb,circOut:jb,backIn:Qf,backInOut:wb,backOut:bb,anticipate:kb},QS=e=>typeof e=="string",p0=e=>{if(_b(e)){Kf(e.length===4);const[t,r,n,s]=e;return fo(t,r,n,s)}else if(QS(e))return XS[e];return e},Vo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function YS(e,t){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,h=!1,m=!1)=>{const g=m&&s?r:n;return h&&o.add(d),g.has(d)||g.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const ZS=40;function Cb(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=Vo.reduce((p,j)=>(p[j]=YS(i),p),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:m,render:f,postRender:g}=o,v=()=>{const p=fn.useManualTiming?s.timestamp:performance.now();r=!1,fn.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(p-s.timestamp,ZS),1)),s.timestamp=p,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),m.process(s),f.process(s),g.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(v))},b=()=>{r=!0,n=!0,s.isProcessing||e(v)};return{schedule:Vo.reduce((p,j)=>{const E=o[j];return p[j]=(N,C=!1,T=!1)=>(r||b(),E.schedule(N,C,T)),p},{}),cancel:p=>{for(let j=0;j<Vo.length;j++)o[Vo[j]].cancel(p)},state:s,steps:o}}const{schedule:Me,cancel:qn,state:mt,steps:pu}=Cb(typeof requestAnimationFrame<"u"?requestAnimationFrame:gr,!0);let fl;function eN(){fl=void 0}const Vt={now:()=>(fl===void 0&&Vt.set(mt.isProcessing||fn.useManualTiming?mt.timestamp:performance.now()),fl),set:e=>{fl=e,queueMicrotask(eN)}},Eb=e=>t=>typeof t=="string"&&t.startsWith(e),Zf=Eb("--"),tN=Eb("var(--"),em=e=>tN(e)?rN.test(e.split("/*")[0].trim()):!1,rN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ii={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Qa={...Ii,transform:e=>hn(0,1,e)},Ho={...Ii,default:1},va=e=>Math.round(e*1e5)/1e5,tm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function nN(e){return e==null}const sN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rm=(e,t)=>r=>!!(typeof r=="string"&&sN.test(r)&&r.startsWith(e)||t&&!nN(r)&&Object.prototype.hasOwnProperty.call(r,t)),Tb=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,l]=n.match(tm);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},iN=e=>hn(0,255,e),gu={...Ii,transform:e=>Math.round(iN(e))},hs={test:rm("rgb","red"),parse:Tb("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+gu.transform(e)+", "+gu.transform(t)+", "+gu.transform(r)+", "+va(Qa.transform(n))+")"};function aN(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Zd={test:rm("#"),parse:aN,transform:hs.transform},mo=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),bn=mo("deg"),Gr=mo("%"),oe=mo("px"),oN=mo("vh"),lN=mo("vw"),g0={...Gr,parse:e=>Gr.parse(e)/100,transform:e=>Gr.transform(e*100)},Zs={test:rm("hsl","hue"),parse:Tb("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Gr.transform(va(t))+", "+Gr.transform(va(r))+", "+va(Qa.transform(n))+")"},Ze={test:e=>hs.test(e)||Zd.test(e)||Zs.test(e),parse:e=>hs.test(e)?hs.parse(e):Zs.test(e)?Zs.parse(e):Zd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?hs.transform(e):Zs.transform(e),getAnimatableNone:e=>{const t=Ze.parse(e);return t.alpha=0,Ze.transform(t)}},cN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uN(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(tm))==null?void 0:t.length)||0)+(((r=e.match(cN))==null?void 0:r.length)||0)>0}const Pb="number",Ab="color",dN="var",hN="var(",x0="${}",fN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ya(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(fN,c=>(Ze.test(c)?(n.color.push(i),s.push(Ab),r.push(Ze.parse(c))):c.startsWith(hN)?(n.var.push(i),s.push(dN),r.push(c)):(n.number.push(i),s.push(Pb),r.push(parseFloat(c))),++i,x0)).split(x0);return{values:r,split:l,indexes:n,types:s}}function Ib(e){return Ya(e).values}function Rb(e){const{split:t,types:r}=Ya(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const l=r[o];l===Pb?i+=va(s[o]):l===Ab?i+=Ze.transform(s[o]):i+=s[o]}return i}}const mN=e=>typeof e=="number"?0:Ze.test(e)?Ze.getAnimatableNone(e):e;function pN(e){const t=Ib(e);return Rb(e)(t.map(mN))}const Wn={test:uN,parse:Ib,createTransformer:Rb,getAnimatableNone:pN};function xu(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function gN({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=xu(c,l,e+1/3),i=xu(c,l,e),o=xu(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Kl(e,t){return r=>r>0?t:e}const Fe=(e,t,r)=>e+(t-e)*r,yu=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},xN=[Zd,hs,Zs],yN=e=>xN.find(t=>t.test(e));function y0(e){const t=yN(e);if(!t)return!1;let r=t.parse(e);return t===Zs&&(r=gN(r)),r}const v0=(e,t)=>{const r=y0(e),n=y0(t);if(!r||!n)return Kl(e,t);const s={...r};return i=>(s.red=yu(r.red,n.red,i),s.green=yu(r.green,n.green,i),s.blue=yu(r.blue,n.blue,i),s.alpha=Fe(r.alpha,n.alpha,i),hs.transform(s))},eh=new Set(["none","hidden"]);function vN(e,t){return eh.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function bN(e,t){return r=>Fe(e,t,r)}function nm(e){return typeof e=="number"?bN:typeof e=="string"?em(e)?Kl:Ze.test(e)?v0:jN:Array.isArray(e)?Db:typeof e=="object"?Ze.test(e)?v0:wN:Kl}function Db(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>nm(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function wN(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=nm(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function kN(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][n[i]],l=e.values[o]??0;r[s]=l,n[i]++}return r}const jN=(e,t)=>{const r=Wn.createTransformer(t),n=Ya(e),s=Ya(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?eh.has(e)&&!s.values.length||eh.has(t)&&!n.values.length?vN(e,t):ho(Db(kN(n,s),s.values),r):Kl(e,t)};function Lb(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Fe(e,t,r):nm(e)(e,t)}const SN=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Me.update(t,r),stop:()=>qn(t),now:()=>mt.isProcessing?mt.timestamp:Vt.now()}},Ob=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Jl=2e4;function sm(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Jl;)t+=r,n=e.next(t);return t>=Jl?1/0:t}function NN(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(sm(n),Jl);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:mr(s)}}const _N=5;function Mb(e,t,r){const n=Math.max(t-_N,0);return gb(r-e(n),t-n)}const He={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vu=.001;function CN({duration:e=He.duration,bounce:t=He.bounce,velocity:r=He.velocity,mass:n=He.mass}){let s,i,o=1-t;o=hn(He.minDamping,He.maxDamping,o),e=hn(He.minDuration,He.maxDuration,mr(e)),o<1?(s=u=>{const d=u*o,h=d*e,m=d-r,f=th(u,o),g=Math.exp(-h);return vu-m/f*g},i=u=>{const h=u*o*e,m=h*r+r,f=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-h),v=th(Math.pow(u,2),o);return(-s(u)+vu>0?-1:1)*((m-f)*g)/v}):(s=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-vu+d*h},i=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=TN(s,i,l);if(e=Wr(e),isNaN(c))return{stiffness:He.stiffness,damping:He.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const EN=12;function TN(e,t,r){let n=r;for(let s=1;s<EN;s++)n=n-e(n)/t(n);return n}function th(e,t){return e*Math.sqrt(1-t*t)}const PN=["duration","bounce"],AN=["stiffness","damping","mass"];function b0(e,t){return t.some(r=>e[r]!==void 0)}function IN(e){let t={velocity:He.velocity,stiffness:He.stiffness,damping:He.damping,mass:He.mass,isResolvedFromDuration:!1,...e};if(!b0(e,AN)&&b0(e,PN))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*hn(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:He.mass,stiffness:s,damping:i}}else{const r=CN(e);t={...t,...r,mass:He.mass},t.isResolvedFromDuration=!0}return t}function Xl(e=He.visualDuration,t=He.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:f}=IN({...r,velocity:-mr(r.velocity||0)}),g=m||0,v=u/(2*Math.sqrt(c*d)),b=o-i,y=mr(Math.sqrt(c/d)),x=Math.abs(b)<5;n||(n=x?He.restSpeed.granular:He.restSpeed.default),s||(s=x?He.restDelta.granular:He.restDelta.default);let p;if(v<1){const E=th(y,v);p=N=>{const C=Math.exp(-v*y*N);return o-C*((g+v*y*b)/E*Math.sin(E*N)+b*Math.cos(E*N))}}else if(v===1)p=E=>o-Math.exp(-y*E)*(b+(g+y*b)*E);else{const E=y*Math.sqrt(v*v-1);p=N=>{const C=Math.exp(-v*y*N),T=Math.min(E*N,300);return o-C*((g+v*y*b)*Math.sinh(T)+E*b*Math.cosh(T))/E}}const j={calculatedDuration:f&&h||null,next:E=>{const N=p(E);if(f)l.done=E>=h;else{let C=E===0?g:0;v<1&&(C=E===0?Wr(g):Mb(p,E,N));const T=Math.abs(C)<=n,D=Math.abs(o-N)<=s;l.done=T&&D}return l.value=l.done?o:N,l},toString:()=>{const E=Math.min(sm(j),Jl),N=Ob(C=>j.next(E*C).value,E,30);return E+"ms "+N},toTransition:()=>{}};return j}Xl.applyToOptions=e=>{const t=NN(e,100,Xl);return e.ease=t.ease,e.duration=Wr(t.duration),e.type="keyframes",e};function rh({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],m={done:!1,value:h},f=T=>l!==void 0&&T<l||c!==void 0&&T>c,g=T=>l===void 0?c:c===void 0||Math.abs(l-T)<Math.abs(c-T)?l:c;let v=r*t;const b=h+v,y=o===void 0?b:o(b);y!==b&&(v=y-h);const x=T=>-v*Math.exp(-T/n),p=T=>y+x(T),j=T=>{const D=x(T),R=p(T);m.done=Math.abs(D)<=u,m.value=m.done?y:R};let E,N;const C=T=>{f(m.value)&&(E=T,N=Xl({keyframes:[m.value,g(m.value)],velocity:Mb(p,T,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:T=>{let D=!1;return!N&&E===void 0&&(D=!0,j(T),C(T)),E!==void 0&&T>=E?N.next(T-E):(!D&&j(T),m)}}}function RN(e,t,r){const n=[],s=r||fn.mix||Lb,i=e.length-1;for(let o=0;o<i;o++){let l=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||gr:t;l=ho(c,l)}n.push(l)}return n}function DN(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(Kf(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=RN(t,n,s),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=Xa(e[h],e[h+1],d);return l[h](m)};return r?d=>u(hn(e[0],e[i-1],d)):u}function LN(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Xa(0,t,n);e.push(Fe(r,1,s))}}function ON(e){const t=[0];return LN(t,e.length-1),t}function MN(e,t){return e.map(r=>r*t)}function $N(e,t){return e.map(()=>t||Nb).splice(0,e.length-1)}function ba({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=JS(n)?n.map(p0):p0(n),i={done:!1,value:t[0]},o=MN(r&&r.length===t.length?r:ON(t),e),l=DN(o,t,{ease:Array.isArray(s)?s:$N(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const FN=e=>e!==null;function im(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(FN),l=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const zN={decay:rh,inertia:rh,tween:ba,keyframes:ba,spring:Xl};function $b(e){typeof e.type=="string"&&(e.type=zN[e.type])}class am{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const UN=e=>e/100;class om extends am{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:r}=this.options;r&&r.updatedAt!==Vt.now()&&this.tick(Vt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;$b(t);const{type:r=ba,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=r||ba;c!==ba&&typeof l[0]!="number"&&(this.mixKeyframes=ho(UN,Lb(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=sm(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:f,type:g,onUpdate:v,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let p=this.currentTime,j=n;if(h){const T=Math.min(this.currentTime,s)/l;let D=Math.floor(T),R=T%1;!R&&T>=1&&(R=1),R===1&&D--,D=Math.min(D,h+1),!!(D%2)&&(m==="reverse"?(R=1-R,f&&(R-=f/l)):m==="mirror"&&(j=o)),p=hn(0,1,R)*l}const E=x?{done:!1,value:d[0]}:j.next(p);i&&(E.value=i(E.value));let{done:N}=E;!x&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return C&&g!==rh&&(E.value=im(d,this.options,b,this.speed)),v&&v(E.value),C&&this.finish(),E}then(t,r){return this.finished.then(t,r)}get duration(){return mr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+mr(t)}get time(){return mr(this.currentTime)}set time(t){var r;t=Wr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Vt.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=mr(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=SN,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function BN(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const fs=e=>e*180/Math.PI,nh=e=>{const t=fs(Math.atan2(e[1],e[0]));return sh(t)},VN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:nh,rotateZ:nh,skewX:e=>fs(Math.atan(e[1])),skewY:e=>fs(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},sh=e=>(e=e%360,e<0&&(e+=360),e),w0=nh,k0=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),j0=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),HN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:k0,scaleY:j0,scale:e=>(k0(e)+j0(e))/2,rotateX:e=>sh(fs(Math.atan2(e[6],e[5]))),rotateY:e=>sh(fs(Math.atan2(-e[2],e[0]))),rotateZ:w0,rotate:w0,skewX:e=>fs(Math.atan(e[4])),skewY:e=>fs(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ih(e){return e.includes("scale")?1:0}function ah(e,t){if(!e||e==="none")return ih(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=HN,s=r;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=VN,s=l}if(!s)return ih(t);const i=n[t],o=s[1].split(",").map(WN);return typeof i=="function"?i(o):o[i]}const qN=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return ah(r,t)};function WN(e){return parseFloat(e.trim())}const Ri=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Di=new Set(Ri),S0=e=>e===Ii||e===oe,GN=new Set(["x","y","z"]),KN=Ri.filter(e=>!GN.has(e));function JN(e){const t=[];return KN.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const gs={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ah(t,"x"),y:(e,{transform:t})=>ah(t,"y")};gs.translateX=gs.x;gs.translateY=gs.y;const xs=new Set;let oh=!1,lh=!1,ch=!1;function Fb(){if(lh){const e=Array.from(xs).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=JN(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var l;(l=n.getValue(i))==null||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}lh=!1,oh=!1,xs.forEach(e=>e.complete(ch)),xs.clear()}function zb(){xs.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lh=!0)})}function XN(){ch=!0,zb(),Fb(),ch=!1}class lm{constructor(t,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(xs.add(this),oh||(oh=!0,Me.read(zb),Me.resolveKeyframes(Fb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const l=n.readValue(r,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}BN(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),xs.delete(this)}cancel(){this.state==="scheduled"&&(xs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const QN=e=>e.startsWith("--");function YN(e,t,r){QN(t)?e.style.setProperty(t,r):e.style[t]=r}const ZN=Jf(()=>window.ScrollTimeline!==void 0),e_={};function t_(e,t){const r=Jf(e);return()=>e_[t]??r()}const Ub=t_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),la=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,N0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:la([0,.65,.55,1]),circOut:la([.55,0,1,.45]),backIn:la([.31,.01,.66,-.59]),backOut:la([.33,1.53,.69,.99])};function Bb(e,t){if(e)return typeof e=="function"?Ub()?Ob(e,t):"ease-out":_b(e)?la(e):Array.isArray(e)?e.map(r=>Bb(r,t)||N0.easeOut):N0[e]}function r_(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const h=Bb(l,s);Array.isArray(h)&&(d.easing=h);const m={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(d,m)}function Vb(e){return typeof e=="function"&&"applyToOptions"in e}function n_({type:e,...t}){return Vb(e)&&Ub()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class s_ extends am{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Kf(typeof t.type!="string");const u=n_(t);this.animation=r_(r,n,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=im(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):YN(r,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,n;const t=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return mr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+mr(t)}get time(){return mr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Wr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&ZN()?(this.animation.timeline=t,gr):r(this)}}const Hb={anticipate:kb,backInOut:wb,circInOut:Sb};function i_(e){return e in Hb}function a_(e){typeof e.ease=="string"&&i_(e.ease)&&(e.ease=Hb[e.ease])}const _0=10;class o_ extends s_{constructor(t){a_(t),$b(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const l=new om({...o,autoplay:!1}),c=Wr(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-_0).value,l.sample(c).value,_0),l.stop()}}const C0=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Wn.test(e)||e==="0")&&!e.startsWith("url("));function l_(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function c_(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=C0(s,t),l=C0(i,t);return!o||!l?!1:l_(e)||(r==="spring"||Vb(r))&&n}function uh(e){e.duration=0,e.type="keyframes"}const u_=new Set(["opacity","clipPath","filter","transform"]),d_=Jf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function h_(e){var d;const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:i,type:o}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return d_()&&r&&u_.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&i!==0&&o!=="inertia"}const f_=40;class m_ extends am{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var g;super(),this.stop=()=>{var v,b;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Vt.now();const m={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...h},f=(d==null?void 0:d.KeyframeResolver)||lm;this.keyframeResolver=new f(l,(v,b,y)=>this.onKeyframesResolved(v,b,m,!y),c,u,d),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=Vt.now(),c_(t,i,o,l)||((fn.instantAnimations||!c)&&(d==null||d(im(t,n,r))),t[0]=t[t.length-1],uh(n),n.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>f_?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},f=!u&&h_(m)?new o_({...m,element:m.motionValue.owner.current}):new om(m);f.finished.then(()=>this.notifyFinished()).catch(gr),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),XN()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const p_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g_(e){const t=p_.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function qb(e,t,r=1){const[n,s]=g_(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return fb(o)?parseFloat(o):o}return em(s)?qb(s,t,r+1):s}function cm(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Wb=new Set(["width","height","top","left","right","bottom",...Ri]),x_={test:e=>e==="auto",parse:e=>e},Gb=e=>t=>t.test(e),Kb=[Ii,oe,Gr,bn,lN,oN,x_],E0=e=>Kb.find(Gb(e));function y_(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||pb(e):!0}const v_=new Set(["brightness","contrast","saturate","opacity"]);function b_(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(tm)||[];if(!n)return e;const s=r.replace(n,"");let i=v_.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const w_=/\b([a-z-]*)\(.*?\)/gu,dh={...Wn,getAnimatableNone:e=>{const t=e.match(w_);return t?t.map(b_).join(" "):e}},T0={...Ii,transform:Math.round},k_={rotate:bn,rotateX:bn,rotateY:bn,rotateZ:bn,scale:Ho,scaleX:Ho,scaleY:Ho,scaleZ:Ho,skew:bn,skewX:bn,skewY:bn,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:Qa,originX:g0,originY:g0,originZ:oe},um={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,backgroundPositionX:oe,backgroundPositionY:oe,...k_,zIndex:T0,fillOpacity:Qa,strokeOpacity:Qa,numOctaves:T0},j_={...um,color:Ze,backgroundColor:Ze,outlineColor:Ze,fill:Ze,stroke:Ze,borderColor:Ze,borderTopColor:Ze,borderRightColor:Ze,borderBottomColor:Ze,borderLeftColor:Ze,filter:dh,WebkitFilter:dh},Jb=e=>j_[e];function Xb(e,t){let r=Jb(e);return r!==dh&&(r=Wn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const S_=new Set(["auto","none","0"]);function N_(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!S_.has(i)&&Ya(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=Xb(r,s)}class __ extends lm{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),em(u))){const d=qb(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Wb.has(n)||t.length!==2)return;const[s,i]=t,o=E0(s),l=E0(i);if(o!==l)if(S0(o)&&S0(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else gs[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||y_(t[s]))&&n.push(s);n.length&&N_(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gs[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=gs[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function C_(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=(r==null?void 0:r[e])??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Qb=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Yb(e){return mb(e)&&"offsetHeight"in e}const P0=30,E_=e=>!isNaN(parseFloat(e));class T_{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const s=Vt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Vt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=E_(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Xf);const n=this.events[t].add(r);return t==="change"?()=>{n(),Me.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Vt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>P0)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,P0);return gb(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wi(e,t){return new T_(e,t)}const{schedule:dm}=Cb(queueMicrotask,!1),jr={x:!1,y:!1};function Zb(){return jr.x||jr.y}function P_(e){return e==="x"||e==="y"?jr[e]?null:(jr[e]=!0,()=>{jr[e]=!1}):jr.x||jr.y?null:(jr.x=jr.y=!0,()=>{jr.x=jr.y=!1})}function ew(e,t){const r=C_(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function A0(e){return!(e.pointerType==="touch"||Zb())}function A_(e,t,r={}){const[n,s,i]=ew(e,r),o=l=>{if(!A0(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{A0(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const tw=(e,t)=>t?e===t?!0:tw(e,t.parentElement):!1,hm=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,I_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function R_(e){return I_.has(e.tagName)||e.tabIndex!==-1}const ml=new WeakSet;function I0(e){return t=>{t.key==="Enter"&&e(t)}}function bu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const D_=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=I0(()=>{if(ml.has(r))return;bu(r,"down");const s=I0(()=>{bu(r,"up")}),i=()=>bu(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function R0(e){return hm(e)&&!Zb()}function L_(e,t,r={}){const[n,s,i]=ew(e,r),o=l=>{const c=l.currentTarget;if(!R0(l))return;ml.add(c);const u=t(c,l),d=(f,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),ml.has(c)&&ml.delete(c),R0(f)&&typeof u=="function"&&u(f,{success:g})},h=f=>{d(f,c===window||c===document||r.useGlobalTarget||tw(c,f.target))},m=f=>{d(f,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",m,s)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),Yb(l)&&(l.addEventListener("focus",u=>D_(u,s)),!R_(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function rw(e){return mb(e)&&"ownerSVGElement"in e}function O_(e){return rw(e)&&e.tagName==="svg"}const St=e=>!!(e&&e.getVelocity),M_=[...Kb,Ze,Wn],$_=e=>M_.find(Gb(e)),fm=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function D0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function F_(...e){return t=>{let r=!1;const n=e.map(s=>{const i=D0(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():D0(e[s],null)}}}}function z_(...e){return w.useCallback(F_(...e),e)}class U_ extends w.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=Yb(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function B_({children:e,isPresent:t,anchorX:r,root:n}){const s=w.useId(),i=w.useRef(null),o=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=w.useContext(fm),c=z_(i,e==null?void 0:e.ref);return w.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:m,right:f}=o.current;if(t||!i.current||!u||!d)return;const g=r==="left"?`left: ${m}`:`right: ${f}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");l&&(v.nonce=l);const b=n??document.head;return b.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${g}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(v)&&b.removeChild(v)}},[t]),a.jsx(U_,{isPresent:t,childRef:i,sizeRef:o,children:w.cloneElement(e,{ref:c})})}const V_=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const u=Hf(H_),d=w.useId();let h=!0,m=w.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:f=>{u.set(f,!0);for(const g of u.values())if(!g)return;n&&n()},register:f=>(u.set(f,!1),()=>u.delete(f))}),[r,u,n]);return i&&h&&(m={...m}),w.useMemo(()=>{u.forEach((f,g)=>u.set(g,!1))},[r]),w.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(e=a.jsx(B_,{isPresent:r,anchorX:l,root:c,children:e})),a.jsx(_c.Provider,{value:m,children:e})};function H_(){return new Map}function nw(e=!0){const t=w.useContext(_c);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=w.useId();w.useEffect(()=>{if(e)return s(i)},[e]);const o=w.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const qo=e=>e.key||"";function L0(e){const t=[];return w.Children.forEach(e,r=>{w.isValidElement(r)&&t.push(r)}),t}const Mr=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=nw(o),h=w.useMemo(()=>L0(e),[e]),m=o&&!u?[]:h.map(qo),f=w.useRef(!0),g=w.useRef(h),v=Hf(()=>new Map),[b,y]=w.useState(h),[x,p]=w.useState(h);hb(()=>{f.current=!1,g.current=h;for(let N=0;N<x.length;N++){const C=qo(x[N]);m.includes(C)?v.delete(C):v.get(C)!==!0&&v.set(C,!1)}},[x,m.length,m.join("-")]);const j=[];if(h!==b){let N=[...h];for(let C=0;C<x.length;C++){const T=x[C],D=qo(T);m.includes(D)||(N.splice(C,0,T),j.push(T))}return i==="wait"&&j.length&&(N=j),p(L0(N)),y(h),null}const{forceRender:E}=w.useContext(Vf);return a.jsx(a.Fragment,{children:x.map(N=>{const C=qo(N),T=o&&!u?!1:h===x||m.includes(C),D=()=>{if(v.has(C))v.set(C,!0);else return;let R=!0;v.forEach(P=>{P||(R=!1)}),R&&(E==null||E(),p(g.current),o&&(d==null||d()),n&&n())};return a.jsx(V_,{isPresent:T,initial:!f.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:T?void 0:D,anchorX:l,children:N},C)})})},sw=w.createContext({strict:!1}),O0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ki={};for(const e in O0)ki[e]={isEnabled:t=>O0[e].some(r=>!!t[r])};function q_(e){for(const t in e)ki[t]={...ki[t],...e[t]}}const W_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ql(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||W_.has(e)}let iw=e=>!Ql(e);function G_(e){typeof e=="function"&&(iw=t=>t.startsWith("on")?!Ql(t):e(t))}try{G_(require("@emotion/is-prop-valid").default)}catch{}function K_(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(iw(s)||r===!0&&Ql(s)||!t&&!Ql(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const Cc=w.createContext({});function Ec(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Za(e){return typeof e=="string"||Array.isArray(e)}const mm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pm=["initial",...mm];function Tc(e){return Ec(e.animate)||pm.some(t=>Za(e[t]))}function aw(e){return!!(Tc(e)||e.variants)}function J_(e,t){if(Tc(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Za(r)?r:void 0,animate:Za(n)?n:void 0}}return e.inherit!==!1?t:{}}function X_(e){const{initial:t,animate:r}=J_(e,w.useContext(Cc));return w.useMemo(()=>({initial:t,animate:r}),[M0(t),M0(r)])}function M0(e){return Array.isArray(e)?e.join(" "):e}const eo={};function Q_(e){for(const t in e)eo[t]=e[t],Zf(t)&&(eo[t].isCSSVariable=!0)}function ow(e,{layout:t,layoutId:r}){return Di.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!eo[e]||e==="opacity")}const Y_={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z_=Ri.length;function eC(e,t,r){let n="",s=!0;for(let i=0;i<Z_;i++){const o=Ri[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=Qb(l,um[o]);if(!c){s=!1;const d=Y_[o]||o;n+=`${d}(${u}) `}r&&(t[o]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function gm(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(Di.has(c)){o=!0;continue}else if(Zf(c)){s[c]=u;continue}else{const d=Qb(u,um[c]);c.startsWith("origin")?(l=!0,i[c]=d):n[c]=d}}if(t.transform||(o||r?n.transform=eC(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;n.transformOrigin=`${c} ${u} ${d}`}}const xm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lw(e,t,r){for(const n in t)!St(t[n])&&!ow(n,r)&&(e[n]=t[n])}function tC({transformTemplate:e},t){return w.useMemo(()=>{const r=xm();return gm(r,t,e),Object.assign({},r.vars,r.style)},[t])}function rC(e,t){const r=e.style||{},n={};return lw(n,r,e),Object.assign(n,tC(e,t)),n}function nC(e,t){const r={},n=rC(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const sC={offset:"stroke-dashoffset",array:"stroke-dasharray"},iC={offset:"strokeDashoffset",array:"strokeDasharray"};function aC(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?sC:iC;e[i.offset]=oe.transform(-n);const o=oe.transform(t),l=oe.transform(r);e[i.array]=`${o} ${l}`}function cw(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...l},c,u,d){if(gm(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&aC(h,s,i,o,!1)}const uw=()=>({...xm(),attrs:{}}),dw=e=>typeof e=="string"&&e.toLowerCase()==="svg";function oC(e,t,r,n){const s=w.useMemo(()=>{const i=uw();return cw(i,t,dw(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};lw(i,e.style,e),s.style={...i,...s.style}}return s}const lC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ym(e){return typeof e!="string"||e.includes("-")?!1:!!(lC.indexOf(e)>-1||/[A-Z]/u.test(e))}function cC(e,t,r,{latestValues:n},s,i=!1){const l=(ym(e)?oC:nC)(t,n,s,e),c=K_(t,typeof e=="string",i),u=e!==w.Fragment?{...c,...l,ref:r}:{},{children:d}=t,h=w.useMemo(()=>St(d)?d.get():d,[d]);return w.createElement(e,{...u,children:h})}function $0(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function vm(e,t,r,n){if(typeof t=="function"){const[s,i]=$0(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=$0(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function pl(e){return St(e)?e.get():e}function uC({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:dC(r,n,s,e),renderState:t()}}function dC(e,t,r,n){const s={},i=n(e,{});for(const m in i)s[m]=pl(i[m]);let{initial:o,animate:l}=e;const c=Tc(e),u=aw(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!Ec(h)){const m=Array.isArray(h)?h:[h];for(let f=0;f<m.length;f++){const g=vm(e,m[f]);if(g){const{transitionEnd:v,transition:b,...y}=g;for(const x in y){let p=y[x];if(Array.isArray(p)){const j=d?p.length-1:0;p=p[j]}p!==null&&(s[x]=p)}for(const x in v)s[x]=v[x]}}}return s}const hw=e=>(t,r)=>{const n=w.useContext(Cc),s=w.useContext(_c),i=()=>uC(e,t,n,s);return r?i():Hf(i)};function bm(e,t,r){var i;const{style:n}=e,s={};for(const o in n)(St(n[o])||t.style&&St(t.style[o])||ow(o,e)||((i=r==null?void 0:r.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=n[o]);return s}const hC=hw({scrapeMotionValuesFromProps:bm,createRenderState:xm});function fw(e,t,r){const n=bm(e,t,r);for(const s in e)if(St(e[s])||St(t[s])){const i=Ri.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const fC=hw({scrapeMotionValuesFromProps:fw,createRenderState:uw}),mC=Symbol.for("motionComponentSymbol");function ei(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function pC(e,t,r){return w.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):ei(r)&&(r.current=n))},[t])}const wm=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),gC="framerAppearId",mw="data-"+wm(gC),pw=w.createContext({});function xC(e,t,r,n,s){var v,b;const{visualElement:i}=w.useContext(Cc),o=w.useContext(sw),l=w.useContext(_c),c=w.useContext(fm).reducedMotion,u=w.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:i,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=w.useContext(pw);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&yC(u.current,r,s,h);const m=w.useRef(!1);w.useInsertionEffect(()=>{d&&m.current&&d.update(r,l)});const f=r[mw],g=w.useRef(!!f&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,f))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,f)));return hb(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),w.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,f)}),g.current=!1),d.enteringChildren=void 0)}),d}function yC(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:gw(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&ei(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function gw(e){if(e)return e.options.allowProjection!==!1?e.projection:gw(e.parent)}function wu(e,{forwardMotionProps:t=!1}={},r,n){r&&q_(r);const s=ym(e)?fC:hC;function i(l,c){let u;const d={...w.useContext(fm),...l,layoutId:vC(l)},{isStatic:h}=d,m=X_(l),f=s(l,h);if(!h&&qf){bC();const g=wC(d);u=g.MeasureLayout,m.visualElement=xC(e,f,d,n,g.ProjectionNode)}return a.jsxs(Cc.Provider,{value:m,children:[u&&m.visualElement?a.jsx(u,{visualElement:m.visualElement,...d}):null,cC(e,l,pC(f,m.visualElement,c),f,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=w.forwardRef(i);return o[mC]=e,o}function vC({layoutId:e}){const t=w.useContext(Vf).id;return t&&e!==void 0?t+"-"+e:e}function bC(e,t){w.useContext(sw).strict}function wC(e){const{drag:t,layout:r}=ki;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function kC(e,t){if(typeof Proxy>"u")return wu;const r=new Map,n=(i,o)=>wu(i,o,e,t),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,wu(o,void 0,e,t)),r.get(o))})}function xw({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function jC({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function SC(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function ku(e){return e===void 0||e===1}function hh({scale:e,scaleX:t,scaleY:r}){return!ku(e)||!ku(t)||!ku(r)}function ss(e){return hh(e)||yw(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function yw(e){return F0(e.x)||F0(e.y)}function F0(e){return e&&e!=="0%"}function Yl(e,t,r){const n=e-r,s=t*n;return r+s}function z0(e,t,r,n,s){return s!==void 0&&(e=Yl(e,s,n)),Yl(e,r,n)+t}function fh(e,t=0,r=1,n,s){e.min=z0(e.min,t,r,n,s),e.max=z0(e.max,t,r,n,s)}function vw(e,{x:t,y:r}){fh(e.x,t.translate,t.scale,t.originPoint),fh(e.y,r.translate,r.scale,r.originPoint)}const U0=.999999999999,B0=1.0000000000001;function NC(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ri(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,vw(e,o)),n&&ss(i.latestValues)&&ri(e,i.latestValues))}t.x<B0&&t.x>U0&&(t.x=1),t.y<B0&&t.y>U0&&(t.y=1)}function ti(e,t){e.min=e.min+t,e.max=e.max+t}function V0(e,t,r,n,s=.5){const i=Fe(e.min,e.max,s);fh(e,t,r,i,n)}function ri(e,t){V0(e.x,t.x,t.scaleX,t.scale,t.originX),V0(e.y,t.y,t.scaleY,t.scale,t.originY)}function bw(e,t){return xw(SC(e.getBoundingClientRect(),t))}function _C(e,t,r){const n=bw(e,r),{scroll:s}=t;return s&&(ti(n.x,s.offset.x),ti(n.y,s.offset.y)),n}const H0=()=>({translate:0,scale:1,origin:0,originPoint:0}),ni=()=>({x:H0(),y:H0()}),q0=()=>({min:0,max:0}),Ke=()=>({x:q0(),y:q0()}),mh={current:null},ww={current:!1};function CC(){if(ww.current=!0,!!qf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>mh.current=e.matches;e.addEventListener("change",t),t()}else mh.current=!1}const EC=new WeakMap;function TC(e,t,r){for(const n in t){const s=t[n],i=r[n];if(St(s))e.addValue(n,s);else if(St(i))e.addValue(n,wi(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,wi(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const W0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PC{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Vt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Me.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Tc(r),this.isVariantNode=aw(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in h){const f=h[m];c[m]!==void 0&&St(f)&&f.set(c[m])}}mount(t){var r;this.current=t,EC.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),ww.current||CC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mh.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),qn(this.notifyUpdate),qn(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Di.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Me.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ki){const r=ki[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ke()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<W0.length;n++){const s=W0[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=TC(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=wi(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(fb(n)||pb(n))?n=parseFloat(n):!$_(n)&&Wn.test(r)&&(n=Xb(t,r)),this.setBaseTarget(t,St(n)?n.get():n)),St(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var i;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=vm(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);o&&(n=o[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!St(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Xf),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){dm.render(this.render)}}class kw extends PC{constructor(){super(...arguments),this.KeyframeResolver=__}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;St(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function jw(e,{style:t,vars:r},n,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function AC(e){return window.getComputedStyle(e)}class IC extends kw{constructor(){super(...arguments),this.type="html",this.renderInstance=jw}readValueFromInstance(t,r){var n;if(Di.has(r))return(n=this.projection)!=null&&n.isProjecting?ih(r):qN(t,r);{const s=AC(t),i=(Zf(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return bw(t,r)}build(t,r,n){gm(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return bm(t,r,n)}}const Sw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RC(e,t,r,n){jw(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(Sw.has(s)?s:wm(s),t.attrs[s])}class DC extends kw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ke}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Di.has(r)){const n=Jb(r);return n&&n.default||0}return r=Sw.has(r)?r:wm(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return fw(t,r,n)}build(t,r,n){cw(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){RC(t,r,n,s)}mount(t){this.isSVGTag=dw(t.tagName),super.mount(t)}}const LC=(e,t)=>ym(e)?new DC(t):new IC(t,{allowProjection:e!==w.Fragment});function ui(e,t,r){const n=e.getProps();return vm(n,t,r!==void 0?r:n.custom,e)}const ph=e=>Array.isArray(e);function OC(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,wi(r))}function MC(e){return ph(e)?e[e.length-1]||0:e}function $C(e,t){const r=ui(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const l=MC(i[o]);OC(e,o,l)}}function FC(e){return!!(St(e)&&e.add)}function gh(e,t){const r=e.getValue("willChange");if(FC(r))return r.add(t);if(!r&&fn.WillChange){const n=new fn.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function Nw(e){return e.props[mw]}const zC=e=>e!==null;function UC(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(zC),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const BC={type:"spring",stiffness:500,damping:25,restSpeed:10},VC=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),HC={type:"keyframes",duration:.8},qC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WC=(e,{keyframes:t})=>t.length>2?HC:Di.has(e)?e.startsWith("scale")?VC(t[1]):BC:qC;function GC({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const km=(e,t,r,n={},s,i)=>o=>{const l=cm(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Wr(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};GC(l)||Object.assign(d,WC(e,d)),d.duration&&(d.duration=Wr(d.duration)),d.repeatDelay&&(d.repeatDelay=Wr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(uh(d),d.delay===0&&(h=!0)),(fn.instantAnimations||fn.skipAnimations)&&(h=!0,uh(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const m=UC(d.keyframes,l);if(m!==void 0){Me.update(()=>{d.onUpdate(m),d.onComplete()});return}}return l.isSync?new om(d):new m_(d)};function KC({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function _w(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(i=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),m=l[d];if(m===void 0||u&&KC(u,d))continue;const f={delay:r,...cm(i||{},d)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===g&&!f.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const y=Nw(e);if(y){const x=window.MotionHandoffAnimation(y,d,Me);x!==null&&(f.startTime=x,v=!0)}}gh(e,d),h.start(km(d,h,m,e.shouldReduceMotion&&Wb.has(d)?{type:!1}:f,e,v));const b=h.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{Me.update(()=>{o&&$C(e,o)})}),c}function Cw(e,t,r,n=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),o=e.size,l=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:l-i*n}function xh(e,t,r={}){var c;const n=ui(e,t,r.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(_w(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=s;return JC(e,t,u,d,h,m,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(r.delay)])}function JC(e,t,r=0,n=0,s=0,i=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(xh(c,t,{...o,delay:r+(typeof n=="function"?0:n)+Cw(e.variantChildren,c,n,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function XC(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>xh(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=xh(e,t,r);else{const s=typeof t=="function"?ui(e,t,r.custom):t;n=Promise.all(_w(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function Ew(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const QC=pm.length;function Tw(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?Tw(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<QC;r++){const n=pm[r],s=e.props[n];(Za(s)||s===!1)&&(t[n]=s)}return t}const YC=[...mm].reverse(),ZC=mm.length;function e4(e){return t=>Promise.all(t.map(({animation:r,options:n})=>XC(e,r,n)))}function t4(e){let t=e4(e),r=G0(),n=!0;const s=c=>(u,d)=>{var m;const h=ui(e,d,c==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:f,transitionEnd:g,...v}=h;u={...u,...v,...g}}return u};function i(c){t=c(e)}function o(c){const{props:u}=e,d=Tw(e.parent)||{},h=[],m=new Set;let f={},g=1/0;for(let b=0;b<ZC;b++){const y=YC[b],x=r[y],p=u[y]!==void 0?u[y]:d[y],j=Za(p),E=y===c?x.isActive:null;E===!1&&(g=b);let N=p===d[y]&&p!==u[y]&&j;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),x.protectedKeys={...f},!x.isActive&&E===null||!p&&!x.prevProp||Ec(p)||typeof p=="boolean")continue;const C=r4(x.prevProp,p);let T=C||y===c&&x.isActive&&!N&&j||b>g&&j,D=!1;const R=Array.isArray(p)?p:[p];let P=R.reduce(s(y),{});E===!1&&(P={});const{prevResolvedValues:L={}}=x,J={...L,...P},I=z=>{T=!0,m.has(z)&&(D=!0,m.delete(z)),x.needsAnimating[z]=!0;const A=e.getValue(z);A&&(A.liveStyle=!1)};for(const z in J){const A=P[z],B=L[z];if(f.hasOwnProperty(z))continue;let S=!1;ph(A)&&ph(B)?S=!Ew(A,B):S=A!==B,S?A!=null?I(z):m.add(z):A!==void 0&&m.has(z)?I(z):x.protectedKeys[z]=!0}x.prevProp=p,x.prevResolvedValues=P,x.isActive&&(f={...f,...P}),n&&e.blockInitialAnimation&&(T=!1);const M=N&&C;T&&(!M||D)&&h.push(...R.map(z=>{const A={type:y};if(typeof z=="string"&&n&&!M&&e.manuallyAnimateOnMount&&e.parent){const{parent:B}=e,S=ui(B,z);if(B.enteringChildren&&S){const{delayChildren:U}=S.transition||{};A.delay=Cw(B.enteringChildren,e,U)}}return{animation:z,options:A}}))}if(m.size){const b={};if(typeof u.initial!="boolean"){const y=ui(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(b.transition=y.transition)}m.forEach(y=>{const x=e.getBaseTarget(y),p=e.getValue(y);p&&(p.liveStyle=!0),b[y]=x??null}),h.push({animation:b})}let v=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),n=!1,v?t(h):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var f;return(f=m.animationState)==null?void 0:f.setActive(c,u)}),r[c].isActive=u;const d=o(c);for(const m in r)r[m].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=G0(),n=!0}}}function r4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Ew(t,e):!1}function Zn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function G0(){return{animate:Zn(!0),whileInView:Zn(),whileHover:Zn(),whileTap:Zn(),whileDrag:Zn(),whileFocus:Zn(),exit:Zn()}}class Xn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class n4 extends Xn{constructor(t){super(t),t.animationState||(t.animationState=t4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ec(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let s4=0;class i4 extends Xn{constructor(){super(...arguments),this.id=s4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const a4={animation:{Feature:n4},exit:{Feature:i4}};function to(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function po(e){return{point:{x:e.pageX,y:e.pageY}}}const o4=e=>t=>hm(t)&&e(t,po(t));function wa(e,t,r,n){return to(e,t,o4(r),n)}const Pw=1e-4,l4=1-Pw,c4=1+Pw,Aw=.01,u4=0-Aw,d4=0+Aw;function Rt(e){return e.max-e.min}function h4(e,t,r){return Math.abs(e-t)<=r}function K0(e,t,r,n=.5){e.origin=n,e.originPoint=Fe(t.min,t.max,e.origin),e.scale=Rt(r)/Rt(t),e.translate=Fe(r.min,r.max,e.origin)-e.originPoint,(e.scale>=l4&&e.scale<=c4||isNaN(e.scale))&&(e.scale=1),(e.translate>=u4&&e.translate<=d4||isNaN(e.translate))&&(e.translate=0)}function ka(e,t,r,n){K0(e.x,t.x,r.x,n?n.originX:void 0),K0(e.y,t.y,r.y,n?n.originY:void 0)}function J0(e,t,r){e.min=r.min+t.min,e.max=e.min+Rt(t)}function f4(e,t,r){J0(e.x,t.x,r.x),J0(e.y,t.y,r.y)}function X0(e,t,r){e.min=t.min-r.min,e.max=e.min+Rt(t)}function ja(e,t,r){X0(e.x,t.x,r.x),X0(e.y,t.y,r.y)}function cr(e){return[e("x"),e("y")]}const Iw=({current:e})=>e?e.ownerDocument.defaultView:null,Q0=(e,t)=>Math.abs(e-t);function m4(e,t){const r=Q0(e.x,t.x),n=Q0(e.y,t.y);return Math.sqrt(r**2+n**2)}class Rw{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Su(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=m4(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!g)return;const{point:v}=m,{timestamp:b}=mt;this.history.push({...v,timestamp:b});const{onStart:y,onMove:x}=this.handlers;f||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=ju(f,this.transformPagePoint),Me.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Su(m.type==="pointercancel"?this.lastMoveEventInfo:ju(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,y),v&&v(m,y)},!hm(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const l=po(t),c=ju(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=mt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(t,Su(c,this.history)),this.removeListeners=ho(wa(this.contextWindow,"pointermove",this.handlePointerMove),wa(this.contextWindow,"pointerup",this.handlePointerUp),wa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),qn(this.updatePoint)}}function ju(e,t){return t?{point:t(e.point)}:e}function Y0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Su({point:e},t){return{point:e,delta:Y0(e,Dw(t)),offset:Y0(e,p4(t)),velocity:g4(t,.1)}}function p4(e){return e[0]}function Dw(e){return e[e.length-1]}function g4(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=Dw(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Wr(t)));)r--;if(!n)return{x:0,y:0};const i=mr(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function x4(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Fe(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Fe(r,e,n.max):Math.min(e,r)),e}function Z0(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function y4(e,{top:t,left:r,bottom:n,right:s}){return{x:Z0(e.x,r,s),y:Z0(e.y,t,n)}}function eg(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function v4(e,t){return{x:eg(e.x,t.x),y:eg(e.y,t.y)}}function b4(e,t){let r=.5;const n=Rt(e),s=Rt(t);return s>n?r=Xa(t.min,t.max-n,e.min):n>s&&(r=Xa(e.min,e.max-s,t.min)),hn(0,1,r)}function w4(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const yh=.35;function k4(e=yh){return e===!1?e=0:e===!0&&(e=yh),{x:tg(e,"left","right"),y:tg(e,"top","bottom")}}function tg(e,t,r){return{min:rg(e,t),max:rg(e,r)}}function rg(e,t){return typeof e=="number"?e:e[t]||0}const j4=new WeakMap;class S4{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ke(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(po(h).point)},o=(h,m)=>{const{drag:f,dragPropagation:g,onDragStart:v}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=P_(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cr(y=>{let x=this.getAxisMotionValue(y).get()||0;if(Gr.test(x)){const{projection:p}=this.visualElement;if(p&&p.layout){const j=p.layout.layoutBox[y];j&&(x=Rt(j)*(parseFloat(x)/100))}}this.originPoint[y]=x}),v&&Me.postRender(()=>v(h,m)),gh(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:v,onDrag:b}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:y}=m;if(g&&this.currentDirection===null){this.currentDirection=N4(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,y),this.updateAxis("y",m.point,y),this.visualElement.render(),b&&b(h,m)},c=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>cr(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Rw(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:Iw(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Me.postRender(()=>l(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Wo(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=x4(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&ei(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=y4(n.layoutBox,t):this.constraints=!1,this.elastic=k4(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&cr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=w4(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ei(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=_C(n,s.root,this.visualElement.getTransformPagePoint());let o=v4(s.layout.layoutBox,i);if(r){const l=r(jC(o));this.hasMutatedConstraints=!!l,l&&(o=xw(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=cr(d=>{if(!Wo(d,r,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const m=s?200:1e6,f=s?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return gh(this.visualElement,t),n.start(km(t,n,0,r,this.visualElement,!1))}stopAnimation(){cr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){cr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){cr(r=>{const{drag:n}=this.getProps();if(!Wo(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r];i.set(t[r]-Fe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!ei(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};cr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=b4({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cr(o=>{if(!Wo(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Fe(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;j4.set(this.visualElement,this);const t=this.visualElement.current,r=wa(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();ei(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Me.read(n);const o=to(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(cr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=yh,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Wo(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function N4(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class _4 extends Xn{constructor(t){super(t),this.removeGroupControls=gr,this.removeListeners=gr,this.controls=new S4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ng=e=>(t,r)=>{e&&Me.postRender(()=>e(t,r))};class C4 extends Xn{constructor(){super(...arguments),this.removePointerDownListener=gr}onPointerDown(t){this.session=new Rw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Iw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:ng(t),onStart:ng(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Me.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=wa(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Yi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const r=sg(e,t.target.x),n=sg(e,t.target.y);return`${r}% ${n}%`}},E4={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Wn.parse(e);if(s.length>5)return n;const i=Wn.createTransformer(e),o=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=Fe(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let Nu=!1;class T4 extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;Q_(P4),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),Nu&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),gl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,Nu=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Me.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),dm.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;Nu=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Lw(e){const[t,r]=nw(),n=w.useContext(Vf);return a.jsx(T4,{...e,layoutGroup:n,switchLayoutGroup:w.useContext(pw),isPresent:t,safeToRemove:r})}const P4={borderRadius:{...Yi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yi,borderTopRightRadius:Yi,borderBottomLeftRadius:Yi,borderBottomRightRadius:Yi,boxShadow:E4};function A4(e,t,r){const n=St(e)?e:wi(e);return n.start(km("",n,t,r)),n.animation}const I4=(e,t)=>e.depth-t.depth;class R4{constructor(){this.children=[],this.isDirty=!1}add(t){Wf(this.children,t),this.isDirty=!0}remove(t){Gf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(I4),this.isDirty=!1,this.children.forEach(t)}}function D4(e,t){const r=Vt.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(qn(n),e(i-t))};return Me.setup(n,!0),()=>qn(n)}const Ow=["TopLeft","TopRight","BottomLeft","BottomRight"],L4=Ow.length,ig=e=>typeof e=="string"?parseFloat(e):e,ag=e=>typeof e=="number"||oe.test(e);function O4(e,t,r,n,s,i){s?(e.opacity=Fe(0,r.opacity??1,M4(n)),e.opacityExit=Fe(t.opacity??1,0,$4(n))):i&&(e.opacity=Fe(t.opacity??1,r.opacity??1,n));for(let o=0;o<L4;o++){const l=`border${Ow[o]}Radius`;let c=og(t,l),u=og(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||ag(c)===ag(u)?(e[l]=Math.max(Fe(ig(c),ig(u),n),0),(Gr.test(u)||Gr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Fe(t.rotate||0,r.rotate||0,n))}function og(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const M4=Mw(0,.5,jb),$4=Mw(.5,.95,gr);function Mw(e,t,r){return n=>n<e?0:n>t?1:r(Xa(e,t,n))}function lg(e,t){e.min=t.min,e.max=t.max}function or(e,t){lg(e.x,t.x),lg(e.y,t.y)}function cg(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ug(e,t,r,n,s){return e-=t,e=Yl(e,1/r,n),s!==void 0&&(e=Yl(e,1/s,n)),e}function F4(e,t=0,r=1,n=.5,s,i=e,o=e){if(Gr.test(t)&&(t=parseFloat(t),t=Fe(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Fe(i.min,i.max,n);e===i&&(l-=t),e.min=ug(e.min,t,r,l,s),e.max=ug(e.max,t,r,l,s)}function dg(e,t,[r,n,s],i,o){F4(e,t[r],t[n],t[s],t.scale,i,o)}const z4=["x","scaleX","originX"],U4=["y","scaleY","originY"];function hg(e,t,r,n){dg(e.x,t,z4,r?r.x:void 0,n?n.x:void 0),dg(e.y,t,U4,r?r.y:void 0,n?n.y:void 0)}function fg(e){return e.translate===0&&e.scale===1}function $w(e){return fg(e.x)&&fg(e.y)}function mg(e,t){return e.min===t.min&&e.max===t.max}function B4(e,t){return mg(e.x,t.x)&&mg(e.y,t.y)}function pg(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Fw(e,t){return pg(e.x,t.x)&&pg(e.y,t.y)}function gg(e){return Rt(e.x)/Rt(e.y)}function xg(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class V4{constructor(){this.members=[]}add(t){Wf(this.members,t),t.scheduleRender()}remove(t){if(Gf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function H4(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:f,skewY:g}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),m&&(n+=`rotateY(${m}deg) `),f&&(n+=`skewX(${f}deg) `),g&&(n+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const _u=["","X","Y","Z"],q4=1e3;let W4=0;function Cu(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function zw(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=Nw(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Me,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&zw(n)}function Uw({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=W4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(J4),this.nodes.forEach(Z4),this.nodes.forEach(eE),this.nodes.forEach(X4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new R4)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xf),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=rw(o)&&!O_(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const m=()=>this.root.updateBlockedByResize=!1;Me.read(()=>{h=window.innerWidth}),e(o,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,d&&d(),d=D4(m,250),gl.hasAnimatedSinceResize&&(gl.hasAnimatedSinceResize=!1,this.nodes.forEach(bg)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||iE,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=u.getProps(),y=!this.targetLayout||!Fw(this.targetLayout,f),x=!h&&m;if(this.options.layoutRoot||this.resumeFrom||x||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const p={...cm(g,"layout"),onPlay:v,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(p.delay=0,p.type=!1),this.startAnimation(p),this.setAnimationOrigin(d,x)}else h||bg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tE),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yg);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Y4),this.nodes.forEach(G4),this.nodes.forEach(K4)):this.nodes.forEach(vg),this.clearAllSnapshots();const l=Vt.now();mt.delta=hn(0,1e3/60,l-mt.timestamp),mt.timestamp=l,mt.isProcessing=!0,pu.update.process(mt),pu.preRender.process(mt),pu.render.process(mt),mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Q4),this.sharedNodes.forEach(rE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Rt(this.snapshot.measuredBox.x)&&!Rt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ke(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!$w(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||ss(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),aE(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Ke();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(oE))){const{scroll:d}=this.root;d&&(ti(l.x,d.offset.x),ti(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Ke();if(or(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&or(l,o),ti(l.x,h.offset.x),ti(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Ke();or(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ri(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ss(d.latestValues)&&ri(c,d.latestValues)}return ss(this.latestValues)&&ri(c,this.latestValues),c}removeTransform(o){const l=Ke();or(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!ss(u.latestValues))continue;hh(u.latestValues)&&u.updateSnapshot();const d=Ke(),h=u.measurePageBox();or(d,h),hg(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ss(this.latestValues)&&hg(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=mt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ke(),this.relativeTargetOrigin=Ke(),ja(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ke(),this.targetWithTransforms=Ke()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),f4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):or(this.target,this.layout.layoutBox),vw(this.target,this.targetDelta)):or(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ke(),this.relativeTargetOrigin=Ke(),ja(this.relativeTargetOrigin,this.target,f.target),or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hh(this.parent.latestValues)||yw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===mt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;or(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;NC(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ke());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cg(this.prevProjectionDelta.x,this.projectionDelta.x),cg(this.prevProjectionDelta.y,this.projectionDelta.y)),ka(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!xg(this.projectionDelta.x,this.prevProjectionDelta.x)||!xg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ni(),this.projectionDelta=ni(),this.projectionDeltaWithTransform=ni()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=ni();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Ke(),f=c?c.source:void 0,g=this.layout?this.layout.source:void 0,v=f!==g,b=this.getStack(),y=!b||b.members.length<=1,x=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(sE));this.animationProgress=0;let p;this.mixTargetDelta=j=>{const E=j/1e3;wg(h.x,o.x,E),wg(h.y,o.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ja(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nE(this.relativeTarget,this.relativeTargetOrigin,m,E),p&&B4(this.relativeTarget,p)&&(this.isProjectionDirty=!1),p||(p=Ke()),or(p,this.relativeTarget)),v&&(this.animationValues=d,O4(d,u,this.latestValues,E,x,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(qn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Me.update(()=>{gl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wi(0)),this.currentAnimation=A4(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(q4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Bw(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ke();const h=Rt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=Rt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}or(l,c),ri(l,d),ka(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new V4),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Cu("z",o,u,this.animationValues);for(let d=0;d<_u.length;d++)Cu(`rotate${_u[d]}`,o,u,this.animationValues),Cu(`skew${_u[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=pl(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=pl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ss(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=H4(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:m,y:f}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${f.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in eo){if(d[g]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:y}=eo[g],x=h==="none"?d[g]:v(d[g],u);if(b){const p=b.length;for(let j=0;j<p;j++)o[b[j]]=x}else y?this.options.visualElement.renderState.vars[g]=x:o[g]=x}this.options.layoutId&&(o.pointerEvents=u===this?pl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(yg),this.root.sharedNodes.clear()}}}function G4(e){e.updateLayout()}function K4(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?cr(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],f=Rt(m);m.min=n[h].min,m.max=m.min+f}):Bw(i,t.layoutBox,n)&&cr(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],f=Rt(n[h]);m.max=m.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+f)});const l=ni();ka(l,n,t.layoutBox);const c=ni();o?ka(c,e.applyTransform(s,!0),t.measuredBox):ka(c,n,t.layoutBox);const u=!$w(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:f}=h;if(m&&f){const g=Ke();ja(g,t.layoutBox,m.layoutBox);const v=Ke();ja(v,n,f.layoutBox),Fw(g,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function J4(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function X4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Q4(e){e.clearSnapshot()}function yg(e){e.clearMeasurements()}function vg(e){e.isLayoutDirty=!1}function Y4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function bg(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Z4(e){e.resolveTargetDelta()}function eE(e){e.calcProjection()}function tE(e){e.resetSkewAndRotation()}function rE(e){e.removeLeadSnapshot()}function wg(e,t,r){e.translate=Fe(t.translate,0,r),e.scale=Fe(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function kg(e,t,r,n){e.min=Fe(t.min,r.min,n),e.max=Fe(t.max,r.max,n)}function nE(e,t,r,n){kg(e.x,t.x,r.x,n),kg(e.y,t.y,r.y,n)}function sE(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const iE={duration:.45,ease:[.4,0,.1,1]},jg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Sg=jg("applewebkit/")&&!jg("chrome/")?Math.round:gr;function Ng(e){e.min=Sg(e.min),e.max=Sg(e.max)}function aE(e){Ng(e.x),Ng(e.y)}function Bw(e,t,r){return e==="position"||e==="preserve-aspect"&&!h4(gg(t),gg(r),.2)}function oE(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const lE=Uw({attachResizeListener:(e,t)=>to(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Eu={current:void 0},Vw=Uw({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Eu.current){const e=new lE({});e.mount(window),e.setOptions({layoutScroll:!0}),Eu.current=e}return Eu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),cE={pan:{Feature:C4},drag:{Feature:_4,ProjectionNode:Vw,MeasureLayout:Lw}};function _g(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Me.postRender(()=>i(t,po(t)))}class uE extends Xn{mount(){const{current:t}=this.node;t&&(this.unmount=A_(t,(r,n)=>(_g(this.node,n,"Start"),s=>_g(this.node,s,"End"))))}unmount(){}}class dE extends Xn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ho(to(this.node.current,"focus",()=>this.onFocus()),to(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Cg(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Me.postRender(()=>i(t,po(t)))}class hE extends Xn{mount(){const{current:t}=this.node;t&&(this.unmount=L_(t,(r,n)=>(Cg(this.node,n,"Start"),(s,{success:i})=>Cg(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vh=new WeakMap,Tu=new WeakMap,fE=e=>{const t=vh.get(e.target);t&&t(e)},mE=e=>{e.forEach(fE)};function pE({root:e,...t}){const r=e||document;Tu.has(r)||Tu.set(r,{});const n=Tu.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(mE,{root:e,...t})),n[s]}function gE(e,t,r){const n=pE(t);return vh.set(e,r),n.observe(e),()=>{vh.delete(e),n.unobserve(e)}}const xE={some:0,all:1};class yE extends Xn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:xE[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(c)};return gE(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(vE(t,r))&&this.startObserver()}unmount(){}}function vE({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const bE={inView:{Feature:yE},tap:{Feature:hE},focus:{Feature:dE},hover:{Feature:uE}},wE={layout:{ProjectionNode:Vw,MeasureLayout:Lw}},kE={...a4,...bE,...cE,...wE},ge=kC(kE,LC);var jE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const SE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X=(e,t)=>{const r=w.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>w.createElement("svg",{ref:u,...jE,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${SE(e)}`,...c},[...t.map(([d,h])=>w.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},Pc=X("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),sr=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Nt=X("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),NE=X("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),wn=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Zl=X("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),_E=X("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),CE=X("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),EE=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),TE=X("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),bh=X("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),PE=X("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),xl=X("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),je=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Sa=X("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),as=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Zt=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),It=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ec=X("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),AE=X("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),IE=X("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]),Pr=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),jm=X("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),go=X("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),RE=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Sm=X("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),DE=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),LE=X("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),We=X("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),tc=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Nm=X("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),Hw=X("GitPullRequest",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]),OE=X("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),ME=X("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Pu=X("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),_m=X("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Ur=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),yl=X("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),$E=X("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),qw=X("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),rn=X("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),FE=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),zE=X("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Eg=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),UE=X("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),BE=X("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),ji=X("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),rc=X("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),VE=X("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),HE=X("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),qE=X("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),WE=X("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Cm=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),xr=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),GE=X("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ys=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ww=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Tg=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),KE=X("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),JE=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),XE=X("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Si=X("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),ro=X("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Em=X("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),QE=X("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),an=X("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),YE=X("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),no=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),An=X("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ss=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ZE=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Gw=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Kw=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Tm=X("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),mn=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),yr=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Bn=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function eT({isCompact:e}){const r=Xr().pathname.split("/").filter(s=>s),n={"strategic-directives":"Strategic Directives",prds:"PRDs",handoffs:"Handoffs",context:"Context Monitor",progress:"Progress Tracker"};return a.jsxs("nav",{className:`flex items-center ${e?"py-1 px-2":"py-2 px-4"}`,children:[a.jsxs(Gl,{to:"/",className:"flex items-center text-purple-100 hover:text-white transition-colors drop-shadow-sm",children:[a.jsx(_m,{className:e?"w-3 h-3":"w-4 h-4"}),a.jsx("span",{className:`${e?"ml-1 text-xs":"ml-2 text-sm"}`,children:"Dashboard"})]}),r.map((s,i)=>{const o=`/${r.slice(0,i+1).join("/")}`,l=i===r.length-1,c=n[s]||s;return a.jsxs(Vr.Fragment,{children:[a.jsx(It,{className:`${e?"w-3 h-3 mx-1":"w-4 h-4 mx-2"} text-purple-200`}),l?a.jsx("span",{className:`${e?"text-xs":"text-sm"} font-medium text-white drop-shadow-sm`,children:c}):a.jsx(Gl,{to:o,className:`${e?"text-xs":"text-sm"} text-purple-100 hover:text-white transition-colors drop-shadow-sm`,children:c})]},s)})]})}function Pm({onRefresh:e,isCompact:t=!1,isCollapsed:r=!1}){const[n,s]=w.useState("idle"),[i,o]=w.useState(""),[l,c]=w.useState(null),u=async()=>{console.log(" Manual Refresh: Starting database sync..."),s("refreshing"),o("Syncing with database...");try{const f=await fetch("/api/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"database"})});if(!f.ok)throw new Error("Database refresh failed");const g=await f.json();console.log(" Database refreshed:",g),e&&(console.log(" Triggering UI refresh..."),await e()),s("complete"),o(`Refreshed: ${g.sds||0} SDs, ${g.prds||0} PRDs`),c(new Date),setTimeout(()=>{s("idle"),o("")},3e3)}catch(f){console.error(" Refresh Error:",f),s("error"),o(`Failed: ${f.message}`),setTimeout(()=>{s("idle"),o("")},5e3)}},d=()=>{switch(n){case"refreshing":return a.jsx(go,{className:"w-4 h-4 animate-spin"});case"complete":return a.jsx(je,{className:"w-4 h-4 text-green-500"});case"error":return a.jsx(sr,{className:"w-4 h-4 text-red-500"});default:return a.jsx(xr,{className:"w-4 h-4"})}},h=()=>{switch(n){case"refreshing":return"bg-blue-500 hover:bg-blue-600";case"complete":return"bg-green-500 hover:bg-green-600";case"error":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-600 hover:bg-gray-700"}},m=n==="refreshing";return a.jsxs("div",{className:"relative flex items-center",children:[a.jsxs(ge.button,{onClick:u,disabled:m,className:`
          flex items-center ${r?"justify-center w-full":""} transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
          ${h()} text-white rounded hover:opacity-90
          ${r?"px-2 py-2":t?"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm":"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base"}
        `,whileHover:{scale:m?1:1.05},whileTap:{scale:m?1:.95},title:r?"Manual Refresh - Sync with database":"Manually sync with database (automatic real-time updates are active)",children:[d(),!r&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:`${t?"ml-1":"ml-1 sm:ml-2"} hidden xs:inline`,children:[n==="idle"&&"Manual Refresh",n==="refreshing"&&"Syncing...",n==="complete"&&"Synced!",n==="error"&&"Failed"]}),a.jsxs("span",{className:"xs:hidden ml-1",children:[n==="idle"&&"",n==="refreshing"&&"",n==="complete"&&"",n==="error"&&""]})]})]}),a.jsx(Mr,{children:i&&!r&&a.jsx(ge.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`
              absolute left-full ml-4 top-1/2 transform -translate-y-1/2
              text-sm px-3 py-1 rounded-lg whitespace-nowrap z-50
              ${n==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":n==="complete"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}
              ${t?"text-xs px-2 py-0.5":""}
            `,children:i})}),a.jsx(Mr,{children:r&&i&&a.jsxs(ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`
              absolute left-full ml-2 top-1/2 transform -translate-y-1/2
              text-xs px-2 py-1 rounded-lg whitespace-nowrap z-50 pointer-events-none
              ${n==="error"?"bg-red-900 text-red-200":n==="complete"?"bg-green-900 text-green-200":"bg-blue-900 text-blue-200"}
            `,children:[n==="refreshing"&&"Syncing",n==="complete"&&"Done!",n==="error"&&"Error"]})}),l&&n==="idle"&&a.jsxs("div",{className:`absolute left-full ml-4 top-full mt-1 text-gray-500 dark:text-gray-400 whitespace-nowrap ${t?"text-xs":"text-sm"}`,children:["Last refresh: ",l.toLocaleTimeString()]}),a.jsx("div",{className:"absolute -top-1 -right-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-400 rounded-full animate-ping"})]})})]})}const tT=({className:e=""})=>{const t=()=>{const c=localStorage.getItem("theme");return c?c==="dark":!0},[r,n]=w.useState(t),[s,i]=w.useState(!1);w.useLayoutEffect(()=>{const c=document.documentElement;r?(c.classList.add("dark"),c.classList.remove("light"),localStorage.setItem("theme","dark")):(c.classList.remove("dark"),c.classList.add("light"),localStorage.setItem("theme","light"))},[r]),w.useEffect(()=>{const c=setTimeout(()=>{const u=document.documentElement,d=localStorage.getItem("theme");d!=="light"?(u.classList.add("dark"),u.classList.remove("light"),d||localStorage.setItem("theme","dark"),n(!0)):(u.classList.remove("dark"),u.classList.add("light"),n(!1))},10);return()=>clearTimeout(c)},[]);const o=c=>{const u=document.documentElement;c?(u.classList.add("dark"),u.classList.remove("light"),localStorage.setItem("theme","dark")):(u.classList.remove("dark"),u.classList.add("light"),localStorage.setItem("theme","light"))},l=()=>{if(s)return;i(!0);const c=!r;n(c),o(c),setTimeout(()=>i(!1),300)};return a.jsxs("button",{onClick:l,className:`
        relative flex items-center justify-center
        w-12 h-6 rounded-full transition-all duration-300 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${r?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-600"}
        ${s?"scale-95":"hover:scale-105"}
        ${e}
      `,title:r?"Switch to light mode":"Switch to dark mode","aria-label":r?"Switch to light mode":"Switch to dark mode",disabled:s,children:[a.jsx("div",{className:`
        absolute inset-0 rounded-full transition-all duration-300
        ${r?"bg-gradient-to-r from-blue-600 to-blue-500":"bg-gradient-to-r from-gray-300 to-gray-200"}
      `}),a.jsxs("div",{className:`
        relative w-5 h-5 rounded-full transition-all duration-300 ease-in-out transform
        bg-white dark:bg-gray-100 shadow-lg
        flex items-center justify-center
        ${r?"translate-x-3":"-translate-x-3"}
        ${s?"scale-90":""}
      `,children:[a.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${r?"opacity-100":"opacity-0"}
        `,children:a.jsx(BE,{className:"w-3 h-3 text-blue-600 dark:text-blue-500"})}),a.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${r?"opacity-0":"opacity-100"}
        `,children:a.jsx(QE,{className:"w-3 h-3 text-yellow-500"})})]}),a.jsx("div",{className:`
        absolute inset-0 rounded-full opacity-0 transition-opacity duration-300
        ${r?"bg-blue-400 group-hover:opacity-20":"bg-yellow-400 group-hover:opacity-20"}
        pointer-events-none
      `})]})};function rT(){const[e,t]=w.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return w.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(prefers-reduced-motion: reduce)"),n=s=>{t(s.matches)};if(r.addEventListener)return r.addEventListener("change",n),()=>r.removeEventListener("change",n);if(r.addListener)return r.addListener(n),()=>r.removeListener(n)},[]),e}const nT={normal:200},Jw={easeOut:[0,0,.2,1],spring:{type:"spring",stiffness:300,damping:30}},sT={slideUp:{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:nT.normal/1e3,ease:Jw.easeOut}}},iT={container:{animate:{transition:{staggerChildren:.05,delayChildren:.1}}}},Pg=Jw.spring,aT=sT.slideUp,oT=iT.container;function lT({state:e,isConnected:t,isSidebarCollapsed:r,setIsSidebarCollapsed:n,isCompactMode:s,setIsCompactMode:i,isMobileMenuOpen:o,setIsMobileMenuOpen:l,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h,setActiveSD:m}){var E;const f=rT(),g=Xr(),v=[{path:"/",icon:_m,label:"Strategic Directives",tooltip:"Home"},{path:"/backlog",icon:ji,label:"Backlog",tooltip:"Backlog"},{path:"/uat-tests",icon:AE,label:"UAT Tests",tooltip:"UAT"}],b={expanded:{width:"16rem",transition:f?{duration:0}:Pg},collapsed:{width:"4rem",transition:f?{duration:0}:Pg}},y={rest:{scale:1,transition:{duration:.2}},hover:{scale:f?1:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:f?1:.98}},x={hidden:{opacity:0,x:-10,transition:{duration:.1}},visible:{opacity:1,x:0,transition:{duration:.2,delay:.5}}},p=g.pathname==="/directive-lab",j=s?"p-2 pt-16 md:pt-2":p?"p-0":"p-6 pt-20 md:pt-6";return a.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 relative",children:[a.jsx(ge.button,{onClick:()=>l(!o),className:"mobile-menu-button fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg md:hidden",whileHover:{scale:f?1:1.05},whileTap:{scale:f?1:.95},children:a.jsx(Mr,{mode:"wait",children:o?a.jsx(ge.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:f?0:.2},children:a.jsx(yr,{className:"w-6 h-6"})},"close"):a.jsx(ge.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:f?0:.2},children:a.jsx(zE,{className:"w-6 h-6"})},"menu")})}),a.jsx(Mr,{children:o&&a.jsx(ge.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>l(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:f?0:.2}})}),a.jsxs(ge.div,{className:`
          fixed md:static inset-y-0 left-0 bg-gradient-to-br from-purple-600 via-purple-700 to-blue-800 shadow-2xl 
          z-50 flex flex-col overflow-hidden transition-transform duration-300 ease-in-out
          md:transform-none backdrop-blur-xl
          ${o?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,initial:!1,animate:r?"collapsed":"expanded",variants:b,children:[a.jsxs("div",{className:`${s?"p-2":"p-4"} border-b border-purple-400/30 backdrop-blur-sm relative overflow-hidden`,children:[a.jsx(ge.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:f?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:f?0:4,repeat:1/0,ease:"linear"}}),a.jsxs("div",{className:`flex items-center ${r?"justify-center":"justify-between"}`,children:[a.jsx(Mr,{children:!r&&a.jsx(ge.h1,{className:"text-xl font-bold text-white relative z-10 drop-shadow-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:f?0:.15},children:"LEO Protocol"})}),a.jsx(ge.button,{onClick:()=>n(!r),className:"hidden md:block p-1 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/10 relative z-10",title:r?"Expand sidebar":"Collapse sidebar",whileHover:{scale:f?1:1.1},whileTap:{scale:f?1:.9},children:a.jsx(ge.div,{animate:{rotate:r?0:180},transition:{duration:f?0:.15},children:a.jsx(It,{className:"w-5 h-5"})})})]}),a.jsx(Mr,{children:!r&&a.jsxs(ge.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:f?0:.15},children:[a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx(ge.div,{className:`w-2 h-2 rounded-full mr-2 ${t?"bg-green-500":"bg-red-500"}`,animate:{scale:t?[1,1.2,1]:1},transition:{duration:2,repeat:t?1/0:0,repeatType:"loop"}}),a.jsx("span",{className:"text-sm text-purple-100 relative z-10",children:t?"Connected":"Disconnected"})]}),a.jsxs(ge.span,{className:"text-xs px-2 py-1 bg-white/20 text-white rounded-full inline-block mt-2 backdrop-blur-sm border border-white/20 relative z-10 font-medium",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:["v",((E=e.leoProtocol)==null?void 0:E.version)||"detecting..."]})]})})]}),a.jsxs("nav",{className:`flex-1 ${s?"p-2":"p-4"} relative`,children:[a.jsx(ge.div,{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"20px 20px"},animate:{backgroundPosition:f?"0px 0px":["0px 0px","20px 20px","0px 0px"]},transition:{duration:f?0:20,repeat:1/0,ease:"linear"}}),a.jsx(ge.ul,{className:"space-y-1",variants:oT,initial:"hidden",animate:"visible",children:v.map(({path:N,icon:C,label:T,tooltip:D},R)=>a.jsx(ge.li,{variants:aT,custom:R,children:a.jsx(MS,{to:N,className:({isActive:P})=>`block ${P?"active-nav-item":""}`,onClick:()=>l(!1),children:({isActive:P})=>a.jsxs(ge.div,{className:`flex items-center ${s?"p-1.5":"p-2"} rounded-lg transition-all duration-300 group relative backdrop-blur-sm ${P?"bg-white/25 text-white border border-white/30 shadow-lg backdrop-blur-md":"hover:bg-white/10 text-purple-100 hover:text-white border border-transparent hover:border-white/20"}`,variants:y,initial:"rest",whileHover:"hover",whileTap:"tap",layout:!0,children:[P&&!f&&a.jsxs(a.Fragment,{children:[a.jsx(ge.div,{className:"absolute inset-0 rounded-lg bg-white/30 blur-xl",initial:{opacity:0,scale:.8},animate:{opacity:.6,scale:1},transition:{duration:.3}}),a.jsx(ge.div,{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400/40 to-blue-400/40",animate:{background:["linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))","linear-gradient(to right, rgba(59, 130, 246, 0.4), rgba(168, 85, 247, 0.4))","linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]}),a.jsx(C,{className:`${s?"w-4 h-4":"w-5 h-5"} ${r?"":"mr-3"} relative z-10`}),a.jsx(Mr,{children:!r&&a.jsx(ge.span,{className:`${s?"text-sm":""} relative z-10`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:f?0:.2},children:T})}),a.jsxs(ge.span,{className:`absolute ${r?"left-full ml-2 top-1/2 transform -translate-y-1/2":"bottom-full mb-2 left-1/2 transform -translate-x-1/2"} px-2 py-1 bg-gray-900/90 backdrop-blur-md text-white text-xs rounded whitespace-nowrap pointer-events-none z-30 opacity-0 group-hover:opacity-100 transition-all duration-200 delay-300 border border-white/20 shadow-xl`,style:{visibility:"hidden"},animate:{opacity:0,visibility:"hidden"},whileHover:{opacity:1,visibility:"visible"},children:[D,a.jsx("div",{className:`absolute ${r?"right-full top-1/2 transform -translate-y-1/2 border-l-0 border-r-4 border-r-gray-900 dark:border-r-gray-700 border-t-4 border-b-4 border-t-transparent border-b-transparent":"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900 dark:border-t-gray-700 border-l-4 border-r-4 border-l-transparent border-r-transparent border-b-0"}`})]})]})})},N))})]}),a.jsxs(ge.div,{className:`border-t border-purple-400/30 ${s?"p-2":"p-4"} relative backdrop-blur-sm`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[a.jsxs(ge.button,{onClick:()=>i(!s),className:`w-full flex items-center ${s?"p-1.5":"p-2"} rounded-lg hover:bg-white/10 text-purple-100 hover:text-white transition-all duration-300 group relative border border-transparent hover:border-white/20 backdrop-blur-sm`,title:s?"Standard view":"Compact view",whileHover:{scale:f?1:1.02},whileTap:{scale:f?1:.98},children:[a.jsx(ge.div,{animate:{rotate:s?180:0},transition:{duration:f?0:.15},children:a.jsx(UE,{className:`${s?"w-4 h-4":"w-5 h-5"} ${r?"":"mr-3"}`})}),a.jsx(Mr,{children:!r&&a.jsx(ge.span,{className:s?"text-sm":"",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?"Standard View":"Compact View"})}),a.jsx(Mr,{children:r&&a.jsx(ge.span,{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap pointer-events-none z-10",variants:x,initial:"hidden",whileHover:"visible",exit:"hidden",children:s?"Standard":"Compact"})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-purple-400/30",children:a.jsx(Pm,{onRefresh:h,isCompact:s,isCollapsed:r})})]})]}),a.jsxs(ge.div,{className:"flex-1 flex flex-col overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:f?0:.08},style:{paddingTop:"env(safe-area-inset-top)"},children:[a.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-600 via-purple-700 to-blue-800 border-b border-purple-400/30 shadow-lg relative overflow-hidden backdrop-blur-xl",children:[a.jsx(ge.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:f?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:f?0:4,repeat:1/0,ease:"linear"}}),a.jsx(ge.div,{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"40px 40px"},animate:{backgroundPosition:f?"0px 0px":["0px 0px","40px 40px","0px 0px"]},transition:{duration:f?0:15,repeat:1/0,ease:"linear"}}),a.jsx("div",{className:"flex-1 relative z-10",children:a.jsx(eT,{isCompact:s})}),a.jsx("div",{className:"flex items-center px-4 py-2 relative z-10",children:a.jsx(tT,{})})]}),a.jsx("main",{className:`flex-1 overflow-y-auto ${j}`,children:a.jsx(Mr,{children:a.jsx(ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:f?0:.1,ease:"easeOut"},children:a.jsx(SS,{context:{state:e,isCompactMode:s,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h}})},g.pathname)})})]})]})}function cT(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const uT=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dT=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hT={};function Ag(e,t){return(hT.jsx?dT:uT).test(e)}const fT=/[ \t\n\f\r]/g;function mT(e){return typeof e=="object"?e.type==="text"?Ig(e.value):!1:Ig(e)}function Ig(e){return e.replace(fT,"")===""}class xo{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}}xo.prototype.normal={};xo.prototype.property={};xo.prototype.space=void 0;function Xw(e,t){const r={},n={};for(const s of e)Object.assign(r,s.property),Object.assign(n,s.normal);return new xo(r,n,t)}function wh(e){return e.toLowerCase()}class Kt{constructor(t,r){this.attribute=r,this.property=t}}Kt.prototype.attribute="";Kt.prototype.booleanish=!1;Kt.prototype.boolean=!1;Kt.prototype.commaOrSpaceSeparated=!1;Kt.prototype.commaSeparated=!1;Kt.prototype.defined=!1;Kt.prototype.mustUseProperty=!1;Kt.prototype.number=!1;Kt.prototype.overloadedBoolean=!1;Kt.prototype.property="";Kt.prototype.spaceSeparated=!1;Kt.prototype.space=void 0;let pT=0;const fe=Cs(),Qe=Cs(),kh=Cs(),G=Cs(),Pe=Cs(),di=Cs(),Qt=Cs();function Cs(){return 2**++pT}const jh=Object.freeze(Object.defineProperty({__proto__:null,boolean:fe,booleanish:Qe,commaOrSpaceSeparated:Qt,commaSeparated:di,number:G,overloadedBoolean:kh,spaceSeparated:Pe},Symbol.toStringTag,{value:"Module"})),Au=Object.keys(jh);class Am extends Kt{constructor(t,r,n,s){let i=-1;if(super(t,r),Rg(this,"space",s),typeof n=="number")for(;++i<Au.length;){const o=Au[i];Rg(this,Au[i],(n&jh[o])===jh[o])}}}Am.prototype.defined=!0;function Rg(e,t,r){r&&(e[t]=r)}function Li(e){const t={},r={};for(const[n,s]of Object.entries(e.properties)){const i=new Am(n,e.transform(e.attributes||{},n),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[wh(n)]=n,r[wh(i.attribute)]=n}return new xo(t,r,e.space)}const Qw=Li({properties:{ariaActiveDescendant:null,ariaAtomic:Qe,ariaAutoComplete:null,ariaBusy:Qe,ariaChecked:Qe,ariaColCount:G,ariaColIndex:G,ariaColSpan:G,ariaControls:Pe,ariaCurrent:null,ariaDescribedBy:Pe,ariaDetails:null,ariaDisabled:Qe,ariaDropEffect:Pe,ariaErrorMessage:null,ariaExpanded:Qe,ariaFlowTo:Pe,ariaGrabbed:Qe,ariaHasPopup:null,ariaHidden:Qe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Pe,ariaLevel:G,ariaLive:null,ariaModal:Qe,ariaMultiLine:Qe,ariaMultiSelectable:Qe,ariaOrientation:null,ariaOwns:Pe,ariaPlaceholder:null,ariaPosInSet:G,ariaPressed:Qe,ariaReadOnly:Qe,ariaRelevant:null,ariaRequired:Qe,ariaRoleDescription:Pe,ariaRowCount:G,ariaRowIndex:G,ariaRowSpan:G,ariaSelected:Qe,ariaSetSize:G,ariaSort:null,ariaValueMax:G,ariaValueMin:G,ariaValueNow:G,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Yw(e,t){return t in e?e[t]:t}function Zw(e,t){return Yw(e,t.toLowerCase())}const gT=Li({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:di,acceptCharset:Pe,accessKey:Pe,action:null,allow:null,allowFullScreen:fe,allowPaymentRequest:fe,allowUserMedia:fe,alt:null,as:null,async:fe,autoCapitalize:null,autoComplete:Pe,autoFocus:fe,autoPlay:fe,blocking:Pe,capture:null,charSet:null,checked:fe,cite:null,className:Pe,cols:G,colSpan:null,content:null,contentEditable:Qe,controls:fe,controlsList:Pe,coords:G|di,crossOrigin:null,data:null,dateTime:null,decoding:null,default:fe,defer:fe,dir:null,dirName:null,disabled:fe,download:kh,draggable:Qe,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:fe,formTarget:null,headers:Pe,height:G,hidden:kh,high:G,href:null,hrefLang:null,htmlFor:Pe,httpEquiv:Pe,id:null,imageSizes:null,imageSrcSet:null,inert:fe,inputMode:null,integrity:null,is:null,isMap:fe,itemId:null,itemProp:Pe,itemRef:Pe,itemScope:fe,itemType:Pe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:fe,low:G,manifest:null,max:null,maxLength:G,media:null,method:null,min:null,minLength:G,multiple:fe,muted:fe,name:null,nonce:null,noModule:fe,noValidate:fe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:fe,optimum:G,pattern:null,ping:Pe,placeholder:null,playsInline:fe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:fe,referrerPolicy:null,rel:Pe,required:fe,reversed:fe,rows:G,rowSpan:G,sandbox:Pe,scope:null,scoped:fe,seamless:fe,selected:fe,shadowRootClonable:fe,shadowRootDelegatesFocus:fe,shadowRootMode:null,shape:null,size:G,sizes:null,slot:null,span:G,spellCheck:Qe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:G,step:null,style:null,tabIndex:G,target:null,title:null,translate:null,type:null,typeMustMatch:fe,useMap:null,value:Qe,width:G,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Pe,axis:null,background:null,bgColor:null,border:G,borderColor:null,bottomMargin:G,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:fe,declare:fe,event:null,face:null,frame:null,frameBorder:null,hSpace:G,leftMargin:G,link:null,longDesc:null,lowSrc:null,marginHeight:G,marginWidth:G,noResize:fe,noHref:fe,noShade:fe,noWrap:fe,object:null,profile:null,prompt:null,rev:null,rightMargin:G,rules:null,scheme:null,scrolling:Qe,standby:null,summary:null,text:null,topMargin:G,valueType:null,version:null,vAlign:null,vLink:null,vSpace:G,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:fe,disableRemotePlayback:fe,prefix:null,property:null,results:G,security:null,unselectable:null},space:"html",transform:Zw}),xT=Li({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Qt,accentHeight:G,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:G,amplitude:G,arabicForm:null,ascent:G,attributeName:null,attributeType:null,azimuth:G,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:G,by:null,calcMode:null,capHeight:G,className:Pe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:G,diffuseConstant:G,direction:null,display:null,dur:null,divisor:G,dominantBaseline:null,download:fe,dx:null,dy:null,edgeMode:null,editable:null,elevation:G,enableBackground:null,end:null,event:null,exponent:G,externalResourcesRequired:null,fill:null,fillOpacity:G,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:di,g2:di,glyphName:di,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:G,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:G,horizOriginX:G,horizOriginY:G,id:null,ideographic:G,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:G,k:G,k1:G,k2:G,k3:G,k4:G,kernelMatrix:Qt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:G,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:G,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:G,overlineThickness:G,paintOrder:null,panose1:null,path:null,pathLength:G,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Pe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:G,pointsAtY:G,pointsAtZ:G,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Qt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Qt,rev:Qt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Qt,requiredFeatures:Qt,requiredFonts:Qt,requiredFormats:Qt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:G,specularExponent:G,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:G,strikethroughThickness:G,string:null,stroke:null,strokeDashArray:Qt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:G,strokeOpacity:G,strokeWidth:null,style:null,surfaceScale:G,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Qt,tabIndex:G,tableValues:null,target:null,targetX:G,targetY:G,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Qt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:G,underlineThickness:G,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:G,values:null,vAlphabetic:G,vMathematical:G,vectorEffect:null,vHanging:G,vIdeographic:G,version:null,vertAdvY:G,vertOriginX:G,vertOriginY:G,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:G,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Yw}),ek=Li({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),tk=Li({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Zw}),rk=Li({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),yT={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},vT=/[A-Z]/g,Dg=/-[a-z]/g,bT=/^data[-\w.:]+$/i;function wT(e,t){const r=wh(t);let n=t,s=Kt;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&bT.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Dg,jT);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Dg.test(i)){let o=i.replace(vT,kT);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=Am}return new s(n,t)}function kT(e){return"-"+e.toLowerCase()}function jT(e){return e.charAt(1).toUpperCase()}const ST=Xw([Qw,gT,ek,tk,rk],"html"),Im=Xw([Qw,xT,ek,tk,rk],"svg");function NT(e){return e.join(" ").trim()}var Rm={},Lg=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,_T=/\n/g,CT=/^\s*/,ET=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,TT=/^:\s*/,PT=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,AT=/^[;\s]*/,IT=/^\s+|\s+$/g,RT=`
`,Og="/",Mg="*",os="",DT="comment",LT="declaration",OT=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function s(g){var v=g.match(_T);v&&(r+=v.length);var b=g.lastIndexOf(RT);n=~b?g.length-b:n+g.length}function i(){var g={line:r,column:n};return function(v){return v.position=new o(g),u(),v}}function o(g){this.start=g,this.end={line:r,column:n},this.source=t.source}o.prototype.content=e;function l(g){var v=new Error(t.source+":"+r+":"+n+": "+g);if(v.reason=g,v.filename=t.source,v.line=r,v.column=n,v.source=e,!t.silent)throw v}function c(g){var v=g.exec(e);if(v){var b=v[0];return s(b),e=e.slice(b.length),v}}function u(){c(CT)}function d(g){var v;for(g=g||[];v=h();)v!==!1&&g.push(v);return g}function h(){var g=i();if(!(Og!=e.charAt(0)||Mg!=e.charAt(1))){for(var v=2;os!=e.charAt(v)&&(Mg!=e.charAt(v)||Og!=e.charAt(v+1));)++v;if(v+=2,os===e.charAt(v-1))return l("End of comment missing");var b=e.slice(2,v-2);return n+=2,s(b),e=e.slice(v),n+=2,g({type:DT,comment:b})}}function m(){var g=i(),v=c(ET);if(v){if(h(),!c(TT))return l("property missing ':'");var b=c(PT),y=g({type:LT,property:$g(v[0].replace(Lg,os)),value:b?$g(b[0].replace(Lg,os)):os});return c(AT),y}}function f(){var g=[];d(g);for(var v;v=m();)v!==!1&&(g.push(v),d(g));return g}return u(),f()};function $g(e){return e?e.replace(IT,os):os}var MT=_t&&_t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rm,"__esModule",{value:!0});Rm.default=FT;var $T=MT(OT);function FT(e,t){var r=null;if(!e||typeof e!="string")return r;var n=(0,$T.default)(e),s=typeof t=="function";return n.forEach(function(i){if(i.type==="declaration"){var o=i.property,l=i.value;s?t(o,l,i):l&&(r=r||{},r[o]=l)}}),r}var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.camelCase=void 0;var zT=/^--[a-zA-Z0-9_-]+$/,UT=/-([a-z])/g,BT=/^[^-]+$/,VT=/^-(webkit|moz|ms|o|khtml)-/,HT=/^-(ms)-/,qT=function(e){return!e||BT.test(e)||zT.test(e)},WT=function(e,t){return t.toUpperCase()},Fg=function(e,t){return"".concat(t,"-")},GT=function(e,t){return t===void 0&&(t={}),qT(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(HT,Fg):e=e.replace(VT,Fg),e.replace(UT,WT))};Ac.camelCase=GT;var KT=_t&&_t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},JT=KT(Rm),XT=Ac;function Sh(e,t){var r={};return!e||typeof e!="string"||(0,JT.default)(e,function(n,s){n&&s&&(r[(0,XT.camelCase)(n,t)]=s)}),r}Sh.default=Sh;var QT=Sh;const YT=Hh(QT),nk=sk("end"),Dm=sk("start");function sk(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function ZT(e){const t=Dm(e),r=nk(e);if(t&&r)return{start:t,end:r}}function Na(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?zg(e.position):"start"in e||"end"in e?zg(e):"line"in e||"column"in e?Nh(e):""}function Nh(e){return Ug(e&&e.line)+":"+Ug(e&&e.column)}function zg(e){return Nh(e&&e.start)+"-"+Nh(e&&e.end)}function Ug(e){return e&&typeof e=="number"?e:1}class Et extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let s="",i={},o=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?s=t:!i.cause&&t&&(o=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof n=="string"){const c=n.indexOf(":");c===-1?i.ruleId=n:(i.source=n.slice(0,c),i.ruleId=n.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=Na(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Et.prototype.file="";Et.prototype.name="";Et.prototype.reason="";Et.prototype.message="";Et.prototype.stack="";Et.prototype.column=void 0;Et.prototype.line=void 0;Et.prototype.ancestors=void 0;Et.prototype.cause=void 0;Et.prototype.fatal=void 0;Et.prototype.place=void 0;Et.prototype.ruleId=void 0;Et.prototype.source=void 0;const Lm={}.hasOwnProperty,eP=new Map,tP=/[A-Z]/g,rP=new Set(["table","tbody","thead","tfoot","tr"]),nP=new Set(["td","th"]),ik="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function sP(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=hP(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=dP(r,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Im:ST,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=ak(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function ak(e,t,r){if(t.type==="element")return iP(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return aP(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return lP(e,t,r);if(t.type==="mdxjsEsm")return oP(e,t);if(t.type==="root")return cP(e,t,r);if(t.type==="text")return uP(e,t)}function iP(e,t,r){const n=e.schema;let s=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(s=Im,e.schema=s),e.ancestors.push(t);const i=lk(e,t.tagName,!1),o=fP(e,t);let l=Mm(e,t);return rP.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!mT(c):!0})),ok(e,o,i,t),Om(o,l),e.ancestors.pop(),e.schema=n,e.create(t,i,o,r)}function aP(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}so(e,t.position)}function oP(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);so(e,t.position)}function lP(e,t,r){const n=e.schema;let s=n;t.name==="svg"&&n.space==="html"&&(s=Im,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:lk(e,t.name,!0),o=mP(e,t),l=Mm(e,t);return ok(e,o,i,t),Om(o,l),e.ancestors.pop(),e.schema=n,e.create(t,i,o,r)}function cP(e,t,r){const n={};return Om(n,Mm(e,t)),e.create(t,e.Fragment,n,r)}function uP(e,t){return t.value}function ok(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function Om(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function dP(e,t,r){return n;function n(s,i,o,l){const u=Array.isArray(o.children)?r:t;return l?u(i,o,l):u(i,o)}}function hP(e,t){return r;function r(n,s,i,o){const l=Array.isArray(i.children),c=Dm(n);return t(s,i,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function fP(e,t){const r={};let n,s;for(s in t.properties)if(s!=="children"&&Lm.call(t.properties,s)){const i=pP(e,s,t.properties[s]);if(i){const[o,l]=i;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&nP.has(t.tagName)?n=l:r[o]=l}}if(n){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function mP(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const i=n.data.estree.body[0];i.type;const o=i.expression;o.type;const l=o.properties[0];l.type,Object.assign(r,e.evaluater.evaluateExpression(l.argument))}else so(e,t.position);else{const s=n.name;let i;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const l=n.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else so(e,t.position);else i=n.value===null?!0:n.value;r[s]=i}return r}function Mm(e,t){const r=[];let n=-1;const s=e.passKeys?new Map:eP;for(;++n<t.children.length;){const i=t.children[n];let o;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;o=c+"-"+u,s.set(c,u+1)}}const l=ak(e,i,o);l!==void 0&&r.push(l)}return r}function pP(e,t,r){const n=wT(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?cT(r):NT(r)),n.property==="style"){let s=typeof r=="object"?r:gP(e,String(r));return e.stylePropertyNameCase==="css"&&(s=xP(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&n.space?yT[n.property]||n.property:n.attribute,r]}}function gP(e,t){try{return YT(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,s=new Et("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=ik+"#cannot-parse-style-attribute",s}}function lk(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,o;for(;++i<s.length;){const l=Ag(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}n=o}else n=Ag(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const s=n.value;return Lm.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(n);so(e)}function so(e,t){const r=new Et("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=ik+"#cannot-handle-mdx-estrees-without-createevaluater",r}function xP(e){const t={};let r;for(r in e)Lm.call(e,r)&&(t[yP(r)]=e[r]);return t}function yP(e){let t=e.replace(tP,vP);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function vP(e){return"-"+e.toLowerCase()}const Iu={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},bP={};function wP(e,t){const r=bP,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,s=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return ck(e,n,s)}function ck(e,t,r){if(kP(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Bg(e.children,t,r)}return Array.isArray(e)?Bg(e,t,r):""}function Bg(e,t,r){const n=[];let s=-1;for(;++s<e.length;)n[s]=ck(e[s],t,r);return n.join("")}function kP(e){return!!(e&&typeof e=="object")}const Vg=document.createElement("i");function $m(e){const t="&"+e+";";Vg.innerHTML=t;const r=Vg.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Kr(e,t,r,n){const s=e.length;let i=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(t,r),e.splice(...o);else for(r&&e.splice(t,r);i<n.length;)o=n.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function hr(e,t){return e.length>0?(Kr(e,e.length,0,t),e):t}const Hg={}.hasOwnProperty;function jP(e){const t={};let r=-1;for(;++r<e.length;)SP(t,e[r]);return t}function SP(e,t){let r;for(r in t){const s=(Hg.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let o;if(i)for(o in i){Hg.call(s,o)||(s[o]=[]);const l=i[o];NP(s[o],Array.isArray(l)?l:l?[l]:[])}}}function NP(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Kr(e,0,0,n)}function uk(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function hi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Br=Qn(/[A-Za-z]/),tr=Qn(/[\dA-Za-z]/),_P=Qn(/[#-'*+\--9=?A-Z^-~]/);function _h(e){return e!==null&&(e<32||e===127)}const Ch=Qn(/\d/),CP=Qn(/[\dA-Fa-f]/),EP=Qn(/[!-/:-@[-`{-~]/);function le(e){return e!==null&&e<-2}function Gt(e){return e!==null&&(e<0||e===32)}function Ce(e){return e===-2||e===-1||e===32}const TP=Qn(new RegExp("\\p{P}|\\p{S}","u")),PP=Qn(/\s/);function Qn(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Oi(e){const t=[];let r=-1,n=0,s=0;for(;++r<e.length;){const i=e.charCodeAt(r);let o="";if(i===37&&tr(e.charCodeAt(r+1))&&tr(e.charCodeAt(r+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(r+1);i<56320&&l>56319&&l<57344?(o=String.fromCharCode(i,l),s=1):o=""}else o=String.fromCharCode(i);o&&(t.push(e.slice(n,r),encodeURIComponent(o)),n=r+s+1,o=""),s&&(r+=s,s=0)}return t.join("")+e.slice(n)}function Ie(e,t,r,n){const s=n?n-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return Ce(c)?(e.enter(r),l(c)):t(c)}function l(c){return Ce(c)&&i++<s?(e.consume(c),l):(e.exit(r),t(c))}}const AP={tokenize:IP};function IP(e){const t=e.attempt(this.parser.constructs.contentInitial,n,s);let r;return t;function n(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Ie(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=c),r=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return le(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),o)}}const RP={tokenize:DP},qg={tokenize:LP};function DP(e){const t=this,r=[];let n=0,s,i,o;return l;function l(p){if(n<r.length){const j=r[n];return t.containerState=j[1],e.attempt(j[0].continuation,c,u)(p)}return u(p)}function c(p){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&x();const j=t.events.length;let E=j,N;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){N=t.events[E][1].end;break}y(n);let C=j;for(;C<t.events.length;)t.events[C][1].end={...N},C++;return Kr(t.events,E+1,0,t.events.slice(j)),t.events.length=C,u(p)}return l(p)}function u(p){if(n===r.length){if(!s)return m(p);if(s.currentConstruct&&s.currentConstruct.concrete)return g(p);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(qg,d,h)(p)}function d(p){return s&&x(),y(n),m(p)}function h(p){return t.parser.lazy[t.now().line]=n!==r.length,o=t.now().offset,g(p)}function m(p){return t.containerState={},e.attempt(qg,f,g)(p)}function f(p){return n++,r.push([t.currentConstruct,t.containerState]),m(p)}function g(p){if(p===null){s&&x(),y(0),e.consume(p);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),v(p)}function v(p){if(p===null){b(e.exit("chunkFlow"),!0),y(0),e.consume(p);return}return le(p)?(e.consume(p),b(e.exit("chunkFlow")),n=0,t.interrupt=void 0,l):(e.consume(p),v)}function b(p,j){const E=t.sliceStream(p);if(j&&E.push(null),p.previous=i,i&&(i.next=p),i=p,s.defineSkip(p.start),s.write(E),t.parser.lazy[p.start.line]){let N=s.events.length;for(;N--;)if(s.events[N][1].start.offset<o&&(!s.events[N][1].end||s.events[N][1].end.offset>o))return;const C=t.events.length;let T=C,D,R;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(D){R=t.events[T][1].end;break}D=!0}for(y(n),N=C;N<t.events.length;)t.events[N][1].end={...R},N++;Kr(t.events,T+1,0,t.events.slice(C)),t.events.length=N}}function y(p){let j=r.length;for(;j-- >p;){const E=r[j];t.containerState=E[1],E[0].exit.call(t,e)}r.length=p}function x(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function LP(e,t,r){return Ie(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Wg(e){if(e===null||Gt(e)||PP(e))return 1;if(TP(e))return 2}function Fm(e,t,r){const n=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!n.includes(i)&&(t=i(t,r),n.push(i))}return t}const Eh={name:"attention",resolveAll:OP,tokenize:MP};function OP(e,t){let r=-1,n,s,i,o,l,c,u,d;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;c=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const h={...e[n][1].end},m={...e[r][1].start};Gg(h,-c),Gg(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[n][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:m},i={type:c>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[n][1].end={...o.start},e[r][1].start={...l.end},u=[],e[n][1].end.offset-e[n][1].start.offset&&(u=hr(u,[["enter",e[n][1],t],["exit",e[n][1],t]])),u=hr(u,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",i,t]]),u=hr(u,Fm(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),u=hr(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[r][1].end.offset-e[r][1].start.offset?(d=2,u=hr(u,[["enter",e[r][1],t],["exit",e[r][1],t]])):d=0,Kr(e,n-1,r-n+3,u),r=n+u.length-d-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function MP(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,s=Wg(n);let i;return o;function o(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),d=Wg(c),h=!d||d===2&&s||r.includes(c),m=!s||s===2&&d||r.includes(n);return u._open=!!(i===42?h:h&&(s||!m)),u._close=!!(i===42?m:m&&(d||!h)),t(c)}}function Gg(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const $P={name:"autolink",tokenize:FP};function FP(e,t,r){let n=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return Br(f)?(e.consume(f),o):f===64?r(f):u(f)}function o(f){return f===43||f===45||f===46||tr(f)?(n=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),n=0,c):(f===43||f===45||f===46||tr(f))&&n++<32?(e.consume(f),l):(n=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||_h(f)?r(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),d):_P(f)?(e.consume(f),u):r(f)}function d(f){return tr(f)?h(f):r(f)}function h(f){return f===46?(e.consume(f),n=0,d):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||tr(f))&&n++<63){const g=f===45?m:h;return e.consume(f),g}return r(f)}}const Ic={partial:!0,tokenize:zP};function zP(e,t,r){return n;function n(i){return Ce(i)?Ie(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||le(i)?t(i):r(i)}}const dk={continuation:{tokenize:BP},exit:VP,name:"blockQuote",tokenize:UP};function UP(e,t,r){const n=this;return s;function s(o){if(o===62){const l=n.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return r(o)}function i(o){return Ce(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function BP(e,t,r){const n=this;return s;function s(o){return Ce(o)?Ie(e,i,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(dk,t,r)(o)}}function VP(e){e.exit("blockQuote")}const hk={name:"characterEscape",tokenize:HP};function HP(e,t,r){return n;function n(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return EP(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const fk={name:"characterReference",tokenize:qP};function qP(e,t,r){const n=this;let s=0,i,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,o=tr,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=CP,d):(e.enter("characterReferenceValue"),i=7,o=Ch,d(h))}function d(h){if(h===59&&s){const m=e.exit("characterReferenceValue");return o===tr&&!$m(n.sliceSerialize(m))?r(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&s++<i?(e.consume(h),d):r(h)}}const Kg={partial:!0,tokenize:GP},Jg={concrete:!0,name:"codeFenced",tokenize:WP};function WP(e,t,r){const n=this,s={partial:!0,tokenize:E};let i=0,o=0,l;return c;function c(N){return u(N)}function u(N){const C=n.events[n.events.length-1];return i=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,l=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(N)}function d(N){return N===l?(o++,e.consume(N),d):o<3?r(N):(e.exit("codeFencedFenceSequence"),Ce(N)?Ie(e,h,"whitespace")(N):h(N))}function h(N){return N===null||le(N)?(e.exit("codeFencedFence"),n.interrupt?t(N):e.check(Kg,v,j)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||le(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(N)):Ce(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ie(e,f,"whitespace")(N)):N===96&&N===l?r(N):(e.consume(N),m)}function f(N){return N===null||le(N)?h(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(N))}function g(N){return N===null||le(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(N)):N===96&&N===l?r(N):(e.consume(N),g)}function v(N){return e.attempt(s,j,b)(N)}function b(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),y}function y(N){return i>0&&Ce(N)?Ie(e,x,"linePrefix",i+1)(N):x(N)}function x(N){return N===null||le(N)?e.check(Kg,v,j)(N):(e.enter("codeFlowValue"),p(N))}function p(N){return N===null||le(N)?(e.exit("codeFlowValue"),x(N)):(e.consume(N),p)}function j(N){return e.exit("codeFenced"),t(N)}function E(N,C,T){let D=0;return R;function R(M){return N.enter("lineEnding"),N.consume(M),N.exit("lineEnding"),P}function P(M){return N.enter("codeFencedFence"),Ce(M)?Ie(N,L,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):L(M)}function L(M){return M===l?(N.enter("codeFencedFenceSequence"),J(M)):T(M)}function J(M){return M===l?(D++,N.consume(M),J):D>=o?(N.exit("codeFencedFenceSequence"),Ce(M)?Ie(N,I,"whitespace")(M):I(M)):T(M)}function I(M){return M===null||le(M)?(N.exit("codeFencedFence"),C(M)):T(M)}}}function GP(e,t,r){const n=this;return s;function s(o){return o===null?r(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}const Ru={name:"codeIndented",tokenize:JP},KP={partial:!0,tokenize:XP};function JP(e,t,r){const n=this;return s;function s(u){return e.enter("codeIndented"),Ie(e,i,"linePrefix",5)(u)}function i(u){const d=n.events[n.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):r(u)}function o(u){return u===null?c(u):le(u)?e.attempt(KP,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||le(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function XP(e,t,r){const n=this;return s;function s(o){return n.parser.lazy[n.now().line]?r(o):le(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Ie(e,i,"linePrefix",5)(o)}function i(o){const l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):le(o)?s(o):r(o)}}const QP={name:"codeText",previous:ZP,resolve:YP,tokenize:e5};function YP(e){let t=e.length-4,r=3,n,s;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)s===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(s=n):(n===t||e[n][1].type==="lineEnding")&&(e[s][1].type="codeTextData",n!==s+2&&(e[s][1].end=e[n-1][1].end,e.splice(s+2,n-s-2),t-=n-s-2,n=s+2),s=void 0);return e}function ZP(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function e5(e,t,r){let n=0,s,i;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),n++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?r(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(i=e.enter("codeTextSequence"),s=0,d(h)):le(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||le(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),s++,d):s===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",u(h))}}class t5{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const s=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&Zi(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Zi(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Zi(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Zi(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Zi(this.left,r.reverse())}}}function Zi(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function mk(e){const t={};let r=-1,n,s,i,o,l,c,u;const d=new t5(e);for(;++r<d.length;){for(;r in t;)r=t[r];if(n=d.get(r),r&&n[1].type==="chunkFlow"&&d.get(r-1)[1].type==="listItemPrefix"&&(c=n[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,r5(d,r)),r=t[r],u=!0);else if(n[1]._container){for(i=r,s=void 0;i--;)if(o=d.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(n[1].end={...d.get(s)[1].start},l=d.slice(s,r),l.unshift(n),d.splice(s,r-s+1,l))}}return Kr(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function r5(e,t){const r=e.get(t)[1],n=e.get(t)[2];let s=t-1;const i=[];let o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,h,m=-1,f=r,g=0,v=0;const b=[v];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(d=n.sliceStream(f),f.next||d.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=r;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(v=m+1,b.push(v),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):b.pop(),m=b.length;m--;){const y=l.slice(b[m],b[m+1]),x=i.pop();c.push([x,x+y.length-1]),e.splice(x,2,y)}for(c.reverse(),m=-1;++m<c.length;)u[g+c[m][0]]=g+c[m][1],g+=c[m][1]-c[m][0]-1;return u}const n5={resolve:i5,tokenize:a5},s5={partial:!0,tokenize:o5};function i5(e){return mk(e),e}function a5(e,t){let r;return n;function n(l){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):le(l)?e.check(s5,o,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,s}}function o5(e,t,r){const n=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ie(e,i,"linePrefix")}function i(o){if(o===null||le(o))return r(o);const l=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(n.parser.constructs.flow,r,t)(o)}}function pk(e,t,r,n,s,i,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(y){return y===60?(e.enter(n),e.enter(s),e.enter(i),e.consume(y),e.exit(i),m):y===null||y===32||y===41||_h(y)?r(y):(e.enter(n),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function m(y){return y===62?(e.enter(i),e.consume(y),e.exit(i),e.exit(s),e.exit(n),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===62?(e.exit("chunkString"),e.exit(l),m(y)):y===null||y===60||le(y)?r(y):(e.consume(y),y===92?g:f)}function g(y){return y===60||y===62||y===92?(e.consume(y),f):f(y)}function v(y){return!d&&(y===null||y===41||Gt(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(n),t(y)):d<u&&y===40?(e.consume(y),d++,v):y===41?(e.consume(y),d--,v):y===null||y===32||y===40||_h(y)?r(y):(e.consume(y),y===92?b:v)}function b(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function gk(e,t,r,n,s,i){const o=this;let l=0,c;return u;function u(f){return e.enter(n),e.enter(s),e.consume(f),e.exit(s),e.enter(i),d}function d(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?r(f):f===93?(e.exit(i),e.enter(s),e.consume(f),e.exit(s),e.exit(n),t):le(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||le(f)||l++>999?(e.exit("chunkString"),d(f)):(e.consume(f),c||(c=!Ce(f)),f===92?m:h)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,h):h(f)}}function xk(e,t,r,n,s,i){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(n),e.enter(s),e.consume(m),e.exit(s),o=m===40?41:m,c):r(m)}function c(m){return m===o?(e.enter(s),e.consume(m),e.exit(s),e.exit(n),t):(e.enter(i),u(m))}function u(m){return m===o?(e.exit(i),c(o)):m===null?r(m):le(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Ie(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===o||m===null||le(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?h:d)}function h(m){return m===o||m===92?(e.consume(m),d):d(m)}}function _a(e,t){let r;return n;function n(s){return le(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),r=!0,n):Ce(s)?Ie(e,n,r?"linePrefix":"lineSuffix")(s):t(s)}}const l5={name:"definition",tokenize:u5},c5={partial:!0,tokenize:d5};function u5(e,t,r){const n=this;let s;return i;function i(f){return e.enter("definition"),o(f)}function o(f){return gk.call(n,e,l,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=hi(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):r(f)}function c(f){return Gt(f)?_a(e,u)(f):u(f)}function u(f){return pk(e,d,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return e.attempt(c5,h,h)(f)}function h(f){return Ce(f)?Ie(e,m,"whitespace")(f):m(f)}function m(f){return f===null||le(f)?(e.exit("definition"),n.parser.defined.push(s),t(f)):r(f)}}function d5(e,t,r){return n;function n(l){return Gt(l)?_a(e,s)(l):r(l)}function s(l){return xk(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return Ce(l)?Ie(e,o,"whitespace")(l):o(l)}function o(l){return l===null||le(l)?t(l):r(l)}}const h5={name:"hardBreakEscape",tokenize:f5};function f5(e,t,r){return n;function n(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return le(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const m5={name:"headingAtx",resolve:p5,tokenize:g5};function p5(e,t){let r=e.length-2,n=3,s,i;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(s={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},i={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Kr(e,n,r-n+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function g5(e,t,r){let n=0;return s;function s(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&n++<6?(e.consume(d),o):d===null||Gt(d)?(e.exit("atxHeadingSequence"),l(d)):r(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||le(d)?(e.exit("atxHeading"),t(d)):Ce(d)?Ie(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Gt(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const x5=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Xg=["pre","script","style","textarea"],y5={concrete:!0,name:"htmlFlow",resolveTo:w5,tokenize:k5},v5={partial:!0,tokenize:S5},b5={partial:!0,tokenize:j5};function w5(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function k5(e,t,r){const n=this;let s,i,o,l,c;return u;function u(_){return d(_)}function d(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),h}function h(_){return _===33?(e.consume(_),m):_===47?(e.consume(_),i=!0,v):_===63?(e.consume(_),s=3,n.interrupt?t:S):Br(_)?(e.consume(_),o=String.fromCharCode(_),b):r(_)}function m(_){return _===45?(e.consume(_),s=2,f):_===91?(e.consume(_),s=5,l=0,g):Br(_)?(e.consume(_),s=4,n.interrupt?t:S):r(_)}function f(_){return _===45?(e.consume(_),n.interrupt?t:S):r(_)}function g(_){const Ne="CDATA[";return _===Ne.charCodeAt(l++)?(e.consume(_),l===Ne.length?n.interrupt?t:L:g):r(_)}function v(_){return Br(_)?(e.consume(_),o=String.fromCharCode(_),b):r(_)}function b(_){if(_===null||_===47||_===62||Gt(_)){const Ne=_===47,tt=o.toLowerCase();return!Ne&&!i&&Xg.includes(tt)?(s=1,n.interrupt?t(_):L(_)):x5.includes(o.toLowerCase())?(s=6,Ne?(e.consume(_),y):n.interrupt?t(_):L(_)):(s=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(_):i?x(_):p(_))}return _===45||tr(_)?(e.consume(_),o+=String.fromCharCode(_),b):r(_)}function y(_){return _===62?(e.consume(_),n.interrupt?t:L):r(_)}function x(_){return Ce(_)?(e.consume(_),x):R(_)}function p(_){return _===47?(e.consume(_),R):_===58||_===95||Br(_)?(e.consume(_),j):Ce(_)?(e.consume(_),p):R(_)}function j(_){return _===45||_===46||_===58||_===95||tr(_)?(e.consume(_),j):E(_)}function E(_){return _===61?(e.consume(_),N):Ce(_)?(e.consume(_),E):p(_)}function N(_){return _===null||_===60||_===61||_===62||_===96?r(_):_===34||_===39?(e.consume(_),c=_,C):Ce(_)?(e.consume(_),N):T(_)}function C(_){return _===c?(e.consume(_),c=null,D):_===null||le(_)?r(_):(e.consume(_),C)}function T(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||Gt(_)?E(_):(e.consume(_),T)}function D(_){return _===47||_===62||Ce(_)?p(_):r(_)}function R(_){return _===62?(e.consume(_),P):r(_)}function P(_){return _===null||le(_)?L(_):Ce(_)?(e.consume(_),P):r(_)}function L(_){return _===45&&s===2?(e.consume(_),V):_===60&&s===1?(e.consume(_),z):_===62&&s===4?(e.consume(_),U):_===63&&s===3?(e.consume(_),S):_===93&&s===5?(e.consume(_),B):le(_)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(v5,re,J)(_)):_===null||le(_)?(e.exit("htmlFlowData"),J(_)):(e.consume(_),L)}function J(_){return e.check(b5,I,re)(_)}function I(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),M}function M(_){return _===null||le(_)?J(_):(e.enter("htmlFlowData"),L(_))}function V(_){return _===45?(e.consume(_),S):L(_)}function z(_){return _===47?(e.consume(_),o="",A):L(_)}function A(_){if(_===62){const Ne=o.toLowerCase();return Xg.includes(Ne)?(e.consume(_),U):L(_)}return Br(_)&&o.length<8?(e.consume(_),o+=String.fromCharCode(_),A):L(_)}function B(_){return _===93?(e.consume(_),S):L(_)}function S(_){return _===62?(e.consume(_),U):_===45&&s===2?(e.consume(_),S):L(_)}function U(_){return _===null||le(_)?(e.exit("htmlFlowData"),re(_)):(e.consume(_),U)}function re(_){return e.exit("htmlFlow"),t(_)}}function j5(e,t,r){const n=this;return s;function s(o){return le(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):r(o)}function i(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}function S5(e,t,r){return n;function n(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Ic,t,r)}}const N5={name:"htmlText",tokenize:_5};function _5(e,t,r){const n=this;let s,i,o;return l;function l(S){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(S),c}function c(S){return S===33?(e.consume(S),u):S===47?(e.consume(S),E):S===63?(e.consume(S),p):Br(S)?(e.consume(S),T):r(S)}function u(S){return S===45?(e.consume(S),d):S===91?(e.consume(S),i=0,g):Br(S)?(e.consume(S),x):r(S)}function d(S){return S===45?(e.consume(S),f):r(S)}function h(S){return S===null?r(S):S===45?(e.consume(S),m):le(S)?(o=h,z(S)):(e.consume(S),h)}function m(S){return S===45?(e.consume(S),f):h(S)}function f(S){return S===62?V(S):S===45?m(S):h(S)}function g(S){const U="CDATA[";return S===U.charCodeAt(i++)?(e.consume(S),i===U.length?v:g):r(S)}function v(S){return S===null?r(S):S===93?(e.consume(S),b):le(S)?(o=v,z(S)):(e.consume(S),v)}function b(S){return S===93?(e.consume(S),y):v(S)}function y(S){return S===62?V(S):S===93?(e.consume(S),y):v(S)}function x(S){return S===null||S===62?V(S):le(S)?(o=x,z(S)):(e.consume(S),x)}function p(S){return S===null?r(S):S===63?(e.consume(S),j):le(S)?(o=p,z(S)):(e.consume(S),p)}function j(S){return S===62?V(S):p(S)}function E(S){return Br(S)?(e.consume(S),N):r(S)}function N(S){return S===45||tr(S)?(e.consume(S),N):C(S)}function C(S){return le(S)?(o=C,z(S)):Ce(S)?(e.consume(S),C):V(S)}function T(S){return S===45||tr(S)?(e.consume(S),T):S===47||S===62||Gt(S)?D(S):r(S)}function D(S){return S===47?(e.consume(S),V):S===58||S===95||Br(S)?(e.consume(S),R):le(S)?(o=D,z(S)):Ce(S)?(e.consume(S),D):V(S)}function R(S){return S===45||S===46||S===58||S===95||tr(S)?(e.consume(S),R):P(S)}function P(S){return S===61?(e.consume(S),L):le(S)?(o=P,z(S)):Ce(S)?(e.consume(S),P):D(S)}function L(S){return S===null||S===60||S===61||S===62||S===96?r(S):S===34||S===39?(e.consume(S),s=S,J):le(S)?(o=L,z(S)):Ce(S)?(e.consume(S),L):(e.consume(S),I)}function J(S){return S===s?(e.consume(S),s=void 0,M):S===null?r(S):le(S)?(o=J,z(S)):(e.consume(S),J)}function I(S){return S===null||S===34||S===39||S===60||S===61||S===96?r(S):S===47||S===62||Gt(S)?D(S):(e.consume(S),I)}function M(S){return S===47||S===62||Gt(S)?D(S):r(S)}function V(S){return S===62?(e.consume(S),e.exit("htmlTextData"),e.exit("htmlText"),t):r(S)}function z(S){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),A}function A(S){return Ce(S)?Ie(e,B,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):B(S)}function B(S){return e.enter("htmlTextData"),o(S)}}const zm={name:"labelEnd",resolveAll:P5,resolveTo:A5,tokenize:I5},C5={tokenize:R5},E5={tokenize:D5},T5={tokenize:L5};function P5(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const s=n.type==="labelImage"?4:2;n.type="data",t+=s}}return e.length!==r.length&&Kr(e,0,e.length,r),e}function A5(e,t){let r=e.length,n=0,s,i,o,l;for(;r--;)if(s=e[r][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[r][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[r][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=r,s.type!=="labelLink")){n=2;break}}else s.type==="labelEnd"&&(o=r);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[i+n+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=hr(l,e.slice(i+1,i+n+3)),l=hr(l,[["enter",d,t]]),l=hr(l,Fm(t.parser.constructs.insideSpan.null,e.slice(i+n+4,o-3),t)),l=hr(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=hr(l,e.slice(o+1)),l=hr(l,[["exit",c,t]]),Kr(e,i,e.length,l),e}function I5(e,t,r){const n=this;let s=n.events.length,i,o;for(;s--;)if((n.events[s][1].type==="labelImage"||n.events[s][1].type==="labelLink")&&!n.events[s][1]._balanced){i=n.events[s][1];break}return l;function l(m){return i?i._inactive?h(m):(o=n.parser.defined.includes(hi(n.sliceSerialize({start:i.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):r(m)}function c(m){return m===40?e.attempt(C5,d,o?d:h)(m):m===91?e.attempt(E5,d,o?u:h)(m):o?d(m):h(m)}function u(m){return e.attempt(T5,d,h)(m)}function d(m){return t(m)}function h(m){return i._balanced=!0,r(m)}}function R5(e,t,r){return n;function n(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return Gt(h)?_a(e,i)(h):i(h)}function i(h){return h===41?d(h):pk(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Gt(h)?_a(e,c)(h):d(h)}function l(h){return r(h)}function c(h){return h===34||h===39||h===40?xk(e,u,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return Gt(h)?_a(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):r(h)}}function D5(e,t,r){const n=this;return s;function s(l){return gk.call(n,e,i,o,"reference","referenceMarker","referenceString")(l)}function i(l){return n.parser.defined.includes(hi(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(l):r(l)}function o(l){return r(l)}}function L5(e,t,r){return n;function n(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const O5={name:"labelStartImage",resolveAll:zm.resolveAll,tokenize:M5};function M5(e,t,r){const n=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):r(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(l):t(l)}}const $5={name:"labelStartLink",resolveAll:zm.resolveAll,tokenize:F5};function F5(e,t,r){const n=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):t(o)}}const Du={name:"lineEnding",tokenize:z5};function z5(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Ie(e,t,"linePrefix")}}const vl={name:"thematicBreak",tokenize:U5};function U5(e,t,r){let n=0,s;return i;function i(u){return e.enter("thematicBreak"),o(u)}function o(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):n>=3&&(u===null||le(u))?(e.exit("thematicBreak"),t(u)):r(u)}function c(u){return u===s?(e.consume(u),n++,c):(e.exit("thematicBreakSequence"),Ce(u)?Ie(e,l,"whitespace")(u):l(u))}}const Ft={continuation:{tokenize:q5},exit:G5,name:"list",tokenize:H5},B5={partial:!0,tokenize:K5},V5={partial:!0,tokenize:W5};function H5(e,t,r){const n=this,s=n.events[n.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(f){const g=n.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!n.containerState.marker||f===n.containerState.marker:Ch(f)){if(n.containerState.type||(n.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(vl,r,u)(f):u(f);if(!n.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return r(f)}function c(f){return Ch(f)&&++o<10?(e.consume(f),c):(!n.interrupt||o<2)&&(n.containerState.marker?f===n.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):r(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||f,e.check(Ic,n.interrupt?r:d,e.attempt(B5,m,h))}function d(f){return n.containerState.initialBlankLine=!0,i++,m(f)}function h(f){return Ce(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):r(f)}function m(f){return n.containerState.size=i+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function q5(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(Ic,s,i);function s(l){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Ie(e,t,"listItemIndent",n.containerState.size+1)(l)}function i(l){return n.containerState.furtherBlankLines||!Ce(l)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(l)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(V5,t,o)(l))}function o(l){return n.containerState._closeFlow=!0,n.interrupt=void 0,Ie(e,e.attempt(Ft,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function W5(e,t,r){const n=this;return Ie(e,s,"listItemIndent",n.containerState.size+1);function s(i){const o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?t(i):r(i)}}function G5(e){e.exit(this.containerState.type)}function K5(e,t,r){const n=this;return Ie(e,s,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=n.events[n.events.length-1];return!Ce(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const Qg={name:"setextUnderline",resolveTo:J5,tokenize:X5};function J5(e,t){let r=e.length,n,s,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(s=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const o={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=o,e.push(["exit",o,t]),e}function X5(e,t,r){const n=this;let s;return i;function i(u){let d=n.events.length,h;for(;d--;)if(n.events[d][1].type!=="lineEnding"&&n.events[d][1].type!=="linePrefix"&&n.events[d][1].type!=="content"){h=n.events[d][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||h)?(e.enter("setextHeadingLine"),s=u,o(u)):r(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Ce(u)?Ie(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||le(u)?(e.exit("setextHeadingLine"),t(u)):r(u)}}const Q5={tokenize:Y5};function Y5(e){const t=this,r=e.attempt(Ic,n,e.attempt(this.parser.constructs.flowInitial,s,Ie(e,e.attempt(this.parser.constructs.flow,s,e.attempt(n5,s)),"linePrefix")));return r;function n(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const Z5={resolveAll:vk()},e3=yk("string"),t3=yk("text");function yk(e){return{resolveAll:vk(e==="text"?r3:void 0),tokenize:t};function t(r){const n=this,s=this.parser.constructs[e],i=r.attempt(s,o,l);return o;function o(d){return u(d)?i(d):l(d)}function l(d){if(d===null){r.consume(d);return}return r.enter("data"),r.consume(d),c}function c(d){return u(d)?(r.exit("data"),i(d)):(r.consume(d),c)}function u(d){if(d===null)return!0;const h=s[d];let m=-1;if(h)for(;++m<h.length;){const f=h[m];if(!f.previous||f.previous.call(n,n.previous))return!0}return!1}}}function vk(e){return t;function t(r,n){let s=-1,i;for(;++s<=r.length;)i===void 0?r[s]&&r[s][1].type==="data"&&(i=s,s++):(!r[s]||r[s][1].type!=="data")&&(s!==i+2&&(r[i][1].end=r[s-1][1].end,r.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(r,n):r}}function r3(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],s=t.sliceStream(n);let i=s.length,o=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(l=0),l){const u={type:r===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:n.start._bufferIndex+o,_index:n.start._index+i,line:n.end.line,column:n.end.column-l,offset:n.end.offset-l},end:{...n.end}};n.end={...u.start},n.start.offset===n.end.offset?Object.assign(n,u):(e.splice(r,0,["enter",u,t],["exit",u,t]),r+=2)}r++}return e}const n3={42:Ft,43:Ft,45:Ft,48:Ft,49:Ft,50:Ft,51:Ft,52:Ft,53:Ft,54:Ft,55:Ft,56:Ft,57:Ft,62:dk},s3={91:l5},i3={[-2]:Ru,[-1]:Ru,32:Ru},a3={35:m5,42:vl,45:[Qg,vl],60:y5,61:Qg,95:vl,96:Jg,126:Jg},o3={38:fk,92:hk},l3={[-5]:Du,[-4]:Du,[-3]:Du,33:O5,38:fk,42:Eh,60:[$P,N5],91:$5,92:[h5,hk],93:zm,95:Eh,96:QP},c3={null:[Eh,Z5]},u3={null:[42,95]},d3={null:[]},h3=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:u3,contentInitial:s3,disable:d3,document:n3,flow:a3,flowInitial:i3,insideSpan:c3,string:o3,text:l3},Symbol.toStringTag,{value:"Module"}));function f3(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const s={},i=[];let o=[],l=[];const c={attempt:C(E),check:C(N),consume:x,enter:p,exit:j,interrupt:C(N,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function h(P){return o=hr(o,P),b(),o[o.length-1]!==null?[]:(T(t,0),u.events=Fm(i,u.events,u),u.events)}function m(P,L){return p3(f(P),L)}function f(P){return m3(o,P)}function g(){const{_bufferIndex:P,_index:L,line:J,column:I,offset:M}=n;return{_bufferIndex:P,_index:L,line:J,column:I,offset:M}}function v(P){s[P.line]=P.column,R()}function b(){let P;for(;n._index<o.length;){const L=o[n._index];if(typeof L=="string")for(P=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===P&&n._bufferIndex<L.length;)y(L.charCodeAt(n._bufferIndex));else y(L)}}function y(P){d=d(P)}function x(P){le(P)?(n.line++,n.column=1,n.offset+=P===-3?2:1,R()):P!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),u.previous=P}function p(P,L){const J=L||{};return J.type=P,J.start=g(),u.events.push(["enter",J,u]),l.push(J),J}function j(P){const L=l.pop();return L.end=g(),u.events.push(["exit",L,u]),L}function E(P,L){T(P,L.from)}function N(P,L){L.restore()}function C(P,L){return J;function J(I,M,V){let z,A,B,S;return Array.isArray(I)?re(I):"tokenize"in I?re([I]):U(I);function U(be){return xt;function xt(Tt){const wr=Tt!==null&&be[Tt],ct=Tt!==null&&be.null,rt=[...Array.isArray(wr)?wr:wr?[wr]:[],...Array.isArray(ct)?ct:ct?[ct]:[]];return re(rt)(Tt)}}function re(be){return z=be,A=0,be.length===0?V:_(be[A])}function _(be){return xt;function xt(Tt){return S=D(),B=be,be.partial||(u.currentConstruct=be),be.name&&u.parser.constructs.disable.null.includes(be.name)?tt():be.tokenize.call(L?Object.assign(Object.create(u),L):u,c,Ne,tt)(Tt)}}function Ne(be){return P(B,S),M}function tt(be){return S.restore(),++A<z.length?_(z[A]):V}}}function T(P,L){P.resolveAll&&!i.includes(P)&&i.push(P),P.resolve&&Kr(u.events,L,u.events.length-L,P.resolve(u.events.slice(L),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function D(){const P=g(),L=u.previous,J=u.currentConstruct,I=u.events.length,M=Array.from(l);return{from:I,restore:V};function V(){n=P,u.previous=L,u.currentConstruct=J,u.events.length=I,l=M,R()}}function R(){n.line in s&&n.column<2&&(n.column=s[n.line],n.offset+=s[n.line]-1)}}function m3(e,t){const r=t.start._index,n=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let o;if(r===s)o=[e[r].slice(n,i)];else{if(o=e.slice(r,s),n>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(n):o.shift()}i>0&&o.push(e[s].slice(0,i))}return o}function p3(e,t){let r=-1;const n=[];let s;for(;++r<e.length;){const i=e[r];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,n.push(o)}return n.join("")}function g3(e){const n={constructs:jP([h3,...(e||{}).extensions||[]]),content:s(AP),defined:[],document:s(RP),flow:s(Q5),lazy:{},string:s(e3),text:s(t3)};return n;function s(i){return o;function o(l){return f3(n,i,l)}}}function x3(e){for(;!mk(e););return e}const Yg=/[\0\t\n\r]/g;function y3(){let e=1,t="",r=!0,n;return s;function s(i,o,l){const c=[];let u,d,h,m,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),h=0,t="",r&&(i.charCodeAt(0)===65279&&h++,r=void 0);h<i.length;){if(Yg.lastIndex=h,u=Yg.exec(i),m=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(m),!u){t=i.slice(h);break}if(f===10&&h===m&&n)c.push(-3),n=void 0;else switch(n&&(c.push(-5),n=void 0),h<m&&(c.push(i.slice(h,m)),e+=m-h),f){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:n=!0,e=1}h=m+1}return l&&(n&&c.push(-5),t&&c.push(t),c.push(null)),c}}const v3=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function b3(e){return e.replace(v3,w3)}function w3(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const s=r.charCodeAt(1),i=s===120||s===88;return uk(r.slice(i?2:1),i?16:10)}return $m(r)||e}const bk={}.hasOwnProperty;function k3(e,t,r){return typeof t!="string"&&(r=t,t=void 0),j3(r)(x3(g3(r).document().write(y3()(e,t,!0))))}function j3(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ae),autolinkProtocol:D,autolinkEmail:D,atxHeading:i(yt),blockQuote:i(ct),characterEscape:D,characterReference:D,codeFenced:i(rt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(rt,o),codeText:i(Q,o),codeTextData:D,data:D,codeFlowValue:D,definition:i(Xe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(Ir),hardBreakEscape:i(Mt),hardBreakTrailing:i(Mt),htmlFlow:i(O,o),htmlFlowData:D,htmlText:i(O,o),htmlTextData:D,image:i(Y),label:o,link:i(ae),listItem:i(vt),listItemValue:m,listOrdered:i(Ge,h),listUnordered:i(Ge),paragraph:i(Fi),reference:_,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(yt),strong:i(Jt),thematicBreak:i(zi)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:wr,autolinkProtocol:Tt,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:tt,characterReferenceMarkerNumeric:tt,characterReferenceValue:be,characterReference:xt,codeFenced:c(b),codeFencedFence:v,codeFencedFenceInfo:f,codeFencedFenceMeta:g,codeFlowValue:R,codeIndented:c(y),codeText:c(M),codeTextData:R,data:R,definition:c(),definitionDestinationString:j,definitionLabelString:x,definitionTitleString:p,emphasis:c(),hardBreakEscape:c(L),hardBreakTrailing:c(L),htmlFlow:c(J),htmlFlowData:R,htmlText:c(I),htmlTextData:R,image:c(z),label:B,labelText:A,lineEnding:P,link:c(V),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Ne,resourceDestinationString:S,resourceTitleString:U,resource:re,setextHeading:c(T),setextHeadingLineSequence:C,setextHeadingText:N,strong:c(),thematicBreak:c()}};wk(t,(e||{}).mdastExtensions||[]);const r={};return n;function n($){let K={type:"root",children:[]};const k={stack:[K],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:r},H=[];let ne=-1;for(;++ne<$.length;)if($[ne][1].type==="listOrdered"||$[ne][1].type==="listUnordered")if($[ne][0]==="enter")H.push(ne);else{const pe=H.pop();ne=s($,pe,ne)}for(ne=-1;++ne<$.length;){const pe=t[$[ne][0]];bk.call(pe,$[ne][1].type)&&pe[$[ne][1].type].call(Object.assign({sliceSerialize:$[ne][2].sliceSerialize},k),$[ne][1])}if(k.tokenStack.length>0){const pe=k.tokenStack[k.tokenStack.length-1];(pe[1]||Zg).call(k,void 0,pe[0])}for(K.position={start:yn($.length>0?$[0][1].start:{line:1,column:1,offset:0}),end:yn($.length>0?$[$.length-2][1].end:{line:1,column:1,offset:0})},ne=-1;++ne<t.transforms.length;)K=t.transforms[ne](K)||K;return K}function s($,K,k){let H=K-1,ne=-1,pe=!1,he,_e,Ve,we;for(;++H<=k;){const ce=$[H];switch(ce[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ce[0]==="enter"?ne++:ne--,we=void 0;break}case"lineEndingBlank":{ce[0]==="enter"&&(he&&!we&&!ne&&!Ve&&(Ve=H),we=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:we=void 0}if(!ne&&ce[0]==="enter"&&ce[1].type==="listItemPrefix"||ne===-1&&ce[0]==="exit"&&(ce[1].type==="listUnordered"||ce[1].type==="listOrdered")){if(he){let F=H;for(_e=void 0;F--;){const W=$[F];if(W[1].type==="lineEnding"||W[1].type==="lineEndingBlank"){if(W[0]==="exit")continue;_e&&($[_e][1].type="lineEndingBlank",pe=!0),W[1].type="lineEnding",_e=F}else if(!(W[1].type==="linePrefix"||W[1].type==="blockQuotePrefix"||W[1].type==="blockQuotePrefixWhitespace"||W[1].type==="blockQuoteMarker"||W[1].type==="listItemIndent"))break}Ve&&(!_e||Ve<_e)&&(he._spread=!0),he.end=Object.assign({},_e?$[_e][1].start:ce[1].end),$.splice(_e||H,0,["exit",he,ce[2]]),H++,k++}if(ce[1].type==="listItemPrefix"){const F={type:"listItem",_spread:!1,start:Object.assign({},ce[1].start),end:void 0};he=F,$.splice(H,0,["enter",F,ce[2]]),H++,k++,Ve=void 0,we=!0}}}return $[K][1]._spread=pe,k}function i($,K){return k;function k(H){l.call(this,$(H),H),K&&K.call(this,H)}}function o(){this.stack.push({type:"fragment",children:[]})}function l($,K,k){this.stack[this.stack.length-1].children.push($),this.stack.push($),this.tokenStack.push([K,k||void 0]),$.position={start:yn(K.start),end:void 0}}function c($){return K;function K(k){$&&$.call(this,k),u.call(this,k)}}function u($,K){const k=this.stack.pop(),H=this.tokenStack.pop();if(H)H[0].type!==$.type&&(K?K.call(this,$,H[0]):(H[1]||Zg).call(this,$,H[0]));else throw new Error("Cannot close `"+$.type+"` ("+Na({start:$.start,end:$.end})+"): its not open");k.position.end=yn($.end)}function d(){return wP(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m($){if(this.data.expectingFirstListItemValue){const K=this.stack[this.stack.length-2];K.start=Number.parseInt(this.sliceSerialize($),10),this.data.expectingFirstListItemValue=void 0}}function f(){const $=this.resume(),K=this.stack[this.stack.length-1];K.lang=$}function g(){const $=this.resume(),K=this.stack[this.stack.length-1];K.meta=$}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$.replace(/(\r?\n|\r)$/g,"")}function x($){const K=this.resume(),k=this.stack[this.stack.length-1];k.label=K,k.identifier=hi(this.sliceSerialize($)).toLowerCase()}function p(){const $=this.resume(),K=this.stack[this.stack.length-1];K.title=$}function j(){const $=this.resume(),K=this.stack[this.stack.length-1];K.url=$}function E($){const K=this.stack[this.stack.length-1];if(!K.depth){const k=this.sliceSerialize($).length;K.depth=k}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function C($){const K=this.stack[this.stack.length-1];K.depth=this.sliceSerialize($).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function D($){const k=this.stack[this.stack.length-1].children;let H=k[k.length-1];(!H||H.type!=="text")&&(H=ut(),H.position={start:yn($.start),end:void 0},k.push(H)),this.stack.push(H)}function R($){const K=this.stack.pop();K.value+=this.sliceSerialize($),K.position.end=yn($.end)}function P($){const K=this.stack[this.stack.length-1];if(this.data.atHardBreak){const k=K.children[K.children.length-1];k.position.end=yn($.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(K.type)&&(D.call(this,$),R.call(this,$))}function L(){this.data.atHardBreak=!0}function J(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$}function I(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$}function M(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$}function V(){const $=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";$.type+="Reference",$.referenceType=K,delete $.url,delete $.title}else delete $.identifier,delete $.label;this.data.referenceType=void 0}function z(){const $=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";$.type+="Reference",$.referenceType=K,delete $.url,delete $.title}else delete $.identifier,delete $.label;this.data.referenceType=void 0}function A($){const K=this.sliceSerialize($),k=this.stack[this.stack.length-2];k.label=b3(K),k.identifier=hi(K).toLowerCase()}function B(){const $=this.stack[this.stack.length-1],K=this.resume(),k=this.stack[this.stack.length-1];if(this.data.inReference=!0,k.type==="link"){const H=$.children;k.children=H}else k.alt=K}function S(){const $=this.resume(),K=this.stack[this.stack.length-1];K.url=$}function U(){const $=this.resume(),K=this.stack[this.stack.length-1];K.title=$}function re(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function Ne($){const K=this.resume(),k=this.stack[this.stack.length-1];k.label=K,k.identifier=hi(this.sliceSerialize($)).toLowerCase(),this.data.referenceType="full"}function tt($){this.data.characterReferenceType=$.type}function be($){const K=this.sliceSerialize($),k=this.data.characterReferenceType;let H;k?(H=uk(K,k==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):H=$m(K);const ne=this.stack[this.stack.length-1];ne.value+=H}function xt($){const K=this.stack.pop();K.position.end=yn($.end)}function Tt($){R.call(this,$);const K=this.stack[this.stack.length-1];K.url=this.sliceSerialize($)}function wr($){R.call(this,$);const K=this.stack[this.stack.length-1];K.url="mailto:"+this.sliceSerialize($)}function ct(){return{type:"blockquote",children:[]}}function rt(){return{type:"code",lang:null,meta:null,value:""}}function Q(){return{type:"inlineCode",value:""}}function Xe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ir(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function Mt(){return{type:"break"}}function O(){return{type:"html",value:""}}function Y(){return{type:"image",title:null,url:"",alt:null}}function ae(){return{type:"link",title:null,url:"",children:[]}}function Ge($){return{type:"list",ordered:$.type==="listOrdered",start:null,spread:$._spread,children:[]}}function vt($){return{type:"listItem",spread:$._spread,checked:null,children:[]}}function Fi(){return{type:"paragraph",children:[]}}function Jt(){return{type:"strong",children:[]}}function ut(){return{type:"text",value:""}}function zi(){return{type:"thematicBreak"}}}function yn(e){return{line:e.line,column:e.column,offset:e.offset}}function wk(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?wk(e,n):S3(e,n)}}function S3(e,t){let r;for(r in t)if(bk.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function Zg(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Na({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Na({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Na({start:t.start,end:t.end})+") is still open")}function N3(e){const t=this;t.parser=r;function r(n){return k3(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function _3(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function C3(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function E3(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function T3(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function P3(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function A3(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),s=Oi(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let o,l=e.footnoteCounts.get(n);l===void 0?(l=0,e.footnoteOrder.push(n),o=e.footnoteOrder.length):o=i+1,l+=1,e.footnoteCounts.set(n,l);const c={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+s,id:r+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function I3(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function R3(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function kk(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=n:s.push({type:"text",value:n}),s}function D3(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return kk(e,t);const s={src:Oi(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function L3(e,t){const r={src:Oi(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function O3(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function M3(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return kk(e,t);const s={href:Oi(n.url||"")};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function $3(e,t){const r={href:Oi(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function F3(e,t,r){const n=e.all(t),s=r?z3(r):jk(t),i={},o=[];if(typeof t.checked=="boolean"){const d=n[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},n.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<n.length;){const d=n[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?o.push(...d.children):o.push(d)}const c=n[n.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,u),e.applyData(t,u)}function z3(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=jk(r[n])}return t}function jk(e){const t=e.spread;return t??e.children.length>1}function U3(e,t){const r={},n=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++s<n.length;){const o=n[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,i),e.applyData(t,i)}function B3(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function V3(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function H3(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function q3(e,t){const r=e.all(t),n=r.shift(),s=[];if(n){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],o),s.push(o)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},l=Dm(t.children[1]),c=nk(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function W3(e,t,r){const n=r?r.children:void 0,i=(n?n.indexOf(t):1)===0?"th":"td",o=r&&r.type==="table"?r.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],m={},f=o?o[c]:void 0;f&&(m.align=f);let g={type:"element",tagName:i,properties:m,children:[]};h&&(g.children=e.all(h),e.patch(h,g),g=e.applyData(h,g)),u.push(g)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function G3(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const ex=9,tx=32;function K3(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),s=0;const i=[];for(;n;)i.push(rx(t.slice(s,n.index),s>0,!0),n[0]),s=n.index+n[0].length,n=r.exec(t);return i.push(rx(t.slice(s),s>0,!1)),i.join("")}function rx(e,t,r){let n=0,s=e.length;if(t){let i=e.codePointAt(n);for(;i===ex||i===tx;)n++,i=e.codePointAt(n)}if(r){let i=e.codePointAt(s-1);for(;i===ex||i===tx;)s--,i=e.codePointAt(s-1)}return s>n?e.slice(n,s):""}function J3(e,t){const r={type:"text",value:K3(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function X3(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const Q3={blockquote:_3,break:C3,code:E3,delete:T3,emphasis:P3,footnoteReference:A3,heading:I3,html:R3,imageReference:D3,image:L3,inlineCode:O3,linkReference:M3,link:$3,listItem:F3,list:U3,paragraph:B3,root:V3,strong:H3,table:q3,tableCell:G3,tableRow:W3,text:J3,thematicBreak:X3,toml:Go,yaml:Go,definition:Go,footnoteDefinition:Go};function Go(){}const Sk=-1,Rc=0,Ca=1,nc=2,Um=3,Bm=4,Vm=5,Hm=6,Nk=7,_k=8,nx=typeof self=="object"?self:globalThis,Y3=(e,t)=>{const r=(s,i)=>(e.set(i,s),s),n=s=>{if(e.has(s))return e.get(s);const[i,o]=t[s];switch(i){case Rc:case Sk:return r(o,s);case Ca:{const l=r([],s);for(const c of o)l.push(n(c));return l}case nc:{const l=r({},s);for(const[c,u]of o)l[n(c)]=n(u);return l}case Um:return r(new Date(o),s);case Bm:{const{source:l,flags:c}=o;return r(new RegExp(l,c),s)}case Vm:{const l=r(new Map,s);for(const[c,u]of o)l.set(n(c),n(u));return l}case Hm:{const l=r(new Set,s);for(const c of o)l.add(n(c));return l}case Nk:{const{name:l,message:c}=o;return r(new nx[l](c),s)}case _k:return r(BigInt(o),s);case"BigInt":return r(Object(BigInt(o)),s);case"ArrayBuffer":return r(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return r(new DataView(l),o)}}return r(new nx[i](o),s)};return n},sx=e=>Y3(new Map,e)(0),Rs="",{toString:Z3}={},{keys:eA}=Object,ea=e=>{const t=typeof e;if(t!=="object"||!e)return[Rc,t];const r=Z3.call(e).slice(8,-1);switch(r){case"Array":return[Ca,Rs];case"Object":return[nc,Rs];case"Date":return[Um,Rs];case"RegExp":return[Bm,Rs];case"Map":return[Vm,Rs];case"Set":return[Hm,Rs];case"DataView":return[Ca,r]}return r.includes("Array")?[Ca,r]:r.includes("Error")?[Nk,r]:[nc,r]},Ko=([e,t])=>e===Rc&&(t==="function"||t==="symbol"),tA=(e,t,r,n)=>{const s=(o,l)=>{const c=n.push(o)-1;return r.set(l,c),c},i=o=>{if(r.has(o))return r.get(o);let[l,c]=ea(o);switch(l){case Rc:{let d=o;switch(c){case"bigint":l=_k,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([Sk],o)}return s([l,d],o)}case Ca:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),s([c,[...m]],o)}const d=[],h=s([l,d],o);for(const m of o)d.push(i(m));return h}case nc:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return i(o.toJSON());const d=[],h=s([l,d],o);for(const m of eA(o))(e||!Ko(ea(o[m])))&&d.push([i(m),i(o[m])]);return h}case Um:return s([l,o.toISOString()],o);case Bm:{const{source:d,flags:h}=o;return s([l,{source:d,flags:h}],o)}case Vm:{const d=[],h=s([l,d],o);for(const[m,f]of o)(e||!(Ko(ea(m))||Ko(ea(f))))&&d.push([i(m),i(f)]);return h}case Hm:{const d=[],h=s([l,d],o);for(const m of o)(e||!Ko(ea(m)))&&d.push(i(m));return h}}const{message:u}=o;return s([l,{name:c,message:u}],o)};return i},ix=(e,{json:t,lossy:r}={})=>{const n=[];return tA(!(t||r),!!t,new Map,n)(e),n},sc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?sx(ix(e,t)):structuredClone(e):(e,t)=>sx(ix(e,t));function rA(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function nA(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function sA(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||rA,n=e.options.footnoteBackLabel||nA,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),m=Oi(h.toLowerCase());let f=0;const g=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++f<=v;){g.length>0&&g.push({type:"text",value:" "});let x=typeof r=="string"?r:r(c,f);typeof x=="string"&&(x={type:"text",value:x}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(c,f),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const b=d[d.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const x=b.children[b.children.length-1];x&&x.type==="text"?x.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...g)}else d.push(...g);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(d,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...sc(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Ck=(function(e){if(e==null)return lA;if(typeof e=="function")return Dc(e);if(typeof e=="object")return Array.isArray(e)?iA(e):aA(e);if(typeof e=="string")return oA(e);throw new Error("Expected function, string, or object as test")});function iA(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=Ck(e[r]);return Dc(n);function n(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function aA(e){const t=e;return Dc(r);function r(n){const s=n;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function oA(e){return Dc(t);function t(r){return r&&r.type===e}}function Dc(e){return t;function t(r,n,s){return!!(cA(r)&&e.call(this,r,typeof n=="number"?n:void 0,s||void 0))}}function lA(){return!0}function cA(e){return e!==null&&typeof e=="object"&&"type"in e}const Ek=[],uA=!0,ax=!1,dA="skip";function hA(e,t,r,n){let s;typeof t=="function"&&typeof r!="function"?(n=r,r=t):s=t;const i=Ck(s),o=n?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=Ek,g,v,b;if((!t||i(c,u,d[d.length-1]||void 0))&&(f=fA(r(c,d)),f[0]===ax))return f;if("children"in c&&c.children){const y=c;if(y.children&&f[0]!==dA)for(v=(n?y.children.length:-1)+o,b=d.concat(y);v>-1&&v<y.children.length;){const x=y.children[v];if(g=l(x,v,b)(),g[0]===ax)return g;v=typeof g[1]=="number"?g[1]:v+o}}return f}}}function fA(e){return Array.isArray(e)?e:typeof e=="number"?[uA,e]:e==null?Ek:[e]}function Tk(e,t,r,n){let s,i,o;typeof t=="function"&&typeof r!="function"?(i=void 0,o=t,s=r):(i=t,o=r,s=n),hA(e,i,l,s);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return o(c,h,d)}}const Th={}.hasOwnProperty,mA={};function pA(e,t){const r=t||mA,n=new Map,s=new Map,i=new Map,o={...Q3,...r.handlers},l={all:u,applyData:xA,definitionById:n,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:c,options:r,patch:gA,wrap:vA};return Tk(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?n:s,m=String(d.identifier).toUpperCase();h.has(m)||h.set(m,d)}}),l;function c(d,h){const m=d.type,f=l.handlers[m];if(Th.call(l.handlers,m)&&f)return f(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in d){const{children:v,...b}=d,y=sc(b);return y.children=l.all(d),y}return sc(d)}return(l.options.unknownHandler||yA)(l,d,h)}function u(d){const h=[];if("children"in d){const m=d.children;let f=-1;for(;++f<m.length;){const g=l.one(m[f],d);if(g){if(f&&m[f-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=ox(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=ox(v.value))}Array.isArray(g)?h.push(...g):h.push(g)}}}return h}}function gA(e,t){e.position&&(t.position=ZT(e))}function xA(e,t){let r=t;if(e&&e.data){const n=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const o="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:o}}r.type==="element"&&i&&Object.assign(r.properties,sc(i)),"children"in r&&r.children&&s!==null&&s!==void 0&&(r.children=s)}return r}function yA(e,t){const r=t.data||{},n="value"in t&&!(Th.call(r,"hProperties")||Th.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vA(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function ox(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function lx(e,t){const r=pA(e,t),n=r.one(e,void 0),s=sA(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function bA(e,t){return e&&"run"in e?async function(r,n){const s=lx(r,{file:n,...t});await e.run(s,n)}:function(r,n){return lx(r,{file:n,...e||t})}}function cx(e){if(e)throw e}var bl=Object.prototype.hasOwnProperty,Pk=Object.prototype.toString,ux=Object.defineProperty,dx=Object.getOwnPropertyDescriptor,hx=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Pk.call(t)==="[object Array]"},fx=function(t){if(!t||Pk.call(t)!=="[object Object]")return!1;var r=bl.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&bl.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var s;for(s in t);return typeof s>"u"||bl.call(t,s)},mx=function(t,r){ux&&r.name==="__proto__"?ux(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},px=function(t,r){if(r==="__proto__")if(bl.call(t,r)){if(dx)return dx(t,r).value}else return;return t[r]},wA=function e(){var t,r,n,s,i,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(r in t)n=px(l,r),s=px(t,r),l!==s&&(d&&s&&(fx(s)||(i=hx(s)))?(i?(i=!1,o=n&&hx(n)?n:[]):o=n&&fx(n)?n:{},mx(l,{name:r,newValue:e(d,o,s)})):typeof s<"u"&&mx(l,{name:r,newValue:s}));return l};const Lu=Hh(wA);function Ph(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function kA(){const e=[],t={run:r,use:n};return t;function r(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...u){const d=e[++i];let h=-1;if(c){o(c);return}for(;++h<s.length;)(u[h]===null||u[h]===void 0)&&(u[h]=s[h]);s=u,d?jA(d,l)(...u):o(null,...u)}}function n(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function jA(e,t){let r;return n;function n(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&r)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(o,...l){r||(r=!0,t(o,...l))}function i(o){s(null,o)}}const $r={basename:SA,dirname:NA,extname:_A,join:CA,sep:"/"};function SA(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');yo(e);let r=0,n=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){r=s+1;break}}else n<0&&(i=!0,n=s+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){r=s+1;break}}else o<0&&(i=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(n=s):(l=-1,n=o));return r===n?n=o:n<0&&(n=e.length),e.slice(r,n)}function NA(e){if(yo(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function _A(e){yo(e);let t=e.length,r=-1,n=0,s=-1,i=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){n=t+1;break}continue}r<0&&(o=!0,r=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||r<0||i===0||i===1&&s===r-1&&s===n+1?"":e.slice(s,r)}function CA(...e){let t=-1,r;for(;++t<e.length;)yo(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":EA(r)}function EA(e){yo(e);const t=e.codePointAt(0)===47;let r=TA(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function TA(e,t){let r="",n=0,s=-1,i=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(c=r.lastIndexOf("/"),c!==r.length-1){c<0?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),s=o,i=0;continue}}else if(r.length>0){r="",n=0,s=o,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(s+1,o):r=e.slice(s+1,o),n=o-s-1;s=o,i=0}else l===46&&i>-1?i++:i=-1}return r}function yo(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const PA={cwd:AA};function AA(){return"/"}function Ah(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function IA(e){if(typeof e=="string")e=new URL(e);else if(!Ah(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return RA(e)}function RA(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Ou=["history","path","basename","stem","extname","dirname"];class Ak{constructor(t){let r;t?Ah(t)?r={path:t}:typeof t=="string"||DA(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":PA.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<Ou.length;){const i=Ou[n];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let s;for(s in r)Ou.includes(s)||(this[s]=r[s])}get basename(){return typeof this.path=="string"?$r.basename(this.path):void 0}set basename(t){$u(t,"basename"),Mu(t,"basename"),this.path=$r.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?$r.dirname(this.path):void 0}set dirname(t){gx(this.basename,"dirname"),this.path=$r.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?$r.extname(this.path):void 0}set extname(t){if(Mu(t,"extname"),gx(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=$r.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Ah(t)&&(t=IA(t)),$u(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?$r.basename(this.path,this.extname):void 0}set stem(t){$u(t,"stem"),Mu(t,"stem"),this.path=$r.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const s=this.message(t,r,n);throw s.fatal=!0,s}info(t,r,n){const s=this.message(t,r,n);return s.fatal=void 0,s}message(t,r,n){const s=new Et(t,r,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Mu(e,t){if(e&&e.includes($r.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+$r.sep+"`")}function $u(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function gx(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function DA(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const LA=(function(e){const n=this.constructor.prototype,s=n[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,n),i}),OA={}.hasOwnProperty;class qm extends LA{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=kA()}copy(){const t=new qm;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(Lu(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(Uu("data",this.frozen),this.namespace[t]=r,this):OA.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Uu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const s=r.call(t,...n);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=Jo(t),n=this.parser||this.Parser;return Fu("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),Fu("process",this.parser||this.Parser),zu("process",this.compiler||this.Compiler),r?s(void 0,r):new Promise(s);function s(i,o){const l=Jo(t),c=n.parse(l);n.run(c,l,function(d,h,m){if(d||!h||!m)return u(d);const f=h,g=n.stringify(f,m);FA(g)?m.value=g:m.result=g,u(d,m)});function u(d,h){d||!h?o(d):i?i(h):r(void 0,h)}}}processSync(t){let r=!1,n;return this.freeze(),Fu("processSync",this.parser||this.Parser),zu("processSync",this.compiler||this.Compiler),this.process(t,s),yx("processSync","process",r),n;function s(i,o){r=!0,cx(i),n=o}}run(t,r,n){xx(t),this.freeze();const s=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?i(void 0,n):new Promise(i);function i(o,l){const c=Jo(r);s.run(t,c,u);function u(d,h,m){const f=h||t;d?l(d):o?o(f):n(void 0,f,m)}}}runSync(t,r){let n=!1,s;return this.run(t,r,i),yx("runSync","run",n),s;function i(o,l){cx(o),s=l,n=!0}}stringify(t,r){this.freeze();const n=Jo(r),s=this.compiler||this.Compiler;return zu("stringify",s),xx(t),s(t,n)}use(t,...r){const n=this.attachers,s=this.namespace;if(Uu("use",this.frozen),t!=null)if(typeof t=="function")c(t,r);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Lu(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];i(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,m=-1;for(;++h<n.length;)if(n[h][0]===u){m=h;break}if(m===-1)n.push([u,...d]);else if(d.length>0){let[f,...g]=d;const v=n[m][1];Ph(v)&&Ph(f)&&(f=Lu(!0,v,f)),n[m]=[u,f,...g]}}}}const MA=new qm().freeze();function Fu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function zu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Uu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function xx(e){if(!Ph(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function yx(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Jo(e){return $A(e)?e:new Ak(e)}function $A(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function FA(e){return typeof e=="string"||zA(e)}function zA(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const UA="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",vx=[],bx={allowDangerousHtml:!0},BA=/^(https?|ircs?|mailto|xmpp)$/i,VA=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Ih(e){const t=HA(e),r=qA(e);return WA(t.runSync(t.parse(r),r),e)}function HA(e){const t=e.rehypePlugins||vx,r=e.remarkPlugins||vx,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...bx}:bx;return MA().use(N3).use(r).use(bA,n).use(t)}function qA(e){const t=e.children||"",r=new Ak;return typeof t=="string"&&(r.value=t),r}function WA(e,t){const r=t.allowedElements,n=t.allowElement,s=t.components,i=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||GA;for(const d of VA)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+UA+d.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Tk(e,u),sP(e,{Fragment:a.Fragment,components:s,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function u(d,h,m){if(d.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let f;for(f in Iu)if(Object.hasOwn(Iu,f)&&Object.hasOwn(d.properties,f)){const g=d.properties[f],v=Iu[f];(v===null||v.includes(d.tagName))&&(d.properties[f]=c(String(g||""),f,d))}}if(d.type==="element"){let f=r?!r.includes(d.tagName):i?i.includes(d.tagName):!1;if(!f&&n&&typeof h=="number"&&(f=!n(d,h,m)),f&&m&&typeof h=="number")return l&&d.children?m.children.splice(h,1,...d.children):m.children.splice(h,1),h}}}function GA(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||r!==-1&&t>r||n!==-1&&t>n||BA.test(e.slice(0,t))?e:""}function Bu({strategicDirectives:e,onUpdateChecklist:t,onSetActiveSD:r,currentSD:n,isCompact:s,detailMode:i,onRefresh:o,onUpdateStatus:l}){const{id:c}=Bf(),u=Ai(),[d,h]=w.useState(null),[m,f]=w.useState("list"),[g,v]=w.useState(null),[b,y]=w.useState(()=>localStorage.getItem("sd-filter-migration-v2")?localStorage.getItem("sd-status-filter")||"active,draft":(localStorage.setItem("sd-filter-migration-v2","true"),localStorage.setItem("sd-status-filter","active,draft"),localStorage.setItem("sd-priority-filter","critical,high"),localStorage.setItem("sd-application-filter","EHG"),"active,draft")),[x,p]=w.useState(""),[j,E]=w.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-priority-filter")||"critical,high"),[N,C]=w.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-application-filter")||"EHG"),[T,D]=w.useState(null),[R,P]=w.useState(!1),[L,J]=w.useState(!1),[I,M]=w.useState(()=>{const k=localStorage.getItem("sd-sort-levels");return k?JSON.parse(k):[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}]}),[V,z]=w.useState(()=>{const k=localStorage.getItem("sd-saved-sorts");return k?JSON.parse(k):{"Strategic Priority":[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],Default:[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],"WSJF Priority":[{field:"wsjf_score",direction:"desc",label:"WSJF Score"},{field:"status",direction:"asc",label:"Status"},{field:"created_at",direction:"desc",label:"Created Date"}],"Progress Tracking":[{field:"progress",direction:"asc",label:"Progress"},{field:"priority",direction:"desc",label:"Priority"},{field:"title",direction:"asc",label:"Title"}],"Recent Activity":[{field:"updated_at",direction:"desc",label:"Last Updated"},{field:"status",direction:"asc",label:"Status"}]}}),[A,B]=w.useState(""),[S,U]=w.useState(!1),[re,_]=w.useState("all"),[Ne,tt]=w.useState(null),[be,xt]=w.useState(null);w.useEffect(()=>{localStorage.setItem("sd-status-filter",b)},[b]),w.useEffect(()=>{localStorage.setItem("sd-priority-filter",j)},[j]),w.useEffect(()=>{localStorage.setItem("sd-application-filter",N)},[N]),w.useEffect(()=>{localStorage.setItem("sd-sort-levels",JSON.stringify(I))},[I]),w.useEffect(()=>{localStorage.setItem("sd-saved-sorts",JSON.stringify(V))},[V]),w.useEffect(()=>{if(i&&c){console.log("Detail mode - Looking for SD with id:",c),console.log("Available SDs count:",e.length),e.length>0&&console.log("First few SDs:",e.slice(0,3).map(H=>({id:H.id,title:H.title})));const k=e.find(H=>H.id===c);k?(console.log("Found SD:",k.id,k.title),v(k),f("detail"),document.title=`${k.title||k.id} - LEO Protocol Dashboard`):e.length>0?(console.warn(`SD with id '${c}' not found in ${e.length} directives, redirecting to list`),u("/strategic-directives",{replace:!0})):console.log("Waiting for strategic directives to load...")}else i||(f("list"),v(null),document.title="Strategic Directives - LEO Protocol Dashboard")},[c,i,e,u]);const Tt=k=>{h(d===k?null:k)},wr=k=>{navigator.clipboard.writeText(k),D(k),setTimeout(()=>D(null),2e3)},ct=()=>{p(""),E("all"),y("all"),C("all"),_("all")},rt=()=>{P(!1)},Q=x||j!=="all"||b!=="all"||N!=="all"||re!=="all",Xe=k=>{switch(k==null?void 0:k.toLowerCase()){case"critical":return"border-l-4 border-l-red-500";case"high":return"border-l-4 border-l-orange-500";case"medium":return"border-l-4 border-l-yellow-500";case"low":return"border-l-4 border-l-gray-400";default:return"border-l-4 border-l-gray-300"}},Ir=k=>k===100?"bg-gradient-to-r from-green-400 to-green-600 animate-pulse":k>=76?"bg-gradient-to-r from-blue-400 to-blue-600":k>=51?"bg-gradient-to-r from-yellow-400 to-yellow-600":k>=26?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gradient-to-r from-red-400 to-red-600",yt=(k,H)=>{const ne=e.find(pe=>pe.id===k);ne&&ne.checklist&&ne.checklist[H]&&t(k,H,!ne.checklist[H].checked)},Mt=k=>{if(!k||!k.id){console.error("Invalid SD for navigation:",k);return}try{u(`/strategic-directives/${k.id}`)}catch(H){console.error("Navigation error:",H)}},[O,Y]=w.useState({}),[ae,Ge]=w.useState(new Set),[vt,Fi]=w.useState(new Set),Jt=async(k,H=!1)=>{if(!(!H&&O[k]&&O[k].summary)&&!ae.has(k)){Ge(ne=>new Set(ne).add(k));try{const ne=`/api/strategic-directives/${k}/backlog-summary${H?"?force_refresh=true":""}`,pe=await fetch(ne),he=await pe.json();pe.ok?Y(_e=>({..._e,[k]:{...he,timestamp:Date.now()}})):(console.warn(`Failed to fetch backlog summary for ${k}:`,he.error),Y(_e=>({..._e,[k]:{summary:he.fallback||"Backlog summary unavailable.",itemCount:0,cached:!1}})))}catch(ne){console.error("Error fetching backlog summary:",ne),Y(pe=>({...pe,[k]:{summary:"Unable to load backlog summary.",itemCount:0,cached:!1}}))}finally{Ge(ne=>{const pe=new Set(ne);return pe.delete(k),pe})}}};if(m==="detail"&&g)return a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>u("/strategic-directives"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[a.jsx(It,{className:"w-4 h-4 mr-1"}),"Back to List"]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:[g.id,": ",g.title||"Untitled"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:g.metadata&&Object.entries(g.metadata).map(([k,H])=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:k}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:typeof H=="object"?JSON.stringify(H,null,2):String(H)})]},k))}),a.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:a.jsx(Ih,{children:g.content||"No content available"})}),g.checklist&&g.checklist.length>0&&a.jsxs("div",{className:"border-t pt-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Requirements Checklist"}),a.jsx("div",{className:"space-y-2",children:g.checklist.map((k,H)=>a.jsxs("label",{className:"flex items-start p-3 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:k.checked,onChange:()=>yt(g.id,H),className:"mt-1 mr-3 w-5 h-5 text-primary-600 rounded focus:ring-primary-500"}),a.jsx("span",{className:`flex-1 ${k.checked?"line-through text-gray-500":""}`,children:k.text})]},H))})]}),g.prds&&g.prds.length>0&&a.jsxs("div",{className:"border-t pt-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(We,{className:"w-5 h-5 mr-2 text-blue-600"}),"Product Requirements Documents (",g.prds.length,")"]}),a.jsx("div",{className:"space-y-4",children:g.prds.map(k=>a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:k.title}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["ID: ",k.id]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k.status==="approved"?"bg-green-100 text-green-800":k.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:k.status}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k.priority==="high"?"bg-red-100 text-red-800":k.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:k.priority})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("strong",{children:"Phase:"})," ",k.phase]}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("strong",{children:"Progress:"})," ",k.progress,"%"]})]}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("strong",{children:"Created:"})," ",new Date(k.createdAt).toLocaleDateString()]})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:a.jsxs("button",{onClick:()=>u(`/prds/${k.id}`),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center",children:["View Full PRD ",a.jsx(It,{className:"w-4 h-4 ml-1"})]})})]},k.id))})]}),g.executionSequences&&g.executionSequences.length>0&&a.jsxs("div",{className:"border-t pt-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(an,{className:"w-5 h-5 mr-2 text-green-600"}),"Execution Sequence Steps (",g.executionSequences.length,")"]}),a.jsx("div",{className:"space-y-3",children:g.executionSequences.map(k=>a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${k.status==="completed"?"bg-green-500 text-white":k.status==="in_progress"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:k.sequenceNumber}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:k.description}),a.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-green-700 dark:text-green-300",children:[a.jsxs("span",{children:[a.jsx("strong",{children:"Executor:"})," ",k.executorRole]}),k.completedAt&&a.jsxs("span",{children:[a.jsx("strong",{children:"Completed:"})," ",new Date(k.completedAt).toLocaleDateString()]})]})]})]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k.status==="completed"?"bg-green-100 text-green-800":k.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:k.status})]})},k.id))})]})]})]});if(m==="detail"&&!g)return a.jsx("div",{className:"p-6 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading strategic directive..."})]})});const ut=e.filter(k=>{var Ve,we,ce,F,W;let H=!0;if(b!=="all"){const te=(Ve=k.status)==null?void 0:Ve.toLowerCase();H=(b.includes(",")?b.split(","):[b]).some(Z=>Z==="active"?te==="active":Z==="draft"?te==="draft":Z==="deferred"?te==="deferred":Z==="on_hold"?te==="on_hold":Z==="cancelled"?te==="cancelled":Z==="archived"?te==="archived"||te==="completed"||te==="complete":!1)}let ne=!0;if(x){const te=x.toLowerCase();ne=((we=k.id)==null?void 0:we.toLowerCase().includes(te))||((ce=k.title)==null?void 0:ce.toLowerCase().includes(te))||((F=k.description)==null?void 0:F.toLowerCase().includes(te))}let pe=!0;j!=="all"&&(pe=(j.includes(",")?j.split(","):[j]).some(xe=>{var Z;return((Z=k.priority)==null?void 0:Z.toLowerCase())===xe.toLowerCase()}));let he=!0;N!=="all"&&(he=k.targetApplication===N);let _e=!0;return re!=="all"&&(_e=((W=k.category)==null?void 0:W.toLowerCase())===re.toLowerCase()),H&&ne&&pe&&he&&_e}),$=((k,H)=>[...k].sort((ne,pe)=>{var he,_e;if(ne.is_working_on&&ne.progress>=100)return 1;if(pe.is_working_on&&pe.progress>=100)return-1;for(const Ve of H){let we=ne[Ve.field],ce=pe[Ve.field];if(Ve.field==="priority"){const W={critical:1,high:2,medium:3,low:4,minimal:5};we=W[we==null?void 0:we.toLowerCase()]||999,ce=W[ce==null?void 0:ce.toLowerCase()]||999}else if(Ve.field==="status"){const W={active:1,draft:2,in_progress:3,pending_approval:4,completed:5};we=W[we==null?void 0:we.toLowerCase()]||999,ce=W[ce==null?void 0:ce.toLowerCase()]||999}else if(Ve.field==="wsjf_score"){if(we==null){const W=(he=ne.priority)==null?void 0:he.toLowerCase();we=W==="critical"?100:W==="high"?75:W==="medium"?50:25}if(ce==null){const W=(_e=pe.priority)==null?void 0:_e.toLowerCase();ce=W==="critical"?100:W==="high"?75:W==="medium"?50:25}}else if(Ve.field==="id"){const W=we==null?void 0:we.match(/SD-(\d+)/),te=ce==null?void 0:ce.match(/SD-(\d+)/);we=W?parseInt(W[1],10):999999,ce=te?parseInt(te[1],10):999999}else Ve.field==="sequenceRank"&&(we=typeof we=="number"?we:parseInt(we,10)||999999,ce=typeof ce=="number"?ce:parseInt(ce,10)||999999);we==null&&(we=Ve.direction==="asc"?999999:-999999),ce==null&&(ce=Ve.direction==="asc"?999999:-999999);let F=0;if(we<ce?F=-1:we>ce&&(F=1),F!==0)return Ve.direction==="asc"?F:-F}return 0}))(ut,I),K=k=>{const H=k==null?void 0:k.toLowerCase();return H==="archived"||H==="completed"||H==="complete"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 transition-all duration-200 hover:scale-105",children:[a.jsx(ji,{className:"w-3 h-3 mr-1"}),"Archived"]}):H==="draft"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 transition-all duration-200 hover:scale-105",children:[a.jsx(rc,{className:"w-3 h-3 mr-1"}),"Draft"]}):H==="on_hold"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400 transition-all duration-200 hover:scale-105",children:[a.jsx(sr,{className:"w-3 h-3 mr-1"}),"On Hold"]}):H==="cancelled"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 transition-all duration-200 hover:scale-105",children:[a.jsx(yr,{className:"w-3 h-3 mr-1"}),"Cancelled"]}):a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 transition-all duration-200 hover:scale-105",children:[a.jsx(Bn,{className:"w-3 h-3 mr-1 animate-pulse"}),"Active"]})};return a.jsxs("div",{className:s?"p-3":"p-6",children:[a.jsxs("div",{className:s?"mb-3":"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{children:a.jsxs("h1",{className:`${s?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white flex items-center`,children:[a.jsx(ro,{className:"w-6 h-6 mr-2 text-primary-500 animate-pulse"}),"Strategic Directives"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pm,{onRefresh:o,isCompact:s}),a.jsxs("button",{onClick:()=>u("/directive-lab?mode=quick"),className:`flex items-center ${s?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[a.jsx(Tm,{className:`${s?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]})]})]}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ww,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 ${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx("input",{type:"text",placeholder:"Search by ID, title, or description...",value:x,onChange:k=>p(k.target.value),className:`w-full ${s?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200`}),x&&a.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(yr,{className:`${s?"w-4 h-4":"w-5 h-5"}`})})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[a.jsxs("button",{onClick:()=>P(!R),className:`flex items-center gap-2 ${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 w-full justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[R?a.jsx(Zt,{className:`${s?"w-4 h-4":"w-5 h-5"}`}):a.jsx(It,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx(tc,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx("span",{className:"font-medium",children:"Filters"})]}),a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:[ut.length," of ",e.length,ut.filter(k=>k.rolled_triage).length>0&&a.jsxs("span",{className:"ml-1",children:["(",ut.filter(k=>k.rolled_triage==="High").length,"H /",ut.filter(k=>k.rolled_triage==="Medium").length,"M /",ut.filter(k=>k.rolled_triage==="Low").length,"L /",ut.filter(k=>k.rolled_triage==="Future").length,"F)"]})]})})]}),R&&a.jsxs("div",{className:"mt-4 bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg transition-all duration-300 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Status"}),a.jsxs("select",{value:b,onChange:k=>y(k.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"active,draft",children:"Active & Draft (Default)"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"draft",children:"Draft Only"}),a.jsx("option",{value:"deferred",children:"Deferred"}),a.jsx("option",{value:"on_hold",children:"On Hold"}),a.jsx("option",{value:"cancelled",children:"Cancelled"}),a.jsx("option",{value:"archived",children:"Archived/Completed"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Priority"}),a.jsxs("select",{value:j,onChange:k=>E(k.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Priorities"}),a.jsx("option",{value:"critical,high",children:"Critical & High (Default)"}),a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Application"}),a.jsxs("select",{value:N,onChange:k=>C(k.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Applications"}),a.jsx("option",{value:"EHG",children:"EHG (Default)"}),a.jsx("option",{value:"EHG_ENGINEER",children:"EHG Engineer"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Category"}),a.jsxs("select",{value:re,onChange:k=>_(k.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Categories"}),[...new Set(e.map(k=>k.category).filter(Boolean))].map(k=>a.jsx("option",{value:k,children:k},k))]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-600",children:[a.jsx("div",{className:"flex items-center gap-2",children:Q&&a.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 flex items-center gap-1`,children:[a.jsx(tc,{className:"w-4 h-4"}),"Filtering applied"]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[Q&&a.jsxs("button",{onClick:ct,className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-2 font-medium border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500`,children:[a.jsx(yr,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Clear All"]}),a.jsxs("button",{onClick:rt,className:`${s?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"} bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg transform hover:scale-105`,children:[a.jsx(ec,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Done"]})]})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3 mt-3",children:[a.jsxs("button",{onClick:()=>J(!L),className:`flex items-center gap-2 ${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 w-full justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[L?a.jsx(Zt,{className:`${s?"w-4 h-4":"w-5 h-5"}`}):a.jsx(It,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx(_E,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),a.jsx("span",{className:"font-medium",children:"Sorting"})]}),a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:`${s?"text-xs":"text-sm"} text-blue-600 dark:text-blue-400 font-medium`,children:I.map(k=>k.label).join("  ")})})]}),L&&a.jsxs("div",{className:"mt-4 bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg transition-all duration-300 animate-in slide-in-from-top-2",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{onChange:k=>{const H=V[k.target.value];H&&M(H)},className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg`,children:[a.jsx("option",{value:"",children:"Load Preset..."}),Object.keys(V).map(k=>a.jsx("option",{value:k,children:k},k))]}),a.jsxs("button",{onClick:()=>U(!0),className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center gap-2`,children:[a.jsx(ys,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Save Current"]}),a.jsxs("button",{onClick:()=>M([{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}]),className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center gap-2`,children:[a.jsx(GE,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Reset"]})]})}),a.jsx("div",{className:"space-y-3",children:I.map((k,H)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-600",children:[a.jsx(ME,{className:`${s?"w-4 h-4":"w-5 h-5"} text-gray-400 cursor-move`}),a.jsxs("span",{className:`${s?"text-xs":"text-sm"} font-medium text-gray-500 dark:text-gray-400 w-20`,children:[H===0?"Primary":H===1?"Secondary":H===2?"Tertiary":`Level ${H+1}`,":"]}),a.jsxs("select",{value:k.field,onChange:ne=>{const pe=[...I],he={wsjf_score:"WSJF Score",priority:"Priority",status:"Status",progress:"Progress",sequenceRank:"Sequence Rank",created_at:"Created Date",updated_at:"Last Updated",title:"Title",id:"ID",readiness:"Ready Score",must_have_count:"Story Count"};pe[H]={...k,field:ne.target.value,label:he[ne.target.value]||ne.target.value},M(pe)},className:`flex-1 ${s?"px-3 py-2 text-xs":"px-4 py-2.5 text-sm"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg`,children:[a.jsx("option",{value:"wsjf_score",children:"WSJF Score"}),a.jsx("option",{value:"priority",children:"Priority"}),a.jsx("option",{value:"status",children:"Status"}),a.jsx("option",{value:"progress",children:"Progress"}),a.jsx("option",{value:"sequenceRank",children:"Sequence Rank"}),a.jsx("option",{value:"created_at",children:"Created Date"}),a.jsx("option",{value:"updated_at",children:"Last Updated"}),a.jsx("option",{value:"title",children:"Title"}),a.jsx("option",{value:"id",children:"ID"}),a.jsx("option",{value:"readiness",children:"Ready Score"}),a.jsx("option",{value:"must_have_count",children:"Story Count"})]}),a.jsxs("button",{onClick:()=>{const ne=[...I];ne[H]={...k,direction:k.direction==="asc"?"desc":"asc"},M(ne)},className:`${s?"px-3 py-2":"px-4 py-2.5"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2`,children:[k.direction==="asc"?a.jsx(CE,{className:`${s?"w-3 h-3":"w-4 h-4"}`}):a.jsx(NE,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),a.jsx("span",{className:`${s?"text-xs":"text-sm"}`,children:k.direction==="asc"?"Ascending":"Descending"})]}),I.length>1&&a.jsx("button",{onClick:()=>{M(I.filter((ne,pe)=>pe!==H))},className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:a.jsx(no,{className:`${s?"w-4 h-4":"w-5 h-5"}`})})]},H))}),I.length<5&&a.jsxs("button",{onClick:()=>{M([...I,{field:"priority",direction:"desc",label:"Priority"}])},className:`mt-3 ${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-gray-400 dark:hover:border-gray-500 w-full flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400`,children:[a.jsx(Cm,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Add Sort Level"]}),a.jsxs("button",{onClick:()=>{const k=[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}];M(k),localStorage.setItem("sd-sort-levels",JSON.stringify(k));const H={"Strategic Priority":[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],Default:[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],"WSJF Priority":[{field:"wsjf_score",direction:"desc",label:"WSJF Score"},{field:"status",direction:"asc",label:"Status"},{field:"created_at",direction:"desc",label:"Created Date"}],"Progress Tracking":[{field:"progress",direction:"asc",label:"Progress"},{field:"priority",direction:"desc",label:"Priority"},{field:"title",direction:"asc",label:"Title"}],"Recent Activity":[{field:"updated_at",direction:"desc",label:"Last Updated"},{field:"status",direction:"asc",label:"Status"}]};z(H),localStorage.setItem("sd-saved-sorts",JSON.stringify(H))},className:`mt-3 ${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-blue-600 text-white rounded-lg hover:bg-blue-700 w-full flex items-center justify-center gap-2`,children:[a.jsx(xr,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Reset to Strategic Priority Sort"]}),S&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Save Sort Configuration"}),a.jsx("input",{type:"text",value:A,onChange:k=>B(k.target.value),placeholder:"Enter preset name...",className:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-lg mb-4",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{onClick:()=>{U(!1),B("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"}),a.jsx("button",{onClick:()=>{A&&(z({...V,[A]:I}),U(!1),B(""))},className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:"Save"})]})]})}),a.jsx("div",{className:"flex items-center justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("button",{onClick:()=>J(!1),className:`${s?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"} bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg transform hover:scale-105`,children:[a.jsx(ec,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Apply Sorting"]})})]})]})]})]}),ut.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[a.jsx(We,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e.length===0?"No strategic directives found":`No ${b==="all"?"":b} directives found`})]}):a.jsx("div",{className:"space-y-4",children:$.map(k=>{var H,ne,pe;return a.jsx("div",{className:`group bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${Xe(k.priority)}`,children:a.jsxs("div",{className:`${s?"p-3":"p-6"} relative`,children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:()=>Tt(k.id),className:"mr-2 p-1 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/20 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 transform hover:scale-105","aria-label":d===k.id?"Collapse":"Expand",children:a.jsx(It,{className:`w-4 h-4 transition-transform duration-200 ease-in-out ${d===k.id?"rotate-90":""}`})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{className:"inline-flex items-center group",children:[a.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-mono text-lg font-bold",children:k.id}),a.jsx("button",{onClick:he=>{he.stopPropagation(),wr(k.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-2",title:"Copy ID",children:T===k.id?a.jsx(Sa,{className:"w-3 h-3 text-green-500"}):a.jsx(jm,{className:"w-3 h-3 text-gray-500"})})]})}),a.jsx("h2",{className:`${s?"text-base":"text-xl"} font-semibold text-gray-900 dark:text-white ${s?"line-clamp-2":""}`,children:k.title||"Untitled"})]})]}),a.jsxs("div",{className:`${s?"mt-2":"mt-4"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 flex items-center`,children:["Progress",k.progressTrend&&(k.progressTrend>0?a.jsx(Ss,{className:"w-3 h-3 ml-1 text-green-500"}):a.jsx(An,{className:"w-3 h-3 ml-1 text-red-500"}))]}),a.jsxs("span",{className:`${s?"text-xs":"text-sm"} font-semibold flex items-center`,children:[k.progress,"%",k.progress===100&&a.jsx(ro,{className:"w-3 h-3 ml-1 text-green-500 animate-pulse"})]})]}),a.jsx("div",{className:`w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${s?"h-2":"h-3"} shadow-inner`,children:a.jsx("div",{className:`${s?"h-2":"h-3"} rounded-full transition-all duration-1000 ease-out ${Ir(k.progress)}`,style:{width:`${k.progress}%`,boxShadow:k.progress===100?"0 0 10px rgba(34, 197, 94, 0.5)":"none"}})})]})]}),a.jsxs("div",{className:`${s?"ml-2":"ml-4"} flex flex-col items-end ${s?"space-y-1":"space-y-2"}`,children:[a.jsx("div",{className:`flex ${s?"space-x-1":"space-x-2"}`,children:n===k.id?a.jsxs("button",{disabled:!0,className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-green-500 text-white rounded flex items-center`,children:[a.jsx(an,{className:`${s?"w-3 h-3":"w-4 h-4"} mr-1`}),s?" Working":" Working On"]}):a.jsxs("button",{onClick:()=>r&&r(k.id),className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center`,children:[a.jsx(an,{className:`${s?"w-3 h-3":"w-4 h-4"} ${s?"":"mr-1"} animate-pulse`}),s?"Work On":"Work On This"]})}),a.jsxs("div",{className:`${s?"mt-2 gap-1":"mt-3 gap-2"} flex flex-wrap items-end justify-end`,children:[a.jsxs("div",{className:"relative inline-block",children:[a.jsxs("button",{onClick:he=>{he.stopPropagation(),xt(be===k.id?null:k.id)},className:"group flex items-center gap-1 hover:opacity-80 transition-opacity",children:[K(k.status),a.jsx(rc,{className:"w-3 h-3 text-gray-500 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),be===k.id&&a.jsx("div",{className:"absolute left-0 mt-1 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:a.jsx("div",{className:"py-1",children:["active","draft","on_hold","cancelled","archived"].map(he=>a.jsxs("button",{onClick:_e=>{_e.stopPropagation(),l&&l(k.id,he),xt(null)},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${k.status===he?"bg-gray-50 dark:bg-gray-700/50 text-primary-600":"text-gray-700 dark:text-gray-200"}`,children:[a.jsx("span",{className:"capitalize",children:he}),k.status===he&&a.jsx(Sa,{className:"w-3 h-3"})]},he))})})]}),k.targetApplication&&a.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`,children:k.targetApplication.replace("_"," ")}),a.jsxs("button",{onClick:he=>{he.stopPropagation(),u(`/backlog?sd=${k.sd_id||k.id}`)},className:`flex items-center ${s?"px-2 py-0.5 text-xs":"px-2 py-1 text-xs"} transition-all duration-200 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded`,title:`${k.total_backlog_items||k.total_items||k.backlog_count||0} backlog items`,children:[a.jsx(ji,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),a.jsx("span",{className:"ml-1 text-xs",children:k.total_backlog_items||k.total_items||k.backlog_count||0})]}),(k.priority||k.rolled_triage)&&a.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`,children:s?((ne=(H=k.priority)==null?void 0:H[0])==null?void 0:ne.toUpperCase())||((pe=k.rolled_triage)==null?void 0:pe[0]):`${k.priority||k.rolled_triage}`}),k.category&&a.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:k.category})]}),k.checklist&&k.checklist.length>0&&a.jsx("div",{className:"text-sm text-gray-600",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(Sa,{className:"w-4 h-4 mr-1"}),k.checklist.filter(he=>he.checked).length,"/",k.checklist.length]})})]})]}),k.hasBacklogItems&&a.jsxs("div",{className:`${s?"mt-3":"mt-4"} pt-3 border-t border-gray-200 dark:border-gray-700`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("button",{onClick:()=>{Fi(he=>{const _e=new Set(he);return _e.has(k.id)?_e.delete(k.id):_e.add(k.id),_e})},className:`${s?"text-xs":"text-sm"} font-medium text-gray-700 dark:text-gray-300 flex items-center hover:text-purple-600 dark:hover:text-purple-400 transition-colors`,children:[vt.has(k.id)?a.jsx(It,{className:"w-4 h-4 mr-1"}):a.jsx(Zt,{className:"w-4 h-4 mr-1"}),a.jsx(bh,{className:"w-4 h-4 mr-1"}),"Backlog Overview"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[O[k.id]&&!vt.has(k.id)&&a.jsx("button",{onClick:()=>Jt(k.id,!0),disabled:ae.has(k.id),className:`p-1 text-gray-500 hover:text-purple-600 dark:text-gray-400 dark:hover:text-purple-400 transition-colors ${ae.has(k.id)?"opacity-50 cursor-not-allowed":""}`,title:"Refresh summary",children:a.jsx(xr,{className:`w-4 h-4 ${ae.has(k.id)?"animate-spin":""}`})}),a.jsx("span",{className:`${s?"text-xs":"text-sm"} bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-2 py-1 rounded-full`,children:k.backlogItemCount})]})]}),!vt.has(k.id)&&a.jsx(a.Fragment,{children:O[k.id]?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:`${s?"text-xs":"text-sm"} text-gray-700 dark:text-gray-300 leading-relaxed`,children:O[k.id].summary}),(O[k.id].generated_at||O[k.id].from_database)&&a.jsx("div",{className:"flex items-center justify-between mt-2",children:a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[O[k.id].from_database&&a.jsxs(a.Fragment,{children:[a.jsx(go,{className:"w-3 h-3 mr-1"}),"Stored in database"]}),O[k.id].generated_at&&a.jsxs("span",{className:"ml-2",children:["Generated: ",new Date(O[k.id].generated_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})}),a.jsxs("div",{className:`flex items-center space-x-2 ${s?"text-xs":"text-sm"}`,children:[a.jsxs("span",{className:"text-red-600 dark:text-red-400",children:[" ",k.h_count," High"]}),a.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[" ",k.m_count," Medium"]}),a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[" ",k.l_count," Low"]}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",k.future_count," Future"]})]}),O[k.id].generated_at&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:["Generated: ",new Date(O[k.id].generated_at).toLocaleString()]})]}):a.jsx("div",{className:"space-y-2",children:ae.has(k.id)?a.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 flex items-center`,children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-purple-500 mr-2"}),"Generating AI summary..."]}):a.jsxs("button",{onClick:()=>Jt(k.id),className:`inline-flex items-center ${s?"text-xs px-2 py-1":"text-sm px-3 py-1"} bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/30 dark:hover:bg-purple-800/30 text-purple-800 dark:text-purple-300 rounded transition-colors`,children:[a.jsx(bh,{className:"w-3 h-3 mr-1"}),"Generate AI Summary"]})})})]}),d===k.id&&a.jsxs("div",{className:"mt-6 border-t pt-6",children:[(k.h_count>0||k.m_count>0||k.l_count>0||k.future_count>0)&&a.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[a.jsx(We,{className:"w-4 h-4 mr-2 text-blue-600"}),"Backlog Details"]}),a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["H: ",k.h_count||0,"  M: ",k.m_count||0,"  L: ",k.l_count||0,k.future_count>0&&`  Future: ${k.future_count}`,k.must_have_count>0&&`  Must-have: ${k.must_have_count}`]})]})}),k.checklist&&k.checklist.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[a.jsx(an,{className:"w-5 h-5 mr-2"}),"Requirements Checklist"]}),a.jsxs("div",{className:"space-y-2",children:[k.checklist.slice(0,5).map((he,_e)=>a.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:he.checked,onChange:()=>yt(k.id,_e),className:"mr-3 w-4 h-4 text-primary-600 rounded"}),a.jsx("span",{className:`${he.checked?"line-through text-gray-500":""}`,children:he.text})]},_e)),k.checklist&&k.checklist.length>5&&a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",k.checklist.length-5," more items"]})]})]}),a.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Content Preview"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded max-h-64 overflow-y-auto",children:a.jsx(Ih,{children:k.content.substring(0,500)+(k.content.length>500?"...":"")})}),a.jsx("span",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"Full content available in detail view"})]})]}),d===k.id&&a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-wrap gap-2 justify-between items-center",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.storyCount>0?a.jsxs(Gl,{to:`/stories/${k.sdKey}`,className:"inline-flex items-center px-3 py-1.5 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:[" View ",k.storyCount," Stories"]}):a.jsx("button",{onClick:()=>generateStoriesForSD(k.sdKey),className:"inline-flex items-center px-3 py-1.5 text-sm text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 border border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-all duration-200",children:" Generate Stories"}),k.checklist&&k.checklist.length>0&&a.jsxs("button",{onClick:()=>Mt(k),className:"inline-flex items-center px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200",children:[" View All ",k.checklist.length," Tasks"]}),a.jsx("button",{onClick:()=>Mt(k),className:"inline-flex items-center px-3 py-1.5 text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 border border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all duration-200",children:" Full Document"})]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated ",new Date(k.updatedAt).toLocaleDateString()]})]})})]})},k.id)})})]})}function wx({prds:e,isCompact:t,detailMode:r}){const{id:n}=Bf(),s=Ai(),[i,o]=w.useState("list"),[l,c]=w.useState(null);w.useEffect(()=>{if(r&&n){const d=e.find(h=>h.id===n);d?(c(d),o("detail"),document.title=`${d.title||d.id} - LEO Protocol Dashboard`):(console.warn(`PRD with id '${n}' not found, redirecting to list`),s("/prds",{replace:!0}))}else r||(o("list"),c(null),document.title="PRDs - LEO Protocol Dashboard")},[n,r,e,s]);const u=d=>{if(!d||!d.id){console.error("Invalid PRD for navigation:",d);return}try{s(`/prds/${d.id}`)}catch(h){console.error("Navigation error:",h)}};return i==="detail"&&l?a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>s("/prds"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[a.jsx(It,{className:"w-4 h-4 mr-1 rotate-180"}),"Back to PRDs"]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:l.directiveTitle&&`Strategic Directive: ${l.directiveTitle}`})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.status})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Priority"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.priority})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.phase})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),a.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[l.progress,"%"]})]})]}),a.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:a.jsx(Ih,{children:l.content||"No content available"})}),l.checklist&&l.checklist.length>0&&a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Implementation Checklist"}),a.jsx("div",{className:"space-y-2",children:l.checklist.map((d,h)=>a.jsxs("div",{className:"flex items-start p-3 rounded bg-gray-50 dark:bg-gray-700",children:[d.checked?a.jsx(Sa,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}):a.jsx(Em,{className:"w-5 h-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0"}),a.jsx("span",{className:`flex-1 ${d.checked?"line-through text-gray-500":""}`,children:d.text}),d.phase&&a.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded ml-2",children:d.phase})]},h))})]})]})]}):a.jsxs("div",{className:t?"p-3":"p-6",children:[a.jsx("div",{className:t?"mb-3":"mb-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:`${t?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white`,children:"PRDs"}),a.jsx("p",{className:`text-gray-600 dark:text-gray-400 ${t?"text-sm mt-1":"mt-2"}`,children:"Product Requirements Documents - Technical implementation details"})]})})}),e.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[a.jsx(We,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No PRDs found"})]}):a.jsx("div",{className:"space-y-4",children:e.map(d=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(We,{className:"w-6 h-6 text-blue-600 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.directiveTitle&&`SD: ${d.directiveTitle}`}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:d.description}),a.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.priority==="high"?"bg-red-100 text-red-800":d.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:d.priority}),a.jsxs("span",{className:"text-xs text-gray-500",children:["Phase: ",d.phase]}),a.jsxs("span",{className:"text-xs text-gray-500",children:["Progress: ",d.progress,"%"]})]})]})]})}),a.jsx("div",{className:"ml-4 flex flex-col items-end space-y-2",children:a.jsx("button",{onClick:()=>u(d),className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors",children:"View Full"})})]})})},d.id))})]})}const Le=({children:e,variant:t="primary",size:r="medium",disabled:n=!1,loading:s=!1,onClick:i,type:o="button",fullWidth:l=!1,icon:c,iconPosition:u="left",ariaLabel:d,className:h="",...m})=>{const f=`
    inline-flex items-center justify-center
    font-medium transition-all duration-200
    rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    min-h-[44px] min-w-[44px]
  `,g={small:"px-3 py-1.5 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"},v={primary:`
      bg-blue-600 dark:bg-blue-600 text-white dark:text-white
      hover:bg-blue-700 dark:hover:bg-blue-700 active:bg-blue-800 dark:active:bg-blue-800
      focus:ring-blue-500 dark:focus:ring-blue-400
    `,secondary:`
      bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100
      hover:bg-gray-300 dark:hover:bg-gray-600 active:bg-gray-400 dark:active:bg-gray-500
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,ghost:`
      bg-transparent dark:bg-transparent text-gray-700 dark:text-gray-300
      hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,danger:`
      bg-red-600 dark:bg-red-600 text-white dark:text-white
      hover:bg-red-700 dark:hover:bg-red-700 active:bg-red-800 dark:active:bg-red-800
      focus:ring-red-500 dark:focus:ring-red-400
    `,success:`
      bg-green-600 dark:bg-green-600 text-white dark:text-white
      hover:bg-green-700 dark:hover:bg-green-700 active:bg-green-800 dark:active:bg-green-800
      focus:ring-green-500 dark:focus:ring-green-400
    `},b=l?"w-full":"",y=`
    ${f}
    ${g[r]}
    ${v[t]}
    ${b}
    ${h}
  `.trim().replace(/\s+/g," "),x=p=>{!n&&!s&&i&&i(p)};return a.jsxs("button",{type:o,className:y,disabled:n||s,onClick:x,"aria-label":d||(typeof e=="string"?e:void 0),"aria-busy":s,"aria-disabled":n||s,...m,children:[s&&a.jsx(qw,{className:"w-4 h-4 mr-2 animate-spin"}),!s&&c&&u==="left"&&a.jsx(c,{className:"w-4 h-4 mr-2"}),e,!s&&c&&u==="right"&&a.jsx(c,{className:"w-4 h-4 ml-2"})]})},Xo=({type:e="text",label:t,name:r,value:n,onChange:s,onBlur:i,placeholder:o,required:l=!1,disabled:c=!1,error:u,success:d,helpText:h,validationPattern:m,minLength:f,maxLength:g,rows:v=4,options:b=[],autoComplete:y,className:x="",fullWidth:p=!0,showCharCount:j=!1,...E})=>{const[N,C]=w.useState(!1),[T,D]=w.useState(!1),[R,P]=w.useState("");w.useEffect(()=>{T&&m&&(new RegExp(m).test(n)?P(""):P("Invalid format"))},[n,m,T]);const I=`
    w-full px-4 py-3 
    border rounded-lg transition-all duration-200
    text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400
    min-h-[48px]
    focus:outline-none focus:ring-2 focus:ring-offset-1
    disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-60
    bg-white dark:bg-gray-700
   ${u||R?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400 focus:border-red-500 dark:focus:border-red-400":d?"border-green-500 dark:border-green-400 focus:ring-green-500 dark:focus:ring-green-400 focus:border-green-500 dark:focus:border-green-400":N?"border-blue-500 dark:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400"} ${x}`,M=()=>{C(!0)},V=_=>{C(!1),D(!0),i&&i(_)},z=_=>{s&&s(_),T||D(!0)},A=`input-${r||Math.random().toString(36).substr(2,9)}`,B=`${A}-error`,S=`${A}-help`,U=()=>{switch(e){case"textarea":return a.jsx("textarea",{id:A,name:r,value:n,onChange:z,onFocus:M,onBlur:V,placeholder:o,required:l,disabled:c,rows:v,minLength:f,maxLength:g,className:I,"aria-invalid":!!(u||R),"aria-describedby":`${u||R?B:""} ${h?S:""}`,...E});case"select":return a.jsxs("select",{id:A,name:r,value:n,onChange:z,onFocus:M,onBlur:V,required:l,disabled:c,className:I,"aria-invalid":!!(u||R),"aria-describedby":`${u||R?B:""} ${h?S:""}`,...E,children:[a.jsx("option",{value:"",children:"Select an option"}),b.map(_=>a.jsx("option",{value:_.value,children:_.label},_.value))]});default:return a.jsx("input",{id:A,type:e,name:r,value:n,onChange:z,onFocus:M,onBlur:V,placeholder:o,required:l,disabled:c,minLength:f,maxLength:g,autoComplete:y,className:I,"aria-invalid":!!(u||R),"aria-describedby":`${u||R?B:""} ${h?S:""}`,...E})}},re=p?"w-full":"";return a.jsxs("div",{className:`${re} mb-4`,children:[t&&a.jsxs("label",{htmlFor:A,className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",children:[t,l&&a.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[U(),a.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:[d&&!u&&!R&&a.jsx(as,{className:"w-5 h-5 text-green-500","aria-label":"Valid input"}),(u||R)&&a.jsx(yr,{className:"w-5 h-5 text-red-500","aria-label":"Invalid input"})]})]}),j&&g&&a.jsxs("div",{className:"mt-1 text-sm text-right text-gray-500 dark:text-gray-400",children:[(n==null?void 0:n.length)||0," / ",g]}),(u||R)&&a.jsxs("div",{id:B,className:"mt-2 flex items-start text-sm text-red-600 dark:text-red-400",role:"alert",children:[a.jsx(sr,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),u||R]}),h&&!(u||R)&&a.jsxs("div",{id:S,className:"mt-2 flex items-start text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(Ur,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),h]})]})},KA=({steps:e=[],currentStep:t=1,orientation:r="horizontal",showTimeEstimates:n=!0,showStepNumbers:s=!0,compact:i=!1,hideLabelsOnMobile:o=!1,onStepClick:l,className:c=""})=>{const u=(t-1)/(e.length-1)*100,d=e.reduce((y,x)=>y+(x.timeEstimate||0),0),h=e.slice(0,t-1).reduce((y,x)=>y+(x.timeEstimate||0),0),m=y=>{if(y<60)return`${y} min`;const x=Math.floor(y/60),p=y%60;return p>0?`${x}h ${p}m`:`${x}h`},f=y=>y<t-1?"completed":y===t-1?"current":y===t?"upcoming":"locked",g=(y,x)=>{switch(y){case"completed":return a.jsx(as,{className:"w-4 h-4"});case"current":return s?x:null;case"upcoming":return s?x:null;case"locked":return a.jsx(FE,{className:"w-3 h-3"});default:return x}},v=y=>{const x=f(y);l&&(x==="completed"||x==="current")&&l(y+1)},b=y=>{const x=f(y);return l&&(x==="completed"||x==="current")};return r==="vertical"?a.jsxs("div",{className:`${c}`,children:[n&&!i&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),a.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`},role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"})}),a.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-600 dark:text-gray-400",children:[a.jsxs("span",{children:[m(h)," completed"]}),a.jsxs("span",{children:[m(d-h)," remaining"]})]})]}),a.jsx("div",{className:"relative",children:e.map((y,x)=>{const p=f(x),j=x===e.length-1;return a.jsxs("div",{className:"flex items-start mb-8 last:mb-0",children:[!j&&a.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),a.jsx("button",{onClick:()=>v(x),disabled:!b(x),className:`
                    relative z-10 flex items-center justify-center
                    w-12 h-12 rounded-full border-2 transition-all
                    ${b(x)?"cursor-pointer":"cursor-default"}
                    ${p==="completed"?"bg-green-500 border-green-500 text-white":""}
                    ${p==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                    ${p==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                    ${p==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                  `,"aria-label":`Step ${x+1}: ${y.title} - ${p}`,children:g(p,x+1)}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h3",{className:`
                    font-medium text-base
                    ${p==="current"?"text-blue-600":""}
                    ${p==="completed"?"text-green-600":""}
                    ${p==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),y.description&&!i&&a.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:y.description}),n&&y.timeEstimate&&a.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[a.jsx(Pr,{className:"w-3 h-3 mr-1"}),m(y.timeEstimate)]})]})]},x)})})]}):a.jsxs("div",{className:`${c}`,children:[n&&!i&&a.jsx("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Pr,{className:"w-4 h-4 mr-2 text-blue-600"}),a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Time: ",a.jsx("span",{className:"font-medium",children:m(h)})," of"," ",a.jsx("span",{className:"font-medium",children:m(d)})]})]}),a.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"% Complete"]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-300 dark:bg-gray-600"}),a.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-blue-600 dark:bg-blue-500 transition-all duration-300",style:{width:`${u}%`}}),a.jsx("div",{className:"relative flex justify-between",children:e.map((y,x)=>{const p=f(x);return a.jsxs("div",{className:`flex flex-col items-center ${i?"flex-1":""}`,children:[a.jsxs("div",{className:"relative group",children:[a.jsx("button",{onClick:()=>v(x),disabled:!b(x),className:`
                      relative z-10 flex items-center justify-center
                      w-12 h-12 rounded-full border-2 transition-all
                      ${b(x)?"cursor-pointer hover:scale-110":"cursor-default"}
                      ${p==="completed"?"bg-green-500 border-green-500 text-white":""}
                      ${p==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                      ${p==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                      ${p==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                    `,"aria-label":`Step ${x+1}: ${y.title} - ${p}`,title:y.title,children:g(p,x+1)}),o&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block md:hidden z-20",children:a.jsxs("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[y.title,a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:a.jsx("div",{className:"border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})})]}),a.jsxs("div",{className:`mt-3 text-center ${o?"hidden md:block":""}`,children:[a.jsx("p",{className:`
                    text-sm font-medium
                    ${p==="current"?"text-blue-600":""}
                    ${p==="completed"?"text-green-600":""}
                    ${p==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),n&&y.timeEstimate&&!i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:m(y.timeEstimate)})]})]},x)})})]})]})},JA=({onSubmissionSelect:e,onGroupCreate:t,selectedSubmissionId:r,onSelectionChange:n,refreshTrigger:s=0})=>{const[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[h,m]=w.useState([]),[f,g]=w.useState(!1),[v,b]=w.useState(null),[y,x]=w.useState(!1);w.useEffect(()=>{p()},[f,s]),w.useEffect(()=>{const I=()=>{b(null),x(!1)};if(v||y)return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[v,y]);const p=async()=>{try{c(!0);const I=new URLSearchParams;f&&I.append("uncombined","true"),I.append("since","30d");const M=await fetch(`/api/sdip/submissions?${I}`);if(!M.ok)throw new Error("Failed to load submissions");const V=await M.json();o(V),d(null)}catch(I){d(I.message),o([])}finally{c(!1)}},j=I=>{const M=h.includes(I)?h.filter(V=>V!==I):[...h,I];m(M),n==null||n(M)},E=I=>{e(I)},N=(I="intelligent")=>{h.length>=2&&t(h,I)},C=async I=>{if(confirm("Are you sure you want to delete this submission?"))try{if(!(await fetch(`/api/sdip/submissions/${I}`,{method:"DELETE"})).ok)throw new Error("Failed to delete submission");o(V=>V.filter(z=>z.id!==I)),m(V=>V.filter(z=>z!==I)),r===I&&e(null)}catch(M){console.error("Error deleting submission:",M),alert("Failed to delete submission. Please try again.")}},T=I=>{const M=new Date(I),z=Math.floor((new Date-M)/(1e3*60*60));return z<1?"Just now":z<24?`${z}h ago`:z<48?"Yesterday":M.toLocaleDateString()},D=I=>{const M=I.intent_summary||I.chairman_input||I.submission_title||"Untitled Submission";return M.length>60?M.substring(0,57)+"...":M},R=I=>{var V,z,A,B,S;let M="";return((z=(V=I.synthesis)==null?void 0:V.aligned)==null?void 0:z.length)>0?M=((A=I.synthesis.aligned[0])==null?void 0:A.text)||"":(B=I.impact_analysis)!=null&&B.summary?M=I.impact_analysis.summary:(S=I.strat_tac)!=null&&S.rationale&&(M=I.strat_tac.rationale),!M&&I.chairman_input&&(M=I.chairman_input.substring(0,100)+"..."),M.length>120?M.substring(0,117)+"...":M},P=I=>{var z;const M=((z=I.impact_analysis)==null?void 0:z.affected_components)||[];if(M.length===0)return null;const V=M.find(A=>A.impact_level==="high")||M[0];return(V==null?void 0:V.name)||(V==null?void 0:V.component)||null},L=I=>{var A,B;const M=I.status||"draft",V=I.current_step||1,z=Array.isArray(I.completed_steps)?I.completed_steps:[];return M==="submitted"||((A=I.gate_status)==null?void 0:A.status)==="submitted"||(B=I.gate_status)!=null&&B.resulting_sd_id||I.resulting_sd_id?{text:" Submitted",color:"text-green-700 bg-green-100 dark:bg-green-900/20 dark:text-green-300",icon:""}:M==="ready"||z.includes(7)||z.length===7&&V===7?{text:" Ready",color:"text-blue-700 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300",icon:""}:{text:" Draft",color:"text-yellow-700 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300",icon:""}},J=I=>i.filter(M=>M.group_id===I);return l?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 text-sm",children:"Recent Submissions"}),i.length>0&&a.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded",children:i.length})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Le,{onClick:()=>g(!f),variant:f?"primary":"ghost",size:"small",icon:tc,ariaLabel:"Show uncombined only"}),h.length>=2&&a.jsxs("div",{className:"relative",children:[a.jsxs(Le,{onClick:I=>{I.stopPropagation(),x(!y)},variant:"primary",size:"small",icon:Kw,children:["Combine (",h.length,")"]}),y&&a.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-20 min-w-56",children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 px-2",children:"Combination Method:"}),[{id:"intelligent",name:" Intelligent",desc:"AI-driven optimal combination"},{id:"chronological",name:" Chronological",desc:"Preserve timeline order"},{id:"merge",name:" Smart Merge",desc:"Deduplicate and consensus"},{id:"priority",name:" Priority-based",desc:"Highest strategic impact first"},{id:"latest",name:" Latest Override",desc:"Most recent takes precedence"}].map(I=>a.jsxs("button",{onClick:M=>{M.stopPropagation(),N(I.id),x(!1)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex flex-col gap-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:I.name}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:I.desc})]},I.id))]})})]})]})]}),u&&a.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-400 flex items-start gap-2",children:[a.jsx(sr,{className:"w-5 h-5 text-red-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load submissions"}),a.jsx("p",{className:"text-red-600 text-sm",children:u}),a.jsx("button",{onClick:p,className:"mt-1 text-red-700 underline text-sm hover:no-underline",children:"Try again"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:i.length===0?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(Pr,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"No submissions yet"}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Create your first submission to get started with the Directive Lab"}),a.jsx("button",{onClick:()=>e(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Submission"})]}):a.jsx("div",{className:"p-2",children:i.map(I=>{const M=L(I),V=D(I),z=R(I),A=P(I),B=h.includes(I.id),S=r===I.id,U=I.group_id?J(I.group_id):[],re=v===I.id;return a.jsx("div",{className:`p-3 mb-2 border rounded-lg transition-all cursor-pointer ${S?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700/50"}`,onClick:()=>E(I),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:_=>{_.stopPropagation(),j(I.id)},className:"mt-1 text-gray-400 hover:text-gray-600 transition-colors",children:B?a.jsx(Sa,{className:"w-4 h-4 text-blue-600"}):a.jsx(Em,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm leading-tight",children:V}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap font-medium ${M.color}`,children:M.text})]}),z&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 leading-relaxed",children:z}),A&&a.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[a.jsx(We,{className:"w-3 h-3 text-gray-400"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Affects: ",a.jsx("span",{className:"font-medium",children:A})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:T(I.created_at)}),I.group_id&&U.length>1&&a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:_=>{_.stopPropagation(),b(re?null:I.id)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[a.jsx($E,{className:"w-3 h-3"}),a.jsxs("span",{className:"font-medium",children:[U.length," items"]}),a.jsx(Zt,{className:`w-3 h-3 transition-transform ${re?"rotate-180":""}`})]}),re&&a.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-48",children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 px-2",children:"Linked Submissions:"}),U.map(_=>{const Ne=L(_),tt=D(_);return a.jsxs("button",{onClick:be=>{be.stopPropagation(),E(_),b(null)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate",children:tt}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${Ne.color}`,children:Ne.icon}),a.jsx(Zl,{className:"w-3 h-3 text-gray-400"})]})]},_.id)})]})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:_=>{_.stopPropagation(),E(I)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[a.jsx(DE,{className:"w-3 h-3"}),"View"]}),a.jsx("button",{onClick:_=>{_.stopPropagation(),C(I.id)},className:"flex items-center gap-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete submission",children:a.jsx(no,{className:"w-3 h-3"})})]})]})]})]})},I.id)})})}),h.length>0&&a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-700",children:a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:[h.length," selected"]}),h.length>=2&&a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Ready to combine "})]})})]})},XA=({isOpen:e=!0,onClose:t,selectedSubmissions:r,combineMethod:n="intelligent",onCreateGroup:s,onSuccess:i})=>{const[o,l]=w.useState(""),[c,u]=w.useState(n),[d,h]=w.useState(!1),[m,f]=w.useState(null),g=async b=>{if(b.preventDefault(),!!o.trim()){h(!0),f(null);try{const y=await fetch("/api/sdip/create-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_ids:r,group_name:o.trim(),method:c})});if(!y.ok){const p=await y.json();throw new Error(p.error||"Failed to create group")}const x=await y.json();console.log(" Group created successfully:",x),i?i(x):s&&await s(x),t(),l(""),u(n)}catch(y){f(y.message)}finally{h(!1)}}};if(!e)return null;const v=[{value:"intelligent",label:" Intelligent",desc:"AI-driven optimal combination"},{value:"chronological",label:" Chronological",desc:"Keep time order"},{value:"merge",label:" Merge & Dedupe",desc:"Remove duplicates"},{value:"priority",label:" Priority-based",desc:"Highest strategic impact first"},{value:"latest",label:" Latest Priority",desc:"Latest overrides"}];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kw,{className:"w-4 h-4 text-blue-600"}),a.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Combine ",r.length," Submissions"]})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:a.jsx(yr,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:g,className:"p-3 space-y-3",children:[m&&a.jsxs("div",{className:"flex items-start gap-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[a.jsx(sr,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:m})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"group-name",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name"}),a.jsx("input",{type:"text",id:"group-name",value:o,onChange:b=>l(b.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dashboard UX Improvements",required:!0,maxLength:100})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Combine Method"}),a.jsx("div",{className:"grid grid-cols-1 gap-1",children:v.map(b=>a.jsx("label",{className:`flex items-center justify-between p-2 text-xs border rounded cursor-pointer transition-colors ${c===b.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-600"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"combineMethod",value:b.value,checked:c===b.value,onChange:y=>u(y.target.value),className:"text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b.label}),a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:[" ",b.desc]})]})]})},b.value))})]}),a.jsxs("div",{className:"flex gap-2 pt-1",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!o.trim()||d,className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 border border-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Creating...":"Combine"})]})]})]})})},QA=({impactAnalysis:e,consistencyValidation:t,submission:r})=>{var d,h,m;const[n,s]=w.useState({overview:!0,components:!1,consistency:!1,recommendations:!1,mitigation:!1});if(!e&&!t)return a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-center",children:[a.jsx(Ur,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No impact analysis available for this submission"})]});const i=f=>{s(g=>({...g,[f]:!g[f]}))},o=f=>{switch(f){case"critical":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-100",accent:"text-red-600 dark:text-red-400",icon:Nt};case"high":return{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-100",accent:"text-orange-600 dark:text-orange-400",icon:sr};case"medium":return{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-900 dark:text-yellow-100",accent:"text-yellow-600 dark:text-yellow-400",icon:Ur};case"low":return{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-100",accent:"text-green-600 dark:text-green-400",icon:je};default:return{bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",text:"text-gray-900 dark:text-gray-100",accent:"text-gray-600 dark:text-gray-400",icon:Ur}}},l=o((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)),c=l.icon,u=f=>({ui:yl,api:OE,database:go,authentication:Si,navigation:an,performance:Ss,"design-system":yl})[f]||Ur;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-lg border ${l.bg} ${l.border} p-6`,children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("overview"),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(c,{className:`w-6 h-6 ${l.accent}`}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-lg font-semibold ${l.text}`,children:"Impact Analysis Overview"}),a.jsxs("p",{className:`text-sm ${l.text} opacity-75`,children:["Risk Level: ",((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)||"unknown").toUpperCase()]})]})]}),n.overview?a.jsx(Zt,{className:`w-5 h-5 ${l.accent}`}):a.jsx(It,{className:`w-5 h-5 ${l.accent}`})]}),n.overview&&a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:e.impact_score}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Impact Score"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:`text-2xl font-bold ${l.accent}`,children:[e.effort_multiplier,"x"]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Effort Multiplier"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:((d=e.affected_components)==null?void 0:d.length)||0}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Affected Components"})]})]}),t&&a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${t.passed?"text-green-600":"text-red-600"}`,children:t.score}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Consistency Score"})]})]})]}),(e==null?void 0:e.affected_components)&&e.affected_components.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("components"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(yl,{className:"w-5 h-5 mr-2"}),"Affected Components"]}),n.components?a.jsx(Zt,{className:"w-5 h-5 text-gray-400"}):a.jsx(It,{className:"w-5 h-5 text-gray-400"})]}),n.components&&a.jsx("div",{className:"mt-4 space-y-3",children:e.affected_components.map((f,g)=>{const v=u(f.name),b=o(f.risk_level);return a.jsxs("div",{className:`p-4 rounded-lg border ${b.bg} ${b.border}`,children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(v,{className:`w-5 h-5 ${b.accent}`}),a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${b.text}`,children:f.name}),a.jsxs("p",{className:`text-sm ${b.text} opacity-75`,children:["Risk: ",f.risk_level,"  Confidence: ",Math.round((f.confidence||0)*100),"%"]})]})]})}),f.dependencies&&f.dependencies.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:`text-xs ${b.text} opacity-60 mb-1`,children:"Dependencies:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:f.dependencies.map((y,x)=>a.jsx("span",{className:`px-2 py-1 rounded text-xs ${b.accent} bg-white dark:bg-gray-700`,children:y},x))})]})]},g)})})]}),t&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("consistency"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(Si,{className:"w-5 h-5 mr-2"}),"Consistency Validation",!t.passed&&a.jsx(mn,{className:"w-5 h-5 ml-2 text-red-500"})]}),n.consistency?a.jsx(Zt,{className:"w-5 h-5 text-gray-400"}):a.jsx(It,{className:"w-5 h-5 text-gray-400"})]}),n.consistency&&a.jsxs("div",{className:"mt-4 space-y-4",children:[a.jsxs("div",{className:`p-4 rounded-lg ${t.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[a.jsxs("div",{className:"flex items-center",children:[t.passed?a.jsx(je,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}):a.jsx(mn,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),a.jsx("span",{className:`font-medium ${t.passed?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:t.passed?"Validation Passed":"Validation Failed"})]}),t.blocking_issues&&t.blocking_issues.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Blocking Issues:"}),t.blocking_issues.map((f,g)=>a.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200 mb-1",children:[" ",f.message,f.suggestion&&a.jsxs("div",{className:"text-xs text-red-600 dark:text-red-300 ml-4 mt-1",children:["Suggestion: ",f.suggestion]})]},g))]})]}),t.category_scores&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Category Breakdown"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.category_scores).map(([f,g])=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:f.replace("_"," ")}),a.jsx("span",{className:`text-sm font-bold ${g>=70?"text-green-600":g>=50?"text-yellow-600":"text-red-600"}`,children:g})]}),a.jsx("div",{className:"mt-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all ${g>=70?"bg-green-500":g>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${g}%`}})})]},f))})]})]})]}),((e==null?void 0:e.recommendations)||(t==null?void 0:t.recommendations))&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("recommendations"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(an,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),n.recommendations?a.jsx(Zt,{className:"w-5 h-5 text-gray-400"}):a.jsx(It,{className:"w-5 h-5 text-gray-400"})]}),n.recommendations&&a.jsxs("div",{className:"mt-4 space-y-3",children:[(h=e==null?void 0:e.recommendations)==null?void 0:h.map((f,g)=>a.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ur,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[f.type,": ",f.description]}),f.effort_reduction&&a.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Effort reduction: ",f.effort_reduction]})]})]})},`impact-${g}`)),(m=t==null?void 0:t.recommendations)==null?void 0:m.map((f,g)=>a.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(je,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:f.message}),f.priority&&a.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs mt-1 ${f.priority==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":f.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":f.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[f.priority," priority"]})]})]})},`consistency-${g}`))]})]}),(e==null?void 0:e.mitigation_strategies)&&e.mitigation_strategies.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("mitigation"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(Bn,{className:"w-5 h-5 mr-2"}),"Mitigation Strategies"]}),n.mitigation?a.jsx(Zt,{className:"w-5 h-5 text-gray-400"}):a.jsx(It,{className:"w-5 h-5 text-gray-400"})]}),n.mitigation&&a.jsx("div",{className:"mt-4 space-y-2",children:e.mitigation_strategies.map((f,g)=>a.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx(Bn,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:f})]},g))})]}),(e==null?void 0:e.breaking_changes)&&e.breaking_changes.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Nt,{className:"w-6 h-6 text-red-600 dark:text-red-400 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Breaking Changes Detected"})]}),a.jsx("div",{className:"space-y-2",children:e.breaking_changes.map((f,g)=>a.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[a.jsxs("strong",{children:[f.type,":"]})," ",f.description,f.keyword&&a.jsxs("span",{className:"ml-2 text-xs bg-red-200 dark:bg-red-800 px-2 py-1 rounded",children:['"',f.keyword,'"']})]},g))})]})]})},YA=({type:e,level:t,showTooltip:r=!0})=>{const[n,s]=w.useState(!1),o={UI:{label:"UI",description:"User Interface complexity",colors:{HIGH:"bg-blue-600 text-white",MEDIUM:"bg-blue-400 text-white",LOW:"bg-blue-200 text-blue-900"}},DB:{label:"DB",description:"Database impact and complexity",colors:{HIGH:"bg-purple-600 text-white",MEDIUM:"bg-purple-400 text-white",LOW:"bg-purple-200 text-purple-900"}},COMPLEX:{label:"COMPLEX",description:"Overall implementation complexity",colors:{HIGH:"bg-orange-600 text-white",MEDIUM:"bg-orange-400 text-white",LOW:"bg-orange-200 text-orange-900"}},ACCESS:{label:"ACCESS",description:"Access control and permissions",colors:{HIGH:"bg-green-600 text-white",MEDIUM:"bg-green-400 text-white",LOW:"bg-green-200 text-green-900"}},SECURITY:{label:"SECURITY",description:"Security implications",colors:{HIGH:"bg-red-600 text-white",MEDIUM:"bg-red-400 text-white",LOW:"bg-red-200 text-red-900"}},PROCESS:{label:"PROCESS",description:"Business process impact",colors:{HIGH:"bg-yellow-600 text-white",MEDIUM:"bg-yellow-400 text-gray-900",LOW:"bg-yellow-200 text-yellow-900"}}}[e];if(!o)return null;const l=o.colors[t]||o.colors.LOW;return a.jsxs("div",{className:"inline-flex items-center relative",children:[a.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${l} cursor-help transition-opacity hover:opacity-90`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[o.label,":",t,r&&a.jsx(Ur,{className:"w-3 h-3 ml-1 opacity-70"})]}),r&&n&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap",children:[a.jsx("div",{className:"font-semibold",children:o.description}),a.jsxs("div",{className:"text-gray-300 mt-1",children:[t==="HIGH"&&"Significant impact - careful review needed",t==="MEDIUM"&&"Moderate impact - standard review",t==="LOW"&&"Minimal impact - routine change"]}),a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900"})]})})]})},Vu=({badges:e})=>{if(!e)return null;const t=["UI","DB","COMPLEX","ACCESS","SECURITY","PROCESS"];return a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.map(r=>{const n=e[r];return n?a.jsx(YA,{type:r,level:n},r):null})})},Hu=e=>{const t={},r=e.toLowerCase();return(r.includes("ui")||r.includes("interface")||r.includes("component"))&&(t.UI=r.includes("complex")||r.includes("major")?"HIGH":r.includes("update")||r.includes("modify")?"MEDIUM":"LOW"),(r.includes("database")||r.includes("schema")||r.includes("migration"))&&(t.DB=r.includes("migration")||r.includes("schema")?"HIGH":r.includes("query")||r.includes("index")?"MEDIUM":"LOW"),r.includes("architecture")||r.includes("refactor")||r.includes("system")?t.COMPLEX="HIGH":r.includes("feature")||r.includes("implement")?t.COMPLEX="MEDIUM":(r.includes("fix")||r.includes("update"))&&(t.COMPLEX="LOW"),(r.includes("permission")||r.includes("role")||r.includes("access"))&&(t.ACCESS=r.includes("admin")||r.includes("role")?"HIGH":"MEDIUM"),r.includes("security")||r.includes("auth")||r.includes("encrypt")?t.SECURITY=r.includes("auth")||r.includes("encrypt")?"HIGH":"MEDIUM":(r.includes("api")||r.includes("endpoint"))&&(t.SECURITY="LOW"),(r.includes("workflow")||r.includes("process")||r.includes("business"))&&(t.PROCESS=r.includes("workflow")?"HIGH":"MEDIUM"),Object.keys(t).length===0&&(t.COMPLEX="LOW"),t},ZA=({message:e,type:t="info",duration:r=5e3,onClose:n,position:s="top-right"})=>{const[i,o]=w.useState(!1),[l,c]=w.useState(!1);w.useEffect(()=>{setTimeout(()=>o(!0),10);const g=setTimeout(()=>{u()},r);return()=>clearTimeout(g)},[r]);const u=()=>{c(!0),setTimeout(()=>{o(!1),n==null||n()},300)},d={success:{icon:je,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-800 dark:text-green-200",iconColor:"text-green-600 dark:text-green-400"},error:{icon:sr,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-800 dark:text-red-200",iconColor:"text-red-600 dark:text-red-400"},warning:{icon:Nt,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",textColor:"text-yellow-800 dark:text-yellow-200",iconColor:"text-yellow-600 dark:text-yellow-400"},info:{icon:Ur,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-800 dark:text-blue-200",iconColor:"text-blue-600 dark:text-blue-400"}},h=d[t]||d.info,m=h.icon,f={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"};return a.jsx("div",{className:`
        fixed z-50 
        ${f[s]}
        transition-all duration-300 ease-in-out
        ${i&&!l?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"}
      `,children:a.jsxs("div",{className:`
          flex items-center gap-3 p-4 rounded-lg shadow-lg
          ${h.bgColor} ${h.borderColor} ${h.textColor}
          border min-w-[300px] max-w-md
        `,children:[a.jsx(m,{className:`w-5 h-5 ${h.iconColor} flex-shrink-0`}),a.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),a.jsx("button",{onClick:u,className:`${h.iconColor} hover:opacity-70 transition-opacity`,"aria-label":"Close notification",children:a.jsx(yr,{className:"w-4 h-4"})})]})})},e6=({children:e})=>{const[t,r]=w.useState([]),n=(i,o="info",l=5e3)=>{const c=Date.now(),u={id:c,message:i,type:o,duration:l};return r(d=>[...d,u]),c},s=i=>{r(o=>o.filter(l=>l.id!==i))};return w.useEffect(()=>(window.showToast=n,()=>{delete window.showToast}),[]),a.jsxs(a.Fragment,{children:[e,a.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:t.map((i,o)=>a.jsx("div",{className:"pointer-events-auto",style:{position:"fixed",top:`${20+o*80}px`,right:"20px",transition:"all 0.3s ease-in-out"},children:a.jsx(ZA,{message:i.message,type:i.type,duration:i.duration,onClose:()=>s(i.id),position:"none"})},i.id))})]})},t6=()=>{const e=(t,r="info",n=5e3)=>{if(window.showToast)return window.showToast(t,r,n);console.warn("Toast provider not found. Make sure ToastProvider is mounted.")};return{success:(t,r)=>e(t,"success",r),error:(t,r)=>e(t,"error",r),warning:(t,r)=>e(t,"warning",r),info:(t,r)=>e(t,"info",r),show:e}},r6=()=>{var Ve,we,ce;const e=Xr(),r=new URLSearchParams(e.search).get("mode")==="quick"?"quick":"comprehensive",[n,s]=w.useState(r),[i,o]=w.useState(1),[l,c]=w.useState(null),[u,d]=w.useState(!1),[h,m]=w.useState(null),[f,g]=w.useState(null),[v,b]=w.useState([]),[y,x]=w.useState(!1),[p,j]=w.useState("intelligent"),[E,N]=w.useState(0),[C,T]=w.useState(!1),[D,R]=w.useState("input"),[P,L]=w.useState(!1),[J,I]=w.useState(!0),[M,V]=w.useState(null),[z,A]=w.useState(null),[B,S]=w.useState({}),[U,re]=w.useState(!1),[_,Ne]=w.useState(!1),[tt,be]=w.useState([]),[xt,Tt]=w.useState(!1),[wr,ct]=w.useState({}),rt=t6(),[Q,Xe]=w.useState({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),[Ir,yt]=w.useState({}),[Mt,O]=w.useState({}),[Y,ae]=w.useState({1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1}),Ge=()=>n==="quick"?[{id:1,title:"Input",icon:Eg,description:"Enter your directive idea",timeEstimate:2},{id:3,title:"Classification",icon:an,description:"Strategic or Tactical",timeEstimate:1},{id:7,title:"Confirmation",icon:je,description:"Review and submit",timeEstimate:1}]:[{id:1,title:"Input & Screenshot",icon:xl,description:"Provide feedback and optional screenshot",timeEstimate:3},{id:2,title:"Intent Confirmation",icon:an,description:"Review and confirm the extracted intent",timeEstimate:2},{id:3,title:"Classification",icon:yl,description:"Review strategic vs tactical breakdown",timeEstimate:2},{id:4,title:"Impact Analysis",icon:Nt,description:"Review application impact and consistency validation",timeEstimate:4},{id:5,title:"Synthesis Review",icon:We,description:"Review aligned, required, and recommended items",timeEstimate:5},{id:6,title:"Questions",icon:Eg,description:"Answer questions to refine the directive",timeEstimate:3},{id:7,title:"Confirmation",icon:je,description:"Review and confirm the final summary",timeEstimate:2}],vt=F=>{if(F<i&&l){const Z=({1:[2,3,4,5,6,7],2:[3,4,5,6,7],3:[4,5,6,7],4:[5,6,7],5:[6,7],6:[7]}[F]||[]).filter(me=>{switch(me){case 2:return l.intent_summary;case 3:return l.strat_tac;case 4:return l.impact_analysis;case 5:return l.synthesis;case 6:return l.questions;case 7:return l.final_summary;default:return!1}});if(Z.length>0){const me={2:"Intent Summary",3:"Classification",4:"Impact Analysis",5:"Synthesis",6:"Clarifying Questions",7:"Final Summary"},ke=Z.map(se=>me[se]).join(", ");rt.warning(`Editing Step ${F} may invalidate: ${ke}`,8e3),be(se=>[...se,{editedStep:F,timestamp:new Date().toISOString(),affectedSteps:Z}])}}},Fi=F=>n==="quick"?F===1?3:F===3?7:F:F<7?F+1:F,Jt=F=>{vt(F),o(F)},ut=Ge();w.useEffect(()=>{const F=()=>{const W=window.innerWidth<768;T(W)};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[l]),w.useEffect(()=>{const F=setTimeout(()=>{(Q.chairmanInput||Q.intentSummary)&&(localStorage.setItem("directiveLab_draft",JSON.stringify(Q)),g("Draft saved"),setTimeout(()=>g(null),3e3))},2e3);return()=>clearTimeout(F)},[Q]),w.useEffect(()=>{const F=localStorage.getItem("directiveLab_draft");F&&(Xe(JSON.parse(F)),g("Draft restored"),setTimeout(()=>g(null),3e3))},[]),w.useEffect(()=>{if(i===3&&(l!=null&&l.id)&&!(l!=null&&l.strat_tac)){console.log(" [STEP 3] Generating classification data...");const F=Q.intentSummary||(l==null?void 0:l.intent_summary)||"",W=["vision","strategy","long-term","transform","innovation","competitive advantage","market position","growth","expansion","culture"],te=["fix","bug","update","modify","adjust","correct","improve","enhance","optimize","refactor"];let xe=0,Z=0;const me=F.toLowerCase();W.forEach(bt=>{me.includes(bt)&&(xe+=10)}),te.forEach(bt=>{me.includes(bt)&&(Z+=10)}),xe===0&&Z===0&&(xe=50,Z=50);const ke=xe+Z,se=Math.round(xe/ke*100),Pt=100-se,dt=se>60?"This initiative focuses on strategic goals that will shape long-term direction and capabilities.":Pt>60?"This initiative addresses immediate operational needs and improvements.":"This initiative balances both strategic vision and tactical execution needs.",Ts={strat_tac:{strategic_pct:se,tactical_pct:Pt,rationale:dt,generated_at:new Date().toISOString()}};c(bt=>({...bt,...Ts})),console.log(" [STEP 3] Classification data generated locally")}},[i,l,Q.intentSummary]),w.useEffect(()=>{var F;if(i===4&&(l!=null&&l.id)&&!(l!=null&&l.impact_analysis)){console.log(" [STEP 4] Generating impact analysis data...");const W=Q.intentSummary||(l==null?void 0:l.intent_summary)||"",te=W.toLowerCase(),xe={dashboard:[{name:"Dashboard",risk_level:"medium",confidence:.8,dependencies:["MetricsCard","ChartComponent"]},{name:"DashboardCard",risk_level:"low",confidence:.7,dependencies:["UI Components"]},{name:"MetricsCard",risk_level:"low",confidence:.6,dependencies:["Data Fetcher"]}],form:[{name:"Form",risk_level:"medium",confidence:.9,dependencies:["Input","Button","Validation"]},{name:"Input",risk_level:"low",confidence:.8,dependencies:["Event Handlers"]},{name:"Button",risk_level:"low",confidence:.9,dependencies:["UI Components"]},{name:"Validation",risk_level:"medium",confidence:.7,dependencies:["Form State"]}],navigation:[{name:"Navigation",risk_level:"medium",confidence:.8,dependencies:["Router","Auth Context"]},{name:"Sidebar",risk_level:"low",confidence:.7,dependencies:["Navigation"]},{name:"Menu",risk_level:"low",confidence:.6,dependencies:["Navigation"]}],table:[{name:"Table",risk_level:"medium",confidence:.8,dependencies:["Data Fetcher","Pagination"]},{name:"DataGrid",risk_level:"high",confidence:.9,dependencies:["Table","Virtual Scroller"]}],modal:[{name:"Modal",risk_level:"medium",confidence:.8,dependencies:["Portal","Focus Trap"]},{name:"Dialog",risk_level:"medium",confidence:.7,dependencies:["Modal"]},{name:"Overlay",risk_level:"low",confidence:.6,dependencies:["Portal"]}],auth:[{name:"Auth",risk_level:"high",confidence:.9,dependencies:["UserContext","Token Manager"]},{name:"Login",risk_level:"high",confidence:.8,dependencies:["Auth","Form"]},{name:"UserContext",risk_level:"high",confidence:.9,dependencies:["State Management"]}],theme:[{name:"ThemeProvider",risk_level:"medium",confidence:.8,dependencies:["CSS Variables","Context API"]},{name:"Dark Mode",risk_level:"medium",confidence:.7,dependencies:["ThemeProvider"]}],api:[{name:"API Client",risk_level:"high",confidence:.9,dependencies:["HTTP Service","Error Handler"]},{name:"Data Fetcher",risk_level:"medium",confidence:.8,dependencies:["API Client"]},{name:"WebSocket",risk_level:"high",confidence:.7,dependencies:["Connection Manager"]}]},Z=[];Object.entries(xe).forEach(([de,Qr])=>{(te.includes(de)||te.includes(de.replace(/[aeiou]/gi,""))||Qr.some(No=>te.includes(No.name.toLowerCase())))&&Z.push(...Qr)}),Z.length===0&&Z.push({name:"UI Components",risk_level:"low",confidence:.5,dependencies:["React Components"]},{name:"State Management",risk_level:"medium",confidence:.6,dependencies:["React Hooks"]},{name:"Event Handlers",risk_level:"low",confidence:.7,dependencies:["DOM Events"]});const me=["database","auth","security","payment","migration","breaking","major"],ke=["api","integration","workflow","validation","performance"];let se="Low",Pt="This change appears to be primarily cosmetic or minor functionality enhancement.";me.some(de=>te.includes(de))?(se="High",Pt="This change affects critical system components that could impact security, data integrity, or core functionality."):ke.some(de=>te.includes(de))&&(se="Medium",Pt="This change affects system integrations or business logic that requires careful testing and validation.");const dt=[{category:"Design System",status:"compliant",details:"Change adheres to existing design tokens and component patterns"},{category:"Accessibility",status:se==="High"?"review_required":"compliant",details:se==="High"?"WCAG compliance review needed for this change":"No accessibility concerns identified"},{category:"Performance",status:te.includes("performance")?"improvement":"neutral",details:te.includes("performance")?"Change should improve application performance":"No significant performance impact expected"},{category:"Security",status:me.some(de=>te.includes(de))?"review_required":"compliant",details:me.some(de=>te.includes(de))?"Security review required before implementation":"No security concerns identified"}],Ts={database:3,migration:4,api:2,auth:3,integration:2,ui:1,style:.5,text:.5};let bt=1;Object.entries(Ts).forEach(([de,Qr])=>{te.includes(de)&&(bt+=Qr)});const Ps=bt<=2?"1-2 days":bt<=4?"3-5 days":bt<=6?"1-2 weeks":"2-4 weeks",jo=Math.min(100,Math.round(Z.length*10+bt*5+(se==="High"?30:se==="Medium"?15:5))),So=Math.round(bt*10)/10,As={affected_components:Z.slice(0,8),risk_level:se.toLowerCase(),risk_rationale:Pt,impact_score:jo,effort_multiplier:So,estimated_effort:Math.ceil(bt),estimated_timeline:Ps,consistency_validation:dt,recommendations:[{type:"Testing",description:`Ensure comprehensive testing for ${Z.length} affected components`,effort_reduction:"15-20%"},{type:"Documentation",description:"Update component documentation and integration guides",effort_reduction:"10-15%"}],mitigation_strategies:["Implement feature flags to control rollout","Create comprehensive test suite before deployment","Monitor performance metrics during implementation","Prepare rollback strategy for critical issues"],generated_at:new Date().toISOString()};se==="High"&&(As.breaking_changes=[{type:"API Change",description:"Potential modifications to component interfaces",keyword:((F=te.match(/(auth|api|database)/))==null?void 0:F[0])||"system"}]);const Ui={};dt.forEach(de=>{const Qr=de.status==="compliant"?85:de.status==="improvement"?95:de.status==="review_required"?25:de.status==="warning"?60:75;Ui[de.category.toLowerCase().replace(" ","_")]=Qr});const Bi={passed:!dt.some(de=>de.status==="review_required"),blocking_issues:dt.filter(de=>de.status==="review_required").map(de=>({message:`${de.category}: ${de.details}`,suggestion:de.status==="review_required"?"Consider professional review before implementation":null})),warnings:dt.filter(de=>de.status==="warning"),score:Math.round(dt.filter(de=>de.status==="compliant"||de.status==="improvement").length/dt.length*100),category_scores:Ui,recommendations:dt.filter(de=>de.status==="improvement"||de.status==="compliant").map(de=>({message:de.details,priority:de.status==="improvement"?"medium":"low"}))};V(As),A(Bi);const Vi={skeptical_assessment:[`Directive "${W.slice(0,50)}..." may have hidden complexities not immediately apparent`,"Resource estimates are often underestimated by 40-60% in similar projects","User requirements frequently change after initial implementation begins","Integration points with existing systems pose higher risk than anticipated"],potential_blockers:["Insufficient technical specifications may delay development","Dependency on external APIs or services may introduce instability","Browser compatibility issues may emerge during testing","Performance impact on larger datasets may require architectural changes"],risk_factors:{technical_debt:se==="High"?"Significant":"Moderate",change_resistance:"Medium",rollback_difficulty:Ps.includes("week")?"Low":"High",maintenance_overhead:`${se} ongoing maintenance burden expected`},recommendations:["Consider phased implementation approach to mitigate risks","Establish clear rollback procedures before deployment","Plan for 25% buffer time beyond initial estimates","Document all assumptions and validate with stakeholders"]};ct(Vi),c(de=>({...de,impact_analysis:As,consistency_validation:Bi,critical_analysis:Vi})),console.log(" [STEP 4] Impact analysis data generated locally"),console.log(" [STEP 4] Risk Level:",se),console.log(" [STEP 4] Components affected:",Z.length),console.log(" [STEP 4] Estimated timeline:",Ps)}},[i,l,Q.intentSummary]),w.useEffect(()=>{var F,W;if(i===5&&(l!=null&&l.id)&&((F=l==null?void 0:l.gate_status)!=null&&F.synthesis_reviewed&&re(!0),!(l!=null&&l.synthesis))){console.log(" [STEP 5] Generating synthesis data...");const te=(l==null?void 0:l.intent_summary)||Q.intentSummary||"",xe=(l==null?void 0:l.strat_tac)||{},Z=(l==null?void 0:l.impact_analysis)||{},me=[],ke=[],se=[];(te.toLowerCase().includes("dark mode")||te.toLowerCase().includes("theme"))&&(me.push("UI theming system already supports dark/light mode switching"),me.push("CSS variables are in place for theme customization")),(te.toLowerCase().includes("dashboard")||te.toLowerCase().includes("ui"))&&(me.push("Component architecture supports modular UI updates"),me.push("Existing design system can be extended")),xe.strategic_pct>50&&(ke.push("Architecture review and approval from technical lead"),ke.push("Comprehensive testing strategy for new features"),ke.push("Documentation updates for significant changes")),((Z==null?void 0:Z.risk_level)==="High"||(Z==null?void 0:Z.risk_level)==="Critical")&&(ke.push("Risk mitigation plan implementation"),ke.push("Rollback strategy preparation")),te.toLowerCase().includes("performance")&&ke.push("Performance benchmarking before and after implementation"),(te.toLowerCase().includes("security")||te.toLowerCase().includes("auth"))&&ke.push("Security audit and penetration testing"),xe.tactical_pct>60&&(se.push("Incremental deployment with feature flags"),se.push("A/B testing for user-facing changes")),((W=Z==null?void 0:Z.affected_components)==null?void 0:W.length)>5&&(se.push("Phased implementation to minimize disruption"),se.push("Component isolation testing")),se.push("User acceptance testing with stakeholder group"),se.push("Performance monitoring post-deployment"),me.length===0&&(me.push("Existing infrastructure supports proposed changes"),me.push("Current tooling and frameworks are compatible")),ke.length===0&&(ke.push("Standard code review process"),ke.push("Unit and integration test coverage")),se.length===0&&(se.push("Progressive rollout strategy"),se.push("User feedback collection mechanism"));const Pt={synthesis:{aligned:me,required:ke,recommended:se,generated_at:new Date().toISOString()}};console.log(" [STEP 5] Synthesis generated:",Pt),c(dt=>({...dt,...Pt}))}},[i,l,Q.intentSummary]),w.useEffect(()=>{var F;if(i===6&&(l!=null&&l.id)&&(l==null?void 0:l.questions)===void 0){console.log(" [STEP 6] Generating clarifying questions...");const W=(l==null?void 0:l.intent_summary)||Q.intentSummary||"",te=(l==null?void 0:l.strat_tac)||{},xe=(l==null?void 0:l.synthesis)||{},Z=[];(W.toLowerCase().includes("ui")||W.toLowerCase().includes("interface"))&&(Z.push({text:"What specific UI components or pages should be affected by these changes?",context:"Help us scope the implementation correctly"}),Z.push({text:"Do you have any specific design preferences or brand guidelines to follow?",context:"Ensures visual consistency with your requirements"})),te.strategic_pct>60&&(Z.push({text:"What is the expected timeline for this strategic initiative?",context:"Helps with resource allocation and planning"}),Z.push({text:"Are there any dependencies or prerequisites we should be aware of?",context:"Identifies potential blockers early"})),(F=xe.required)!=null&&F.some(ke=>ke.includes("performance"))&&Z.push({text:"What are your specific performance targets or requirements?",context:"Define measurable success criteria"}),(W.toLowerCase().includes("data")||W.toLowerCase().includes("database"))&&Z.push({text:"What data retention and backup policies should be considered?",context:"Ensures compliance with data governance"}),Z.length<2&&Z.push({text:"Are there any specific edge cases or scenarios we should consider?",context:"Helps identify potential issues early"});const me={questions:Z.length>0?Z:[],questions_generated_at:new Date().toISOString()};console.log(" [STEP 6] Questions generated:",me),c(ke=>({...ke,...me}))}},[i,l,Q.intentSummary]),w.useEffect(()=>{var F,W,te;if(i===7&&(l!=null&&l.id)&&!(l!=null&&l.final_summary)){console.log(" [STEP 7] Generating final summary...");const xe=(l==null?void 0:l.intent_summary)||Q.intentSummary||"",Z=(l==null?void 0:l.strat_tac)||{},me=(l==null?void 0:l.impact_analysis)||{},ke=(l==null?void 0:l.synthesis)||{};let se=`This directive focuses on: ${xe}. `;Z.strategic_pct>60?se+=`This is primarily a strategic initiative (${Z.strategic_pct}% strategic) that will shape long-term architecture. `:se+=`This is primarily a tactical improvement (${Z.tactical_pct}% tactical) focusing on immediate enhancements. `,((F=me.affected_components)==null?void 0:F.length)>0&&(se+=`The implementation will affect ${me.affected_components.length} components with ${me.risk_level||"moderate"} risk level. `),((W=ke.required)==null?void 0:W.length)>0&&(se+=`Key requirements include: ${ke.required[0]}. `),((te=ke.recommended)==null?void 0:te.length)>0&&(se+=`Recommended approach: ${ke.recommended[0]}. `),me.effort_estimate&&(se+=`Estimated effort: ${me.effort_estimate}. `),se+="Upon approval, this directive will be converted into a formal PRD and assigned to the implementation team.";const Pt={final_summary:se,final_summary_generated_at:new Date().toISOString()};console.log(" [STEP 7] Final summary generated:",Pt),c(dt=>({...dt,...Pt}))}},[i,l,Q.intentSummary]),w.useEffect(()=>{i===2&&Q.intentSummary&&setTimeout(()=>{const F=document.querySelector('textarea[name="intentSummary"]');F&&(F.style.height="auto",F.style.height=Math.min(F.scrollHeight,300)+"px")},100)},[Q.intentSummary,i]);const zi=F=>F.trim()?F.length<20?(yt(W=>({...W,chairmanInput:"Please provide more detailed feedback (min 20 characters)"})),O(W=>({...W,chairmanInput:!1})),!1):(yt(W=>({...W,chairmanInput:null})),O(W=>({...W,chairmanInput:!0})),!0):(yt(W=>({...W,chairmanInput:"Feedback is required"})),O(W=>({...W,chairmanInput:!1})),!1),$=F=>{if(!F)return!0;try{return new URL(F),yt(W=>({...W,screenshotUrl:null})),O(W=>({...W,screenshotUrl:!0})),!0}catch{return yt(W=>({...W,screenshotUrl:"Please enter a valid URL"})),O(W=>({...W,screenshotUrl:!1})),!1}},K=async()=>{var F,W;if(console.log(" [STEP 1] Starting feedback submission"),console.log(" [STEP 1] Form data:",{feedback:((F=Q.chairmanInput)==null?void 0:F.substring(0,50))+"...",screenshotUrl:Q.screenshotUrl}),!!zi(Q.chairmanInput)){d(!0),m(null);try{const te=await fetch("/api/sdip/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:Q.chairmanInput,screenshot_url:Q.screenshotUrl})});if(!te.ok)throw new Error("Failed to submit feedback");const xe=await te.json();console.log(" [STEP 1] Submission created successfully"),console.log(" [STEP 1] Submission ID:",((W=xe.submission)==null?void 0:W.id)||xe.id),console.log(" [STEP 1] Full submission data:",xe);const Z=xe.submission||xe;c(Z),ae({...Y,1:!0}),o(2),g("Feedback submitted successfully!"),localStorage.removeItem("directiveLab_draft"),Z.id?(console.log(" [STEP 2] Triggering intent generation for submission:",Z.id),await k(Z.id,2,{feedback:Q.chairmanInput,chairman_input:Q.chairmanInput})):console.error(" [STEP 1] No submission ID received!")}catch(te){m(te.message)}finally{d(!1)}}},k=async(F,W,te)=>{console.log(` [STEP ${W}] Updating submission: ${F}`),console.log(` [STEP ${W}] Step data:`,te);try{const xe=await fetch(`/api/sdip/submissions/${F}/step/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});if(!xe.ok)throw new Error(`Failed to update step ${W}`);const Z=await xe.json();console.log(` [STEP ${W}] Update successful`),console.log(` [STEP ${W}] Response data:`,Z);const me=Z.submission||Z;return c(me),W===2&&me.intent_summary&&(console.log(" [STEP 2] Intent summary received:",me.intent_summary.substring(0,50)+"..."),Xe({...Q,intentSummary:me.intent_summary})),me}catch(xe){throw console.error(` [STEP ${W}] Update failed:`,xe),console.error(` [STEP ${W}] Error details:`,xe.message),m(xe.message),xe}},H=async F=>{var W,te,xe,Z,me;console.log(` [STEP ${F}] Completing step`),console.log(` [STEP ${F}] Current submission:`,l),d(!0),m(null);try{if(l&&l.id&&F>1){console.log(` [STEP ${F}] Preparing step data for submission: ${l.id}`);let se={};switch(F){case 2:se={intent_summary:Q.intentSummary};break;case 3:se={strategic_pct:((W=l.strat_tac)==null?void 0:W.strategic_pct)||50,tactical_pct:((te=l.strat_tac)==null?void 0:te.tactical_pct)||50,override:Q.stratTacOverride};break;case 4:se={impact_analysis:M,consistency_validation:z};break;case 5:se={aligned:((xe=l.synthesis)==null?void 0:xe.aligned)||[],required:((Z=l.synthesis)==null?void 0:Z.required)||[],recommended:((me=l.synthesis)==null?void 0:me.recommended)||[],synthesis_reviewed:U};break;case 6:se={questions_answers:Q.questionAnswers};break;case 7:se={final_summary:l.final_summary||Q.intentSummary};break}console.log(` [STEP ${F}] Step data prepared:`,se),await k(l.id,F,se)}else console.log(` [STEP ${F}] No submission ID, skipping update`);ae({...Y,[F]:!0});const ke=Fi(F);ke!==F?(o(ke),g(`Step ${F} completed!`)):(g("Directive submitted successfully!"),setTimeout(()=>{Xe({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},summaryConfirmed:!1}),o(1),ae({}),c(null),V(null),A(null)},2e3))}catch(ke){m(ke.message)}finally{d(!1)}},ne=async()=>{console.log(" [STEP 7] Saving submission and closing"),d(!0),m(null);try{if(l&&l.id){const F={final_summary:l.final_summary||Q.intentSummary,status:"ready",completed_steps:[1,2,3,4,5,6,7]};await k(l.id,7,F),ae({...Y,7:!0}),g("Submission saved successfully! You can find it in Recent Submissions."),setTimeout(()=>{Xe({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),o(1),ae({}),c(null),V(null),A(null),R("submissions")},2e3)}else throw new Error("No submission to save")}catch(F){m(F.message)}finally{d(!1)}},pe=async()=>{console.log(" [STEP 7] Submitting directive to create Strategic Directive"),d(!0),m(null);try{if(l&&l.id){const te={final_summary:l.final_summary||Q.intentSummary,status:"submitted",completed_steps:[1,2,3,4,5,6,7]};await k(l.id,7,te)}const F=await fetch("/api/sdip/create-strategic-directive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_id:l.id})});if(!F.ok){const te=await F.json();throw new Error(te.error||"Failed to create Strategic Directive")}const W=await F.json();ae({...Y,7:!0}),g(`Strategic Directive created successfully! ID: ${W.sd_id}`),setTimeout(()=>{Xe({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),o(1),ae({}),c(null),V(null),A(null),R("submissions")},3e3)}catch(F){m(F.message)}finally{d(!1)}},he=F=>{var W,te,xe,Z,me,ke,se,Pt,dt,Ts,bt,Ps,jo,So,As,Ui,Bi,Vi,de,Qr,No,Ym;switch(F){case 1:return a.jsxs("div",{className:"space-y-3",children:[a.jsx(Xo,{type:"textarea",label:"Chairman Feedback",name:"chairmanInput",value:Q.chairmanInput,onChange:ie=>{Xe({...Q,chairmanInput:ie.target.value}),zi(ie.target.value)},placeholder:"Enter your feedback about the EHG application...",required:!0,rows:5,minLength:20,maxLength:1e3,showCharCount:!0,error:Ir.chairmanInput,success:Mt.chairmanInput,helpText:"Provide detailed feedback about what you'd like to improve or add"}),a.jsx(Xo,{type:"url",label:"Screenshot URL",name:"screenshotUrl",value:Q.screenshotUrl,onChange:ie=>{Xe({...Q,screenshotUrl:ie.target.value}),$(ie.target.value)},placeholder:"https://example.com/screenshot.png",error:Ir.screenshotUrl,success:Mt.screenshotUrl,helpText:"Optional: Add a screenshot URL to provide visual context",icon:xl}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Le,{onClick:K,disabled:u||!Q.chairmanInput.trim(),loading:u,variant:"primary",icon:Zl,iconPosition:"right",children:"Submit & Analyze"}),a.jsx(Le,{onClick:()=>{localStorage.setItem("directiveLab_draft",JSON.stringify(Q)),g("Draft saved")},variant:"secondary",icon:ys,children:"Save Draft"})]})]});case 2:return a.jsxs("div",{className:"space-y-3",children:[a.jsx(Xo,{type:"textarea",label:"Extracted Intent Summary",name:"intentSummary",value:Q.intentSummary,onChange:ie=>{Xe({...Q,intentSummary:ie.target.value}),ie.target&&(ie.target.style.height="auto",ie.target.style.height=Math.min(ie.target.scrollHeight,300)+"px")},rows:3,style:{minHeight:"80px",maxHeight:"300px",resize:"vertical",overflow:"auto"},onFocus:ie=>{ie.target.style.height="auto",ie.target.style.height=Math.min(ie.target.scrollHeight,300)+"px"},helpText:"Review and edit if needed to accurately capture your intent",success:Q.intentSummary.length>0}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Le,{onClick:()=>Jt(1),variant:"ghost",icon:wn,children:"Back"}),a.jsx(Le,{onClick:()=>H(2),disabled:u||!Q.intentSummary,loading:u,variant:"success",icon:as,children:"Confirm Intent"})]})]});case 3:return a.jsxs("div",{className:"space-y-3",children:[l!=null&&l.strat_tac?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-around mb-3",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[((W=Q.stratTacOverride)==null?void 0:W.strategic_pct)??l.strat_tac.strategic_pct,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Strategic"})]}),a.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[((te=Q.stratTacOverride)==null?void 0:te.tactical_pct)??l.strat_tac.tactical_pct,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Tactical"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg",children:[a.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Classification Rationale:"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:((xe=Q.stratTacOverride)==null?void 0:xe.rationale)||l.strat_tac.rationale})]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(HE,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mr-2"}),a.jsx("span",{className:"font-medium text-yellow-900 dark:text-yellow-100 text-sm",children:"Adjust Classification (Optional)"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx("span",{children:"More Tactical"}),a.jsx("span",{children:"More Strategic"})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:((Z=Q.stratTacOverride)==null?void 0:Z.strategic_pct)??l.strat_tac.strategic_pct,onChange:ie=>{const at=parseInt(ie.target.value),Rr=100-at;let Xt="";at>70?Xt="Manually classified as highly strategic - focusing on long-term architecture and business objectives.":at>50?Xt="Manually classified as moderately strategic - balancing long-term goals with immediate improvements.":at>30?Xt="Manually classified as balanced - containing both strategic elements and tactical improvements.":Xt="Manually classified as primarily tactical - focusing on immediate fixes and improvements.",Xe({...Q,stratTacOverride:{strategic_pct:at,tactical_pct:Rr,rationale:Xt,manually_adjusted:!0,adjusted_at:new Date().toISOString()}})},className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 \r
                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 \r
                        [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer\r
                        [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 \r
                        [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none`}),a.jsxs("div",{className:"flex justify-between mt-1",children:[a.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[((me=Q.stratTacOverride)==null?void 0:me.tactical_pct)??l.strat_tac.tactical_pct,"% Tactical"]}),a.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:[((ke=Q.stratTacOverride)==null?void 0:ke.strategic_pct)??l.strat_tac.strategic_pct,"% Strategic"]})]})]}),Q.stratTacOverride&&a.jsx(Le,{onClick:()=>{Xe({...Q,stratTacOverride:null})},variant:"ghost",size:"small",icon:xr,children:"Reset to Auto-Classification"})]})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyzing strategic vs tactical breakdown..."})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Le,{onClick:()=>Jt(2),variant:"ghost",icon:wn,children:"Back"}),a.jsx(Le,{onClick:()=>H(3),disabled:u,loading:u,variant:"success",icon:as,children:Q.stratTacOverride?"Accept Adjusted Classification":"Accept Classification"})]})]});case 4:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Application Impact Analysis"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the comprehensive analysis of how your proposed changes will affect the application, including component dependencies, risk assessment, and consistency validation."})]}),a.jsx(QA,{impactAnalysis:M,consistencyValidation:z,submission:l}),z&&!z.passed&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(mn,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),a.jsx("span",{className:"font-medium text-red-900 dark:text-red-100",children:"Consistency Issues Found"})]}),a.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 mb-3",children:[((se=z.blocking_issues)==null?void 0:se.length)||0," blocking issues must be resolved before proceeding."]}),a.jsx("div",{className:"text-xs text-red-700 dark:text-red-300",children:"Review the Impact Analysis above for detailed recommendations and mitigation strategies."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Le,{onClick:()=>Jt(3),variant:"ghost",icon:wn,children:"Back"}),a.jsx(Le,{onClick:()=>H(4),disabled:u||z&&!z.passed,loading:u,variant:(z==null?void 0:z.passed)===!1?"secondary":"success",icon:(z==null?void 0:z.passed)===!1?Nt:as,children:(z==null?void 0:z.passed)===!1?"Acknowledge Risks & Continue":"Accept Impact Analysis"})]})]});case 5:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Synthesis Review"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the synthesized requirements and recommendations for your directive."})]}),l!=null&&l.synthesis?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(je,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),a.jsxs("span",{className:"font-medium text-green-900 dark:text-green-100",children:["Aligned Requirements (",((Pt=l.synthesis.aligned)==null?void 0:Pt.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(dt=l.synthesis.aligned)==null?void 0:dt.map((ie,at)=>{const Rr=typeof ie=="object"?ie.badges:Hu(ie),Xt=typeof ie=="object"?ie.text:ie;return a.jsx("li",{className:"text-sm text-green-800 dark:text-green-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-green-600 dark:text-green-400 mr-2",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:Xt}),a.jsx(Vu,{badges:Rr})]})]})},at)})})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Nt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),a.jsxs("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:["Required Changes (",((Ts=l.synthesis.required)==null?void 0:Ts.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(bt=l.synthesis.required)==null?void 0:bt.map((ie,at)=>{const Rr=typeof ie=="object"?ie.badges:Hu(ie),Xt=typeof ie=="object"?ie.text:ie;return a.jsx("li",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mr-2",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:Xt}),a.jsx(Vu,{badges:Rr})]})]})},at)})})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Ur,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),a.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:["Recommended Enhancements (",((Ps=l.synthesis.recommended)==null?void 0:Ps.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(jo=l.synthesis.recommended)==null?void 0:jo.map((ie,at)=>{const Rr=typeof ie=="object"?ie.badges:Hu(ie),Xt=typeof ie=="object"?ie.text:ie;return a.jsx("li",{className:"text-sm text-blue-800 dark:text-blue-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:Xt}),a.jsx(Vu,{badges:Rr})]})]})},at)})})]})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Synthesizing requirements and recommendations..."})]})}),(l==null?void 0:l.synthesis)&&a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:U,onChange:ie=>re(ie.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"I have reviewed the synthesis analysis"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["I understand the aligned requirements (",((So=l.synthesis.aligned)==null?void 0:So.length)||0,"), required changes (",((As=l.synthesis.required)==null?void 0:As.length)||0,"), and recommended enhancements (",((Ui=l.synthesis.recommended)==null?void 0:Ui.length)||0,") for this directive."]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Le,{onClick:()=>Jt(4),variant:"ghost",icon:wn,children:"Back"}),a.jsx(Le,{onClick:()=>H(5),disabled:u||!(l!=null&&l.synthesis)||!U,loading:u,variant:"success",icon:as,children:"Accept Synthesis"})]})]});case 6:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Clarifying Questions"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Answer any clarifying questions about your directive to ensure accurate implementation."})]}),l!=null&&l.questions&&l.questions.length>0?a.jsx("div",{className:"space-y-3",children:l.questions.map((ie,at)=>{var Rr;return a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start mb-2",children:[a.jsx(Pu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2 mt-0.5"}),a.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:ie.text})]}),a.jsx(Xo,{type:"textarea",name:`question_${at}`,value:((Rr=Q.questionAnswers)==null?void 0:Rr[`question_${at}`])||"",onChange:Xt=>{Xe({...Q,questionAnswers:{...Q.questionAnswers,[`question_${at}`]:Xt.target.value}})},placeholder:"Your answer...",rows:2,helpText:ie.context})]},at)})}):(l==null?void 0:l.questions)===void 0?a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generating clarifying questions..."})]})}):a.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(je,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),a.jsx("p",{className:"text-green-800 dark:text-green-200",children:"No clarifying questions needed - your directive is clear!"})]})}),(l==null?void 0:l.questions)!==void 0&&a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:Q.questionsReviewed||!1,onChange:ie=>Xe({...Q,questionsReviewed:ie.target.checked}),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:((Bi=l==null?void 0:l.questions)==null?void 0:Bi.length)>0?"I have provided complete answers to all questions":"I confirm no additional questions are needed"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:((Vi=l==null?void 0:l.questions)==null?void 0:Vi.length)>0?`All ${l.questions.length} clarifying questions have been answered to provide context for implementation.`:"The directive is sufficiently clear and no additional clarification is required."})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Le,{onClick:()=>Jt(5),variant:"ghost",icon:wn,children:"Back"}),a.jsx(Le,{onClick:()=>H(6),disabled:u||!Q.questionsReviewed,loading:u,variant:"success",icon:as,children:((de=l==null?void 0:l.questions)==null?void 0:de.length)>0?"Submit Answers":"Continue"})]})]});case 7:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Final Confirmation"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the final summary and choose your next action."})]}),l!=null&&l.final_summary?a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Directive Summary"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:l.final_summary})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[((Qr=l.strat_tac)==null?void 0:Qr.strategic_pct)||0,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Strategic"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((No=l.impact_analysis)==null?void 0:No.risk_level)||"Low"}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Risk Level"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:((Ym=l.impact_analysis)==null?void 0:Ym.effort_estimate)||"Medium"}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Effort"})]})]}),a.jsxs("div",{className:"mt-4 flex gap-2",children:[a.jsx(Le,{onClick:()=>{navigator.clipboard.writeText(l.final_summary),rt.success("Summary copied to clipboard")},variant:"ghost",size:"small",icon:jm,children:"Copy Summary"}),a.jsx(Le,{onClick:async()=>{d(!0);try{const ie=await fetch(`/api/directive-submissions/${l.id}/regenerate-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(ie.ok){const at=await ie.json();c({...l,final_summary:at.final_summary}),rt.success("Summary regenerated successfully")}}catch{rt.error("Failed to regenerate summary")}finally{d(!1)}},variant:"ghost",size:"small",icon:xr,disabled:u,children:"Regenerate"})]}),a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:a.jsxs("label",{className:"flex items-start cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:Q.finalConfirmed||!1,onChange:ie=>Xe({...Q,finalConfirmed:ie.target.checked}),className:"mt-0.5 mr-2"}),a.jsx("span",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:"I confirm that this directive accurately represents my requirements."})]})})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preparing final summary..."})]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Choose Your Next Action"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(ys,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Save & Close:"})," Save for later review or combine with other submissions"]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Tg,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Submit Directive:"})," Create Strategic Directive and begin LEO Protocol workflow"]})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(Le,{onClick:()=>Jt(6),variant:"ghost",icon:wn,className:"order-3 sm:order-1",children:"Back"}),a.jsxs("div",{className:"flex gap-3 order-1 sm:order-2 flex-1",children:[a.jsx(Le,{onClick:ne,disabled:u||!Q.finalConfirmed,loading:u,variant:"secondary",icon:ys,className:"flex-1",children:"Save & Close"}),a.jsx(Le,{onClick:pe,disabled:u||!Q.finalConfirmed,loading:u,variant:"primary",icon:Tg,className:"flex-1",children:"Submit Directive"})]})]})]});default:return a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Step content for Step ",F," coming soon..."]})}},_e=()=>a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 py-1.5 px-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(Le,{onClick:()=>Jt(Math.max(1,i-1)),disabled:i===1,variant:"ghost",size:"small",icon:wn,children:"Previous"}),a.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Step ",i," of ",ut.length]}),a.jsx(Le,{onClick:()=>H(i),disabled:!Y[i-1]&&i>1,variant:"primary",size:"small",icon:Zl,iconPosition:"right",children:"Next"})]})});return a.jsx(e6,{children:a.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Directive Lab"}),a.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s("quick"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${n==="quick"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Quick Mode"}),a.jsx("button",{onClick:()=>s("comprehensive"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${n==="comprehensive"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Comprehensive"})]})]}),a.jsx(Le,{onClick:()=>L(!P),variant:"ghost",size:"small",icon:Pu,ariaLabel:"Toggle help",children:"Help"})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Step:"}),a.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:((Ve=ut[i-1])==null?void 0:Ve.title)||"Unknown"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",i," of ",ut.length,")"]})]})]})}),P&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800 px-4 py-2",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Pu,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2"}),a.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[a.jsx("p",{className:"font-medium mb-0.5",children:"Getting Started:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-blue-800 dark:text-blue-200",children:[a.jsx("li",{children:"Provide detailed feedback about what you want to improve"}),a.jsx("li",{children:"Each step builds on the previous one"}),a.jsx("li",{children:"Your progress is automatically saved"}),a.jsx("li",{children:"You can navigate back to previous steps at any time"})]})]})]})})}),f&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-green-800 dark:text-green-200 text-sm",children:[a.jsx(je,{className:"w-4 h-4 mr-2"}),f]})}),h&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-red-800 dark:text-red-200 text-sm",children:[a.jsx(sr,{className:"w-4 h-4 mr-2"}),h]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx(KA,{steps:ut,currentStep:i,orientation:"horizontal",showTimeEstimates:!C,compact:!0,hideLabelsOnMobile:!0,onStepClick:Jt})})}),a.jsx(_e,{}),a.jsxs("div",{className:"flex-1 px-4 py-2 flex flex-col min-h-0",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg shadow-sm border border-gray-200 dark:border-gray-700 border-b-0 flex-shrink-0",children:a.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{onClick:()=>R("input"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${D==="input"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xl,{className:"w-4 h-4"}),"Input & Screenshot"]}),D==="input"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]}),a.jsxs("button",{onClick:()=>R("submissions"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${D==="submissions"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(We,{className:"w-4 h-4"}),"Recent Submissions",l&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),D==="submissions"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-b-lg shadow-sm border border-gray-200 dark:border-gray-700 border-t-0 flex-1 relative flex flex-col overflow-hidden",children:[a.jsxs("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out flex flex-col ${D==="input"?"translate-x-0 opacity-100":"translate-x-full opacity-0 pointer-events-none"}`,children:[a.jsxs("div",{className:"mb-3 flex-shrink-0",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((we=ut[i-1])==null?void 0:we.title)||"Step "+i}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:((ce=ut[i-1])==null?void 0:ce.description)||"Loading..."})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:he(i)})]}),a.jsx("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out ${D==="submissions"?"translate-x-0 opacity-100":"-translate-x-full opacity-0 pointer-events-none"}`,children:a.jsxs("div",{className:"h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Submissions"}),a.jsx(Le,{onClick:()=>N(F=>F+1),variant:"ghost",size:"small",icon:xr,ariaLabel:"Refresh submissions"})]}),a.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:a.jsx(JA,{onSubmissionSelect:F=>{c(F),F&&setTimeout(()=>R("input"),300)},selectedSubmissionId:l==null?void 0:l.id,onSelectionChange:b,refreshTrigger:E,onGroupCreate:(F,W="intelligent")=>{b(F),j(W),x(!0)}})})]})})]})]}),y&&a.jsx(XA,{selectedSubmissions:v,combineMethod:p,onClose:()=>x(!1),onSuccess:()=>{x(!1),N(F=>F+1)}})]})})};function kx({backlogData:e=[],strategicDirectives:t=[],isCompact:r,onRefresh:n}){const{id:s}=Bf(),i=Ai(),o=Xr(),c=new URLSearchParams(o.search).get("sd"),[u,d]=w.useState({}),[h,m]=w.useState(""),[f,g]=w.useState("all"),[v,b]=w.useState(c||"all"),[y,x]=w.useState(!1),[p,j]=w.useState("all"),[E,N]=w.useState(!0),[C,T]=w.useState([]),[D,R]=w.useState({});w.useEffect(()=>{(async()=>{N(!0);try{const V=v&&v!=="all"?`/api/backlog/strategic-directives/${v}`:"/api/backlog/strategic-directives-with-items",A=await(await fetch(V)).json();if(v&&v!=="all")T(A.backlog_items||[]),R({[A.sd_id]:{sd:A,items:A.backlog_items||[]}});else{const B={};A.forEach(U=>{B[U.sd_id]={sd:U,items:U.backlog_items||[]}}),R(B);const S=A.flatMap(U=>U.backlog_items||[]);T(S)}}catch(V){console.error("Error loading backlog:",V)}finally{N(!1)}})()},[v]);const P=Object.entries(D).reduce((M,[V,z])=>{let A=z.items;if(h){const B=h.toLowerCase();A=A.filter(S=>{var U,re,_,Ne;return((U=S.backlog_title)==null?void 0:U.toLowerCase().includes(B))||((re=S.item_description)==null?void 0:re.toLowerCase().includes(B))||((_=S.backlog_id)==null?void 0:_.toLowerCase().includes(B))||((Ne=S.my_comments)==null?void 0:Ne.toLowerCase().includes(B))})}return f!=="all"&&(A=A.filter(B=>{var S;return((S=B.priority)==null?void 0:S.toLowerCase())===f.toLowerCase()})),p==="yes"?A=A.filter(B=>B.new_module===!0):p==="no"&&(A=A.filter(B=>B.new_module===!1)),A.length>0&&(M[V]={...z,items:A}),M},{}),L=M=>{if(!M)return null;const V=M.toLowerCase(),z={high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:Ss},h:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:Ss},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:An},m:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:An},low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:An},l:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:An},future:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-300",icon:Pr}},A=z[V]||z.low,B=A.icon;return a.jsxs("span",{className:`inline-flex items-center ${r?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${A.bg} ${A.text}`,children:[a.jsx(B,{className:"w-3 h-3 mr-1"}),M]})},J=M=>{d(V=>({...V,[M]:!V[M]}))};if(E)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading backlog..."})});const I=Object.values(P).reduce((M,V)=>M+V.items.length,0);return a.jsxs("div",{className:r?"p-3":"p-6",children:[a.jsxs("div",{className:r?"mb-3":"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ji,{className:r?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),a.jsx("h1",{className:r?"text-xl font-semibold":"text-2xl font-bold",children:"Backlog Management"}),a.jsxs("span",{className:`ml-3 ${r?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[I," items"]})]}),a.jsx(Pm,{onRefresh:n,isCompact:r})]}),a.jsxs("div",{className:`flex flex-wrap gap-2 ${r?"mb-3":"mb-4"}`,children:[a.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[a.jsx(Ww,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${r?"w-4 h-4":"w-5 h-5"} text-gray-400`}),a.jsx("input",{type:"text",value:h,onChange:M=>m(M.target.value),placeholder:"Search backlog items...",className:`w-full ${r?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),a.jsxs("select",{value:v,onChange:M=>b(M.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Strategic Directives"}),Object.values(D).map(({sd:M})=>a.jsx("option",{value:M.sd_id,children:M.sd_title},M.sd_id))]}),a.jsxs("select",{value:f,onChange:M=>g(M.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Priorities"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"future",children:"Future"})]}),a.jsxs("select",{value:p,onChange:M=>j(M.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Items"}),a.jsx("option",{value:"yes",children:"New Module"}),a.jsx("option",{value:"no",children:"Existing Module"})]}),a.jsxs("button",{onClick:()=>i("/backlog/new"),className:`flex items-center ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[a.jsx(Cm,{className:`${r?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Backlog Item"]})]})]}),a.jsx("div",{className:"space-y-4",children:Object.entries(P).map(([M,{sd:V,items:z}])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:`${r?"p-3":"p-4"} border-b border-gray-200 dark:border-gray-700`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:`${r?"text-base":"text-lg"} font-semibold text-gray-900 dark:text-white`,children:V.sd_title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:V.sd_id}),V.rolled_triage&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${V.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":V.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":V.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:["Triage: ",V.rolled_triage]}),V.must_have_pct!==null&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:[V.must_have_pct,"% Must-Have"]}),a.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:[z.length," items"]})]})]}),a.jsx("button",{onClick:()=>i(`/strategic-directives/${V.sd_id}`),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:a.jsx(We,{className:r?"w-4 h-4":"w-5 h-5"})})]})}),a.jsx("div",{className:r?"p-2":"p-3",children:z.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No backlog items found"}):a.jsx("div",{className:"space-y-2",children:z.map(A=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:a.jsxs("div",{className:`${r?"p-2":"p-3"} cursor-pointer`,onClick:()=>J(`${M}-${A.backlog_id}`),children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start flex-1",children:[a.jsx("div",{className:"mr-2 mt-1",children:u[`${M}-${A.backlog_id}`]?a.jsx(Zt,{className:"w-4 h-4 text-gray-400"}):a.jsx(It,{className:"w-4 h-4 text-gray-400"})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-mono text-xs text-gray-500 dark:text-gray-400",children:A.backlog_id}),a.jsx("span",{className:`${r?"text-sm":"text-base"} font-medium text-gray-900 dark:text-white`,children:A.backlog_title}),A.new_module&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:"New Module"})]})})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[L(A.priority),A.stage_number&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded",children:["Stage ",A.stage_number]})]})]}),u[`${M}-${A.backlog_id}`]&&a.jsxs("div",{className:`mt-3 ${r?"pl-5":"pl-6"} space-y-2`,children:[A.item_description&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.item_description})]}),A.my_comments&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Comments"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.my_comments})]}),A.phase&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Phase"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.phase})]}),A.description_raw&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tags"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.description_raw})]})]})]})},`${M}-${A.backlog_id}`))})})]},M))}),Object.keys(P).length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ji,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No backlog items found matching your filters"})]})]})}function n6({metrics:e,activeCount:t,totalReviews:r}){const n=[{title:"Active Reviews",value:t,icon:Pc,color:"blue",trend:null},{title:"Pass Rate",value:`${e.passRate}%`,icon:je,color:"green",trend:e.passRate>85?"up":"down",trendValue:e.passRate>85?"Good":"Needs Improvement"},{title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,icon:Pr,color:"purple",trend:e.avgTime<5e3?"up":"down",trendValue:e.avgTime<5e3?"Fast":"Slow"},{title:"False Positive Rate",value:`${e.falsePositiveRate}%`,icon:Nt,color:e.falsePositiveRate>15?"yellow":"green",trend:e.falsePositiveRate<15?"up":"down",trendValue:e.falsePositiveRate<15?"On Target":"High"},{title:"Compliance Rate",value:`${e.complianceRate}%`,icon:Si,color:e.complianceRate>=95?"green":"yellow",trend:e.complianceRate>=95?"up":"down",trendValue:`${r} total reviews`}],s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:n.map((i,o)=>{const l=i.icon,c={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400"};return a.jsxs(ge.div,{variants:s,initial:"hidden",animate:"visible",transition:{delay:o*.05},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${c[i.color]}`,children:a.jsx(l,{className:"w-5 h-5"})}),i.trend&&a.jsx("div",{className:"flex items-center space-x-1",children:i.trend==="up"?a.jsx(Ss,{className:"w-4 h-4 text-green-500"}):a.jsx(An,{className:"w-4 h-4 text-red-500"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.value}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.title}),i.trendValue&&a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:i.trendValue})]})]},i.title)})})}function s6({reviews:e,loading:t}){if(t)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Hw,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Active Reviews"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All PR reviews have been completed or there are no PRs to review."})]});const r=o=>{switch(o){case"pending":return a.jsx(Pr,{className:"w-5 h-5 text-yellow-500"});case"passed":return a.jsx(je,{className:"w-5 h-5 text-green-500"});case"failed":return a.jsx(mn,{className:"w-5 h-5 text-red-500"});case"warning":return a.jsx(Nt,{className:"w-5 h-5 text-orange-500"});default:return a.jsx(Pr,{className:"w-5 h-5 text-gray-500"})}},n=o=>{const c={security:Si,performance:Bn,database:go,testing:YE}[o]||We;return a.jsx(c,{className:"w-4 h-4"})},s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}};return a.jsx(ge.div,{variants:s,initial:"hidden",animate:"visible",className:"space-y-4",children:e.map((o,l)=>a.jsxs(ge.div,{variants:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[r(o.status),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["PR #",o.pr_number,": ",o.pr_title]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Nm,{className:"w-3 h-3"}),a.jsx("span",{children:o.branch})]}),a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Gw,{className:"w-3 h-3"}),a.jsx("span",{children:o.author})]}),o.sd_link&&a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["SD: ",o.sd_link]}),o.prd_link&&a.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["PRD: ",o.prd_link]})]})]})]}),a.jsx("a",{href:o.github_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"View on GitHub",children:a.jsx(Sm,{className:"w-5 h-5"})})]}),o.sub_agent_reviews&&o.sub_agent_reviews.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:o.sub_agent_reviews.map(c=>a.jsxs("div",{className:`
                      flex items-center space-x-2 px-3 py-2 rounded-md text-sm
                      ${c.status==="passed"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":c.status==="failed"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}
                    `,children:[n(c.sub_agent),a.jsx("span",{className:"capitalize",children:c.sub_agent})]},c.sub_agent))})]}),o.summary&&a.jsx("div",{className:"mb-4",children:a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o.summary})}),o.issues&&o.issues.length>0&&a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-md p-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:["Issues Found (",o.issues.length,")"]}),a.jsxs("ul",{className:"space-y-1",children:[o.issues.slice(0,3).map((c,u)=>a.jsxs("li",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[" ",c]},u)),o.issues.length>3&&a.jsxs("li",{className:"text-sm text-yellow-600 dark:text-yellow-500 italic",children:["... and ",o.issues.length-3," more"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["Started: ",new Date(o.created_at).toLocaleTimeString()]}),o.review_time_ms&&a.jsxs("span",{children:["Duration: ",(o.review_time_ms/1e3).toFixed(1),"s"]})]}),o.status==="pending"&&a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-600 dark:text-yellow-400",children:[a.jsx(Pr,{className:"w-3 h-3 animate-pulse"}),a.jsx("span",{children:"In Progress"})]})]})]},o.id))})}function i6({reviews:e,loading:t}){const[r,n]=w.useState(new Set);if(t)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(We,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Review History"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Review history will appear here once PR reviews are completed."})]});const s=c=>{const u=new Set(r);u.has(c)?u.delete(c):u.add(c),n(u)},i=c=>{const u={passed:{icon:je,color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",label:"Passed"},failed:{icon:mn,color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",label:"Failed"},warning:{icon:Nt,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",label:"Warning"}},d=u[c]||u.warning,h=d.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:[a.jsx(h,{className:"w-3 h-3 mr-1"}),d.label]})},o=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=c=>{if(!c)return"N/A";const u=c/1e3;if(u<60)return`${u.toFixed(1)}s`;const d=Math.floor(u/60),h=(u%60).toFixed(0);return`${d}m ${h}s`};return a.jsx("div",{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-md rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"PR Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Author"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Issues"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Links"}),a.jsx("th",{className:"relative px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"Actions"})})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(c=>{var d,h;const u=r.has(c.id);return a.jsxs(Vr.Fragment,{children:[a.jsxs(ge.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["PR #",c.pr_number]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:c.pr_title}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(Nm,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.branch})]})]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Gw,{className:"w-4 h-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:c.author})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i(c.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((d=c.issues)==null?void 0:d.length)||0})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Pr,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{children:l(c.review_time_ms)})]}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(PE,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:o(c.created_at)})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[c.github_url&&a.jsx("a",{href:c.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"View on GitHub",children:a.jsx(Sm,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[c.sd_link&&a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"SD"}),c.prd_link&&a.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"PRD"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>s(c.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:u?a.jsx(ec,{className:"w-5 h-5"}):a.jsx(Zt,{className:"w-5 h-5"})})})]}),u&&a.jsx("tr",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsx("td",{colSpan:"7",className:"px-6 py-4",children:a.jsxs("div",{className:"space-y-4",children:[c.summary&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Review Summary"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.summary})]}),c.sub_agent_reviews&&c.sub_agent_reviews.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:c.sub_agent_reviews.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm capitalize text-gray-700 dark:text-gray-300",children:m.sub_agent}),i(m.status)]},m.sub_agent))})]}),c.issues&&c.issues.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Issues Found"}),a.jsx("ul",{className:"space-y-1",children:c.issues.map((m,f)=>a.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",m]},f))})]}),c.metadata&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commit"}),a.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:((h=c.commit_sha)==null?void 0:h.substring(0,7))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.leo_phase||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"False Positive"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.is_false_positive?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Review ID"}),a.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:c.id.substring(0,8)})]})]})]})})})]},c.id)})})]})})}function a6({metrics:e,reviews:t}){const[r,n]=w.useState("7d"),[s,i]=w.useState("overview"),o=w.useMemo(()=>{if(!t||t.length===0)return null;const c=new Date,u={"24h":1440*60*1e3,"7d":10080*60*1e3,"30d":720*60*60*1e3},d=c-u[r],h=t.filter(g=>new Date(g.created_at)>=d),m={};h.forEach(g=>{const v=new Date(g.created_at).toLocaleDateString();m[v]||(m[v]={total:0,passed:0,failed:0,warnings:0}),m[v].total++,g.status==="passed"?m[v].passed++:g.status==="failed"?m[v].failed++:g.status==="warning"&&m[v].warnings++});const f={};return h.forEach(g=>{g.sub_agent_reviews&&g.sub_agent_reviews.forEach(v=>{f[v.sub_agent]||(f[v.sub_agent]={total:0,passed:0,failed:0,avgTime:[]}),f[v.sub_agent].total++,v.status==="passed"?f[v.sub_agent].passed++:f[v.sub_agent].failed++,v.review_time_ms&&f[v.sub_agent].avgTime.push(v.review_time_ms)})}),Object.keys(f).forEach(g=>{const v=f[g];v.passRate=(v.passed/v.total*100).toFixed(1),v.avgTime.length>0&&(v.avgTimeMs=v.avgTime.reduce((b,y)=>b+y,0)/v.avgTime.length)}),{dailyData:Object.entries(m).slice(-7),subAgentStats:f,totalReviews:h.length,passRate:h.length>0?(h.filter(g=>g.status==="passed").length/h.length*100).toFixed(1):0}},[t,r]),l=[{id:"compliance",title:"Compliance Rate",value:`${e.complianceRate}%`,target:"95%",status:e.complianceRate>=95?"good":"warning",description:"SD/PRD linkage compliance"},{id:"false-positive",title:"False Positive Rate",value:`${e.falsePositiveRate}%`,target:"<15%",status:e.falsePositiveRate<=15?"good":"warning",description:"Reviews marked as false positives"},{id:"avg-time",title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,target:"<5s",status:e.avgTime<5e3?"good":"warning",description:"Average time per review"},{id:"coverage",title:"Coverage",value:`${(o==null?void 0:o.totalReviews)||0}`,target:"PRs",status:"neutral",description:`Reviews in ${r}`}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Metrics"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("select",{value:r,onChange:c=>n(c.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[a.jsx("option",{value:"24h",children:"Last 24 Hours"}),a.jsx("option",{value:"7d",children:"Last 7 Days"}),a.jsx("option",{value:"30d",children:"Last 30 Days"})]}),a.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Export Metrics",children:a.jsx(RE,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(c=>a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.value})]}),a.jsx("div",{className:`
                p-2 rounded-lg
                ${c.status==="good"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":c.status==="warning"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}
              `,children:c.status==="good"?a.jsx(Ss,{className:"w-4 h-4"}):c.status==="warning"?a.jsx(An,{className:"w-4 h-4"}):a.jsx(Pc,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Target: ",c.target]}),a.jsx("span",{className:"text-gray-400 dark:text-gray-500",title:c.description,children:a.jsx(Ur,{className:"w-3 h-3"})})]})]},c.id))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(EE,{className:"w-5 h-5 mr-2"}),"Daily Review Trend"]}),o!=null&&o.dailyData&&o.dailyData.length>0?a.jsxs("div",{className:"space-y-3",children:[o.dailyData.map(([c,u])=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 overflow-hidden",children:a.jsxs("div",{className:"h-full flex",children:[a.jsx("div",{className:"bg-green-500 transition-all duration-300",style:{width:`${u.passed/u.total*100}%`}}),a.jsx("div",{className:"bg-red-500 transition-all duration-300",style:{width:`${u.failed/u.total*100}%`}}),a.jsx("div",{className:"bg-yellow-500 transition-all duration-300",style:{width:`${u.warnings/u.total*100}%`}})]})}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 w-10",children:u.total})]})]},c)),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Passed"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Failed"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Warnings"})]})]})]}):a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available for selected period"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(qE,{className:"w-5 h-5 mr-2"}),"Sub-Agent Performance"]}),o!=null&&o.subAgentStats&&Object.keys(o.subAgentStats).length>0?a.jsx("div",{className:"space-y-3",children:Object.entries(o.subAgentStats).map(([c,u])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:c}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[u.total," reviews"]}),a.jsxs("span",{className:`font-medium ${parseFloat(u.passRate)>=85?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:[u.passRate,"% pass"]})]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${parseFloat(u.passRate)>=85?"bg-green-500":"bg-yellow-500"}`,style:{width:`${u.passRate}%`}})}),u.avgTimeMs&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg time: ",(u.avgTimeMs/1e3).toFixed(1),"s"]})]},c))}):a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No sub-agent data available"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"System Health Summary"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),a.jsx("p",{className:`text-lg font-semibold ${e.falsePositiveRate<=15&&e.complianceRate>=95?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:e.falsePositiveRate<=15&&e.complianceRate>=95?"Healthy":"Needs Attention"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Reviews"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.totalToday})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pass Rate Trend"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(o==null?void 0:o.passRate)||e.passRate,"%",(o==null?void 0:o.passRate)>e.passRate?a.jsx(Ss,{className:"w-4 h-4 ml-2 text-green-500"}):a.jsx(An,{className:"w-4 h-4 ml-2 text-red-500"})]})]})]})]})]})}function o6({state:e,isConnected:t,refreshData:r}){const[n,s]=w.useState([]),[i,o]=w.useState({totalToday:0,passRate:0,avgTime:0,falsePositiveRate:0,complianceRate:0}),[l,c]=w.useState(!0),[u,d]=w.useState("active"),[h,m]=w.useState("all");w.useEffect(()=>{f(),g()},[]),w.useEffect(()=>{e!=null&&e.prReviews&&(e.prReviews.reviews&&s(e.prReviews.reviews),e.prReviews.metrics&&o(e.prReviews.metrics))},[e==null?void 0:e.prReviews]);const f=async()=>{try{const j=await(await fetch("/api/pr-reviews")).json();s(j||[])}catch(p){console.error("Failed to load PR reviews:",p)}finally{c(!1)}},g=async()=>{try{const j=await(await fetch("/api/pr-reviews/metrics")).json();o(j)}catch(p){console.error("Failed to load metrics:",p)}},v=async()=>{c(!0),await Promise.all([f(),g()]),c(!1)},b=n.filter(p=>p.status==="pending");n.filter(p=>p.status!=="pending");const y=h==="all"?n:n.filter(p=>p.status===h),x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Hw,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"PR Reviews"}),t&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300",children:"Live"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:v,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Refresh",children:a.jsx(xr,{className:`w-5 h-5 ${l?"animate-spin":""}`})}),a.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Settings",children:a.jsx(JE,{className:"w-5 h-5"})})]})]}),a.jsx(n6,{metrics:i,activeCount:b.length,totalReviews:n.length}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:["active","history","metrics"].map(p=>a.jsxs("button",{onClick:()=>d(p),className:`
                py-2 px-1 border-b-2 font-medium text-sm capitalize
                ${u===p?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
              `,children:[p==="active"&&`Active (${b.length})`,p==="history"&&"Review History",p==="metrics"&&"Metrics & Trends"]},p))})}),a.jsxs(ge.div,{variants:x,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:[u==="active"&&a.jsx(s6,{reviews:b,loading:l}),u==="history"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filter:"}),a.jsxs("select",{value:h,onChange:p=>m(p.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[a.jsx("option",{value:"all",children:"All Reviews"}),a.jsx("option",{value:"passed",children:"Passed"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"warning",children:"Warnings"})]}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",y.length," reviews"]})]}),a.jsx(i6,{reviews:y.filter(p=>p.status!=="pending"),loading:l})]}),u==="metrics"&&a.jsx(a6,{metrics:i,reviews:n})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Pc,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.totalToday," reviews today"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(je,{className:"w-4 h-4 text-green-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.passRate,"% pass rate"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Pr,{className:"w-4 h-4 text-blue-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[(i.avgTime/1e3).toFixed(1),"s avg time"]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:i.falsePositiveRate>15?a.jsxs("span",{className:"flex items-center space-x-1 text-sm text-yellow-600 dark:text-yellow-400",children:[a.jsx(Nt,{className:"w-4 h-4"}),a.jsx("span",{children:"High false positive rate"})]}):a.jsxs("span",{className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400",children:[a.jsx(je,{className:"w-4 h-4"}),a.jsx("span",{children:"System healthy"})]})})]})]})}const l6=({children:e,defaultValue:t,className:r=""})=>{const[n,s]=Vr.useState(t);return a.jsx("div",{className:`tabs ${r}`,"data-active-tab":n,children:Vr.Children.map(e,i=>Vr.cloneElement(i,{activeTab:n,setActiveTab:s}))})},c6=({children:e,className:t="",activeTab:r,setActiveTab:n})=>a.jsx("div",{className:`flex space-x-1 border-b ${t}`,children:Vr.Children.map(e,s=>Vr.cloneElement(s,{activeTab:r,setActiveTab:n}))}),qu=({value:e,children:t,className:r="",activeTab:n,setActiveTab:s})=>{const i=n===e;return a.jsx("button",{onClick:()=>s(e),className:`px-4 py-2 text-sm font-medium transition-colors ${i?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"} ${r}`,children:t})},Wu=({value:e,children:t,className:r="",activeTab:n})=>n!==e?null:a.jsx("div",{className:`mt-4 ${r}`,children:t}),u6="modulepreload",d6=function(e){return"/"+e},jx={},vo=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=d6(c),c in jx)return;jx[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":u6,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},h6=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>vo(async()=>{const{default:n}=await Promise.resolve().then(()=>Mi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Wm extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Sx extends Wm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Nx extends Wm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class _x extends Wm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Rh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Rh||(Rh={}));var f6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class m6{constructor(t,{headers:r={},customFetch:n,region:s=Rh.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=h6(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return f6(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${t}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const m=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:l}).catch(b=>{throw b.name==="AbortError"?b:new Sx(b)}),f=m.headers.get("x-relay-error");if(f&&f==="true")throw new Nx(m);if(!m.ok)throw new _x(m);let g=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return g==="application/json"?v=yield m.json():g==="application/octet-stream"?v=yield m.blob():g==="text/event-stream"?v=m:g==="multipart/form-data"?v=yield m.formData():v=yield m.text(),{data:v,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new Sx(s)}:{data:null,error:s,response:s instanceof _x||s instanceof Nx?s.context:void 0}}})}}var Ut={},Gm={},Lc={},bo={},Oc={},Mc={},p6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ni=p6();const g6=Ni.fetch,Ik=Ni.fetch.bind(Ni),Rk=Ni.Headers,x6=Ni.Request,y6=Ni.Response,Mi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Rk,Request:x6,Response:y6,default:Ik,fetch:g6},Symbol.toStringTag,{value:"Module"})),v6=a1(Mi);var $c={};Object.defineProperty($c,"__esModule",{value:!0});let b6=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};$c.default=b6;var Dk=_t&&_t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mc,"__esModule",{value:!0});const w6=Dk(v6),k6=Dk($c);let j6=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=w6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,m=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&y&&y.length>1&&(m=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,f=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{d=JSON.parse(b),Array.isArray(d)&&i.status===404&&(h=[],d=null,f=200,g="OK")}catch{i.status===404&&b===""?(f=204,g="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,g="OK"),d&&this.shouldThrowOnError)throw new k6.default(d)}return{error:d,data:h,count:m,status:f,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Mc.default=j6;var S6=_t&&_t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oc,"__esModule",{value:!0});const N6=S6(Mc);let _6=class extends N6.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Oc.default=_6;var C6=_t&&_t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bo,"__esModule",{value:!0});const E6=C6(Oc);let T6=class extends E6.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};bo.default=T6;var P6=_t&&_t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lc,"__esModule",{value:!0});const ta=P6(bo);let A6=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new ta.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ta.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ta.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new ta.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ta.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Lc.default=A6;var Lk=_t&&_t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gm,"__esModule",{value:!0});const I6=Lk(Lc),R6=Lk(bo);let D6=class Ok{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new I6.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ok(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new R6.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Gm.default=D6;var $i=_t&&_t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.PostgrestError=Ut.PostgrestBuilder=Ut.PostgrestTransformBuilder=Ut.PostgrestFilterBuilder=Ut.PostgrestQueryBuilder=Ut.PostgrestClient=void 0;const Mk=$i(Gm);Ut.PostgrestClient=Mk.default;const $k=$i(Lc);Ut.PostgrestQueryBuilder=$k.default;const Fk=$i(bo);Ut.PostgrestFilterBuilder=Fk.default;const zk=$i(Oc);Ut.PostgrestTransformBuilder=zk.default;const Uk=$i(Mc);Ut.PostgrestBuilder=Uk.default;const Bk=$i($c);Ut.PostgrestError=Bk.default;var L6=Ut.default={PostgrestClient:Mk.default,PostgrestQueryBuilder:$k.default,PostgrestFilterBuilder:Fk.default,PostgrestTransformBuilder:zk.default,PostgrestBuilder:Uk.default,PostgrestError:Bk.default};const{PostgrestClient:O6,PostgrestQueryBuilder:QR,PostgrestFilterBuilder:YR,PostgrestTransformBuilder:ZR,PostgrestBuilder:eD,PostgrestError:tD}=L6;class M6{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const $6="2.15.5",F6=`realtime-js/${$6}`,z6="1.0.0",Dh=1e4,U6=1e3,B6=100;var Ea;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ea||(Ea={}));var nt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nt||(nt={}));var _r;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(_r||(_r={}));var Lh;(function(e){e.websocket="websocket"})(Lh||(Lh={}));var ls;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ls||(ls={}));class V6{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Vk{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Te||(Te={}));const Cx=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=H6(o,e,t,s),i),{})},H6=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Hk(i,o):Oh(o)},Hk=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return K6(t,r)}switch(e){case Te.bool:return q6(t);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return W6(t);case Te.json:case Te.jsonb:return G6(t);case Te.timestamp:return J6(t);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return Oh(t);default:return Oh(t)}},Oh=e=>e,q6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},W6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},G6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},K6=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Hk(t,l))}return e},J6=e=>typeof e=="string"?e.replace(" ","T"):e,qk=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Gu{constructor(t,r,n={},s=Dh){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ex;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ex||(Ex={}));class Ta{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ta.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Ta.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ta.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(b=>b.presence_ref),f=h.map(b=>b.presence_ref),g=d.filter(b=>f.indexOf(b.presence_ref)<0),v=h.filter(b=>m.indexOf(b.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(f=>f.presence_ref),m=d.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Tx||(Tx={}));var Pa;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Pa||(Pa={}));var en;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(en||(en={}));class Km{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gu(this,_r.join,this.params,this.timeout),this.rejoinTimer=new Vk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_r.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ta(this),this.broadcastEndpointURL=qk(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Pa.PRESENCE]&&this.bindings[Pa.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(en.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(en.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){t==null||t(en.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,y=[];for(let x=0;x<b;x++){const p=v[x],{filter:{event:j,schema:E,table:N,filter:C}}=p,T=f&&f[x];if(T&&T.event===j&&T.schema===E&&T.table===N&&T.filter===C)y.push(Object.assign(Object.assign({},p),{id:T.id}));else{this.unsubscribe(),this.state=nt.errored,t==null||t(en.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(en.SUBSCRIBED);return}}).receive("error",f=>{this.state=nt.errored,t==null||t(en.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(en.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===nt.joined&&t===Pa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_r.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Gu(this,_r.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Gu(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>B6){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=_r;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var g,v,b;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(v=f.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(f=>f.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var g,v,b,y,x,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const j=f.id,E=(g=f.filter)===null||g===void 0?void 0:g.event;return j&&((v=r.ids)===null||v===void 0?void 0:v.includes(j))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(x=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return j==="*"||j===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:v,table:b,commit_timestamp:y,type:x,errors:p}=g;m=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:y,eventType:x,new:{},old:{},errors:p}),this._getPayloadRecords(g))}f.callback(m,n)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Km.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_r.close,{},t)}_onError(t){this._on(_r.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Cx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Cx(t.columns,t.old_record)),r}}const Ku=()=>{},Qo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},X6=[1e3,2e3,5e3,1e4],Q6=1e4,Y6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Z6{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dh,this.transport=null,this.heartbeatIntervalMs=Qo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ku,this.ref=0,this.reconnectTimer=null,this.logger=Ku,this.conn=null,this.sendBuffer=[],this.serializer=new V6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>vo(async()=>{const{default:l}=await Promise.resolve().then(()=>Mi);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Lh.websocket}`,this.httpEndpoint=qk(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=M6.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:z6}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ea.connecting:return ls.Connecting;case Ea.open:return ls.Open;case Ea.closing:return ls.Closing;default:return ls.Closed}}isConnected(){return this.connectionState()===ls.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Km(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(U6,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Qo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(_r.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Y6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:F6};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(_r.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Vk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Dh,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Qo.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Ku,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(h=>X6[h-1]||Q6),this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:((h,m)=>m(JSON.stringify(h))),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Jm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ye(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class eI extends Jm{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Mh extends Jm{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var tI=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Wk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>vo(async()=>{const{default:n}=await Promise.resolve().then(()=>Mi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},rI=()=>tI(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield vo(()=>Promise.resolve().then(()=>Mi),void 0)).Response:Response}),$h=e=>{if(Array.isArray(e))return e.map(r=>$h(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=$h(n)}),t},nI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Es=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ju=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sI=(e,t,r)=>Es(void 0,void 0,void 0,function*(){const n=yield rI();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new eI(Ju(s),i,o))}).catch(s=>{t(new Mh(Ju(s),s))}):t(new Mh(Ju(e),e))}),iI=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(nI(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function wo(e,t,r,n,s,i){return Es(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,iI(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>sI(c,l,n))})})}function ic(e,t,r,n){return Es(this,void 0,void 0,function*(){return wo(e,"GET",t,r,n)})}function Fr(e,t,r,n,s){return Es(this,void 0,void 0,function*(){return wo(e,"POST",t,n,s,r)})}function Fh(e,t,r,n,s){return Es(this,void 0,void 0,function*(){return wo(e,"PUT",t,n,s,r)})}function aI(e,t,r,n){return Es(this,void 0,void 0,function*(){return wo(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Gk(e,t,r,n,s){return Es(this,void 0,void 0,function*(){return wo(e,"DELETE",t,n,s,r)})}var oI=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class lI{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return oI(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ye(t))return{data:null,error:t};throw t}})}}var cI=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class uI{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new lI(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return cI(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ye(t))return{data:null,error:t};throw t}})}}var $t=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const dI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Px={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hI{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Wk(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return $t(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Px),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?Fh:Fr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}upload(t,r,n){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return $t(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Px.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Fh(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ye(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return $t(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Fr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Jm("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}update(t,r,n){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return $t(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}copy(t,r,n){return $t(this,void 0,void 0,function*(){try{return{data:{path:(yield Fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return $t(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Fr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return $t(this,void 0,void 0,function*(){try{const s=yield Fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>ic(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new uI(c,this.shouldThrowOnError)}info(t){return $t(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ic(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:$h(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}exists(t){return $t(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield aI(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n)&&n instanceof Mh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Gk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}list(t,r,n){return $t(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},dI),r),{prefix:t||""});return{data:yield Fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}listV2(t,r){return $t(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const fI="2.12.2",mI={"X-Client-Info":`storage-js/${fI}`};var Ds=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class pI{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},mI),r),this.fetch=Wk(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ds(this,void 0,void 0,function*(){try{return{data:yield ic(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ye(t))return{data:null,error:t};throw t}})}getBucket(t){return Ds(this,void 0,void 0,function*(){try{return{data:yield ic(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ds(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ds(this,void 0,void 0,function*(){try{return{data:yield Fh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ds(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ds(this,void 0,void 0,function*(){try{return{data:yield Gk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}}class gI extends pI{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new hI(this.url,this.headers,t,this.fetch)}}const xI="2.58.0";let ca="";typeof Deno<"u"?ca="deno":typeof document<"u"?ca="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ca="react-native":ca="node";const yI={"X-Client-Info":`supabase-js-${ca}/${xI}`},vI={headers:yI},bI={schema:"public"},wI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kI={};var jI=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const SI=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ik:t=fetch,(...r)=>t(...r)},NI=()=>typeof Headers>"u"?Rk:Headers,_I=(e,t,r)=>{const n=SI(r),s=NI();return(i,o)=>jI(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var CI=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function EI(e){return e.endsWith("/")?e:e+"/"}function TI(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>CI(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function PI(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(EI(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Kk="2.72.0",Fs=30*1e3,zh=3,Xu=zh*Fs,AI="http://localhost:9999",II="supabase.auth.token",RI={"X-Client-Info":`gotrue-js/${Kk}`},Uh="X-Supabase-Api-Version",Jk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},DI=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,LI=600*1e3;class Xm extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class OI extends Xm{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function MI(e){return ue(e)&&e.name==="AuthApiError"}class Xk extends Xm{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Yn extends Xm{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class kn extends Yn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $I(e){return ue(e)&&e.name==="AuthSessionMissingError"}class ra extends Yn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yo extends Yn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zo extends Yn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function FI(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ax extends Yn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bh extends Yn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Qu(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class Ix extends Yn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Vh extends Yn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ac="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rx=` 	
\r=`.split(""),zI=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Rx.length;t+=1)e[Rx[t].charCodeAt(0)]=-2;for(let t=0;t<ac.length;t+=1)e[ac[t].charCodeAt(0)]=t;return e})();function Dx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ac[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ac[n]),t.queuedBits-=6}}function Qk(e,t,r){const n=zI[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Lx(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{VI(o,n,r)};for(let o=0;o<e.length;o+=1)Qk(e.charCodeAt(o),s,i);return t.join("")}function UI(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function BI(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}UI(n,t)}}function VI(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function HI(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Qk(e.charCodeAt(s),r,n);return new Uint8Array(t)}function qI(e){const t=[];return BI(e,r=>t.push(r)),new Uint8Array(t)}function WI(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Dx(s,r,n)),Dx(null,r,n),t.join("")}function GI(e){return Math.round(Date.now()/1e3)+e}function KI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const lr=()=>typeof window<"u"&&typeof document<"u",es={tested:!1,writable:!1},Yk=()=>{if(!lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(es.tested)return es.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),es.tested=!0,es.writable=!0}catch{es.tested=!0,es.writable=!1}return es.writable};function JI(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Zk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>vo(async()=>{const{default:n}=await Promise.resolve().then(()=>Mi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},XI=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",zs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ts=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},vn=async(e,t)=>{await e.removeItem(t)};class Fc{constructor(){this.promise=new Fc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fc.promiseConstructor=Promise;function Yu(e){const t=e.split(".");if(t.length!==3)throw new Vh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!DI.test(t[n]))throw new Vh("JWT not in base64url format");return{header:JSON.parse(Lx(t[0])),payload:JSON.parse(Lx(t[1])),signature:HI(t[2]),raw:{header:t[0],payload:t[1]}}}async function QI(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function YI(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function ZI(e){return("0"+e.toString(16)).substr(-2)}function eR(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,ZI).join("")}async function tR(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function rR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await tR(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ls(e,t,r=!1){const n=eR();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await zs(e,`${t}-code-verifier`,s);const i=await rR(n);return[i,n===i?"plain":"s256"]}const nR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sR(e){const t=e.headers.get(Uh);if(!t||!t.match(nR))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function iR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function aR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Os(e){if(!oR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zu(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ox(e){return JSON.parse(JSON.stringify(e))}var lR=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const is=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cR=[502,503,504];async function Mx(e){var t;if(!XI(e))throw new Bh(is(e),0);if(cR.includes(e.status))throw new Bh(is(e),e.status);let r;try{r=await e.json()}catch(i){throw new Xk(is(i),i)}let n;const s=sR(e);if(s&&s.getTime()>=Jk["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ix(is(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new kn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ix(is(r),e.status,r.weak_password.reasons);throw new OI(is(r),e.status||500,n)}const uR=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ye(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Uh]||(i[Uh]=Jk["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await dR(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function dR(e,t,r,n,s,i){const o=uR(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Bh(is(c),0)}if(l.ok||await Mx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Mx(c)}}function Lr(e){var t;let r=null;pR(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=GI(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function $x(e){const t=Lr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Cn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function hR(e){return{data:e,error:null}}function fR(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=lR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function mR(e){return e}function pR(e){return e.access_token&&e.refresh_token&&e.expires_in}const ed=["global","local","others"];var gR=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class xR{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Zk(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=ed[0]){if(ed.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ed.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Cn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=gR(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:fR,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Cn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:mR});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ue(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Os(t);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Cn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Os(t);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Cn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Os(t);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Cn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Os(t.userId);try{const{data:r,error:n}=await ye(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Os(t.userId),Os(t.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}}function Fx(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function yR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ms={debug:!!(globalThis&&Yk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class e1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class vR extends e1{}async function bR(e,t,r){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new vR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ms.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function t1(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function wR(e){return parseInt(e,16)}function kR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function jR(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=t1(e.address),g=d?`${d}://${n}`:n,v=e.statement?`${e.statement}
`:"",b=`${g} wants you to sign in with your Ethereum account:
${f}

${v}`;let y=`URI: ${h}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);x+=`
- ${p}`}y+=x}return`${b}
${y}`}yR();const SR={url:AI,storageKey:II,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RI,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function zx(e,t,r){return await r()}const $s={};class io{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=io.nextInstanceID,io.nextInstanceID+=1,this.instanceID>0&&lr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},SR),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new xR({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Zk(s.fetch),this.lock=s.lock||zx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:lr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=bR:this.lock=zx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Yk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fx(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Fx(this.memoryStorage)),lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=$s[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){$s[this.storageKey]=Object.assign(Object.assign({},$s[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=$s[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){$s[this.storageKey]=Object.assign(Object.assign({},$s[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Kk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=JI(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),lr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),FI(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ue(r)?{error:r}:{error:new Xk("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Lr}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Ls(this.storage,this.storageKey)),i=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:g},xform:Lr})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Lr})}else throw new Yo("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$x})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$x})}else throw new Yo("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ra}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,m;let f,g;if("message"in t)f=t.message,g=t.signature;else{const{chain:v,wallet:b,statement:y,options:x}=t;let p;if(lr())if(typeof b=="object")p=b;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")p=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=b}const j=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),E=await p.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=t1(E[0]);let C=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const D=await p.request({method:"eth_chainId"});C=wR(D)}const T={domain:j.host,address:N,statement:y,uri:j.href,version:"1",chainId:C,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};f=jR(T),g=await p.request({method:"personal_sign",params:[kR(f),N]})}try{const{data:v,error:b}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Lr});if(b)throw b;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new ra}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:b})}catch(v){if(ue(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,m,f;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:b,wallet:y,statement:x,options:p}=t;let j;if(lr())if(typeof y=="object")j=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const E=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),x?{statement:x}:null));let C;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")C=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)C=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)g=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),v=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${E.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=N}}try{const{data:b,error:y}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:WI(v)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Lr});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ra}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(ue(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await ts(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Lr});if(await vn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ra}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ue(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Lr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ra}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ls(this.storage,this.storageKey));const{error:h}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Yo("You must provide either an email or phone number.")}catch(l){if(ue(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Lr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ls(this.storage,this.storageKey)),await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:hR})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new kn;const{error:s}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await ye(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await ye(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Yo("You must provide either an email or phone number and a type")}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Xu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ts(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Zu()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Cn}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kn}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Cn})})}catch(r){if(ue(r))return $I(r)&&(await this._removeSession(),await vn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new kn;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ls(this.storage,this.storageKey));const{data:u,error:d}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Cn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new kn;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Yu(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ue(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new kn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!lr())throw new Zo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ax("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ax("No code detected.");const{data:x,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Zo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const f=m-d;f*1e3<=Fs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=m-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,m,d);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ts(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(MI(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await vn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=KI(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ls(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return lr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ue(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await YI(async s=>(s>0&&await QI(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Lr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Qu(i)&&Date.now()+o-n<Fs})}catch(n){if(this._debug(r,"error",n),ue(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),lr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ts(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ts(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await zs(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Zu()}else if(s&&!s.user&&!s.user){const o=await ts(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await vn(this.storage,this.storageKey+"-user"),await zs(this.storage,this.storageKey,s)):s.user=Zu()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xu;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Xu}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Qu(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new kn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Fc;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new kn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ue(i)){const o={session:null,error:i};return Qu(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await zs(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Ox(s);await zs(this.storage,this.storageKey,i)}else{const s=Ox(r);await zs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await vn(this.storage,this.storageKey),await vn(this.storage,this.storageKey+"-code-verifier"),await vn(this.storage,this.storageKey+"-user"),this.userStorage&&await vn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&lr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Fs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Fs}ms, refresh threshold is ${zh} ticks`),s<=zh&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof e1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ls(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ye(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Yu(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+LI>s)return n;const{data:i,error:o}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};n=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Yu(n);r!=null&&r.allowExpired||iR(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const d=aR(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,qI(`${l}.${c}`)))throw new Vh("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}}io.nextInstanceID=0;const NR=io;class _R extends NR{constructor(t){super(t)}}var CR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class ER{constructor(t,r,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=PI(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:bI,realtime:kI,auth:Object.assign(Object.assign({},wI),{storageKey:c}),global:vI},d=TI(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=_I(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new O6(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new gI(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new m6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return CR(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _R({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Z6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ko=(e,t,r)=>new ER(e,t,r);function TR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}TR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const PR="https://dedlbzhpgkmetvhbkyzq.supabase.co",AR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g",In=ko(PR,AR),IR=()=>{const[e,t]=w.useState(null),[r,n]=w.useState(null),[s,i]=w.useState("idle"),[o,l]=w.useState(null),[c,u]=w.useState([]),[d,h]=w.useState("skip"),[m,f]=w.useState({}),g=w.useRef(null),v=C=>{const T=C.split(".").pop().toLowerCase();return T==="csv"||T==="json"?T:null},b=C=>{const T=C.split(`
`).filter(R=>R.trim()),D=T[0].split(",").map(R=>R.trim());return T.slice(1).map(R=>{const P=R.split(",").map(J=>J.trim()),L={};return D.forEach((J,I)=>{L[J]=P[I]||""}),L})},y=C=>{try{const T=JSON.parse(C);return Array.isArray(T)?T:[T]}catch(T){return console.error("JSON parsing error:",T),[]}},x=C=>{const T=C.target.files[0];if(T){const D=v(T.name);if(!D){alert("Please select a CSV or JSON file");return}t(T);const R=new FileReader;R.onload=P=>{const L=P.target.result;n(L);const J=D==="csv"?b(L):y(L);u(J.slice(0,5))},R.readAsText(T)}},p=C=>{const T=["title","description","priority"],D=[],R=[];return C.forEach((P,L)=>{const J=T.filter(I=>!P[I]);J.length===0?D.push({...P,id:P.id||`imported-${Date.now()}-${L}`,category:P.category||"uncategorized",status:P.status||"pending",estimated_effort:P.estimated_effort||"medium",created_at:new Date().toISOString()}):R.push({item:P,reason:`Missing fields: ${J.join(", ")}`})}),{validItems:D,invalidItems:R}},j=async C=>{try{const T=C.map(I=>I.title),{data:D,error:R}=await In.from("backlog_items").select("title").in("title",T);if(R)throw R;const P=new Set(D.map(I=>I.title)),L=C.filter(I=>P.has(I.title)),J=C.filter(I=>!P.has(I.title));return{duplicates:L,unique:J}}catch(T){return console.error("Error checking duplicates:",T),{duplicates:[],unique:C}}},E=async()=>{if(!r){alert("Please select a file first");return}i("processing");try{const T=v(e.name)==="csv"?b(r):y(r),{validItems:D,invalidItems:R}=p(T);if(D.length===0){i("error"),l({success:!1,message:"No valid items to import",invalidItems:R});return}const{duplicates:P,unique:L}=await j(D);let J=L;if(P.length>0&&d==="merge")for(const I of P){const{error:M}=await In.from("backlog_items").update(I).eq("title",I.title);M&&console.error("Error updating duplicate:",M)}if(J.length>0){const{data:I,error:M}=await In.from("backlog_items").insert(J).select();if(M)throw M;i("success"),l({success:!0,imported:I.length,duplicates:P.length,invalid:R.length,message:`Successfully imported ${I.length} items`})}else i("warning"),l({success:!0,imported:0,duplicates:P.length,invalid:R.length,message:"All items were duplicates"})}catch(C){console.error("Import error:",C),i("error"),l({success:!1,message:`Import failed: ${C.message}`})}},N=()=>{t(null),n(null),i("idle"),l(null),u([]),g.current&&(g.current.value="")};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Backlog Import Manager"}),a.jsx("p",{className:"text-gray-600",children:"Import backlog items from CSV or JSON files"})]}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 mb-6",children:[a.jsx("input",{ref:g,type:"file",accept:".csv,.json",onChange:x,className:"hidden"}),a.jsxs("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>{var C;return(C=g.current)==null?void 0:C.click()},children:[a.jsx(ZE,{className:"h-12 w-12 text-gray-400 mb-3"}),a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Click to upload or drag and drop"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV or JSON files only"})]}),e&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md flex items-center",children:[e.name.endsWith(".csv")?a.jsx(We,{className:"h-5 w-5 text-blue-600 mr-2"}):a.jsx(LE,{className:"h-5 w-5 text-blue-600 mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:e.name}),a.jsx("button",{onClick:N,className:"ml-auto text-red-500 hover:text-red-700",children:"Remove"})]})]}),c.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Preview (First 5 items)"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:Object.keys(c[0]).map(C=>a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:C},C))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((C,T)=>a.jsx("tr",{children:Object.values(C).map((D,R)=>a.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:[String(D).substring(0,50),String(D).length>50&&"..."]},R))},T))})]})})]}),e&&a.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Import Options"}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duplicate Handling"}),a.jsxs("select",{value:d,onChange:C=>h(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"skip",children:"Skip Duplicates"}),a.jsx("option",{value:"merge",children:"Merge/Update Existing"})]})]})})]}),e&&s==="idle"&&a.jsxs("button",{onClick:E,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center",children:[a.jsx(go,{className:"h-5 w-5 mr-2"}),"Import Backlog Items"]}),s==="processing"&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(qw,{className:"h-8 w-8 text-blue-600 animate-spin"}),a.jsx("span",{className:"ml-3 text-gray-700",children:"Processing import..."})]}),o&&a.jsx("div",{className:`p-4 rounded-lg ${s==="success"?"bg-green-50 border border-green-200":s==="warning"?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[s==="success"?a.jsx(je,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}):a.jsx(sr,{className:`h-5 w-5 mt-0.5 mr-2 ${s==="warning"?"text-yellow-500":"text-red-500"}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold",children:o.message}),o.success&&a.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[a.jsxs("p",{children:[" Imported: ",o.imported," items"]}),o.duplicates>0&&a.jsxs("p",{children:[" Duplicates: ",o.duplicates," items"]}),o.invalid>0&&a.jsxs("p",{children:[" Invalid: ",o.invalid," items"]})]}),a.jsx("button",{onClick:N,className:"mt-3 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Import Another File"})]})]})})]})},RR=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(null),[o,l]=w.useState(!1),[c,u]=w.useState(!1),[d,h]=w.useState({total:0,generated:0,manual:0,verified:0});w.useEffect(()=>{m(),f()},[]);const m=async()=>{try{const{data:P,error:L}=await In.from("backlog_items").select("*").order("priority",{ascending:!0}).order("created_at",{ascending:!1});if(L)throw L;t(P||[])}catch(P){console.error("Error fetching backlog items:",P)}},f=async()=>{try{const{data:P,error:L}=await In.from("user_stories").select("id, is_generated, verification_status");if(L)throw L;const J={total:P.length,generated:P.filter(I=>I.is_generated).length,manual:P.filter(I=>!I.is_generated).length,verified:P.filter(I=>I.verification_status==="verified").length};h(J)}catch(P){console.error("Error fetching story stats:",P)}},g=async P=>{l(!0),n(P),await new Promise(J=>setTimeout(J,1500));const L={title:P.title,user_story:v(P),acceptance_criteria:N(P),technical_notes:C(P),estimated_effort:P.estimated_effort||"medium",priority:P.priority,tags:T(P),is_generated:!0,backlog_item_id:P.id,created_at:new Date().toISOString()};i(L),l(!1)},v=P=>{const L=[`As a ${b(P)}, I want to ${y(P)} so that ${p(P)}`,`As a ${b(P)}, I need ${x(P)} in order to ${j()}`,`As a ${b(P)}, I would like to ${y(P)} to ${E()}`];return L[Math.floor(Math.random()*L.length)]},b=P=>{const L=["user","administrator","developer","customer","manager"];return P.category==="admin"?"administrator":P.category==="development"?"developer":L[Math.floor(Math.random()*L.length)]},y=P=>P.title.toLowerCase().replace(/^(add|create|implement|build|develop)\s+/,""),x=P=>P.title.toLowerCase(),p=P=>{var J;const L=["improve efficiency","save time","enhance user experience","increase productivity","streamline workflows"];return((J=P.description)==null?void 0:J.substring(0,50))||L[Math.floor(Math.random()*L.length)]},j=P=>"achieve better results",E=P=>"complete tasks more efficiently",N=P=>{const L=[`The ${x(P)} should be accessible to authorized users`,"System should provide feedback on successful completion","Feature should handle error cases gracefully","Performance should meet defined SLA requirements","User interface should be intuitive and responsive"];return(P.priority==="high"||P.priority==="critical")&&(L.push("Feature should include comprehensive logging"),L.push("Security measures should be implemented")),L.slice(0,4+Math.floor(Math.random()*2))},C=P=>{const L=[];return P.category==="frontend"&&(L.push("Ensure responsive design for mobile devices"),L.push("Implement proper state management")),P.category==="backend"&&(L.push("Implement proper error handling and logging"),L.push("Ensure API endpoints follow RESTful principles")),(P.priority==="high"||P.priority==="critical")&&(L.push("Include unit tests with minimum 80% coverage"),L.push("Document API changes in technical documentation")),L},T=P=>{const L=[P.category];return P.priority&&L.push(P.priority),P.estimated_effort&&L.push(P.estimated_effort),L.filter(Boolean)},D=async()=>{if(s)try{const{data:P,error:L}=await In.from("user_stories").insert([s]).select();if(L)throw L;await In.from("backlog_items").update({user_story_id:P[0].id}).eq("id",r.id),alert("User story saved successfully!"),i(null),n(null),m(),f()}catch(P){console.error("Error saving story:",P),alert("Failed to save user story")}},R=(P,L)=>{i(J=>({...J,[P]:L}))};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[a.jsx(ro,{className:"h-6 w-6 mr-2 text-yellow-500"}),"AI Story Generation Engine"]}),a.jsx("p",{className:"text-gray-600",children:"Generate user stories from backlog items using AI"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:d.total}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Stories"})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.generated}),a.jsx("div",{className:"text-sm text-gray-600",children:"AI Generated"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.manual}),a.jsx("div",{className:"text-sm text-gray-600",children:"Manual"})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d.verified}),a.jsx("div",{className:"text-sm text-gray-600",children:"Verified"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Backlog Items"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.map(P=>{var L;return a.jsx("div",{onClick:()=>!o&&g(P),className:`p-3 border-b cursor-pointer hover:bg-gray-50 transition-colors ${(r==null?void 0:r.id)===P.id?"bg-blue-50":""}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm",children:P.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(L=P.description)==null?void 0:L.substring(0,100),"..."]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded ${P.priority==="high"?"bg-red-100 text-red-700":P.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:P.priority}),P.user_story_id&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded flex items-center",children:[a.jsx(je,{className:"h-3 w-3 mr-1"}),"Has Story"]})]})]}),a.jsx("button",{onClick:J=>{J.stopPropagation(),g(P)},className:"ml-2 p-2 text-blue-600 hover:bg-blue-50 rounded",disabled:o,children:a.jsx(Tm,{className:"h-4 w-4"})})]})},P.id)})})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Generated User Story"}),o&&a.jsxs("div",{className:"border rounded-lg p-8 flex flex-col items-center justify-center",children:[a.jsx(xr,{className:"h-8 w-8 text-blue-600 animate-spin mb-3"}),a.jsx("p",{className:"text-gray-600",children:"Generating user story..."})]}),s&&!o&&a.jsx("div",{className:"border rounded-lg p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Story"}),a.jsx("textarea",{value:s.user_story,onChange:P=>R("user_story",P.target.value),disabled:!c,className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acceptance Criteria"}),a.jsx("div",{className:"space-y-2",children:s.acceptance_criteria.map((P,L)=>a.jsxs("div",{className:"flex items-start",children:[a.jsx(je,{className:"h-4 w-4 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),a.jsx("input",{type:"text",value:P,onChange:J=>{const I=[...s.acceptance_criteria];I[L]=J.target.value,R("acceptance_criteria",I)},disabled:!c,className:"flex-1 px-2 py-1 border rounded text-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]},L))})]}),s.technical_notes.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technical Notes"}),a.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.technical_notes.map((P,L)=>a.jsx("li",{className:"text-sm text-gray-600",children:P},L))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((P,L)=>a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md text-xs",children:P},L))})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[a.jsxs("button",{onClick:()=>u(!c),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 flex items-center",children:[a.jsx(VE,{className:"h-4 w-4 mr-2"}),c?"Done Editing":"Edit"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>g(r),className:"px-4 py-2 text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 flex items-center",children:[a.jsx(xr,{className:"h-4 w-4 mr-2"}),"Regenerate"]}),a.jsxs("button",{onClick:D,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center",children:[a.jsx(ys,{className:"h-4 w-4 mr-2"}),"Save Story"]})]})]})]})}),!s&&!o&&a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsx(We,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"Select a backlog item to generate a user story"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"AI will create acceptance criteria and technical notes"})]})]})]})]})},DR=()=>{const[e,t]=w.useState({storyCompletion:0,verificationCoverage:0,testCoverage:0,criticalBugs:0,performanceMetrics:0,securityChecks:0}),[r,n]=w.useState({storyCompletion:85,verificationCoverage:80,testCoverage:70,criticalBugs:0,performanceMetrics:90,securityChecks:100}),[s,i]=w.useState("calculating"),[o,l]=w.useState(""),[c,u]=w.useState(!1),[d,h]=w.useState([]);w.useEffect(()=>{m(),f()},[]);const m=async()=>{try{const{data:p,error:j}=await In.from("user_stories").select("id, status, verification_status");if(!j){const E=p.length||1,N=p.filter(T=>T.status==="completed").length,C=p.filter(T=>T.verification_status==="verified").length;t(T=>({...T,storyCompletion:Math.round(N/E*100),verificationCoverage:Math.round(C/E*100)}))}t(E=>({...E,testCoverage:75+Math.random()*20,criticalBugs:Math.floor(Math.random()*3),performanceMetrics:85+Math.random()*10,securityChecks:Math.random()>.3?100:0})),g()}catch(p){console.error("Error fetching metrics:",p)}},f=async()=>{h([{id:1,version:"v2.1.0",date:"2024-01-15",status:"passed",metrics:{storyCompletion:92,verificationCoverage:88,testCoverage:82}},{id:2,version:"v2.0.9",date:"2024-01-08",status:"override",metrics:{storyCompletion:78,verificationCoverage:75,testCoverage:71},justification:"Critical security patch required immediate release"},{id:3,version:"v2.0.8",date:"2024-01-01",status:"passed",metrics:{storyCompletion:95,verificationCoverage:92,testCoverage:85}}])},g=()=>{const p=e.storyCompletion>=r.storyCompletion&&e.verificationCoverage>=r.verificationCoverage&&e.testCoverage>=r.testCoverage&&e.criticalBugs<=r.criticalBugs&&e.performanceMetrics>=r.performanceMetrics&&e.securityChecks>=r.securityChecks;i(p?"passed":"failed")},v=(p,j,E=!1)=>(E?p<=j:p>=j)?"text-green-600":"text-red-600",b=(p,j,E=!1)=>(E?p<=j:p>=j)?a.jsx(je,{className:"h-5 w-5 text-green-500"}):a.jsx(mn,{className:"h-5 w-5 text-red-500"}),y=async()=>{if(!o.trim()){alert("Please provide a justification for the override");return}try{const p={metrics:e,thresholds:r,justification:o,user:"current_user",timestamp:new Date().toISOString()};console.log("Override logged:",p),alert("Release gate override approved and logged"),u(!1),l(""),i("override")}catch(p){console.error("Error logging override:",p)}},x=(p,j)=>{n(E=>({...E,[p]:parseFloat(j)}))};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[a.jsx(Si,{className:"h-6 w-6 mr-2 text-blue-600"}),"Release Gate Calculator"]}),a.jsx("p",{className:"text-gray-600",children:"Automated release readiness assessment based on completion metrics"})]}),a.jsx("div",{className:`mb-6 p-4 rounded-lg ${s==="passed"?"bg-green-50 border-2 border-green-500":s==="override"?"bg-yellow-50 border-2 border-yellow-500":s==="failed"?"bg-red-50 border-2 border-red-500":"bg-gray-50 border-2 border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[s==="passed"?a.jsx(je,{className:"h-8 w-8 text-green-600 mr-3"}):s==="failed"?a.jsx(mn,{className:"h-8 w-8 text-red-600 mr-3"}):s==="override"?a.jsx(Nt,{className:"h-8 w-8 text-yellow-600 mr-3"}):a.jsx("div",{className:"h-8 w-8 mr-3 border-4 border-gray-300 border-t-blue-600 rounded-full animate-spin"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:s==="passed"?"Release Gate: PASSED":s==="failed"?"Release Gate: FAILED":s==="override"?"Release Gate: OVERRIDE":"Calculating Gate Status..."}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s==="passed"?"All criteria met - ready for release":s==="failed"?"Some criteria not met - review required":s==="override"?"Released with override justification":"Analyzing metrics..."})]})]}),s==="failed"&&a.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 flex items-center",children:[a.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Override Gate"]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Story Completion"}),b(e.storyCompletion,r.storyCompletion)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.storyCompletion,r.storyCompletion)}`,children:[e.storyCompletion,"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.storyCompletion,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.storyCompletion>=r.storyCompletion?"bg-green-500":"bg-red-500"}`,style:{width:`${e.storyCompletion}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Verification Coverage"}),b(e.verificationCoverage,r.verificationCoverage)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.verificationCoverage,r.verificationCoverage)}`,children:[e.verificationCoverage,"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.verificationCoverage,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.verificationCoverage>=r.verificationCoverage?"bg-green-500":"bg-red-500"}`,style:{width:`${e.verificationCoverage}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Test Coverage"}),b(e.testCoverage,r.testCoverage)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.testCoverage,r.testCoverage)}`,children:[Math.round(e.testCoverage),"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.testCoverage,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.testCoverage>=r.testCoverage?"bg-green-500":"bg-red-500"}`,style:{width:`${e.testCoverage}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Critical Bugs"}),b(e.criticalBugs,r.criticalBugs,!0)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:`text-2xl font-bold ${v(e.criticalBugs,r.criticalBugs,!0)}`,children:e.criticalBugs}),a.jsxs("span",{className:"text-sm text-gray-500",children:[" ",r.criticalBugs]})]}),a.jsx("div",{className:"mt-2 text-xs text-gray-600",children:e.criticalBugs===0?"No critical bugs":`${e.criticalBugs} bug(s) found`})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Performance Metrics"}),b(e.performanceMetrics,r.performanceMetrics)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.performanceMetrics,r.performanceMetrics)}`,children:[Math.round(e.performanceMetrics),"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.performanceMetrics,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.performanceMetrics>=r.performanceMetrics?"bg-green-500":"bg-red-500"}`,style:{width:`${e.performanceMetrics}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Security Checks"}),b(e.securityChecks,r.securityChecks)]}),a.jsx("div",{className:"flex items-baseline gap-2",children:a.jsx("span",{className:`text-2xl font-bold ${v(e.securityChecks,r.securityChecks)}`,children:e.securityChecks===100?"Passed":"Failed"})}),a.jsx("div",{className:"mt-2 text-xs text-gray-600",children:e.securityChecks===100?"All security checks passed":"Security issues detected"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Gate Thresholds"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Story Completion (%)"}),a.jsx("input",{type:"number",value:r.storyCompletion,onChange:p=>x("storyCompletion",p.target.value),className:"w-full px-3 py-1 border rounded-md",min:"0",max:"100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Verification Coverage (%)"}),a.jsx("input",{type:"number",value:r.verificationCoverage,onChange:p=>x("verificationCoverage",p.target.value),className:"w-full px-3 py-1 border rounded-md",min:"0",max:"100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Test Coverage (%)"}),a.jsx("input",{type:"number",value:r.testCoverage,onChange:p=>x("testCoverage",p.target.value),className:"w-full px-3 py-1 border rounded-md",min:"0",max:"100"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Recent Release History"}),a.jsx("div",{className:"space-y-2",children:d.map(p=>a.jsxs("div",{className:"border rounded-lg p-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Nm,{className:"h-4 w-4 text-gray-500 mr-2"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:p.version}),a.jsx("span",{className:"text-sm text-gray-500 ml-2",children:p.date})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-xs text-gray-600",children:["SC: ",p.metrics.storyCompletion,"% | VC: ",p.metrics.verificationCoverage,"% | TC: ",p.metrics.testCoverage,"%"]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p.status==="passed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:p.status==="passed"?"Passed":"Override"})]})]},p.id))})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Override Release Gate"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Overriding the release gate requires justification and will be logged for audit purposes."}),a.jsx("textarea",{value:o,onChange:p=>l(p.target.value),placeholder:"Enter justification for override...",className:"w-full px-3 py-2 border rounded-md mb-4",rows:4}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{onClick:y,className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:"Confirm Override"})]})]})})]})},LR=()=>{const[e,t]=w.useState("import"),r=Ai();return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"EHG Backlog Import System"}),a.jsx("p",{className:"text-gray-600",children:"Import backlog items, generate user stories, and calculate release readiness"}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"SD: fbe359b4-aa56-4740-8350-d51760de0a3b"}),a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"EHG Engineer Dashboard"})]})]}),a.jsxs("button",{onClick:()=>r("/"),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg flex items-center gap-2 transition-colors",children:[a.jsx(wn,{className:"h-4 w-4"}),"Back to Dashboard"]})]}),a.jsxs(l6,{value:e,onValueChange:t,className:"space-y-6",children:[a.jsxs(c6,{className:"grid w-full grid-cols-3",children:[a.jsxs(qu,{value:"import",className:"flex items-center gap-2",children:[a.jsx(ji,{className:"h-4 w-4"}),"Import Backlog"]}),a.jsxs(qu,{value:"stories",className:"flex items-center gap-2",children:[a.jsx(Tm,{className:"h-4 w-4"}),"Story Generation"]}),a.jsxs(qu,{value:"release",className:"flex items-center gap-2",children:[a.jsx(XE,{className:"h-4 w-4"}),"Release Gates"]})]}),a.jsx(Wu,{value:"import",className:"space-y-4",children:a.jsx(IR,{})}),a.jsx(Wu,{value:"stories",className:"space-y-4",children:a.jsx(RR,{})}),a.jsx(Wu,{value:"release",className:"space-y-4",children:a.jsx(DR,{})})]}),a.jsxs("div",{className:"mt-12 p-6 bg-white rounded-lg shadow-sm border",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Overview"}),a.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"0"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total Backlog Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),a.jsx("div",{className:"text-sm text-gray-500",children:"AI Generated Stories"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:"0%"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Release Readiness"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"0"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Active Gates"})]})]})]})]})})};function r1({testResult:e,onClose:t,onSuccess:r}){const[n,s]=w.useState("idle"),[i,o]=w.useState(0),[l,c]=w.useState(""),[u,d]=w.useState(null),[h,m]=w.useState(null);w.useEffect(()=>{n==="idle"&&f()},[]);const f=async()=>{try{s("analyzing"),o(10),c("Analyzing test failure and business impact...");const b={case_id:e.id||e.case_id,title:e.title,section:e.section,priority:e.priority,status:e.status||"FAIL",description:e.description},y=await fetch("/api/uat/convert-to-sd",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!y.ok)throw new Error("Failed to convert to Strategic Directive");o(40),s("generating"),c("Generating Strategic Directive components..."),await new Promise(p=>setTimeout(p,1500)),o(70),s("validating"),c("Validating quality and completeness..."),await new Promise(p=>setTimeout(p,1e3)),o(90),c("Creating submission in database...");const x=await y.json();o(100),s("complete"),c("Strategic Directive created successfully!"),m(x),setTimeout(()=>{r?r(x):t()},3e3)}catch(b){console.error("Conversion failed:",b),s("error"),d(b.message||"Failed to convert test failure to Strategic Directive"),c("")}},g=()=>{switch(n){case"analyzing":return a.jsx(bh,{className:"h-6 w-6 text-blue-500 animate-pulse"});case"generating":return a.jsx(ro,{className:"h-6 w-6 text-purple-500 animate-pulse"});case"validating":return a.jsx(Bn,{className:"h-6 w-6 text-yellow-500 animate-pulse"});case"complete":return a.jsx(je,{className:"h-6 w-6 text-green-500"});case"error":return a.jsx(sr,{className:"h-6 w-6 text-red-500"});default:return a.jsx(We,{className:"h-6 w-6 text-gray-500"})}},v=()=>{switch(n){case"analyzing":return"from-blue-600 to-blue-500";case"generating":return"from-purple-600 to-purple-500";case"validating":return"from-yellow-600 to-yellow-500";case"complete":return"from-green-600 to-green-500";case"error":return"from-red-600 to-red-500";default:return"from-gray-600 to-gray-500"}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60] overflow-y-auto",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:`bg-gradient-to-r ${v()} text-white p-6 rounded-t-xl`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[g(),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:n==="complete"?"Strategic Directive Created!":"Creating Strategic Directive"}),a.jsx("p",{className:"text-white/90 text-sm mt-1",children:"AI-powered conversion from UAT test failure"})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",disabled:n!=="complete"&&n!=="error",children:a.jsx(yr,{className:"h-5 w-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:a.jsx("div",{className:"flex items-start gap-3",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:["Test Case: ",e.case_id]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsxs("span",{className:`text-xs px-2 py-1 rounded font-semibold ${e.priority==="critical"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":e.priority==="high"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300"}`,children:[e.priority," priority"]}),a.jsx("span",{className:"text-xs px-2 py-1 rounded font-semibold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",children:"FAILED"})]})]})})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n==="analyzing"||i>=10?"bg-blue-50 dark:bg-blue-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=10?a.jsx(je,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}):n==="analyzing"?a.jsx(rn,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${n==="analyzing"||i>=10?"text-blue-800 dark:text-blue-300":"text-gray-500 dark:text-gray-400"}`,children:"Analyze Test Failure"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Determine business impact and strategic importance"})]})]}),a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n==="generating"||i>=40?"bg-purple-50 dark:bg-purple-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=40?a.jsx(je,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}):n==="generating"?a.jsx(rn,{className:"h-5 w-5 text-purple-600 dark:text-purple-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${n==="generating"||i>=40?"text-purple-800 dark:text-purple-300":"text-gray-500 dark:text-gray-400"}`,children:"Generate SD Components"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Create comprehensive documentation and requirements"})]})]}),a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n==="validating"||i>=70?"bg-yellow-50 dark:bg-yellow-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=70?a.jsx(je,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}):n==="validating"?a.jsx(rn,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${n==="validating"||i>=70?"text-yellow-800 dark:text-yellow-300":"text-gray-500 dark:text-gray-400"}`,children:"Validate Quality"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Ensure completeness and actionability"})]})]}),a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${i>=90?"bg-green-50 dark:bg-green-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=90?a.jsx(je,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):i>=70?a.jsx(rn,{className:"h-5 w-5 text-green-600 dark:text-green-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${i>=90?"text-green-800 dark:text-green-300":"text-gray-500 dark:text-gray-400"}`,children:"Create Submission"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Store in database and link to UAT"})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full bg-gradient-to-r ${v()} transition-all duration-500`,style:{width:`${i}%`}})}),l&&n!=="complete"&&n!=="error"&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 text-center",children:l})]}),n==="complete"&&h&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(je,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Strategic Directive Created Successfully!"}),a.jsxs("div",{className:"space-y-1 text-sm text-green-700 dark:text-green-400",children:[a.jsxs("p",{children:[" Submission ID: ",a.jsx("code",{className:"font-mono bg-green-100 dark:bg-green-900/30 px-1 rounded",children:h.id})]}),a.jsxs("p",{children:[" SD ID: ",a.jsx("code",{className:"font-mono bg-green-100 dark:bg-green-900/30 px-1 rounded",children:h.sd_id})]}),a.jsxs("p",{children:[" AI Confidence: ",a.jsxs("span",{className:"font-semibold",children:[(h.confidence_score*100).toFixed(1),"%"]})]}),a.jsxs("p",{children:[" Status: ",a.jsx("span",{className:"font-semibold",children:"Pending Review"})]})]})]})]})}),n==="error"&&u&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(sr,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-red-800 dark:text-red-300 mb-1",children:"Conversion Failed"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:u})]})]})})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:n==="complete"?a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The Strategic Directive has been created and is pending review"}),a.jsxs("button",{onClick:()=>r(h),className:"px-6 py-2 bg-gradient-to-r from-green-600 to-green-500 text-white rounded-lg hover:from-green-700 hover:to-green-600 transition-colors flex items-center gap-2",children:["Continue",a.jsx(Zl,{className:"h-4 w-4"})]})]}):n==="error"?a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"}),a.jsx("button",{onClick:f,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]}):a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[a.jsx(rn,{className:"h-5 w-5 animate-spin"}),a.jsx("span",{className:"text-sm",children:"Processing... Please wait"})]})})})]})})}const Ux=ko("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function OR({testCase:e,runId:t,onClose:r,onComplete:n}){const[s,i]=w.useState(null),[o,l]=w.useState(""),[c,u]=w.useState(null),[d,h]=w.useState(!1),[m,f]=w.useState(!1),[g,v]=w.useState(!1),[b,y]=w.useState(!1),[x,p]=w.useState(null),j=w.useRef(null);w.useEffect(()=>{const D=P=>{var J;const L=(J=P.clipboardData)==null?void 0:J.items;if(L){for(const I of L)if(I.type.startsWith("image/")){P.preventDefault();const M=I.getAsFile(),V=new FileReader;V.onload=z=>{u(z.target.result)},V.readAsDataURL(M);break}}},R=j.current;if(R)return R.addEventListener("paste",D),()=>R.removeEventListener("paste",D)},[]);const E=()=>{navigator.clipboard.writeText(e.id),f(!0),setTimeout(()=>f(!1),2e3)},N=()=>{const D=`Please activate the UAT sub-agent to help me execute test case ${e.id}.

UAT TEST EXECUTION REQUEST
Test ID: ${e.id}
Title: ${e.title}
Type: ${e.test_type==="manual"?"Manual":"Automated"}
Priority: ${e.priority}
Section: ${e.section.replace(/_/g," ")}

Test Description:
${e.description||"No detailed description available"}

I need the UAT sub-agent to guide me through this test by:
1. Breaking down the specific actions I should take
2. Clarifying what expected results I should see
3. Identifying any edge cases I should check
4. Warning me about common issues to watch for
5. Helping me determine if the test passes or fails

Test Environment Details:
- Application URL: http://localhost:8080
- System: EHG Application
- Current Test Case: ${e.id}

AUTOMATED EXECUTION OPTION:
You can also run this test automatically using:
\`\`\`bash
node scripts/uat-test-executor.js ${e.id}
\`\`\`

Please engage the UAT sub-agent now to begin test guidance.`;navigator.clipboard.writeText(D),v(!0),setTimeout(()=>v(!1),2e3)},C=async()=>{if(!s){alert("Please select a test result (Pass/Fail/Blocked)");return}h(!0);try{const{error:D}=await Ux.from("uat_results").upsert({run_id:t,case_id:e.id,status:s,notes:o||null,evidence_url:c||null,recorded_at:new Date().toISOString()},{onConflict:"run_id,case_id"});if(D)throw D;p({result_id:crypto.randomUUID(),case_id:e.id,run_id:t,status:s,title:e.title,section:e.section,priority:e.priority,description:e.description,expected:"Test should pass as described",actual:s==="FAIL"?o:"Test executed successfully",notes:o,screenshot_url:c}),await Ux.from("uat_runs").update({active_case_id:null}).eq("id",t),n(s)}catch(D){console.error("Failed to save test result:",D),alert("Failed to save test result. Please try again.")}finally{h(!1)}},T=D=>{const R=D.target.files[0];if(R&&R.type.startsWith("image/")){const P=new FileReader;P.onload=L=>{u(L.target.result)},P.readAsDataURL(R)}};return a.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:[a.jsxs("div",{ref:j,className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",tabIndex:-1,children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 dark:from-purple-700 dark:to-purple-600 text-white p-6 rounded-t-xl",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Execute Test Case"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"font-mono bg-white/20 px-2 py-1 rounded",children:e.id}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${e.priority==="critical"?"bg-red-500":e.priority==="high"?"bg-yellow-500":"bg-white/30"}`,children:e.priority}),a.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-white/30",children:e.test_type==="manual"?"Manual":"Auto"})]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(yr,{className:"h-5 w-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:e.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:e.description||"No detailed description available. Please refer to the test title for guidance."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:[a.jsx(jm,{className:"h-4 w-4"}),m?"Copied!":"Copy Test ID"]}),a.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors",children:[a.jsx(TE,{className:"h-4 w-4"}),g?"Copied!":"Copy UAT Agent Prompt"]}),a.jsxs("a",{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(Sm,{className:"h-4 w-4"}),"Open Test App"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Test Result *"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>i("PASS"),className:`p-4 rounded-lg border-2 transition-all ${s==="PASS"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-green-400"}`,children:[a.jsx(je,{className:`h-6 w-6 mx-auto mb-2 ${s==="PASS"?"text-green-600":"text-gray-400"}`}),a.jsx("span",{className:`font-semibold ${s==="PASS"?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400"}`,children:"Pass"})]}),a.jsxs("button",{onClick:()=>i("FAIL"),className:`p-4 rounded-lg border-2 transition-all ${s==="FAIL"?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 hover:border-red-400"}`,children:[a.jsx(mn,{className:`h-6 w-6 mx-auto mb-2 ${s==="FAIL"?"text-red-600":"text-gray-400"}`}),a.jsx("span",{className:`font-semibold ${s==="FAIL"?"text-red-700 dark:text-red-300":"text-gray-600 dark:text-gray-400"}`,children:"Fail"})]}),a.jsxs("button",{onClick:()=>i("BLOCKED"),className:`p-4 rounded-lg border-2 transition-all ${s==="BLOCKED"?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-gray-300 dark:border-gray-600 hover:border-yellow-400"}`,children:[a.jsx(Nt,{className:`h-6 w-6 mx-auto mb-2 ${s==="BLOCKED"?"text-yellow-600":"text-gray-400"}`}),a.jsx("span",{className:`font-semibold ${s==="BLOCKED"?"text-yellow-700 dark:text-yellow-300":"text-gray-600 dark:text-gray-400"}`,children:"Blocked"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Observations & Notes"}),a.jsx("textarea",{value:o,onChange:D=>l(D.target.value),placeholder:"Describe what happened during the test, any issues found, or additional observations...",className:"w-full h-32 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Screenshot Evidence"}),c?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:c,alt:"Test screenshot",className:"w-full rounded-lg border border-gray-300 dark:border-gray-600"}),a.jsx("button",{onClick:()=>u(null),className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:a.jsx(yr,{className:"h-4 w-4"})})]}):a.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center",children:[a.jsx(xl,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Paste screenshot (Ctrl+V) or upload an image"}),a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(IE,{className:"h-4 w-4"}),a.jsx("span",{children:"Press Ctrl+V to paste"})]}),a.jsx("span",{className:"text-gray-400",children:"or"}),a.jsxs("label",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer",children:["Browse Files",a.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"hidden"})]})]})]})]}),x&&x.status==="FAIL"&&a.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"font-semibold text-indigo-800 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[a.jsx(ro,{className:"h-5 w-5"}),"Convert to Strategic Directive"]}),a.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-400 mb-3",children:"This test failure can be automatically converted into a Strategic Directive using AI to analyze the issue and create comprehensive documentation."}),a.jsxs("ul",{className:"text-xs text-indigo-600 dark:text-indigo-500 space-y-1",children:[a.jsx("li",{children:" AI analyzes business impact and priority"}),a.jsx("li",{children:" Generates complete SD documentation"}),a.jsx("li",{children:" Links to this UAT test for traceability"}),a.jsx("li",{children:" Creates actionable requirements"})]})]}),a.jsxs("button",{onClick:()=>y(!0),className:"ml-4 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg flex items-center gap-2",children:[a.jsx(We,{className:"h-4 w-4"}),"Create SD"]})]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:" Testing Tips"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:' Click "Copy UAT Agent Prompt" to get AI assistance for this test'}),a.jsx("li",{children:" Take screenshots of any issues or important results"}),a.jsx("li",{children:" Paste screenshots directly with Ctrl+V (no need to save first)"}),a.jsx("li",{children:" Add detailed notes about what you observed"}),a.jsx("li",{children:` Mark as "Blocked" if you can't complete the test due to dependencies`})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:C,disabled:!s||d,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${s&&!d?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[d&&a.jsx(rn,{className:"h-4 w-4 animate-spin"}),d?"Saving...":"Save Test Result"]})]})})]}),b&&x&&a.jsx(r1,{testResult:x,onClose:()=>y(!1),onSuccess:D=>{y(!1),alert(`Strategic Directive created successfully!
Submission ID: ${D.id}
SD ID: ${D.sd_id}`)}})]})}const Qm={Main:[{value:"chairman-console",label:"Chairman Console",route:"/chairman"},{value:"eva-assistant",label:"EVA Assistant",route:"/eva"},{value:"ventures",label:"Ventures",route:"/ventures"},{value:"portfolios",label:"Portfolios",route:"/portfolios"}],"AI Orchestration":[{value:"eva-dashboard",label:"EVA Dashboard",route:"/eva-dashboard"},{value:"workflows",label:"Workflows",route:"/workflows"},{value:"ai-agents",label:"AI Agents",route:"/ai-agents"},{value:"eva-knowledge-base",label:"EVA Knowledge Base",route:"/knowledge-base"}],"Analytics & Reports":[{value:"analytics",label:"Analytics",route:"/analytics"},{value:"reports",label:"Reports",route:"/reports"},{value:"insights",label:"Insights",route:"/insights"},{value:"risk-forecasting",label:"Risk Forecasting",route:"/risk-forecasting"},{value:"advanced-analytics",label:"Advanced Analytics",route:"/advanced-analytics"},{value:"mobile-companion",label:"Mobile Companion",route:"/mobile"}],Administration:[{value:"governance",label:"Governance",route:"/governance"},{value:"integration-hub",label:"Integration Hub",route:"/integrations"},{value:"enhanced-security",label:"Enhanced Security",route:"/security"},{value:"settings",label:"Settings",route:"/settings"}],"System & Authentication":[{value:"authentication",label:"Authentication & Login",route:"/login"},{value:"landing",label:"Landing Page",route:"/"}],"Cross-Cutting":[{value:"navigation",label:"Navigation & Routing"},{value:"ui-components",label:"UI Components"},{value:"forms",label:"Forms & Validation"},{value:"notifications",label:"Notifications"},{value:"dark-mode",label:"Dark Mode / Theming"},{value:"responsive",label:"Responsive Design"},{value:"accessibility",label:"Accessibility"},{value:"performance-general",label:"Performance & Loading"}],Other:[{value:"edge-cases",label:"Edge Cases"},{value:"regression",label:"Regression Tests"},{value:"exploratory",label:"Exploratory Testing"},{value:"other",label:"Other/Miscellaneous"}]},MR=ko("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function $R({onClose:e,onSave:t}){const[r,n]=w.useState({title:"",section:"",priority:"medium",test_type:"manual",description:""}),[s,i]=w.useState({}),[o,l]=w.useState(!1),[c,u]=w.useState(!1),d=g=>{const{name:v,value:b}=g.target;n(y=>({...y,[v]:b})),s[v]&&i(y=>({...y,[v]:""}))},h=()=>{const g={};return r.title.trim()||(g.title="Title is required"),r.section||(g.section="Section is required"),r.description.trim()||(g.description="Description is required"),i(g),Object.keys(g).length===0},m=()=>{const g=r.section.toUpperCase().replace(/_/g,"-"),v=Date.now().toString(36).toUpperCase();return`MANUAL-${g}-${v}`},f=async g=>{if(g.preventDefault(),!!h()){l(!0),u(!1);try{const v=m(),{error:b}=await MR.from("uat_cases").insert({id:v,section:r.section,title:r.title,priority:r.priority,test_type:r.test_type,description:r.description});if(b)throw b;u(!0),t&&t({id:v,...r}),setTimeout(()=>{n({title:"",section:"",priority:"medium",test_type:"manual",description:""}),u(!1)},2e3)}catch(v){console.error("Failed to create test case:",v),i({submit:v.message||"Failed to create test case. Please try again."})}finally{l(!1)}}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-500 dark:from-green-700 dark:to-green-600 text-white p-6 rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Create New Test Case"}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(yr,{className:"h-5 w-5"})})]})}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[c&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(je,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"text-green-800 dark:text-green-300",children:"Test case created successfully!"})]}),s.submit&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(sr,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),a.jsx("span",{className:"text-red-800 dark:text-red-300",children:s.submit})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Case Title *"}),a.jsx("input",{type:"text",name:"title",value:r.title,onChange:d,placeholder:"Enter a descriptive title for the test case",className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 ${s.title?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-green-500"}`}),s.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Section *"}),a.jsxs("select",{name:"section",value:r.section,onChange:d,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 ${s.section?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-green-500"}`,children:[a.jsx("option",{value:"",children:"Select a section..."}),Object.entries(Qm).map(([g,v])=>a.jsx("optgroup",{label:g,children:v.map(b=>a.jsx("option",{value:b.value,children:b.label},b.value))},g))]}),s.section&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.section})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a.jsxs("select",{name:"priority",value:r.priority,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Type"}),a.jsxs("select",{name:"test_type",value:r.test_type,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"manual",children:"Manual"}),a.jsx("option",{value:"automatic",children:"Automatic"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Description *"}),a.jsx("textarea",{name:"description",value:r.description,onChange:d,placeholder:"Describe the steps to execute this test, expected results, and any important notes...",rows:6,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 resize-none ${s.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-green-500"}`}),s.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.description}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Include step-by-step instructions, expected outcomes, and any prerequisites"})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:" Tips for Good Test Cases"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:" Use clear, action-oriented titles"}),a.jsx("li",{children:" Include specific steps in the description"}),a.jsx("li",{children:" Define clear pass/fail criteria"}),a.jsx("li",{children:" Mark as Critical if failure blocks key functionality"}),a.jsx("li",{children:" Choose Manual for user interaction tests"})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:f,disabled:o||c,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${o||c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[o&&a.jsx(rn,{className:"h-4 w-4 animate-spin"}),c?a.jsxs(a.Fragment,{children:[a.jsx(je,{className:"h-4 w-4"}),"Created!"]}):a.jsxs(a.Fragment,{children:[a.jsx(ys,{className:"h-4 w-4"}),"Create Test Case"]})]})]})})]})})}const td=ko("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function FR({testCase:e,onClose:t,onSave:r,onDelete:n}){const[s,i]=w.useState({title:e.title||"",section:e.section||"",priority:e.priority||"medium",test_type:e.test_type||"manual",description:e.description||""}),[o,l]=w.useState({}),[c,u]=w.useState(!1),[d,h]=w.useState(!1),[m,f]=w.useState(!1),[g,v]=w.useState(!1),b=j=>{const{name:E,value:N}=j.target;i(C=>({...C,[E]:N})),o[E]&&l(C=>({...C,[E]:""}))},y=()=>{const j={};return s.title.trim()||(j.title="Title is required"),s.section||(j.section="Section is required"),s.description.trim()||(j.description="Description is required"),l(j),Object.keys(j).length===0},x=async j=>{if(j.preventDefault(),!!y()){u(!0),f(!1);try{const{error:E}=await td.from("uat_cases").update({title:s.title,section:s.section,priority:s.priority,test_type:s.test_type,description:s.description}).eq("id",e.id);if(E)throw E;f(!0),r&&r({...e,...s}),setTimeout(()=>{t()},1500)}catch(E){console.error("Failed to update test case:",E),l({submit:E.message||"Failed to update test case. Please try again."})}finally{u(!1)}}},p=async()=>{if(!g){v(!0);return}h(!0);try{await td.from("uat_results").delete().eq("case_id",e.id);const{error:j}=await td.from("uat_cases").delete().eq("id",e.id);if(j)throw j;n&&n(e.id),t()}catch(j){console.error("Failed to delete test case:",j),l({submit:j.message||"Failed to delete test case. Please try again."}),v(!1)}finally{h(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 dark:from-blue-700 dark:to-blue-600 text-white p-6 rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Edit Test Case"}),a.jsxs("p",{className:"text-blue-100 mt-1",children:["ID: ",e.id]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(yr,{className:"h-5 w-5"})})]})}),a.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[m&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(je,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"text-green-800 dark:text-green-300",children:"Test case updated successfully!"})]}),o.submit&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(sr,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),a.jsx("span",{className:"text-red-800 dark:text-red-300",children:o.submit})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Case Title *"}),a.jsx("input",{type:"text",name:"title",value:s.title,onChange:b,placeholder:"Enter a descriptive title for the test case",className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 ${o.title?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`}),o.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Section *"}),a.jsxs("select",{name:"section",value:s.section,onChange:b,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 ${o.section?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`,children:[a.jsx("option",{value:"",children:"Select a section..."}),Object.entries(Qm).map(([j,E])=>a.jsx("optgroup",{label:j,children:E.map(N=>a.jsx("option",{value:N.value,children:N.label},N.value))},j))]}),o.section&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.section})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a.jsxs("select",{name:"priority",value:s.priority,onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Type"}),a.jsxs("select",{name:"test_type",value:s.test_type,onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"manual",children:"Manual"}),a.jsx("option",{value:"automatic",children:"Automatic"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Description *"}),a.jsx("textarea",{name:"description",value:s.description,onChange:b,placeholder:"Describe the steps to execute this test, expected results, and any important notes...",rows:6,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 resize-none ${o.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`}),o.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.description}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Include step-by-step instructions, expected outcomes, and any prerequisites"})]}),g&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800 dark:text-red-300 font-semibold mb-2",children:" Are you sure you want to delete this test case?"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:"This will permanently remove the test case and all associated test results."})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("button",{type:"button",onClick:p,disabled:d,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${g?"bg-red-600 text-white hover:bg-red-700":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50"} ${d?"opacity-50 cursor-not-allowed":""}`,children:[d&&a.jsx(rn,{className:"h-4 w-4 animate-spin"}),a.jsx(no,{className:"h-4 w-4"}),g?"Confirm Delete":"Delete"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:x,disabled:c||m,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${c||m?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[c&&a.jsx(rn,{className:"h-4 w-4 animate-spin"}),m?a.jsxs(a.Fragment,{children:[a.jsx(je,{className:"h-4 w-4"}),"Saved!"]}):a.jsxs(a.Fragment,{children:[a.jsx(ys,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})})]})})}function zR(){var J,I,M,V,z,A,B,S;const[e,t]=w.useState(null),[r,n]=w.useState(null),[s,i]=w.useState(null),[o,l]=w.useState({progress:[],errors:[],alerts:[]}),[c,u]=w.useState("EHG"),[d,h]=w.useState(!0),[m,f]=w.useState("progress"),[g,v]=w.useState(!1),[b,y]=w.useState(!1),[x,p]=w.useState(!1),j=async()=>{try{const re=await(await fetch("/api/testing/campaign/status")).json();t(re)}catch(U){console.error("Failed to fetch campaign status:",U)}},E=async()=>{try{const re=await(await fetch("/api/testing/campaign/apps")).json();n(re)}catch(U){console.error("Failed to fetch app counts:",U)}},N=async()=>{try{const re=await(await fetch("/api/testing/campaign/health")).json();i(re)}catch(U){console.error("Failed to fetch health:",U)}},C=async()=>{try{const[U,re,_]=await Promise.all([fetch("/api/testing/campaign/logs/progress?limit=50"),fetch("/api/testing/campaign/logs/errors?limit=50"),fetch("/api/testing/campaign/logs/alerts?limit=20")]),[Ne,tt,be]=await Promise.all([U.json(),re.json(),_.json()]);l({progress:Ne.lines||[],errors:tt.lines||[],alerts:be.lines||[]})}catch(U){console.error("Failed to fetch logs:",U)}},T=async()=>{v(!0);try{const U=await fetch("/api/testing/campaign/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetApplication:c,smokeOnly:x})});if(U.ok)setTimeout(j,2e3);else{const re=await U.json();alert(`Failed to start campaign: ${re.error}`)}}catch(U){alert(`Failed to start campaign: ${U.message}`)}finally{v(!1),y(!1)}},D=async()=>{if(confirm("Stop the testing campaign? Tests in progress will be interrupted.")){v(!0);try{const U=await fetch("/api/testing/campaign/stop",{method:"POST"});if(U.ok)setTimeout(j,1e3);else{const re=await U.json();alert(`Failed to stop campaign: ${re.error}`)}}catch(U){alert(`Failed to stop campaign: ${U.message}`)}finally{v(!1)}}},R=()=>{j(),E(),N(),C()};w.useEffect(()=>{R();const U=setInterval(R,1e4);return()=>clearInterval(U)},[]);const L=(()=>{if(!e||e.status==="not_started")return{icon:"",color:"text-gray-500",label:"Not Started"};switch(e.status){case"running":return{icon:"",color:"text-green-600",label:"HEALTHY"};case"complete":return{icon:"",color:"text-blue-600",label:"COMPLETE"};case"crashed":return{icon:"",color:"text-red-600",label:"CRASHED"};default:return{icon:"",color:"text-yellow-600",label:e.status.toUpperCase()}}})();return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden mb-6",children:[a.jsxs("button",{onClick:()=>h(!d),className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-500 dark:from-indigo-700 dark:to-indigo-600 text-white p-4 flex items-center justify-between hover:from-indigo-700 hover:to-indigo-600 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(KE,{className:"h-6 w-6"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Testing Campaign Management"}),(e==null?void 0:e.running)&&a.jsxs("span",{className:"bg-green-400/30 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[a.jsx(Pc,{className:"h-4 w-4 animate-pulse"}),"Running"]})]}),d?a.jsx(ec,{className:"h-5 w-5"}):a.jsx(Zt,{className:"h-5 w-5"})]}),d&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[a.jsxs("label",{className:"flex items-center gap-2 text-base font-semibold text-gray-700 dark:text-gray-300 mb-3",children:[a.jsx(an,{className:"h-5 w-5"}),"Target Application"]}),a.jsxs("select",{value:c,onChange:U=>u(U.target.value),disabled:e==null?void 0:e.running,className:"w-full px-4 py-2 border border-blue-300 dark:border-blue-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-medium text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("option",{value:"EHG",children:"EHG (Customer Application) - RECOMMENDED"}),a.jsx("option",{value:"EHG_Engineer",children:"EHG_Engineer (Dashboard)"})]}),r&&a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-blue-700 dark:text-blue-300 text-base",children:"EHG"}),a.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-base",children:[((J=r.EHG)==null?void 0:J.tested)||0,"/",((I=r.EHG)==null?void 0:I.completed)||0," tested",((M=r.EHG)==null?void 0:M.untested)>0&&a.jsxs("span",{className:"text-orange-600 dark:text-orange-400 ml-2",children:["(",r.EHG.untested," remaining)"]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300 text-base",children:"EHG_Engineer"}),a.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-base",children:[((V=r.EHG_Engineer)==null?void 0:V.tested)||0,"/",((z=r.EHG_Engineer)==null?void 0:z.completed)||0," tested",((A=r.EHG_Engineer)==null?void 0:A.untested)>0&&a.jsxs("span",{className:"text-orange-600 dark:text-orange-400 ml-2",children:["(",r.EHG_Engineer.untested," remaining)"]})]})]})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:x,onChange:U=>p(U.target.checked),disabled:e==null?void 0:e.running,className:"w-5 h-5 text-green-600 bg-white border-green-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:" Fast Mode (Smoke Tests Only)"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:x?a.jsx(a.Fragment,{children:"5x faster (~60s per SD, smoke tests only) vs. Full testing (~5min per SD with E2E)"}):a.jsx(a.Fragment,{children:"Full testing includes unit tests + E2E tests (~5min per SD)"})})]})]})}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:L.icon}),a.jsxs("div",{children:[a.jsx("div",{className:`text-lg font-bold ${L.color}`,children:L.label}),(e==null?void 0:e.targetApplication)&&a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Testing: ",a.jsx("span",{className:"font-semibold",children:e.targetApplication})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:R,className:"p-2 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",title:"Refresh",children:a.jsx(xr,{className:"h-4 w-4"})}),e!=null&&e.running?a.jsxs("button",{onClick:D,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[a.jsx(Em,{className:"h-4 w-4"}),"Stop"]}):a.jsxs("button",{onClick:()=>y(!0),disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[a.jsx(WE,{className:"h-4 w-4"}),"Start Campaign"]})]})]}),(e==null?void 0:e.running)&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress"}),a.jsxs("span",{className:"font-semibold",children:[e.progress," (",e.percent,"%)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.percent}%`}})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Current SD"}),a.jsx("div",{className:"font-mono text-xs",children:e.currentSD||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Last Update"}),a.jsx("div",{className:"font-mono text-xs",children:e.lastUpdate?new Date(e.lastUpdate).toLocaleTimeString():"N/A"})]})]})]})]}),(s==null?void 0:s.checkpoint)&&a.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 text-base font-medium mb-1",children:[a.jsx(We,{className:"h-5 w-5"}),"Tested"]}),a.jsx("div",{className:"text-2xl font-bold",children:s.checkpoint.tested})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-base font-medium mb-1",children:[a.jsx(je,{className:"h-5 w-5"}),"Passed"]}),a.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.checkpoint.passed}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.checkpoint.tested>0?(s.checkpoint.passed/s.checkpoint.tested*100).toFixed(1):0,"%"]})]}),a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3 border border-red-200 dark:border-red-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-base font-medium mb-1",children:[a.jsx(Nt,{className:"h-5 w-5"}),"Failed"]}),a.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.checkpoint.failed}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.checkpoint.tested>0?(s.checkpoint.failed/s.checkpoint.tested*100).toFixed(1):0,"%"]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3 border border-yellow-200 dark:border-yellow-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-400 text-base font-medium mb-1",children:[a.jsx(Pr,{className:"h-5 w-5"}),"Errors"]}),a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.checkpoint.errors}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.checkpoint.tested>0?(s.checkpoint.errors/s.checkpoint.tested*100).toFixed(1):0,"%"]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-600",children:["progress","errors","alerts"].map(U=>a.jsxs("button",{onClick:()=>f(U),className:`px-4 py-2 text-sm font-medium transition-colors ${m===U?"bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-600":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[U.charAt(0).toUpperCase()+U.slice(1),o[U].length>0&&a.jsx("span",{className:"ml-2 bg-gray-200 dark:bg-gray-600 px-2 py-0.5 rounded-full text-xs",children:o[U].length})]},U))}),a.jsx("div",{className:"p-4 bg-gray-900 text-gray-100 font-mono text-sm max-h-64 overflow-y-auto",children:o[m].length>0?o[m].map((U,re)=>a.jsx("div",{className:"py-1",children:U},re)):a.jsxs("div",{className:"text-gray-500 text-center py-8 text-base",children:["No ",m," logs yet"]})})]})]}),b&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Start Testing Campaign?"}),a.jsxs("div",{className:"space-y-3 mb-6 text-base",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Application:"}),a.jsx("span",{className:"font-semibold",children:c})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"SDs to test:"}),a.jsx("span",{className:"font-semibold",children:((B=r==null?void 0:r[c])==null?void 0:B.untested)||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Estimated time:"}),a.jsxs("span",{className:"font-semibold",children:["~",Math.round((((S=r==null?void 0:r[c])==null?void 0:S.untested)||0)*5/60)," hours"]})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-6 text-base",children:a.jsxs("p",{children:["This will run ",a.jsx("strong",{children:"REAL tests"})," against the"," ",a.jsx("strong",{children:c})," application at"," ",a.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 rounded text-sm",children:c==="EHG"?"/mnt/c/_EHG/ehg":"/mnt/c/_EHG/EHG_Engineer"})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:T,disabled:g,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:g?"Starting...":"Start Campaign"})]})]})})]})}const Yr=ko("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function UR(){const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(null),[o,l]=w.useState([]),[c,u]=w.useState(null),[d,h]=w.useState(null),[m,f]=w.useState(!0),[g,v]=w.useState(!1),[b,y]=w.useState("critical"),[x,p]=w.useState("not_tested"),[j,E]=w.useState("all"),[N,C]=w.useState("manual"),[T,D]=w.useState(""),[R,P]=w.useState(!1),[L,J]=w.useState(null),[I,M]=w.useState(null),[V,z]=w.useState(!1);w.useEffect(()=>{A(),U();const O=setInterval(()=>{B()},300*1e3);return()=>clearInterval(O)},[]),w.useEffect(()=>{if(r){S(r);const O=wr(r);return()=>O.unsubscribe()}},[r]);const A=async()=>{const{data:O,error:Y}=await Yr.from("uat_runs").select("*").order("started_at",{ascending:!1});!Y&&O&&(t(O),O.length>0&&!r&&n(O[0].id)),f(!1),v(!1)},B=async()=>{v(!0),await A(),r&&await S(r)},S=async O=>{const{data:Y}=await Yr.from("v_uat_run_stats").select("*").eq("run_id",O).single();i(Y),u((Y==null?void 0:Y.active_case_id)||null),await re(O)},U=async()=>{const{data:O}=await Yr.from("uat_cases").select("*").order("sort_order",{ascending:!0}).order("section").order("priority",{ascending:!1});l(O||[])},re=async O=>{if(!O)return;const{data:Y}=await Yr.from("uat_results").select("case_id, status").eq("run_id",O),ae=new Map((Y==null?void 0:Y.map(Ge=>[Ge.case_id,Ge.status]))||[]);l(Ge=>Ge.map(vt=>({...vt,status:ae.get(vt.id)||null})))},_=async O=>{let Y=r;if(!Y){const{data:ae,error:Ge}=await Yr.from("uat_runs").insert({app:"EHG",env_url:"http://localhost:5173",app_version:"1.0.0",browser:"Chrome",role:"Admin",notes:"UAT testing session",started_at:new Date().toISOString(),created_by:"UAT Dashboard"}).select().single();if(Ge){console.error("Failed to create run:",Ge);return}Y=ae.id,n(Y),t(vt=>[ae,...vt])}try{await Yr.from("uat_runs").update({active_case_id:O.id}).eq("id",Y),u(O.id)}catch(ae){console.warn("Could not set active test in database:",ae),u(O.id)}h({...O,runId:Y})},Ne=O=>{l(Y=>Y.map(ae=>ae.id===d.id?{...ae,status:O}:ae)),h(null),r&&S(r)},tt=()=>{h(null)},be=O=>{U(),P(!1)},xt=O=>{U(),J(null)},Tt=O=>{l(Y=>Y.filter(ae=>ae.id!==O)),J(null)},wr=O=>Yr.channel(`uat-${O}`).on("postgres_changes",{event:"*",schema:"public",table:"uat_results",filter:`run_id=eq.${O}`},()=>{S(O)}).subscribe(),ct=o.filter(O=>{if(b!=="all"&&O.priority!==b||x!=="all"&&(x==="not_tested"&&O.status||x!=="not_tested"&&O.status!==x))return!1;if(j!=="all"){const Y=(O.section||"").toLowerCase(),ae=j.toLowerCase();if(Y!==ae)return!1}if(N!=="all"&&O.test_type!==N)return!1;if(T){const Y=T.toLowerCase();if(!O.id.toLowerCase().includes(Y)&&!O.title.toLowerCase().includes(Y)&&!(O.section||"").toLowerCase().includes(Y))return!1}return!0}),rt={all:o.length,PASS:o.filter(O=>O.status==="PASS").length,FAIL:o.filter(O=>O.status==="FAIL").length,BLOCKED:o.filter(O=>O.status==="BLOCKED").length,NA:o.filter(O=>O.status==="NA").length,not_tested:o.filter(O=>!O.status).length},Q={all:o.length,critical:o.filter(O=>O.priority==="critical").length,high:o.filter(O=>O.priority==="high").length,medium:o.filter(O=>O.priority==="medium").length,low:o.filter(O=>O.priority==="low").length},Xe=O=>o.filter(Y=>{if(b!=="all"&&Y.priority!==b||x!=="all"&&(x==="not_tested"&&Y.status||x!=="not_tested"&&Y.status!==x)||N!=="all"&&Y.test_type!==N)return!1;if(T){const vt=T.toLowerCase();if(!Y.id.toLowerCase().includes(vt)&&!Y.title.toLowerCase().includes(vt)&&!(Y.section||"").toLowerCase().includes(vt))return!1}if(O==="all")return!0;const ae=(Y.section||"").toLowerCase(),Ge=O.toLowerCase();return ae===Ge}).length,Ir=O=>o.filter(Y=>{if(b!=="all"&&Y.priority!==b||x!=="all"&&(x==="not_tested"&&Y.status||x!=="not_tested"&&Y.status!==x))return!1;if(j!=="all"){const ae=(Y.section||"").toLowerCase(),Ge=j.toLowerCase();if(ae!==Ge)return!1}if(T){const ae=T.toLowerCase();if(!Y.id.toLowerCase().includes(ae)&&!Y.title.toLowerCase().includes(ae)&&!(Y.section||"").toLowerCase().includes(ae))return!1}return O==="all"?!0:O==="automatic"?Y.test_type==="automatic"||!Y.test_type:O==="manual"?Y.test_type==="manual":!1}).length,yt=()=>{y("all"),p("all"),E("all"),C("all"),D("")},Mt=b!=="all"||x!=="all"||j!=="all"||N!=="all"||T;return m?a.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 dark:border-blue-400 mx-auto mb-4"}),a.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading UAT Dashboard..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-3 sm:p-4 md:p-6",children:[a.jsx(zR,{}),a.jsx("div",{className:"mb-6 md:mb-8",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 rounded-lg shadow-lg",children:a.jsx(Si,{className:"h-8 w-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"UAT Testing Dashboard"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Monitor and manage your user acceptance tests"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all shadow-sm hover:shadow font-semibold",children:[a.jsx(Cm,{className:"h-4 w-4"}),"Create Test"]}),a.jsxs("button",{onClick:B,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-md transition-shadow disabled:opacity-50",children:[a.jsx(xr,{className:`h-4 w-4 ${g?"animate-spin":""}`}),"Refresh"]})]})]})}),s&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-blue-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Total Tests"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-800 dark:text-gray-100",children:s.executed})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600 dark:text-blue-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-green-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Passed"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-green-600",children:s.passed})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-green-100 dark:bg-green-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(je,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-red-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Failed"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-red-600",children:s.failed})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-red-100 dark:bg-red-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(mn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600 dark:text-red-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-yellow-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Blocked"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-yellow-600",children:s.blocked})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(Nt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-yellow-600 dark:text-yellow-400"})})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden mb-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 dark:from-purple-700 dark:to-purple-600 text-white p-4",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(We,{className:"h-5 w-5"}),"Test Cases",a.jsxs("span",{className:"ml-2 bg-white/20 px-2 py-1 rounded-full text-sm",children:[rt.PASS,"/",o.length," passed"]}),c&&a.jsxs("span",{className:"ml-auto bg-yellow-400/30 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[a.jsx(Bn,{className:"h-4 w-4"}),"Active: ",c]})]})}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600",children:[a.jsxs("button",{onClick:()=>z(!V),className:"w-full p-4 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tc,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),a.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:["Filters",Mt&&a.jsx("span",{className:"ml-2 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded-full",children:"Active"})]})]}),a.jsx(Zt,{className:`h-5 w-5 text-gray-600 dark:text-gray-400 transition-transform ${V?"rotate-180":""}`})]}),V&&a.jsxs("div",{className:"p-4 pt-0",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Priority"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>y("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="all"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["All (",Q.all,")"]}),a.jsxs("button",{onClick:()=>y("critical"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="critical"?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:["Critical (",Q.critical,")"]}),a.jsxs("button",{onClick:()=>y("high"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="high"?"bg-yellow-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"}`,children:["High (",Q.high,")"]}),a.jsxs("button",{onClick:()=>y("medium"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="medium"?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:["Medium (",Q.medium,")"]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Status"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>p("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="all"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["All (",rt.all,")"]}),a.jsxs("button",{onClick:()=>p("PASS"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="PASS"?"bg-green-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-green-50 dark:hover:bg-green-900/20"}`,children:["Pass (",rt.PASS,")"]}),a.jsxs("button",{onClick:()=>p("FAIL"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="FAIL"?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:["Fail (",rt.FAIL,")"]}),a.jsxs("button",{onClick:()=>p("not_tested"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="not_tested"?"bg-gray-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["Not Tested (",rt.not_tested,")"]}),rt.BLOCKED>0&&a.jsxs("button",{onClick:()=>p("BLOCKED"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x==="BLOCKED"?"bg-yellow-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"}`,children:["Blocked (",rt.BLOCKED,")"]})]})]}),a.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Section"}),a.jsxs("select",{value:j,onChange:O=>E(O.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[a.jsxs("option",{value:"all",children:["All Sections (",Xe("all"),")"]}),Object.entries(Qm).map(([O,Y])=>a.jsx("optgroup",{label:O,children:Y.map(ae=>{const Ge=Xe(ae.value);return a.jsxs("option",{value:ae.value,children:[ae.label," (",Ge,")"]},ae.value)})},O))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Test Type"}),a.jsxs("select",{value:N,onChange:O=>C(O.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[a.jsxs("option",{value:"all",children:["All Types (",Ir("all"),")"]}),a.jsxs("option",{value:"automatic",children:["Automatic (",Ir("automatic"),")"]}),a.jsxs("option",{value:"manual",children:["Manual (",Ir("manual"),")"]})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Search test ID, title, or section...",value:T,onChange:O=>D(O.target.value),className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"}),Mt&&a.jsx("button",{onClick:yt,className:"px-4 py-1.5 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Clear Filters"})]}),Mt&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Showing ",ct.length," of ",o.length," tests"]})]})]}),a.jsx("div",{className:"p-4",children:o.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(We,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"Loading test cases..."})]}):ct.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(We,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No tests match your filters"}),a.jsx("button",{onClick:yt,className:"mt-2 text-purple-600 dark:text-purple-400 hover:underline",children:"Clear filters"})]}):a.jsx("div",{className:"space-y-2",children:ct.map(O=>a.jsx("div",{className:`border rounded-lg p-3 transition-all ${c===O.id?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 shadow-md":"border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-600"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`font-semibold ${c===O.id?"text-purple-700 dark:text-purple-300":"text-gray-800 dark:text-gray-200"}`,children:O.id}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${O.priority==="critical"?"bg-red-100 text-red-700":O.priority==="high"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:O.priority}),O.status&&a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${O.status==="PASS"?"bg-green-100 text-green-700":O.status==="FAIL"?"bg-red-100 text-red-700":O.status==="BLOCKED"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:O.status}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${O.test_type==="manual"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:O.test_type==="manual"?"Manual":"Auto"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:O.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Section: ",O.section]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[c===O.id?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-purple-600 dark:text-purple-400 font-semibold",children:"ACTIVE"}),a.jsx("button",{onClick:()=>_(O),className:"px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Continue Test"})]}):O.status?a.jsx("button",{onClick:()=>_(O),className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm",children:"Retest"}):a.jsx("button",{onClick:()=>_(O),className:"px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Start Test"}),O.status==="FAIL"&&a.jsxs("button",{onClick:()=>M(O),className:"px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-colors text-sm flex items-center gap-1",title:"Create Strategic Directive from this failed test using AI",children:[a.jsx(Bn,{className:"h-3 w-3"}),"Create SD"]}),a.jsx("button",{onClick:()=>J(O),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",title:"Edit test case",children:a.jsx(rc,{className:"h-4 w-4"})}),a.jsx("button",{onClick:async()=>{if(window.confirm(`Are you sure you want to delete test case ${O.id}?

This will also clear any active references and delete associated results.`)){const{data:Y,error:ae}=await Yr.rpc("delete_uat_case",{case_id_to_delete:O.id});ae?alert("Failed to delete test case: "+ae.message):Y&&!Y.success?alert("Failed to delete test case: "+Y.error):Tt(O.id)}},className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",title:"Delete test case",children:a.jsx(no,{className:"h-4 w-4"})})]})]})},O.id))})})]})]}),!r&&o.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-center",children:'No active test run. Click "Start Test" on any test case to begin a new session.'})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 dark:from-purple-700 dark:to-purple-600 text-white p-4",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(We,{className:"h-5 w-5"}),"Available Test Cases",a.jsxs("span",{className:"ml-auto bg-white/20 px-2 py-1 rounded-full text-sm",children:[o.length," tests ready"]})]})}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600 p-4",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Priority"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>y("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="all"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["All (",Q.all,")"]}),a.jsxs("button",{onClick:()=>y("critical"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="critical"?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:["Critical (",Q.critical,")"]}),a.jsxs("button",{onClick:()=>y("high"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="high"?"bg-yellow-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"}`,children:["High (",Q.high,")"]}),a.jsxs("button",{onClick:()=>y("medium"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${b==="medium"?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:["Medium (",Q.medium,")"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Search test ID, title, or section...",value:T,onChange:O=>D(O.target.value),className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"}),Mt&&a.jsx("button",{onClick:yt,className:"px-4 py-1.5 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Clear Filters"})]}),Mt&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Showing ",ct.length," of ",o.length," tests"]})]}),a.jsx("div",{className:"p-4",children:ct.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(We,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No tests match your filters"}),a.jsx("button",{onClick:yt,className:"mt-2 text-purple-600 dark:text-purple-400 hover:underline",children:"Clear filters"})]}):a.jsx("div",{className:"space-y-2",children:ct.map(O=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-3 hover:border-purple-300 dark:hover:border-purple-600 transition-all",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:O.id}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${O.priority==="critical"?"bg-red-100 text-red-700":O.priority==="high"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:O.priority})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:O.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Section: ",O.section]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>setActiveTest(O.id),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:"Start Test"}),O.status==="FAIL"&&a.jsxs("button",{onClick:()=>M(O),className:"px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-colors text-sm flex items-center gap-1",title:"Create Strategic Directive from this failed test using AI",children:[a.jsx(Bn,{className:"h-3 w-3"}),"Create SD"]}),a.jsx("button",{onClick:()=>J(O),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",title:"Edit test case",children:a.jsx(rc,{className:"h-4 w-4"})}),a.jsx("button",{onClick:async()=>{if(window.confirm(`Are you sure you want to delete test case ${O.id}?

This will also clear any active references and delete associated results.`)){const{data:Y,error:ae}=await Yr.rpc("delete_uat_case",{case_id_to_delete:O.id});ae?alert("Failed to delete test case: "+ae.message):Y&&!Y.success?alert("Failed to delete test case: "+Y.error):Tt(O.id)}},className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",title:"Delete test case",children:a.jsx(no,{className:"h-4 w-4"})})]})]})},O.id))})})]})]}),!r&&o.length===0&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-12 text-center",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading test cases..."})}),d&&a.jsx(OR,{testCase:d,runId:d.runId,onClose:tt,onComplete:Ne}),R&&a.jsx($R,{onClose:()=>P(!1),onSave:be}),L&&a.jsx(FR,{testCase:L,onClose:()=>J(null),onSave:xt,onDelete:Tt}),I&&a.jsx(r1,{testResult:I,onClose:()=>M(null),onSuccess:O=>{M(null),alert(`Strategic Directive created successfully!
Submission ID: ${O.id}
SD ID: ${O.sd_id}`)}})]})}const el=window.location.hostname==="localhost",na={log:(...e)=>{el&&console.log(...e)},error:(...e)=>{console.error(...e)},warn:(...e)=>{el&&console.warn(...e)},info:(...e)=>{el&&console.info(...e)},debug:(...e)=>{el&&console.debug(...e)}};function BR(){var j,E,N;const[e,t]=w.useState({leoProtocol:{version:"detecting...",activeRole:null,currentSD:null,currentPRD:null,phase:null},context:{usage:0,total:18e4,breakdown:{}},handoffs:[],strategicDirectives:[],prds:[],checklists:{},progress:{overall:0,byPhase:{}}}),[r,n]=w.useState(!1),[s,i]=w.useState(!1),{preferences:o}=BS(),[l,c]=mu("checklists",{}),[u,d]=mu("sidebarCollapsed",!1),[h,m]=mu("compactMode",!1),f=US("ws://localhost:3000",{onOpen:()=>{n(!0),na.log("Connected to dashboard server")},onMessage:C=>{try{const T=JSON.parse(C.data);T.type==="state"&&t(T.data)}catch(T){na.error("Error parsing WebSocket message:",T)}},onClose:()=>{n(!1),na.log("Disconnected from dashboard server")},onError:C=>{na.error("WebSocket error:",C)}});w.useEffect(()=>{fetch("/api/state").then(C=>C.json()).then(C=>{const T={...C,checklists:{...C.checklists,...l}};t(T)}).catch(C=>na.error("Error loading state:",C))},[]),w.useEffect(()=>{Object.keys(e.checklists).length>0&&c(e.checklists)},[e.checklists]),w.useEffect(()=>{o.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[o.theme]);const g=()=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"refresh"}))},v=(C,T,D)=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"updateChecklist",data:{documentId:C,itemIndex:T,checked:D}}))},b=(C,T)=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"requestHandoff",data:{type:C,checklist:T}}))},y=()=>{f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"compactContext"}))},x=C=>{t(T=>({...T,leoProtocol:{...T.leoProtocol,currentSD:C}})),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"setActiveSD",data:{sdId:C}}))},p=(C,T)=>{t(D=>({...D,strategicDirectives:D.strategicDirectives.map(R=>R.id===C?{...R,status:T}:R)})),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"updateSDStatus",data:{sdId:C,status:T}}))};return a.jsx(DS,{children:a.jsx(_S,{children:a.jsxs(ht,{path:"/",element:a.jsx(lT,{state:e,isConnected:r,isSidebarCollapsed:u,setIsSidebarCollapsed:d,isCompactMode:h,setIsCompactMode:m,isMobileMenuOpen:s,setIsMobileMenuOpen:i,updateChecklist:v,requestHandoff:b,compactContext:y,refreshData:g,setActiveSD:x}),children:[a.jsx(ht,{index:!0,element:a.jsx(Bu,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:x,onUpdateStatus:p,currentSD:(j=e.leoProtocol)==null?void 0:j.currentSD,isCompact:h,onRefresh:g})}),a.jsxs(ht,{path:"strategic-directives",children:[a.jsx(ht,{index:!0,element:a.jsx(Bu,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:x,onUpdateStatus:p,currentSD:(E=e.leoProtocol)==null?void 0:E.currentSD,isCompact:h,onRefresh:g})}),a.jsx(ht,{path:":id",element:a.jsx(Bu,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:x,onUpdateStatus:p,currentSD:(N=e.leoProtocol)==null?void 0:N.currentSD,isCompact:h,detailMode:!0,onRefresh:g})})]}),a.jsxs(ht,{path:"prds",children:[a.jsx(ht,{index:!0,element:a.jsx(wx,{prds:e.prds,isCompact:h})}),a.jsx(ht,{path:":id",element:a.jsx(wx,{prds:e.prds,isCompact:h,detailMode:!0})})]}),a.jsxs(ht,{path:"backlog",children:[a.jsx(ht,{index:!0,element:a.jsx(kx,{strategicDirectives:e.strategicDirectives,isCompact:h,onRefresh:g})}),a.jsx(ht,{path:":id",element:a.jsx(kx,{strategicDirectives:e.strategicDirectives,isCompact:h,detailMode:!0,onRefresh:g})})]}),a.jsx(ht,{path:"directive-lab",element:a.jsx(r6,{state:e,onRefresh:g,isCompact:h})}),a.jsx(ht,{path:"pr-reviews",element:a.jsx(o6,{state:e,isConnected:r,refreshData:g})}),a.jsx(ht,{path:"uat-tests",element:a.jsx(UR,{})}),a.jsx(ht,{path:"backlog-import",element:a.jsx(LR,{})}),a.jsx(ht,{path:"*",element:a.jsx(jS,{to:"/",replace:!0})})]})})})}class VR extends Vr.Component{constructor(r){super(r);zc(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});zc(this,"handleHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){window.location.hostname==="localhost"&&console.error("ErrorBoundary caught:",r,n),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Nt,{className:"w-8 h-8 text-red-500 mr-3"}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Something went wrong"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We encountered an unexpected error. The application may not work correctly."}),window.location.hostname==="localhost"&&a.jsxs("details",{className:"mb-4",children:[a.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Error details (development only)"}),a.jsxs("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto",children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(xr,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),a.jsxs("button",{onClick:this.handleHome,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(_m,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}rd.createRoot(document.getElementById("root")).render(a.jsx(Vr.StrictMode,{children:a.jsx(VR,{children:a.jsx(BR,{})})}));
//# sourceMappingURL=index-apEtGO6P.js.map
