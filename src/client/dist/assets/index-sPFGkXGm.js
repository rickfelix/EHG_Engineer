var $k=Object.defineProperty;var Fk=(e,t,r)=>t in e?$k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var pc=(e,t,r)=>Fk(e,typeof t!="symbol"?t+"":t,r);function zk(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Uk(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var kx={exports:{}},Il={},jx={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),Bk=Symbol.for("react.portal"),Vk=Symbol.for("react.fragment"),Hk=Symbol.for("react.strict_mode"),Wk=Symbol.for("react.profiler"),qk=Symbol.for("react.provider"),Gk=Symbol.for("react.context"),Kk=Symbol.for("react.forward_ref"),Jk=Symbol.for("react.suspense"),Xk=Symbol.for("react.memo"),Yk=Symbol.for("react.lazy"),Pp=Symbol.iterator;function Qk(e){return e===null||typeof e!="object"?null:(e=Pp&&e[Pp]||e["@@iterator"],typeof e=="function"?e:null)}var Sx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nx=Object.assign,_x={};function li(e,t,r){this.props=e,this.context=t,this.refs=_x,this.updater=r||Sx}li.prototype.isReactComponent={};li.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};li.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cx(){}Cx.prototype=li.prototype;function wh(e,t,r){this.props=e,this.context=t,this.refs=_x,this.updater=r||Sx}var kh=wh.prototype=new Cx;kh.constructor=wh;Nx(kh,li.prototype);kh.isPureReactComponent=!0;var Ap=Array.isArray,Ex=Object.prototype.hasOwnProperty,jh={current:null},Tx={key:!0,ref:!0,__self:!0,__source:!0};function Px(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Ex.call(t,n)&&!Tx.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ma,type:e,key:i,ref:o,props:s,_owner:jh.current}}function Zk(e,t){return{$$typeof:Ma,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ma}function e1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ip=/\/+/g;function mc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?e1(""+e.key):t.toString(36)}function Po(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ma:case Bk:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+mc(o,0):n,Ap(s)?(r="",e!=null&&(r=e.replace(Ip,"$&/")+"/"),Po(s,t,r,"",function(u){return u})):s!=null&&(Sh(s)&&(s=Zk(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ip,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Ap(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+mc(i,l);o+=Po(i,t,r,c,s)}else if(c=Qk(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+mc(i,l++),o+=Po(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function eo(e,t,r){if(e==null)return e;var n=[],s=0;return Po(e,n,"","",function(i){return t.call(r,i,s++)}),n}function t1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yt={current:null},Ao={transition:null},r1={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:Ao,ReactCurrentOwner:jh};function Ax(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:eo,forEach:function(e,t,r){eo(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return eo(e,function(){t++}),t},toArray:function(e){return eo(e,function(t){return t})||[]},only:function(e){if(!Sh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=li;ue.Fragment=Vk;ue.Profiler=Wk;ue.PureComponent=wh;ue.StrictMode=Hk;ue.Suspense=Jk;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r1;ue.act=Ax;ue.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Nx({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=jh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Ex.call(t,c)&&!Tx.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ma,type:e.type,key:s,ref:i,props:n,_owner:o}};ue.createContext=function(e){return e={$$typeof:Gk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qk,_context:e},e.Consumer=e};ue.createElement=Px;ue.createFactory=function(e){var t=Px.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:Kk,render:e}};ue.isValidElement=Sh;ue.lazy=function(e){return{$$typeof:Yk,_payload:{_status:-1,_result:e},_init:t1}};ue.memo=function(e,t){return{$$typeof:Xk,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Ao.transition;Ao.transition={};try{e()}finally{Ao.transition=t}};ue.unstable_act=Ax;ue.useCallback=function(e,t){return yt.current.useCallback(e,t)};ue.useContext=function(e){return yt.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return yt.current.useDeferredValue(e)};ue.useEffect=function(e,t){return yt.current.useEffect(e,t)};ue.useId=function(){return yt.current.useId()};ue.useImperativeHandle=function(e,t,r){return yt.current.useImperativeHandle(e,t,r)};ue.useInsertionEffect=function(e,t){return yt.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return yt.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return yt.current.useMemo(e,t)};ue.useReducer=function(e,t,r){return yt.current.useReducer(e,t,r)};ue.useRef=function(e){return yt.current.useRef(e)};ue.useState=function(e){return yt.current.useState(e)};ue.useSyncExternalStore=function(e,t,r){return yt.current.useSyncExternalStore(e,t,r)};ue.useTransition=function(){return yt.current.useTransition()};ue.version="18.3.1";jx.exports=ue;var w=jx.exports;const jr=bh(w),n1=zk({__proto__:null,default:jr},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1=w,i1=Symbol.for("react.element"),a1=Symbol.for("react.fragment"),o1=Object.prototype.hasOwnProperty,l1=s1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c1={key:!0,ref:!0,__self:!0,__source:!0};function Ix(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)o1.call(t,n)&&!c1.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:i1,type:e,key:i,ref:o,props:s,_owner:l1.current}}Il.Fragment=a1;Il.jsx=Ix;Il.jsxs=Ix;kx.exports=Il;var a=kx.exports,Au={},Rx={exports:{}},Ut={},Dx={exports:{}},Lx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,F){var S=R.length;R.push(F);e:for(;0<S;){var U=S-1>>>1,K=R[U];if(0<s(K,F))R[U]=F,R[S]=K,S=U;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var F=R[0],S=R.pop();if(S!==F){R[0]=S;e:for(var U=0,K=R.length,C=K>>>1;U<C;){var re=2*(U+1)-1,ye=R[re],le=re+1,We=R[le];if(0>s(ye,S))le<K&&0>s(We,ye)?(R[U]=We,R[le]=S,U=le):(R[U]=ye,R[re]=S,U=re);else if(le<K&&0>s(We,S))R[U]=We,R[le]=S,U=le;else break e}}return F}function s(R,F){var S=R.sortIndex-F.sortIndex;return S!==0?S:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var F=r(u);F!==null;){if(F.callback===null)n(u);else if(F.startTime<=R)n(u),F.sortIndex=F.expirationTime,t(c,F);else break;F=r(u)}}function k(R){if(v=!1,g(R),!m)if(r(c)!==null)m=!0,O(N);else{var F=r(u);F!==null&&$(k,F.startTime-R)}}function N(R,F){m=!1,v&&(v=!1,x(E),E=-1),p=!0;var S=f;try{for(g(F),h=r(c);h!==null&&(!(h.expirationTime>F)||R&&!z());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var K=U(h.expirationTime<=F);F=e.unstable_now(),typeof K=="function"?h.callback=K:h===r(c)&&n(c),g(F)}else n(c);h=r(c)}if(h!==null)var C=!0;else{var re=r(u);re!==null&&$(k,re.startTime-F),C=!1}return C}finally{h=null,f=S,p=!1}}var j=!1,T=null,E=-1,I=5,D=-1;function z(){return!(e.unstable_now()-D<I)}function A(){if(T!==null){var R=e.unstable_now();D=R;var F=!0;try{F=T(!0,R)}finally{F?_():(j=!1,T=null)}}else j=!1}var _;if(typeof y=="function")_=function(){y(A)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,P=M.port2;M.port1.onmessage=A,_=function(){P.postMessage(null)}}else _=function(){b(A,0)};function O(R){T=R,j||(j=!0,_())}function $(R,F){E=b(function(){R(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,O(N))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var S=f;f=F;try{return R()}finally{f=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var S=f;f=R;try{return F()}finally{f=S}},e.unstable_scheduleCallback=function(R,F,S){var U=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?U+S:U):S=U,R){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=S+K,R={id:d++,callback:F,priorityLevel:R,startTime:S,expirationTime:K,sortIndex:-1},S>U?(R.sortIndex=S,t(u,R),r(c)===null&&R===r(u)&&(v?(x(E),E=-1):v=!0,$(k,S-U))):(R.sortIndex=K,t(c,R),m||p||(m=!0,O(N))),R},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(R){var F=f;return function(){var S=f;f=F;try{return R.apply(this,arguments)}finally{f=S}}}})(Lx);Dx.exports=Lx;var u1=Dx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1=w,Ft=u1;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ox=new Set,ua={};function ls(e,t){Js(e,t),Js(e+"Capture",t)}function Js(e,t){for(ua[e]=t,e=0;e<t.length;e++)Ox.add(t[e])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iu=Object.prototype.hasOwnProperty,h1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rp={},Dp={};function f1(e){return Iu.call(Dp,e)?!0:Iu.call(Rp,e)?!1:h1.test(e)?Dp[e]=!0:(Rp[e]=!0,!1)}function p1(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function m1(e,t,r,n){if(t===null||typeof t>"u"||p1(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vt(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nh=/[\-:]([a-z])/g;function _h(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nh,_h);st[t]=new vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nh,_h);st[t]=new vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nh,_h);st[t]=new vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new vt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ch(e,t,r,n){var s=st.hasOwnProperty(t)?st[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(m1(t,r,s,n)&&(r=null),n||s===null?f1(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Gr=d1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,to=Symbol.for("react.element"),js=Symbol.for("react.portal"),Ss=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),Ru=Symbol.for("react.profiler"),Mx=Symbol.for("react.provider"),$x=Symbol.for("react.context"),Th=Symbol.for("react.forward_ref"),Du=Symbol.for("react.suspense"),Lu=Symbol.for("react.suspense_list"),Ph=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),Fx=Symbol.for("react.offscreen"),Lp=Symbol.iterator;function ji(e){return e===null||typeof e!="object"?null:(e=Lp&&e[Lp]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,gc;function Mi(e){if(gc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);gc=t&&t[1]||""}return`
`+gc+e}var xc=!1;function yc(e,t){if(!e||xc)return"";xc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{xc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Mi(e):""}function g1(e){switch(e.tag){case 5:return Mi(e.type);case 16:return Mi("Lazy");case 13:return Mi("Suspense");case 19:return Mi("SuspenseList");case 0:case 2:case 15:return e=yc(e.type,!1),e;case 11:return e=yc(e.type.render,!1),e;case 1:return e=yc(e.type,!0),e;default:return""}}function Ou(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ss:return"Fragment";case js:return"Portal";case Ru:return"Profiler";case Eh:return"StrictMode";case Du:return"Suspense";case Lu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $x:return(e.displayName||"Context")+".Consumer";case Mx:return(e._context.displayName||"Context")+".Provider";case Th:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ph:return t=e.displayName||null,t!==null?t:Ou(e.type)||"Memo";case en:t=e._payload,e=e._init;try{return Ou(e(t))}catch{}}return null}function x1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ou(t);case 8:return t===Eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function y1(e){var t=zx(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ro(e){e._valueTracker||(e._valueTracker=y1(e))}function Ux(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=zx(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ko(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mu(e,t){var r=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Op(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=bn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bx(e,t){t=t.checked,t!=null&&Ch(e,"checked",t,!1)}function $u(e,t){Bx(e,t);var r=bn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fu(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fu(e,t.type,bn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Mp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fu(e,t,r){(t!=="number"||Ko(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var $i=Array.isArray;function zs(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+bn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function zu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $p(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(V(92));if($i(r)){if(1<r.length)throw Error(V(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:bn(r)}}function Vx(e,t){var r=bn(t.value),n=bn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Fp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var no,Wx=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(no=no||document.createElement("div"),no.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=no.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function da(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v1=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(e){v1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vi[t]=Vi[e]})});function qx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Vi.hasOwnProperty(e)&&Vi[e]?(""+t).trim():t+"px"}function Gx(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=qx(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var b1=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bu(e,t){if(t){if(b1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function Vu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hu=null;function Ah(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wu=null,Us=null,Bs=null;function zp(e){if(e=za(e)){if(typeof Wu!="function")throw Error(V(280));var t=e.stateNode;t&&(t=Ml(t),Wu(e.stateNode,e.type,t))}}function Kx(e){Us?Bs?Bs.push(e):Bs=[e]:Us=e}function Jx(){if(Us){var e=Us,t=Bs;if(Bs=Us=null,zp(e),t)for(e=0;e<t.length;e++)zp(t[e])}}function Xx(e,t){return e(t)}function Yx(){}var vc=!1;function Qx(e,t,r){if(vc)return e(t,r);vc=!0;try{return Xx(e,t,r)}finally{vc=!1,(Us!==null||Bs!==null)&&(Yx(),Jx())}}function ha(e,t){var r=e.stateNode;if(r===null)return null;var n=Ml(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(V(231,t,typeof r));return r}var qu=!1;if(zr)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){qu=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{qu=!1}function w1(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Hi=!1,Jo=null,Xo=!1,Gu=null,k1={onError:function(e){Hi=!0,Jo=e}};function j1(e,t,r,n,s,i,o,l,c){Hi=!1,Jo=null,w1.apply(k1,arguments)}function S1(e,t,r,n,s,i,o,l,c){if(j1.apply(this,arguments),Hi){if(Hi){var u=Jo;Hi=!1,Jo=null}else throw Error(V(198));Xo||(Xo=!0,Gu=u)}}function cs(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Zx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Up(e){if(cs(e)!==e)throw Error(V(188))}function N1(e){var t=e.alternate;if(!t){if(t=cs(e),t===null)throw Error(V(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Up(s),e;if(i===n)return Up(s),t;i=i.sibling}throw Error(V(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(V(189))}}if(r.alternate!==n)throw Error(V(190))}if(r.tag!==3)throw Error(V(188));return r.stateNode.current===r?e:t}function ey(e){return e=N1(e),e!==null?ty(e):null}function ty(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ty(e);if(t!==null)return t;e=e.sibling}return null}var ry=Ft.unstable_scheduleCallback,Bp=Ft.unstable_cancelCallback,_1=Ft.unstable_shouldYield,C1=Ft.unstable_requestPaint,Fe=Ft.unstable_now,E1=Ft.unstable_getCurrentPriorityLevel,Ih=Ft.unstable_ImmediatePriority,ny=Ft.unstable_UserBlockingPriority,Yo=Ft.unstable_NormalPriority,T1=Ft.unstable_LowPriority,sy=Ft.unstable_IdlePriority,Rl=null,Sr=null;function P1(e){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(Rl,e,void 0,(e.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:R1,A1=Math.log,I1=Math.LN2;function R1(e){return e>>>=0,e===0?32:31-(A1(e)/I1|0)|0}var so=64,io=4194304;function Fi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qo(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Fi(l):(i&=o,i!==0&&(n=Fi(i)))}else o=r&~s,o!==0?n=Fi(o):i!==0&&(n=Fi(i));if(n===0)return 0;if(t!==0&&t!==n&&(t&s)===0&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ur(t),s=1<<r,n|=e[r],t&=~s;return n}function D1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L1(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ur(i),l=1<<o,c=s[o];c===-1?((l&r)===0||(l&n)!==0)&&(s[o]=D1(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ku(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function iy(){var e=so;return so<<=1,(so&4194240)===0&&(so=64),e}function bc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function $a(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ur(t),e[t]=r}function O1(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ur(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Rh(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ur(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var ge=0;function ay(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var oy,Dh,ly,cy,uy,Ju=!1,ao=[],dn=null,hn=null,fn=null,fa=new Map,pa=new Map,rn=[],M1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vp(e,t){switch(e){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":fa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(t.pointerId)}}function Ni(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=za(t),t!==null&&Dh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function $1(e,t,r,n,s){switch(t){case"focusin":return dn=Ni(dn,e,t,r,n,s),!0;case"dragenter":return hn=Ni(hn,e,t,r,n,s),!0;case"mouseover":return fn=Ni(fn,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return fa.set(i,Ni(fa.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,pa.set(i,Ni(pa.get(i)||null,e,t,r,n,s)),!0}return!1}function dy(e){var t=Hn(e.target);if(t!==null){var r=cs(t);if(r!==null){if(t=r.tag,t===13){if(t=Zx(r),t!==null){e.blockedOn=t,uy(e.priority,function(){ly(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Io(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Hu=n,r.target.dispatchEvent(n),Hu=null}else return t=za(r),t!==null&&Dh(t),e.blockedOn=r,!1;t.shift()}return!0}function Hp(e,t,r){Io(e)&&r.delete(t)}function F1(){Ju=!1,dn!==null&&Io(dn)&&(dn=null),hn!==null&&Io(hn)&&(hn=null),fn!==null&&Io(fn)&&(fn=null),fa.forEach(Hp),pa.forEach(Hp)}function _i(e,t){e.blockedOn===t&&(e.blockedOn=null,Ju||(Ju=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,F1)))}function ma(e){function t(s){return _i(s,e)}if(0<ao.length){_i(ao[0],e);for(var r=1;r<ao.length;r++){var n=ao[r];n.blockedOn===e&&(n.blockedOn=null)}}for(dn!==null&&_i(dn,e),hn!==null&&_i(hn,e),fn!==null&&_i(fn,e),fa.forEach(t),pa.forEach(t),r=0;r<rn.length;r++)n=rn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<rn.length&&(r=rn[0],r.blockedOn===null);)dy(r),r.blockedOn===null&&rn.shift()}var Vs=Gr.ReactCurrentBatchConfig,Zo=!0;function z1(e,t,r,n){var s=ge,i=Vs.transition;Vs.transition=null;try{ge=1,Lh(e,t,r,n)}finally{ge=s,Vs.transition=i}}function U1(e,t,r,n){var s=ge,i=Vs.transition;Vs.transition=null;try{ge=4,Lh(e,t,r,n)}finally{ge=s,Vs.transition=i}}function Lh(e,t,r,n){if(Zo){var s=Xu(e,t,r,n);if(s===null)Pc(e,t,n,el,r),Vp(e,n);else if($1(s,e,t,r,n))n.stopPropagation();else if(Vp(e,n),t&4&&-1<M1.indexOf(e)){for(;s!==null;){var i=za(s);if(i!==null&&oy(i),i=Xu(e,t,r,n),i===null&&Pc(e,t,n,el,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Pc(e,t,n,null,r)}}var el=null;function Xu(e,t,r,n){if(el=null,e=Ah(n),e=Hn(e),e!==null)if(t=cs(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Zx(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return el=e,null}function hy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E1()){case Ih:return 1;case ny:return 4;case Yo:case T1:return 16;case sy:return 536870912;default:return 16}default:return 16}}var an=null,Oh=null,Ro=null;function fy(){if(Ro)return Ro;var e,t=Oh,r=t.length,n,s="value"in an?an.value:an.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Ro=s.slice(e,1<n?1-n:void 0)}function Do(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function oo(){return!0}function Wp(){return!1}function Bt(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?oo:Wp,this.isPropagationStopped=Wp,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=oo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=oo)},persist:function(){},isPersistent:oo}),t}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mh=Bt(ci),Fa=De({},ci,{view:0,detail:0}),B1=Bt(Fa),wc,kc,Ci,Dl=De({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$h,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ci&&(Ci&&e.type==="mousemove"?(wc=e.screenX-Ci.screenX,kc=e.screenY-Ci.screenY):kc=wc=0,Ci=e),wc)},movementY:function(e){return"movementY"in e?e.movementY:kc}}),qp=Bt(Dl),V1=De({},Dl,{dataTransfer:0}),H1=Bt(V1),W1=De({},Fa,{relatedTarget:0}),jc=Bt(W1),q1=De({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),G1=Bt(q1),K1=De({},ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),J1=Bt(K1),X1=De({},ci,{data:0}),Gp=Bt(X1),Y1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ej(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Z1[e])?!!t[e]:!1}function $h(){return ej}var tj=De({},Fa,{key:function(e){if(e.key){var t=Y1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Do(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Q1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$h,charCode:function(e){return e.type==="keypress"?Do(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Do(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rj=Bt(tj),nj=De({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kp=Bt(nj),sj=De({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$h}),ij=Bt(sj),aj=De({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),oj=Bt(aj),lj=De({},Dl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cj=Bt(lj),uj=[9,13,27,32],Fh=zr&&"CompositionEvent"in window,Wi=null;zr&&"documentMode"in document&&(Wi=document.documentMode);var dj=zr&&"TextEvent"in window&&!Wi,py=zr&&(!Fh||Wi&&8<Wi&&11>=Wi),Jp=" ",Xp=!1;function my(e,t){switch(e){case"keyup":return uj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ns=!1;function hj(e,t){switch(e){case"compositionend":return gy(t);case"keypress":return t.which!==32?null:(Xp=!0,Jp);case"textInput":return e=t.data,e===Jp&&Xp?null:e;default:return null}}function fj(e,t){if(Ns)return e==="compositionend"||!Fh&&my(e,t)?(e=fy(),Ro=Oh=an=null,Ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return py&&t.locale!=="ko"?null:t.data;default:return null}}var pj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pj[e.type]:t==="textarea"}function xy(e,t,r,n){Kx(n),t=tl(t,"onChange"),0<t.length&&(r=new Mh("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qi=null,ga=null;function mj(e){Ey(e,0)}function Ll(e){var t=Es(e);if(Ux(t))return e}function gj(e,t){if(e==="change")return t}var yy=!1;if(zr){var Sc;if(zr){var Nc="oninput"in document;if(!Nc){var Qp=document.createElement("div");Qp.setAttribute("oninput","return;"),Nc=typeof Qp.oninput=="function"}Sc=Nc}else Sc=!1;yy=Sc&&(!document.documentMode||9<document.documentMode)}function Zp(){qi&&(qi.detachEvent("onpropertychange",vy),ga=qi=null)}function vy(e){if(e.propertyName==="value"&&Ll(ga)){var t=[];xy(t,ga,e,Ah(e)),Qx(mj,t)}}function xj(e,t,r){e==="focusin"?(Zp(),qi=t,ga=r,qi.attachEvent("onpropertychange",vy)):e==="focusout"&&Zp()}function yj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ll(ga)}function vj(e,t){if(e==="click")return Ll(t)}function bj(e,t){if(e==="input"||e==="change")return Ll(t)}function wj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fr=typeof Object.is=="function"?Object.is:wj;function xa(e,t){if(fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Iu.call(t,s)||!fr(e[s],t[s]))return!1}return!0}function em(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tm(e,t){var r=em(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=em(r)}}function by(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?by(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wy(){for(var e=window,t=Ko();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ko(e.document)}return t}function zh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kj(e){var t=wy(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&by(r.ownerDocument.documentElement,r)){if(n!==null&&zh(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=tm(r,i);var o=tm(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jj=zr&&"documentMode"in document&&11>=document.documentMode,_s=null,Yu=null,Gi=null,Qu=!1;function rm(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qu||_s==null||_s!==Ko(n)||(n=_s,"selectionStart"in n&&zh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Gi&&xa(Gi,n)||(Gi=n,n=tl(Yu,"onSelect"),0<n.length&&(t=new Mh("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=_s)))}function lo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cs={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionend:lo("Transition","TransitionEnd")},_c={},ky={};zr&&(ky=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function Ol(e){if(_c[e])return _c[e];if(!Cs[e])return e;var t=Cs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ky)return _c[e]=t[r];return e}var jy=Ol("animationend"),Sy=Ol("animationiteration"),Ny=Ol("animationstart"),_y=Ol("transitionend"),Cy=new Map,nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(e,t){Cy.set(e,t),ls(t,[e])}for(var Cc=0;Cc<nm.length;Cc++){var Ec=nm[Cc],Sj=Ec.toLowerCase(),Nj=Ec[0].toUpperCase()+Ec.slice(1);Sn(Sj,"on"+Nj)}Sn(jy,"onAnimationEnd");Sn(Sy,"onAnimationIteration");Sn(Ny,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(_y,"onTransitionEnd");Js("onMouseEnter",["mouseout","mouseover"]);Js("onMouseLeave",["mouseout","mouseover"]);Js("onPointerEnter",["pointerout","pointerover"]);Js("onPointerLeave",["pointerout","pointerover"]);ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_j=new Set("cancel close invalid load scroll toggle".split(" ").concat(zi));function sm(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,S1(n,t,void 0,e),e.currentTarget=null}function Ey(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;sm(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;sm(s,l,u),i=c}}}if(Xo)throw e=Gu,Xo=!1,Gu=null,e}function je(e,t){var r=t[nd];r===void 0&&(r=t[nd]=new Set);var n=e+"__bubble";r.has(n)||(Ty(t,e,2,!1),r.add(n))}function Tc(e,t,r){var n=0;t&&(n|=4),Ty(r,e,n,t)}var co="_reactListening"+Math.random().toString(36).slice(2);function ya(e){if(!e[co]){e[co]=!0,Ox.forEach(function(r){r!=="selectionchange"&&(_j.has(r)||Tc(r,!1,e),Tc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[co]||(t[co]=!0,Tc("selectionchange",!1,t))}}function Ty(e,t,r,n){switch(hy(t)){case 1:var s=z1;break;case 4:s=U1;break;default:s=Lh}r=s.bind(null,t,r,e),s=void 0,!qu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Pc(e,t,r,n,s){var i=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Hn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Qx(function(){var u=i,d=Ah(r),h=[];e:{var f=Cy.get(e);if(f!==void 0){var p=Mh,m=e;switch(e){case"keypress":if(Do(r)===0)break e;case"keydown":case"keyup":p=rj;break;case"focusin":m="focus",p=jc;break;case"focusout":m="blur",p=jc;break;case"beforeblur":case"afterblur":p=jc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=qp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=H1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ij;break;case jy:case Sy:case Ny:p=G1;break;case _y:p=oj;break;case"scroll":p=B1;break;case"wheel":p=cj;break;case"copy":case"cut":case"paste":p=J1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Kp}var v=(t&4)!==0,b=!v&&e==="scroll",x=v?f!==null?f+"Capture":null:f;v=[];for(var y=u,g;y!==null;){g=y;var k=g.stateNode;if(g.tag===5&&k!==null&&(g=k,x!==null&&(k=ha(y,x),k!=null&&v.push(va(y,k,g)))),b)break;y=y.return}0<v.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:v}))}}if((t&7)===0){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==Hu&&(m=r.relatedTarget||r.fromElement)&&(Hn(m)||m[Ur]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?Hn(m):null,m!==null&&(b=cs(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=qp,k="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=Kp,k="onPointerLeave",x="onPointerEnter",y="pointer"),b=p==null?f:Es(p),g=m==null?f:Es(m),f=new v(k,y+"leave",p,r,d),f.target=b,f.relatedTarget=g,k=null,Hn(d)===u&&(v=new v(x,y+"enter",m,r,d),v.target=g,v.relatedTarget=b,k=v),b=k,p&&m)t:{for(v=p,x=m,y=0,g=v;g;g=ps(g))y++;for(g=0,k=x;k;k=ps(k))g++;for(;0<y-g;)v=ps(v),y--;for(;0<g-y;)x=ps(x),g--;for(;y--;){if(v===x||x!==null&&v===x.alternate)break t;v=ps(v),x=ps(x)}v=null}else v=null;p!==null&&im(h,f,p,v,!1),m!==null&&b!==null&&im(h,b,m,v,!0)}}e:{if(f=u?Es(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=gj;else if(Yp(f))if(yy)N=bj;else{N=yj;var j=xj}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=vj);if(N&&(N=N(e,u))){xy(h,N,r,d);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&Fu(f,"number",f.value)}switch(j=u?Es(u):window,e){case"focusin":(Yp(j)||j.contentEditable==="true")&&(_s=j,Yu=u,Gi=null);break;case"focusout":Gi=Yu=_s=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,rm(h,r,d);break;case"selectionchange":if(jj)break;case"keydown":case"keyup":rm(h,r,d)}var T;if(Fh)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ns?my(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(py&&r.locale!=="ko"&&(Ns||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ns&&(T=fy()):(an=d,Oh="value"in an?an.value:an.textContent,Ns=!0)),j=tl(u,E),0<j.length&&(E=new Gp(E,e,null,r,d),h.push({event:E,listeners:j}),T?E.data=T:(T=gy(r),T!==null&&(E.data=T)))),(T=dj?hj(e,r):fj(e,r))&&(u=tl(u,"onBeforeInput"),0<u.length&&(d=new Gp("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=T))}Ey(h,t)})}function va(e,t,r){return{instance:e,listener:t,currentTarget:r}}function tl(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ha(e,r),i!=null&&n.unshift(va(e,i,s)),i=ha(e,t),i!=null&&n.push(va(e,i,s))),e=e.return}return n}function ps(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function im(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=ha(r,i),c!=null&&o.unshift(va(r,c,l))):s||(c=ha(r,i),c!=null&&o.push(va(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Cj=/\r\n?/g,Ej=/\u0000|\uFFFD/g;function am(e){return(typeof e=="string"?e:""+e).replace(Cj,`
`).replace(Ej,"")}function uo(e,t,r){if(t=am(t),am(e)!==t&&r)throw Error(V(425))}function rl(){}var Zu=null,ed=null;function td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rd=typeof setTimeout=="function"?setTimeout:void 0,Tj=typeof clearTimeout=="function"?clearTimeout:void 0,om=typeof Promise=="function"?Promise:void 0,Pj=typeof queueMicrotask=="function"?queueMicrotask:typeof om<"u"?function(e){return om.resolve(null).then(e).catch(Aj)}:rd;function Aj(e){setTimeout(function(){throw e})}function Ac(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ma(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ma(t)}function pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),br="__reactFiber$"+ui,ba="__reactProps$"+ui,Ur="__reactContainer$"+ui,nd="__reactEvents$"+ui,Ij="__reactListeners$"+ui,Rj="__reactHandles$"+ui;function Hn(e){var t=e[br];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ur]||r[br]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=lm(e);e!==null;){if(r=e[br])return r;e=lm(e)}return t}e=r,r=e.parentNode}return null}function za(e){return e=e[br]||e[Ur],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function Ml(e){return e[ba]||null}var sd=[],Ts=-1;function Nn(e){return{current:e}}function Se(e){0>Ts||(e.current=sd[Ts],sd[Ts]=null,Ts--)}function we(e,t){Ts++,sd[Ts]=e.current,e.current=t}var wn={},ut=Nn(wn),Ct=Nn(!1),es=wn;function Xs(e,t){var r=e.type.contextTypes;if(!r)return wn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Et(e){return e=e.childContextTypes,e!=null}function nl(){Se(Ct),Se(ut)}function cm(e,t,r){if(ut.current!==wn)throw Error(V(168));we(ut,t),we(Ct,r)}function Py(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(V(108,x1(e)||"Unknown",s));return De({},r,n)}function sl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wn,es=ut.current,we(ut,e),we(Ct,Ct.current),!0}function um(e,t,r){var n=e.stateNode;if(!n)throw Error(V(169));r?(e=Py(e,t,es),n.__reactInternalMemoizedMergedChildContext=e,Se(Ct),Se(ut),we(ut,e)):Se(Ct),we(Ct,r)}var Lr=null,$l=!1,Ic=!1;function Ay(e){Lr===null?Lr=[e]:Lr.push(e)}function Dj(e){$l=!0,Ay(e)}function _n(){if(!Ic&&Lr!==null){Ic=!0;var e=0,t=ge;try{var r=Lr;for(ge=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Lr=null,$l=!1}catch(s){throw Lr!==null&&(Lr=Lr.slice(e+1)),ry(Ih,_n),s}finally{ge=t,Ic=!1}}return null}var Ps=[],As=0,il=null,al=0,qt=[],Gt=0,ts=null,Mr=1,$r="";function $n(e,t){Ps[As++]=al,Ps[As++]=il,il=e,al=t}function Iy(e,t,r){qt[Gt++]=Mr,qt[Gt++]=$r,qt[Gt++]=ts,ts=e;var n=Mr;e=$r;var s=32-ur(n)-1;n&=~(1<<s),r+=1;var i=32-ur(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Mr=1<<32-ur(t)+s|r<<s|n,$r=i+e}else Mr=1<<i|r<<s|n,$r=e}function Uh(e){e.return!==null&&($n(e,1),Iy(e,1,0))}function Bh(e){for(;e===il;)il=Ps[--As],Ps[As]=null,al=Ps[--As],Ps[As]=null;for(;e===ts;)ts=qt[--Gt],qt[Gt]=null,$r=qt[--Gt],qt[Gt]=null,Mr=qt[--Gt],qt[Gt]=null}var $t=null,Ot=null,_e=!1,cr=null;function Ry(e,t){var r=Jt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function dm(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$t=e,Ot=pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$t=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ts!==null?{id:Mr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Jt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,$t=e,Ot=null,!0):!1;default:return!1}}function id(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ad(e){if(_e){var t=Ot;if(t){var r=t;if(!dm(e,t)){if(id(e))throw Error(V(418));t=pn(r.nextSibling);var n=$t;t&&dm(e,t)?Ry(n,r):(e.flags=e.flags&-4097|2,_e=!1,$t=e)}}else{if(id(e))throw Error(V(418));e.flags=e.flags&-4097|2,_e=!1,$t=e}}}function hm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$t=e}function ho(e){if(e!==$t)return!1;if(!_e)return hm(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!td(e.type,e.memoizedProps)),t&&(t=Ot)){if(id(e))throw Dy(),Error(V(418));for(;t;)Ry(e,t),t=pn(t.nextSibling)}if(hm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ot=pn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=$t?pn(e.stateNode.nextSibling):null;return!0}function Dy(){for(var e=Ot;e;)e=pn(e.nextSibling)}function Ys(){Ot=$t=null,_e=!1}function Vh(e){cr===null?cr=[e]:cr.push(e)}var Lj=Gr.ReactCurrentBatchConfig;function Ei(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(V(309));var n=r.stateNode}if(!n)throw Error(V(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(V(284));if(!r._owner)throw Error(V(290,e))}return e}function fo(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fm(e){var t=e._init;return t(e._payload)}function Ly(e){function t(x,y){if(e){var g=x.deletions;g===null?(x.deletions=[y],x.flags|=16):g.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=yn(x,y),x.index=0,x.sibling=null,x}function i(x,y,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<y?(x.flags|=2,y):g):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,g,k){return y===null||y.tag!==6?(y=Fc(g,x.mode,k),y.return=x,y):(y=s(y,g),y.return=x,y)}function c(x,y,g,k){var N=g.type;return N===Ss?d(x,y,g.props.children,k,g.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===en&&fm(N)===y.type)?(k=s(y,g.props),k.ref=Ei(x,y,g),k.return=x,k):(k=Uo(g.type,g.key,g.props,null,x.mode,k),k.ref=Ei(x,y,g),k.return=x,k)}function u(x,y,g,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==g.containerInfo||y.stateNode.implementation!==g.implementation?(y=zc(g,x.mode,k),y.return=x,y):(y=s(y,g.children||[]),y.return=x,y)}function d(x,y,g,k,N){return y===null||y.tag!==7?(y=Xn(g,x.mode,k,N),y.return=x,y):(y=s(y,g),y.return=x,y)}function h(x,y,g){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Fc(""+y,x.mode,g),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case to:return g=Uo(y.type,y.key,y.props,null,x.mode,g),g.ref=Ei(x,null,y),g.return=x,g;case js:return y=zc(y,x.mode,g),y.return=x,y;case en:var k=y._init;return h(x,k(y._payload),g)}if($i(y)||ji(y))return y=Xn(y,x.mode,g,null),y.return=x,y;fo(x,y)}return null}function f(x,y,g,k){var N=y!==null?y.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:l(x,y,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case to:return g.key===N?c(x,y,g,k):null;case js:return g.key===N?u(x,y,g,k):null;case en:return N=g._init,f(x,y,N(g._payload),k)}if($i(g)||ji(g))return N!==null?null:d(x,y,g,k,null);fo(x,g)}return null}function p(x,y,g,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(g)||null,l(y,x,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case to:return x=x.get(k.key===null?g:k.key)||null,c(y,x,k,N);case js:return x=x.get(k.key===null?g:k.key)||null,u(y,x,k,N);case en:var j=k._init;return p(x,y,g,j(k._payload),N)}if($i(k)||ji(k))return x=x.get(g)||null,d(y,x,k,N,null);fo(y,k)}return null}function m(x,y,g,k){for(var N=null,j=null,T=y,E=y=0,I=null;T!==null&&E<g.length;E++){T.index>E?(I=T,T=null):I=T.sibling;var D=f(x,T,g[E],k);if(D===null){T===null&&(T=I);break}e&&T&&D.alternate===null&&t(x,T),y=i(D,y,E),j===null?N=D:j.sibling=D,j=D,T=I}if(E===g.length)return r(x,T),_e&&$n(x,E),N;if(T===null){for(;E<g.length;E++)T=h(x,g[E],k),T!==null&&(y=i(T,y,E),j===null?N=T:j.sibling=T,j=T);return _e&&$n(x,E),N}for(T=n(x,T);E<g.length;E++)I=p(T,x,E,g[E],k),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?E:I.key),y=i(I,y,E),j===null?N=I:j.sibling=I,j=I);return e&&T.forEach(function(z){return t(x,z)}),_e&&$n(x,E),N}function v(x,y,g,k){var N=ji(g);if(typeof N!="function")throw Error(V(150));if(g=N.call(g),g==null)throw Error(V(151));for(var j=N=null,T=y,E=y=0,I=null,D=g.next();T!==null&&!D.done;E++,D=g.next()){T.index>E?(I=T,T=null):I=T.sibling;var z=f(x,T,D.value,k);if(z===null){T===null&&(T=I);break}e&&T&&z.alternate===null&&t(x,T),y=i(z,y,E),j===null?N=z:j.sibling=z,j=z,T=I}if(D.done)return r(x,T),_e&&$n(x,E),N;if(T===null){for(;!D.done;E++,D=g.next())D=h(x,D.value,k),D!==null&&(y=i(D,y,E),j===null?N=D:j.sibling=D,j=D);return _e&&$n(x,E),N}for(T=n(x,T);!D.done;E++,D=g.next())D=p(T,x,E,D.value,k),D!==null&&(e&&D.alternate!==null&&T.delete(D.key===null?E:D.key),y=i(D,y,E),j===null?N=D:j.sibling=D,j=D);return e&&T.forEach(function(A){return t(x,A)}),_e&&$n(x,E),N}function b(x,y,g,k){if(typeof g=="object"&&g!==null&&g.type===Ss&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case to:e:{for(var N=g.key,j=y;j!==null;){if(j.key===N){if(N=g.type,N===Ss){if(j.tag===7){r(x,j.sibling),y=s(j,g.props.children),y.return=x,x=y;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===en&&fm(N)===j.type){r(x,j.sibling),y=s(j,g.props),y.ref=Ei(x,j,g),y.return=x,x=y;break e}r(x,j);break}else t(x,j);j=j.sibling}g.type===Ss?(y=Xn(g.props.children,x.mode,k,g.key),y.return=x,x=y):(k=Uo(g.type,g.key,g.props,null,x.mode,k),k.ref=Ei(x,y,g),k.return=x,x=k)}return o(x);case js:e:{for(j=g.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===g.containerInfo&&y.stateNode.implementation===g.implementation){r(x,y.sibling),y=s(y,g.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else t(x,y);y=y.sibling}y=zc(g,x.mode,k),y.return=x,x=y}return o(x);case en:return j=g._init,b(x,y,j(g._payload),k)}if($i(g))return m(x,y,g,k);if(ji(g))return v(x,y,g,k);fo(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,y!==null&&y.tag===6?(r(x,y.sibling),y=s(y,g),y.return=x,x=y):(r(x,y),y=Fc(g,x.mode,k),y.return=x,x=y),o(x)):r(x,y)}return b}var Qs=Ly(!0),Oy=Ly(!1),ol=Nn(null),ll=null,Is=null,Hh=null;function Wh(){Hh=Is=ll=null}function qh(e){var t=ol.current;Se(ol),e._currentValue=t}function od(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Hs(e,t){ll=e,Hh=Is=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Nt=!0),e.firstContext=null)}function Zt(e){var t=e._currentValue;if(Hh!==e)if(e={context:e,memoizedValue:t,next:null},Is===null){if(ll===null)throw Error(V(308));Is=e,ll.dependencies={lanes:0,firstContext:e}}else Is=Is.next=e;return t}var Wn=null;function Gh(e){Wn===null?Wn=[e]:Wn.push(e)}function My(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Gh(t)):(r.next=s.next,s.next=r),t.interleaved=r,Br(e,n)}function Br(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var tn=!1;function Kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $y(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(de&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Br(e,r)}return s=n.interleaved,s===null?(t.next=t,Gh(n)):(t.next=s.next,s.next=t),n.interleaved=t,Br(e,r)}function Lo(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Rh(e,r)}}function pm(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function cl(e,t,r,n){var s=e.updateQueue;tn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,v=l;switch(f=t,p=r,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=De({},h,f);break e;case 2:tn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ns|=o,e.lanes=o,e.memoizedState=h}}function mm(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(V(191,s));s.call(n)}}}var Ua={},Nr=Nn(Ua),wa=Nn(Ua),ka=Nn(Ua);function qn(e){if(e===Ua)throw Error(V(174));return e}function Jh(e,t){switch(we(ka,t),we(wa,e),we(Nr,Ua),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Uu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Uu(t,e)}Se(Nr),we(Nr,t)}function Zs(){Se(Nr),Se(wa),Se(ka)}function Fy(e){qn(ka.current);var t=qn(Nr.current),r=Uu(t,e.type);t!==r&&(we(wa,e),we(Nr,r))}function Xh(e){wa.current===e&&(Se(Nr),Se(wa))}var Pe=Nn(0);function ul(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rc=[];function Yh(){for(var e=0;e<Rc.length;e++)Rc[e]._workInProgressVersionPrimary=null;Rc.length=0}var Oo=Gr.ReactCurrentDispatcher,Dc=Gr.ReactCurrentBatchConfig,rs=0,Ie=null,Xe=null,Qe=null,dl=!1,Ki=!1,ja=0,Oj=0;function it(){throw Error(V(321))}function Qh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!fr(e[r],t[r]))return!1;return!0}function Zh(e,t,r,n,s,i){if(rs=i,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Oo.current=e===null||e.memoizedState===null?zj:Uj,e=r(n,s),Ki){i=0;do{if(Ki=!1,ja=0,25<=i)throw Error(V(301));i+=1,Qe=Xe=null,t.updateQueue=null,Oo.current=Bj,e=r(n,s)}while(Ki)}if(Oo.current=hl,t=Xe!==null&&Xe.next!==null,rs=0,Qe=Xe=Ie=null,dl=!1,t)throw Error(V(300));return e}function ef(){var e=ja!==0;return ja=0,e}function gr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Ie.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function er(){if(Xe===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=Qe===null?Ie.memoizedState:Qe.next;if(t!==null)Qe=t,Xe=e;else{if(e===null)throw Error(V(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Qe===null?Ie.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Sa(e,t){return typeof t=="function"?t(e):t}function Lc(e){var t=er(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var n=Xe,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((rs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Ie.lanes|=d,ns|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,fr(n,t.memoizedState)||(Nt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Ie.lanes|=i,ns|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Oc(e){var t=er(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);fr(i,t.memoizedState)||(Nt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function zy(){}function Uy(e,t){var r=Ie,n=er(),s=t(),i=!fr(n.memoizedState,s);if(i&&(n.memoizedState=s,Nt=!0),n=n.queue,tf(Hy.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Qe!==null&&Qe.memoizedState.tag&1){if(r.flags|=2048,Na(9,Vy.bind(null,r,n,s,t),void 0,null),Ze===null)throw Error(V(349));(rs&30)!==0||By(r,t,s)}return s}function By(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Vy(e,t,r,n){t.value=r,t.getSnapshot=n,Wy(t)&&qy(e)}function Hy(e,t,r){return r(function(){Wy(t)&&qy(e)})}function Wy(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fr(e,r)}catch{return!0}}function qy(e){var t=Br(e,1);t!==null&&dr(t,e,1,-1)}function gm(e){var t=gr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:e},t.queue=e,e=e.dispatch=Fj.bind(null,Ie,e),[t.memoizedState,e]}function Na(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Gy(){return er().memoizedState}function Mo(e,t,r,n){var s=gr();Ie.flags|=e,s.memoizedState=Na(1|t,r,void 0,n===void 0?null:n)}function Fl(e,t,r,n){var s=er();n=n===void 0?null:n;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,n!==null&&Qh(n,o.deps)){s.memoizedState=Na(t,r,i,n);return}}Ie.flags|=e,s.memoizedState=Na(1|t,r,i,n)}function xm(e,t){return Mo(8390656,8,e,t)}function tf(e,t){return Fl(2048,8,e,t)}function Ky(e,t){return Fl(4,2,e,t)}function Jy(e,t){return Fl(4,4,e,t)}function Xy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yy(e,t,r){return r=r!=null?r.concat([e]):null,Fl(4,4,Xy.bind(null,t,e),r)}function rf(){}function Qy(e,t){var r=er();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Qh(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Zy(e,t){var r=er();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Qh(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function ev(e,t,r){return(rs&21)===0?(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=r):(fr(r,t)||(r=iy(),Ie.lanes|=r,ns|=r,e.baseState=!0),t)}function Mj(e,t){var r=ge;ge=r!==0&&4>r?r:4,e(!0);var n=Dc.transition;Dc.transition={};try{e(!1),t()}finally{ge=r,Dc.transition=n}}function tv(){return er().memoizedState}function $j(e,t,r){var n=xn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},rv(e))nv(t,r);else if(r=My(e,t,r,n),r!==null){var s=gt();dr(r,e,n,s),sv(r,t,n)}}function Fj(e,t,r){var n=xn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(rv(e))nv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,fr(l,o)){var c=t.interleaved;c===null?(s.next=s,Gh(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=My(e,t,s,n),r!==null&&(s=gt(),dr(r,e,n,s),sv(r,t,n))}}function rv(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function nv(e,t){Ki=dl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function sv(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Rh(e,r)}}var hl={readContext:Zt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},zj={readContext:Zt,useCallback:function(e,t){return gr().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:xm,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Mo(4194308,4,Xy.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var r=gr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$j.bind(null,Ie,e),[n.memoizedState,e]},useRef:function(e){var t=gr();return e={current:e},t.memoizedState=e},useState:gm,useDebugValue:rf,useDeferredValue:function(e){return gr().memoizedState=e},useTransition:function(){var e=gm(!1),t=e[0];return e=Mj.bind(null,e[1]),gr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ie,s=gr();if(_e){if(r===void 0)throw Error(V(407));r=r()}else{if(r=t(),Ze===null)throw Error(V(349));(rs&30)!==0||By(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,xm(Hy.bind(null,n,i,e),[e]),n.flags|=2048,Na(9,Vy.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=gr(),t=Ze.identifierPrefix;if(_e){var r=$r,n=Mr;r=(n&~(1<<32-ur(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ja++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Oj++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Uj={readContext:Zt,useCallback:Qy,useContext:Zt,useEffect:tf,useImperativeHandle:Yy,useInsertionEffect:Ky,useLayoutEffect:Jy,useMemo:Zy,useReducer:Lc,useRef:Gy,useState:function(){return Lc(Sa)},useDebugValue:rf,useDeferredValue:function(e){var t=er();return ev(t,Xe.memoizedState,e)},useTransition:function(){var e=Lc(Sa)[0],t=er().memoizedState;return[e,t]},useMutableSource:zy,useSyncExternalStore:Uy,useId:tv,unstable_isNewReconciler:!1},Bj={readContext:Zt,useCallback:Qy,useContext:Zt,useEffect:tf,useImperativeHandle:Yy,useInsertionEffect:Ky,useLayoutEffect:Jy,useMemo:Zy,useReducer:Oc,useRef:Gy,useState:function(){return Oc(Sa)},useDebugValue:rf,useDeferredValue:function(e){var t=er();return Xe===null?t.memoizedState=e:ev(t,Xe.memoizedState,e)},useTransition:function(){var e=Oc(Sa)[0],t=er().memoizedState;return[e,t]},useMutableSource:zy,useSyncExternalStore:Uy,useId:tv,unstable_isNewReconciler:!1};function ar(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ld(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:De({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var zl={isMounted:function(e){return(e=e._reactInternals)?cs(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=gt(),s=xn(e),i=Fr(n,s);i.payload=t,r!=null&&(i.callback=r),t=mn(e,i,s),t!==null&&(dr(t,e,s,n),Lo(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=gt(),s=xn(e),i=Fr(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=mn(e,i,s),t!==null&&(dr(t,e,s,n),Lo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=gt(),n=xn(e),s=Fr(r,n);s.tag=2,t!=null&&(s.callback=t),t=mn(e,s,n),t!==null&&(dr(t,e,n,r),Lo(t,e,n))}};function ym(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!xa(r,n)||!xa(s,i):!0}function iv(e,t,r){var n=!1,s=wn,i=t.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=Et(t)?es:ut.current,n=t.contextTypes,i=(n=n!=null)?Xs(e,s):wn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function vm(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&zl.enqueueReplaceState(t,t.state,null)}function cd(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Kh(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=Et(t)?es:ut.current,s.context=Xs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ld(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&zl.enqueueReplaceState(s,s.state,null),cl(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ei(e,t){try{var r="",n=t;do r+=g1(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Mc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ud(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Vj=typeof WeakMap=="function"?WeakMap:Map;function av(e,t,r){r=Fr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){pl||(pl=!0,bd=n),ud(e,t)},r}function ov(e,t,r){r=Fr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ud(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ud(e,t),typeof n!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function bm(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Vj;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=n2.bind(null,e,t,r),t.then(e,e))}function wm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function km(e,t,r,n,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Fr(-1,1),t.tag=2,mn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var Hj=Gr.ReactCurrentOwner,Nt=!1;function ft(e,t,r,n){t.child=e===null?Oy(t,null,r,n):Qs(t,e.child,r,n)}function jm(e,t,r,n,s){r=r.render;var i=t.ref;return Hs(t,s),n=Zh(e,t,r,n,i,s),r=ef(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vr(e,t,s)):(_e&&r&&Uh(t),t.flags|=1,ft(e,t,n,s),t.child)}function Sm(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!df(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,lv(e,t,i,n,s)):(e=Uo(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,(e.lanes&s)===0){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:xa,r(o,n)&&e.ref===t.ref)return Vr(e,t,s)}return t.flags|=1,e=yn(i,n),e.ref=t.ref,e.return=t,t.child=e}function lv(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(xa(i,n)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)(e.flags&131072)!==0&&(Nt=!0);else return t.lanes=e.lanes,Vr(e,t,s)}return dd(e,t,r,n,s)}function cv(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Ds,Dt),Dt|=r;else{if((r&1073741824)===0)return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(Ds,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,we(Ds,Dt),Dt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,we(Ds,Dt),Dt|=n;return ft(e,t,s,r),t.child}function uv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function dd(e,t,r,n,s){var i=Et(r)?es:ut.current;return i=Xs(t,i),Hs(t,s),r=Zh(e,t,r,n,i,s),n=ef(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vr(e,t,s)):(_e&&n&&Uh(t),t.flags|=1,ft(e,t,r,s),t.child)}function Nm(e,t,r,n,s){if(Et(r)){var i=!0;sl(t)}else i=!1;if(Hs(t,s),t.stateNode===null)$o(e,t),iv(t,r,n),cd(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Zt(u):(u=Et(r)?es:ut.current,u=Xs(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&vm(t,o,n,u),tn=!1;var f=t.memoizedState;o.state=f,cl(t,n,o,s),c=t.memoizedState,l!==n||f!==c||Ct.current||tn?(typeof d=="function"&&(ld(t,r,d,n),c=t.memoizedState),(l=tn||ym(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,$y(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:ar(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=Et(r)?es:ut.current,c=Xs(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&vm(t,o,n,c),tn=!1,f=t.memoizedState,o.state=f,cl(t,n,o,s);var m=t.memoizedState;l!==h||f!==m||Ct.current||tn?(typeof p=="function"&&(ld(t,r,p,n),m=t.memoizedState),(u=tn||ym(t,r,u,n,f,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return hd(e,t,r,n,i,s)}function hd(e,t,r,n,s,i){uv(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&um(t,r,!1),Vr(e,t,i);n=t.stateNode,Hj.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Qs(t,e.child,null,i),t.child=Qs(t,null,l,i)):ft(e,t,l,i),t.memoizedState=n.state,s&&um(t,r,!0),t.child}function dv(e){var t=e.stateNode;t.pendingContext?cm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cm(e,t.context,!1),Jh(e,t.containerInfo)}function _m(e,t,r,n,s){return Ys(),Vh(s),t.flags|=256,ft(e,t,r,n),t.child}var fd={dehydrated:null,treeContext:null,retryLane:0};function pd(e){return{baseLanes:e,cachePool:null,transitions:null}}function hv(e,t,r){var n=t.pendingProps,s=Pe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),we(Pe,s&1),e===null)return ad(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},(n&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vl(o,n,0,null),e=Xn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=pd(r),t.memoizedState=fd,e):nf(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Wj(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return(o&1)===0&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=yn(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=yn(l,i):(i=Xn(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?pd(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=fd,n}return i=e.child,e=i.sibling,n=yn(i,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function nf(e,t){return t=Vl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function po(e,t,r,n){return n!==null&&Vh(n),Qs(t,e.child,null,r),e=nf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wj(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Mc(Error(V(422))),po(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Vl({mode:"visible",children:n.children},s,0,null),i=Xn(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,(t.mode&1)!==0&&Qs(t,e.child,null,o),t.child.memoizedState=pd(o),t.memoizedState=fd,i);if((t.mode&1)===0)return po(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(V(419)),n=Mc(i,n,void 0),po(e,t,o,n)}if(l=(o&e.childLanes)!==0,Nt||l){if(n=Ze,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(n.suspendedLanes|o))!==0?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Br(e,s),dr(n,e,s,-1))}return uf(),n=Mc(Error(V(421))),po(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=s2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ot=pn(s.nextSibling),$t=t,_e=!0,cr=null,e!==null&&(qt[Gt++]=Mr,qt[Gt++]=$r,qt[Gt++]=ts,Mr=e.id,$r=e.overflow,ts=t),t=nf(t,n.children),t.flags|=4096,t)}function Cm(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),od(e.return,t,r)}function $c(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function fv(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(ft(e,t,n.children,r),n=Pe.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cm(e,r,t);else if(e.tag===19)Cm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(we(Pe,n),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ul(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),$c(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ul(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}$c(t,!0,r,null,i);break;case"together":$c(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ns|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,r=yn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=yn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qj(e,t,r){switch(t.tag){case 3:dv(t),Ys();break;case 5:Fy(t);break;case 1:Et(t.type)&&sl(t);break;case 4:Jh(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;we(ol,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(we(Pe,Pe.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?hv(e,t,r):(we(Pe,Pe.current&1),e=Vr(e,t,r),e!==null?e.sibling:null);we(Pe,Pe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return fv(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Pe,Pe.current),n)break;return null;case 22:case 23:return t.lanes=0,cv(e,t,r)}return Vr(e,t,r)}var pv,md,mv,gv;pv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};md=function(){};mv=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,qn(Nr.current);var i=null;switch(r){case"input":s=Mu(e,s),n=Mu(e,n),i=[];break;case"select":s=De({},s,{value:void 0}),n=De({},n,{value:void 0}),i=[];break;case"textarea":s=zu(e,s),n=zu(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=rl)}Bu(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ua.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ua.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&je("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};gv=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ti(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Gj(e,t,r){var n=t.pendingProps;switch(Bh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return Et(t.type)&&nl(),at(t),null;case 3:return n=t.stateNode,Zs(),Se(Ct),Se(ut),Yh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ho(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,cr!==null&&(jd(cr),cr=null))),md(e,t),at(t),null;case 5:Xh(t);var s=qn(ka.current);if(r=t.type,e!==null&&t.stateNode!=null)mv(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(V(166));return at(t),null}if(e=qn(Nr.current),ho(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[br]=t,n[ba]=i,e=(t.mode&1)!==0,r){case"dialog":je("cancel",n),je("close",n);break;case"iframe":case"object":case"embed":je("load",n);break;case"video":case"audio":for(s=0;s<zi.length;s++)je(zi[s],n);break;case"source":je("error",n);break;case"img":case"image":case"link":je("error",n),je("load",n);break;case"details":je("toggle",n);break;case"input":Op(n,i),je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},je("invalid",n);break;case"textarea":$p(n,i),je("invalid",n)}Bu(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&uo(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&uo(n.textContent,l,e),s=["children",""+l]):ua.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&je("scroll",n)}switch(r){case"input":ro(n),Mp(n,i,!0);break;case"textarea":ro(n),Fp(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=rl)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hx(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[br]=t,e[ba]=n,pv(e,t,!1,!1),t.stateNode=e;e:{switch(o=Vu(r,n),r){case"dialog":je("cancel",e),je("close",e),s=n;break;case"iframe":case"object":case"embed":je("load",e),s=n;break;case"video":case"audio":for(s=0;s<zi.length;s++)je(zi[s],e);s=n;break;case"source":je("error",e),s=n;break;case"img":case"image":case"link":je("error",e),je("load",e),s=n;break;case"details":je("toggle",e),s=n;break;case"input":Op(e,n),s=Mu(e,n),je("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=De({},n,{value:void 0}),je("invalid",e);break;case"textarea":$p(e,n),s=zu(e,n),je("invalid",e);break;default:s=n}Bu(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Gx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Wx(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&da(e,c):typeof c=="number"&&da(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ua.hasOwnProperty(i)?c!=null&&i==="onScroll"&&je("scroll",e):c!=null&&Ch(e,i,c,o))}switch(r){case"input":ro(e),Mp(e,n,!1);break;case"textarea":ro(e),Fp(e);break;case"option":n.value!=null&&e.setAttribute("value",""+bn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?zs(e,!!n.multiple,i,!1):n.defaultValue!=null&&zs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=rl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)gv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(V(166));if(r=qn(ka.current),qn(Nr.current),ho(t)){if(n=t.stateNode,r=t.memoizedProps,n[br]=t,(i=n.nodeValue!==r)&&(e=$t,e!==null))switch(e.tag){case 3:uo(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&uo(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[br]=t,t.stateNode=n}return at(t),null;case 13:if(Se(Pe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&Ot!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Dy(),Ys(),t.flags|=98560,i=!1;else if(i=ho(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(V(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(V(317));i[br]=t}else Ys(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;at(t),i=!1}else cr!==null&&(jd(cr),cr=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Pe.current&1)!==0?Ye===0&&(Ye=3):uf())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return Zs(),md(e,t),e===null&&ya(t.stateNode.containerInfo),at(t),null;case 10:return qh(t.type._context),at(t),null;case 17:return Et(t.type)&&nl(),at(t),null;case 19:if(Se(Pe),i=t.memoizedState,i===null)return at(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ti(i,!1);else{if(Ye!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=ul(e),o!==null){for(t.flags|=128,Ti(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return we(Pe,Pe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Fe()>ti&&(t.flags|=128,n=!0,Ti(i,!1),t.lanes=4194304)}else{if(!n)if(e=ul(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ti(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_e)return at(t),null}else 2*Fe()-i.renderingStartTime>ti&&r!==1073741824&&(t.flags|=128,n=!0,Ti(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Fe(),t.sibling=null,r=Pe.current,we(Pe,n?r&1|2:r&1),t):(at(t),null);case 22:case 23:return cf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(Dt&1073741824)!==0&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function Kj(e,t){switch(Bh(t),t.tag){case 1:return Et(t.type)&&nl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zs(),Se(Ct),Se(ut),Yh(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Xh(t),null;case 13:if(Se(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Ys()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(Pe),null;case 4:return Zs(),null;case 10:return qh(t.type._context),null;case 22:case 23:return cf(),null;case 24:return null;default:return null}}var mo=!1,ot=!1,Jj=typeof WeakSet=="function"?WeakSet:Set,G=null;function Rs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Oe(e,t,n)}else r.current=null}function gd(e,t,r){try{r()}catch(n){Oe(e,t,n)}}var Em=!1;function Xj(e,t){if(Zu=Zo,e=wy(),zh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ed={focusedElem:e,selectionRange:r},Zo=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var m=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:ar(t.type,v),b);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(k){Oe(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return m=Em,Em=!1,m}function Ji(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&gd(t,r,i)}s=s.next}while(s!==n)}}function Ul(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function xd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function xv(e){var t=e.alternate;t!==null&&(e.alternate=null,xv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[br],delete t[ba],delete t[nd],delete t[Ij],delete t[Rj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yv(e){return e.tag===5||e.tag===3||e.tag===4}function Tm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=rl));else if(n!==4&&(e=e.child,e!==null))for(yd(e,t,r),e=e.sibling;e!==null;)yd(e,t,r),e=e.sibling}function vd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(vd(e,t,r),e=e.sibling;e!==null;)vd(e,t,r),e=e.sibling}var tt=null,or=!1;function Jr(e,t,r){for(r=r.child;r!==null;)vv(e,t,r),r=r.sibling}function vv(e,t,r){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(Rl,r)}catch{}switch(r.tag){case 5:ot||Rs(r,t);case 6:var n=tt,s=or;tt=null,Jr(e,t,r),tt=n,or=s,tt!==null&&(or?(e=tt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):tt.removeChild(r.stateNode));break;case 18:tt!==null&&(or?(e=tt,r=r.stateNode,e.nodeType===8?Ac(e.parentNode,r):e.nodeType===1&&Ac(e,r),ma(e)):Ac(tt,r.stateNode));break;case 4:n=tt,s=or,tt=r.stateNode.containerInfo,or=!0,Jr(e,t,r),tt=n,or=s;break;case 0:case 11:case 14:case 15:if(!ot&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!==0||(i&4)!==0)&&gd(r,t,o),s=s.next}while(s!==n)}Jr(e,t,r);break;case 1:if(!ot&&(Rs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Oe(r,t,l)}Jr(e,t,r);break;case 21:Jr(e,t,r);break;case 22:r.mode&1?(ot=(n=ot)||r.memoizedState!==null,Jr(e,t,r),ot=n):Jr(e,t,r);break;default:Jr(e,t,r)}}function Pm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Jj),t.forEach(function(n){var s=i2.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function sr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:tt=l.stateNode,or=!1;break e;case 3:tt=l.stateNode.containerInfo,or=!0;break e;case 4:tt=l.stateNode.containerInfo,or=!0;break e}l=l.return}if(tt===null)throw Error(V(160));vv(i,o,s),tt=null,or=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Oe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bv(t,e),t=t.sibling}function bv(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sr(t,e),pr(e),n&4){try{Ji(3,e,e.return),Ul(3,e)}catch(v){Oe(e,e.return,v)}try{Ji(5,e,e.return)}catch(v){Oe(e,e.return,v)}}break;case 1:sr(t,e),pr(e),n&512&&r!==null&&Rs(r,r.return);break;case 5:if(sr(t,e),pr(e),n&512&&r!==null&&Rs(r,r.return),e.flags&32){var s=e.stateNode;try{da(s,"")}catch(v){Oe(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Bx(s,i),Vu(l,o);var u=Vu(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Gx(s,h):d==="dangerouslySetInnerHTML"?Wx(s,h):d==="children"?da(s,h):Ch(s,d,h,u)}switch(l){case"input":$u(s,i);break;case"textarea":Vx(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?zs(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?zs(s,!!i.multiple,i.defaultValue,!0):zs(s,!!i.multiple,i.multiple?[]:"",!1))}s[ba]=i}catch(v){Oe(e,e.return,v)}}break;case 6:if(sr(t,e),pr(e),n&4){if(e.stateNode===null)throw Error(V(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Oe(e,e.return,v)}}break;case 3:if(sr(t,e),pr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ma(t.containerInfo)}catch(v){Oe(e,e.return,v)}break;case 4:sr(t,e),pr(e);break;case 13:sr(t,e),pr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(of=Fe())),n&4&&Pm(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ot=(u=ot)||d,sr(t,e),ot=u):sr(t,e),pr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&(e.mode&1)!==0)for(G=e,d=e.child;d!==null;){for(h=G=d;G!==null;){switch(f=G,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ji(4,f,f.return);break;case 1:Rs(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Oe(n,r,v)}}break;case 5:Rs(f,f.return);break;case 22:if(f.memoizedState!==null){Im(h);continue}}p!==null?(p.return=f,G=p):Im(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=qx("display",o))}catch(v){Oe(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Oe(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:sr(t,e),pr(e),n&4&&Pm(e);break;case 21:break;default:sr(t,e),pr(e)}}function pr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(yv(r)){var n=r;break e}r=r.return}throw Error(V(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(da(s,""),n.flags&=-33);var i=Tm(e);vd(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Tm(e);yd(e,l,o);break;default:throw Error(V(161))}}catch(c){Oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yj(e,t,r){G=e,wv(e)}function wv(e,t,r){for(var n=(e.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||mo;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ot;l=mo;var u=ot;if(mo=o,(ot=c)&&!u)for(G=s;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?Rm(s):c!==null?(c.return=o,G=c):Rm(s);for(;i!==null;)G=i,wv(i),i=i.sibling;G=s,mo=l,ot=u}Am(e)}else(s.subtreeFlags&8772)!==0&&i!==null?(i.return=s,G=i):Am(e)}}function Am(e){for(;G!==null;){var t=G;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ot||Ul(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ot)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ar(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&mm(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}mm(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ma(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}ot||t.flags&512&&xd(t)}catch(f){Oe(t,t.return,f)}}if(t===e){G=null;break}if(r=t.sibling,r!==null){r.return=t.return,G=r;break}G=t.return}}function Im(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var r=t.sibling;if(r!==null){r.return=t.return,G=r;break}G=t.return}}function Rm(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ul(4,t)}catch(c){Oe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Oe(t,s,c)}}var i=t.return;try{xd(t)}catch(c){Oe(t,i,c)}break;case 5:var o=t.return;try{xd(t)}catch(c){Oe(t,o,c)}}}catch(c){Oe(t,t.return,c)}if(t===e){G=null;break}var l=t.sibling;if(l!==null){l.return=t.return,G=l;break}G=t.return}}var Qj=Math.ceil,fl=Gr.ReactCurrentDispatcher,sf=Gr.ReactCurrentOwner,Yt=Gr.ReactCurrentBatchConfig,de=0,Ze=null,Ve=null,nt=0,Dt=0,Ds=Nn(0),Ye=0,_a=null,ns=0,Bl=0,af=0,Xi=null,jt=null,of=0,ti=1/0,Rr=null,pl=!1,bd=null,gn=null,go=!1,on=null,ml=0,Yi=0,wd=null,Fo=-1,zo=0;function gt(){return(de&6)!==0?Fe():Fo!==-1?Fo:Fo=Fe()}function xn(e){return(e.mode&1)===0?1:(de&2)!==0&&nt!==0?nt&-nt:Lj.transition!==null?(zo===0&&(zo=iy()),zo):(e=ge,e!==0||(e=window.event,e=e===void 0?16:hy(e.type)),e)}function dr(e,t,r,n){if(50<Yi)throw Yi=0,wd=null,Error(V(185));$a(e,r,n),((de&2)===0||e!==Ze)&&(e===Ze&&((de&2)===0&&(Bl|=r),Ye===4&&nn(e,nt)),Tt(e,n),r===1&&de===0&&(t.mode&1)===0&&(ti=Fe()+500,$l&&_n()))}function Tt(e,t){var r=e.callbackNode;L1(e,t);var n=Qo(e,e===Ze?nt:0);if(n===0)r!==null&&Bp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Bp(r),t===1)e.tag===0?Dj(Dm.bind(null,e)):Ay(Dm.bind(null,e)),Pj(function(){(de&6)===0&&_n()}),r=null;else{switch(ay(n)){case 1:r=Ih;break;case 4:r=ny;break;case 16:r=Yo;break;case 536870912:r=sy;break;default:r=Yo}r=Tv(r,kv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kv(e,t){if(Fo=-1,zo=0,(de&6)!==0)throw Error(V(327));var r=e.callbackNode;if(Ws()&&e.callbackNode!==r)return null;var n=Qo(e,e===Ze?nt:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=gl(e,n);else{t=n;var s=de;de|=2;var i=Sv();(Ze!==e||nt!==t)&&(Rr=null,ti=Fe()+500,Jn(e,t));do try{t2();break}catch(l){jv(e,l)}while(!0);Wh(),fl.current=i,de=s,Ve!==null?t=0:(Ze=null,nt=0,t=Ye)}if(t!==0){if(t===2&&(s=Ku(e),s!==0&&(n=s,t=kd(e,s))),t===1)throw r=_a,Jn(e,0),nn(e,n),Tt(e,Fe()),r;if(t===6)nn(e,n);else{if(s=e.current.alternate,(n&30)===0&&!Zj(s)&&(t=gl(e,n),t===2&&(i=Ku(e),i!==0&&(n=i,t=kd(e,i))),t===1))throw r=_a,Jn(e,0),nn(e,n),Tt(e,Fe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(V(345));case 2:Fn(e,jt,Rr);break;case 3:if(nn(e,n),(n&130023424)===n&&(t=of+500-Fe(),10<t)){if(Qo(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){gt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rd(Fn.bind(null,e,jt,Rr),t);break}Fn(e,jt,Rr);break;case 4:if(nn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ur(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=Fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Qj(n/1960))-n,10<n){e.timeoutHandle=rd(Fn.bind(null,e,jt,Rr),n);break}Fn(e,jt,Rr);break;case 5:Fn(e,jt,Rr);break;default:throw Error(V(329))}}}return Tt(e,Fe()),e.callbackNode===r?kv.bind(null,e):null}function kd(e,t){var r=Xi;return e.current.memoizedState.isDehydrated&&(Jn(e,t).flags|=256),e=gl(e,t),e!==2&&(t=jt,jt=r,t!==null&&jd(t)),e}function jd(e){jt===null?jt=e:jt.push.apply(jt,e)}function Zj(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!fr(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nn(e,t){for(t&=~af,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ur(t),n=1<<r;e[r]=-1,t&=~n}}function Dm(e){if((de&6)!==0)throw Error(V(327));Ws();var t=Qo(e,0);if((t&1)===0)return Tt(e,Fe()),null;var r=gl(e,t);if(e.tag!==0&&r===2){var n=Ku(e);n!==0&&(t=n,r=kd(e,n))}if(r===1)throw r=_a,Jn(e,0),nn(e,t),Tt(e,Fe()),r;if(r===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,jt,Rr),Tt(e,Fe()),null}function lf(e,t){var r=de;de|=1;try{return e(t)}finally{de=r,de===0&&(ti=Fe()+500,$l&&_n())}}function ss(e){on!==null&&on.tag===0&&(de&6)===0&&Ws();var t=de;de|=1;var r=Yt.transition,n=ge;try{if(Yt.transition=null,ge=1,e)return e()}finally{ge=n,Yt.transition=r,de=t,(de&6)===0&&_n()}}function cf(){Dt=Ds.current,Se(Ds)}function Jn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Tj(r)),Ve!==null)for(r=Ve.return;r!==null;){var n=r;switch(Bh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&nl();break;case 3:Zs(),Se(Ct),Se(ut),Yh();break;case 5:Xh(n);break;case 4:Zs();break;case 13:Se(Pe);break;case 19:Se(Pe);break;case 10:qh(n.type._context);break;case 22:case 23:cf()}r=r.return}if(Ze=e,Ve=e=yn(e.current,null),nt=Dt=t,Ye=0,_a=null,af=Bl=ns=0,jt=Xi=null,Wn!==null){for(t=0;t<Wn.length;t++)if(r=Wn[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Wn=null}return e}function jv(e,t){do{var r=Ve;try{if(Wh(),Oo.current=hl,dl){for(var n=Ie.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}dl=!1}if(rs=0,Qe=Xe=Ie=null,Ki=!1,ja=0,sf.current=null,r===null||r.return===null){Ye=1,_a=t,Ve=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=nt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if((d.mode&1)===0&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=wm(o);if(p!==null){p.flags&=-257,km(p,o,l,i,t),p.mode&1&&bm(i,u,t),t=p,c=u;var m=t.updateQueue;if(m===null){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}else{if((t&1)===0){bm(i,u,t),uf();break e}c=Error(V(426))}}else if(_e&&l.mode&1){var b=wm(o);if(b!==null){(b.flags&65536)===0&&(b.flags|=256),km(b,o,l,i,t),Vh(ei(c,l));break e}}i=c=ei(c,l),Ye!==4&&(Ye=2),Xi===null?Xi=[i]:Xi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=av(i,c,t);pm(i,x);break e;case 1:l=c;var y=i.type,g=i.stateNode;if((i.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(gn===null||!gn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=ov(i,l,t);pm(i,k);break e}}i=i.return}while(i!==null)}_v(r)}catch(N){t=N,Ve===r&&r!==null&&(Ve=r=r.return);continue}break}while(!0)}function Sv(){var e=fl.current;return fl.current=hl,e===null?hl:e}function uf(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Ze===null||(ns&268435455)===0&&(Bl&268435455)===0||nn(Ze,nt)}function gl(e,t){var r=de;de|=2;var n=Sv();(Ze!==e||nt!==t)&&(Rr=null,Jn(e,t));do try{e2();break}catch(s){jv(e,s)}while(!0);if(Wh(),de=r,fl.current=n,Ve!==null)throw Error(V(261));return Ze=null,nt=0,Ye}function e2(){for(;Ve!==null;)Nv(Ve)}function t2(){for(;Ve!==null&&!_1();)Nv(Ve)}function Nv(e){var t=Ev(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?_v(e):Ve=t,sf.current=null}function _v(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Gj(r,t,Dt),r!==null){Ve=r;return}}else{if(r=Kj(r,t),r!==null){r.flags&=32767,Ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Ve=null;return}}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Ye===0&&(Ye=5)}function Fn(e,t,r){var n=ge,s=Yt.transition;try{Yt.transition=null,ge=1,r2(e,t,r,n)}finally{Yt.transition=s,ge=n}return null}function r2(e,t,r,n){do Ws();while(on!==null);if((de&6)!==0)throw Error(V(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(O1(e,i),e===Ze&&(Ve=Ze=null,nt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||go||(go=!0,Tv(Yo,function(){return Ws(),null})),i=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||i){i=Yt.transition,Yt.transition=null;var o=ge;ge=1;var l=de;de|=4,sf.current=null,Xj(e,r),bv(r,e),kj(ed),Zo=!!Zu,ed=Zu=null,e.current=r,Yj(r),C1(),de=l,ge=o,Yt.transition=i}else e.current=r;if(go&&(go=!1,on=e,ml=s),i=e.pendingLanes,i===0&&(gn=null),P1(r.stateNode),Tt(e,Fe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(pl)throw pl=!1,e=bd,bd=null,e;return(ml&1)!==0&&e.tag!==0&&Ws(),i=e.pendingLanes,(i&1)!==0?e===wd?Yi++:(Yi=0,wd=e):Yi=0,_n(),null}function Ws(){if(on!==null){var e=ay(ml),t=Yt.transition,r=ge;try{if(Yt.transition=null,ge=16>e?16:e,on===null)var n=!1;else{if(e=on,on=null,ml=0,(de&6)!==0)throw Error(V(331));var s=de;for(de|=4,G=e.current;G!==null;){var i=G,o=i.child;if((G.flags&16)!==0){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:Ji(8,d,i)}var h=d.child;if(h!==null)h.return=d,G=h;else for(;G!==null;){d=G;var f=d.sibling,p=d.return;if(xv(d),d===u){G=null;break}if(f!==null){f.return=p,G=f;break}G=p}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}G=i}}if((i.subtreeFlags&2064)!==0&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:Ji(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,G=x;break e}G=i.return}}var y=e.current;for(G=y;G!==null;){o=G;var g=o.child;if((o.subtreeFlags&2064)!==0&&g!==null)g.return=o,G=g;else e:for(o=y;G!==null;){if(l=G,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:Ul(9,l)}}catch(N){Oe(l,l.return,N)}if(l===o){G=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,G=k;break e}G=l.return}}if(de=s,_n(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(Rl,e)}catch{}n=!0}return n}finally{ge=r,Yt.transition=t}}return!1}function Lm(e,t,r){t=ei(r,t),t=av(e,t,1),e=mn(e,t,1),t=gt(),e!==null&&($a(e,1,t),Tt(e,t))}function Oe(e,t,r){if(e.tag===3)Lm(e,e,r);else for(;t!==null;){if(t.tag===3){Lm(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(gn===null||!gn.has(n))){e=ei(r,e),e=ov(t,e,1),t=mn(t,e,1),e=gt(),t!==null&&($a(t,1,e),Tt(t,e));break}}t=t.return}}function n2(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=gt(),e.pingedLanes|=e.suspendedLanes&r,Ze===e&&(nt&r)===r&&(Ye===4||Ye===3&&(nt&130023424)===nt&&500>Fe()-of?Jn(e,0):af|=r),Tt(e,t)}function Cv(e,t){t===0&&((e.mode&1)===0?t=1:(t=io,io<<=1,(io&130023424)===0&&(io=4194304)));var r=gt();e=Br(e,t),e!==null&&($a(e,t,r),Tt(e,r))}function s2(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Cv(e,r)}function i2(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(V(314))}n!==null&&n.delete(t),Cv(e,r)}var Ev;Ev=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)Nt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Nt=!1,qj(e,t,r);Nt=(e.flags&131072)!==0}else Nt=!1,_e&&(t.flags&1048576)!==0&&Iy(t,al,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;$o(e,t),e=t.pendingProps;var s=Xs(t,ut.current);Hs(t,r),s=Zh(null,t,n,e,s,r);var i=ef();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(n)?(i=!0,sl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kh(t),s.updater=zl,t.stateNode=s,s._reactInternals=t,cd(t,n,e,r),t=hd(null,t,n,!0,i,r)):(t.tag=0,_e&&i&&Uh(t),ft(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch($o(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=o2(n),e=ar(n,e),s){case 0:t=dd(null,t,n,e,r);break e;case 1:t=Nm(null,t,n,e,r);break e;case 11:t=jm(null,t,n,e,r);break e;case 14:t=Sm(null,t,n,ar(n.type,e),r);break e}throw Error(V(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ar(n,s),dd(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ar(n,s),Nm(e,t,n,s,r);case 3:e:{if(dv(t),e===null)throw Error(V(387));n=t.pendingProps,i=t.memoizedState,s=i.element,$y(e,t),cl(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ei(Error(V(423)),t),t=_m(e,t,n,r,s);break e}else if(n!==s){s=ei(Error(V(424)),t),t=_m(e,t,n,r,s);break e}else for(Ot=pn(t.stateNode.containerInfo.firstChild),$t=t,_e=!0,cr=null,r=Oy(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ys(),n===s){t=Vr(e,t,r);break e}ft(e,t,n,r)}t=t.child}return t;case 5:return Fy(t),e===null&&ad(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,td(n,s)?o=null:i!==null&&td(n,i)&&(t.flags|=32),uv(e,t),ft(e,t,o,r),t.child;case 6:return e===null&&ad(t),null;case 13:return hv(e,t,r);case 4:return Jh(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Qs(t,null,n,r):ft(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ar(n,s),jm(e,t,n,s,r);case 7:return ft(e,t,t.pendingProps,r),t.child;case 8:return ft(e,t,t.pendingProps.children,r),t.child;case 12:return ft(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,we(ol,n._currentValue),n._currentValue=o,i!==null)if(fr(i.value,o)){if(i.children===s.children&&!Ct.current){t=Vr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Fr(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),od(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(V(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),od(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ft(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Hs(t,r),s=Zt(s),n=n(s),t.flags|=1,ft(e,t,n,r),t.child;case 14:return n=t.type,s=ar(n,t.pendingProps),s=ar(n.type,s),Sm(e,t,n,s,r);case 15:return lv(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ar(n,s),$o(e,t),t.tag=1,Et(n)?(e=!0,sl(t)):e=!1,Hs(t,r),iv(t,n,s),cd(t,n,s,r),hd(null,t,n,!0,e,r);case 19:return fv(e,t,r);case 22:return cv(e,t,r)}throw Error(V(156,t.tag))};function Tv(e,t){return ry(e,t)}function a2(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,r,n){return new a2(e,t,r,n)}function df(e){return e=e.prototype,!(!e||!e.isReactComponent)}function o2(e){if(typeof e=="function")return df(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Th)return 11;if(e===Ph)return 14}return 2}function yn(e,t){var r=e.alternate;return r===null?(r=Jt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Uo(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")df(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ss:return Xn(r.children,s,i,t);case Eh:o=8,s|=8;break;case Ru:return e=Jt(12,r,t,s|2),e.elementType=Ru,e.lanes=i,e;case Du:return e=Jt(13,r,t,s),e.elementType=Du,e.lanes=i,e;case Lu:return e=Jt(19,r,t,s),e.elementType=Lu,e.lanes=i,e;case Fx:return Vl(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mx:o=10;break e;case $x:o=9;break e;case Th:o=11;break e;case Ph:o=14;break e;case en:o=16,n=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=Jt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Xn(e,t,r,n){return e=Jt(7,e,n,t),e.lanes=r,e}function Vl(e,t,r,n){return e=Jt(22,e,n,t),e.elementType=Fx,e.lanes=r,e.stateNode={isHidden:!1},e}function Fc(e,t,r){return e=Jt(6,e,null,t),e.lanes=r,e}function zc(e,t,r){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l2(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bc(0),this.expirationTimes=bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bc(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hf(e,t,r,n,s,i,o,l,c){return e=new l2(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Jt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kh(i),e}function c2(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:js,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Pv(e){if(!e)return wn;e=e._reactInternals;e:{if(cs(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var r=e.type;if(Et(r))return Py(e,r,t)}return t}function Av(e,t,r,n,s,i,o,l,c){return e=hf(r,n,!0,e,s,i,o,l,c),e.context=Pv(null),r=e.current,n=gt(),s=xn(r),i=Fr(n,s),i.callback=t??null,mn(r,i,s),e.current.lanes=s,$a(e,s,n),Tt(e,n),e}function Hl(e,t,r,n){var s=t.current,i=gt(),o=xn(s);return r=Pv(r),t.context===null?t.context=r:t.pendingContext=r,t=Fr(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=mn(s,t,o),e!==null&&(dr(e,s,o,i),Lo(e,s,o)),o}function xl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Om(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ff(e,t){Om(e,t),(e=e.alternate)&&Om(e,t)}function u2(){return null}var Iv=typeof reportError=="function"?reportError:function(e){console.error(e)};function pf(e){this._internalRoot=e}Wl.prototype.render=pf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));Hl(e,t,null,null)};Wl.prototype.unmount=pf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ss(function(){Hl(null,e,null,null)}),t[Ur]=null}};function Wl(e){this._internalRoot=e}Wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=cy();e={blockedOn:null,target:e,priority:t};for(var r=0;r<rn.length&&t!==0&&t<rn[r].priority;r++);rn.splice(r,0,e),r===0&&dy(e)}};function mf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ql(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mm(){}function d2(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=xl(o);i.call(u)}}var o=Av(t,n,e,0,null,!1,!1,"",Mm);return e._reactRootContainer=o,e[Ur]=o.current,ya(e.nodeType===8?e.parentNode:e),ss(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=xl(c);l.call(u)}}var c=hf(e,0,!1,null,null,!1,!1,"",Mm);return e._reactRootContainer=c,e[Ur]=c.current,ya(e.nodeType===8?e.parentNode:e),ss(function(){Hl(t,c,r,n)}),c}function Gl(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=xl(o);l.call(c)}}Hl(t,o,e,s)}else o=d2(r,t,e,s,n);return xl(o)}oy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Fi(t.pendingLanes);r!==0&&(Rh(t,r|1),Tt(t,Fe()),(de&6)===0&&(ti=Fe()+500,_n()))}break;case 13:ss(function(){var n=Br(e,1);if(n!==null){var s=gt();dr(n,e,1,s)}}),ff(e,1)}};Dh=function(e){if(e.tag===13){var t=Br(e,134217728);if(t!==null){var r=gt();dr(t,e,134217728,r)}ff(e,134217728)}};ly=function(e){if(e.tag===13){var t=xn(e),r=Br(e,t);if(r!==null){var n=gt();dr(r,e,t,n)}ff(e,t)}};cy=function(){return ge};uy=function(e,t){var r=ge;try{return ge=e,t()}finally{ge=r}};Wu=function(e,t,r){switch(t){case"input":if($u(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ml(n);if(!s)throw Error(V(90));Ux(n),$u(n,s)}}}break;case"textarea":Vx(e,r);break;case"select":t=r.value,t!=null&&zs(e,!!r.multiple,t,!1)}};Xx=lf;Yx=ss;var h2={usingClientEntryPoint:!1,Events:[za,Es,Ml,Kx,Jx,lf]},Pi={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f2={bundleType:Pi.bundleType,version:Pi.version,rendererPackageName:Pi.rendererPackageName,rendererConfig:Pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ey(e),e===null?null:e.stateNode},findFiberByHostInstance:Pi.findFiberByHostInstance||u2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xo.isDisabled&&xo.supportsFiber)try{Rl=xo.inject(f2),Sr=xo}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h2;Ut.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(t))throw Error(V(200));return c2(e,t,null,r)};Ut.createRoot=function(e,t){if(!mf(e))throw Error(V(299));var r=!1,n="",s=Iv;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=hf(e,1,!1,null,null,r,!1,n,s),e[Ur]=t.current,ya(e.nodeType===8?e.parentNode:e),new pf(t)};Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=ey(t),e=e===null?null:e.stateNode,e};Ut.flushSync=function(e){return ss(e)};Ut.hydrate=function(e,t,r){if(!ql(t))throw Error(V(200));return Gl(null,e,t,!0,r)};Ut.hydrateRoot=function(e,t,r){if(!mf(e))throw Error(V(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Iv;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Av(t,null,e,1,r??null,s,!1,i,o),e[Ur]=t.current,ya(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Wl(t)};Ut.render=function(e,t,r){if(!ql(t))throw Error(V(200));return Gl(null,e,t,!1,r)};Ut.unmountComponentAtNode=function(e){if(!ql(e))throw Error(V(40));return e._reactRootContainer?(ss(function(){Gl(null,null,e,!1,function(){e._reactRootContainer=null,e[Ur]=null})}),!0):!1};Ut.unstable_batchedUpdates=lf;Ut.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ql(r))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return Gl(e,t,r,!1,n)};Ut.version="18.3.1-next-f1338f8080-20240426";function Rv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rv)}catch(e){console.error(e)}}Rv(),Rx.exports=Ut;var p2=Rx.exports,$m=p2;Au.createRoot=$m.createRoot,Au.hydrateRoot=$m.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ca(){return Ca=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ca.apply(this,arguments)}var ln;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ln||(ln={}));const Fm="popstate";function m2(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Sd("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:yl(s)}return x2(t,r,null,e)}function Re(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Dv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function g2(){return Math.random().toString(36).substr(2,8)}function zm(e,t){return{usr:e.state,key:e.key,idx:t}}function Sd(e,t,r,n){return r===void 0&&(r=null),Ca({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?di(t):t,{state:r,key:t&&t.key||n||g2()})}function yl(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function di(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function x2(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=ln.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ca({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=ln.Pop;let b=d(),x=b==null?null:b-u;u=b,c&&c({action:l,location:v.location,delta:x})}function f(b,x){l=ln.Push;let y=Sd(v.location,b,x);u=d()+1;let g=zm(y,u),k=v.createHref(y);try{o.pushState(g,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(k)}i&&c&&c({action:l,location:v.location,delta:1})}function p(b,x){l=ln.Replace;let y=Sd(v.location,b,x);u=d();let g=zm(y,u),k=v.createHref(y);o.replaceState(g,"",k),i&&c&&c({action:l,location:v.location,delta:0})}function m(b){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof b=="string"?b:yl(b);return y=y.replace(/ $/,"%20"),Re(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let v={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Fm,h),c=b,()=>{s.removeEventListener(Fm,h),c=null}},createHref(b){return t(s,b)},createURL:m,encodeLocation(b){let x=m(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(b){return o.go(b)}};return v}var Um;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Um||(Um={}));function y2(e,t,r){return r===void 0&&(r="/"),v2(e,t,r)}function v2(e,t,r,n){let s=typeof t=="string"?di(t):t,i=ri(s.pathname||"/",r);if(i==null)return null;let o=Lv(e);b2(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=A2(i);l=T2(o[c],u)}return l}function Lv(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Re(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=vn([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Re(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Lv(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:C2(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Ov(i.path))s(i,o,c)}),t}function Ov(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Ov(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function b2(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:E2(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const w2=/^:[\w-]+$/,k2=3,j2=2,S2=1,N2=10,_2=-2,Bm=e=>e==="*";function C2(e,t){let r=e.split("/"),n=r.length;return r.some(Bm)&&(n+=_2),t&&(n+=j2),r.filter(s=>!Bm(s)).reduce((s,i)=>s+(w2.test(i)?k2:i===""?S2:N2),n)}function E2(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function T2(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Nd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:vn([i,h.pathname]),pathnameBase:L2(vn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=vn([i,h.pathnameBase]))}return o}function Nd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=P2(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let v=l[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[h];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function P2(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Dv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function A2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Dv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ri(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function I2(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?di(e):e;return{pathname:r?r.startsWith("/")?r:R2(r,t):t,search:O2(n),hash:M2(s)}}function R2(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Uc(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function D2(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function gf(e,t){let r=D2(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function xf(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=di(e):(s=Ca({},e),Re(!s.pathname||!s.pathname.includes("?"),Uc("?","pathname","search",s)),Re(!s.pathname||!s.pathname.includes("#"),Uc("#","pathname","hash",s)),Re(!s.search||!s.search.includes("#"),Uc("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=I2(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const vn=e=>e.join("/").replace(/\/\/+/g,"/"),L2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,M2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Mv=["post","put","patch","delete"];new Set(Mv);const F2=["get",...Mv];new Set(F2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ea.apply(this,arguments)}const Kl=w.createContext(null),$v=w.createContext(null),Kr=w.createContext(null),Jl=w.createContext(null),Tr=w.createContext({outlet:null,matches:[],isDataRoute:!1}),Fv=w.createContext(null);function z2(e,t){let{relative:r}=t===void 0?{}:t;hi()||Re(!1);let{basename:n,navigator:s}=w.useContext(Kr),{hash:i,pathname:o,search:l}=Xl(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:vn([n,o])),s.createHref({pathname:c,search:l,hash:i})}function hi(){return w.useContext(Jl)!=null}function Pr(){return hi()||Re(!1),w.useContext(Jl).location}function zv(e){w.useContext(Kr).static||w.useLayoutEffect(e)}function Cn(){let{isDataRoute:e}=w.useContext(Tr);return e?tS():U2()}function U2(){hi()||Re(!1);let e=w.useContext(Kl),{basename:t,future:r,navigator:n}=w.useContext(Kr),{matches:s}=w.useContext(Tr),{pathname:i}=Pr(),o=JSON.stringify(gf(s,r.v7_relativeSplatPath)),l=w.useRef(!1);return zv(()=>{l.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=xf(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:vn([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}const B2=w.createContext(null);function V2(e){let t=w.useContext(Tr).outlet;return t&&w.createElement(B2.Provider,{value:e},t)}function yf(){let{matches:e}=w.useContext(Tr),t=e[e.length-1];return t?t.params:{}}function Xl(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=w.useContext(Kr),{matches:s}=w.useContext(Tr),{pathname:i}=Pr(),o=JSON.stringify(gf(s,n.v7_relativeSplatPath));return w.useMemo(()=>xf(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function H2(e,t){return W2(e,t)}function W2(e,t,r,n){hi()||Re(!1);let{navigator:s}=w.useContext(Kr),{matches:i}=w.useContext(Tr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Pr(),d;if(t){var h;let b=typeof t=="string"?di(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Re(!1),d=b}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=y2(e,{pathname:p}),v=X2(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:vn([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:vn([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&v?w.createElement(Jl.Provider,{value:{location:Ea({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ln.Pop}},v):v}function q2(){let e=eS(),t=$2(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,null)}const G2=w.createElement(q2,null);class K2 extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(Tr.Provider,{value:this.props.routeContext},w.createElement(Fv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J2(e){let{routeContext:t,match:r,children:n}=e,s=w.useContext(Kl);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(Tr.Provider,{value:t},n)}function X2(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Re(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,v=null,b=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||G2,c&&(u<0&&f===0?(rS("route-fallback"),m=!0,b=null):u===f&&(m=!0,b=h.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,f+1)),y=()=>{let g;return p?g=v:m?g=b:h.route.Component?g=w.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=d,w.createElement(J2,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:g})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(K2,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var Uv=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(Uv||{}),Bv=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(Bv||{});function Y2(e){let t=w.useContext(Kl);return t||Re(!1),t}function Q2(e){let t=w.useContext($v);return t||Re(!1),t}function Z2(e){let t=w.useContext(Tr);return t||Re(!1),t}function Vv(e){let t=Z2(),r=t.matches[t.matches.length-1];return r.route.id||Re(!1),r.route.id}function eS(){var e;let t=w.useContext(Fv),r=Q2(),n=Vv();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function tS(){let{router:e}=Y2(Uv.UseNavigateStable),t=Vv(Bv.UseNavigateStable),r=w.useRef(!1);return zv(()=>{r.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ea({fromRouteId:t},i)))},[e,t])}const Vm={};function rS(e,t,r){Vm[e]||(Vm[e]=!0)}function nS(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function sS(e){let{to:t,replace:r,state:n,relative:s}=e;hi()||Re(!1);let{future:i,static:o}=w.useContext(Kr),{matches:l}=w.useContext(Tr),{pathname:c}=Pr(),u=Cn(),d=xf(t,gf(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return w.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function iS(e){return V2(e.context)}function et(e){Re(!1)}function aS(e){let{basename:t="/",children:r=null,location:n,navigationType:s=ln.Pop,navigator:i,static:o=!1,future:l}=e;hi()&&Re(!1);let c=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Ea({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=di(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,v=w.useMemo(()=>{let b=ri(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:m},navigationType:s}},[c,d,h,f,p,m,s]);return v==null?null:w.createElement(Kr.Provider,{value:u},w.createElement(Jl.Provider,{children:r,value:v}))}function oS(e){let{children:t,location:r}=e;return H2(_d(t),r)}new Promise(()=>{});function _d(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let i=[...t,s];if(n.type===w.Fragment){r.push.apply(r,_d(n.props.children,i));return}n.type!==et&&Re(!1),!n.props.index||!n.props.children||Re(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=_d(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vl.apply(this,arguments)}function Hv(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function lS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cS(e,t){return e.button===0&&(!t||t==="_self")&&!lS(e)}const uS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],hS="6";try{window.__reactRouterVersion=hS}catch{}const fS=w.createContext({isTransitioning:!1}),pS="startTransition",Hm=n1[pS];function mS(e){let{basename:t,children:r,future:n,window:s}=e,i=w.useRef();i.current==null&&(i.current=m2({window:s,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=w.useCallback(h=>{u&&Hm?Hm(()=>c(h)):c(h)},[c,u]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>nS(n),[n]),w.createElement(aS,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const gS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bl=w.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=Hv(t,uS),{basename:p}=w.useContext(Kr),m,v=!1;if(typeof u=="string"&&xS.test(u)&&(m=u,gS))try{let g=new URL(window.location.href),k=u.startsWith("//")?new URL(g.protocol+u):new URL(u),N=ri(k.pathname,p);k.origin===g.origin&&N!=null?u=N+k.search+k.hash:v=!0}catch{}let b=z2(u,{relative:s}),x=bS(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function y(g){n&&n(g),g.defaultPrevented||x(g)}return w.createElement("a",vl({},f,{href:m||b,onClick:v||i?n:y,ref:r,target:c}))}),yS=w.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=Hv(t,dS),f=Xl(c,{relative:h.relative}),p=Pr(),m=w.useContext($v),{navigator:v,basename:b}=w.useContext(Kr),x=m!=null&&wS(f)&&u===!0,y=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,g=p.pathname,k=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(g=g.toLowerCase(),k=k?k.toLowerCase():null,y=y.toLowerCase()),k&&b&&(k=ri(k,b)||k);const N=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let j=g===y||!o&&g.startsWith(y)&&g.charAt(N)==="/",T=k!=null&&(k===y||!o&&k.startsWith(y)&&k.charAt(y.length)==="/"),E={isActive:j,isPending:T,isTransitioning:x},I=j?n:void 0,D;typeof i=="function"?D=i(E):D=[i,j?"active":null,T?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let z=typeof l=="function"?l(E):l;return w.createElement(bl,vl({},h,{"aria-current":I,className:D,ref:r,style:z,to:c,viewTransition:u}),typeof d=="function"?d(E):d)});var Cd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cd||(Cd={}));var Wm;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Wm||(Wm={}));function vS(e){let t=w.useContext(Kl);return t||Re(!1),t}function bS(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Cn(),u=Pr(),d=Xl(e,{relative:o});return w.useCallback(h=>{if(cS(h,r)){h.preventDefault();let f=n!==void 0?n:yl(u)===yl(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function wS(e,t){t===void 0&&(t={});let r=w.useContext(fS);r==null&&Re(!1);let{basename:n}=vS(Cd.useViewTransitionState),s=Xl(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=ri(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=ri(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Nd(s.pathname,o)!=null||Nd(s.pathname,i)!=null}function kS(e,t={}){const r=w.useRef(null),n=w.useRef(null),s=w.useRef(0),i=t.maxReconnectAttempts||10,o=t.reconnectDelay||3e3,l=()=>{try{r.current=new WebSocket(e),r.current.onopen=c=>{console.log("WebSocket connected"),s.current=0,t.onOpen&&t.onOpen(c)},r.current.onmessage=c=>{t.onMessage&&t.onMessage(c)},r.current.onerror=c=>{console.error("WebSocket error:",c),t.onError&&t.onError(c)},r.current.onclose=c=>{console.log("WebSocket closed"),t.onClose&&t.onClose(c),s.current<i&&(s.current++,console.log(`Reconnecting... (attempt ${s.current}/${i})`),n.current=setTimeout(()=>{l()},o))}}catch(c){console.error("Failed to create WebSocket:",c)}};return w.useEffect(()=>(l(),()=>{n.current&&clearTimeout(n.current),r.current&&r.current.close()}),[e]),r.current}function Wv(e,t){const[r,n]=w.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return w.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(r))}catch(i){console.error(`Error saving to localStorage key "${e}":`,i)}},[e,r]),[r,i=>{try{const o=i instanceof Function?i(r):i;n(o)}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}}]}function jS(){const[e,t]=Wv("leo-dashboard-preferences",{theme:"light",sidebarCollapsed:!1,refreshInterval:3e4,notifications:!0,compactView:!1});return{preferences:e,updatePreference:(n,s)=>{t(i=>({...i,[n]:s}))}}}function Bc(e,t){const[r,n]=Wv(`leo-dashboard-${e}`,t);return[r,n,()=>{window.localStorage.removeItem(`leo-dashboard-${e}`),n(t)}]}const vf=w.createContext({});function bf(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const wf=typeof window<"u",qv=wf?w.useLayoutEffect:w.useEffect,Yl=w.createContext(null);function kf(e,t){e.indexOf(t)===-1&&e.push(t)}function jf(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Hr=(e,t,r)=>r>t?t:r<e?e:r;let Sf=()=>{};const Wr={},Gv=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Kv(e){return typeof e=="object"&&e!==null}const Jv=e=>/^0[^.\s]+$/u.test(e);function Nf(e){let t;return()=>(t===void 0&&(t=e()),t)}const Qt=e=>e,SS=(e,t)=>r=>t(e(r)),Ba=(...e)=>e.reduce(SS),Ta=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class _f{constructor(){this.subscriptions=[]}add(t){return kf(this.subscriptions,t),()=>jf(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _r=e=>e*1e3,Xt=e=>e/1e3;function Xv(e,t){return t?e*(1e3/t):0}const Yv=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,NS=1e-7,_S=12;function CS(e,t,r,n,s){let i,o,l=0;do o=t+(r-t)/2,i=Yv(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>NS&&++l<_S);return o}function Va(e,t,r,n){if(e===t&&r===n)return Qt;const s=i=>CS(i,0,1,e,r);return i=>i===0||i===1?i:Yv(s(i),t,n)}const Qv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Zv=e=>t=>1-e(1-t),eb=Va(.33,1.53,.69,.99),Cf=Zv(eb),tb=Qv(Cf),rb=e=>(e*=2)<1?.5*Cf(e):.5*(2-Math.pow(2,-10*(e-1))),Ef=e=>1-Math.sin(Math.acos(e)),nb=Zv(Ef),sb=Qv(Ef),ES=Va(.42,0,1,1),TS=Va(0,0,.58,1),ib=Va(.42,0,.58,1),PS=e=>Array.isArray(e)&&typeof e[0]!="number",ab=e=>Array.isArray(e)&&typeof e[0]=="number",AS={linear:Qt,easeIn:ES,easeInOut:ib,easeOut:TS,circIn:Ef,circInOut:sb,circOut:nb,backIn:Cf,backInOut:tb,backOut:eb,anticipate:rb},IS=e=>typeof e=="string",qm=e=>{if(ab(e)){Sf(e.length===4);const[t,r,n,s]=e;return Va(t,r,n,s)}else if(IS(e))return AS[e];return e},yo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function RS(e,t){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,h=!1,f=!1)=>{const m=f&&s?r:n;return h&&o.add(d),m.has(d)||m.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const DS=40;function ob(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=yo.reduce((g,k)=>(g[k]=RS(i),g),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:p,postRender:m}=o,v=()=>{const g=Wr.useManualTiming?s.timestamp:performance.now();r=!1,Wr.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(g-s.timestamp,DS),1)),s.timestamp=g,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),p.process(s),m.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(v))},b=()=>{r=!0,n=!0,s.isProcessing||e(v)};return{schedule:yo.reduce((g,k)=>{const N=o[k];return g[k]=(j,T=!1,E=!1)=>(r||b(),N.schedule(j,T,E)),g},{}),cancel:g=>{for(let k=0;k<yo.length;k++)o[yo[k]].cancel(g)},state:s,steps:o}}const{schedule:Ee,cancel:kn,state:rt,steps:Vc}=ob(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qt,!0);let Bo;function LS(){Bo=void 0}const _t={now:()=>(Bo===void 0&&_t.set(rt.isProcessing||Wr.useManualTiming?rt.timestamp:performance.now()),Bo),set:e=>{Bo=e,queueMicrotask(LS)}},lb=e=>t=>typeof t=="string"&&t.startsWith(e),Tf=lb("--"),OS=lb("var(--"),Pf=e=>OS(e)?MS.test(e.split("/*")[0].trim()):!1,MS=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Pa={...fi,transform:e=>Hr(0,1,e)},vo={...fi,default:1},Qi=e=>Math.round(e*1e5)/1e5,Af=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $S(e){return e==null}const FS=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,If=(e,t)=>r=>!!(typeof r=="string"&&FS.test(r)&&r.startsWith(e)||t&&!$S(r)&&Object.prototype.hasOwnProperty.call(r,t)),cb=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,l]=n.match(Af);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},zS=e=>Hr(0,255,e),Hc={...fi,transform:e=>Math.round(zS(e))},Gn={test:If("rgb","red"),parse:cb("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Hc.transform(e)+", "+Hc.transform(t)+", "+Hc.transform(r)+", "+Qi(Pa.transform(n))+")"};function US(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Ed={test:If("#"),parse:US,transform:Gn.transform},Ha=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Qr=Ha("deg"),Cr=Ha("%"),Q=Ha("px"),BS=Ha("vh"),VS=Ha("vw"),Gm={...Cr,parse:e=>Cr.parse(e)/100,transform:e=>Cr.transform(e*100)},Ls={test:If("hsl","hue"),parse:cb("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Cr.transform(Qi(t))+", "+Cr.transform(Qi(r))+", "+Qi(Pa.transform(n))+")"},Be={test:e=>Gn.test(e)||Ed.test(e)||Ls.test(e),parse:e=>Gn.test(e)?Gn.parse(e):Ls.test(e)?Ls.parse(e):Ed.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Gn.transform(e):Ls.transform(e),getAnimatableNone:e=>{const t=Be.parse(e);return t.alpha=0,Be.transform(t)}},HS=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function WS(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Af))==null?void 0:t.length)||0)+(((r=e.match(HS))==null?void 0:r.length)||0)>0}const ub="number",db="color",qS="var",GS="var(",Km="${}",KS=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Aa(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(KS,c=>(Be.test(c)?(n.color.push(i),s.push(db),r.push(Be.parse(c))):c.startsWith(GS)?(n.var.push(i),s.push(qS),r.push(c)):(n.number.push(i),s.push(ub),r.push(parseFloat(c))),++i,Km)).split(Km);return{values:r,split:l,indexes:n,types:s}}function hb(e){return Aa(e).values}function fb(e){const{split:t,types:r}=Aa(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const l=r[o];l===ub?i+=Qi(s[o]):l===db?i+=Be.transform(s[o]):i+=s[o]}return i}}const JS=e=>typeof e=="number"?0:Be.test(e)?Be.getAnimatableNone(e):e;function XS(e){const t=hb(e);return fb(e)(t.map(JS))}const jn={test:WS,parse:hb,createTransformer:fb,getAnimatableNone:XS};function Wc(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function YS({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Wc(c,l,e+1/3),i=Wc(c,l,e),o=Wc(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function wl(e,t){return r=>r>0?t:e}const Ae=(e,t,r)=>e+(t-e)*r,qc=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},QS=[Ed,Gn,Ls],ZS=e=>QS.find(t=>t.test(e));function Jm(e){const t=ZS(e);if(!t)return!1;let r=t.parse(e);return t===Ls&&(r=YS(r)),r}const Xm=(e,t)=>{const r=Jm(e),n=Jm(t);if(!r||!n)return wl(e,t);const s={...r};return i=>(s.red=qc(r.red,n.red,i),s.green=qc(r.green,n.green,i),s.blue=qc(r.blue,n.blue,i),s.alpha=Ae(r.alpha,n.alpha,i),Gn.transform(s))},Td=new Set(["none","hidden"]);function eN(e,t){return Td.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function tN(e,t){return r=>Ae(e,t,r)}function Rf(e){return typeof e=="number"?tN:typeof e=="string"?Pf(e)?wl:Be.test(e)?Xm:sN:Array.isArray(e)?pb:typeof e=="object"?Be.test(e)?Xm:rN:wl}function pb(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>Rf(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function rN(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=Rf(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function nN(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][n[i]],l=e.values[o]??0;r[s]=l,n[i]++}return r}const sN=(e,t)=>{const r=jn.createTransformer(t),n=Aa(e),s=Aa(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Td.has(e)&&!s.values.length||Td.has(t)&&!n.values.length?eN(e,t):Ba(pb(nN(n,s),s.values),r):wl(e,t)};function mb(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ae(e,t,r):Rf(e)(e,t)}const iN=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Ee.update(t,r),stop:()=>kn(t),now:()=>rt.isProcessing?rt.timestamp:_t.now()}},gb=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},kl=2e4;function Df(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<kl;)t+=r,n=e.next(t);return t>=kl?1/0:t}function aN(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(Df(n),kl);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:Xt(s)}}const oN=5;function xb(e,t,r){const n=Math.max(t-oN,0);return Xv(r-e(n),t-n)}const Le={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Gc=.001;function lN({duration:e=Le.duration,bounce:t=Le.bounce,velocity:r=Le.velocity,mass:n=Le.mass}){let s,i,o=1-t;o=Hr(Le.minDamping,Le.maxDamping,o),e=Hr(Le.minDuration,Le.maxDuration,Xt(e)),o<1?(s=u=>{const d=u*o,h=d*e,f=d-r,p=Pd(u,o),m=Math.exp(-h);return Gc-f/p*m},i=u=>{const h=u*o*e,f=h*r+r,p=Math.pow(o,2)*Math.pow(u,2)*e,m=Math.exp(-h),v=Pd(Math.pow(u,2),o);return(-s(u)+Gc>0?-1:1)*((f-p)*m)/v}):(s=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-Gc+d*h},i=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=uN(s,i,l);if(e=_r(e),isNaN(c))return{stiffness:Le.stiffness,damping:Le.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const cN=12;function uN(e,t,r){let n=r;for(let s=1;s<cN;s++)n=n-e(n)/t(n);return n}function Pd(e,t){return e*Math.sqrt(1-t*t)}const dN=["duration","bounce"],hN=["stiffness","damping","mass"];function Ym(e,t){return t.some(r=>e[r]!==void 0)}function fN(e){let t={velocity:Le.velocity,stiffness:Le.stiffness,damping:Le.damping,mass:Le.mass,isResolvedFromDuration:!1,...e};if(!Ym(e,hN)&&Ym(e,dN))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*Hr(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Le.mass,stiffness:s,damping:i}}else{const r=lN(e);t={...t,...r,mass:Le.mass},t.isResolvedFromDuration=!0}return t}function jl(e=Le.visualDuration,t=Le.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=fN({...r,velocity:-Xt(r.velocity||0)}),m=f||0,v=u/(2*Math.sqrt(c*d)),b=o-i,x=Xt(Math.sqrt(c/d)),y=Math.abs(b)<5;n||(n=y?Le.restSpeed.granular:Le.restSpeed.default),s||(s=y?Le.restDelta.granular:Le.restDelta.default);let g;if(v<1){const N=Pd(x,v);g=j=>{const T=Math.exp(-v*x*j);return o-T*((m+v*x*b)/N*Math.sin(N*j)+b*Math.cos(N*j))}}else if(v===1)g=N=>o-Math.exp(-x*N)*(b+(m+x*b)*N);else{const N=x*Math.sqrt(v*v-1);g=j=>{const T=Math.exp(-v*x*j),E=Math.min(N*j,300);return o-T*((m+v*x*b)*Math.sinh(E)+N*b*Math.cosh(E))/N}}const k={calculatedDuration:p&&h||null,next:N=>{const j=g(N);if(p)l.done=N>=h;else{let T=N===0?m:0;v<1&&(T=N===0?_r(m):xb(g,N,j));const E=Math.abs(T)<=n,I=Math.abs(o-j)<=s;l.done=E&&I}return l.value=l.done?o:j,l},toString:()=>{const N=Math.min(Df(k),kl),j=gb(T=>k.next(N*T).value,N,30);return N+"ms "+j},toTransition:()=>{}};return k}jl.applyToOptions=e=>{const t=aN(e,100,jl);return e.ease=t.ease,e.duration=_r(t.duration),e.type="keyframes",e};function Ad({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},p=E=>l!==void 0&&E<l||c!==void 0&&E>c,m=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let v=r*t;const b=h+v,x=o===void 0?b:o(b);x!==b&&(v=x-h);const y=E=>-v*Math.exp(-E/n),g=E=>x+y(E),k=E=>{const I=y(E),D=g(E);f.done=Math.abs(I)<=u,f.value=f.done?x:D};let N,j;const T=E=>{p(f.value)&&(N=E,j=jl({keyframes:[f.value,m(f.value)],velocity:xb(g,E,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return T(0),{calculatedDuration:null,next:E=>{let I=!1;return!j&&N===void 0&&(I=!0,k(E),T(E)),N!==void 0&&E>=N?j.next(E-N):(!I&&k(E),f)}}}function pN(e,t,r){const n=[],s=r||Wr.mix||mb,i=e.length-1;for(let o=0;o<i;o++){let l=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Qt:t;l=Ba(c,l)}n.push(l)}return n}function mN(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(Sf(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=pN(t,n,s),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=Ta(e[h],e[h+1],d);return l[h](f)};return r?d=>u(Hr(e[0],e[i-1],d)):u}function gN(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Ta(0,t,n);e.push(Ae(r,1,s))}}function xN(e){const t=[0];return gN(t,e.length-1),t}function yN(e,t){return e.map(r=>r*t)}function vN(e,t){return e.map(()=>t||ib).splice(0,e.length-1)}function Zi({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=PS(n)?n.map(qm):qm(n),i={done:!1,value:t[0]},o=yN(r&&r.length===t.length?r:xN(t),e),l=mN(o,t,{ease:Array.isArray(s)?s:vN(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const bN=e=>e!==null;function Lf(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(bN),l=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const wN={decay:Ad,inertia:Ad,tween:Zi,keyframes:Zi,spring:jl};function yb(e){typeof e.type=="string"&&(e.type=wN[e.type])}class Of{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const kN=e=>e/100;class Mf extends Of{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:r}=this.options;r&&r.updatedAt!==_t.now()&&this.tick(_t.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;yb(t);const{type:r=Zi,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=r||Zi;c!==Zi&&typeof l[0]!="number"&&(this.mixKeyframes=Ba(kN,mb(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Df(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:m,onUpdate:v,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let g=this.currentTime,k=n;if(h){const E=Math.min(this.currentTime,s)/l;let I=Math.floor(E),D=E%1;!D&&E>=1&&(D=1),D===1&&I--,I=Math.min(I,h+1),!!(I%2)&&(f==="reverse"?(D=1-D,p&&(D-=p/l)):f==="mirror"&&(k=o)),g=Hr(0,1,D)*l}const N=y?{done:!1,value:d[0]}:k.next(g);i&&(N.value=i(N.value));let{done:j}=N;!y&&c!==null&&(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return T&&m!==Ad&&(N.value=Lf(d,this.options,b,this.speed)),v&&v(N.value),T&&this.finish(),N}then(t,r){return this.finished.then(t,r)}get duration(){return Xt(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Xt(t)}get time(){return Xt(this.currentTime)}set time(t){var r;t=_r(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(_t.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Xt(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=iN,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_t.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function jN(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Kn=e=>e*180/Math.PI,Id=e=>{const t=Kn(Math.atan2(e[1],e[0]));return Rd(t)},SN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Id,rotateZ:Id,skewX:e=>Kn(Math.atan(e[1])),skewY:e=>Kn(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Rd=e=>(e=e%360,e<0&&(e+=360),e),Qm=Id,Zm=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),e0=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),NN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Zm,scaleY:e0,scale:e=>(Zm(e)+e0(e))/2,rotateX:e=>Rd(Kn(Math.atan2(e[6],e[5]))),rotateY:e=>Rd(Kn(Math.atan2(-e[2],e[0]))),rotateZ:Qm,rotate:Qm,skewX:e=>Kn(Math.atan(e[4])),skewY:e=>Kn(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Dd(e){return e.includes("scale")?1:0}function Ld(e,t){if(!e||e==="none")return Dd(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=NN,s=r;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=SN,s=l}if(!s)return Dd(t);const i=n[t],o=s[1].split(",").map(CN);return typeof i=="function"?i(o):o[i]}const _N=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Ld(r,t)};function CN(e){return parseFloat(e.trim())}const pi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mi=new Set(pi),t0=e=>e===fi||e===Q,EN=new Set(["x","y","z"]),TN=pi.filter(e=>!EN.has(e));function PN(e){const t=[];return TN.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Yn={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ld(t,"x"),y:(e,{transform:t})=>Ld(t,"y")};Yn.translateX=Yn.x;Yn.translateY=Yn.y;const Qn=new Set;let Od=!1,Md=!1,$d=!1;function vb(){if(Md){const e=Array.from(Qn).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=PN(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var l;(l=n.getValue(i))==null||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Md=!1,Od=!1,Qn.forEach(e=>e.complete($d)),Qn.clear()}function bb(){Qn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Md=!0)})}function AN(){$d=!0,bb(),vb(),$d=!1}class $f{constructor(t,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Qn.add(this),Od||(Od=!0,Ee.read(bb),Ee.resolveKeyframes(vb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const l=n.readValue(r,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}jN(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Qn.delete(this)}cancel(){this.state==="scheduled"&&(Qn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const IN=e=>e.startsWith("--");function RN(e,t,r){IN(t)?e.style.setProperty(t,r):e.style[t]=r}const DN=Nf(()=>window.ScrollTimeline!==void 0),LN={};function ON(e,t){const r=Nf(e);return()=>LN[t]??r()}const wb=ON(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ui=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,r0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ui([0,.65,.55,1]),circOut:Ui([.55,0,1,.45]),backIn:Ui([.31,.01,.66,-.59]),backOut:Ui([.33,1.53,.69,.99])};function kb(e,t){if(e)return typeof e=="function"?wb()?gb(e,t):"ease-out":ab(e)?Ui(e):Array.isArray(e)?e.map(r=>kb(r,t)||r0.easeOut):r0[e]}function MN(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const h=kb(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(d,f)}function jb(e){return typeof e=="function"&&"applyToOptions"in e}function $N({type:e,...t}){return jb(e)&&wb()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class FN extends Of{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Sf(typeof t.type!="string");const u=$N(t);this.animation=MN(r,n,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=Lf(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):RN(r,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,n;const t=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return Xt(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Xt(t)}get time(){return Xt(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=_r(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&DN()?(this.animation.timeline=t,Qt):r(this)}}const Sb={anticipate:rb,backInOut:tb,circInOut:sb};function zN(e){return e in Sb}function UN(e){typeof e.ease=="string"&&zN(e.ease)&&(e.ease=Sb[e.ease])}const n0=10;class BN extends FN{constructor(t){UN(t),yb(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const l=new Mf({...o,autoplay:!1}),c=_r(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-n0).value,l.sample(c).value,n0),l.stop()}}const s0=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(jn.test(e)||e==="0")&&!e.startsWith("url("));function VN(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function HN(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=s0(s,t),l=s0(i,t);return!o||!l?!1:VN(e)||(r==="spring"||jb(r))&&n}function Fd(e){e.duration=0,e.type="keyframes"}const WN=new Set(["opacity","clipPath","filter","transform"]),qN=Nf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GN(e){var d;const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:i,type:o}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return qN()&&r&&WN.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&i!==0&&o!=="inertia"}const KN=40;class JN extends Of{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var m;super(),this.stop=()=>{var v,b;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=_t.now();const f={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||$f;this.keyframeResolver=new p(l,(v,b,x)=>this.onKeyframesResolved(v,b,f,!x),c,u,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=_t.now(),HN(t,i,o,l)||((Wr.instantAnimations||!c)&&(d==null||d(Lf(t,n,r))),t[0]=t[t.length-1],Fd(n),n.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>KN?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},p=!u&&GN(f)?new BN({...f,element:f.motionValue.owner.current}):new Mf(f);p.finished.then(()=>this.notifyFinished()).catch(Qt),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),AN()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const XN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function YN(e){const t=XN.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function Nb(e,t,r=1){const[n,s]=YN(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return Gv(o)?parseFloat(o):o}return Pf(s)?Nb(s,t,r+1):s}function Ff(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const _b=new Set(["width","height","top","left","right","bottom",...pi]),QN={test:e=>e==="auto",parse:e=>e},Cb=e=>t=>t.test(e),Eb=[fi,Q,Cr,Qr,VS,BS,QN],i0=e=>Eb.find(Cb(e));function ZN(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Jv(e):!0}const e_=new Set(["brightness","contrast","saturate","opacity"]);function t_(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Af)||[];if(!n)return e;const s=r.replace(n,"");let i=e_.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const r_=/\b([a-z-]*)\(.*?\)/gu,zd={...jn,getAnimatableNone:e=>{const t=e.match(r_);return t?t.map(t_).join(" "):e}},a0={...fi,transform:Math.round},n_={rotate:Qr,rotateX:Qr,rotateY:Qr,rotateZ:Qr,scale:vo,scaleX:vo,scaleY:vo,scaleZ:vo,skew:Qr,skewX:Qr,skewY:Qr,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:Pa,originX:Gm,originY:Gm,originZ:Q},zf={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,backgroundPositionX:Q,backgroundPositionY:Q,...n_,zIndex:a0,fillOpacity:Pa,strokeOpacity:Pa,numOctaves:a0},s_={...zf,color:Be,backgroundColor:Be,outlineColor:Be,fill:Be,stroke:Be,borderColor:Be,borderTopColor:Be,borderRightColor:Be,borderBottomColor:Be,borderLeftColor:Be,filter:zd,WebkitFilter:zd},Tb=e=>s_[e];function Pb(e,t){let r=Tb(e);return r!==zd&&(r=jn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const i_=new Set(["auto","none","0"]);function a_(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!i_.has(i)&&Aa(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=Pb(r,s)}class o_ extends $f{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Pf(u))){const d=Nb(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!_b.has(n)||t.length!==2)return;const[s,i]=t,o=i0(s),l=i0(i);if(o!==l)if(t0(o)&&t0(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Yn[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||ZN(t[s]))&&n.push(s);n.length&&a_(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yn[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=Yn[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function l_(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=(r==null?void 0:r[e])??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Ab=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Ib(e){return Kv(e)&&"offsetHeight"in e}const o0=30,c_=e=>!isNaN(parseFloat(e));class u_{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const s=_t.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=_t.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=c_(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new _f);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ee.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=_t.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>o0)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,o0);return Xv(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ni(e,t){return new u_(e,t)}const{schedule:Uf}=ob(queueMicrotask,!1),ir={x:!1,y:!1};function Rb(){return ir.x||ir.y}function d_(e){return e==="x"||e==="y"?ir[e]?null:(ir[e]=!0,()=>{ir[e]=!1}):ir.x||ir.y?null:(ir.x=ir.y=!0,()=>{ir.x=ir.y=!1})}function Db(e,t){const r=l_(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function l0(e){return!(e.pointerType==="touch"||Rb())}function h_(e,t,r={}){const[n,s,i]=Db(e,r),o=l=>{if(!l0(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{l0(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const Lb=(e,t)=>t?e===t?!0:Lb(e,t.parentElement):!1,Bf=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,f_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function p_(e){return f_.has(e.tagName)||e.tabIndex!==-1}const Vo=new WeakSet;function c0(e){return t=>{t.key==="Enter"&&e(t)}}function Kc(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const m_=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=c0(()=>{if(Vo.has(r))return;Kc(r,"down");const s=c0(()=>{Kc(r,"up")}),i=()=>Kc(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function u0(e){return Bf(e)&&!Rb()}function g_(e,t,r={}){const[n,s,i]=Db(e,r),o=l=>{const c=l.currentTarget;if(!u0(l))return;Vo.add(c);const u=t(c,l),d=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Vo.has(c)&&Vo.delete(c),u0(p)&&typeof u=="function"&&u(p,{success:m})},h=p=>{d(p,c===window||c===document||r.useGlobalTarget||Lb(c,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),Ib(l)&&(l.addEventListener("focus",u=>m_(u,s)),!p_(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Ob(e){return Kv(e)&&"ownerSVGElement"in e}function x_(e){return Ob(e)&&e.tagName==="svg"}const lt=e=>!!(e&&e.getVelocity),y_=[...Eb,Be,jn],v_=e=>y_.find(Cb(e)),Vf=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function d0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function b_(...e){return t=>{let r=!1;const n=e.map(s=>{const i=d0(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():d0(e[s],null)}}}}function w_(...e){return w.useCallback(b_(...e),e)}class k_ extends w.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=Ib(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function j_({children:e,isPresent:t,anchorX:r,root:n}){const s=w.useId(),i=w.useRef(null),o=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=w.useContext(Vf),c=w_(i,e==null?void 0:e.ref);return w.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:p}=o.current;if(t||!i.current||!u||!d)return;const m=r==="left"?`left: ${f}`:`right: ${p}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");l&&(v.nonce=l);const b=n??document.head;return b.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${m}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(v)&&b.removeChild(v)}},[t]),a.jsx(k_,{isPresent:t,childRef:i,sizeRef:o,children:w.cloneElement(e,{ref:c})})}const S_=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const u=bf(N_),d=w.useId();let h=!0,f=w.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:p=>{u.set(p,!0);for(const m of u.values())if(!m)return;n&&n()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[r,u,n]);return i&&h&&(f={...f}),w.useMemo(()=>{u.forEach((p,m)=>u.set(m,!1))},[r]),w.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(e=a.jsx(j_,{isPresent:r,anchorX:l,root:c,children:e})),a.jsx(Yl.Provider,{value:f,children:e})};function N_(){return new Map}function Mb(e=!0){const t=w.useContext(Yl);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=w.useId();w.useEffect(()=>{if(e)return s(i)},[e]);const o=w.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const bo=e=>e.key||"";function h0(e){const t=[];return w.Children.forEach(e,r=>{w.isValidElement(r)&&t.push(r)}),t}const xr=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=Mb(o),h=w.useMemo(()=>h0(e),[e]),f=o&&!u?[]:h.map(bo),p=w.useRef(!0),m=w.useRef(h),v=bf(()=>new Map),[b,x]=w.useState(h),[y,g]=w.useState(h);qv(()=>{p.current=!1,m.current=h;for(let j=0;j<y.length;j++){const T=bo(y[j]);f.includes(T)?v.delete(T):v.get(T)!==!0&&v.set(T,!1)}},[y,f.length,f.join("-")]);const k=[];if(h!==b){let j=[...h];for(let T=0;T<y.length;T++){const E=y[T],I=bo(E);f.includes(I)||(j.splice(T,0,E),k.push(E))}return i==="wait"&&k.length&&(j=k),g(h0(j)),x(h),null}const{forceRender:N}=w.useContext(vf);return a.jsx(a.Fragment,{children:y.map(j=>{const T=bo(j),E=o&&!u?!1:h===y||f.includes(T),I=()=>{if(v.has(T))v.set(T,!0);else return;let D=!0;v.forEach(z=>{z||(D=!1)}),D&&(N==null||N(),g(m.current),o&&(d==null||d()),n&&n())};return a.jsx(S_,{isPresent:E,initial:!p.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:E?void 0:I,anchorX:l,children:j},T)})})},$b=w.createContext({strict:!1}),f0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},si={};for(const e in f0)si[e]={isEnabled:t=>f0[e].some(r=>!!t[r])};function __(e){for(const t in e)si[t]={...si[t],...e[t]}}const C_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||C_.has(e)}let Fb=e=>!Sl(e);function E_(e){typeof e=="function"&&(Fb=t=>t.startsWith("on")?!Sl(t):e(t))}try{E_(require("@emotion/is-prop-valid").default)}catch{}function T_(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(Fb(s)||r===!0&&Sl(s)||!t&&!Sl(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const Ql=w.createContext({});function Zl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ia(e){return typeof e=="string"||Array.isArray(e)}const Hf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wf=["initial",...Hf];function ec(e){return Zl(e.animate)||Wf.some(t=>Ia(e[t]))}function zb(e){return!!(ec(e)||e.variants)}function P_(e,t){if(ec(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Ia(r)?r:void 0,animate:Ia(n)?n:void 0}}return e.inherit!==!1?t:{}}function A_(e){const{initial:t,animate:r}=P_(e,w.useContext(Ql));return w.useMemo(()=>({initial:t,animate:r}),[p0(t),p0(r)])}function p0(e){return Array.isArray(e)?e.join(" "):e}const Ra={};function I_(e){for(const t in e)Ra[t]=e[t],Tf(t)&&(Ra[t].isCSSVariable=!0)}function Ub(e,{layout:t,layoutId:r}){return mi.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Ra[e]||e==="opacity")}const R_={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},D_=pi.length;function L_(e,t,r){let n="",s=!0;for(let i=0;i<D_;i++){const o=pi[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=Ab(l,zf[o]);if(!c){s=!1;const d=R_[o]||o;n+=`${d}(${u}) `}r&&(t[o]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function qf(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(mi.has(c)){o=!0;continue}else if(Tf(c)){s[c]=u;continue}else{const d=Ab(u,zf[c]);c.startsWith("origin")?(l=!0,i[c]=d):n[c]=d}}if(t.transform||(o||r?n.transform=L_(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;n.transformOrigin=`${c} ${u} ${d}`}}const Gf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Bb(e,t,r){for(const n in t)!lt(t[n])&&!Ub(n,r)&&(e[n]=t[n])}function O_({transformTemplate:e},t){return w.useMemo(()=>{const r=Gf();return qf(r,t,e),Object.assign({},r.vars,r.style)},[t])}function M_(e,t){const r=e.style||{},n={};return Bb(n,r,e),Object.assign(n,O_(e,t)),n}function $_(e,t){const r={},n=M_(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const F_={offset:"stroke-dashoffset",array:"stroke-dasharray"},z_={offset:"strokeDashoffset",array:"strokeDasharray"};function U_(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?F_:z_;e[i.offset]=Q.transform(-n);const o=Q.transform(t),l=Q.transform(r);e[i.array]=`${o} ${l}`}function Vb(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...l},c,u,d){if(qf(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&U_(h,s,i,o,!1)}const Hb=()=>({...Gf(),attrs:{}}),Wb=e=>typeof e=="string"&&e.toLowerCase()==="svg";function B_(e,t,r,n){const s=w.useMemo(()=>{const i=Hb();return Vb(i,t,Wb(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Bb(i,e.style,e),s.style={...i,...s.style}}return s}const V_=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kf(e){return typeof e!="string"||e.includes("-")?!1:!!(V_.indexOf(e)>-1||/[A-Z]/u.test(e))}function H_(e,t,r,{latestValues:n},s,i=!1){const l=(Kf(e)?B_:$_)(t,n,s,e),c=T_(t,typeof e=="string",i),u=e!==w.Fragment?{...c,...l,ref:r}:{},{children:d}=t,h=w.useMemo(()=>lt(d)?d.get():d,[d]);return w.createElement(e,{...u,children:h})}function m0(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function Jf(e,t,r,n){if(typeof t=="function"){const[s,i]=m0(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=m0(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function Ho(e){return lt(e)?e.get():e}function W_({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:q_(r,n,s,e),renderState:t()}}function q_(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=Ho(i[f]);let{initial:o,animate:l}=e;const c=ec(e),u=zb(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!Zl(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=Jf(e,f[p]);if(m){const{transitionEnd:v,transition:b,...x}=m;for(const y in x){let g=x[y];if(Array.isArray(g)){const k=d?g.length-1:0;g=g[k]}g!==null&&(s[y]=g)}for(const y in v)s[y]=v[y]}}}return s}const qb=e=>(t,r)=>{const n=w.useContext(Ql),s=w.useContext(Yl),i=()=>W_(e,t,n,s);return r?i():bf(i)};function Xf(e,t,r){var i;const{style:n}=e,s={};for(const o in n)(lt(n[o])||t.style&&lt(t.style[o])||Ub(o,e)||((i=r==null?void 0:r.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=n[o]);return s}const G_=qb({scrapeMotionValuesFromProps:Xf,createRenderState:Gf});function Gb(e,t,r){const n=Xf(e,t,r);for(const s in e)if(lt(e[s])||lt(t[s])){const i=pi.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const K_=qb({scrapeMotionValuesFromProps:Gb,createRenderState:Hb}),J_=Symbol.for("motionComponentSymbol");function Os(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function X_(e,t,r){return w.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Os(r)&&(r.current=n))},[t])}const Yf=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Y_="framerAppearId",Kb="data-"+Yf(Y_),Jb=w.createContext({});function Q_(e,t,r,n,s){var v,b;const{visualElement:i}=w.useContext(Ql),o=w.useContext($b),l=w.useContext(Yl),c=w.useContext(Vf).reducedMotion,u=w.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:i,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=w.useContext(Jb);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&Z_(u.current,r,s,h);const f=w.useRef(!1);w.useInsertionEffect(()=>{d&&f.current&&d.update(r,l)});const p=r[Kb],m=w.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,p)));return qv(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),w.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,p)}),m.current=!1),d.enteringChildren=void 0)}),d}function Z_(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Xb(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&Os(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function Xb(e){if(e)return e.options.allowProjection!==!1?e.projection:Xb(e.parent)}function Jc(e,{forwardMotionProps:t=!1}={},r,n){r&&__(r);const s=Kf(e)?K_:G_;function i(l,c){let u;const d={...w.useContext(Vf),...l,layoutId:eC(l)},{isStatic:h}=d,f=A_(l),p=s(l,h);if(!h&&wf){tC();const m=rC(d);u=m.MeasureLayout,f.visualElement=Q_(e,p,d,n,m.ProjectionNode)}return a.jsxs(Ql.Provider,{value:f,children:[u&&f.visualElement?a.jsx(u,{visualElement:f.visualElement,...d}):null,H_(e,l,X_(p,f.visualElement,c),p,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=w.forwardRef(i);return o[J_]=e,o}function eC({layoutId:e}){const t=w.useContext(vf).id;return t&&e!==void 0?t+"-"+e:e}function tC(e,t){w.useContext($b).strict}function rC(e){const{drag:t,layout:r}=si;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function nC(e,t){if(typeof Proxy>"u")return Jc;const r=new Map,n=(i,o)=>Jc(i,o,e,t),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,Jc(o,void 0,e,t)),r.get(o))})}function Yb({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function sC({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function iC(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Xc(e){return e===void 0||e===1}function Ud({scale:e,scaleX:t,scaleY:r}){return!Xc(e)||!Xc(t)||!Xc(r)}function zn(e){return Ud(e)||Qb(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Qb(e){return g0(e.x)||g0(e.y)}function g0(e){return e&&e!=="0%"}function Nl(e,t,r){const n=e-r,s=t*n;return r+s}function x0(e,t,r,n,s){return s!==void 0&&(e=Nl(e,s,n)),Nl(e,r,n)+t}function Bd(e,t=0,r=1,n,s){e.min=x0(e.min,t,r,n,s),e.max=x0(e.max,t,r,n,s)}function Zb(e,{x:t,y:r}){Bd(e.x,t.translate,t.scale,t.originPoint),Bd(e.y,r.translate,r.scale,r.originPoint)}const y0=.999999999999,v0=1.0000000000001;function aC(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&$s(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Zb(e,o)),n&&zn(i.latestValues)&&$s(e,i.latestValues))}t.x<v0&&t.x>y0&&(t.x=1),t.y<v0&&t.y>y0&&(t.y=1)}function Ms(e,t){e.min=e.min+t,e.max=e.max+t}function b0(e,t,r,n,s=.5){const i=Ae(e.min,e.max,s);Bd(e,t,r,i,n)}function $s(e,t){b0(e.x,t.x,t.scaleX,t.scale,t.originX),b0(e.y,t.y,t.scaleY,t.scale,t.originY)}function ew(e,t){return Yb(iC(e.getBoundingClientRect(),t))}function oC(e,t,r){const n=ew(e,r),{scroll:s}=t;return s&&(Ms(n.x,s.offset.x),Ms(n.y,s.offset.y)),n}const w0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fs=()=>({x:w0(),y:w0()}),k0=()=>({min:0,max:0}),$e=()=>({x:k0(),y:k0()}),Vd={current:null},tw={current:!1};function lC(){if(tw.current=!0,!!wf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Vd.current=e.matches;e.addEventListener("change",t),t()}else Vd.current=!1}const cC=new WeakMap;function uC(e,t,r){for(const n in t){const s=t[n],i=r[n];if(lt(s))e.addValue(n,s);else if(lt(i))e.addValue(n,ni(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,ni(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const j0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dC{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$f,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=_t.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ee.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=ec(r),this.isVariantNode=zb(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&lt(p)&&p.set(c[f])}}mount(t){var r;this.current=t,cC.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),tw.current||lC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Vd.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),kn(this.notifyUpdate),kn(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=mi.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ee.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in si){const r=si[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$e()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<j0.length;n++){const s=j0[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=uC(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=ni(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(Gv(n)||Jv(n))?n=parseFloat(n):!v_(n)&&jn.test(r)&&(n=Pb(t,r)),this.setBaseTarget(t,lt(n)?n.get():n)),lt(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var i;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=Jf(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);o&&(n=o[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!lt(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new _f),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Uf.render(this.render)}}class rw extends dC{constructor(){super(...arguments),this.KeyframeResolver=o_}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;lt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function nw(e,{style:t,vars:r},n,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function hC(e){return window.getComputedStyle(e)}class fC extends rw{constructor(){super(...arguments),this.type="html",this.renderInstance=nw}readValueFromInstance(t,r){var n;if(mi.has(r))return(n=this.projection)!=null&&n.isProjecting?Dd(r):_N(t,r);{const s=hC(t),i=(Tf(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return ew(t,r)}build(t,r,n){qf(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return Xf(t,r,n)}}const sw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pC(e,t,r,n){nw(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(sw.has(s)?s:Yf(s),t.attrs[s])}class mC extends rw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$e}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(mi.has(r)){const n=Tb(r);return n&&n.default||0}return r=sw.has(r)?r:Yf(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return Gb(t,r,n)}build(t,r,n){Vb(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){pC(t,r,n,s)}mount(t){this.isSVGTag=Wb(t.tagName),super.mount(t)}}const gC=(e,t)=>Kf(e)?new mC(t):new fC(t,{allowProjection:e!==w.Fragment});function qs(e,t,r){const n=e.getProps();return Jf(n,t,r!==void 0?r:n.custom,e)}const Hd=e=>Array.isArray(e);function xC(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ni(r))}function yC(e){return Hd(e)?e[e.length-1]||0:e}function vC(e,t){const r=qs(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const l=yC(i[o]);xC(e,o,l)}}function bC(e){return!!(lt(e)&&e.add)}function Wd(e,t){const r=e.getValue("willChange");if(bC(r))return r.add(t);if(!r&&Wr.WillChange){const n=new Wr.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function iw(e){return e.props[Kb]}const wC=e=>e!==null;function kC(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(wC),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const jC={type:"spring",stiffness:500,damping:25,restSpeed:10},SC=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),NC={type:"keyframes",duration:.8},_C={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CC=(e,{keyframes:t})=>t.length>2?NC:mi.has(e)?e.startsWith("scale")?SC(t[1]):jC:_C;function EC({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Qf=(e,t,r,n={},s,i)=>o=>{const l=Ff(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-_r(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};EC(l)||Object.assign(d,CC(e,d)),d.duration&&(d.duration=_r(d.duration)),d.repeatDelay&&(d.repeatDelay=_r(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Fd(d),d.delay===0&&(h=!0)),(Wr.instantAnimations||Wr.skipAnimations)&&(h=!0,Fd(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const f=kC(d.keyframes,l);if(f!==void 0){Ee.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new Mf(d):new JN(d)};function TC({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function aw(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(i=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),f=l[d];if(f===void 0||u&&TC(u,d))continue;const p={delay:r,...Ff(i||{},d)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===m&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const x=iw(e);if(x){const y=window.MotionHandoffAnimation(x,d,Ee);y!==null&&(p.startTime=y,v=!0)}}Wd(e,d),h.start(Qf(d,h,f,e.shouldReduceMotion&&_b.has(d)?{type:!1}:p,e,v));const b=h.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{Ee.update(()=>{o&&vC(e,o)})}),c}function ow(e,t,r,n=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),o=e.size,l=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:l-i*n}function qd(e,t,r={}){var c;const n=qs(e,t,r.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(aw(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return PC(e,t,u,d,h,f,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(r.delay)])}function PC(e,t,r=0,n=0,s=0,i=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(qd(c,t,{...o,delay:r+(typeof n=="function"?0:n)+ow(e.variantChildren,c,n,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function AC(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>qd(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=qd(e,t,r);else{const s=typeof t=="function"?qs(e,t,r.custom):t;n=Promise.all(aw(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function lw(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const IC=Wf.length;function cw(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?cw(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<IC;r++){const n=Wf[r],s=e.props[n];(Ia(s)||s===!1)&&(t[n]=s)}return t}const RC=[...Hf].reverse(),DC=Hf.length;function LC(e){return t=>Promise.all(t.map(({animation:r,options:n})=>AC(e,r,n)))}function OC(e){let t=LC(e),r=S0(),n=!0;const s=c=>(u,d)=>{var f;const h=qs(e,d,c==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:m,...v}=h;u={...u,...v,...m}}return u};function i(c){t=c(e)}function o(c){const{props:u}=e,d=cw(e.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let b=0;b<DC;b++){const x=RC[b],y=r[x],g=u[x]!==void 0?u[x]:d[x],k=Ia(g),N=x===c?y.isActive:null;N===!1&&(m=b);let j=g===d[x]&&g!==u[x]&&k;if(j&&n&&e.manuallyAnimateOnMount&&(j=!1),y.protectedKeys={...p},!y.isActive&&N===null||!g&&!y.prevProp||Zl(g)||typeof g=="boolean")continue;const T=MC(y.prevProp,g);let E=T||x===c&&y.isActive&&!j&&k||b>m&&k,I=!1;const D=Array.isArray(g)?g:[g];let z=D.reduce(s(x),{});N===!1&&(z={});const{prevResolvedValues:A={}}=y,_={...A,...z},M=$=>{E=!0,f.has($)&&(I=!0,f.delete($)),y.needsAnimating[$]=!0;const R=e.getValue($);R&&(R.liveStyle=!1)};for(const $ in _){const R=z[$],F=A[$];if(p.hasOwnProperty($))continue;let S=!1;Hd(R)&&Hd(F)?S=!lw(R,F):S=R!==F,S?R!=null?M($):f.add($):R!==void 0&&f.has($)?M($):y.protectedKeys[$]=!0}y.prevProp=g,y.prevResolvedValues=z,y.isActive&&(p={...p,...z}),n&&e.blockInitialAnimation&&(E=!1);const P=j&&T;E&&(!P||I)&&h.push(...D.map($=>{const R={type:x};if(typeof $=="string"&&n&&!P&&e.manuallyAnimateOnMount&&e.parent){const{parent:F}=e,S=qs(F,$);if(F.enteringChildren&&S){const{delayChildren:U}=S.transition||{};R.delay=ow(F.enteringChildren,e,U)}}return{animation:$,options:R}}))}if(f.size){const b={};if(typeof u.initial!="boolean"){const x=qs(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(b.transition=x.transition)}f.forEach(x=>{const y=e.getBaseTarget(x),g=e.getValue(x);g&&(g.liveStyle=!0),b[x]=y??null}),h.push({animation:b})}let v=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),n=!1,v?t(h):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,u)}),r[c].isActive=u;const d=o(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=S0(),n=!0}}}function MC(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!lw(t,e):!1}function Dn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function S0(){return{animate:Dn(!0),whileInView:Dn(),whileHover:Dn(),whileTap:Dn(),whileDrag:Dn(),whileFocus:Dn(),exit:Dn()}}class En{constructor(t){this.isMounted=!1,this.node=t}update(){}}class $C extends En{constructor(t){super(t),t.animationState||(t.animationState=OC(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Zl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let FC=0;class zC extends En{constructor(){super(...arguments),this.id=FC++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const UC={animation:{Feature:$C},exit:{Feature:zC}};function Da(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Wa(e){return{point:{x:e.pageX,y:e.pageY}}}const BC=e=>t=>Bf(t)&&e(t,Wa(t));function ea(e,t,r,n){return Da(e,t,BC(r),n)}const uw=1e-4,VC=1-uw,HC=1+uw,dw=.01,WC=0-dw,qC=0+dw;function mt(e){return e.max-e.min}function GC(e,t,r){return Math.abs(e-t)<=r}function N0(e,t,r,n=.5){e.origin=n,e.originPoint=Ae(t.min,t.max,e.origin),e.scale=mt(r)/mt(t),e.translate=Ae(r.min,r.max,e.origin)-e.originPoint,(e.scale>=VC&&e.scale<=HC||isNaN(e.scale))&&(e.scale=1),(e.translate>=WC&&e.translate<=qC||isNaN(e.translate))&&(e.translate=0)}function ta(e,t,r,n){N0(e.x,t.x,r.x,n?n.originX:void 0),N0(e.y,t.y,r.y,n?n.originY:void 0)}function _0(e,t,r){e.min=r.min+t.min,e.max=e.min+mt(t)}function KC(e,t,r){_0(e.x,t.x,r.x),_0(e.y,t.y,r.y)}function C0(e,t,r){e.min=t.min-r.min,e.max=e.min+mt(t)}function ra(e,t,r){C0(e.x,t.x,r.x),C0(e.y,t.y,r.y)}function Wt(e){return[e("x"),e("y")]}const hw=({current:e})=>e?e.ownerDocument.defaultView:null,E0=(e,t)=>Math.abs(e-t);function JC(e,t){const r=E0(e.x,t.x),n=E0(e.y,t.y);return Math.sqrt(r**2+n**2)}class fw{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Qc(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=JC(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:v}=f,{timestamp:b}=rt;this.history.push({...v,timestamp:b});const{onStart:x,onMove:y}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Yc(p,this.transformPagePoint),Ee.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Qc(f.type==="pointercancel"?this.lastMoveEventInfo:Yc(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,x),v&&v(f,x)},!Bf(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const l=Wa(t),c=Yc(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=rt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(t,Qc(c,this.history)),this.removeListeners=Ba(ea(this.contextWindow,"pointermove",this.handlePointerMove),ea(this.contextWindow,"pointerup",this.handlePointerUp),ea(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),kn(this.updatePoint)}}function Yc(e,t){return t?{point:t(e.point)}:e}function T0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Qc({point:e},t){return{point:e,delta:T0(e,pw(t)),offset:T0(e,XC(t)),velocity:YC(t,.1)}}function XC(e){return e[0]}function pw(e){return e[e.length-1]}function YC(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=pw(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>_r(t)));)r--;if(!n)return{x:0,y:0};const i=Xt(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function QC(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ae(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ae(r,e,n.max):Math.min(e,r)),e}function P0(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function ZC(e,{top:t,left:r,bottom:n,right:s}){return{x:P0(e.x,r,s),y:P0(e.y,t,n)}}function A0(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function e4(e,t){return{x:A0(e.x,t.x),y:A0(e.y,t.y)}}function t4(e,t){let r=.5;const n=mt(e),s=mt(t);return s>n?r=Ta(t.min,t.max-n,e.min):n>s&&(r=Ta(e.min,e.max-s,t.min)),Hr(0,1,r)}function r4(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Gd=.35;function n4(e=Gd){return e===!1?e=0:e===!0&&(e=Gd),{x:I0(e,"left","right"),y:I0(e,"top","bottom")}}function I0(e,t,r){return{min:R0(e,t),max:R0(e,r)}}function R0(e,t){return typeof e=="number"?e:e[t]||0}const s4=new WeakMap;class i4{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$e(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Wa(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d_(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wt(x=>{let y=this.getAxisMotionValue(x).get()||0;if(Cr.test(y)){const{projection:g}=this.visualElement;if(g&&g.layout){const k=g.layout.layoutBox[x];k&&(y=mt(k)*(parseFloat(y)/100))}}this.originPoint[x]=y}),v&&Ee.postRender(()=>v(h,f)),Wd(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(m&&this.currentDirection===null){this.currentDirection=a4(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),b&&b(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Wt(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new fw(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:hw(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ee.postRender(()=>l(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!wo(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=QC(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Os(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=ZC(n.layoutBox,t):this.constraints=!1,this.elastic=n4(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Wt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=r4(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Os(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=oC(n,s.root,this.visualElement.getTransformPagePoint());let o=e4(s.layout.layoutBox,i);if(r){const l=r(sC(o));this.hasMutatedConstraints=!!l,l&&(o=Yb(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Wt(d=>{if(!wo(d,r,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Wd(this.visualElement,t),n.start(Qf(t,n,0,r,this.visualElement,!1))}stopAnimation(){Wt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Wt(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Wt(r=>{const{drag:n}=this.getProps();if(!wo(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r];i.set(t[r]-Ae(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Os(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Wt(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=t4({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Wt(o=>{if(!wo(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Ae(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;s4.set(this.visualElement,this);const t=this.visualElement.current,r=ea(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Os(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ee.read(n);const o=Da(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Wt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Gd,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function wo(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function a4(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class o4 extends En{constructor(t){super(t),this.removeGroupControls=Qt,this.removeListeners=Qt,this.controls=new i4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qt}unmount(){this.removeGroupControls(),this.removeListeners()}}const D0=e=>(t,r)=>{e&&Ee.postRender(()=>e(t,r))};class l4 extends En{constructor(){super(...arguments),this.removePointerDownListener=Qt}onPointerDown(t){this.session=new fw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:D0(t),onStart:D0(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Ee.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=ea(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function L0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ai={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Q.test(e))e=parseFloat(e);else return e;const r=L0(e,t.target.x),n=L0(e,t.target.y);return`${r}% ${n}%`}},c4={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=jn.parse(e);if(s.length>5)return n;const i=jn.createTransformer(e),o=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=Ae(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let Zc=!1;class u4 extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;I_(d4),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),Zc&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Wo.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,Zc=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Ee.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Uf.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;Zc=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function mw(e){const[t,r]=Mb(),n=w.useContext(vf);return a.jsx(u4,{...e,layoutGroup:n,switchLayoutGroup:w.useContext(Jb),isPresent:t,safeToRemove:r})}const d4={borderRadius:{...Ai,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ai,borderTopRightRadius:Ai,borderBottomLeftRadius:Ai,borderBottomRightRadius:Ai,boxShadow:c4};function h4(e,t,r){const n=lt(e)?e:ni(e);return n.start(Qf("",n,t,r)),n.animation}const f4=(e,t)=>e.depth-t.depth;class p4{constructor(){this.children=[],this.isDirty=!1}add(t){kf(this.children,t),this.isDirty=!0}remove(t){jf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(f4),this.isDirty=!1,this.children.forEach(t)}}function m4(e,t){const r=_t.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(kn(n),e(i-t))};return Ee.setup(n,!0),()=>kn(n)}const gw=["TopLeft","TopRight","BottomLeft","BottomRight"],g4=gw.length,O0=e=>typeof e=="string"?parseFloat(e):e,M0=e=>typeof e=="number"||Q.test(e);function x4(e,t,r,n,s,i){s?(e.opacity=Ae(0,r.opacity??1,y4(n)),e.opacityExit=Ae(t.opacity??1,0,v4(n))):i&&(e.opacity=Ae(t.opacity??1,r.opacity??1,n));for(let o=0;o<g4;o++){const l=`border${gw[o]}Radius`;let c=$0(t,l),u=$0(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||M0(c)===M0(u)?(e[l]=Math.max(Ae(O0(c),O0(u),n),0),(Cr.test(u)||Cr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Ae(t.rotate||0,r.rotate||0,n))}function $0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const y4=xw(0,.5,nb),v4=xw(.5,.95,Qt);function xw(e,t,r){return n=>n<e?0:n>t?1:r(Ta(e,t,n))}function F0(e,t){e.min=t.min,e.max=t.max}function Vt(e,t){F0(e.x,t.x),F0(e.y,t.y)}function z0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function U0(e,t,r,n,s){return e-=t,e=Nl(e,1/r,n),s!==void 0&&(e=Nl(e,1/s,n)),e}function b4(e,t=0,r=1,n=.5,s,i=e,o=e){if(Cr.test(t)&&(t=parseFloat(t),t=Ae(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ae(i.min,i.max,n);e===i&&(l-=t),e.min=U0(e.min,t,r,l,s),e.max=U0(e.max,t,r,l,s)}function B0(e,t,[r,n,s],i,o){b4(e,t[r],t[n],t[s],t.scale,i,o)}const w4=["x","scaleX","originX"],k4=["y","scaleY","originY"];function V0(e,t,r,n){B0(e.x,t,w4,r?r.x:void 0,n?n.x:void 0),B0(e.y,t,k4,r?r.y:void 0,n?n.y:void 0)}function H0(e){return e.translate===0&&e.scale===1}function yw(e){return H0(e.x)&&H0(e.y)}function W0(e,t){return e.min===t.min&&e.max===t.max}function j4(e,t){return W0(e.x,t.x)&&W0(e.y,t.y)}function q0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function vw(e,t){return q0(e.x,t.x)&&q0(e.y,t.y)}function G0(e){return mt(e.x)/mt(e.y)}function K0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class S4{constructor(){this.members=[]}add(t){kf(this.members,t),t.scheduleRender()}remove(t){if(jf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function N4(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:m}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),m&&(n+=`skewY(${m}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const eu=["","X","Y","Z"],_4=1e3;let C4=0;function tu(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function bw(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=iw(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Ee,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&bw(n)}function ww({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=C4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(P4),this.nodes.forEach(D4),this.nodes.forEach(L4),this.nodes.forEach(A4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new p4)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new _f),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Ob(o)&&!x_(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Ee.read(()=>{h=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=m4(f,250),Wo.hasAnimatedSinceResize&&(Wo.hasAnimatedSinceResize=!1,this.nodes.forEach(Y0)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||z4,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=u.getProps(),x=!this.targetLayout||!vw(this.targetLayout,p),y=!h&&f;if(this.options.layoutRoot||this.resumeFrom||y||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={...Ff(m,"layout"),onPlay:v,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(d,y)}else h||Y0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),kn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(O4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(J0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(X0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(R4),this.nodes.forEach(E4),this.nodes.forEach(T4)):this.nodes.forEach(X0),this.clearAllSnapshots();const l=_t.now();rt.delta=Hr(0,1e3/60,l-rt.timestamp),rt.timestamp=l,rt.isProcessing=!0,Vc.update.process(rt),Vc.preRender.process(rt),Vc.render.process(rt),rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Uf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(I4),this.sharedNodes.forEach(M4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ee.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ee.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!mt(this.snapshot.measuredBox.x)&&!mt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!yw(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||zn(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),U4(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return $e();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(B4))){const{scroll:d}=this.root;d&&(Ms(l.x,d.offset.x),Ms(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=$e();if(Vt(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Vt(l,o),Ms(l.x,h.offset.x),Ms(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=$e();Vt(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&$s(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),zn(d.latestValues)&&$s(c,d.latestValues)}return zn(this.latestValues)&&$s(c,this.latestValues),c}removeTransform(o){const l=$e();Vt(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!zn(u.latestValues))continue;Ud(u.latestValues)&&u.updateSnapshot();const d=$e(),h=u.measurePageBox();Vt(d,h),V0(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return zn(this.latestValues)&&V0(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=rt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),ra(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Vt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$e(),this.targetWithTransforms=$e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),KC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vt(this.target,this.layout.layoutBox),Zb(this.target,this.targetDelta)):Vt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),ra(this.relativeTargetOrigin,this.target,p.target),Vt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ud(this.parent.latestValues)||Qb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===rt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Vt(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;aC(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=$e());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(z0(this.prevProjectionDelta.x,this.projectionDelta.x),z0(this.prevProjectionDelta.y,this.projectionDelta.y)),ta(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!K0(this.projectionDelta.x,this.prevProjectionDelta.x)||!K0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fs(),this.projectionDelta=Fs(),this.projectionDeltaWithTransform=Fs()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Fs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=$e(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,v=p!==m,b=this.getStack(),x=!b||b.members.length<=1,y=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(F4));this.animationProgress=0;let g;this.mixTargetDelta=k=>{const N=k/1e3;Q0(h.x,o.x,N),Q0(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ra(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$4(this.relativeTarget,this.relativeTargetOrigin,f,N),g&&j4(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=$e()),Vt(g,this.relativeTarget)),v&&(this.animationValues=d,x4(d,u,this.latestValues,N,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(kn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ee.update(()=>{Wo.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ni(0)),this.currentAnimation=h4(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&kw(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||$e();const h=mt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=mt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Vt(l,c),$s(l,d),ta(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new S4),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&tu("z",o,u,this.animationValues);for(let d=0;d<eu.length;d++)tu(`rotate${eu[d]}`,o,u,this.animationValues),tu(`skew${eu[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Ho(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Ho(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!zn(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=N4(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Ra){if(d[m]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:x}=Ra[m],y=h==="none"?d[m]:v(d[m],u);if(b){const g=b.length;for(let k=0;k<g;k++)o[b[k]]=y}else x?this.options.visualElement.renderState.vars[m]=y:o[m]=y}this.options.layoutId&&(o.pointerEvents=u===this?Ho(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(J0),this.root.sharedNodes.clear()}}}function E4(e){e.updateLayout()}function T4(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?Wt(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],p=mt(f);f.min=n[h].min,f.max=f.min+p}):kw(i,t.layoutBox,n)&&Wt(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],p=mt(n[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=Fs();ta(l,n,t.layoutBox);const c=Fs();o?ta(c,e.applyTransform(s,!0),t.measuredBox):ta(c,n,t.layoutBox);const u=!yw(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const m=$e();ra(m,t.layoutBox,f.layoutBox);const v=$e();ra(v,n,p.layoutBox),vw(m,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=m,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function P4(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function A4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function I4(e){e.clearSnapshot()}function J0(e){e.clearMeasurements()}function X0(e){e.isLayoutDirty=!1}function R4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Y0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function D4(e){e.resolveTargetDelta()}function L4(e){e.calcProjection()}function O4(e){e.resetSkewAndRotation()}function M4(e){e.removeLeadSnapshot()}function Q0(e,t,r){e.translate=Ae(t.translate,0,r),e.scale=Ae(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Z0(e,t,r,n){e.min=Ae(t.min,r.min,n),e.max=Ae(t.max,r.max,n)}function $4(e,t,r,n){Z0(e.x,t.x,r.x,n),Z0(e.y,t.y,r.y,n)}function F4(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const z4={duration:.45,ease:[.4,0,.1,1]},eg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),tg=eg("applewebkit/")&&!eg("chrome/")?Math.round:Qt;function rg(e){e.min=tg(e.min),e.max=tg(e.max)}function U4(e){rg(e.x),rg(e.y)}function kw(e,t,r){return e==="position"||e==="preserve-aspect"&&!GC(G0(t),G0(r),.2)}function B4(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const V4=ww({attachResizeListener:(e,t)=>Da(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ru={current:void 0},jw=ww({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ru.current){const e=new V4({});e.mount(window),e.setOptions({layoutScroll:!0}),ru.current=e}return ru.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),H4={pan:{Feature:l4},drag:{Feature:o4,ProjectionNode:jw,MeasureLayout:mw}};function ng(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Ee.postRender(()=>i(t,Wa(t)))}class W4 extends En{mount(){const{current:t}=this.node;t&&(this.unmount=h_(t,(r,n)=>(ng(this.node,n,"Start"),s=>ng(this.node,s,"End"))))}unmount(){}}class q4 extends En{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ba(Da(this.node.current,"focus",()=>this.onFocus()),Da(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sg(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Ee.postRender(()=>i(t,Wa(t)))}class G4 extends En{mount(){const{current:t}=this.node;t&&(this.unmount=g_(t,(r,n)=>(sg(this.node,n,"Start"),(s,{success:i})=>sg(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kd=new WeakMap,nu=new WeakMap,K4=e=>{const t=Kd.get(e.target);t&&t(e)},J4=e=>{e.forEach(K4)};function X4({root:e,...t}){const r=e||document;nu.has(r)||nu.set(r,{});const n=nu.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(J4,{root:e,...t})),n[s]}function Y4(e,t,r){const n=X4(t);return Kd.set(e,r),n.observe(e),()=>{Kd.delete(e),n.unobserve(e)}}const Q4={some:0,all:1};class Z4 extends En{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Q4[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return Y4(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(eE(t,r))&&this.startObserver()}unmount(){}}function eE({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const tE={inView:{Feature:Z4},tap:{Feature:G4},focus:{Feature:q4},hover:{Feature:W4}},rE={layout:{ProjectionNode:jw,MeasureLayout:mw}},nE={...UC,...tE,...H4,...rE},oe=nC(nE,gC);var sE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W=(e,t)=>{const r=w.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>w.createElement("svg",{ref:u,...sE,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${iE(e)}`,...c},[...t.map(([d,h])=>w.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},tc=W("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),zt=W("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),xt=W("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),aE=W("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Tn=W("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),rc=W("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),oE=W("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),lE=W("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),cE=W("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),uE=W("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Jd=W("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),dE=W("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Zf=W("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),fe=W("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),na=W("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),us=W("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Lt=W("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),pt=W("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),nc=W("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),hE=W("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),fE=W("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]),hr=W("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ep=W("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),qa=W("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),pE=W("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),tp=W("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),mE=W("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),gE=W("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),He=W("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),_l=W("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),rp=W("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),Sw=W("GitPullRequest",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]),xE=W("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),yE=W("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Xd=W("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),np=W("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),wr=W("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),su=W("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),vE=W("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Nw=W("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Or=W("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),bE=W("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),wE=W("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),kE=W("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),jE=W("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),ii=W("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Yd=W("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),SE=W("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),NE=W("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),_E=W("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),CE=W("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),sp=W("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),tr=W("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),EE=W("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),is=W("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),_w=W("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ig=W("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),TE=W("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),PE=W("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),AE=W("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ai=W("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Ga=W("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),ip=W("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),IE=W("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Zn=W("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),RE=W("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),sc=W("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),cn=W("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),as=W("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),DE=W("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Cw=W("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ew=W("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ap=W("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),qr=W("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),rr=W("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),os=W("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function LE({isCompact:e}){const r=Pr().pathname.split("/").filter(s=>s),n={"strategic-directives":"Strategic Directives",prds:"PRDs",handoffs:"Handoffs",context:"Context Monitor",progress:"Progress Tracker"};return a.jsxs("nav",{className:`flex items-center ${e?"py-1 px-2":"py-2 px-4"}`,children:[a.jsxs(bl,{to:"/",className:"flex items-center text-purple-100 hover:text-white transition-colors drop-shadow-sm",children:[a.jsx(np,{className:e?"w-3 h-3":"w-4 h-4"}),a.jsx("span",{className:`${e?"ml-1 text-xs":"ml-2 text-sm"}`,children:"Dashboard"})]}),r.map((s,i)=>{const o=`/${r.slice(0,i+1).join("/")}`,l=i===r.length-1,c=n[s]||s;return a.jsxs(jr.Fragment,{children:[a.jsx(pt,{className:`${e?"w-3 h-3 mx-1":"w-4 h-4 mx-2"} text-purple-200`}),l?a.jsx("span",{className:`${e?"text-xs":"text-sm"} font-medium text-white drop-shadow-sm`,children:c}):a.jsx(bl,{to:o,className:`${e?"text-xs":"text-sm"} text-purple-100 hover:text-white transition-colors drop-shadow-sm`,children:c})]},s)})]})}function op({onRefresh:e,isCompact:t=!1,isCollapsed:r=!1}){const[n,s]=w.useState("idle"),[i,o]=w.useState(""),[l,c]=w.useState(null),u=async()=>{console.log(" Manual Refresh: Starting database sync..."),s("refreshing"),o("Syncing with database...");try{const p=await fetch("/api/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"database"})});if(!p.ok)throw new Error("Database refresh failed");const m=await p.json();console.log(" Database refreshed:",m),e&&(console.log(" Triggering UI refresh..."),await e()),s("complete"),o(`Refreshed: ${m.sds||0} SDs, ${m.prds||0} PRDs`),c(new Date),setTimeout(()=>{s("idle"),o("")},3e3)}catch(p){console.error(" Refresh Error:",p),s("error"),o(`Failed: ${p.message}`),setTimeout(()=>{s("idle"),o("")},5e3)}},d=()=>{switch(n){case"refreshing":return a.jsx(qa,{className:"w-4 h-4 animate-spin"});case"complete":return a.jsx(fe,{className:"w-4 h-4 text-green-500"});case"error":return a.jsx(zt,{className:"w-4 h-4 text-red-500"});default:return a.jsx(tr,{className:"w-4 h-4"})}},h=()=>{switch(n){case"refreshing":return"bg-blue-500 hover:bg-blue-600";case"complete":return"bg-green-500 hover:bg-green-600";case"error":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-600 hover:bg-gray-700"}},f=n==="refreshing";return a.jsxs("div",{className:"relative flex items-center",children:[a.jsxs(oe.button,{onClick:u,disabled:f,className:`
          flex items-center ${r?"justify-center w-full":""} transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
          ${h()} text-white rounded hover:opacity-90
          ${r?"px-2 py-2":t?"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm":"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base"}
        `,whileHover:{scale:f?1:1.05},whileTap:{scale:f?1:.95},title:r?"Manual Refresh - Sync with database":"Manually sync with database (automatic real-time updates are active)",children:[d(),!r&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:`${t?"ml-1":"ml-1 sm:ml-2"} hidden xs:inline`,children:[n==="idle"&&"Manual Refresh",n==="refreshing"&&"Syncing...",n==="complete"&&"Synced!",n==="error"&&"Failed"]}),a.jsxs("span",{className:"xs:hidden ml-1",children:[n==="idle"&&"",n==="refreshing"&&"",n==="complete"&&"",n==="error"&&""]})]})]}),a.jsx(xr,{children:i&&!r&&a.jsx(oe.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`
              absolute left-full ml-4 top-1/2 transform -translate-y-1/2
              text-sm px-3 py-1 rounded-lg whitespace-nowrap z-50
              ${n==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":n==="complete"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}
              ${t?"text-xs px-2 py-0.5":""}
            `,children:i})}),a.jsx(xr,{children:r&&i&&a.jsxs(oe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`
              absolute left-full ml-2 top-1/2 transform -translate-y-1/2
              text-xs px-2 py-1 rounded-lg whitespace-nowrap z-50 pointer-events-none
              ${n==="error"?"bg-red-900 text-red-200":n==="complete"?"bg-green-900 text-green-200":"bg-blue-900 text-blue-200"}
            `,children:[n==="refreshing"&&"Syncing",n==="complete"&&"Done!",n==="error"&&"Error"]})}),l&&n==="idle"&&a.jsxs("div",{className:`absolute left-full ml-4 top-full mt-1 text-gray-500 dark:text-gray-400 whitespace-nowrap ${t?"text-xs":"text-sm"}`,children:["Last refresh: ",l.toLocaleTimeString()]}),a.jsx("div",{className:"absolute -top-1 -right-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-400 rounded-full animate-ping"})]})})]})}const OE=({className:e=""})=>{const t=()=>{const c=localStorage.getItem("theme");return c?c==="dark":!0},[r,n]=w.useState(t),[s,i]=w.useState(!1);w.useLayoutEffect(()=>{const c=document.documentElement;r?(c.classList.add("dark"),c.classList.remove("light"),localStorage.setItem("theme","dark")):(c.classList.remove("dark"),c.classList.add("light"),localStorage.setItem("theme","light"))},[r]),w.useEffect(()=>{const c=setTimeout(()=>{const u=document.documentElement,d=localStorage.getItem("theme");d!=="light"?(u.classList.add("dark"),u.classList.remove("light"),d||localStorage.setItem("theme","dark"),n(!0)):(u.classList.remove("dark"),u.classList.add("light"),n(!1))},10);return()=>clearTimeout(c)},[]);const o=c=>{const u=document.documentElement;c?(u.classList.add("dark"),u.classList.remove("light"),localStorage.setItem("theme","dark")):(u.classList.remove("dark"),u.classList.add("light"),localStorage.setItem("theme","light"))},l=()=>{if(s)return;i(!0);const c=!r;n(c),o(c),setTimeout(()=>i(!1),300)};return a.jsxs("button",{onClick:l,className:`
        relative flex items-center justify-center
        w-12 h-6 rounded-full transition-all duration-300 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${r?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-600"}
        ${s?"scale-95":"hover:scale-105"}
        ${e}
      `,title:r?"Switch to light mode":"Switch to dark mode","aria-label":r?"Switch to light mode":"Switch to dark mode",disabled:s,children:[a.jsx("div",{className:`
        absolute inset-0 rounded-full transition-all duration-300
        ${r?"bg-gradient-to-r from-blue-600 to-blue-500":"bg-gradient-to-r from-gray-300 to-gray-200"}
      `}),a.jsxs("div",{className:`
        relative w-5 h-5 rounded-full transition-all duration-300 ease-in-out transform
        bg-white dark:bg-gray-100 shadow-lg
        flex items-center justify-center
        ${r?"translate-x-3":"-translate-x-3"}
        ${s?"scale-90":""}
      `,children:[a.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${r?"opacity-100":"opacity-0"}
        `,children:a.jsx(jE,{className:"w-3 h-3 text-blue-600 dark:text-blue-500"})}),a.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${r?"opacity-0":"opacity-100"}
        `,children:a.jsx(IE,{className:"w-3 h-3 text-yellow-500"})})]}),a.jsx("div",{className:`
        absolute inset-0 rounded-full opacity-0 transition-opacity duration-300
        ${r?"bg-blue-400 group-hover:opacity-20":"bg-yellow-400 group-hover:opacity-20"}
        pointer-events-none
      `})]})};function ME(){const[e,t]=w.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return w.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(prefers-reduced-motion: reduce)"),n=s=>{t(s.matches)};if(r.addEventListener)return r.addEventListener("change",n),()=>r.removeEventListener("change",n);if(r.addListener)return r.addListener(n),()=>r.removeListener(n)},[]),e}const $E={normal:200},Tw={easeOut:[0,0,.2,1],spring:{type:"spring",stiffness:300,damping:30}},FE={slideUp:{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:$E.normal/1e3,ease:Tw.easeOut}}},zE={container:{animate:{transition:{staggerChildren:.05,delayChildren:.1}}}},ag=Tw.spring,UE=FE.slideUp,BE=zE.container;function VE({state:e,isConnected:t,isSidebarCollapsed:r,setIsSidebarCollapsed:n,isCompactMode:s,setIsCompactMode:i,isMobileMenuOpen:o,setIsMobileMenuOpen:l,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h,setActiveSD:f}){var N;const p=ME(),m=Pr(),v=[{path:"/",icon:np,label:"Strategic Directives",tooltip:"Home"},{path:"/backlog",icon:ii,label:"Backlog",tooltip:"Backlog"},{path:"/uat-tests",icon:hE,label:"UAT Tests",tooltip:"UAT"}],b={expanded:{width:"16rem",transition:p?{duration:0}:ag},collapsed:{width:"4rem",transition:p?{duration:0}:ag}},x={rest:{scale:1,transition:{duration:.2}},hover:{scale:p?1:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:p?1:.98}},y={hidden:{opacity:0,x:-10,transition:{duration:.1}},visible:{opacity:1,x:0,transition:{duration:.2,delay:.5}}},g=m.pathname==="/directive-lab",k=s?"p-2 pt-16 md:pt-2":g?"p-0":"p-6 pt-20 md:pt-6";return a.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 relative",children:[a.jsx(oe.button,{onClick:()=>l(!o),className:"mobile-menu-button fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg md:hidden",whileHover:{scale:p?1:1.05},whileTap:{scale:p?1:.95},children:a.jsx(xr,{mode:"wait",children:o?a.jsx(oe.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:p?0:.2},children:a.jsx(rr,{className:"w-6 h-6"})},"close"):a.jsx(oe.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:p?0:.2},children:a.jsx(wE,{className:"w-6 h-6"})},"menu")})}),a.jsx(xr,{children:o&&a.jsx(oe.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>l(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:p?0:.2}})}),a.jsxs(oe.div,{className:`
          fixed md:static inset-y-0 left-0 bg-gradient-to-br from-purple-600 via-purple-700 to-blue-800 shadow-2xl 
          z-50 flex flex-col overflow-hidden transition-transform duration-300 ease-in-out
          md:transform-none backdrop-blur-xl
          ${o?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,initial:!1,animate:r?"collapsed":"expanded",variants:b,children:[a.jsxs("div",{className:`${s?"p-2":"p-4"} border-b border-purple-400/30 backdrop-blur-sm relative overflow-hidden`,children:[a.jsx(oe.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:p?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:p?0:4,repeat:1/0,ease:"linear"}}),a.jsxs("div",{className:`flex items-center ${r?"justify-center":"justify-between"}`,children:[a.jsx(xr,{children:!r&&a.jsx(oe.h1,{className:"text-xl font-bold text-white relative z-10 drop-shadow-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:p?0:.15},children:"LEO Protocol"})}),a.jsx(oe.button,{onClick:()=>n(!r),className:"hidden md:block p-1 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/10 relative z-10",title:r?"Expand sidebar":"Collapse sidebar",whileHover:{scale:p?1:1.1},whileTap:{scale:p?1:.9},children:a.jsx(oe.div,{animate:{rotate:r?0:180},transition:{duration:p?0:.15},children:a.jsx(pt,{className:"w-5 h-5"})})})]}),a.jsx(xr,{children:!r&&a.jsxs(oe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:p?0:.15},children:[a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx(oe.div,{className:`w-2 h-2 rounded-full mr-2 ${t?"bg-green-500":"bg-red-500"}`,animate:{scale:t?[1,1.2,1]:1},transition:{duration:2,repeat:t?1/0:0,repeatType:"loop"}}),a.jsx("span",{className:"text-sm text-purple-100 relative z-10",children:t?"Connected":"Disconnected"})]}),a.jsxs(oe.span,{className:"text-xs px-2 py-1 bg-white/20 text-white rounded-full inline-block mt-2 backdrop-blur-sm border border-white/20 relative z-10 font-medium",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:["v",((N=e.leoProtocol)==null?void 0:N.version)||"detecting..."]})]})})]}),a.jsxs("nav",{className:`flex-1 ${s?"p-2":"p-4"} relative`,children:[a.jsx(oe.div,{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"20px 20px"},animate:{backgroundPosition:p?"0px 0px":["0px 0px","20px 20px","0px 0px"]},transition:{duration:p?0:20,repeat:1/0,ease:"linear"}}),a.jsx(oe.ul,{className:"space-y-1",variants:BE,initial:"hidden",animate:"visible",children:v.map(({path:j,icon:T,label:E,tooltip:I},D)=>a.jsx(oe.li,{variants:UE,custom:D,children:a.jsx(yS,{to:j,className:({isActive:z})=>`block ${z?"active-nav-item":""}`,onClick:()=>l(!1),children:({isActive:z})=>a.jsxs(oe.div,{className:`flex items-center ${s?"p-1.5":"p-2"} rounded-lg transition-all duration-300 group relative backdrop-blur-sm ${z?"bg-white/25 text-white border border-white/30 shadow-lg backdrop-blur-md":"hover:bg-white/10 text-purple-100 hover:text-white border border-transparent hover:border-white/20"}`,variants:x,initial:"rest",whileHover:"hover",whileTap:"tap",layout:!0,children:[z&&!p&&a.jsxs(a.Fragment,{children:[a.jsx(oe.div,{className:"absolute inset-0 rounded-lg bg-white/30 blur-xl",initial:{opacity:0,scale:.8},animate:{opacity:.6,scale:1},transition:{duration:.3}}),a.jsx(oe.div,{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400/40 to-blue-400/40",animate:{background:["linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))","linear-gradient(to right, rgba(59, 130, 246, 0.4), rgba(168, 85, 247, 0.4))","linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]}),a.jsx(T,{className:`${s?"w-4 h-4":"w-5 h-5"} ${r?"":"mr-3"} relative z-10`}),a.jsx(xr,{children:!r&&a.jsx(oe.span,{className:`${s?"text-sm":""} relative z-10`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:p?0:.2},children:E})}),a.jsxs(oe.span,{className:`absolute ${r?"left-full ml-2 top-1/2 transform -translate-y-1/2":"bottom-full mb-2 left-1/2 transform -translate-x-1/2"} px-2 py-1 bg-gray-900/90 backdrop-blur-md text-white text-xs rounded whitespace-nowrap pointer-events-none z-30 opacity-0 group-hover:opacity-100 transition-all duration-200 delay-300 border border-white/20 shadow-xl`,style:{visibility:"hidden"},animate:{opacity:0,visibility:"hidden"},whileHover:{opacity:1,visibility:"visible"},children:[I,a.jsx("div",{className:`absolute ${r?"right-full top-1/2 transform -translate-y-1/2 border-l-0 border-r-4 border-r-gray-900 dark:border-r-gray-700 border-t-4 border-b-4 border-t-transparent border-b-transparent":"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900 dark:border-t-gray-700 border-l-4 border-r-4 border-l-transparent border-r-transparent border-b-0"}`})]})]})})},j))})]}),a.jsxs(oe.div,{className:`border-t border-purple-400/30 ${s?"p-2":"p-4"} relative backdrop-blur-sm`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[a.jsxs(oe.button,{onClick:()=>i(!s),className:`w-full flex items-center ${s?"p-1.5":"p-2"} rounded-lg hover:bg-white/10 text-purple-100 hover:text-white transition-all duration-300 group relative border border-transparent hover:border-white/20 backdrop-blur-sm`,title:s?"Standard view":"Compact view",whileHover:{scale:p?1:1.02},whileTap:{scale:p?1:.98},children:[a.jsx(oe.div,{animate:{rotate:s?180:0},transition:{duration:p?0:.15},children:a.jsx(kE,{className:`${s?"w-4 h-4":"w-5 h-5"} ${r?"":"mr-3"}`})}),a.jsx(xr,{children:!r&&a.jsx(oe.span,{className:s?"text-sm":"",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?"Standard View":"Compact View"})}),a.jsx(xr,{children:r&&a.jsx(oe.span,{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap pointer-events-none z-10",variants:y,initial:"hidden",whileHover:"visible",exit:"hidden",children:s?"Standard":"Compact"})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-purple-400/30",children:a.jsx(op,{onRefresh:h,isCompact:s,isCollapsed:r})})]})]}),a.jsxs(oe.div,{className:"flex-1 flex flex-col overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:p?0:.08},style:{paddingTop:"env(safe-area-inset-top)"},children:[a.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-600 via-purple-700 to-blue-800 border-b border-purple-400/30 shadow-lg relative overflow-hidden backdrop-blur-xl",children:[a.jsx(oe.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:p?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:p?0:4,repeat:1/0,ease:"linear"}}),a.jsx(oe.div,{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"40px 40px"},animate:{backgroundPosition:p?"0px 0px":["0px 0px","40px 40px","0px 0px"]},transition:{duration:p?0:15,repeat:1/0,ease:"linear"}}),a.jsx("div",{className:"flex-1 relative z-10",children:a.jsx(LE,{isCompact:s})}),a.jsx("div",{className:"flex items-center px-4 py-2 relative z-10",children:a.jsx(OE,{})})]}),a.jsx("main",{className:`flex-1 overflow-y-auto ${k}`,children:a.jsx(xr,{children:a.jsx(oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:p?0:.1,ease:"easeOut"},children:a.jsx(iS,{context:{state:e,isCompactMode:s,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h}})},m.pathname)})})]})]})}function HE({searchQuery:e,setSearchQuery:t,statusFilter:r,setStatusFilter:n,priorityFilter:s,setPriorityFilter:i,applicationFilter:o,setApplicationFilter:l,categoryFilter:c,setCategoryFilter:u,showMetadataFilters:d,setShowMetadataFilters:h,strategicDirectives:f,filteredDirectives:p,isCompact:m=!1}){w.useEffect(()=>{localStorage.setItem("sd-status-filter",r)},[r]),w.useEffect(()=>{localStorage.setItem("sd-priority-filter",s)},[s]),w.useEffect(()=>{localStorage.setItem("sd-application-filter",o)},[o]);const v=()=>{t(""),i("all"),n("all"),l("all"),u("all")},b=()=>{h(!1)},x=e||s!=="all"||r!=="all"||o!=="all"||c!=="all",y=[...new Set(f.map(g=>g.category).filter(Boolean))];return a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_w,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 ${m?"w-4 h-4":"w-5 h-5"}`}),a.jsx("input",{type:"text",placeholder:"Search by ID, title, or description...",value:e,onChange:g=>t(g.target.value),className:`w-full ${m?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200`}),e&&a.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(rr,{className:`${m?"w-4 h-4":"w-5 h-5"}`})})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[a.jsxs("button",{onClick:()=>h(!d),className:`flex items-center gap-2 ${m?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 w-full justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[d?a.jsx(Lt,{className:`${m?"w-4 h-4":"w-5 h-5"}`}):a.jsx(pt,{className:`${m?"w-4 h-4":"w-5 h-5"}`}),a.jsx(_l,{className:`${m?"w-4 h-4":"w-5 h-5"}`}),a.jsx("span",{className:"font-medium",children:"Filters"})]}),a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:[p.length," of ",f.length,p.filter(g=>g.rolled_triage).length>0&&a.jsxs("span",{className:"ml-1",children:["(",p.filter(g=>g.rolled_triage==="High").length,"H /",p.filter(g=>g.rolled_triage==="Medium").length,"M /",p.filter(g=>g.rolled_triage==="Low").length,"L /",p.filter(g=>g.rolled_triage==="Future").length,"F)"]})]})})]}),d&&a.jsxs("div",{className:"mt-4 bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg transition-all duration-300 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${m?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Status"}),a.jsxs("select",{value:r,onChange:g=>n(g.target.value),className:`w-full ${m?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"active,draft",children:"Active & Draft (Default)"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"draft",children:"Draft Only"}),a.jsx("option",{value:"deferred",children:"Deferred"}),a.jsx("option",{value:"on_hold",children:"On Hold"}),a.jsx("option",{value:"cancelled",children:"Cancelled"}),a.jsx("option",{value:"archived",children:"Archived/Completed"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${m?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Priority"}),a.jsxs("select",{value:s,onChange:g=>i(g.target.value),className:`w-full ${m?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Priorities"}),a.jsx("option",{value:"critical,high",children:"Critical & High (Default)"}),a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${m?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Application"}),a.jsxs("select",{value:o,onChange:g=>l(g.target.value),className:`w-full ${m?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Applications"}),a.jsx("option",{value:"EHG",children:"EHG (Default)"}),a.jsx("option",{value:"EHG_ENGINEER",children:"EHG Engineer"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block ${m?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Category"}),a.jsxs("select",{value:c,onChange:g=>u(g.target.value),className:`w-full ${m?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[a.jsx("option",{value:"all",children:"All Categories"}),y.map(g=>a.jsx("option",{value:g,children:g},g))]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-600",children:[a.jsx("div",{className:"flex items-center gap-2",children:x&&a.jsxs("span",{className:`${m?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 flex items-center gap-1`,children:[a.jsx(_l,{className:"w-4 h-4"}),"Filtering applied"]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[x&&a.jsxs("button",{onClick:v,className:`${m?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-2 font-medium border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500`,children:[a.jsx(rr,{className:`${m?"w-3 h-3":"w-4 h-4"}`}),"Clear All"]}),a.jsxs("button",{onClick:b,className:`${m?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"} bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg transform hover:scale-105`,children:[a.jsx(nc,{className:`${m?"w-3 h-3":"w-4 h-4"}`}),"Done"]})]})]})]})]})]})}function WE({sortLevels:e,setSortLevels:t,savedSorts:r,setSavedSorts:n,resetToStrategicPriority:s,addSortLevel:i,removeSortLevel:o,updateSortLevel:l,loadPreset:c,savePreset:u,showSortingPanel:d,setShowSortingPanel:h,isCompact:f=!1}){const[p,m]=w.useState(""),[v,b]=w.useState(!1),x={wsjf_score:"WSJF Score",priority:"Priority",status:"Status",progress:"Progress",sequenceRank:"Sequence Rank",created_at:"Created Date",updated_at:"Last Updated",title:"Title",id:"ID",readiness:"Ready Score",must_have_count:"Story Count"},y=(N,j)=>{l(N,{field:j,label:x[j]||j})},g=N=>{const j=e[N];l(N,{direction:j.direction==="asc"?"desc":"asc"})},k=()=>{p&&(u(p),b(!1),m(""))};return a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3 mt-3",children:[a.jsxs("button",{onClick:()=>h(!d),className:`flex items-center gap-2 ${f?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 w-full justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[d?a.jsx(Lt,{className:`${f?"w-4 h-4":"w-5 h-5"}`}):a.jsx(pt,{className:`${f?"w-4 h-4":"w-5 h-5"}`}),a.jsx(oE,{className:`${f?"w-4 h-4":"w-5 h-5"}`}),a.jsx("span",{className:"font-medium",children:"Sorting"})]}),a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:`${f?"text-xs":"text-sm"} text-blue-600 dark:text-blue-400 font-medium`,children:e.map(N=>N.label).join("  ")})})]}),d&&a.jsxs("div",{className:"mt-4 bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg transition-all duration-300 animate-in slide-in-from-top-2",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{onChange:N=>{N.target.value&&c(N.target.value)},className:`${f?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg`,defaultValue:"",children:[a.jsx("option",{value:"",children:"Load Preset..."}),Object.keys(r).map(N=>a.jsx("option",{value:N,children:N},N))]}),a.jsxs("button",{onClick:()=>b(!0),className:`${f?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center gap-2`,children:[a.jsx(is,{className:`${f?"w-3 h-3":"w-4 h-4"}`}),"Save Current"]}),a.jsxs("button",{onClick:()=>t([{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}]),className:`${f?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center gap-2`,children:[a.jsx(EE,{className:`${f?"w-3 h-3":"w-4 h-4"}`}),"Reset"]})]})}),a.jsx("div",{className:"space-y-3",children:e.map((N,j)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-600",children:[a.jsx(yE,{className:`${f?"w-4 h-4":"w-5 h-5"} text-gray-400 cursor-move`}),a.jsxs("span",{className:`${f?"text-xs":"text-sm"} font-medium text-gray-500 dark:text-gray-400 w-20`,children:[j===0?"Primary":j===1?"Secondary":j===2?"Tertiary":`Level ${j+1}`,":"]}),a.jsxs("select",{value:N.field,onChange:T=>y(j,T.target.value),className:`flex-1 ${f?"px-3 py-2 text-xs":"px-4 py-2.5 text-sm"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg`,children:[a.jsx("option",{value:"wsjf_score",children:"WSJF Score"}),a.jsx("option",{value:"priority",children:"Priority"}),a.jsx("option",{value:"status",children:"Status"}),a.jsx("option",{value:"progress",children:"Progress"}),a.jsx("option",{value:"sequenceRank",children:"Sequence Rank"}),a.jsx("option",{value:"created_at",children:"Created Date"}),a.jsx("option",{value:"updated_at",children:"Last Updated"}),a.jsx("option",{value:"title",children:"Title"}),a.jsx("option",{value:"id",children:"ID"}),a.jsx("option",{value:"readiness",children:"Ready Score"}),a.jsx("option",{value:"must_have_count",children:"Story Count"})]}),a.jsxs("button",{onClick:()=>g(j),className:`${f?"px-3 py-2":"px-4 py-2.5"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2`,children:[N.direction==="asc"?a.jsx(lE,{className:`${f?"w-3 h-3":"w-4 h-4"}`}):a.jsx(aE,{className:`${f?"w-3 h-3":"w-4 h-4"}`}),a.jsx("span",{className:`${f?"text-xs":"text-sm"}`,children:N.direction==="asc"?"Ascending":"Descending"})]}),e.length>1&&a.jsx("button",{onClick:()=>o(j),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:a.jsx(sc,{className:`${f?"w-4 h-4":"w-5 h-5"}`})})]},j))}),e.length<5&&a.jsxs("button",{onClick:i,className:`mt-3 ${f?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-gray-400 dark:hover:border-gray-500 w-full flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400`,children:[a.jsx(sp,{className:`${f?"w-3 h-3":"w-4 h-4"}`}),"Add Sort Level"]}),a.jsxs("button",{onClick:s,className:`mt-3 ${f?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-blue-600 text-white rounded-lg hover:bg-blue-700 w-full flex items-center justify-center gap-2`,children:[a.jsx(tr,{className:`${f?"w-3 h-3":"w-4 h-4"}`}),"Reset to Strategic Priority Sort"]}),v&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Save Sort Configuration"}),a.jsx("input",{type:"text",value:p,onChange:N=>m(N.target.value),placeholder:"Enter preset name...",className:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-lg mb-4",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{onClick:()=>{b(!1),m("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"}),a.jsx("button",{onClick:k,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:"Save"})]})]})}),a.jsx("div",{className:"flex items-center justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("button",{onClick:()=>h(!1),className:`${f?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"} bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg transform hover:scale-105`,children:[a.jsx(nc,{className:`${f?"w-3 h-3":"w-4 h-4"}`}),"Apply Sorting"]})})]})]})}function qE(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const GE=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,KE=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,JE={};function og(e,t){return(JE.jsx?KE:GE).test(e)}const XE=/[ \t\n\f\r]/g;function YE(e){return typeof e=="object"?e.type==="text"?lg(e.value):!1:lg(e)}function lg(e){return e.replace(XE,"")===""}class Ka{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}}Ka.prototype.normal={};Ka.prototype.property={};Ka.prototype.space=void 0;function Pw(e,t){const r={},n={};for(const s of e)Object.assign(r,s.property),Object.assign(n,s.normal);return new Ka(r,n,t)}function Qd(e){return e.toLowerCase()}class At{constructor(t,r){this.attribute=r,this.property=t}}At.prototype.attribute="";At.prototype.booleanish=!1;At.prototype.boolean=!1;At.prototype.commaOrSpaceSeparated=!1;At.prototype.commaSeparated=!1;At.prototype.defined=!1;At.prototype.mustUseProperty=!1;At.prototype.number=!1;At.prototype.overloadedBoolean=!1;At.prototype.property="";At.prototype.spaceSeparated=!1;At.prototype.space=void 0;let QE=0;const se=ds(),ze=ds(),Zd=ds(),H=ds(),be=ds(),Gs=ds(),Rt=ds();function ds(){return 2**++QE}const eh=Object.freeze(Object.defineProperty({__proto__:null,boolean:se,booleanish:ze,commaOrSpaceSeparated:Rt,commaSeparated:Gs,number:H,overloadedBoolean:Zd,spaceSeparated:be},Symbol.toStringTag,{value:"Module"})),iu=Object.keys(eh);class lp extends At{constructor(t,r,n,s){let i=-1;if(super(t,r),cg(this,"space",s),typeof n=="number")for(;++i<iu.length;){const o=iu[i];cg(this,iu[i],(n&eh[o])===eh[o])}}}lp.prototype.defined=!0;function cg(e,t,r){r&&(e[t]=r)}function gi(e){const t={},r={};for(const[n,s]of Object.entries(e.properties)){const i=new lp(n,e.transform(e.attributes||{},n),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[Qd(n)]=n,r[Qd(i.attribute)]=n}return new Ka(t,r,e.space)}const Aw=gi({properties:{ariaActiveDescendant:null,ariaAtomic:ze,ariaAutoComplete:null,ariaBusy:ze,ariaChecked:ze,ariaColCount:H,ariaColIndex:H,ariaColSpan:H,ariaControls:be,ariaCurrent:null,ariaDescribedBy:be,ariaDetails:null,ariaDisabled:ze,ariaDropEffect:be,ariaErrorMessage:null,ariaExpanded:ze,ariaFlowTo:be,ariaGrabbed:ze,ariaHasPopup:null,ariaHidden:ze,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:be,ariaLevel:H,ariaLive:null,ariaModal:ze,ariaMultiLine:ze,ariaMultiSelectable:ze,ariaOrientation:null,ariaOwns:be,ariaPlaceholder:null,ariaPosInSet:H,ariaPressed:ze,ariaReadOnly:ze,ariaRelevant:null,ariaRequired:ze,ariaRoleDescription:be,ariaRowCount:H,ariaRowIndex:H,ariaRowSpan:H,ariaSelected:ze,ariaSetSize:H,ariaSort:null,ariaValueMax:H,ariaValueMin:H,ariaValueNow:H,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Iw(e,t){return t in e?e[t]:t}function Rw(e,t){return Iw(e,t.toLowerCase())}const ZE=gi({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Gs,acceptCharset:be,accessKey:be,action:null,allow:null,allowFullScreen:se,allowPaymentRequest:se,allowUserMedia:se,alt:null,as:null,async:se,autoCapitalize:null,autoComplete:be,autoFocus:se,autoPlay:se,blocking:be,capture:null,charSet:null,checked:se,cite:null,className:be,cols:H,colSpan:null,content:null,contentEditable:ze,controls:se,controlsList:be,coords:H|Gs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:se,defer:se,dir:null,dirName:null,disabled:se,download:Zd,draggable:ze,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:se,formTarget:null,headers:be,height:H,hidden:Zd,high:H,href:null,hrefLang:null,htmlFor:be,httpEquiv:be,id:null,imageSizes:null,imageSrcSet:null,inert:se,inputMode:null,integrity:null,is:null,isMap:se,itemId:null,itemProp:be,itemRef:be,itemScope:se,itemType:be,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:se,low:H,manifest:null,max:null,maxLength:H,media:null,method:null,min:null,minLength:H,multiple:se,muted:se,name:null,nonce:null,noModule:se,noValidate:se,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:se,optimum:H,pattern:null,ping:be,placeholder:null,playsInline:se,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:se,referrerPolicy:null,rel:be,required:se,reversed:se,rows:H,rowSpan:H,sandbox:be,scope:null,scoped:se,seamless:se,selected:se,shadowRootClonable:se,shadowRootDelegatesFocus:se,shadowRootMode:null,shape:null,size:H,sizes:null,slot:null,span:H,spellCheck:ze,src:null,srcDoc:null,srcLang:null,srcSet:null,start:H,step:null,style:null,tabIndex:H,target:null,title:null,translate:null,type:null,typeMustMatch:se,useMap:null,value:ze,width:H,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:be,axis:null,background:null,bgColor:null,border:H,borderColor:null,bottomMargin:H,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:se,declare:se,event:null,face:null,frame:null,frameBorder:null,hSpace:H,leftMargin:H,link:null,longDesc:null,lowSrc:null,marginHeight:H,marginWidth:H,noResize:se,noHref:se,noShade:se,noWrap:se,object:null,profile:null,prompt:null,rev:null,rightMargin:H,rules:null,scheme:null,scrolling:ze,standby:null,summary:null,text:null,topMargin:H,valueType:null,version:null,vAlign:null,vLink:null,vSpace:H,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:se,disableRemotePlayback:se,prefix:null,property:null,results:H,security:null,unselectable:null},space:"html",transform:Rw}),eT=gi({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Rt,accentHeight:H,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:H,amplitude:H,arabicForm:null,ascent:H,attributeName:null,attributeType:null,azimuth:H,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:H,by:null,calcMode:null,capHeight:H,className:be,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:H,diffuseConstant:H,direction:null,display:null,dur:null,divisor:H,dominantBaseline:null,download:se,dx:null,dy:null,edgeMode:null,editable:null,elevation:H,enableBackground:null,end:null,event:null,exponent:H,externalResourcesRequired:null,fill:null,fillOpacity:H,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Gs,g2:Gs,glyphName:Gs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:H,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:H,horizOriginX:H,horizOriginY:H,id:null,ideographic:H,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:H,k:H,k1:H,k2:H,k3:H,k4:H,kernelMatrix:Rt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:H,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:H,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:H,overlineThickness:H,paintOrder:null,panose1:null,path:null,pathLength:H,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:be,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:H,pointsAtY:H,pointsAtZ:H,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Rt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Rt,rev:Rt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Rt,requiredFeatures:Rt,requiredFonts:Rt,requiredFormats:Rt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:H,specularExponent:H,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:H,strikethroughThickness:H,string:null,stroke:null,strokeDashArray:Rt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:H,strokeOpacity:H,strokeWidth:null,style:null,surfaceScale:H,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Rt,tabIndex:H,tableValues:null,target:null,targetX:H,targetY:H,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Rt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:H,underlineThickness:H,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:H,values:null,vAlphabetic:H,vMathematical:H,vectorEffect:null,vHanging:H,vIdeographic:H,version:null,vertAdvY:H,vertOriginX:H,vertOriginY:H,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:H,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Iw}),Dw=gi({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Lw=gi({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Rw}),Ow=gi({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),tT={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},rT=/[A-Z]/g,ug=/-[a-z]/g,nT=/^data[-\w.:]+$/i;function sT(e,t){const r=Qd(t);let n=t,s=At;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&nT.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(ug,aT);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!ug.test(i)){let o=i.replace(rT,iT);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=lp}return new s(n,t)}function iT(e){return"-"+e.toLowerCase()}function aT(e){return e.charAt(1).toUpperCase()}const oT=Pw([Aw,ZE,Dw,Lw,Ow],"html"),cp=Pw([Aw,eT,Dw,Lw,Ow],"svg");function lT(e){return e.join(" ").trim()}var up={},dg=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,cT=/\n/g,uT=/^\s*/,dT=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,hT=/^:\s*/,fT=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,pT=/^[;\s]*/,mT=/^\s+|\s+$/g,gT=`
`,hg="/",fg="*",Bn="",xT="comment",yT="declaration",vT=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function s(m){var v=m.match(cT);v&&(r+=v.length);var b=m.lastIndexOf(gT);n=~b?m.length-b:n+m.length}function i(){var m={line:r,column:n};return function(v){return v.position=new o(m),u(),v}}function o(m){this.start=m,this.end={line:r,column:n},this.source=t.source}o.prototype.content=e;function l(m){var v=new Error(t.source+":"+r+":"+n+": "+m);if(v.reason=m,v.filename=t.source,v.line=r,v.column=n,v.source=e,!t.silent)throw v}function c(m){var v=m.exec(e);if(v){var b=v[0];return s(b),e=e.slice(b.length),v}}function u(){c(uT)}function d(m){var v;for(m=m||[];v=h();)v!==!1&&m.push(v);return m}function h(){var m=i();if(!(hg!=e.charAt(0)||fg!=e.charAt(1))){for(var v=2;Bn!=e.charAt(v)&&(fg!=e.charAt(v)||hg!=e.charAt(v+1));)++v;if(v+=2,Bn===e.charAt(v-1))return l("End of comment missing");var b=e.slice(2,v-2);return n+=2,s(b),e=e.slice(v),n+=2,m({type:xT,comment:b})}}function f(){var m=i(),v=c(dT);if(v){if(h(),!c(hT))return l("property missing ':'");var b=c(fT),x=m({type:yT,property:pg(v[0].replace(dg,Bn)),value:b?pg(b[0].replace(dg,Bn)):Bn});return c(pT),x}}function p(){var m=[];d(m);for(var v;v=f();)v!==!1&&(m.push(v),d(m));return m}return u(),p()};function pg(e){return e?e.replace(mT,Bn):Bn}var bT=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(up,"__esModule",{value:!0});up.default=kT;var wT=bT(vT);function kT(e,t){var r=null;if(!e||typeof e!="string")return r;var n=(0,wT.default)(e),s=typeof t=="function";return n.forEach(function(i){if(i.type==="declaration"){var o=i.property,l=i.value;s?t(o,l,i):l&&(r=r||{},r[o]=l)}}),r}var ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.camelCase=void 0;var jT=/^--[a-zA-Z0-9_-]+$/,ST=/-([a-z])/g,NT=/^[^-]+$/,_T=/^-(webkit|moz|ms|o|khtml)-/,CT=/^-(ms)-/,ET=function(e){return!e||NT.test(e)||jT.test(e)},TT=function(e,t){return t.toUpperCase()},mg=function(e,t){return"".concat(t,"-")},PT=function(e,t){return t===void 0&&(t={}),ET(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(CT,mg):e=e.replace(_T,mg),e.replace(ST,TT))};ic.camelCase=PT;var AT=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},IT=AT(up),RT=ic;function th(e,t){var r={};return!e||typeof e!="string"||(0,IT.default)(e,function(n,s){n&&s&&(r[(0,RT.camelCase)(n,t)]=s)}),r}th.default=th;var DT=th;const LT=bh(DT),Mw=$w("end"),dp=$w("start");function $w(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function OT(e){const t=dp(e),r=Mw(e);if(t&&r)return{start:t,end:r}}function sa(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?gg(e.position):"start"in e||"end"in e?gg(e):"line"in e||"column"in e?rh(e):""}function rh(e){return xg(e&&e.line)+":"+xg(e&&e.column)}function gg(e){return rh(e&&e.start)+"-"+rh(e&&e.end)}function xg(e){return e&&typeof e=="number"?e:1}class dt extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let s="",i={},o=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?s=t:!i.cause&&t&&(o=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof n=="string"){const c=n.indexOf(":");c===-1?i.ruleId=n:(i.source=n.slice(0,c),i.ruleId=n.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=sa(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}dt.prototype.file="";dt.prototype.name="";dt.prototype.reason="";dt.prototype.message="";dt.prototype.stack="";dt.prototype.column=void 0;dt.prototype.line=void 0;dt.prototype.ancestors=void 0;dt.prototype.cause=void 0;dt.prototype.fatal=void 0;dt.prototype.place=void 0;dt.prototype.ruleId=void 0;dt.prototype.source=void 0;const hp={}.hasOwnProperty,MT=new Map,$T=/[A-Z]/g,FT=new Set(["table","tbody","thead","tfoot","tr"]),zT=new Set(["td","th"]),Fw="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function UT(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=JT(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=KT(r,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?cp:oT,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=zw(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function zw(e,t,r){if(t.type==="element")return BT(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return VT(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return WT(e,t,r);if(t.type==="mdxjsEsm")return HT(e,t);if(t.type==="root")return qT(e,t,r);if(t.type==="text")return GT(e,t)}function BT(e,t,r){const n=e.schema;let s=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(s=cp,e.schema=s),e.ancestors.push(t);const i=Bw(e,t.tagName,!1),o=XT(e,t);let l=pp(e,t);return FT.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!YE(c):!0})),Uw(e,o,i,t),fp(o,l),e.ancestors.pop(),e.schema=n,e.create(t,i,o,r)}function VT(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}La(e,t.position)}function HT(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);La(e,t.position)}function WT(e,t,r){const n=e.schema;let s=n;t.name==="svg"&&n.space==="html"&&(s=cp,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:Bw(e,t.name,!0),o=YT(e,t),l=pp(e,t);return Uw(e,o,i,t),fp(o,l),e.ancestors.pop(),e.schema=n,e.create(t,i,o,r)}function qT(e,t,r){const n={};return fp(n,pp(e,t)),e.create(t,e.Fragment,n,r)}function GT(e,t){return t.value}function Uw(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function fp(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function KT(e,t,r){return n;function n(s,i,o,l){const u=Array.isArray(o.children)?r:t;return l?u(i,o,l):u(i,o)}}function JT(e,t){return r;function r(n,s,i,o){const l=Array.isArray(i.children),c=dp(n);return t(s,i,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function XT(e,t){const r={};let n,s;for(s in t.properties)if(s!=="children"&&hp.call(t.properties,s)){const i=QT(e,s,t.properties[s]);if(i){const[o,l]=i;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&zT.has(t.tagName)?n=l:r[o]=l}}if(n){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function YT(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const i=n.data.estree.body[0];i.type;const o=i.expression;o.type;const l=o.properties[0];l.type,Object.assign(r,e.evaluater.evaluateExpression(l.argument))}else La(e,t.position);else{const s=n.name;let i;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const l=n.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else La(e,t.position);else i=n.value===null?!0:n.value;r[s]=i}return r}function pp(e,t){const r=[];let n=-1;const s=e.passKeys?new Map:MT;for(;++n<t.children.length;){const i=t.children[n];let o;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;o=c+"-"+u,s.set(c,u+1)}}const l=zw(e,i,o);l!==void 0&&r.push(l)}return r}function QT(e,t,r){const n=sT(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?qE(r):lT(r)),n.property==="style"){let s=typeof r=="object"?r:ZT(e,String(r));return e.stylePropertyNameCase==="css"&&(s=eP(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&n.space?tT[n.property]||n.property:n.attribute,r]}}function ZT(e,t){try{return LT(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,s=new dt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Fw+"#cannot-parse-style-attribute",s}}function Bw(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,o;for(;++i<s.length;){const l=og(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}n=o}else n=og(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const s=n.value;return hp.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(n);La(e)}function La(e,t){const r=new dt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=Fw+"#cannot-handle-mdx-estrees-without-createevaluater",r}function eP(e){const t={};let r;for(r in e)hp.call(e,r)&&(t[tP(r)]=e[r]);return t}function tP(e){let t=e.replace($T,rP);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function rP(e){return"-"+e.toLowerCase()}const au={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},nP={};function sP(e,t){const r=nP,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,s=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return Vw(e,n,s)}function Vw(e,t,r){if(iP(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return yg(e.children,t,r)}return Array.isArray(e)?yg(e,t,r):""}function yg(e,t,r){const n=[];let s=-1;for(;++s<e.length;)n[s]=Vw(e[s],t,r);return n.join("")}function iP(e){return!!(e&&typeof e=="object")}const vg=document.createElement("i");function mp(e){const t="&"+e+";";vg.innerHTML=t;const r=vg.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Er(e,t,r,n){const s=e.length;let i=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(t,r),e.splice(...o);else for(r&&e.splice(t,r);i<n.length;)o=n.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function Kt(e,t){return e.length>0?(Er(e,e.length,0,t),e):t}const bg={}.hasOwnProperty;function aP(e){const t={};let r=-1;for(;++r<e.length;)oP(t,e[r]);return t}function oP(e,t){let r;for(r in t){const s=(bg.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let o;if(i)for(o in i){bg.call(s,o)||(s[o]=[]);const l=i[o];lP(s[o],Array.isArray(l)?l:l?[l]:[])}}}function lP(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Er(e,0,0,n)}function Hw(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function Ks(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const kr=Pn(/[A-Za-z]/),Mt=Pn(/[\dA-Za-z]/),cP=Pn(/[#-'*+\--9=?A-Z^-~]/);function nh(e){return e!==null&&(e<32||e===127)}const sh=Pn(/\d/),uP=Pn(/[\dA-Fa-f]/),dP=Pn(/[!-/:-@[-`{-~]/);function te(e){return e!==null&&e<-2}function Pt(e){return e!==null&&(e<0||e===32)}function pe(e){return e===-2||e===-1||e===32}const hP=Pn(new RegExp("\\p{P}|\\p{S}","u")),fP=Pn(/\s/);function Pn(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function xi(e){const t=[];let r=-1,n=0,s=0;for(;++r<e.length;){const i=e.charCodeAt(r);let o="";if(i===37&&Mt(e.charCodeAt(r+1))&&Mt(e.charCodeAt(r+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(r+1);i<56320&&l>56319&&l<57344?(o=String.fromCharCode(i,l),s=1):o=""}else o=String.fromCharCode(i);o&&(t.push(e.slice(n,r),encodeURIComponent(o)),n=r+s+1,o=""),s&&(r+=s,s=0)}return t.join("")+e.slice(n)}function ke(e,t,r,n){const s=n?n-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return pe(c)?(e.enter(r),l(c)):t(c)}function l(c){return pe(c)&&i++<s?(e.consume(c),l):(e.exit(r),t(c))}}const pP={tokenize:mP};function mP(e){const t=e.attempt(this.parser.constructs.contentInitial,n,s);let r;return t;function n(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),ke(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=c),r=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return te(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),o)}}const gP={tokenize:xP},wg={tokenize:yP};function xP(e){const t=this,r=[];let n=0,s,i,o;return l;function l(g){if(n<r.length){const k=r[n];return t.containerState=k[1],e.attempt(k[0].continuation,c,u)(g)}return u(g)}function c(g){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&y();const k=t.events.length;let N=k,j;for(;N--;)if(t.events[N][0]==="exit"&&t.events[N][1].type==="chunkFlow"){j=t.events[N][1].end;break}x(n);let T=k;for(;T<t.events.length;)t.events[T][1].end={...j},T++;return Er(t.events,N+1,0,t.events.slice(k)),t.events.length=T,u(g)}return l(g)}function u(g){if(n===r.length){if(!s)return f(g);if(s.currentConstruct&&s.currentConstruct.concrete)return m(g);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(wg,d,h)(g)}function d(g){return s&&y(),x(n),f(g)}function h(g){return t.parser.lazy[t.now().line]=n!==r.length,o=t.now().offset,m(g)}function f(g){return t.containerState={},e.attempt(wg,p,m)(g)}function p(g){return n++,r.push([t.currentConstruct,t.containerState]),f(g)}function m(g){if(g===null){s&&y(),x(0),e.consume(g);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),v(g)}function v(g){if(g===null){b(e.exit("chunkFlow"),!0),x(0),e.consume(g);return}return te(g)?(e.consume(g),b(e.exit("chunkFlow")),n=0,t.interrupt=void 0,l):(e.consume(g),v)}function b(g,k){const N=t.sliceStream(g);if(k&&N.push(null),g.previous=i,i&&(i.next=g),i=g,s.defineSkip(g.start),s.write(N),t.parser.lazy[g.start.line]){let j=s.events.length;for(;j--;)if(s.events[j][1].start.offset<o&&(!s.events[j][1].end||s.events[j][1].end.offset>o))return;const T=t.events.length;let E=T,I,D;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){if(I){D=t.events[E][1].end;break}I=!0}for(x(n),j=T;j<t.events.length;)t.events[j][1].end={...D},j++;Er(t.events,E+1,0,t.events.slice(T)),t.events.length=j}}function x(g){let k=r.length;for(;k-- >g;){const N=r[k];t.containerState=N[1],N[0].exit.call(t,e)}r.length=g}function y(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function yP(e,t,r){return ke(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function kg(e){if(e===null||Pt(e)||fP(e))return 1;if(hP(e))return 2}function gp(e,t,r){const n=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!n.includes(i)&&(t=i(t,r),n.push(i))}return t}const ih={name:"attention",resolveAll:vP,tokenize:bP};function vP(e,t){let r=-1,n,s,i,o,l,c,u,d;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;c=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const h={...e[n][1].end},f={...e[r][1].start};jg(h,-c),jg(f,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[n][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:f},i={type:c>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[n][1].end={...o.start},e[r][1].start={...l.end},u=[],e[n][1].end.offset-e[n][1].start.offset&&(u=Kt(u,[["enter",e[n][1],t],["exit",e[n][1],t]])),u=Kt(u,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",i,t]]),u=Kt(u,gp(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),u=Kt(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[r][1].end.offset-e[r][1].start.offset?(d=2,u=Kt(u,[["enter",e[r][1],t],["exit",e[r][1],t]])):d=0,Er(e,n-1,r-n+3,u),r=n+u.length-d-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function bP(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,s=kg(n);let i;return o;function o(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),d=kg(c),h=!d||d===2&&s||r.includes(c),f=!s||s===2&&d||r.includes(n);return u._open=!!(i===42?h:h&&(s||!f)),u._close=!!(i===42?f:f&&(d||!h)),t(c)}}function jg(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const wP={name:"autolink",tokenize:kP};function kP(e,t,r){let n=0;return s;function s(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(p){return kr(p)?(e.consume(p),o):p===64?r(p):u(p)}function o(p){return p===43||p===45||p===46||Mt(p)?(n=1,l(p)):u(p)}function l(p){return p===58?(e.consume(p),n=0,c):(p===43||p===45||p===46||Mt(p))&&n++<32?(e.consume(p),l):(n=0,u(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||nh(p)?r(p):(e.consume(p),c)}function u(p){return p===64?(e.consume(p),d):cP(p)?(e.consume(p),u):r(p)}function d(p){return Mt(p)?h(p):r(p)}function h(p){return p===46?(e.consume(p),n=0,d):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):f(p)}function f(p){if((p===45||Mt(p))&&n++<63){const m=p===45?f:h;return e.consume(p),m}return r(p)}}const ac={partial:!0,tokenize:jP};function jP(e,t,r){return n;function n(i){return pe(i)?ke(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||te(i)?t(i):r(i)}}const Ww={continuation:{tokenize:NP},exit:_P,name:"blockQuote",tokenize:SP};function SP(e,t,r){const n=this;return s;function s(o){if(o===62){const l=n.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return r(o)}function i(o){return pe(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function NP(e,t,r){const n=this;return s;function s(o){return pe(o)?ke(e,i,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(Ww,t,r)(o)}}function _P(e){e.exit("blockQuote")}const qw={name:"characterEscape",tokenize:CP};function CP(e,t,r){return n;function n(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return dP(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const Gw={name:"characterReference",tokenize:EP};function EP(e,t,r){const n=this;let s=0,i,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,o=Mt,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=uP,d):(e.enter("characterReferenceValue"),i=7,o=sh,d(h))}function d(h){if(h===59&&s){const f=e.exit("characterReferenceValue");return o===Mt&&!mp(n.sliceSerialize(f))?r(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&s++<i?(e.consume(h),d):r(h)}}const Sg={partial:!0,tokenize:PP},Ng={concrete:!0,name:"codeFenced",tokenize:TP};function TP(e,t,r){const n=this,s={partial:!0,tokenize:N};let i=0,o=0,l;return c;function c(j){return u(j)}function u(j){const T=n.events[n.events.length-1];return i=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,l=j,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(j)}function d(j){return j===l?(o++,e.consume(j),d):o<3?r(j):(e.exit("codeFencedFenceSequence"),pe(j)?ke(e,h,"whitespace")(j):h(j))}function h(j){return j===null||te(j)?(e.exit("codeFencedFence"),n.interrupt?t(j):e.check(Sg,v,k)(j)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(j))}function f(j){return j===null||te(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(j)):pe(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ke(e,p,"whitespace")(j)):j===96&&j===l?r(j):(e.consume(j),f)}function p(j){return j===null||te(j)?h(j):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(j))}function m(j){return j===null||te(j)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(j)):j===96&&j===l?r(j):(e.consume(j),m)}function v(j){return e.attempt(s,k,b)(j)}function b(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),x}function x(j){return i>0&&pe(j)?ke(e,y,"linePrefix",i+1)(j):y(j)}function y(j){return j===null||te(j)?e.check(Sg,v,k)(j):(e.enter("codeFlowValue"),g(j))}function g(j){return j===null||te(j)?(e.exit("codeFlowValue"),y(j)):(e.consume(j),g)}function k(j){return e.exit("codeFenced"),t(j)}function N(j,T,E){let I=0;return D;function D(P){return j.enter("lineEnding"),j.consume(P),j.exit("lineEnding"),z}function z(P){return j.enter("codeFencedFence"),pe(P)?ke(j,A,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):A(P)}function A(P){return P===l?(j.enter("codeFencedFenceSequence"),_(P)):E(P)}function _(P){return P===l?(I++,j.consume(P),_):I>=o?(j.exit("codeFencedFenceSequence"),pe(P)?ke(j,M,"whitespace")(P):M(P)):E(P)}function M(P){return P===null||te(P)?(j.exit("codeFencedFence"),T(P)):E(P)}}}function PP(e,t,r){const n=this;return s;function s(o){return o===null?r(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}const ou={name:"codeIndented",tokenize:IP},AP={partial:!0,tokenize:RP};function IP(e,t,r){const n=this;return s;function s(u){return e.enter("codeIndented"),ke(e,i,"linePrefix",5)(u)}function i(u){const d=n.events[n.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):r(u)}function o(u){return u===null?c(u):te(u)?e.attempt(AP,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||te(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function RP(e,t,r){const n=this;return s;function s(o){return n.parser.lazy[n.now().line]?r(o):te(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):ke(e,i,"linePrefix",5)(o)}function i(o){const l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):te(o)?s(o):r(o)}}const DP={name:"codeText",previous:OP,resolve:LP,tokenize:MP};function LP(e){let t=e.length-4,r=3,n,s;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)s===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(s=n):(n===t||e[n][1].type==="lineEnding")&&(e[s][1].type="codeTextData",n!==s+2&&(e[s][1].end=e[n-1][1].end,e.splice(s+2,n-s-2),t-=n-s-2,n=s+2),s=void 0);return e}function OP(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function MP(e,t,r){let n=0,s,i;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),n++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?r(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(i=e.enter("codeTextSequence"),s=0,d(h)):te(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||te(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),s++,d):s===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",u(h))}}class $P{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const s=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&Ii(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Ii(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Ii(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Ii(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Ii(this.left,r.reverse())}}}function Ii(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function Kw(e){const t={};let r=-1,n,s,i,o,l,c,u;const d=new $P(e);for(;++r<d.length;){for(;r in t;)r=t[r];if(n=d.get(r),r&&n[1].type==="chunkFlow"&&d.get(r-1)[1].type==="listItemPrefix"&&(c=n[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,FP(d,r)),r=t[r],u=!0);else if(n[1]._container){for(i=r,s=void 0;i--;)if(o=d.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(n[1].end={...d.get(s)[1].start},l=d.slice(s,r),l.unshift(n),d.splice(s,r-s+1,l))}}return Er(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function FP(e,t){const r=e.get(t)[1],n=e.get(t)[2];let s=t-1;const i=[];let o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,h,f=-1,p=r,m=0,v=0;const b=[v];for(;p;){for(;e.get(++s)[1]!==p;);i.push(s),p._tokenizer||(d=n.sliceStream(p),p.next||d.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=r;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(v=f+1,b.push(v),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):b.pop(),f=b.length;f--;){const x=l.slice(b[f],b[f+1]),y=i.pop();c.push([y,y+x.length-1]),e.splice(y,2,x)}for(c.reverse(),f=-1;++f<c.length;)u[m+c[f][0]]=m+c[f][1],m+=c[f][1]-c[f][0]-1;return u}const zP={resolve:BP,tokenize:VP},UP={partial:!0,tokenize:HP};function BP(e){return Kw(e),e}function VP(e,t){let r;return n;function n(l){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):te(l)?e.check(UP,o,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,s}}function HP(e,t,r){const n=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ke(e,i,"linePrefix")}function i(o){if(o===null||te(o))return r(o);const l=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(n.parser.constructs.flow,r,t)(o)}}function Jw(e,t,r,n,s,i,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(x){return x===60?(e.enter(n),e.enter(s),e.enter(i),e.consume(x),e.exit(i),f):x===null||x===32||x===41||nh(x)?r(x):(e.enter(n),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(x))}function f(x){return x===62?(e.enter(i),e.consume(x),e.exit(i),e.exit(s),e.exit(n),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===62?(e.exit("chunkString"),e.exit(l),f(x)):x===null||x===60||te(x)?r(x):(e.consume(x),x===92?m:p)}function m(x){return x===60||x===62||x===92?(e.consume(x),p):p(x)}function v(x){return!d&&(x===null||x===41||Pt(x))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(n),t(x)):d<u&&x===40?(e.consume(x),d++,v):x===41?(e.consume(x),d--,v):x===null||x===32||x===40||nh(x)?r(x):(e.consume(x),x===92?b:v)}function b(x){return x===40||x===41||x===92?(e.consume(x),v):v(x)}}function Xw(e,t,r,n,s,i){const o=this;let l=0,c;return u;function u(p){return e.enter(n),e.enter(s),e.consume(p),e.exit(s),e.enter(i),d}function d(p){return l>999||p===null||p===91||p===93&&!c||p===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?r(p):p===93?(e.exit(i),e.enter(s),e.consume(p),e.exit(s),e.exit(n),t):te(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||te(p)||l++>999?(e.exit("chunkString"),d(p)):(e.consume(p),c||(c=!pe(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(e.consume(p),l++,h):h(p)}}function Yw(e,t,r,n,s,i){let o;return l;function l(f){return f===34||f===39||f===40?(e.enter(n),e.enter(s),e.consume(f),e.exit(s),o=f===40?41:f,c):r(f)}function c(f){return f===o?(e.enter(s),e.consume(f),e.exit(s),e.exit(n),t):(e.enter(i),u(f))}function u(f){return f===o?(e.exit(i),c(o)):f===null?r(f):te(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),ke(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===o||f===null||te(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?h:d)}function h(f){return f===o||f===92?(e.consume(f),d):d(f)}}function ia(e,t){let r;return n;function n(s){return te(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),r=!0,n):pe(s)?ke(e,n,r?"linePrefix":"lineSuffix")(s):t(s)}}const WP={name:"definition",tokenize:GP},qP={partial:!0,tokenize:KP};function GP(e,t,r){const n=this;let s;return i;function i(p){return e.enter("definition"),o(p)}function o(p){return Xw.call(n,e,l,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return s=Ks(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):r(p)}function c(p){return Pt(p)?ia(e,u)(p):u(p)}function u(p){return Jw(e,d,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function d(p){return e.attempt(qP,h,h)(p)}function h(p){return pe(p)?ke(e,f,"whitespace")(p):f(p)}function f(p){return p===null||te(p)?(e.exit("definition"),n.parser.defined.push(s),t(p)):r(p)}}function KP(e,t,r){return n;function n(l){return Pt(l)?ia(e,s)(l):r(l)}function s(l){return Yw(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return pe(l)?ke(e,o,"whitespace")(l):o(l)}function o(l){return l===null||te(l)?t(l):r(l)}}const JP={name:"hardBreakEscape",tokenize:XP};function XP(e,t,r){return n;function n(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return te(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const YP={name:"headingAtx",resolve:QP,tokenize:ZP};function QP(e,t){let r=e.length-2,n=3,s,i;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(s={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},i={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Er(e,n,r-n+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function ZP(e,t,r){let n=0;return s;function s(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&n++<6?(e.consume(d),o):d===null||Pt(d)?(e.exit("atxHeadingSequence"),l(d)):r(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||te(d)?(e.exit("atxHeading"),t(d)):pe(d)?ke(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Pt(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const e5=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],_g=["pre","script","style","textarea"],t5={concrete:!0,name:"htmlFlow",resolveTo:s5,tokenize:i5},r5={partial:!0,tokenize:o5},n5={partial:!0,tokenize:a5};function s5(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function i5(e,t,r){const n=this;let s,i,o,l,c;return u;function u(C){return d(C)}function d(C){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(C),h}function h(C){return C===33?(e.consume(C),f):C===47?(e.consume(C),i=!0,v):C===63?(e.consume(C),s=3,n.interrupt?t:S):kr(C)?(e.consume(C),o=String.fromCharCode(C),b):r(C)}function f(C){return C===45?(e.consume(C),s=2,p):C===91?(e.consume(C),s=5,l=0,m):kr(C)?(e.consume(C),s=4,n.interrupt?t:S):r(C)}function p(C){return C===45?(e.consume(C),n.interrupt?t:S):r(C)}function m(C){const re="CDATA[";return C===re.charCodeAt(l++)?(e.consume(C),l===re.length?n.interrupt?t:A:m):r(C)}function v(C){return kr(C)?(e.consume(C),o=String.fromCharCode(C),b):r(C)}function b(C){if(C===null||C===47||C===62||Pt(C)){const re=C===47,ye=o.toLowerCase();return!re&&!i&&_g.includes(ye)?(s=1,n.interrupt?t(C):A(C)):e5.includes(o.toLowerCase())?(s=6,re?(e.consume(C),x):n.interrupt?t(C):A(C)):(s=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(C):i?y(C):g(C))}return C===45||Mt(C)?(e.consume(C),o+=String.fromCharCode(C),b):r(C)}function x(C){return C===62?(e.consume(C),n.interrupt?t:A):r(C)}function y(C){return pe(C)?(e.consume(C),y):D(C)}function g(C){return C===47?(e.consume(C),D):C===58||C===95||kr(C)?(e.consume(C),k):pe(C)?(e.consume(C),g):D(C)}function k(C){return C===45||C===46||C===58||C===95||Mt(C)?(e.consume(C),k):N(C)}function N(C){return C===61?(e.consume(C),j):pe(C)?(e.consume(C),N):g(C)}function j(C){return C===null||C===60||C===61||C===62||C===96?r(C):C===34||C===39?(e.consume(C),c=C,T):pe(C)?(e.consume(C),j):E(C)}function T(C){return C===c?(e.consume(C),c=null,I):C===null||te(C)?r(C):(e.consume(C),T)}function E(C){return C===null||C===34||C===39||C===47||C===60||C===61||C===62||C===96||Pt(C)?N(C):(e.consume(C),E)}function I(C){return C===47||C===62||pe(C)?g(C):r(C)}function D(C){return C===62?(e.consume(C),z):r(C)}function z(C){return C===null||te(C)?A(C):pe(C)?(e.consume(C),z):r(C)}function A(C){return C===45&&s===2?(e.consume(C),O):C===60&&s===1?(e.consume(C),$):C===62&&s===4?(e.consume(C),U):C===63&&s===3?(e.consume(C),S):C===93&&s===5?(e.consume(C),F):te(C)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(r5,K,_)(C)):C===null||te(C)?(e.exit("htmlFlowData"),_(C)):(e.consume(C),A)}function _(C){return e.check(n5,M,K)(C)}function M(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),P}function P(C){return C===null||te(C)?_(C):(e.enter("htmlFlowData"),A(C))}function O(C){return C===45?(e.consume(C),S):A(C)}function $(C){return C===47?(e.consume(C),o="",R):A(C)}function R(C){if(C===62){const re=o.toLowerCase();return _g.includes(re)?(e.consume(C),U):A(C)}return kr(C)&&o.length<8?(e.consume(C),o+=String.fromCharCode(C),R):A(C)}function F(C){return C===93?(e.consume(C),S):A(C)}function S(C){return C===62?(e.consume(C),U):C===45&&s===2?(e.consume(C),S):A(C)}function U(C){return C===null||te(C)?(e.exit("htmlFlowData"),K(C)):(e.consume(C),U)}function K(C){return e.exit("htmlFlow"),t(C)}}function a5(e,t,r){const n=this;return s;function s(o){return te(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):r(o)}function i(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}function o5(e,t,r){return n;function n(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(ac,t,r)}}const l5={name:"htmlText",tokenize:c5};function c5(e,t,r){const n=this;let s,i,o;return l;function l(S){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(S),c}function c(S){return S===33?(e.consume(S),u):S===47?(e.consume(S),N):S===63?(e.consume(S),g):kr(S)?(e.consume(S),E):r(S)}function u(S){return S===45?(e.consume(S),d):S===91?(e.consume(S),i=0,m):kr(S)?(e.consume(S),y):r(S)}function d(S){return S===45?(e.consume(S),p):r(S)}function h(S){return S===null?r(S):S===45?(e.consume(S),f):te(S)?(o=h,$(S)):(e.consume(S),h)}function f(S){return S===45?(e.consume(S),p):h(S)}function p(S){return S===62?O(S):S===45?f(S):h(S)}function m(S){const U="CDATA[";return S===U.charCodeAt(i++)?(e.consume(S),i===U.length?v:m):r(S)}function v(S){return S===null?r(S):S===93?(e.consume(S),b):te(S)?(o=v,$(S)):(e.consume(S),v)}function b(S){return S===93?(e.consume(S),x):v(S)}function x(S){return S===62?O(S):S===93?(e.consume(S),x):v(S)}function y(S){return S===null||S===62?O(S):te(S)?(o=y,$(S)):(e.consume(S),y)}function g(S){return S===null?r(S):S===63?(e.consume(S),k):te(S)?(o=g,$(S)):(e.consume(S),g)}function k(S){return S===62?O(S):g(S)}function N(S){return kr(S)?(e.consume(S),j):r(S)}function j(S){return S===45||Mt(S)?(e.consume(S),j):T(S)}function T(S){return te(S)?(o=T,$(S)):pe(S)?(e.consume(S),T):O(S)}function E(S){return S===45||Mt(S)?(e.consume(S),E):S===47||S===62||Pt(S)?I(S):r(S)}function I(S){return S===47?(e.consume(S),O):S===58||S===95||kr(S)?(e.consume(S),D):te(S)?(o=I,$(S)):pe(S)?(e.consume(S),I):O(S)}function D(S){return S===45||S===46||S===58||S===95||Mt(S)?(e.consume(S),D):z(S)}function z(S){return S===61?(e.consume(S),A):te(S)?(o=z,$(S)):pe(S)?(e.consume(S),z):I(S)}function A(S){return S===null||S===60||S===61||S===62||S===96?r(S):S===34||S===39?(e.consume(S),s=S,_):te(S)?(o=A,$(S)):pe(S)?(e.consume(S),A):(e.consume(S),M)}function _(S){return S===s?(e.consume(S),s=void 0,P):S===null?r(S):te(S)?(o=_,$(S)):(e.consume(S),_)}function M(S){return S===null||S===34||S===39||S===60||S===61||S===96?r(S):S===47||S===62||Pt(S)?I(S):(e.consume(S),M)}function P(S){return S===47||S===62||Pt(S)?I(S):r(S)}function O(S){return S===62?(e.consume(S),e.exit("htmlTextData"),e.exit("htmlText"),t):r(S)}function $(S){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),R}function R(S){return pe(S)?ke(e,F,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):F(S)}function F(S){return e.enter("htmlTextData"),o(S)}}const xp={name:"labelEnd",resolveAll:f5,resolveTo:p5,tokenize:m5},u5={tokenize:g5},d5={tokenize:x5},h5={tokenize:y5};function f5(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const s=n.type==="labelImage"?4:2;n.type="data",t+=s}}return e.length!==r.length&&Er(e,0,e.length,r),e}function p5(e,t){let r=e.length,n=0,s,i,o,l;for(;r--;)if(s=e[r][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[r][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[r][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=r,s.type!=="labelLink")){n=2;break}}else s.type==="labelEnd"&&(o=r);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[i+n+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=Kt(l,e.slice(i+1,i+n+3)),l=Kt(l,[["enter",d,t]]),l=Kt(l,gp(t.parser.constructs.insideSpan.null,e.slice(i+n+4,o-3),t)),l=Kt(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=Kt(l,e.slice(o+1)),l=Kt(l,[["exit",c,t]]),Er(e,i,e.length,l),e}function m5(e,t,r){const n=this;let s=n.events.length,i,o;for(;s--;)if((n.events[s][1].type==="labelImage"||n.events[s][1].type==="labelLink")&&!n.events[s][1]._balanced){i=n.events[s][1];break}return l;function l(f){return i?i._inactive?h(f):(o=n.parser.defined.includes(Ks(n.sliceSerialize({start:i.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):r(f)}function c(f){return f===40?e.attempt(u5,d,o?d:h)(f):f===91?e.attempt(d5,d,o?u:h)(f):o?d(f):h(f)}function u(f){return e.attempt(h5,d,h)(f)}function d(f){return t(f)}function h(f){return i._balanced=!0,r(f)}}function g5(e,t,r){return n;function n(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return Pt(h)?ia(e,i)(h):i(h)}function i(h){return h===41?d(h):Jw(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Pt(h)?ia(e,c)(h):d(h)}function l(h){return r(h)}function c(h){return h===34||h===39||h===40?Yw(e,u,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return Pt(h)?ia(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):r(h)}}function x5(e,t,r){const n=this;return s;function s(l){return Xw.call(n,e,i,o,"reference","referenceMarker","referenceString")(l)}function i(l){return n.parser.defined.includes(Ks(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(l):r(l)}function o(l){return r(l)}}function y5(e,t,r){return n;function n(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const v5={name:"labelStartImage",resolveAll:xp.resolveAll,tokenize:b5};function b5(e,t,r){const n=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):r(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(l):t(l)}}const w5={name:"labelStartLink",resolveAll:xp.resolveAll,tokenize:k5};function k5(e,t,r){const n=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):t(o)}}const lu={name:"lineEnding",tokenize:j5};function j5(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),ke(e,t,"linePrefix")}}const qo={name:"thematicBreak",tokenize:S5};function S5(e,t,r){let n=0,s;return i;function i(u){return e.enter("thematicBreak"),o(u)}function o(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):n>=3&&(u===null||te(u))?(e.exit("thematicBreak"),t(u)):r(u)}function c(u){return u===s?(e.consume(u),n++,c):(e.exit("thematicBreakSequence"),pe(u)?ke(e,l,"whitespace")(u):l(u))}}const kt={continuation:{tokenize:E5},exit:P5,name:"list",tokenize:C5},N5={partial:!0,tokenize:A5},_5={partial:!0,tokenize:T5};function C5(e,t,r){const n=this,s=n.events[n.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(p){const m=n.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!n.containerState.marker||p===n.containerState.marker:sh(p)){if(n.containerState.type||(n.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(qo,r,u)(p):u(p);if(!n.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return r(p)}function c(p){return sh(p)&&++o<10?(e.consume(p),c):(!n.interrupt||o<2)&&(n.containerState.marker?p===n.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),u(p)):r(p)}function u(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||p,e.check(ac,n.interrupt?r:d,e.attempt(N5,f,h))}function d(p){return n.containerState.initialBlankLine=!0,i++,f(p)}function h(p){return pe(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),f):r(p)}function f(p){return n.containerState.size=i+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function E5(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(ac,s,i);function s(l){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,ke(e,t,"listItemIndent",n.containerState.size+1)(l)}function i(l){return n.containerState.furtherBlankLines||!pe(l)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(l)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(_5,t,o)(l))}function o(l){return n.containerState._closeFlow=!0,n.interrupt=void 0,ke(e,e.attempt(kt,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function T5(e,t,r){const n=this;return ke(e,s,"listItemIndent",n.containerState.size+1);function s(i){const o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?t(i):r(i)}}function P5(e){e.exit(this.containerState.type)}function A5(e,t,r){const n=this;return ke(e,s,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=n.events[n.events.length-1];return!pe(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const Cg={name:"setextUnderline",resolveTo:I5,tokenize:R5};function I5(e,t){let r=e.length,n,s,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(s=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const o={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=o,e.push(["exit",o,t]),e}function R5(e,t,r){const n=this;let s;return i;function i(u){let d=n.events.length,h;for(;d--;)if(n.events[d][1].type!=="lineEnding"&&n.events[d][1].type!=="linePrefix"&&n.events[d][1].type!=="content"){h=n.events[d][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||h)?(e.enter("setextHeadingLine"),s=u,o(u)):r(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),pe(u)?ke(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||te(u)?(e.exit("setextHeadingLine"),t(u)):r(u)}}const D5={tokenize:L5};function L5(e){const t=this,r=e.attempt(ac,n,e.attempt(this.parser.constructs.flowInitial,s,ke(e,e.attempt(this.parser.constructs.flow,s,e.attempt(zP,s)),"linePrefix")));return r;function n(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const O5={resolveAll:Zw()},M5=Qw("string"),$5=Qw("text");function Qw(e){return{resolveAll:Zw(e==="text"?F5:void 0),tokenize:t};function t(r){const n=this,s=this.parser.constructs[e],i=r.attempt(s,o,l);return o;function o(d){return u(d)?i(d):l(d)}function l(d){if(d===null){r.consume(d);return}return r.enter("data"),r.consume(d),c}function c(d){return u(d)?(r.exit("data"),i(d)):(r.consume(d),c)}function u(d){if(d===null)return!0;const h=s[d];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(n,n.previous))return!0}return!1}}}function Zw(e){return t;function t(r,n){let s=-1,i;for(;++s<=r.length;)i===void 0?r[s]&&r[s][1].type==="data"&&(i=s,s++):(!r[s]||r[s][1].type!=="data")&&(s!==i+2&&(r[i][1].end=r[s-1][1].end,r.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(r,n):r}}function F5(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],s=t.sliceStream(n);let i=s.length,o=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(l=0),l){const u={type:r===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:n.start._bufferIndex+o,_index:n.start._index+i,line:n.end.line,column:n.end.column-l,offset:n.end.offset-l},end:{...n.end}};n.end={...u.start},n.start.offset===n.end.offset?Object.assign(n,u):(e.splice(r,0,["enter",u,t],["exit",u,t]),r+=2)}r++}return e}const z5={42:kt,43:kt,45:kt,48:kt,49:kt,50:kt,51:kt,52:kt,53:kt,54:kt,55:kt,56:kt,57:kt,62:Ww},U5={91:WP},B5={[-2]:ou,[-1]:ou,32:ou},V5={35:YP,42:qo,45:[Cg,qo],60:t5,61:Cg,95:qo,96:Ng,126:Ng},H5={38:Gw,92:qw},W5={[-5]:lu,[-4]:lu,[-3]:lu,33:v5,38:Gw,42:ih,60:[wP,l5],91:w5,92:[JP,qw],93:xp,95:ih,96:DP},q5={null:[ih,O5]},G5={null:[42,95]},K5={null:[]},J5=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:G5,contentInitial:U5,disable:K5,document:z5,flow:V5,flowInitial:B5,insideSpan:q5,string:H5,text:W5},Symbol.toStringTag,{value:"Module"}));function X5(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const s={},i=[];let o=[],l=[];const c={attempt:T(N),check:T(j),consume:y,enter:g,exit:k,interrupt:T(j,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:m,parser:e,previous:null,sliceSerialize:f,sliceStream:p,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function h(z){return o=Kt(o,z),b(),o[o.length-1]!==null?[]:(E(t,0),u.events=gp(i,u.events,u),u.events)}function f(z,A){return Q5(p(z),A)}function p(z){return Y5(o,z)}function m(){const{_bufferIndex:z,_index:A,line:_,column:M,offset:P}=n;return{_bufferIndex:z,_index:A,line:_,column:M,offset:P}}function v(z){s[z.line]=z.column,D()}function b(){let z;for(;n._index<o.length;){const A=o[n._index];if(typeof A=="string")for(z=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===z&&n._bufferIndex<A.length;)x(A.charCodeAt(n._bufferIndex));else x(A)}}function x(z){d=d(z)}function y(z){te(z)?(n.line++,n.column=1,n.offset+=z===-3?2:1,D()):z!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),u.previous=z}function g(z,A){const _=A||{};return _.type=z,_.start=m(),u.events.push(["enter",_,u]),l.push(_),_}function k(z){const A=l.pop();return A.end=m(),u.events.push(["exit",A,u]),A}function N(z,A){E(z,A.from)}function j(z,A){A.restore()}function T(z,A){return _;function _(M,P,O){let $,R,F,S;return Array.isArray(M)?K(M):"tokenize"in M?K([M]):U(M);function U(le){return We;function We(ht){const me=ht!==null&&le[ht],xe=ht!==null&&le.null,qe=[...Array.isArray(me)?me:me?[me]:[],...Array.isArray(xe)?xe:xe?[xe]:[]];return K(qe)(ht)}}function K(le){return $=le,R=0,le.length===0?O:C(le[R])}function C(le){return We;function We(ht){return S=I(),F=le,le.partial||(u.currentConstruct=le),le.name&&u.parser.constructs.disable.null.includes(le.name)?ye():le.tokenize.call(A?Object.assign(Object.create(u),A):u,c,re,ye)(ht)}}function re(le){return z(F,S),P}function ye(le){return S.restore(),++R<$.length?C($[R]):O}}}function E(z,A){z.resolveAll&&!i.includes(z)&&i.push(z),z.resolve&&Er(u.events,A,u.events.length-A,z.resolve(u.events.slice(A),u)),z.resolveTo&&(u.events=z.resolveTo(u.events,u))}function I(){const z=m(),A=u.previous,_=u.currentConstruct,M=u.events.length,P=Array.from(l);return{from:M,restore:O};function O(){n=z,u.previous=A,u.currentConstruct=_,u.events.length=M,l=P,D()}}function D(){n.line in s&&n.column<2&&(n.column=s[n.line],n.offset+=s[n.line]-1)}}function Y5(e,t){const r=t.start._index,n=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let o;if(r===s)o=[e[r].slice(n,i)];else{if(o=e.slice(r,s),n>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(n):o.shift()}i>0&&o.push(e[s].slice(0,i))}return o}function Q5(e,t){let r=-1;const n=[];let s;for(;++r<e.length;){const i=e[r];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,n.push(o)}return n.join("")}function Z5(e){const n={constructs:aP([J5,...(e||{}).extensions||[]]),content:s(pP),defined:[],document:s(gP),flow:s(D5),lazy:{},string:s(M5),text:s($5)};return n;function s(i){return o;function o(l){return X5(n,i,l)}}}function e3(e){for(;!Kw(e););return e}const Eg=/[\0\t\n\r]/g;function t3(){let e=1,t="",r=!0,n;return s;function s(i,o,l){const c=[];let u,d,h,f,p;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),h=0,t="",r&&(i.charCodeAt(0)===65279&&h++,r=void 0);h<i.length;){if(Eg.lastIndex=h,u=Eg.exec(i),f=u&&u.index!==void 0?u.index:i.length,p=i.charCodeAt(f),!u){t=i.slice(h);break}if(p===10&&h===f&&n)c.push(-3),n=void 0;else switch(n&&(c.push(-5),n=void 0),h<f&&(c.push(i.slice(h,f)),e+=f-h),p){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:n=!0,e=1}h=f+1}return l&&(n&&c.push(-5),t&&c.push(t),c.push(null)),c}}const r3=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function n3(e){return e.replace(r3,s3)}function s3(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const s=r.charCodeAt(1),i=s===120||s===88;return Hw(r.slice(i?2:1),i?16:10)}return mp(r)||e}const ek={}.hasOwnProperty;function i3(e,t,r){return typeof t!="string"&&(r=t,t=void 0),a3(r)(e3(Z5(r).document().write(t3()(e,t,!0))))}function a3(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Ne),autolinkProtocol:I,autolinkEmail:I,atxHeading:i(Y),blockQuote:i(xe),characterEscape:I,characterReference:I,codeFenced:i(qe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(qe,o),codeText:i(Te,o),codeTextData:I,data:I,codeFlowValue:I,definition:i(nr),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(q),hardBreakEscape:i(Z),hardBreakTrailing:i(Z),htmlFlow:i(ie,o),htmlFlowData:I,htmlText:i(ie,o),htmlTextData:I,image:i(Ge),label:o,link:i(Ne),listItem:i(In),listItemValue:f,listOrdered:i(Me,h),listUnordered:i(Me),paragraph:i(bt),reference:C,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(Y),strong:i(Za),thematicBreak:i(ae)},exit:{atxHeading:c(),atxHeadingSequence:N,autolink:c(),autolinkEmail:me,autolinkProtocol:ht,blockQuote:c(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:ye,characterReferenceMarkerNumeric:ye,characterReferenceValue:le,characterReference:We,codeFenced:c(b),codeFencedFence:v,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:D,codeIndented:c(x),codeText:c(P),codeTextData:D,data:D,definition:c(),definitionDestinationString:k,definitionLabelString:y,definitionTitleString:g,emphasis:c(),hardBreakEscape:c(A),hardBreakTrailing:c(A),htmlFlow:c(_),htmlFlowData:D,htmlText:c(M),htmlTextData:D,image:c($),label:F,labelText:R,lineEnding:z,link:c(O),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:re,resourceDestinationString:S,resourceTitleString:U,resource:K,setextHeading:c(E),setextHeadingLineSequence:T,setextHeadingText:j,strong:c(),thematicBreak:c()}};tk(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(L){let B={type:"root",children:[]};const X={stack:[B],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:r},ee=[];let he=-1;for(;++he<L.length;)if(L[he][1].type==="listOrdered"||L[he][1].type==="listUnordered")if(L[he][0]==="enter")ee.push(he);else{const Ke=ee.pop();he=s(L,Ke,he)}for(he=-1;++he<L.length;){const Ke=t[L[he][0]];ek.call(Ke,L[he][1].type)&&Ke[L[he][1].type].call(Object.assign({sliceSerialize:L[he][2].sliceSerialize},X),L[he][1])}if(X.tokenStack.length>0){const Ke=X.tokenStack[X.tokenStack.length-1];(Ke[1]||Tg).call(X,void 0,Ke[0])}for(B.position={start:Xr(L.length>0?L[0][1].start:{line:1,column:1,offset:0}),end:Xr(L.length>0?L[L.length-2][1].end:{line:1,column:1,offset:0})},he=-1;++he<t.transforms.length;)B=t.transforms[he](B)||B;return B}function s(L,B,X){let ee=B-1,he=-1,Ke=!1,Rn,Ar,wi,ki;for(;++ee<=X;){const It=L[ee];switch(It[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{It[0]==="enter"?he++:he--,ki=void 0;break}case"lineEndingBlank":{It[0]==="enter"&&(Rn&&!ki&&!he&&!wi&&(wi=ee),ki=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ki=void 0}if(!he&&It[0]==="enter"&&It[1].type==="listItemPrefix"||he===-1&&It[0]==="exit"&&(It[1].type==="listUnordered"||It[1].type==="listOrdered")){if(Rn){let fs=ee;for(Ar=void 0;fs--;){const Ir=L[fs];if(Ir[1].type==="lineEnding"||Ir[1].type==="lineEndingBlank"){if(Ir[0]==="exit")continue;Ar&&(L[Ar][1].type="lineEndingBlank",Ke=!0),Ir[1].type="lineEnding",Ar=fs}else if(!(Ir[1].type==="linePrefix"||Ir[1].type==="blockQuotePrefix"||Ir[1].type==="blockQuotePrefixWhitespace"||Ir[1].type==="blockQuoteMarker"||Ir[1].type==="listItemIndent"))break}wi&&(!Ar||wi<Ar)&&(Rn._spread=!0),Rn.end=Object.assign({},Ar?L[Ar][1].start:It[1].end),L.splice(Ar||ee,0,["exit",Rn,It[2]]),ee++,X++}if(It[1].type==="listItemPrefix"){const fs={type:"listItem",_spread:!1,start:Object.assign({},It[1].start),end:void 0};Rn=fs,L.splice(ee,0,["enter",fs,It[2]]),ee++,X++,wi=void 0,ki=!0}}}return L[B][1]._spread=Ke,X}function i(L,B){return X;function X(ee){l.call(this,L(ee),ee),B&&B.call(this,ee)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(L,B,X){this.stack[this.stack.length-1].children.push(L),this.stack.push(L),this.tokenStack.push([B,X||void 0]),L.position={start:Xr(B.start),end:void 0}}function c(L){return B;function B(X){L&&L.call(this,X),u.call(this,X)}}function u(L,B){const X=this.stack.pop(),ee=this.tokenStack.pop();if(ee)ee[0].type!==L.type&&(B?B.call(this,L,ee[0]):(ee[1]||Tg).call(this,L,ee[0]));else throw new Error("Cannot close `"+L.type+"` ("+sa({start:L.start,end:L.end})+"): its not open");X.position.end=Xr(L.end)}function d(){return sP(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(L){if(this.data.expectingFirstListItemValue){const B=this.stack[this.stack.length-2];B.start=Number.parseInt(this.sliceSerialize(L),10),this.data.expectingFirstListItemValue=void 0}}function p(){const L=this.resume(),B=this.stack[this.stack.length-1];B.lang=L}function m(){const L=this.resume(),B=this.stack[this.stack.length-1];B.meta=L}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L.replace(/(\r?\n|\r)$/g,"")}function y(L){const B=this.resume(),X=this.stack[this.stack.length-1];X.label=B,X.identifier=Ks(this.sliceSerialize(L)).toLowerCase()}function g(){const L=this.resume(),B=this.stack[this.stack.length-1];B.title=L}function k(){const L=this.resume(),B=this.stack[this.stack.length-1];B.url=L}function N(L){const B=this.stack[this.stack.length-1];if(!B.depth){const X=this.sliceSerialize(L).length;B.depth=X}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function T(L){const B=this.stack[this.stack.length-1];B.depth=this.sliceSerialize(L).codePointAt(0)===61?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function I(L){const X=this.stack[this.stack.length-1].children;let ee=X[X.length-1];(!ee||ee.type!=="text")&&(ee=J(),ee.position={start:Xr(L.start),end:void 0},X.push(ee)),this.stack.push(ee)}function D(L){const B=this.stack.pop();B.value+=this.sliceSerialize(L),B.position.end=Xr(L.end)}function z(L){const B=this.stack[this.stack.length-1];if(this.data.atHardBreak){const X=B.children[B.children.length-1];X.position.end=Xr(L.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(B.type)&&(I.call(this,L),D.call(this,L))}function A(){this.data.atHardBreak=!0}function _(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L}function M(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L}function P(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L}function O(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const B=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=B,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function $(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const B=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=B,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function R(L){const B=this.sliceSerialize(L),X=this.stack[this.stack.length-2];X.label=n3(B),X.identifier=Ks(B).toLowerCase()}function F(){const L=this.stack[this.stack.length-1],B=this.resume(),X=this.stack[this.stack.length-1];if(this.data.inReference=!0,X.type==="link"){const ee=L.children;X.children=ee}else X.alt=B}function S(){const L=this.resume(),B=this.stack[this.stack.length-1];B.url=L}function U(){const L=this.resume(),B=this.stack[this.stack.length-1];B.title=L}function K(){this.data.inReference=void 0}function C(){this.data.referenceType="collapsed"}function re(L){const B=this.resume(),X=this.stack[this.stack.length-1];X.label=B,X.identifier=Ks(this.sliceSerialize(L)).toLowerCase(),this.data.referenceType="full"}function ye(L){this.data.characterReferenceType=L.type}function le(L){const B=this.sliceSerialize(L),X=this.data.characterReferenceType;let ee;X?(ee=Hw(B,X==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ee=mp(B);const he=this.stack[this.stack.length-1];he.value+=ee}function We(L){const B=this.stack.pop();B.position.end=Xr(L.end)}function ht(L){D.call(this,L);const B=this.stack[this.stack.length-1];B.url=this.sliceSerialize(L)}function me(L){D.call(this,L);const B=this.stack[this.stack.length-1];B.url="mailto:"+this.sliceSerialize(L)}function xe(){return{type:"blockquote",children:[]}}function qe(){return{type:"code",lang:null,meta:null,value:""}}function Te(){return{type:"inlineCode",value:""}}function nr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function q(){return{type:"emphasis",children:[]}}function Y(){return{type:"heading",depth:0,children:[]}}function Z(){return{type:"break"}}function ie(){return{type:"html",value:""}}function Ge(){return{type:"image",title:null,url:"",alt:null}}function Ne(){return{type:"link",title:null,url:"",children:[]}}function Me(L){return{type:"list",ordered:L.type==="listOrdered",start:null,spread:L._spread,children:[]}}function In(L){return{type:"listItem",spread:L._spread,checked:null,children:[]}}function bt(){return{type:"paragraph",children:[]}}function Za(){return{type:"strong",children:[]}}function J(){return{type:"text",value:""}}function ae(){return{type:"thematicBreak"}}}function Xr(e){return{line:e.line,column:e.column,offset:e.offset}}function tk(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?tk(e,n):o3(e,n)}}function o3(e,t){let r;for(r in t)if(ek.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function Tg(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+sa({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+sa({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+sa({start:t.start,end:t.end})+") is still open")}function l3(e){const t=this;t.parser=r;function r(n){return i3(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function c3(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function u3(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function d3(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function h3(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function f3(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function p3(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),s=xi(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let o,l=e.footnoteCounts.get(n);l===void 0?(l=0,e.footnoteOrder.push(n),o=e.footnoteOrder.length):o=i+1,l+=1,e.footnoteCounts.set(n,l);const c={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+s,id:r+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function m3(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function g3(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function rk(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=n:s.push({type:"text",value:n}),s}function x3(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return rk(e,t);const s={src:xi(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function y3(e,t){const r={src:xi(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function v3(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function b3(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return rk(e,t);const s={href:xi(n.url||"")};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function w3(e,t){const r={href:xi(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function k3(e,t,r){const n=e.all(t),s=r?j3(r):nk(t),i={},o=[];if(typeof t.checked=="boolean"){const d=n[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},n.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<n.length;){const d=n[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?o.push(...d.children):o.push(d)}const c=n[n.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,u),e.applyData(t,u)}function j3(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=nk(r[n])}return t}function nk(e){const t=e.spread;return t??e.children.length>1}function S3(e,t){const r={},n=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++s<n.length;){const o=n[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,i),e.applyData(t,i)}function N3(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function _3(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function C3(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function E3(e,t){const r=e.all(t),n=r.shift(),s=[];if(n){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],o),s.push(o)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},l=dp(t.children[1]),c=Mw(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function T3(e,t,r){const n=r?r.children:void 0,i=(n?n.indexOf(t):1)===0?"th":"td",o=r&&r.type==="table"?r.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],f={},p=o?o[c]:void 0;p&&(f.align=p);let m={type:"element",tagName:i,properties:f,children:[]};h&&(m.children=e.all(h),e.patch(h,m),m=e.applyData(h,m)),u.push(m)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function P3(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const Pg=9,Ag=32;function A3(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),s=0;const i=[];for(;n;)i.push(Ig(t.slice(s,n.index),s>0,!0),n[0]),s=n.index+n[0].length,n=r.exec(t);return i.push(Ig(t.slice(s),s>0,!1)),i.join("")}function Ig(e,t,r){let n=0,s=e.length;if(t){let i=e.codePointAt(n);for(;i===Pg||i===Ag;)n++,i=e.codePointAt(n)}if(r){let i=e.codePointAt(s-1);for(;i===Pg||i===Ag;)s--,i=e.codePointAt(s-1)}return s>n?e.slice(n,s):""}function I3(e,t){const r={type:"text",value:A3(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function R3(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const D3={blockquote:c3,break:u3,code:d3,delete:h3,emphasis:f3,footnoteReference:p3,heading:m3,html:g3,imageReference:x3,image:y3,inlineCode:v3,linkReference:b3,link:w3,listItem:k3,list:S3,paragraph:N3,root:_3,strong:C3,table:E3,tableCell:P3,tableRow:T3,text:I3,thematicBreak:R3,toml:ko,yaml:ko,definition:ko,footnoteDefinition:ko};function ko(){}const sk=-1,oc=0,aa=1,Cl=2,yp=3,vp=4,bp=5,wp=6,ik=7,ak=8,Rg=typeof self=="object"?self:globalThis,L3=(e,t)=>{const r=(s,i)=>(e.set(i,s),s),n=s=>{if(e.has(s))return e.get(s);const[i,o]=t[s];switch(i){case oc:case sk:return r(o,s);case aa:{const l=r([],s);for(const c of o)l.push(n(c));return l}case Cl:{const l=r({},s);for(const[c,u]of o)l[n(c)]=n(u);return l}case yp:return r(new Date(o),s);case vp:{const{source:l,flags:c}=o;return r(new RegExp(l,c),s)}case bp:{const l=r(new Map,s);for(const[c,u]of o)l.set(n(c),n(u));return l}case wp:{const l=r(new Set,s);for(const c of o)l.add(n(c));return l}case ik:{const{name:l,message:c}=o;return r(new Rg[l](c),s)}case ak:return r(BigInt(o),s);case"BigInt":return r(Object(BigInt(o)),s);case"ArrayBuffer":return r(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return r(new DataView(l),o)}}return r(new Rg[i](o),s)};return n},Dg=e=>L3(new Map,e)(0),ms="",{toString:O3}={},{keys:M3}=Object,Ri=e=>{const t=typeof e;if(t!=="object"||!e)return[oc,t];const r=O3.call(e).slice(8,-1);switch(r){case"Array":return[aa,ms];case"Object":return[Cl,ms];case"Date":return[yp,ms];case"RegExp":return[vp,ms];case"Map":return[bp,ms];case"Set":return[wp,ms];case"DataView":return[aa,r]}return r.includes("Array")?[aa,r]:r.includes("Error")?[ik,r]:[Cl,r]},jo=([e,t])=>e===oc&&(t==="function"||t==="symbol"),$3=(e,t,r,n)=>{const s=(o,l)=>{const c=n.push(o)-1;return r.set(l,c),c},i=o=>{if(r.has(o))return r.get(o);let[l,c]=Ri(o);switch(l){case oc:{let d=o;switch(c){case"bigint":l=ak,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([sk],o)}return s([l,d],o)}case aa:{if(c){let f=o;return c==="DataView"?f=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(o)),s([c,[...f]],o)}const d=[],h=s([l,d],o);for(const f of o)d.push(i(f));return h}case Cl:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return i(o.toJSON());const d=[],h=s([l,d],o);for(const f of M3(o))(e||!jo(Ri(o[f])))&&d.push([i(f),i(o[f])]);return h}case yp:return s([l,o.toISOString()],o);case vp:{const{source:d,flags:h}=o;return s([l,{source:d,flags:h}],o)}case bp:{const d=[],h=s([l,d],o);for(const[f,p]of o)(e||!(jo(Ri(f))||jo(Ri(p))))&&d.push([i(f),i(p)]);return h}case wp:{const d=[],h=s([l,d],o);for(const f of o)(e||!jo(Ri(f)))&&d.push(i(f));return h}}const{message:u}=o;return s([l,{name:c,message:u}],o)};return i},Lg=(e,{json:t,lossy:r}={})=>{const n=[];return $3(!(t||r),!!t,new Map,n)(e),n},El=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Dg(Lg(e,t)):structuredClone(e):(e,t)=>Dg(Lg(e,t));function F3(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function z3(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function U3(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||F3,n=e.options.footnoteBackLabel||z3,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),f=xi(h.toLowerCase());let p=0;const m=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++p<=v;){m.length>0&&m.push({type:"text",value:" "});let y=typeof r=="string"?r:r(c,p);typeof y=="string"&&(y={type:"text",value:y}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(c,p),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const b=d[d.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const y=b.children[b.children.length-1];y&&y.type==="text"?y.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...m)}else d.push(...m);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(d,!0)};e.patch(u,x),l.push(x)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...El(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const ok=(function(e){if(e==null)return W3;if(typeof e=="function")return lc(e);if(typeof e=="object")return Array.isArray(e)?B3(e):V3(e);if(typeof e=="string")return H3(e);throw new Error("Expected function, string, or object as test")});function B3(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=ok(e[r]);return lc(n);function n(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function V3(e){const t=e;return lc(r);function r(n){const s=n;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function H3(e){return lc(t);function t(r){return r&&r.type===e}}function lc(e){return t;function t(r,n,s){return!!(q3(r)&&e.call(this,r,typeof n=="number"?n:void 0,s||void 0))}}function W3(){return!0}function q3(e){return e!==null&&typeof e=="object"&&"type"in e}const lk=[],G3=!0,Og=!1,K3="skip";function J3(e,t,r,n){let s;typeof t=="function"&&typeof r!="function"?(n=r,r=t):s=t;const i=ok(s),o=n?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=lk,m,v,b;if((!t||i(c,u,d[d.length-1]||void 0))&&(p=X3(r(c,d)),p[0]===Og))return p;if("children"in c&&c.children){const x=c;if(x.children&&p[0]!==K3)for(v=(n?x.children.length:-1)+o,b=d.concat(x);v>-1&&v<x.children.length;){const y=x.children[v];if(m=l(y,v,b)(),m[0]===Og)return m;v=typeof m[1]=="number"?m[1]:v+o}}return p}}}function X3(e){return Array.isArray(e)?e:typeof e=="number"?[G3,e]:e==null?lk:[e]}function ck(e,t,r,n){let s,i,o;typeof t=="function"&&typeof r!="function"?(i=void 0,o=t,s=r):(i=t,o=r,s=n),J3(e,i,l,s);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return o(c,h,d)}}const ah={}.hasOwnProperty,Y3={};function Q3(e,t){const r=t||Y3,n=new Map,s=new Map,i=new Map,o={...D3,...r.handlers},l={all:u,applyData:eA,definitionById:n,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:c,options:r,patch:Z3,wrap:rA};return ck(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?n:s,f=String(d.identifier).toUpperCase();h.has(f)||h.set(f,d)}}),l;function c(d,h){const f=d.type,p=l.handlers[f];if(ah.call(l.handlers,f)&&p)return p(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in d){const{children:v,...b}=d,x=El(b);return x.children=l.all(d),x}return El(d)}return(l.options.unknownHandler||tA)(l,d,h)}function u(d){const h=[];if("children"in d){const f=d.children;let p=-1;for(;++p<f.length;){const m=l.one(f[p],d);if(m){if(p&&f[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Mg(m.value)),!Array.isArray(m)&&m.type==="element")){const v=m.children[0];v&&v.type==="text"&&(v.value=Mg(v.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function Z3(e,t){e.position&&(t.position=OT(e))}function eA(e,t){let r=t;if(e&&e.data){const n=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const o="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:o}}r.type==="element"&&i&&Object.assign(r.properties,El(i)),"children"in r&&r.children&&s!==null&&s!==void 0&&(r.children=s)}return r}function tA(e,t){const r=t.data||{},n="value"in t&&!(ah.call(r,"hProperties")||ah.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rA(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function Mg(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function $g(e,t){const r=Q3(e,t),n=r.one(e,void 0),s=U3(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function nA(e,t){return e&&"run"in e?async function(r,n){const s=$g(r,{file:n,...t});await e.run(s,n)}:function(r,n){return $g(r,{file:n,...e||t})}}function Fg(e){if(e)throw e}var Go=Object.prototype.hasOwnProperty,uk=Object.prototype.toString,zg=Object.defineProperty,Ug=Object.getOwnPropertyDescriptor,Bg=function(t){return typeof Array.isArray=="function"?Array.isArray(t):uk.call(t)==="[object Array]"},Vg=function(t){if(!t||uk.call(t)!=="[object Object]")return!1;var r=Go.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Go.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var s;for(s in t);return typeof s>"u"||Go.call(t,s)},Hg=function(t,r){zg&&r.name==="__proto__"?zg(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},Wg=function(t,r){if(r==="__proto__")if(Go.call(t,r)){if(Ug)return Ug(t,r).value}else return;return t[r]},sA=function e(){var t,r,n,s,i,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(r in t)n=Wg(l,r),s=Wg(t,r),l!==s&&(d&&s&&(Vg(s)||(i=Bg(s)))?(i?(i=!1,o=n&&Bg(n)?n:[]):o=n&&Vg(n)?n:{},Hg(l,{name:r,newValue:e(d,o,s)})):typeof s<"u"&&Hg(l,{name:r,newValue:s}));return l};const cu=bh(sA);function oh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function iA(){const e=[],t={run:r,use:n};return t;function r(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...u){const d=e[++i];let h=-1;if(c){o(c);return}for(;++h<s.length;)(u[h]===null||u[h]===void 0)&&(u[h]=s[h]);s=u,d?aA(d,l)(...u):o(null,...u)}}function n(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function aA(e,t){let r;return n;function n(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&r)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(o,...l){r||(r=!0,t(o,...l))}function i(o){s(null,o)}}const yr={basename:oA,dirname:lA,extname:cA,join:uA,sep:"/"};function oA(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ja(e);let r=0,n=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){r=s+1;break}}else n<0&&(i=!0,n=s+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){r=s+1;break}}else o<0&&(i=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(n=s):(l=-1,n=o));return r===n?n=o:n<0&&(n=e.length),e.slice(r,n)}function lA(e){if(Ja(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function cA(e){Ja(e);let t=e.length,r=-1,n=0,s=-1,i=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){n=t+1;break}continue}r<0&&(o=!0,r=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||r<0||i===0||i===1&&s===r-1&&s===n+1?"":e.slice(s,r)}function uA(...e){let t=-1,r;for(;++t<e.length;)Ja(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":dA(r)}function dA(e){Ja(e);const t=e.codePointAt(0)===47;let r=hA(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function hA(e,t){let r="",n=0,s=-1,i=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(c=r.lastIndexOf("/"),c!==r.length-1){c<0?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),s=o,i=0;continue}}else if(r.length>0){r="",n=0,s=o,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(s+1,o):r=e.slice(s+1,o),n=o-s-1;s=o,i=0}else l===46&&i>-1?i++:i=-1}return r}function Ja(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const fA={cwd:pA};function pA(){return"/"}function lh(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function mA(e){if(typeof e=="string")e=new URL(e);else if(!lh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return gA(e)}function gA(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const uu=["history","path","basename","stem","extname","dirname"];class dk{constructor(t){let r;t?lh(t)?r={path:t}:typeof t=="string"||xA(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":fA.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<uu.length;){const i=uu[n];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let s;for(s in r)uu.includes(s)||(this[s]=r[s])}get basename(){return typeof this.path=="string"?yr.basename(this.path):void 0}set basename(t){hu(t,"basename"),du(t,"basename"),this.path=yr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?yr.dirname(this.path):void 0}set dirname(t){qg(this.basename,"dirname"),this.path=yr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?yr.extname(this.path):void 0}set extname(t){if(du(t,"extname"),qg(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=yr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){lh(t)&&(t=mA(t)),hu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?yr.basename(this.path,this.extname):void 0}set stem(t){hu(t,"stem"),du(t,"stem"),this.path=yr.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const s=this.message(t,r,n);throw s.fatal=!0,s}info(t,r,n){const s=this.message(t,r,n);return s.fatal=void 0,s}message(t,r,n){const s=new dt(t,r,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function du(e,t){if(e&&e.includes(yr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+yr.sep+"`")}function hu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function qg(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function xA(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const yA=(function(e){const n=this.constructor.prototype,s=n[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,n),i}),vA={}.hasOwnProperty;class kp extends yA{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=iA()}copy(){const t=new kp;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(cu(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(mu("data",this.frozen),this.namespace[t]=r,this):vA.call(this.namespace,t)&&this.namespace[t]||void 0:t?(mu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const s=r.call(t,...n);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=So(t),n=this.parser||this.Parser;return fu("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),fu("process",this.parser||this.Parser),pu("process",this.compiler||this.Compiler),r?s(void 0,r):new Promise(s);function s(i,o){const l=So(t),c=n.parse(l);n.run(c,l,function(d,h,f){if(d||!h||!f)return u(d);const p=h,m=n.stringify(p,f);kA(m)?f.value=m:f.result=m,u(d,f)});function u(d,h){d||!h?o(d):i?i(h):r(void 0,h)}}}processSync(t){let r=!1,n;return this.freeze(),fu("processSync",this.parser||this.Parser),pu("processSync",this.compiler||this.Compiler),this.process(t,s),Kg("processSync","process",r),n;function s(i,o){r=!0,Fg(i),n=o}}run(t,r,n){Gg(t),this.freeze();const s=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?i(void 0,n):new Promise(i);function i(o,l){const c=So(r);s.run(t,c,u);function u(d,h,f){const p=h||t;d?l(d):o?o(p):n(void 0,p,f)}}}runSync(t,r){let n=!1,s;return this.run(t,r,i),Kg("runSync","run",n),s;function i(o,l){Fg(o),s=l,n=!0}}stringify(t,r){this.freeze();const n=So(r),s=this.compiler||this.Compiler;return pu("stringify",s),Gg(t),s(t,n)}use(t,...r){const n=this.attachers,s=this.namespace;if(mu("use",this.frozen),t!=null)if(typeof t=="function")c(t,r);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=cu(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];i(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,f=-1;for(;++h<n.length;)if(n[h][0]===u){f=h;break}if(f===-1)n.push([u,...d]);else if(d.length>0){let[p,...m]=d;const v=n[f][1];oh(v)&&oh(p)&&(p=cu(!0,v,p)),n[f]=[u,p,...m]}}}}const bA=new kp().freeze();function fu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function pu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function mu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Gg(e){if(!oh(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Kg(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function So(e){return wA(e)?e:new dk(e)}function wA(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function kA(e){return typeof e=="string"||jA(e)}function jA(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const SA="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Jg=[],Xg={allowDangerousHtml:!0},NA=/^(https?|ircs?|mailto|xmpp)$/i,_A=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function jp(e){const t=CA(e),r=EA(e);return TA(t.runSync(t.parse(r),r),e)}function CA(e){const t=e.rehypePlugins||Jg,r=e.remarkPlugins||Jg,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Xg}:Xg;return bA().use(l3).use(r).use(nA,n).use(t)}function EA(e){const t=e.children||"",r=new dk;return typeof t=="string"&&(r.value=t),r}function TA(e,t){const r=t.allowedElements,n=t.allowElement,s=t.components,i=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||PA;for(const d of _A)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+SA+d.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),ck(e,u),UT(e,{Fragment:a.Fragment,components:s,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function u(d,h,f){if(d.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let p;for(p in au)if(Object.hasOwn(au,p)&&Object.hasOwn(d.properties,p)){const m=d.properties[p],v=au[p];(v===null||v.includes(d.tagName))&&(d.properties[p]=c(String(m||""),p,d))}}if(d.type==="element"){let p=r?!r.includes(d.tagName):i?i.includes(d.tagName):!1;if(!p&&n&&typeof h=="number"&&(p=!n(d,h,f)),p&&f&&typeof h=="number")return l&&d.children?f.children.splice(h,1,...d.children):f.children.splice(h,1),h}}}function PA(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||r!==-1&&t>r||n!==-1&&t>n||NA.test(e.slice(0,t))?e:""}function AA({strategicDirectives:e,expandedSD:t,setExpandedSD:r,onUpdateChecklist:n,onSelectSD:s,copiedId:i,setCopiedId:o,currentSD:l,onSetActiveSD:c,onUpdateStatus:u,isCompact:d=!1}){const h=Cn(),[f,p]=w.useState({}),[m,v]=w.useState(new Set),[b,x]=w.useState(new Set),[y,g]=w.useState(null),k=_=>{r(t===_?null:_)},N=_=>{navigator.clipboard.writeText(_),o(_),setTimeout(()=>o(null),2e3)},j=_=>{if(!_||!_.id){console.error("Invalid SD for navigation:",_);return}try{h(`/strategic-directives/${_.id}`)}catch(M){console.error("Navigation error:",M)}},T=(_,M)=>{const P=e.find(O=>O.id===_);P&&P.checklist&&P.checklist[M]&&n(_,M,!P.checklist[M].checked)},E=_=>{switch(_==null?void 0:_.toLowerCase()){case"critical":return"border-l-4 border-l-red-500";case"high":return"border-l-4 border-l-orange-500";case"medium":return"border-l-4 border-l-yellow-500";case"low":return"border-l-4 border-l-gray-400";default:return"border-l-4 border-l-gray-300"}},I=_=>_===100?"bg-gradient-to-r from-green-400 to-green-600 animate-pulse":_>=76?"bg-gradient-to-r from-blue-400 to-blue-600":_>=51?"bg-gradient-to-r from-yellow-400 to-yellow-600":_>=26?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gradient-to-r from-red-400 to-red-600",D=_=>{const M=_==null?void 0:_.toLowerCase();return M==="archived"||M==="completed"||M==="complete"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 transition-all duration-200 hover:scale-105",children:[a.jsx(ii,{className:"w-3 h-3 mr-1"}),"Archived"]}):M==="draft"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 transition-all duration-200 hover:scale-105",children:[a.jsx(Yd,{className:"w-3 h-3 mr-1"}),"Draft"]}):M==="on_hold"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400 transition-all duration-200 hover:scale-105",children:[a.jsx(zt,{className:"w-3 h-3 mr-1"}),"On Hold"]}):M==="cancelled"?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 transition-all duration-200 hover:scale-105",children:[a.jsx(rr,{className:"w-3 h-3 mr-1"}),"Cancelled"]}):a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 transition-all duration-200 hover:scale-105",children:[a.jsx(os,{className:"w-3 h-3 mr-1 animate-pulse"}),"Active"]})},z=async(_,M=!1)=>{if(!(!M&&f[_]&&f[_].summary)&&!m.has(_)){v(P=>new Set(P).add(_));try{const P=`/api/strategic-directives/${_}/backlog-summary${M?"?force_refresh=true":""}`,O=await fetch(P),$=await O.json();O.ok?p(R=>({...R,[_]:{...$,timestamp:Date.now()}})):(console.warn(`Failed to fetch backlog summary for ${_}:`,$.error),p(R=>({...R,[_]:{summary:$.fallback||"Backlog summary unavailable.",itemCount:0,cached:!1}})))}catch(P){console.error("Error fetching backlog summary:",P),p(O=>({...O,[_]:{summary:"Unable to load backlog summary.",itemCount:0,cached:!1}}))}finally{v(P=>{const O=new Set(P);return O.delete(_),O})}}},A=_=>{console.log("Generate stories for:",_)};return e.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[a.jsx(He,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No strategic directives found"})]}):a.jsx("div",{className:"space-y-4",children:e.map(_=>{var M,P,O;return a.jsx("div",{className:`group bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${E(_.priority)}`,children:a.jsxs("div",{className:`${d?"p-3":"p-6"} relative`,children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:()=>k(_.id),className:"mr-2 p-1 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/20 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 transform hover:scale-105","aria-label":t===_.id?"Collapse":"Expand",children:a.jsx(pt,{className:`w-4 h-4 transition-transform duration-200 ease-in-out ${t===_.id?"rotate-90":""}`})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{className:"inline-flex items-center group",children:[a.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-mono text-lg font-bold",children:_.id}),a.jsx("button",{onClick:$=>{$.stopPropagation(),N(_.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-2",title:"Copy ID",children:i===_.id?a.jsx(na,{className:"w-3 h-3 text-green-500"}):a.jsx(ep,{className:"w-3 h-3 text-gray-500"})})]})}),a.jsx("h2",{className:`${d?"text-base":"text-xl"} font-semibold text-gray-900 dark:text-white ${d?"line-clamp-2":""}`,children:_.title||"Untitled"})]})]}),a.jsxs("div",{className:`${d?"mt-2":"mt-4"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("span",{className:`${d?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 flex items-center`,children:["Progress",_.progressTrend&&(_.progressTrend>0?a.jsx(as,{className:"w-3 h-3 ml-1 text-green-500"}):a.jsx(cn,{className:"w-3 h-3 ml-1 text-red-500"}))]}),a.jsxs("span",{className:`${d?"text-xs":"text-sm"} font-semibold flex items-center`,children:[_.progress,"%",_.progress===100&&a.jsx(Ga,{className:"w-3 h-3 ml-1 text-green-500 animate-pulse"})]})]}),a.jsx("div",{className:`w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${d?"h-2":"h-3"} shadow-inner`,children:a.jsx("div",{className:`${d?"h-2":"h-3"} rounded-full transition-all duration-1000 ease-out ${I(_.progress)}`,style:{width:`${_.progress}%`,boxShadow:_.progress===100?"0 0 10px rgba(34, 197, 94, 0.5)":"none"}})})]})]}),a.jsxs("div",{className:`${d?"ml-2":"ml-4"} flex flex-col items-end ${d?"space-y-1":"space-y-2"}`,children:[a.jsx("div",{className:`flex ${d?"space-x-1":"space-x-2"}`,children:l===_.id?a.jsxs("button",{disabled:!0,className:`${d?"px-2 py-1 text-xs":"px-4 py-2"} bg-green-500 text-white rounded flex items-center`,children:[a.jsx(Zn,{className:`${d?"w-3 h-3":"w-4 h-4"} mr-1`}),d?" Working":" Working On"]}):a.jsxs("button",{onClick:()=>c&&c(_.id),className:`${d?"px-2 py-1 text-xs":"px-4 py-2"} bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center`,children:[a.jsx(Zn,{className:`${d?"w-3 h-3":"w-4 h-4"} ${d?"":"mr-1"} animate-pulse`}),d?"Work On":"Work On This"]})}),a.jsxs("div",{className:`${d?"mt-2 gap-1":"mt-3 gap-2"} flex flex-wrap items-end justify-end`,children:[a.jsxs("div",{className:"relative inline-block",children:[a.jsxs("button",{onClick:$=>{$.stopPropagation(),g(y===_.id?null:_.id)},className:"group flex items-center gap-1 hover:opacity-80 transition-opacity",children:[D(_.status),a.jsx(Yd,{className:"w-3 h-3 text-gray-500 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),y===_.id&&a.jsx("div",{className:"absolute left-0 mt-1 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:a.jsx("div",{className:"py-1",children:["active","draft","on_hold","cancelled","archived"].map($=>a.jsxs("button",{onClick:R=>{R.stopPropagation(),u&&u(_.id,$),g(null)},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${_.status===$?"bg-gray-50 dark:bg-gray-700/50 text-primary-600":"text-gray-700 dark:text-gray-200"}`,children:[a.jsx("span",{className:"capitalize",children:$}),_.status===$&&a.jsx(na,{className:"w-3 h-3"})]},$))})})]}),_.targetApplication&&a.jsx("span",{className:`${d?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`,children:_.targetApplication.replace("_"," ")}),a.jsxs("button",{onClick:$=>{$.stopPropagation(),h(`/backlog?sd=${_.sd_id||_.id}`)},className:`flex items-center ${d?"px-2 py-0.5 text-xs":"px-2 py-1 text-xs"} transition-all duration-200 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded`,title:`${_.total_backlog_items||_.total_items||_.backlog_count||0} backlog items`,children:[a.jsx(ii,{className:`${d?"w-3 h-3":"w-4 h-4"}`}),a.jsx("span",{className:"ml-1 text-xs",children:_.total_backlog_items||_.total_items||_.backlog_count||0})]}),(_.priority||_.rolled_triage)&&a.jsx("span",{className:`${d?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`,children:d?((P=(M=_.priority)==null?void 0:M[0])==null?void 0:P.toUpperCase())||((O=_.rolled_triage)==null?void 0:O[0]):`${_.priority||_.rolled_triage}`}),_.category&&a.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:_.category})]}),_.checklist&&_.checklist.length>0&&a.jsx("div",{className:"text-sm text-gray-600",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(na,{className:"w-4 h-4 mr-1"}),_.checklist.filter($=>$.checked).length,"/",_.checklist.length]})})]})]}),_.hasBacklogItems&&a.jsxs("div",{className:`${d?"mt-3":"mt-4"} pt-3 border-t border-gray-200 dark:border-gray-700`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("button",{onClick:()=>{x($=>{const R=new Set($);return R.has(_.id)?R.delete(_.id):R.add(_.id),R})},className:`${d?"text-xs":"text-sm"} font-medium text-gray-700 dark:text-gray-300 flex items-center hover:text-purple-600 dark:hover:text-purple-400 transition-colors`,children:[b.has(_.id)?a.jsx(pt,{className:"w-4 h-4 mr-1"}):a.jsx(Lt,{className:"w-4 h-4 mr-1"}),a.jsx(Jd,{className:"w-4 h-4 mr-1"}),"Backlog Overview"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[f[_.id]&&!b.has(_.id)&&a.jsx("button",{onClick:()=>z(_.id,!0),disabled:m.has(_.id),className:`p-1 text-gray-500 hover:text-purple-600 dark:text-gray-400 dark:hover:text-purple-400 transition-colors ${m.has(_.id)?"opacity-50 cursor-not-allowed":""}`,title:"Refresh summary",children:a.jsx(tr,{className:`w-4 h-4 ${m.has(_.id)?"animate-spin":""}`})}),a.jsx("span",{className:`${d?"text-xs":"text-sm"} bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-2 py-1 rounded-full`,children:_.backlogItemCount})]})]}),!b.has(_.id)&&a.jsx(a.Fragment,{children:f[_.id]?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:`${d?"text-xs":"text-sm"} text-gray-700 dark:text-gray-300 leading-relaxed`,children:f[_.id].summary}),(f[_.id].generated_at||f[_.id].from_database)&&a.jsx("div",{className:"flex items-center justify-between mt-2",children:a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[f[_.id].from_database&&a.jsxs(a.Fragment,{children:[a.jsx(qa,{className:"w-3 h-3 mr-1"}),"Stored in database"]}),f[_.id].generated_at&&a.jsxs("span",{className:"ml-2",children:["Generated: ",new Date(f[_.id].generated_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})}),a.jsxs("div",{className:`flex items-center space-x-2 ${d?"text-xs":"text-sm"}`,children:[a.jsxs("span",{className:"text-red-600 dark:text-red-400",children:[" ",_.h_count," High"]}),a.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[" ",_.m_count," Medium"]}),a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[" ",_.l_count," Low"]}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",_.future_count," Future"]})]})]}):a.jsx("div",{className:"space-y-2",children:m.has(_.id)?a.jsxs("div",{className:`${d?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 flex items-center`,children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-purple-500 mr-2"}),"Generating AI summary..."]}):a.jsxs("button",{onClick:()=>z(_.id),className:`inline-flex items-center ${d?"text-xs px-2 py-1":"text-sm px-3 py-1"} bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/30 dark:hover:bg-purple-800/30 text-purple-800 dark:text-purple-300 rounded transition-colors`,children:[a.jsx(Jd,{className:"w-3 h-3 mr-1"}),"Generate AI Summary"]})})})]}),t===_.id&&a.jsxs("div",{className:"mt-6 border-t pt-6",children:[(_.h_count>0||_.m_count>0||_.l_count>0||_.future_count>0)&&a.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[a.jsx(He,{className:"w-4 h-4 mr-2 text-blue-600"}),"Backlog Details"]}),a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["H: ",_.h_count||0,"  M: ",_.m_count||0,"  L: ",_.l_count||0,_.future_count>0&&`  Future: ${_.future_count}`,_.must_have_count>0&&`  Must-have: ${_.must_have_count}`]})]})}),_.checklist&&_.checklist.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[a.jsx(Zn,{className:"w-5 h-5 mr-2"}),"Requirements Checklist"]}),a.jsxs("div",{className:"space-y-2",children:[_.checklist.slice(0,5).map(($,R)=>a.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:$.checked,onChange:()=>T(_.id,R),className:"mr-3 w-4 h-4 text-primary-600 rounded"}),a.jsx("span",{className:`${$.checked?"line-through text-gray-500":""}`,children:$.text})]},R)),_.checklist&&_.checklist.length>5&&a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",_.checklist.length-5," more items"]})]})]}),a.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Content Preview"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded max-h-64 overflow-y-auto",children:a.jsx(jp,{children:_.content.substring(0,500)+(_.content.length>500?"...":"")})}),a.jsx("span",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"Full content available in detail view"})]})]}),t===_.id&&a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-wrap gap-2 justify-between items-center",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.storyCount>0?a.jsxs(bl,{to:`/stories/${_.sdKey}`,className:"inline-flex items-center px-3 py-1.5 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:[" View ",_.storyCount," Stories"]}):a.jsx("button",{onClick:()=>A(_.sdKey),className:"inline-flex items-center px-3 py-1.5 text-sm text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 border border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-all duration-200",children:" Generate Stories"}),_.checklist&&_.checklist.length>0&&a.jsxs("button",{onClick:()=>j(_),className:"inline-flex items-center px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200",children:[" View All ",_.checklist.length," Tasks"]}),a.jsx("button",{onClick:()=>j(_),className:"inline-flex items-center px-3 py-1.5 text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 border border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all duration-200",children:" Full Document"})]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated ",new Date(_.updatedAt).toLocaleDateString()]})]})})]})},_.id)})})}function IA({sd:e,onUpdateChecklist:t}){const r=Cn(),n=s=>{e&&e.checklist&&e.checklist[s]&&t(e.id,s,!e.checklist[s].checked)};return e?a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>r("/strategic-directives"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[a.jsx(pt,{className:"w-4 h-4 mr-1"}),"Back to List"]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:[e.id,": ",e.title||"Untitled"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:e.metadata&&Object.entries(e.metadata).map(([s,i])=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:typeof i=="object"?JSON.stringify(i,null,2):String(i)})]},s))}),a.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:a.jsx(jp,{children:e.content||"No content available"})}),e.checklist&&e.checklist.length>0&&a.jsxs("div",{className:"border-t pt-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Requirements Checklist"}),a.jsx("div",{className:"space-y-2",children:e.checklist.map((s,i)=>a.jsxs("label",{className:"flex items-start p-3 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.checked,onChange:()=>n(i),className:"mt-1 mr-3 w-5 h-5 text-primary-600 rounded focus:ring-primary-500"}),a.jsx("span",{className:`flex-1 ${s.checked?"line-through text-gray-500":""}`,children:s.text})]},i))})]}),e.prds&&e.prds.length>0&&a.jsxs("div",{className:"border-t pt-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(He,{className:"w-5 h-5 mr-2 text-blue-600"}),"Product Requirements Documents (",e.prds.length,")"]}),a.jsx("div",{className:"space-y-4",children:e.prds.map(s=>a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:s.title}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["ID: ",s.id]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.status==="approved"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.status}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.priority==="high"?"bg-red-100 text-red-800":s.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:s.priority})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("strong",{children:"Phase:"})," ",s.phase]}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("strong",{children:"Progress:"})," ",s.progress,"%"]})]}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("strong",{children:"Created:"})," ",new Date(s.createdAt).toLocaleDateString()]})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:a.jsxs("button",{onClick:()=>r(`/prds/${s.id}`),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center",children:["View Full PRD ",a.jsx(pt,{className:"w-4 h-4 ml-1"})]})})]},s.id))})]}),e.executionSequences&&e.executionSequences.length>0&&a.jsxs("div",{className:"border-t pt-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(Zn,{className:"w-5 h-5 mr-2 text-green-600"}),"Execution Sequence Steps (",e.executionSequences.length,")"]}),a.jsx("div",{className:"space-y-3",children:e.executionSequences.map(s=>a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${s.status==="completed"?"bg-green-500 text-white":s.status==="in_progress"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:s.sequenceNumber}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:s.description}),a.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-green-700 dark:text-green-300",children:[a.jsxs("span",{children:[a.jsx("strong",{children:"Executor:"})," ",s.executorRole]}),s.completedAt&&a.jsxs("span",{children:[a.jsx("strong",{children:"Completed:"})," ",new Date(s.completedAt).toLocaleDateString()]})]})]})]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.status})]})},s.id))})]})]})]}):a.jsx("div",{className:"p-6 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading strategic directive..."})]})})}const RA=()=>{const[e,t]=w.useState(()=>{const d=localStorage.getItem("sd-sort-levels");return d?JSON.parse(d):[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}]}),[r,n]=w.useState(()=>{const d=localStorage.getItem("sd-saved-sorts");return d?JSON.parse(d):{"Strategic Priority":[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],Default:[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],"WSJF Priority":[{field:"wsjf_score",direction:"desc",label:"WSJF Score"},{field:"status",direction:"asc",label:"Status"},{field:"created_at",direction:"desc",label:"Created Date"}],"Progress Tracking":[{field:"progress",direction:"asc",label:"Progress"},{field:"priority",direction:"desc",label:"Priority"},{field:"title",direction:"asc",label:"Title"}],"Recent Activity":[{field:"updated_at",direction:"desc",label:"Last Updated"},{field:"status",direction:"asc",label:"Status"}]}});return w.useEffect(()=>{localStorage.setItem("sd-sort-levels",JSON.stringify(e))},[e]),w.useEffect(()=>{localStorage.setItem("sd-saved-sorts",JSON.stringify(r))},[r]),{sortLevels:e,setSortLevels:t,savedSorts:r,setSavedSorts:n,resetToStrategicPriority:()=>{t([{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}]),n({"Strategic Priority":[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],Default:[{field:"sequenceRank",direction:"asc",label:"Sequence Rank"}],"WSJF Priority":[{field:"wsjf_score",direction:"desc",label:"WSJF Score"},{field:"status",direction:"asc",label:"Status"},{field:"created_at",direction:"desc",label:"Created Date"}],"Progress Tracking":[{field:"progress",direction:"asc",label:"Progress"},{field:"priority",direction:"desc",label:"Priority"},{field:"title",direction:"asc",label:"Title"}],"Recent Activity":[{field:"updated_at",direction:"desc",label:"Last Updated"},{field:"status",direction:"asc",label:"Status"}]})},addSortLevel:()=>{t([...e,{field:"priority",direction:"desc",label:"Priority"}])},removeSortLevel:d=>{t(e.filter((h,f)=>f!==d))},updateSortLevel:(d,h)=>{const f=[...e];f[d]={...f[d],...h},t(f)},loadPreset:d=>{const h=r[d];h&&t(h)},savePreset:d=>{n({...r,[d]:e})}}};function gu({strategicDirectives:e,onUpdateChecklist:t,onSetActiveSD:r,currentSD:n,isCompact:s,detailMode:i,onRefresh:o,onUpdateStatus:l}){const{id:c}=yf(),u=Cn(),[d,h]=w.useState("list"),[f,p]=w.useState(null),[m,v]=w.useState(null),[b,x]=w.useState(null),[y,g]=w.useState(()=>localStorage.getItem("sd-filter-migration-v2")?localStorage.getItem("sd-status-filter")||"active,draft":(localStorage.setItem("sd-filter-migration-v2","true"),localStorage.setItem("sd-status-filter","active,draft"),localStorage.setItem("sd-priority-filter","critical,high"),localStorage.setItem("sd-application-filter","EHG"),"active,draft")),[k,N]=w.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-priority-filter")||"critical,high"),[j,T]=w.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-application-filter")||"EHG"),[E,I]=w.useState(""),[D,z]=w.useState("all"),[A,_]=w.useState(!1),{sortLevels:M,setSortLevels:P,savedSorts:O,setSavedSorts:$,resetToStrategicPriority:R,addSortLevel:F,removeSortLevel:S,updateSortLevel:U,loadPreset:K,savePreset:C}=RA(),[re,ye]=w.useState(!1);w.useEffect(()=>{if(i&&c){console.log("Detail mode - Looking for SD with id:",c),console.log("Available SDs count:",e.length),e.length>0&&console.log("First few SDs:",e.slice(0,3).map(xe=>({id:xe.id,title:xe.title})));const me=e.find(xe=>xe.id===c);me?(console.log("Found SD:",me.id,me.title),p(me),h("detail"),document.title=`${me.title||me.id} - LEO Protocol Dashboard`):e.length>0?(console.warn(`SD with id '${c}' not found in ${e.length} directives, redirecting to list`),u("/strategic-directives",{replace:!0})):console.log("Waiting for strategic directives to load...")}else i||(h("list"),p(null),document.title="Strategic Directives - LEO Protocol Dashboard")},[c,i,e,u]);const le=w.useMemo(()=>e.filter(me=>{var Y,Z,ie,Ge,Ne;let xe=!0;if(y!=="all"){const Me=(Y=me.status)==null?void 0:Y.toLowerCase();xe=(y.includes(",")?y.split(","):[y]).some(bt=>bt==="active"?Me==="active":bt==="draft"?Me==="draft":bt==="deferred"?Me==="deferred":bt==="on_hold"?Me==="on_hold":bt==="cancelled"?Me==="cancelled":bt==="archived"?Me==="archived"||Me==="completed"||Me==="complete":!1)}let qe=!0;if(E){const Me=E.toLowerCase();qe=((Z=me.id)==null?void 0:Z.toLowerCase().includes(Me))||((ie=me.title)==null?void 0:ie.toLowerCase().includes(Me))||((Ge=me.description)==null?void 0:Ge.toLowerCase().includes(Me))}let Te=!0;k!=="all"&&(Te=(k.includes(",")?k.split(","):[k]).some(In=>{var bt;return((bt=me.priority)==null?void 0:bt.toLowerCase())===In.toLowerCase()}));let nr=!0;j!=="all"&&(nr=me.targetApplication===j);let q=!0;return D!=="all"&&(q=((Ne=me.category)==null?void 0:Ne.toLowerCase())===D.toLowerCase()),xe&&qe&&Te&&nr&&q}),[e,y,E,k,j,D]),We=(me,xe)=>[...me].sort((qe,Te)=>{var nr,q;if(qe.is_working_on&&qe.progress>=100)return 1;if(Te.is_working_on&&Te.progress>=100)return-1;for(const Y of xe){let Z=qe[Y.field],ie=Te[Y.field];if(Y.field==="priority"){const Ne={critical:1,high:2,medium:3,low:4,minimal:5};Z=Ne[Z==null?void 0:Z.toLowerCase()]||999,ie=Ne[ie==null?void 0:ie.toLowerCase()]||999}else if(Y.field==="status"){const Ne={active:1,draft:2,in_progress:3,pending_approval:4,completed:5};Z=Ne[Z==null?void 0:Z.toLowerCase()]||999,ie=Ne[ie==null?void 0:ie.toLowerCase()]||999}else if(Y.field==="wsjf_score"){if(Z==null){const Ne=(nr=qe.priority)==null?void 0:nr.toLowerCase();Z=Ne==="critical"?100:Ne==="high"?75:Ne==="medium"?50:25}if(ie==null){const Ne=(q=Te.priority)==null?void 0:q.toLowerCase();ie=Ne==="critical"?100:Ne==="high"?75:Ne==="medium"?50:25}}else if(Y.field==="id"){const Ne=Z==null?void 0:Z.match(/SD-(\d+)/),Me=ie==null?void 0:ie.match(/SD-(\d+)/);Z=Ne?parseInt(Ne[1],10):999999,ie=Me?parseInt(Me[1],10):999999}else Y.field==="sequenceRank"&&(Z=typeof Z=="number"?Z:parseInt(Z,10)||999999,ie=typeof ie=="number"?ie:parseInt(ie,10)||999999);Z==null&&(Z=Y.direction==="asc"?999999:-999999),ie==null&&(ie=Y.direction==="asc"?999999:-999999);let Ge=0;if(Z<ie?Ge=-1:Z>ie&&(Ge=1),Ge!==0)return Y.direction==="asc"?Ge:-Ge}return 0}),ht=w.useMemo(()=>We(le,M),[le,M]);return d==="detail"&&f?a.jsx(IA,{sd:f,onUpdateChecklist:t}):d==="detail"&&!f?a.jsx("div",{className:"p-6 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading strategic directive..."})]})}):a.jsxs("div",{className:s?"p-3":"p-6",children:[a.jsxs("div",{className:s?"mb-3":"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{children:a.jsxs("h1",{className:`${s?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white flex items-center`,children:[a.jsx(Ga,{className:"w-6 h-6 mr-2 text-primary-500 animate-pulse"}),"Strategic Directives"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(op,{onRefresh:o,isCompact:s}),a.jsxs("button",{onClick:()=>u("/directive-lab?mode=quick"),className:`flex items-center ${s?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[a.jsx(ap,{className:`${s?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]})]})]}),a.jsx(HE,{searchQuery:E,setSearchQuery:I,statusFilter:y,setStatusFilter:g,priorityFilter:k,setPriorityFilter:N,applicationFilter:j,setApplicationFilter:T,categoryFilter:D,setCategoryFilter:z,showMetadataFilters:A,setShowMetadataFilters:_,strategicDirectives:e,filteredDirectives:le,isCompact:s}),a.jsx(WE,{sortLevels:M,setSortLevels:P,savedSorts:O,setSavedSorts:$,resetToStrategicPriority:R,addSortLevel:F,removeSortLevel:S,updateSortLevel:U,loadPreset:K,savePreset:C,showSortingPanel:re,setShowSortingPanel:ye,isCompact:s})]}),a.jsx(AA,{strategicDirectives:ht,expandedSD:m,setExpandedSD:v,onUpdateChecklist:t,onSelectSD:p,copiedId:b,setCopiedId:x,currentSD:n,onSetActiveSD:r,onUpdateStatus:l,isCompact:s})]})}function Yg({prds:e,isCompact:t,detailMode:r}){const{id:n}=yf(),s=Cn(),[i,o]=w.useState("list"),[l,c]=w.useState(null);w.useEffect(()=>{if(r&&n){const d=e.find(h=>h.id===n);d?(c(d),o("detail"),document.title=`${d.title||d.id} - LEO Protocol Dashboard`):(console.warn(`PRD with id '${n}' not found, redirecting to list`),s("/prds",{replace:!0}))}else r||(o("list"),c(null),document.title="PRDs - LEO Protocol Dashboard")},[n,r,e,s]);const u=d=>{if(!d||!d.id){console.error("Invalid PRD for navigation:",d);return}try{s(`/prds/${d.id}`)}catch(h){console.error("Navigation error:",h)}};return i==="detail"&&l?a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>s("/prds"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[a.jsx(pt,{className:"w-4 h-4 mr-1 rotate-180"}),"Back to PRDs"]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:l.directiveTitle&&`Strategic Directive: ${l.directiveTitle}`})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.status})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Priority"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.priority})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.phase})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),a.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[l.progress,"%"]})]})]}),a.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:a.jsx(jp,{children:l.content||"No content available"})}),l.checklist&&l.checklist.length>0&&a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Implementation Checklist"}),a.jsx("div",{className:"space-y-2",children:l.checklist.map((d,h)=>a.jsxs("div",{className:"flex items-start p-3 rounded bg-gray-50 dark:bg-gray-700",children:[d.checked?a.jsx(na,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}):a.jsx(ip,{className:"w-5 h-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0"}),a.jsx("span",{className:`flex-1 ${d.checked?"line-through text-gray-500":""}`,children:d.text}),d.phase&&a.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded ml-2",children:d.phase})]},h))})]})]})]}):a.jsxs("div",{className:t?"p-3":"p-6",children:[a.jsx("div",{className:t?"mb-3":"mb-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:`${t?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white`,children:"PRDs"}),a.jsx("p",{className:`text-gray-600 dark:text-gray-400 ${t?"text-sm mt-1":"mt-2"}`,children:"Product Requirements Documents - Technical implementation details"})]})})}),e.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[a.jsx(He,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No PRDs found"})]}):a.jsx("div",{className:"space-y-4",children:e.map(d=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(He,{className:"w-6 h-6 text-blue-600 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.directiveTitle&&`SD: ${d.directiveTitle}`}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:d.description}),a.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.priority==="high"?"bg-red-100 text-red-800":d.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:d.priority}),a.jsxs("span",{className:"text-xs text-gray-500",children:["Phase: ",d.phase]}),a.jsxs("span",{className:"text-xs text-gray-500",children:["Progress: ",d.progress,"%"]})]})]})]})}),a.jsx("div",{className:"ml-4 flex flex-col items-end space-y-2",children:a.jsx("button",{onClick:()=>u(d),className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors",children:"View Full"})})]})})},d.id))})]})}const Ce=({children:e,variant:t="primary",size:r="medium",disabled:n=!1,loading:s=!1,onClick:i,type:o="button",fullWidth:l=!1,icon:c,iconPosition:u="left",ariaLabel:d,className:h="",...f})=>{const p=`
    inline-flex items-center justify-center
    font-medium transition-all duration-200
    rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    min-h-[44px] min-w-[44px]
  `,m={small:"px-3 py-1.5 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"},v={primary:`
      bg-blue-600 dark:bg-blue-600 text-white dark:text-white
      hover:bg-blue-700 dark:hover:bg-blue-700 active:bg-blue-800 dark:active:bg-blue-800
      focus:ring-blue-500 dark:focus:ring-blue-400
    `,secondary:`
      bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100
      hover:bg-gray-300 dark:hover:bg-gray-600 active:bg-gray-400 dark:active:bg-gray-500
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,ghost:`
      bg-transparent dark:bg-transparent text-gray-700 dark:text-gray-300
      hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,danger:`
      bg-red-600 dark:bg-red-600 text-white dark:text-white
      hover:bg-red-700 dark:hover:bg-red-700 active:bg-red-800 dark:active:bg-red-800
      focus:ring-red-500 dark:focus:ring-red-400
    `,success:`
      bg-green-600 dark:bg-green-600 text-white dark:text-white
      hover:bg-green-700 dark:hover:bg-green-700 active:bg-green-800 dark:active:bg-green-800
      focus:ring-green-500 dark:focus:ring-green-400
    `},b=l?"w-full":"",x=`
    ${p}
    ${m[r]}
    ${v[t]}
    ${b}
    ${h}
  `.trim().replace(/\s+/g," "),y=g=>{!n&&!s&&i&&i(g)};return a.jsxs("button",{type:o,className:x,disabled:n||s,onClick:y,"aria-label":d||(typeof e=="string"?e:void 0),"aria-busy":s,"aria-disabled":n||s,...f,children:[s&&a.jsx(Nw,{className:"w-4 h-4 mr-2 animate-spin"}),!s&&c&&u==="left"&&a.jsx(c,{className:"w-4 h-4 mr-2"}),e,!s&&c&&u==="right"&&a.jsx(c,{className:"w-4 h-4 ml-2"})]})},DA=({steps:e=[],currentStep:t=1,orientation:r="horizontal",showTimeEstimates:n=!0,showStepNumbers:s=!0,compact:i=!1,hideLabelsOnMobile:o=!1,onStepClick:l,className:c=""})=>{const u=(t-1)/(e.length-1)*100,d=e.reduce((x,y)=>x+(y.timeEstimate||0),0),h=e.slice(0,t-1).reduce((x,y)=>x+(y.timeEstimate||0),0),f=x=>{if(x<60)return`${x} min`;const y=Math.floor(x/60),g=x%60;return g>0?`${y}h ${g}m`:`${y}h`},p=x=>x<t-1?"completed":x===t-1?"current":x===t?"upcoming":"locked",m=(x,y)=>{switch(x){case"completed":return a.jsx(us,{className:"w-4 h-4"});case"current":return s?y:null;case"upcoming":return s?y:null;case"locked":return a.jsx(bE,{className:"w-3 h-3"});default:return y}},v=x=>{const y=p(x);l&&(y==="completed"||y==="current")&&l(x+1)},b=x=>{const y=p(x);return l&&(y==="completed"||y==="current")};return r==="vertical"?a.jsxs("div",{className:`${c}`,children:[n&&!i&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),a.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`},role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"})}),a.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-600 dark:text-gray-400",children:[a.jsxs("span",{children:[f(h)," completed"]}),a.jsxs("span",{children:[f(d-h)," remaining"]})]})]}),a.jsx("div",{className:"relative",children:e.map((x,y)=>{const g=p(y),k=y===e.length-1;return a.jsxs("div",{className:"flex items-start mb-8 last:mb-0",children:[!k&&a.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),a.jsx("button",{onClick:()=>v(y),disabled:!b(y),className:`
                    relative z-10 flex items-center justify-center
                    w-12 h-12 rounded-full border-2 transition-all
                    ${b(y)?"cursor-pointer":"cursor-default"}
                    ${g==="completed"?"bg-green-500 border-green-500 text-white":""}
                    ${g==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                    ${g==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                    ${g==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                  `,"aria-label":`Step ${y+1}: ${x.title} - ${g}`,children:m(g,y+1)}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h3",{className:`
                    font-medium text-base
                    ${g==="current"?"text-blue-600":""}
                    ${g==="completed"?"text-green-600":""}
                    ${g==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:x.title}),x.description&&!i&&a.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:x.description}),n&&x.timeEstimate&&a.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[a.jsx(hr,{className:"w-3 h-3 mr-1"}),f(x.timeEstimate)]})]})]},y)})})]}):a.jsxs("div",{className:`${c}`,children:[n&&!i&&a.jsx("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(hr,{className:"w-4 h-4 mr-2 text-blue-600"}),a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Time: ",a.jsx("span",{className:"font-medium",children:f(h)})," of"," ",a.jsx("span",{className:"font-medium",children:f(d)})]})]}),a.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"% Complete"]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-300 dark:bg-gray-600"}),a.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-blue-600 dark:bg-blue-500 transition-all duration-300",style:{width:`${u}%`}}),a.jsx("div",{className:"relative flex justify-between",children:e.map((x,y)=>{const g=p(y);return a.jsxs("div",{className:`flex flex-col items-center ${i?"flex-1":""}`,children:[a.jsxs("div",{className:"relative group",children:[a.jsx("button",{onClick:()=>v(y),disabled:!b(y),className:`
                      relative z-10 flex items-center justify-center
                      w-12 h-12 rounded-full border-2 transition-all
                      ${b(y)?"cursor-pointer hover:scale-110":"cursor-default"}
                      ${g==="completed"?"bg-green-500 border-green-500 text-white":""}
                      ${g==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                      ${g==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                      ${g==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                    `,"aria-label":`Step ${y+1}: ${x.title} - ${g}`,title:x.title,children:m(g,y+1)}),o&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block md:hidden z-20",children:a.jsxs("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[x.title,a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:a.jsx("div",{className:"border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})})]}),a.jsxs("div",{className:`mt-3 text-center ${o?"hidden md:block":""}`,children:[a.jsx("p",{className:`
                    text-sm font-medium
                    ${g==="current"?"text-blue-600":""}
                    ${g==="completed"?"text-green-600":""}
                    ${g==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:x.title}),n&&x.timeEstimate&&!i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:f(x.timeEstimate)})]})]},y)})})]})]})},LA=({onSubmissionSelect:e,onGroupCreate:t,selectedSubmissionId:r,onSelectionChange:n,refreshTrigger:s=0})=>{const[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[h,f]=w.useState([]),[p,m]=w.useState(!1),[v,b]=w.useState(null),[x,y]=w.useState(!1);w.useEffect(()=>{g()},[p,s]),w.useEffect(()=>{const P=()=>{b(null),y(!1)};if(v||x)return document.addEventListener("click",P),()=>document.removeEventListener("click",P)},[v,x]);const g=async()=>{try{c(!0);const P=new URLSearchParams;p&&P.append("uncombined","true"),P.append("since","30d");const O=await fetch(`/api/sdip/submissions?${P}`);if(!O.ok)throw new Error("Failed to load submissions");const $=await O.json();o($),d(null)}catch(P){d(P.message),o([])}finally{c(!1)}},k=P=>{const O=h.includes(P)?h.filter($=>$!==P):[...h,P];f(O),n==null||n(O)},N=P=>{e(P)},j=(P="intelligent")=>{h.length>=2&&t(h,P)},T=async P=>{if(confirm("Are you sure you want to delete this submission?"))try{if(!(await fetch(`/api/sdip/submissions/${P}`,{method:"DELETE"})).ok)throw new Error("Failed to delete submission");o($=>$.filter(R=>R.id!==P)),f($=>$.filter(R=>R!==P)),r===P&&e(null)}catch(O){console.error("Error deleting submission:",O),alert("Failed to delete submission. Please try again.")}},E=(P,O)=>{(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),O())},I=P=>{const O=new Date(P),R=Math.floor((new Date-O)/(1e3*60*60));return R<1?"Just now":R<24?`${R}h ago`:R<48?"Yesterday":O.toLocaleDateString()},D=P=>{const O=P.intent_summary||P.chairman_input||P.submission_title||"Untitled Submission";return O.length>60?O.substring(0,57)+"...":O},z=P=>{var $,R,F,S,U;let O="";return((R=($=P.synthesis)==null?void 0:$.aligned)==null?void 0:R.length)>0?O=((F=P.synthesis.aligned[0])==null?void 0:F.text)||"":(S=P.impact_analysis)!=null&&S.summary?O=P.impact_analysis.summary:(U=P.strat_tac)!=null&&U.rationale&&(O=P.strat_tac.rationale),!O&&P.chairman_input&&(O=P.chairman_input.substring(0,100)+"..."),O.length>120?O.substring(0,117)+"...":O},A=P=>{var R;const O=((R=P.impact_analysis)==null?void 0:R.affected_components)||[];if(O.length===0)return null;const $=O.find(F=>F.impact_level==="high")||O[0];return($==null?void 0:$.name)||($==null?void 0:$.component)||null},_=P=>{var F,S;const O=P.status||"draft",$=P.current_step||1,R=Array.isArray(P.completed_steps)?P.completed_steps:[];return O==="submitted"||((F=P.gate_status)==null?void 0:F.status)==="submitted"||(S=P.gate_status)!=null&&S.resulting_sd_id||P.resulting_sd_id?{text:" Submitted",color:"text-green-700 bg-green-100 dark:bg-green-900/20 dark:text-green-300",icon:""}:O==="ready"||R.includes(7)||R.length===7&&$===7?{text:" Ready",color:"text-blue-700 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300",icon:""}:{text:" Draft",color:"text-yellow-700 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300",icon:""}},M=P=>i.filter(O=>O.group_id===P);return l?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 text-sm",children:"Recent Submissions"}),i.length>0&&a.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded",children:i.length})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ce,{onClick:()=>m(!p),variant:p?"primary":"ghost",size:"small",icon:_l,ariaLabel:"Show uncombined only"}),h.length>=2&&a.jsxs("div",{className:"relative",children:[a.jsxs(Ce,{onClick:P=>{P.stopPropagation(),y(!x)},variant:"primary",size:"small",icon:Ew,children:["Combine (",h.length,")"]}),x&&a.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-20 min-w-56",children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 px-2",children:"Combination Method:"}),[{id:"intelligent",name:" Intelligent",desc:"AI-driven optimal combination"},{id:"chronological",name:" Chronological",desc:"Preserve timeline order"},{id:"merge",name:" Smart Merge",desc:"Deduplicate and consensus"},{id:"priority",name:" Priority-based",desc:"Highest strategic impact first"},{id:"latest",name:" Latest Override",desc:"Most recent takes precedence"}].map(P=>a.jsxs("button",{onClick:O=>{O.stopPropagation(),j(P.id),y(!1)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex flex-col gap-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:P.name}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:P.desc})]},P.id))]})})]})]})]}),u&&a.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-400 flex items-start gap-2",children:[a.jsx(zt,{className:"w-5 h-5 text-red-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load submissions"}),a.jsx("p",{className:"text-red-600 text-sm",children:u}),a.jsx("button",{onClick:g,className:"mt-1 text-red-700 underline text-sm hover:no-underline",children:"Try again"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:i.length===0?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(hr,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"No submissions yet"}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Create your first submission to get started with the Directive Lab"}),a.jsx("button",{onClick:()=>e(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Submission"})]}):a.jsx("div",{className:"p-2",children:i.map(P=>{const O=_(P),$=D(P),R=z(P),F=A(P),S=h.includes(P.id),U=r===P.id,K=P.group_id?M(P.group_id):[],C=v===P.id;return a.jsx("div",{className:`p-3 mb-2 border rounded-lg transition-all cursor-pointer ${U?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700/50"}`,onClick:()=>N(P),onKeyDown:re=>E(re,()=>N(P)),tabIndex:"0",role:"button","aria-label":`View submission: ${D(P)}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:re=>{re.stopPropagation(),k(P.id)},className:"mt-1 text-gray-400 hover:text-gray-600 transition-colors",children:S?a.jsx(na,{className:"w-4 h-4 text-blue-600"}):a.jsx(ip,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm leading-tight",children:$}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap font-medium ${O.color}`,children:O.text})]}),R&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 leading-relaxed",children:R}),F&&a.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[a.jsx(He,{className:"w-3 h-3 text-gray-400"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Affects: ",a.jsx("span",{className:"font-medium",children:F})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:I(P.created_at)}),P.group_id&&K.length>1&&a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:re=>{re.stopPropagation(),b(C?null:P.id)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[a.jsx(vE,{className:"w-3 h-3"}),a.jsxs("span",{className:"font-medium",children:[K.length," items"]}),a.jsx(Lt,{className:`w-3 h-3 transition-transform ${C?"rotate-180":""}`})]}),C&&a.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-48",children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 px-2",children:"Linked Submissions:"}),K.map(re=>{const ye=_(re),le=D(re);return a.jsxs("button",{onClick:We=>{We.stopPropagation(),N(re),b(null)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate",children:le}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${ye.color}`,children:ye.icon}),a.jsx(rc,{className:"w-3 h-3 text-gray-400"})]})]},re.id)})]})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:re=>{re.stopPropagation(),N(P)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[a.jsx(mE,{className:"w-3 h-3"}),"View"]}),a.jsx("button",{onClick:re=>{re.stopPropagation(),T(P.id)},className:"flex items-center gap-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete submission",children:a.jsx(sc,{className:"w-3 h-3"})})]})]})]})]})},P.id)})})}),h.length>0&&a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-700",children:a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:[h.length," selected"]}),h.length>=2&&a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Ready to combine "})]})})]})},OA=({isOpen:e=!0,onClose:t,selectedSubmissions:r,combineMethod:n="intelligent",onCreateGroup:s,onSuccess:i})=>{const[o,l]=w.useState(""),[c,u]=w.useState(n),[d,h]=w.useState(!1),[f,p]=w.useState(null),m=async b=>{if(b.preventDefault(),!!o.trim()){h(!0),p(null);try{const x=await fetch("/api/sdip/create-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_ids:r,group_name:o.trim(),method:c})});if(!x.ok){const g=await x.json();throw new Error(g.error||"Failed to create group")}const y=await x.json();console.log(" Group created successfully:",y),i?i(y):s&&await s(y),t(),l(""),u(n)}catch(x){p(x.message)}finally{h(!1)}}};if(!e)return null;const v=[{value:"intelligent",label:" Intelligent",desc:"AI-driven optimal combination"},{value:"chronological",label:" Chronological",desc:"Keep time order"},{value:"merge",label:" Merge & Dedupe",desc:"Remove duplicates"},{value:"priority",label:" Priority-based",desc:"Highest strategic impact first"},{value:"latest",label:" Latest Priority",desc:"Latest overrides"}];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ew,{className:"w-4 h-4 text-blue-600"}),a.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Combine ",r.length," Submissions"]})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:a.jsx(rr,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:m,className:"p-3 space-y-3",children:[f&&a.jsxs("div",{className:"flex items-start gap-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[a.jsx(zt,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:f})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"group-name",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name"}),a.jsx("input",{type:"text",id:"group-name",value:o,onChange:b=>l(b.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dashboard UX Improvements",required:!0,maxLength:100})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Combine Method"}),a.jsx("div",{className:"grid grid-cols-1 gap-1",children:v.map(b=>a.jsx("label",{className:`flex items-center justify-between p-2 text-xs border rounded cursor-pointer transition-colors ${c===b.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-600"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"combineMethod",value:b.value,checked:c===b.value,onChange:x=>u(x.target.value),className:"text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b.label}),a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:[" ",b.desc]})]})]})},b.value))})]}),a.jsxs("div",{className:"flex gap-2 pt-1",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!o.trim()||d,className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 border border-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Creating...":"Combine"})]})]})]})})},MA=({message:e,type:t="info",duration:r=5e3,onClose:n,position:s="top-right"})=>{const[i,o]=w.useState(!1),[l,c]=w.useState(!1);w.useEffect(()=>{setTimeout(()=>o(!0),10);const m=setTimeout(()=>{u()},r);return()=>clearTimeout(m)},[r]);const u=()=>{c(!0),setTimeout(()=>{o(!1),n==null||n()},300)},d={success:{icon:fe,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-800 dark:text-green-200",iconColor:"text-green-600 dark:text-green-400"},error:{icon:zt,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-800 dark:text-red-200",iconColor:"text-red-600 dark:text-red-400"},warning:{icon:xt,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",textColor:"text-yellow-800 dark:text-yellow-200",iconColor:"text-yellow-600 dark:text-yellow-400"},info:{icon:wr,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-800 dark:text-blue-200",iconColor:"text-blue-600 dark:text-blue-400"}},h=d[t]||d.info,f=h.icon,p={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"};return a.jsx("div",{className:`
        fixed z-50 
        ${p[s]}
        transition-all duration-300 ease-in-out
        ${i&&!l?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"}
      `,children:a.jsxs("div",{className:`
          flex items-center gap-3 p-4 rounded-lg shadow-lg
          ${h.bgColor} ${h.borderColor} ${h.textColor}
          border min-w-[300px] max-w-md
        `,children:[a.jsx(f,{className:`w-5 h-5 ${h.iconColor} flex-shrink-0`}),a.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),a.jsx("button",{onClick:u,className:`${h.iconColor} hover:opacity-70 transition-opacity`,"aria-label":"Close notification",children:a.jsx(rr,{className:"w-4 h-4"})})]})})},$A=({children:e})=>{const[t,r]=w.useState([]),n=(i,o="info",l=5e3)=>{const c=Date.now(),u={id:c,message:i,type:o,duration:l};return r(d=>[...d,u]),c},s=i=>{r(o=>o.filter(l=>l.id!==i))};return w.useEffect(()=>(window.showToast=n,()=>{delete window.showToast}),[]),a.jsxs(a.Fragment,{children:[e,a.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:t.map((i,o)=>a.jsx("div",{className:"pointer-events-auto",style:{position:"fixed",top:`${20+o*80}px`,right:"20px",transition:"all 0.3s ease-in-out"},children:a.jsx(MA,{message:i.message,type:i.type,duration:i.duration,onClose:()=>s(i.id),position:"none"})},i.id))})]})},hk=()=>{const e=(t,r="info",n=5e3)=>{if(window.showToast)return window.showToast(t,r,n);console.warn("Toast provider not found. Make sure ToastProvider is mounted.")};return{success:(t,r)=>e(t,"success",r),error:(t,r)=>e(t,"error",r),warning:(t,r)=>e(t,"warning",r),info:(t,r)=>e(t,"info",r),show:e}},Tl=({type:e="text",label:t,name:r,value:n,onChange:s,onBlur:i,placeholder:o,required:l=!1,disabled:c=!1,error:u,success:d,helpText:h,validationPattern:f,minLength:p,maxLength:m,rows:v=4,options:b=[],autoComplete:x,className:y="",fullWidth:g=!0,showCharCount:k=!1,...N})=>{const[j,T]=w.useState(!1),[E,I]=w.useState(!1),[D,z]=w.useState("");w.useEffect(()=>{E&&f&&(new RegExp(f).test(n)?z(""):z("Invalid format"))},[n,f,E]);const M=`
    w-full px-4 py-3 
    border rounded-lg transition-all duration-200
    text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400
    min-h-[48px]
    focus:outline-none focus:ring-2 focus:ring-offset-1
    disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-60
    bg-white dark:bg-gray-700
   ${u||D?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400 focus:border-red-500 dark:focus:border-red-400":d?"border-green-500 dark:border-green-400 focus:ring-green-500 dark:focus:ring-green-400 focus:border-green-500 dark:focus:border-green-400":j?"border-blue-500 dark:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400"} ${y}`,P=()=>{T(!0)},O=C=>{T(!1),I(!0),i&&i(C)},$=C=>{s&&s(C),E||I(!0)},R=`input-${r||Math.random().toString(36).substr(2,9)}`,F=`${R}-error`,S=`${R}-help`,U=()=>{switch(e){case"textarea":return a.jsx("textarea",{id:R,name:r,value:n,onChange:$,onFocus:P,onBlur:O,placeholder:o,required:l,disabled:c,rows:v,minLength:p,maxLength:m,className:M,"aria-invalid":!!(u||D),"aria-describedby":`${u||D?F:""} ${h?S:""}`,...N});case"select":return a.jsxs("select",{id:R,name:r,value:n,onChange:$,onFocus:P,onBlur:O,required:l,disabled:c,className:M,"aria-invalid":!!(u||D),"aria-describedby":`${u||D?F:""} ${h?S:""}`,...N,children:[a.jsx("option",{value:"",children:"Select an option"}),b.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))]});default:return a.jsx("input",{id:R,type:e,name:r,value:n,onChange:$,onFocus:P,onBlur:O,placeholder:o,required:l,disabled:c,minLength:p,maxLength:m,autoComplete:x,className:M,"aria-invalid":!!(u||D),"aria-describedby":`${u||D?F:""} ${h?S:""}`,...N})}},K=g?"w-full":"";return a.jsxs("div",{className:`${K} mb-4`,children:[t&&a.jsxs("label",{htmlFor:R,className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",children:[t,l&&a.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[U(),a.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:[d&&!u&&!D&&a.jsx(us,{className:"w-5 h-5 text-green-500","aria-label":"Valid input"}),(u||D)&&a.jsx(rr,{className:"w-5 h-5 text-red-500","aria-label":"Invalid input"})]})]}),k&&m&&a.jsxs("div",{className:"mt-1 text-sm text-right text-gray-500 dark:text-gray-400",children:[(n==null?void 0:n.length)||0," / ",m]}),(u||D)&&a.jsxs("div",{id:F,className:"mt-2 flex items-start text-sm text-red-600 dark:text-red-400",role:"alert",children:[a.jsx(zt,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),u||D]}),h&&!(u||D)&&a.jsxs("div",{id:S,className:"mt-2 flex items-start text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(wr,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),h]})]})},FA=({chairmanInput:e,screenshotUrl:t,fieldErrors:r,fieldSuccess:n,onChairmanInputChange:s,onScreenshotUrlChange:i,onSubmit:o,onSaveDraft:l,loading:c})=>a.jsxs("div",{className:"space-y-3",children:[a.jsx(Tl,{type:"textarea",label:"Chairman Feedback",name:"chairmanInput",value:e,onChange:s,placeholder:"Enter your feedback about the EHG application...",required:!0,rows:5,minLength:20,maxLength:1e3,showCharCount:!0,error:r.chairmanInput,success:n.chairmanInput,helpText:"Provide detailed feedback about what you'd like to improve or add"}),a.jsx(Tl,{type:"url",label:"Screenshot URL",name:"screenshotUrl",value:t,onChange:i,placeholder:"https://example.com/screenshot.png",error:r.screenshotUrl,success:n.screenshotUrl,helpText:"Optional: Add a screenshot URL to provide visual context",icon:Zf}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ce,{onClick:o,disabled:c||!e.trim(),loading:c,variant:"primary",icon:rc,iconPosition:"right",children:"Submit & Analyze"}),a.jsx(Ce,{onClick:l,variant:"secondary",icon:is,children:"Save Draft"})]})]}),zA=({intentSummary:e,onIntentChange:t,onBack:r,onConfirm:n,loading:s})=>a.jsxs("div",{className:"space-y-3",children:[a.jsx(Tl,{type:"textarea",label:"Extracted Intent Summary",name:"intentSummary",value:e,onChange:t,rows:3,style:{minHeight:"80px",maxHeight:"300px",resize:"vertical",overflow:"auto"},onFocus:i=>{i.target.style.height="auto",i.target.style.height=Math.min(i.target.scrollHeight,300)+"px"},helpText:"Review and edit if needed to accurately capture your intent",success:e.length>0}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ce,{onClick:r,variant:"ghost",icon:Tn,children:"Back"}),a.jsx(Ce,{onClick:n,disabled:s||!e,loading:s,variant:"success",icon:us,children:"Confirm Intent"})]})]}),UA=({submission:e,finalConfirmed:t,onFinalConfirmedChange:r,onBack:n,onSaveAndClose:s,onSubmitDirective:i,loading:o})=>{var c,u,d;const l=hk();return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Final Confirmation"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the final summary and choose your next action."})]}),e!=null&&e.final_summary?a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Directive Summary"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:e.final_summary})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[((c=e.strat_tac)==null?void 0:c.strategic_pct)||0,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Strategic"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((u=e.impact_analysis)==null?void 0:u.risk_level)||"Low"}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Risk Level"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:((d=e.impact_analysis)==null?void 0:d.effort_estimate)||"Medium"}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Effort"})]})]}),a.jsxs("div",{className:"mt-4 flex gap-2",children:[a.jsx(Ce,{onClick:()=>{navigator.clipboard.writeText(e.final_summary),l.success("Summary copied to clipboard")},variant:"ghost",size:"small",icon:ep,children:"Copy Summary"}),a.jsx(Ce,{onClick:async()=>{l.info("Regenerate functionality will be implemented")},variant:"ghost",size:"small",icon:tr,disabled:o,children:"Regenerate"})]}),a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:a.jsxs("label",{className:"flex items-start cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t||!1,onChange:h=>r(h.target.checked),className:"mt-0.5 mr-2"}),a.jsx("span",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:"I confirm that this directive accurately represents my requirements."})]})})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preparing final summary..."})]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Choose Your Next Action"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(is,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Save & Close:"})," Save for later review or combine with other submissions"]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(ig,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Submit Directive:"})," Create Strategic Directive and begin LEO Protocol workflow"]})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(Ce,{onClick:n,variant:"ghost",icon:Tn,className:"order-3 sm:order-1",children:"Back"}),a.jsxs("div",{className:"flex gap-3 order-1 sm:order-2 flex-1",children:[a.jsx(Ce,{onClick:s,disabled:o||!t,loading:o,variant:"secondary",icon:is,className:"flex-1",children:"Save & Close"}),a.jsx(Ce,{onClick:i,disabled:o||!t,loading:o,variant:"primary",icon:ig,className:"flex-1",children:"Submit Directive"})]})]})]})},BA=({type:e,level:t,showTooltip:r=!0})=>{const[n,s]=w.useState(!1),o={UI:{label:"UI",description:"User Interface complexity",colors:{HIGH:"bg-blue-600 text-white",MEDIUM:"bg-blue-400 text-white",LOW:"bg-blue-200 text-blue-900"}},DB:{label:"DB",description:"Database impact and complexity",colors:{HIGH:"bg-purple-600 text-white",MEDIUM:"bg-purple-400 text-white",LOW:"bg-purple-200 text-purple-900"}},COMPLEX:{label:"COMPLEX",description:"Overall implementation complexity",colors:{HIGH:"bg-orange-600 text-white",MEDIUM:"bg-orange-400 text-white",LOW:"bg-orange-200 text-orange-900"}},ACCESS:{label:"ACCESS",description:"Access control and permissions",colors:{HIGH:"bg-green-600 text-white",MEDIUM:"bg-green-400 text-white",LOW:"bg-green-200 text-green-900"}},SECURITY:{label:"SECURITY",description:"Security implications",colors:{HIGH:"bg-red-600 text-white",MEDIUM:"bg-red-400 text-white",LOW:"bg-red-200 text-red-900"}},PROCESS:{label:"PROCESS",description:"Business process impact",colors:{HIGH:"bg-yellow-600 text-white",MEDIUM:"bg-yellow-400 text-gray-900",LOW:"bg-yellow-200 text-yellow-900"}}}[e];if(!o)return null;const l=o.colors[t]||o.colors.LOW;return a.jsxs("div",{className:"inline-flex items-center relative",children:[a.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${l} cursor-help transition-opacity hover:opacity-90`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[o.label,":",t,r&&a.jsx(wr,{className:"w-3 h-3 ml-1 opacity-70"})]}),r&&n&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap",children:[a.jsx("div",{className:"font-semibold",children:o.description}),a.jsxs("div",{className:"text-gray-300 mt-1",children:[t==="HIGH"&&"Significant impact - careful review needed",t==="MEDIUM"&&"Moderate impact - standard review",t==="LOW"&&"Minimal impact - routine change"]}),a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900"})]})})]})},xu=({badges:e})=>{if(!e)return null;const t=["UI","DB","COMPLEX","ACCESS","SECURITY","PROCESS"];return a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.map(r=>{const n=e[r];return n?a.jsx(BA,{type:r,level:n},r):null})})},yu=e=>{const t={},r=e.toLowerCase();return(r.includes("ui")||r.includes("interface")||r.includes("component"))&&(t.UI=r.includes("complex")||r.includes("major")?"HIGH":r.includes("update")||r.includes("modify")?"MEDIUM":"LOW"),(r.includes("database")||r.includes("schema")||r.includes("migration"))&&(t.DB=r.includes("migration")||r.includes("schema")?"HIGH":r.includes("query")||r.includes("index")?"MEDIUM":"LOW"),r.includes("architecture")||r.includes("refactor")||r.includes("system")?t.COMPLEX="HIGH":r.includes("feature")||r.includes("implement")?t.COMPLEX="MEDIUM":(r.includes("fix")||r.includes("update"))&&(t.COMPLEX="LOW"),(r.includes("permission")||r.includes("role")||r.includes("access"))&&(t.ACCESS=r.includes("admin")||r.includes("role")?"HIGH":"MEDIUM"),r.includes("security")||r.includes("auth")||r.includes("encrypt")?t.SECURITY=r.includes("auth")||r.includes("encrypt")?"HIGH":"MEDIUM":(r.includes("api")||r.includes("endpoint"))&&(t.SECURITY="LOW"),(r.includes("workflow")||r.includes("process")||r.includes("business"))&&(t.PROCESS=r.includes("workflow")?"HIGH":"MEDIUM"),Object.keys(t).length===0&&(t.COMPLEX="LOW"),t},VA=({submission:e,stratTacOverride:t,onStratTacChange:r,onResetOverride:n,onBack:s,onComplete:i,loading:o})=>{var h,f,p;const l=(t==null?void 0:t.strategic_pct)??((h=e==null?void 0:e.strat_tac)==null?void 0:h.strategic_pct)??50,c=(t==null?void 0:t.tactical_pct)??((f=e==null?void 0:e.strat_tac)==null?void 0:f.tactical_pct)??50,u=(t==null?void 0:t.rationale)||((p=e==null?void 0:e.strat_tac)==null?void 0:p.rationale),d=m=>{const v=parseInt(m.target.value),b=100-v;let x="";v>70?x="Manually classified as highly strategic - focusing on long-term architecture and business objectives.":v>50?x="Manually classified as moderately strategic - balancing long-term goals with immediate improvements.":v>30?x="Manually classified as balanced - containing both strategic elements and tactical improvements.":x="Manually classified as primarily tactical - focusing on immediate fixes and improvements.",r({strategic_pct:v,tactical_pct:b,rationale:x,manually_adjusted:!0,adjusted_at:new Date().toISOString()})};return a.jsxs("div",{className:"space-y-3",children:[e!=null&&e.strat_tac?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-around mb-3",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[l,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Strategic"})]}),a.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[c,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Tactical"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg",children:[a.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Classification Rationale:"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:u})]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(NE,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mr-2"}),a.jsx("span",{className:"font-medium text-yellow-900 dark:text-yellow-100 text-sm",children:"Adjust Classification (Optional)"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx("span",{children:"More Tactical"}),a.jsx("span",{children:"More Strategic"})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:l,onChange:d,className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700
                  [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4
                  [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer
                  [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600
                  [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none`}),a.jsxs("div",{className:"flex justify-between mt-1",children:[a.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[c,"% Tactical"]}),a.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:[l,"% Strategic"]})]})]}),t&&a.jsx(Ce,{onClick:n,variant:"ghost",size:"small",icon:tr,children:"Reset to Auto-Classification"})]})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyzing strategic vs tactical breakdown..."})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ce,{onClick:s,variant:"ghost",icon:Tn,children:"Back"}),a.jsx(Ce,{onClick:i,disabled:o,loading:o,variant:"success",icon:us,children:t?"Accept Adjusted Classification":"Accept Classification"})]})]})},HA=({submission:e,synthesisReviewed:t,onSynthesisReviewedChange:r,onBack:n,onComplete:s,loading:i})=>{var o,l,c,u,d,h,f,p,m;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Synthesis Review"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the synthesized requirements and recommendations for your directive."})]}),e!=null&&e.synthesis?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(fe,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),a.jsxs("span",{className:"font-medium text-green-900 dark:text-green-100",children:["Aligned Requirements (",((o=e.synthesis.aligned)==null?void 0:o.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(l=e.synthesis.aligned)==null?void 0:l.map((v,b)=>{const x=typeof v=="object"?v.badges:yu(v),y=typeof v=="object"?v.text:v;return a.jsx("li",{className:"text-sm text-green-800 dark:text-green-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-green-600 dark:text-green-400 mr-2",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:y}),a.jsx(xu,{badges:x})]})]})},b)})})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(xt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),a.jsxs("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:["Required Changes (",((c=e.synthesis.required)==null?void 0:c.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(u=e.synthesis.required)==null?void 0:u.map((v,b)=>{const x=typeof v=="object"?v.badges:yu(v),y=typeof v=="object"?v.text:v;return a.jsx("li",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mr-2",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:y}),a.jsx(xu,{badges:x})]})]})},b)})})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(wr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),a.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:["Recommended Enhancements (",((d=e.synthesis.recommended)==null?void 0:d.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(h=e.synthesis.recommended)==null?void 0:h.map((v,b)=>{const x=typeof v=="object"?v.badges:yu(v),y=typeof v=="object"?v.text:v;return a.jsx("li",{className:"text-sm text-blue-800 dark:text-blue-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:y}),a.jsx(xu,{badges:x})]})]})},b)})})]})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Synthesizing requirements and recommendations..."})]})}),(e==null?void 0:e.synthesis)&&a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t,onChange:v=>r(v.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"I have reviewed the synthesis analysis"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["I understand the aligned requirements (",((f=e.synthesis.aligned)==null?void 0:f.length)||0,"), required changes (",((p=e.synthesis.required)==null?void 0:p.length)||0,"), and recommended enhancements (",((m=e.synthesis.recommended)==null?void 0:m.length)||0,") for this directive."]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ce,{onClick:n,variant:"ghost",icon:Tn,children:"Back"}),a.jsx(Ce,{onClick:s,disabled:i||!(e!=null&&e.synthesis)||!t,loading:i,variant:"success",icon:us,children:"Accept Synthesis"})]})]})},WA=({impactAnalysis:e,consistencyValidation:t,submission:r})=>{var h,f,p;const[n,s]=w.useState({overview:!0,components:!1,consistency:!1,recommendations:!1,mitigation:!1});if(!e&&!t)return a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-center",children:[a.jsx(wr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No impact analysis available for this submission"})]});const i=m=>{s(v=>({...v,[m]:!v[m]}))},o=(m,v)=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),v())},l=m=>{switch(m){case"critical":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-100",accent:"text-red-600 dark:text-red-400",icon:xt};case"high":return{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-100",accent:"text-orange-600 dark:text-orange-400",icon:zt};case"medium":return{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-900 dark:text-yellow-100",accent:"text-yellow-600 dark:text-yellow-400",icon:wr};case"low":return{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-100",accent:"text-green-600 dark:text-green-400",icon:fe};default:return{bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",text:"text-gray-900 dark:text-gray-100",accent:"text-gray-600 dark:text-gray-400",icon:wr}}},c=l((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)),u=c.icon,d=m=>({ui:su,api:xE,database:qa,authentication:ai,navigation:Zn,performance:as,"design-system":su})[m]||wr;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-lg border ${c.bg} ${c.border} p-6`,children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("overview"),onKeyDown:m=>o(m,()=>i("overview")),tabIndex:"0",role:"button","aria-expanded":n.overview,"aria-label":"Toggle impact analysis overview",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(u,{className:`w-6 h-6 ${c.accent}`}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-lg font-semibold ${c.text}`,children:"Impact Analysis Overview"}),a.jsxs("p",{className:`text-sm ${c.text} opacity-75`,children:["Risk Level: ",((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)||"unknown").toUpperCase()]})]})]}),n.overview?a.jsx(Lt,{className:`w-5 h-5 ${c.accent}`}):a.jsx(pt,{className:`w-5 h-5 ${c.accent}`})]}),n.overview&&a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${c.accent}`,children:e.impact_score}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Impact Score"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:`text-2xl font-bold ${c.accent}`,children:[e.effort_multiplier,"x"]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Effort Multiplier"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${c.accent}`,children:((h=e.affected_components)==null?void 0:h.length)||0}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Affected Components"})]})]}),t&&a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${t.passed?"text-green-600":"text-red-600"}`,children:t.score}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Consistency Score"})]})]})]}),(e==null?void 0:e.affected_components)&&e.affected_components.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("components"),onKeyDown:m=>o(m,()=>i("components")),tabIndex:"0",role:"button","aria-expanded":n.components,"aria-label":"Toggle affected components section",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(su,{className:"w-5 h-5 mr-2"}),"Affected Components"]}),n.components?a.jsx(Lt,{className:"w-5 h-5 text-gray-400"}):a.jsx(pt,{className:"w-5 h-5 text-gray-400"})]}),n.components&&a.jsx("div",{className:"mt-4 space-y-3",children:e.affected_components.map((m,v)=>{const b=d(m.name),x=l(m.risk_level);return a.jsxs("div",{className:`p-4 rounded-lg border ${x.bg} ${x.border}`,children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(b,{className:`w-5 h-5 ${x.accent}`}),a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${x.text}`,children:m.name}),a.jsxs("p",{className:`text-sm ${x.text} opacity-75`,children:["Risk: ",m.risk_level,"  Confidence: ",Math.round((m.confidence||0)*100),"%"]})]})]})}),m.dependencies&&m.dependencies.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:`text-xs ${x.text} opacity-60 mb-1`,children:"Dependencies:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:m.dependencies.map((y,g)=>a.jsx("span",{className:`px-2 py-1 rounded text-xs ${x.accent} bg-white dark:bg-gray-700`,children:y},g))})]})]},v)})})]}),t&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("consistency"),onKeyDown:m=>o(m,()=>i("consistency")),tabIndex:"0",role:"button","aria-expanded":n.consistency,"aria-label":"Toggle consistency validation section",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(ai,{className:"w-5 h-5 mr-2"}),"Consistency Validation",!t.passed&&a.jsx(qr,{className:"w-5 h-5 ml-2 text-red-500"})]}),n.consistency?a.jsx(Lt,{className:"w-5 h-5 text-gray-400"}):a.jsx(pt,{className:"w-5 h-5 text-gray-400"})]}),n.consistency&&a.jsxs("div",{className:"mt-4 space-y-4",children:[a.jsxs("div",{className:`p-4 rounded-lg ${t.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[a.jsxs("div",{className:"flex items-center",children:[t.passed?a.jsx(fe,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}):a.jsx(qr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),a.jsx("span",{className:`font-medium ${t.passed?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:t.passed?"Validation Passed":"Validation Failed"})]}),t.blocking_issues&&t.blocking_issues.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Blocking Issues:"}),t.blocking_issues.map((m,v)=>a.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200 mb-1",children:[" ",m.message,m.suggestion&&a.jsxs("div",{className:"text-xs text-red-600 dark:text-red-300 ml-4 mt-1",children:["Suggestion: ",m.suggestion]})]},v))]})]}),t.category_scores&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Category Breakdown"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.category_scores).map(([m,v])=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:m.replace("_"," ")}),a.jsx("span",{className:`text-sm font-bold ${v>=70?"text-green-600":v>=50?"text-yellow-600":"text-red-600"}`,children:v})]}),a.jsx("div",{className:"mt-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all ${v>=70?"bg-green-500":v>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${v}%`}})})]},m))})]})]})]}),((e==null?void 0:e.recommendations)||(t==null?void 0:t.recommendations))&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("recommendations"),onKeyDown:m=>o(m,()=>i("recommendations")),tabIndex:"0",role:"button","aria-expanded":n.recommendations,"aria-label":"Toggle recommendations section",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(Zn,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),n.recommendations?a.jsx(Lt,{className:"w-5 h-5 text-gray-400"}):a.jsx(pt,{className:"w-5 h-5 text-gray-400"})]}),n.recommendations&&a.jsxs("div",{className:"mt-4 space-y-3",children:[(f=e==null?void 0:e.recommendations)==null?void 0:f.map((m,v)=>a.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(wr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[m.type,": ",m.description]}),m.effort_reduction&&a.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Effort reduction: ",m.effort_reduction]})]})]})},`impact-${v}`)),(p=t==null?void 0:t.recommendations)==null?void 0:p.map((m,v)=>a.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(fe,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:m.message}),m.priority&&a.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs mt-1 ${m.priority==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":m.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":m.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[m.priority," priority"]})]})]})},`consistency-${v}`))]})]}),(e==null?void 0:e.mitigation_strategies)&&e.mitigation_strategies.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("mitigation"),onKeyDown:m=>o(m,()=>i("mitigation")),tabIndex:"0",role:"button","aria-expanded":n.mitigation,"aria-label":"Toggle mitigation strategies section",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(os,{className:"w-5 h-5 mr-2"}),"Mitigation Strategies"]}),n.mitigation?a.jsx(Lt,{className:"w-5 h-5 text-gray-400"}):a.jsx(pt,{className:"w-5 h-5 text-gray-400"})]}),n.mitigation&&a.jsx("div",{className:"mt-4 space-y-2",children:e.mitigation_strategies.map((m,v)=>a.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx(os,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:m})]},v))})]}),(e==null?void 0:e.breaking_changes)&&e.breaking_changes.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(xt,{className:"w-6 h-6 text-red-600 dark:text-red-400 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Breaking Changes Detected"})]}),a.jsx("div",{className:"space-y-2",children:e.breaking_changes.map((m,v)=>a.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[a.jsxs("strong",{children:[m.type,":"]})," ",m.description,m.keyword&&a.jsxs("span",{className:"ml-2 text-xs bg-red-200 dark:bg-red-800 px-2 py-1 rounded",children:['"',m.keyword,'"']})]},v))})]})]})},qA=({impactAnalysis:e,consistencyValidation:t,submission:r,onBack:n,onComplete:s,loading:i})=>{var l;const o=t&&!t.passed;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Application Impact Analysis"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the comprehensive analysis of how your proposed changes will affect the application, including component dependencies, risk assessment, and consistency validation."})]}),a.jsx(WA,{impactAnalysis:e,consistencyValidation:t,submission:r}),o&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(qr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),a.jsx("span",{className:"font-medium text-red-900 dark:text-red-100",children:"Consistency Issues Found"})]}),a.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 mb-3",children:[((l=t.blocking_issues)==null?void 0:l.length)||0," blocking issues must be resolved before proceeding."]}),a.jsx("div",{className:"text-xs text-red-700 dark:text-red-300",children:"Review the Impact Analysis above for detailed recommendations and mitigation strategies."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ce,{onClick:n,variant:"ghost",icon:Tn,children:"Back"}),a.jsx(Ce,{onClick:s,disabled:i||t&&!t.passed,loading:i,variant:o?"secondary":"success",icon:o?xt:us,children:o?"Acknowledge Risks & Continue":"Accept Impact Analysis"})]})]})},GA=({submission:e,questionAnswers:t,onAnswerChange:r,questionsReviewed:n,onQuestionsReviewedChange:s,onBack:i,onComplete:o,loading:l})=>{const c=(e==null?void 0:e.questions)&&e.questions.length>0,u=(e==null?void 0:e.questions)===void 0;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Clarifying Questions"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Answer any clarifying questions about your directive to ensure accurate implementation."})]}),u&&a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generating clarifying questions..."})]})}),c&&a.jsx("div",{className:"space-y-3",children:e.questions.map((d,h)=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start mb-2",children:[a.jsx(Xd,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2 mt-0.5"}),a.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:d.text})]}),a.jsx(Tl,{type:"textarea",name:`question_${h}`,value:(t==null?void 0:t[`question_${h}`])||"",onChange:f=>{r(`question_${h}`,f.target.value)},placeholder:"Your answer...",rows:2,helpText:d.context})]},h))}),!u&&!c&&a.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(fe,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),a.jsx("p",{className:"text-green-800 dark:text-green-200",children:"No clarifying questions needed - your directive is clear!"})]})}),!u&&a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n||!1,onChange:d=>s(d.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c?"I have provided complete answers to all questions":"I confirm no additional questions are needed"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:c?`All ${e.questions.length} clarifying questions have been answered to provide context for implementation.`:"The directive is sufficiently clear and no additional clarification is required."})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ce,{onClick:i,variant:"ghost",icon:Tn,children:"Back"}),a.jsx(Ce,{onClick:o,disabled:l||!n,loading:l,variant:"success",icon:us,children:c?"Submit Answers":"Continue"})]})]})},KA=e=>e==="quick"?[{id:1,title:"Input",icon:"MessageSquare",description:"Enter your directive idea",timeEstimate:2},{id:3,title:"Classification",icon:"Target",description:"Strategic or Tactical",timeEstimate:1},{id:7,title:"Confirmation",icon:"CheckCircle",description:"Review and submit",timeEstimate:1}]:[{id:1,title:"Input & Screenshot",icon:"Camera",description:"Provide feedback and optional screenshot",timeEstimate:3},{id:2,title:"Intent Confirmation",icon:"Target",description:"Review and confirm the extracted intent",timeEstimate:2},{id:3,title:"Classification",icon:"Layers",description:"Review strategic vs tactical breakdown",timeEstimate:2},{id:4,title:"Impact Analysis",icon:"AlertTriangle",description:"Review application impact and consistency validation",timeEstimate:4},{id:5,title:"Synthesis Review",icon:"FileText",description:"Review aligned, required, and recommended items",timeEstimate:5},{id:6,title:"Questions",icon:"MessageSquare",description:"Answer questions to refine the directive",timeEstimate:3},{id:7,title:"Confirmation",icon:"CheckCircle",description:"Review and confirm the final summary",timeEstimate:2}],JA=(e,t)=>t==="quick"?e===1?3:e===3?7:e:e<7?e+1:e,XA={1:[2,3,4,5,6,7],2:[3,4,5,6,7],3:[4,5,6,7],4:[5,6,7],5:[6,7],6:[7]},YA={2:"Intent Summary",3:"Classification",4:"Impact Analysis",5:"Synthesis",6:"Clarifying Questions",7:"Final Summary"},QA=(e,t)=>t.filter(r=>{switch(r){case 2:return e.intent_summary;case 3:return e.strat_tac;case 4:return e.impact_analysis;case 5:return e.synthesis;case 6:return e.questions;case 7:return e.final_summary;default:return!1}}),Qg=e=>e.trim()?e.length<20?{valid:!1,error:"Please provide more detailed feedback (min 20 characters)"}:{valid:!0,error:null}:{valid:!1,error:"Feedback is required"},ZA=e=>{if(!e)return{valid:!0,error:null};try{return new URL(e),{valid:!0,error:null}}catch{return{valid:!1,error:"Please enter a valid URL"}}},eI=["vision","strategy","long-term","transform","innovation","competitive advantage","market position","growth","expansion","culture"],tI=["fix","bug","update","modify","adjust","correct","improve","enhance","optimize","refactor"],rI={dashboard:[{name:"Dashboard",risk_level:"medium",confidence:.8,dependencies:["MetricsCard","ChartComponent"]},{name:"DashboardCard",risk_level:"low",confidence:.7,dependencies:["UI Components"]},{name:"MetricsCard",risk_level:"low",confidence:.6,dependencies:["Data Fetcher"]}],form:[{name:"Form",risk_level:"medium",confidence:.9,dependencies:["Input","Button","Validation"]},{name:"Input",risk_level:"low",confidence:.8,dependencies:["Event Handlers"]},{name:"Button",risk_level:"low",confidence:.9,dependencies:["UI Components"]},{name:"Validation",risk_level:"medium",confidence:.7,dependencies:["Form State"]}],navigation:[{name:"Navigation",risk_level:"medium",confidence:.8,dependencies:["Router","Auth Context"]},{name:"Sidebar",risk_level:"low",confidence:.7,dependencies:["Navigation"]},{name:"Menu",risk_level:"low",confidence:.6,dependencies:["Navigation"]}],table:[{name:"Table",risk_level:"medium",confidence:.8,dependencies:["Data Fetcher","Pagination"]},{name:"DataGrid",risk_level:"high",confidence:.9,dependencies:["Table","Virtual Scroller"]}],modal:[{name:"Modal",risk_level:"medium",confidence:.8,dependencies:["Portal","Focus Trap"]},{name:"Dialog",risk_level:"medium",confidence:.7,dependencies:["Modal"]},{name:"Overlay",risk_level:"low",confidence:.6,dependencies:["Portal"]}],auth:[{name:"Auth",risk_level:"high",confidence:.9,dependencies:["UserContext","Token Manager"]},{name:"Login",risk_level:"high",confidence:.8,dependencies:["Auth","Form"]},{name:"UserContext",risk_level:"high",confidence:.9,dependencies:["State Management"]}],theme:[{name:"ThemeProvider",risk_level:"medium",confidence:.8,dependencies:["CSS Variables","Context API"]},{name:"Dark Mode",risk_level:"medium",confidence:.7,dependencies:["ThemeProvider"]}],api:[{name:"API Client",risk_level:"high",confidence:.9,dependencies:["HTTP Service","Error Handler"]},{name:"Data Fetcher",risk_level:"medium",confidence:.8,dependencies:["API Client"]},{name:"WebSocket",risk_level:"high",confidence:.7,dependencies:["Connection Manager"]}]},vu=["database","auth","security","payment","migration","breaking","major"],nI=["api","integration","workflow","validation","performance"],sI={database:3,migration:4,api:2,auth:3,integration:2,ui:1,style:.5,text:.5},iI=2e3,No="directiveLab_draft",Zg=3e3,aI=8e3,oI=(e,t,r,n)=>{w.useEffect(()=>{if(e===3&&(t!=null&&t.id)&&!(t!=null&&t.strat_tac)){console.log(" [STEP 3] Generating classification data...");const s=r.intentSummary||(t==null?void 0:t.intent_summary)||"";let i=0,o=0;const l=s.toLowerCase();eI.forEach(p=>{l.includes(p)&&(i+=10)}),tI.forEach(p=>{l.includes(p)&&(o+=10)}),i===0&&o===0&&(i=50,o=50);const c=i+o,u=Math.round(i/c*100),d=100-u,h=u>60?"This initiative focuses on strategic goals that will shape long-term direction and capabilities.":d>60?"This initiative addresses immediate operational needs and improvements.":"This initiative balances both strategic vision and tactical execution needs.",f={strat_tac:{strategic_pct:u,tactical_pct:d,rationale:h,generated_at:new Date().toISOString()}};n(p=>({...p,...f})),console.log(" [STEP 3] Classification data generated locally")}},[e,t,r.intentSummary,n])},lI=(e,t,r,n,s,i)=>{w.useEffect(()=>{var o;if(e===4&&(t!=null&&t.id)&&!(t!=null&&t.impact_analysis)){console.log(" [STEP 4] Generating impact analysis data...");const c=(r.intentSummary||(t==null?void 0:t.intent_summary)||"").toLowerCase(),u=[];Object.entries(rI).forEach(([k,N])=>{(c.includes(k)||c.includes(k.replace(/[aeiou]/gi,""))||N.some(j=>c.includes(j.name.toLowerCase())))&&u.push(...N)}),u.length===0&&u.push({name:"UI Components",risk_level:"low",confidence:.5,dependencies:["React Components"]},{name:"State Management",risk_level:"medium",confidence:.6,dependencies:["React Hooks"]},{name:"Event Handlers",risk_level:"low",confidence:.7,dependencies:["DOM Events"]});let d="Low",h="This change appears to be primarily cosmetic or minor functionality enhancement.";vu.some(k=>c.includes(k))?(d="High",h="This change affects critical system components that could impact security, data integrity, or core functionality."):nI.some(k=>c.includes(k))&&(d="Medium",h="This change affects system integrations or business logic that requires careful testing and validation.");const f=[{category:"Design System",status:"compliant",details:"Change adheres to existing design tokens and component patterns"},{category:"Accessibility",status:d==="High"?"review_required":"compliant",details:d==="High"?"WCAG compliance review needed for this change":"No accessibility concerns identified"},{category:"Performance",status:c.includes("performance")?"improvement":"neutral",details:c.includes("performance")?"Change should improve application performance":"No significant performance impact expected"},{category:"Security",status:vu.some(k=>c.includes(k))?"review_required":"compliant",details:vu.some(k=>c.includes(k))?"Security review required before implementation":"No security concerns identified"}];let p=1;Object.entries(sI).forEach(([k,N])=>{c.includes(k)&&(p+=N)});const m=p<=2?"1-2 days":p<=4?"3-5 days":p<=6?"1-2 weeks":"2-4 weeks",v=Math.min(100,Math.round(u.length*10+p*5+(d==="High"?30:d==="Medium"?15:5))),b=Math.round(p*10)/10,x={affected_components:u.slice(0,8),risk_level:d.toLowerCase(),risk_rationale:h,impact_score:v,effort_multiplier:b,estimated_effort:Math.ceil(p),estimated_timeline:m,consistency_validation:f,recommendations:[{type:"Testing",description:`Ensure comprehensive testing for ${u.length} affected components`,effort_reduction:"15-20%"},{type:"Documentation",description:"Update component documentation and integration guides",effort_reduction:"10-15%"}],mitigation_strategies:["Implement feature flags to control rollout","Create comprehensive test suite before deployment","Monitor performance metrics during implementation","Prepare rollback strategy for critical issues"],generated_at:new Date().toISOString()};d==="High"&&(x.breaking_changes=[{type:"API Change",description:"Potential modifications to component interfaces",keyword:((o=c.match(/(auth|api|database)/))==null?void 0:o[0])||"system"}]);const y={};f.forEach(k=>{const N=k.status==="compliant"?85:k.status==="improvement"?95:k.status==="review_required"?25:k.status==="warning"?60:75;y[k.category.toLowerCase().replace(" ","_")]=N});const g={passed:!f.some(k=>k.status==="review_required"),blocking_issues:f.filter(k=>k.status==="review_required").map(k=>({message:`${k.category}: ${k.details}`,suggestion:k.status==="review_required"?"Consider professional review before implementation":null})),warnings:f.filter(k=>k.status==="warning"),score:Math.round(f.filter(k=>k.status==="compliant"||k.status==="improvement").length/f.length*100),category_scores:y,recommendations:f.filter(k=>k.status==="improvement"||k.status==="compliant").map(k=>({message:k.details,priority:k.status==="improvement"?"medium":"low"}))};n(x),s(g),i(k=>({...k,impact_analysis:x,consistency_validation:g})),console.log(" [STEP 4] Impact analysis data generated locally")}},[e,t,r.intentSummary,n,s,i])},cI=(e,t,r,n)=>{w.useEffect(()=>{var s;if(e===5&&(t!=null&&t.id)&&!(t!=null&&t.synthesis)){console.log(" [STEP 5] Generating synthesis data...");const i=(t==null?void 0:t.intent_summary)||r.intentSummary||"",o=(t==null?void 0:t.strat_tac)||{},l=(t==null?void 0:t.impact_analysis)||{},c=[],u=[],d=[];(i.toLowerCase().includes("dark mode")||i.toLowerCase().includes("theme"))&&(c.push("UI theming system already supports dark/light mode switching"),c.push("CSS variables are in place for theme customization")),(i.toLowerCase().includes("dashboard")||i.toLowerCase().includes("ui"))&&(c.push("Component architecture supports modular UI updates"),c.push("Existing design system can be extended")),o.strategic_pct>50&&(u.push("Architecture review and approval from technical lead"),u.push("Comprehensive testing strategy for new features"),u.push("Documentation updates for significant changes")),((l==null?void 0:l.risk_level)==="high"||(l==null?void 0:l.risk_level)==="critical")&&(u.push("Risk mitigation plan implementation"),u.push("Rollback strategy preparation")),i.toLowerCase().includes("performance")&&u.push("Performance benchmarking before and after implementation"),(i.toLowerCase().includes("security")||i.toLowerCase().includes("auth"))&&u.push("Security audit and penetration testing"),o.tactical_pct>60&&(d.push("Incremental deployment with feature flags"),d.push("A/B testing for user-facing changes")),((s=l==null?void 0:l.affected_components)==null?void 0:s.length)>5&&(d.push("Phased implementation to minimize disruption"),d.push("Component isolation testing")),d.push("User acceptance testing with stakeholder group"),d.push("Performance monitoring post-deployment"),c.length===0&&(c.push("Existing infrastructure supports proposed changes"),c.push("Current tooling and frameworks are compatible")),u.length===0&&(u.push("Standard code review process"),u.push("Unit and integration test coverage")),d.length===0&&(d.push("Progressive rollout strategy"),d.push("User feedback collection mechanism"));const h={synthesis:{aligned:c,required:u,recommended:d,generated_at:new Date().toISOString()}};n(f=>({...f,...h})),console.log(" [STEP 5] Synthesis generated")}},[e,t,r.intentSummary,n])},uI=(e,t,r,n)=>{w.useEffect(()=>{var s;if(e===6&&(t!=null&&t.id)&&(t==null?void 0:t.questions)===void 0){console.log(" [STEP 6] Generating clarifying questions...");const i=(t==null?void 0:t.intent_summary)||r.intentSummary||"",o=(t==null?void 0:t.strat_tac)||{},l=(t==null?void 0:t.synthesis)||{},c=[];(i.toLowerCase().includes("ui")||i.toLowerCase().includes("interface"))&&(c.push({text:"What specific UI components or pages should be affected by these changes?",context:"Help us scope the implementation correctly"}),c.push({text:"Do you have any specific design preferences or brand guidelines to follow?",context:"Ensures visual consistency with your requirements"})),o.strategic_pct>60&&(c.push({text:"What is the expected timeline for this strategic initiative?",context:"Helps with resource allocation and planning"}),c.push({text:"Are there any dependencies or prerequisites we should be aware of?",context:"Identifies potential blockers early"})),(s=l.required)!=null&&s.some(d=>d.includes("performance"))&&c.push({text:"What are your specific performance targets or requirements?",context:"Define measurable success criteria"}),(i.toLowerCase().includes("data")||i.toLowerCase().includes("database"))&&c.push({text:"What data retention and backup policies should be considered?",context:"Ensures compliance with data governance"}),c.length<2&&c.push({text:"Are there any specific edge cases or scenarios we should consider?",context:"Helps identify potential issues early"});const u={questions:c.length>0?c:[],questions_generated_at:new Date().toISOString()};n(d=>({...d,...u})),console.log(" [STEP 6] Questions generated")}},[e,t,r.intentSummary,n])},dI=(e,t,r,n)=>{w.useEffect(()=>{var s,i,o;if(e===7&&(t!=null&&t.id)&&!(t!=null&&t.final_summary)){console.log(" [STEP 7] Generating final summary...");const l=(t==null?void 0:t.intent_summary)||r.intentSummary||"",c=(t==null?void 0:t.strat_tac)||{},u=(t==null?void 0:t.impact_analysis)||{},d=(t==null?void 0:t.synthesis)||{};let h=`This directive focuses on: ${l}. `;c.strategic_pct>60?h+=`This is primarily a strategic initiative (${c.strategic_pct}% strategic) that will shape long-term architecture. `:h+=`This is primarily a tactical improvement (${c.tactical_pct}% tactical) focusing on immediate enhancements. `,((s=u.affected_components)==null?void 0:s.length)>0&&(h+=`The implementation will affect ${u.affected_components.length} components with ${u.risk_level||"moderate"} risk level. `),((i=d.required)==null?void 0:i.length)>0&&(h+=`Key requirements include: ${d.required[0]}. `),((o=d.recommended)==null?void 0:o.length)>0&&(h+=`Recommended approach: ${d.recommended[0]}. `),u.effort_estimate&&(h+=`Estimated effort: ${u.effort_estimate}. `),h+="Upon approval, this directive will be converted into a formal PRD and assigned to the implementation team.";const f={final_summary:h,final_summary_generated_at:new Date().toISOString()};n(p=>({...p,...f})),console.log(" [STEP 7] Final summary generated")}},[e,t,r.intentSummary,n])},hI=()=>{var In,bt,Za;const e=Pr(),r=new URLSearchParams(e.search).get("mode")==="quick"?"quick":"comprehensive",n=hk(),[s,i]=w.useState(r),[o,l]=w.useState(1),[c,u]=w.useState(null),[d,h]=w.useState(!1),[f,p]=w.useState(null),[m,v]=w.useState(null),[b,x]=w.useState(!1),[y,g]=w.useState("input"),[k,N]=w.useState(!1),[j,T]=w.useState([]),[E,I]=w.useState(!1),[D,z]=w.useState("intelligent"),[A,_]=w.useState(0),[M,P]=w.useState({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},questionsReviewed:!1,finalConfirmed:!1,summaryConfirmed:!1}),[O,$]=w.useState({}),[R,F]=w.useState({}),[S,U]=w.useState({1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1}),[K,C]=w.useState(null),[re,ye]=w.useState(null),[le,We]=w.useState(!1),[ht,me]=w.useState([]),xe=KA(s);w.useEffect(()=>{const J=()=>{const ae=window.innerWidth<768;x(ae)};return J(),window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[c]),w.useEffect(()=>{const J=setTimeout(()=>{(M.chairmanInput||M.intentSummary)&&(localStorage.setItem(No,JSON.stringify(M)),v("Draft saved"),setTimeout(()=>v(null),Zg))},iI);return()=>clearTimeout(J)},[M]),w.useEffect(()=>{const J=localStorage.getItem(No);J&&(P(JSON.parse(J)),v("Draft restored"),setTimeout(()=>v(null),Zg))},[]),w.useEffect(()=>{o===2&&M.intentSummary&&setTimeout(()=>{const J=document.querySelector('textarea[name="intentSummary"]');J&&(J.style.height="auto",J.style.height=Math.min(J.scrollHeight,300)+"px")},100)},[M.intentSummary,o]),w.useEffect(()=>{var J;o===5&&(c!=null&&c.id)&&(J=c==null?void 0:c.gate_status)!=null&&J.synthesis_reviewed&&We(!0)},[o,c]),oI(o,c,M,u),lI(o,c,M,C,ye,u),cI(o,c,M,u),uI(o,c,M,u),dI(o,c,M,u);const qe=J=>{if(J<o&&c){const L=XA[J]||[],B=QA(c,L);if(B.length>0){const X=B.map(ee=>YA[ee]).join(", ");n.warning(`Editing Step ${J} may invalidate: ${X}`,aI),me(ee=>[...ee,{editedStep:J,timestamp:new Date().toISOString(),affectedSteps:B}])}}},Te=J=>{qe(J),l(J)},nr=async()=>{const J=Qg(M.chairmanInput);if(!J.valid){$({...O,chairmanInput:J.error});return}h(!0),p(null);try{const ae=await fetch("/api/sdip/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:M.chairmanInput,screenshot_url:M.screenshotUrl})});if(!ae.ok)throw new Error("Failed to submit feedback");const L=await ae.json(),B=L.submission||L;u(B),U({...S,1:!0}),l(2),v("Feedback submitted successfully!"),localStorage.removeItem(No),B.id&&await q(B.id,2,{feedback:M.chairmanInput,chairman_input:M.chairmanInput})}catch(ae){p(ae.message)}finally{h(!1)}},q=async(J,ae,L)=>{try{const B=await fetch(`/api/sdip/submissions/${J}/step/${ae}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!B.ok)throw new Error(`Failed to update step ${ae}`);const X=await B.json(),ee=X.submission||X;return u(ee),ae===2&&ee.intent_summary&&P({...M,intentSummary:ee.intent_summary}),ee}catch(B){throw p(B.message),B}},Y=async J=>{var ae,L,B,X,ee;h(!0),p(null);try{if(c&&c.id&&J>1){let Ke={};switch(J){case 2:Ke={intent_summary:M.intentSummary};break;case 3:Ke={strategic_pct:((ae=c.strat_tac)==null?void 0:ae.strategic_pct)||50,tactical_pct:((L=c.strat_tac)==null?void 0:L.tactical_pct)||50,override:M.stratTacOverride};break;case 4:Ke={impact_analysis:K,consistency_validation:re};break;case 5:Ke={aligned:((B=c.synthesis)==null?void 0:B.aligned)||[],required:((X=c.synthesis)==null?void 0:X.required)||[],recommended:((ee=c.synthesis)==null?void 0:ee.recommended)||[],synthesis_reviewed:le};break;case 6:Ke={questions_answers:M.questionAnswers};break;case 7:Ke={final_summary:c.final_summary||M.intentSummary};break}await q(c.id,J,Ke)}U({...S,[J]:!0});const he=JA(J,s);he!==J?(l(he),v(`Step ${J} completed!`)):(v("Directive submitted successfully!"),setTimeout(()=>{Ge()},2e3))}catch(he){p(he.message)}finally{h(!1)}},Z=async()=>{h(!0),p(null);try{if(c&&c.id){const J={final_summary:c.final_summary||M.intentSummary,status:"ready",completed_steps:[1,2,3,4,5,6,7]};await q(c.id,7,J),U({...S,7:!0}),v("Submission saved successfully! You can find it in Recent Submissions."),setTimeout(()=>{Ge(),g("submissions")},2e3)}else throw new Error("No submission to save")}catch(J){p(J.message)}finally{h(!1)}},ie=async()=>{h(!0),p(null);try{if(c&&c.id){const L={final_summary:c.final_summary||M.intentSummary,status:"submitted",completed_steps:[1,2,3,4,5,6,7]};await q(c.id,7,L)}const J=await fetch("/api/sdip/create-strategic-directive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_id:c.id})});if(!J.ok){const L=await J.json();throw new Error(L.error||"Failed to create Strategic Directive")}const ae=await J.json();U({...S,7:!0}),v(`Strategic Directive created successfully! ID: ${ae.sd_id}`),setTimeout(()=>{Ge(),g("submissions")},3e3)}catch(J){p(J.message)}finally{h(!1)}},Ge=()=>{P({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},questionsReviewed:!1,finalConfirmed:!1,summaryConfirmed:!1}),l(1),U({}),u(null),C(null),ye(null)},Ne=J=>{switch(J){case 1:return a.jsx(FA,{chairmanInput:M.chairmanInput,screenshotUrl:M.screenshotUrl,fieldErrors:O,fieldSuccess:R,onChairmanInputChange:ae=>{P({...M,chairmanInput:ae.target.value});const L=Qg(ae.target.value);$({...O,chairmanInput:L.error}),F({...R,chairmanInput:L.valid})},onScreenshotUrlChange:ae=>{P({...M,screenshotUrl:ae.target.value});const L=ZA(ae.target.value);$({...O,screenshotUrl:L.error}),F({...R,screenshotUrl:L.valid})},onSubmit:nr,onSaveDraft:()=>{localStorage.setItem(No,JSON.stringify(M)),v("Draft saved")},loading:d});case 2:return a.jsx(zA,{intentSummary:M.intentSummary,onIntentChange:ae=>{P({...M,intentSummary:ae.target.value}),ae.target&&(ae.target.style.height="auto",ae.target.style.height=Math.min(ae.target.scrollHeight,300)+"px")},onBack:()=>Te(1),onConfirm:()=>Y(2),loading:d});case 3:return a.jsx(VA,{submission:c,stratTacOverride:M.stratTacOverride,onStratTacChange:ae=>P({...M,stratTacOverride:ae}),onResetOverride:()=>P({...M,stratTacOverride:null}),onBack:()=>Te(2),onComplete:()=>Y(3),loading:d});case 4:return a.jsx(qA,{impactAnalysis:K,consistencyValidation:re,submission:c,onBack:()=>Te(3),onComplete:()=>Y(4),loading:d});case 5:return a.jsx(HA,{submission:c,synthesisReviewed:le,onSynthesisReviewedChange:We,onBack:()=>Te(4),onComplete:()=>Y(5),loading:d});case 6:return a.jsx(GA,{submission:c,questionAnswers:M.questionAnswers,onAnswerChange:(ae,L)=>{P({...M,questionAnswers:{...M.questionAnswers,[ae]:L}})},questionsReviewed:M.questionsReviewed,onQuestionsReviewedChange:ae=>P({...M,questionsReviewed:ae}),onBack:()=>Te(5),onComplete:()=>Y(6),loading:d});case 7:return a.jsx(UA,{submission:c,finalConfirmed:M.finalConfirmed,onFinalConfirmedChange:ae=>P({...M,finalConfirmed:ae}),onBack:()=>Te(6),onSaveAndClose:Z,onSubmitDirective:ie,loading:d});default:return a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Step content for Step ",J," coming soon..."]})}},Me=()=>a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 py-1.5 px-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(Ce,{onClick:()=>Te(Math.max(1,o-1)),disabled:o===1,variant:"ghost",size:"small",icon:Tn,children:"Previous"}),a.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Step ",o," of ",xe.length]}),a.jsx(Ce,{onClick:()=>Y(o),disabled:!S[o-1]&&o>1,variant:"primary",size:"small",icon:rc,iconPosition:"right",children:"Next"})]})});return a.jsx($A,{children:a.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Directive Lab"}),a.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>i("quick"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${s==="quick"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Quick Mode"}),a.jsx("button",{onClick:()=>i("comprehensive"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${s==="comprehensive"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Comprehensive"})]})]}),a.jsx(Ce,{onClick:()=>N(!k),variant:"ghost",size:"small",icon:Xd,ariaLabel:"Toggle help",children:"Help"})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Step:"}),a.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:((In=xe[o-1])==null?void 0:In.title)||"Unknown"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",o," of ",xe.length,")"]})]})]})}),k&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800 px-4 py-2",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Xd,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2"}),a.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[a.jsx("p",{className:"font-medium mb-0.5",children:"Getting Started:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-blue-800 dark:text-blue-200",children:[a.jsx("li",{children:"Provide detailed feedback about what you want to improve"}),a.jsx("li",{children:"Each step builds on the previous one"}),a.jsx("li",{children:"Your progress is automatically saved"}),a.jsx("li",{children:"You can navigate back to previous steps at any time"})]})]})]})})}),m&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-green-800 dark:text-green-200 text-sm",children:[a.jsx(fe,{className:"w-4 h-4 mr-2"}),m]})}),f&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-red-800 dark:text-red-200 text-sm",children:[a.jsx(zt,{className:"w-4 h-4 mr-2"}),f]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx(DA,{steps:xe,currentStep:o,orientation:"horizontal",showTimeEstimates:!b,compact:!0,hideLabelsOnMobile:!0,onStepClick:Te})})}),a.jsx(Me,{}),a.jsxs("div",{className:"flex-1 px-4 py-2 flex flex-col min-h-0",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg shadow-sm border border-gray-200 dark:border-gray-700 border-b-0 flex-shrink-0",children:a.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{onClick:()=>g("input"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${y==="input"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zf,{className:"w-4 h-4"}),"Input & Screenshot"]}),y==="input"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]}),a.jsxs("button",{onClick:()=>g("submissions"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${y==="submissions"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(He,{className:"w-4 h-4"}),"Recent Submissions",c&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),y==="submissions"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-b-lg shadow-sm border border-gray-200 dark:border-gray-700 border-t-0 flex-1 relative flex flex-col overflow-hidden",children:[a.jsxs("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out flex flex-col ${y==="input"?"translate-x-0 opacity-100":"translate-x-full opacity-0 pointer-events-none"}`,children:[a.jsxs("div",{className:"mb-3 flex-shrink-0",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((bt=xe[o-1])==null?void 0:bt.title)||"Step "+o}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:((Za=xe[o-1])==null?void 0:Za.description)||"Loading..."})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:Ne(o)})]}),a.jsx("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out ${y==="submissions"?"translate-x-0 opacity-100":"-translate-x-full opacity-0 pointer-events-none"}`,children:a.jsxs("div",{className:"h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Submissions"}),a.jsx(Ce,{onClick:()=>_(J=>J+1),variant:"ghost",size:"small",icon:tr,ariaLabel:"Refresh submissions"})]}),a.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:a.jsx(LA,{onSubmissionSelect:J=>{u(J),J&&setTimeout(()=>g("input"),300)},selectedSubmissionId:c==null?void 0:c.id,onSelectionChange:T,refreshTrigger:A,onGroupCreate:(J,ae="intelligent")=>{T(J),z(ae),I(!0)}})})]})})]})]}),E&&a.jsx(OA,{selectedSubmissions:j,combineMethod:D,onClose:()=>I(!1),onSuccess:()=>{I(!1),_(J=>J+1)}})]})})};function ex({backlogData:e=[],strategicDirectives:t=[],isCompact:r,onRefresh:n}){const{id:s}=yf(),i=Cn(),o=Pr(),c=new URLSearchParams(o.search).get("sd"),[u,d]=w.useState({}),[h,f]=w.useState(""),[p,m]=w.useState("all"),[v,b]=w.useState(c||"all"),[x,y]=w.useState(!1),[g,k]=w.useState("all"),[N,j]=w.useState(!0),[T,E]=w.useState([]),[I,D]=w.useState({});w.useEffect(()=>{(async()=>{j(!0);try{const $=v&&v!=="all"?`/api/backlog/strategic-directives/${v}`:"/api/backlog/strategic-directives-with-items",F=await(await fetch($)).json();if(v&&v!=="all")E(F.backlog_items||[]),D({[F.sd_id]:{sd:F,items:F.backlog_items||[]}});else{const S={};F.forEach(K=>{S[K.sd_id]={sd:K,items:K.backlog_items||[]}}),D(S);const U=F.flatMap(K=>K.backlog_items||[]);E(U)}}catch($){console.error("Error loading backlog:",$)}finally{j(!1)}})()},[v]);const z=Object.entries(I).reduce((O,[$,R])=>{let F=R.items;if(h){const S=h.toLowerCase();F=F.filter(U=>{var K,C,re,ye;return((K=U.backlog_title)==null?void 0:K.toLowerCase().includes(S))||((C=U.item_description)==null?void 0:C.toLowerCase().includes(S))||((re=U.backlog_id)==null?void 0:re.toLowerCase().includes(S))||((ye=U.my_comments)==null?void 0:ye.toLowerCase().includes(S))})}return p!=="all"&&(F=F.filter(S=>{var U;return((U=S.priority)==null?void 0:U.toLowerCase())===p.toLowerCase()})),g==="yes"?F=F.filter(S=>S.new_module===!0):g==="no"&&(F=F.filter(S=>S.new_module===!1)),F.length>0&&(O[$]={...R,items:F}),O},{}),A=O=>{if(!O)return null;const $=O.toLowerCase(),R={high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:as},h:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:as},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:cn},m:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:cn},low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:cn},l:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:cn},future:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-300",icon:hr}},F=R[$]||R.low,S=F.icon;return a.jsxs("span",{className:`inline-flex items-center ${r?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${F.bg} ${F.text}`,children:[a.jsx(S,{className:"w-3 h-3 mr-1"}),O]})},_=O=>{d($=>({...$,[O]:!$[O]}))},M=(O,$)=>{(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),$())};if(N)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading backlog..."})});const P=Object.values(z).reduce((O,$)=>O+$.items.length,0);return a.jsxs("div",{className:r?"p-3":"p-6",children:[a.jsxs("div",{className:r?"mb-3":"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ii,{className:r?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),a.jsx("h1",{className:r?"text-xl font-semibold":"text-2xl font-bold",children:"Backlog Management"}),a.jsxs("span",{className:`ml-3 ${r?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[P," items"]})]}),a.jsx(op,{onRefresh:n,isCompact:r})]}),a.jsxs("div",{className:`flex flex-wrap gap-2 ${r?"mb-3":"mb-4"}`,children:[a.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[a.jsx(_w,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${r?"w-4 h-4":"w-5 h-5"} text-gray-400`}),a.jsx("input",{type:"text",value:h,onChange:O=>f(O.target.value),placeholder:"Search backlog items...",className:`w-full ${r?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),a.jsxs("select",{value:v,onChange:O=>b(O.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Strategic Directives"}),Object.values(I).map(({sd:O})=>a.jsx("option",{value:O.sd_id,children:O.sd_title},O.sd_id))]}),a.jsxs("select",{value:p,onChange:O=>m(O.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Priorities"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"future",children:"Future"})]}),a.jsxs("select",{value:g,onChange:O=>k(O.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Items"}),a.jsx("option",{value:"yes",children:"New Module"}),a.jsx("option",{value:"no",children:"Existing Module"})]}),a.jsxs("button",{onClick:()=>i("/backlog/new"),className:`flex items-center ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[a.jsx(sp,{className:`${r?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Backlog Item"]})]})]}),a.jsx("div",{className:"space-y-4",children:Object.entries(z).map(([O,{sd:$,items:R}])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:`${r?"p-3":"p-4"} border-b border-gray-200 dark:border-gray-700`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:`${r?"text-base":"text-lg"} font-semibold text-gray-900 dark:text-white`,children:$.sd_title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:$.sd_id}),$.rolled_triage&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${$.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":$.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":$.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:["Triage: ",$.rolled_triage]}),$.must_have_pct!==null&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:[$.must_have_pct,"% Must-Have"]}),a.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:[R.length," items"]})]})]}),a.jsx("button",{onClick:()=>i(`/strategic-directives/${$.sd_id}`),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:a.jsx(He,{className:r?"w-4 h-4":"w-5 h-5"})})]})}),a.jsx("div",{className:r?"p-2":"p-3",children:R.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No backlog items found"}):a.jsx("div",{className:"space-y-2",children:R.map(F=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:a.jsxs("div",{className:`${r?"p-2":"p-3"} cursor-pointer`,onClick:()=>_(`${O}-${F.backlog_id}`),onKeyDown:S=>M(S,()=>_(`${O}-${F.backlog_id}`)),tabIndex:"0",role:"button","aria-expanded":u[`${O}-${F.backlog_id}`]||!1,"aria-label":`Toggle details for ${F.backlog_title}`,children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start flex-1",children:[a.jsx("div",{className:"mr-2 mt-1",children:u[`${O}-${F.backlog_id}`]?a.jsx(Lt,{className:"w-4 h-4 text-gray-400"}):a.jsx(pt,{className:"w-4 h-4 text-gray-400"})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-mono text-xs text-gray-500 dark:text-gray-400",children:F.backlog_id}),a.jsx("span",{className:`${r?"text-sm":"text-base"} font-medium text-gray-900 dark:text-white`,children:F.backlog_title}),F.new_module&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:"New Module"})]})})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[A(F.priority),F.stage_number&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded",children:["Stage ",F.stage_number]})]})]}),u[`${O}-${F.backlog_id}`]&&a.jsxs("div",{className:`mt-3 ${r?"pl-5":"pl-6"} space-y-2`,children:[F.item_description&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:F.item_description})]}),F.my_comments&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Comments"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:F.my_comments})]}),F.phase&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Phase"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:F.phase})]}),F.description_raw&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tags"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:F.description_raw})]})]})]})},`${O}-${F.backlog_id}`))})})]},O))}),Object.keys(z).length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ii,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No backlog items found matching your filters"})]})]})}function fI({metrics:e,activeCount:t,totalReviews:r}){const n=[{title:"Active Reviews",value:t,icon:tc,color:"blue",trend:null},{title:"Pass Rate",value:`${e.passRate}%`,icon:fe,color:"green",trend:e.passRate>85?"up":"down",trendValue:e.passRate>85?"Good":"Needs Improvement"},{title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,icon:hr,color:"purple",trend:e.avgTime<5e3?"up":"down",trendValue:e.avgTime<5e3?"Fast":"Slow"},{title:"False Positive Rate",value:`${e.falsePositiveRate}%`,icon:xt,color:e.falsePositiveRate>15?"yellow":"green",trend:e.falsePositiveRate<15?"up":"down",trendValue:e.falsePositiveRate<15?"On Target":"High"},{title:"Compliance Rate",value:`${e.complianceRate}%`,icon:ai,color:e.complianceRate>=95?"green":"yellow",trend:e.complianceRate>=95?"up":"down",trendValue:`${r} total reviews`}],s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:n.map((i,o)=>{const l=i.icon,c={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400"};return a.jsxs(oe.div,{variants:s,initial:"hidden",animate:"visible",transition:{delay:o*.05},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${c[i.color]}`,children:a.jsx(l,{className:"w-5 h-5"})}),i.trend&&a.jsx("div",{className:"flex items-center space-x-1",children:i.trend==="up"?a.jsx(as,{className:"w-4 h-4 text-green-500"}):a.jsx(cn,{className:"w-4 h-4 text-red-500"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.value}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.title}),i.trendValue&&a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:i.trendValue})]})]},i.title)})})}function pI({reviews:e,loading:t}){if(t)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Sw,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Active Reviews"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All PR reviews have been completed or there are no PRs to review."})]});const r=o=>{switch(o){case"pending":return a.jsx(hr,{className:"w-5 h-5 text-yellow-500"});case"passed":return a.jsx(fe,{className:"w-5 h-5 text-green-500"});case"failed":return a.jsx(qr,{className:"w-5 h-5 text-red-500"});case"warning":return a.jsx(xt,{className:"w-5 h-5 text-orange-500"});default:return a.jsx(hr,{className:"w-5 h-5 text-gray-500"})}},n=o=>{const c={security:ai,performance:os,database:qa,testing:RE}[o]||He;return a.jsx(c,{className:"w-4 h-4"})},s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}};return a.jsx(oe.div,{variants:s,initial:"hidden",animate:"visible",className:"space-y-4",children:e.map((o,l)=>a.jsxs(oe.div,{variants:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[r(o.status),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["PR #",o.pr_number,": ",o.pr_title]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(rp,{className:"w-3 h-3"}),a.jsx("span",{children:o.branch})]}),a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Cw,{className:"w-3 h-3"}),a.jsx("span",{children:o.author})]}),o.sd_link&&a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["SD: ",o.sd_link]}),o.prd_link&&a.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["PRD: ",o.prd_link]})]})]})]}),a.jsx("a",{href:o.github_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"View on GitHub",children:a.jsx(tp,{className:"w-5 h-5"})})]}),o.sub_agent_reviews&&o.sub_agent_reviews.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:o.sub_agent_reviews.map(c=>a.jsxs("div",{className:`
                      flex items-center space-x-2 px-3 py-2 rounded-md text-sm
                      ${c.status==="passed"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":c.status==="failed"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}
                    `,children:[n(c.sub_agent),a.jsx("span",{className:"capitalize",children:c.sub_agent})]},c.sub_agent))})]}),o.summary&&a.jsx("div",{className:"mb-4",children:a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o.summary})}),o.issues&&o.issues.length>0&&a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-md p-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:["Issues Found (",o.issues.length,")"]}),a.jsxs("ul",{className:"space-y-1",children:[o.issues.slice(0,3).map((c,u)=>a.jsxs("li",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[" ",c]},u)),o.issues.length>3&&a.jsxs("li",{className:"text-sm text-yellow-600 dark:text-yellow-500 italic",children:["... and ",o.issues.length-3," more"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["Started: ",new Date(o.created_at).toLocaleTimeString()]}),o.review_time_ms&&a.jsxs("span",{children:["Duration: ",(o.review_time_ms/1e3).toFixed(1),"s"]})]}),o.status==="pending"&&a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-600 dark:text-yellow-400",children:[a.jsx(hr,{className:"w-3 h-3 animate-pulse"}),a.jsx("span",{children:"In Progress"})]})]})]},o.id))})}function mI({reviews:e,loading:t}){const[r,n]=w.useState(new Set);if(t)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(He,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Review History"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Review history will appear here once PR reviews are completed."})]});const s=c=>{const u=new Set(r);u.has(c)?u.delete(c):u.add(c),n(u)},i=c=>{const u={passed:{icon:fe,color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",label:"Passed"},failed:{icon:qr,color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",label:"Failed"},warning:{icon:xt,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",label:"Warning"}},d=u[c]||u.warning,h=d.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:[a.jsx(h,{className:"w-3 h-3 mr-1"}),d.label]})},o=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=c=>{if(!c)return"N/A";const u=c/1e3;if(u<60)return`${u.toFixed(1)}s`;const d=Math.floor(u/60),h=(u%60).toFixed(0);return`${d}m ${h}s`};return a.jsx("div",{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-md rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"PR Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Author"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Issues"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Links"}),a.jsx("th",{className:"relative px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"Actions"})})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(c=>{var d,h;const u=r.has(c.id);return a.jsxs(jr.Fragment,{children:[a.jsxs(oe.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["PR #",c.pr_number]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:c.pr_title}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(rp,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.branch})]})]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Cw,{className:"w-4 h-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:c.author})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i(c.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((d=c.issues)==null?void 0:d.length)||0})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(hr,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{children:l(c.review_time_ms)})]}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(dE,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:o(c.created_at)})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[c.github_url&&a.jsx("a",{href:c.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"View on GitHub",children:a.jsx(tp,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[c.sd_link&&a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"SD"}),c.prd_link&&a.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"PRD"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>s(c.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:u?a.jsx(nc,{className:"w-5 h-5"}):a.jsx(Lt,{className:"w-5 h-5"})})})]}),u&&a.jsx("tr",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsx("td",{colSpan:"7",className:"px-6 py-4",children:a.jsxs("div",{className:"space-y-4",children:[c.summary&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Review Summary"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.summary})]}),c.sub_agent_reviews&&c.sub_agent_reviews.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:c.sub_agent_reviews.map(f=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm capitalize text-gray-700 dark:text-gray-300",children:f.sub_agent}),i(f.status)]},f.sub_agent))})]}),c.issues&&c.issues.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Issues Found"}),a.jsx("ul",{className:"space-y-1",children:c.issues.map((f,p)=>a.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",f]},p))})]}),c.metadata&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commit"}),a.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:((h=c.commit_sha)==null?void 0:h.substring(0,7))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.leo_phase||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"False Positive"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.is_false_positive?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Review ID"}),a.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:c.id.substring(0,8)})]})]})]})})})]},c.id)})})]})})}function gI({metrics:e,reviews:t}){const[r,n]=w.useState("7d"),[s,i]=w.useState("overview"),o=w.useMemo(()=>{if(!t||t.length===0)return null;const c=new Date,u={"24h":1440*60*1e3,"7d":10080*60*1e3,"30d":720*60*60*1e3},d=c-u[r],h=t.filter(m=>new Date(m.created_at)>=d),f={};h.forEach(m=>{const v=new Date(m.created_at).toLocaleDateString();f[v]||(f[v]={total:0,passed:0,failed:0,warnings:0}),f[v].total++,m.status==="passed"?f[v].passed++:m.status==="failed"?f[v].failed++:m.status==="warning"&&f[v].warnings++});const p={};return h.forEach(m=>{m.sub_agent_reviews&&m.sub_agent_reviews.forEach(v=>{p[v.sub_agent]||(p[v.sub_agent]={total:0,passed:0,failed:0,avgTime:[]}),p[v.sub_agent].total++,v.status==="passed"?p[v.sub_agent].passed++:p[v.sub_agent].failed++,v.review_time_ms&&p[v.sub_agent].avgTime.push(v.review_time_ms)})}),Object.keys(p).forEach(m=>{const v=p[m];v.passRate=(v.passed/v.total*100).toFixed(1),v.avgTime.length>0&&(v.avgTimeMs=v.avgTime.reduce((b,x)=>b+x,0)/v.avgTime.length)}),{dailyData:Object.entries(f).slice(-7),subAgentStats:p,totalReviews:h.length,passRate:h.length>0?(h.filter(m=>m.status==="passed").length/h.length*100).toFixed(1):0}},[t,r]),l=[{id:"compliance",title:"Compliance Rate",value:`${e.complianceRate}%`,target:"95%",status:e.complianceRate>=95?"good":"warning",description:"SD/PRD linkage compliance"},{id:"false-positive",title:"False Positive Rate",value:`${e.falsePositiveRate}%`,target:"<15%",status:e.falsePositiveRate<=15?"good":"warning",description:"Reviews marked as false positives"},{id:"avg-time",title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,target:"<5s",status:e.avgTime<5e3?"good":"warning",description:"Average time per review"},{id:"coverage",title:"Coverage",value:`${(o==null?void 0:o.totalReviews)||0}`,target:"PRs",status:"neutral",description:`Reviews in ${r}`}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Metrics"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"time-range-select",className:"sr-only",children:"Time Range"}),a.jsxs("select",{id:"time-range-select",value:r,onChange:c=>n(c.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[a.jsx("option",{value:"24h",children:"Last 24 Hours"}),a.jsx("option",{value:"7d",children:"Last 7 Days"}),a.jsx("option",{value:"30d",children:"Last 30 Days"})]}),a.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Export Metrics",children:a.jsx(pE,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(c=>a.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.value})]}),a.jsx("div",{className:`
                p-2 rounded-lg
                ${c.status==="good"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":c.status==="warning"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}
              `,children:c.status==="good"?a.jsx(as,{className:"w-4 h-4"}):c.status==="warning"?a.jsx(cn,{className:"w-4 h-4"}):a.jsx(tc,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Target: ",c.target]}),a.jsx("span",{className:"text-gray-400 dark:text-gray-500",title:c.description,children:a.jsx(wr,{className:"w-3 h-3"})})]})]},c.id))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(cE,{className:"w-5 h-5 mr-2"}),"Daily Review Trend"]}),o!=null&&o.dailyData&&o.dailyData.length>0?a.jsxs("div",{className:"space-y-3",children:[o.dailyData.map(([c,u])=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 overflow-hidden",children:a.jsxs("div",{className:"h-full flex",children:[a.jsx("div",{className:"bg-green-500 transition-all duration-300",style:{width:`${u.passed/u.total*100}%`}}),a.jsx("div",{className:"bg-red-500 transition-all duration-300",style:{width:`${u.failed/u.total*100}%`}}),a.jsx("div",{className:"bg-yellow-500 transition-all duration-300",style:{width:`${u.warnings/u.total*100}%`}})]})}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 w-10",children:u.total})]})]},c)),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Passed"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Failed"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Warnings"})]})]})]}):a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available for selected period"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(_E,{className:"w-5 h-5 mr-2"}),"Sub-Agent Performance"]}),o!=null&&o.subAgentStats&&Object.keys(o.subAgentStats).length>0?a.jsx("div",{className:"space-y-3",children:Object.entries(o.subAgentStats).map(([c,u])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:c}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[u.total," reviews"]}),a.jsxs("span",{className:`font-medium ${parseFloat(u.passRate)>=85?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:[u.passRate,"% pass"]})]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${parseFloat(u.passRate)>=85?"bg-green-500":"bg-yellow-500"}`,style:{width:`${u.passRate}%`}})}),u.avgTimeMs&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg time: ",(u.avgTimeMs/1e3).toFixed(1),"s"]})]},c))}):a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No sub-agent data available"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"System Health Summary"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),a.jsx("p",{className:`text-lg font-semibold ${e.falsePositiveRate<=15&&e.complianceRate>=95?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:e.falsePositiveRate<=15&&e.complianceRate>=95?"Healthy":"Needs Attention"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Reviews"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.totalToday})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pass Rate Trend"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(o==null?void 0:o.passRate)||e.passRate,"%",(o==null?void 0:o.passRate)>e.passRate?a.jsx(as,{className:"w-4 h-4 ml-2 text-green-500"}):a.jsx(cn,{className:"w-4 h-4 ml-2 text-red-500"})]})]})]})]})]})}function xI({state:e,isConnected:t,refreshData:r}){const[n,s]=w.useState([]),[i,o]=w.useState({totalToday:0,passRate:0,avgTime:0,falsePositiveRate:0,complianceRate:0}),[l,c]=w.useState(!0),[u,d]=w.useState("active"),[h,f]=w.useState("all");w.useEffect(()=>{p(),m()},[]),w.useEffect(()=>{e!=null&&e.prReviews&&(e.prReviews.reviews&&s(e.prReviews.reviews),e.prReviews.metrics&&o(e.prReviews.metrics))},[e==null?void 0:e.prReviews]);const p=async()=>{try{const k=await(await fetch("/api/pr-reviews")).json();s(k||[])}catch(g){console.error("Failed to load PR reviews:",g)}finally{c(!1)}},m=async()=>{try{const k=await(await fetch("/api/pr-reviews/metrics")).json();o(k)}catch(g){console.error("Failed to load metrics:",g)}},v=async()=>{c(!0),await Promise.all([p(),m()]),c(!1)},b=n.filter(g=>g.status==="pending");n.filter(g=>g.status!=="pending");const x=h==="all"?n:n.filter(g=>g.status===h),y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Sw,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"PR Reviews"}),t&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300",children:"Live"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:v,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Refresh",children:a.jsx(tr,{className:`w-5 h-5 ${l?"animate-spin":""}`})}),a.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Settings",children:a.jsx(PE,{className:"w-5 h-5"})})]})]}),a.jsx(fI,{metrics:i,activeCount:b.length,totalReviews:n.length}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:["active","history","metrics"].map(g=>a.jsxs("button",{onClick:()=>d(g),className:`
                py-2 px-1 border-b-2 font-medium text-sm capitalize
                ${u===g?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
              `,children:[g==="active"&&`Active (${b.length})`,g==="history"&&"Review History",g==="metrics"&&"Metrics & Trends"]},g))})}),a.jsxs(oe.div,{variants:y,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:[u==="active"&&a.jsx(pI,{reviews:b,loading:l}),u==="history"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("label",{htmlFor:"filter-status",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filter:"}),a.jsxs("select",{id:"filter-status",value:h,onChange:g=>f(g.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600","aria-label":"Filter PR reviews by status",children:[a.jsx("option",{value:"all",children:"All Reviews"}),a.jsx("option",{value:"passed",children:"Passed"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"warning",children:"Warnings"})]}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",x.length," reviews"]})]}),a.jsx(mI,{reviews:x.filter(g=>g.status!=="pending"),loading:l})]}),u==="metrics"&&a.jsx(gI,{metrics:i,reviews:n})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tc,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.totalToday," reviews today"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fe,{className:"w-4 h-4 text-green-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.passRate,"% pass rate"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(hr,{className:"w-4 h-4 text-blue-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[(i.avgTime/1e3).toFixed(1),"s avg time"]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:i.falsePositiveRate>15?a.jsxs("span",{className:"flex items-center space-x-1 text-sm text-yellow-600 dark:text-yellow-400",children:[a.jsx(xt,{className:"w-4 h-4"}),a.jsx("span",{children:"High false positive rate"})]}):a.jsxs("span",{className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400",children:[a.jsx(fe,{className:"w-4 h-4"}),a.jsx("span",{children:"System healthy"})]})})]})]})}const yI=({children:e,defaultValue:t,className:r=""})=>{const[n,s]=jr.useState(t);return a.jsx("div",{className:`tabs ${r}`,"data-active-tab":n,children:jr.Children.map(e,i=>jr.cloneElement(i,{activeTab:n,setActiveTab:s}))})},vI=({children:e,className:t="",activeTab:r,setActiveTab:n})=>a.jsx("div",{className:`flex space-x-1 border-b ${t}`,role:"tablist",children:jr.Children.map(e,s=>jr.cloneElement(s,{activeTab:r,setActiveTab:n}))}),bu=({value:e,children:t,className:r="",activeTab:n,setActiveTab:s})=>{const i=n===e;return a.jsx("button",{role:"tab","aria-selected":i,"aria-controls":`tab-panel-${e}`,onClick:()=>s(e),className:`px-4 py-2 text-sm font-medium transition-colors ${i?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"} ${r}`,"aria-label":typeof t=="string"?t:`Tab ${e}`,children:t})},wu=({value:e,children:t,className:r="",activeTab:n})=>n!==e?null:a.jsx("div",{id:`tab-panel-${e}`,role:"tabpanel","aria-labelledby":`tab-${e}`,className:`mt-4 ${r}`,children:t}),bI="modulepreload",wI=function(e){return"/"+e},tx={},Xa=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=wI(c),c in tx)return;tx[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":bI,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},kI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xa(async()=>{const{default:n}=await Promise.resolve().then(()=>yi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Sp extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class rx extends Sp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class nx extends Sp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class sx extends Sp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ch;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ch||(ch={}));var jI=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class SI{constructor(t,{headers:r={},customFetch:n,region:s=ch.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=kI(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return jI(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${t}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:l}).catch(b=>{throw b.name==="AbortError"?b:new rx(b)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new nx(f);if(!f.ok)throw new sx(f);let m=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return m==="application/json"?v=yield f.json():m==="application/octet-stream"?v=yield f.blob():m==="text/event-stream"?v=f:m==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new rx(s)}:{data:null,error:s,response:s instanceof sx||s instanceof nx?s.context:void 0}}})}}var St={},Np={},cc={},Ya={},uc={},dc={},NI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},oi=NI();const _I=oi.fetch,fk=oi.fetch.bind(oi),pk=oi.Headers,CI=oi.Request,EI=oi.Response,yi=Object.freeze(Object.defineProperty({__proto__:null,Headers:pk,Request:CI,Response:EI,default:fk,fetch:_I},Symbol.toStringTag,{value:"Module"})),TI=Uk(yi);var hc={};Object.defineProperty(hc,"__esModule",{value:!0});let PI=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};hc.default=PI;var mk=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dc,"__esModule",{value:!0});const AI=mk(TI),II=mk(hc);let RI=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=AI.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,f=null,p=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,m="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{d=JSON.parse(b),Array.isArray(d)&&i.status===404&&(h=[],d=null,p=200,m="OK")}catch{i.status===404&&b===""?(p=204,m="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new II.default(d)}return{error:d,data:h,count:f,status:p,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};dc.default=RI;var DI=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uc,"__esModule",{value:!0});const LI=DI(dc);let OI=class extends LI.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};uc.default=OI;var MI=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ya,"__esModule",{value:!0});const $I=MI(uc);let FI=class extends $I.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Ya.default=FI;var zI=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cc,"__esModule",{value:!0});const Di=zI(Ya);let UI=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Di.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Di.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Di.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Di.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Di.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};cc.default=UI;var gk=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Np,"__esModule",{value:!0});const BI=gk(cc),VI=gk(Ya);let HI=class xk{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new BI.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new xk(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new VI.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Np.default=HI;var vi=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(St,"__esModule",{value:!0});St.PostgrestError=St.PostgrestBuilder=St.PostgrestTransformBuilder=St.PostgrestFilterBuilder=St.PostgrestQueryBuilder=St.PostgrestClient=void 0;const yk=vi(Np);St.PostgrestClient=yk.default;const vk=vi(cc);St.PostgrestQueryBuilder=vk.default;const bk=vi(Ya);St.PostgrestFilterBuilder=bk.default;const wk=vi(uc);St.PostgrestTransformBuilder=wk.default;const kk=vi(dc);St.PostgrestBuilder=kk.default;const jk=vi(hc);St.PostgrestError=jk.default;var WI=St.default={PostgrestClient:yk.default,PostgrestQueryBuilder:vk.default,PostgrestFilterBuilder:bk.default,PostgrestTransformBuilder:wk.default,PostgrestBuilder:kk.default,PostgrestError:jk.default};const{PostgrestClient:qI,PostgrestQueryBuilder:cD,PostgrestFilterBuilder:uD,PostgrestTransformBuilder:dD,PostgrestBuilder:hD,PostgrestError:fD}=WI;class GI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const KI="2.15.5",JI=`realtime-js/${KI}`,XI="1.0.0",uh=1e4,YI=1e3,QI=100;var oa;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(oa||(oa={}));var Je;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Je||(Je={}));var lr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(lr||(lr={}));var dh;(function(e){e.websocket="websocket"})(dh||(dh={}));var Vn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vn||(Vn={}));class ZI{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Sk{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ve;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ve||(ve={}));const ix=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=e6(o,e,t,s),i),{})},e6=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Nk(i,o):hh(o)},Nk=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return s6(t,r)}switch(e){case ve.bool:return t6(t);case ve.float4:case ve.float8:case ve.int2:case ve.int4:case ve.int8:case ve.numeric:case ve.oid:return r6(t);case ve.json:case ve.jsonb:return n6(t);case ve.timestamp:return i6(t);case ve.abstime:case ve.date:case ve.daterange:case ve.int4range:case ve.int8range:case ve.money:case ve.reltime:case ve.text:case ve.time:case ve.timestamptz:case ve.timetz:case ve.tsrange:case ve.tstzrange:return hh(t);default:return hh(t)}},hh=e=>e,t6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},r6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},n6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},s6=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Nk(t,l))}return e},i6=e=>typeof e=="string"?e.replace(" ","T"):e,_k=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ku{constructor(t,r,n={},s=uh){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ax;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ax||(ax={}));class la{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=la.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=la.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=la.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),m=d.filter(b=>p.indexOf(b.presence_ref)<0),v=h.filter(b=>f.indexOf(b.presence_ref)<0);m.length>0&&(l[u]=m),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ox;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ox||(ox={}));var ca;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ca||(ca={}));var Dr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Dr||(Dr={}));class _p{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ku(this,lr.join,this.params,this.timeout),this.rejoinTimer=new Sk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Je.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new la(this),this.broadcastEndpointURL=_k(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Je.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[ca.PRESENCE]&&this.bindings[ca.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Dr.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Dr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){t==null||t(Dr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,x=[];for(let y=0;y<b;y++){const g=v[y],{filter:{event:k,schema:N,table:j,filter:T}}=g,E=p&&p[y];if(E&&E.event===k&&E.schema===N&&E.table===j&&E.filter===T)x.push(Object.assign(Object.assign({},g),{id:E.id}));else{this.unsubscribe(),this.state=Je.errored,t==null||t(Dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Dr.SUBSCRIBED);return}}).receive("error",p=>{this.state=Je.errored,t==null||t(Dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Je.joined&&t===ca.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Je.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ku(this,lr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Je.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ku(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>QI){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=lr;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,v,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,v,b,x,y,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const k=p.id,N=(m=p.filter)===null||m===void 0?void 0:m.event;return k&&((v=r.ids)===null||v===void 0?void 0:v.includes(k))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const k=(y=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return k==="*"||k===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:v,table:b,commit_timestamp:x,type:y,errors:g}=m;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:x,eventType:y,new:{},old:{},errors:g}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===Je.closed}_isJoined(){return this.state===Je.joined}_isJoining(){return this.state===Je.joining}_isLeaving(){return this.state===Je.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&_p.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(lr.close,{},t)}_onError(t){this._on(lr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Je.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ix(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ix(t.columns,t.old_record)),r}}const ju=()=>{},_o={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},a6=[1e3,2e3,5e3,1e4],o6=1e4,l6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class c6{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=uh,this.transport=null,this.heartbeatIntervalMs=_o.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ju,this.ref=0,this.reconnectTimer=null,this.logger=ju,this.conn=null,this.sendBuffer=[],this.serializer=new ZI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Xa(async()=>{const{default:l}=await Promise.resolve().then(()=>yi);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${dh.websocket}`,this.httpEndpoint=_k(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=GI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:XI}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case oa.connecting:return Vn.Connecting;case oa.open:return Vn.Open;case oa.closing:return Vn.Closing;default:return Vn.Closed}}isConnected(){return this.connectionState()===Vn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new _p(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(YI,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},_o.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(lr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([l6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:JI};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(lr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Sk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_o.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:uh,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:_o.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:ju,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(h=>a6[h-1]||o6),this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:((h,f)=>f(JSON.stringify(h))),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Cp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ue(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class u6 extends Cp{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fh extends Cp{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var d6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ck=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xa(async()=>{const{default:n}=await Promise.resolve().then(()=>yi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},h6=()=>d6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xa(()=>Promise.resolve().then(()=>yi),void 0)).Response:Response}),ph=e=>{if(Array.isArray(e))return e.map(r=>ph(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=ph(n)}),t},f6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var hs=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Su=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),p6=(e,t,r)=>hs(void 0,void 0,void 0,function*(){const n=yield h6();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new u6(Su(s),i,o))}).catch(s=>{t(new fh(Su(s),s))}):t(new fh(Su(e),e))}),m6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(f6(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Qa(e,t,r,n,s,i){return hs(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,m6(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>p6(c,l,n))})})}function Pl(e,t,r,n){return hs(this,void 0,void 0,function*(){return Qa(e,"GET",t,r,n)})}function vr(e,t,r,n,s){return hs(this,void 0,void 0,function*(){return Qa(e,"POST",t,n,s,r)})}function mh(e,t,r,n,s){return hs(this,void 0,void 0,function*(){return Qa(e,"PUT",t,n,s,r)})}function g6(e,t,r,n){return hs(this,void 0,void 0,function*(){return Qa(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Ek(e,t,r,n,s){return hs(this,void 0,void 0,function*(){return Qa(e,"DELETE",t,n,s,r)})}var x6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class y6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return x6(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}}var v6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class b6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new y6(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return v6(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}}var wt=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const w6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class k6{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Ck(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return wt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},lx),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?mh:vr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ue(i))return{data:null,error:i};throw i}})}upload(t,r,n){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return wt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:lx.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield mh(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ue(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return wt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield vr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Cp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}update(t,r,n){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return wt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}copy(t,r,n){return wt(this,void 0,void 0,function*(){try{return{data:{path:(yield vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return wt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield vr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return wt(this,void 0,void 0,function*(){try{const s=yield vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Pl(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new b6(c,this.shouldThrowOnError)}info(t){return wt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Pl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ph(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}exists(t){return wt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield g6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n)&&n instanceof fh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return wt(this,void 0,void 0,function*(){try{return{data:yield Ek(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}})}list(t,r,n){return wt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},w6),r),{prefix:t||""});return{data:yield vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}listV2(t,r){return wt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield vr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const j6="2.12.2",S6={"X-Client-Info":`storage-js/${j6}`};var gs=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class N6{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},S6),r),this.fetch=Ck(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return gs(this,void 0,void 0,function*(){try{return{data:yield Pl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}getBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield Pl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return gs(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return gs(this,void 0,void 0,function*(){try{return{data:yield mh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}emptyBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}})}deleteBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield Ek(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}})}}class _6 extends N6{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new k6(this.url,this.headers,t,this.fetch)}}const C6="2.58.0";let Bi="";typeof Deno<"u"?Bi="deno":typeof document<"u"?Bi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bi="react-native":Bi="node";const E6={"X-Client-Info":`supabase-js-${Bi}/${C6}`},T6={headers:E6},P6={schema:"public"},A6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},I6={};var R6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const D6=e=>{let t;return e?t=e:typeof fetch>"u"?t=fk:t=fetch,(...r)=>t(...r)},L6=()=>typeof Headers>"u"?pk:Headers,O6=(e,t,r)=>{const n=D6(r),s=L6();return(i,o)=>R6(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var M6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function $6(e){return e.endsWith("/")?e:e+"/"}function F6(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>M6(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function z6(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($6(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Tk="2.72.0",ws=30*1e3,gh=3,Nu=gh*ws,U6="http://localhost:9999",B6="supabase.auth.token",V6={"X-Client-Info":`gotrue-js/${Tk}`},xh="X-Supabase-Api-Version",Pk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},H6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W6=600*1e3;class Ep extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ne(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class q6 extends Ep{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function G6(e){return ne(e)&&e.name==="AuthApiError"}class Ak extends Ep{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class An extends Ep{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Zr extends An{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function K6(e){return ne(e)&&e.name==="AuthSessionMissingError"}class Li extends An{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Co extends An{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Eo extends An{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J6(e){return ne(e)&&e.name==="AuthImplicitGrantRedirectError"}class cx extends An{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yh extends An{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function _u(e){return ne(e)&&e.name==="AuthRetryableFetchError"}class ux extends An{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class vh extends An{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Al="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dx=` 	
\r=`.split(""),X6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dx.length;t+=1)e[dx[t].charCodeAt(0)]=-2;for(let t=0;t<Al.length;t+=1)e[Al[t].charCodeAt(0)]=t;return e})();function hx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Al[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Al[n]),t.queuedBits-=6}}function Ik(e,t,r){const n=X6[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fx(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Z6(o,n,r)};for(let o=0;o<e.length;o+=1)Ik(e.charCodeAt(o),s,i);return t.join("")}function Y6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Q6(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Y6(n,t)}}function Z6(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function eR(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Ik(e.charCodeAt(s),r,n);return new Uint8Array(t)}function tR(e){const t=[];return Q6(e,r=>t.push(r)),new Uint8Array(t)}function rR(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>hx(s,r,n)),hx(null,r,n),t.join("")}function nR(e){return Math.round(Date.now()/1e3)+e}function sR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ht=()=>typeof window<"u"&&typeof document<"u",Ln={tested:!1,writable:!1},Rk=()=>{if(!Ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ln.tested)return Ln.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ln.tested=!0,Ln.writable=!0}catch{Ln.tested=!0,Ln.writable=!1}return Ln.writable};function iR(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Dk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xa(async()=>{const{default:n}=await Promise.resolve().then(()=>yi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},aR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ks=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},On=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Yr=async(e,t)=>{await e.removeItem(t)};class fc{constructor(){this.promise=new fc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}fc.promiseConstructor=Promise;function Cu(e){const t=e.split(".");if(t.length!==3)throw new vh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!H6.test(t[n]))throw new vh("JWT not in base64url format");return{header:JSON.parse(fx(t[0])),payload:JSON.parse(fx(t[1])),signature:eR(t[2]),raw:{header:t[0],payload:t[1]}}}async function oR(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function lR(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function cR(e){return("0"+e.toString(16)).substr(-2)}function uR(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,cR).join("")}async function dR(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function hR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await dR(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xs(e,t,r=!1){const n=uR();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await ks(e,`${t}-code-verifier`,s);const i=await hR(n);return[i,n===i?"plain":"s256"]}const fR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pR(e){const t=e.headers.get(xh);if(!t||!t.match(fR))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function mR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function gR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ys(e){if(!xR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Eu(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function px(e){return JSON.parse(JSON.stringify(e))}var yR=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Un=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),vR=[502,503,504];async function mx(e){var t;if(!aR(e))throw new yh(Un(e),0);if(vR.includes(e.status))throw new yh(Un(e),e.status);let r;try{r=await e.json()}catch(i){throw new Ak(Un(i),i)}let n;const s=pR(e);if(s&&s.getTime()>=Pk["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ux(Un(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Zr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ux(Un(r),e.status,r.weak_password.reasons);throw new q6(Un(r),e.status||500,n)}const bR=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ce(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[xh]||(i[xh]=Pk["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await wR(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function wR(e,t,r,n,s,i){const o=bR(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new yh(Un(c),0)}if(l.ok||await mx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await mx(c)}}function mr(e){var t;let r=null;NR(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=nR(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function gx(e){const t=mr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function sn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kR(e){return{data:e,error:null}}function jR(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=yR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function SR(e){return e}function NR(e){return e.access_token&&e.refresh_token&&e.expires_in}const Tu=["global","local","others"];var _R=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class CR{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Dk(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Tu[0]){if(Tu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tu.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:sn})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=_R(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:jR,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ne(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:sn})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:SR});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ne(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ys(t);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:sn})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ys(t);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:sn})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ys(t);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:sn})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ys(t.userId);try{const{data:r,error:n}=await ce(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ne(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ys(t.userId),ys(t.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ne(r))return{data:null,error:r};throw r}}}function xx(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function ER(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vs={debug:!!(globalThis&&Rk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class TR extends Lk{}async function PR(e,t,r){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new TR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(vs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Ok(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function AR(e){return parseInt(e,16)}function IR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function RR(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=Ok(e.address),m=d?`${d}://${n}`:n,v=e.statement?`${e.statement}
`:"",b=`${m} wants you to sign in with your Ethereum account:
${p}

${v}`;let x=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let y=`
Resources:`;for(const g of u){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);y+=`
- ${g}`}x+=y}return`${b}
${x}`}ER();const DR={url:U6,storageKey:B6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:V6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function yx(e,t,r){return await r()}const bs={};class Oa{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Oa.nextInstanceID,Oa.nextInstanceID+=1,this.instanceID>0&&Ht()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},DR),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new CR({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Dk(s.fetch),this.lock=s.lock||yx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ht()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=PR:this.lock=yx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Rk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xx(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=xx(this.memoryStorage)),Ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=bs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=bs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Tk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=iR(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ht()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),J6(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ne(r)?{error:r}:{error:new Ak("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:mr}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await xs(this.storage,this.storageKey)),i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:mr})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:mr})}else throw new Co("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gx})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gx})}else throw new Co("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Li}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,f;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:v,wallet:b,statement:x,options:y}=t;let g;if(Ht())if(typeof b=="object")g=b;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")g=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=b}const k=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),N=await g.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Ok(N[0]);let T=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!T){const I=await g.request({method:"eth_chainId"});T=AR(I)}const E={domain:k.host,address:j,statement:x,uri:k.href,version:"1",chainId:T,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=RR(E),m=await g.request({method:"personal_sign",params:[IR(p),j]})}try{const{data:v,error:b}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:mr});if(b)throw b;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Li}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:b})}catch(v){if(ne(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,f,p;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:b,wallet:x,statement:y,options:g}=t;let k;if(Ht())if(typeof x=="object")k=x;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))k=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=x}const N=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const j=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),y?{statement:y}:null));let T;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")T=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)T=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)m=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),v=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${N.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const j=await k.signMessage(new TextEncoder().encode(m),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=j}}try{const{data:b,error:x}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:rR(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:mr});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Li}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(ne(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await On(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:mr});if(await Yr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Li}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ne(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:mr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Li}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await xs(this.storage,this.storageKey));const{error:h}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Co("You must provide either an email or phone number.")}catch(l){if(ne(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:mr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await xs(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:kR})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Zr;const{error:s}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Co("You must provide either an email or phone number and a type")}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await On(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Nu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await On(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Eu()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:sn}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zr}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:sn})})}catch(r){if(ne(r))return K6(r)&&(await this._removeSession(),await Yr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Zr;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await xs(this.storage,this.storageKey));const{data:u,error:d}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:sn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Zr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Cu(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ne(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Zr;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ht())throw new Eo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Eo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Eo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new cx("No code detected.");const{data:y,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Eo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=ws&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(ne(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await On(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(G6(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Yr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=sR(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await xs(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ne(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ht()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ne(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ne(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await lR(async s=>(s>0&&await oR(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:mr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&_u(i)&&Date.now()+o-n<ws})}catch(n){if(this._debug(r,"error",n),ne(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ht()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await On(this.storage,this.storageKey);if(s&&this.userStorage){let o=await On(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ks(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Eu()}else if(s&&!s.user&&!s.user){const o=await On(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Yr(this.storage,this.storageKey+"-user"),await ks(this.storage,this.storageKey,s)):s.user=Eu()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Nu;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Nu}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),_u(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Zr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new fc;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Zr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ne(i)){const o={session:null,error:i};return _u(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ks(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=px(s);await ks(this.storage,this.storageKey,i)}else{const s=px(r);await ks(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Yr(this.storage,this.storageKey),await Yr(this.storage,this.storageKey+"-code-verifier"),await Yr(this.storage,this.storageKey+"-user"),this.userStorage&&await Yr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ws);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ws);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ws}ms, refresh threshold is ${gh} ticks`),s<=gh&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Lk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await xs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ce(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ne(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Cu(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+W6>s)return n;const{data:i,error:o}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Cu(n);r!=null&&r.allowExpired||mR(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=gR(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,tR(`${l}.${c}`)))throw new vh("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}}Oa.nextInstanceID=0;const LR=Oa;class OR extends LR{constructor(t){super(t)}}var MR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class $R{constructor(t,r,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=z6(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:P6,realtime:I6,auth:Object.assign(Object.assign({},A6),{storageKey:c}),global:T6},d=F6(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=O6(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new qI(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new _6(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new SI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return MR(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new OR({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new c6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bi=(e,t,r)=>new $R(e,t,r);function FR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}FR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zR="https://dedlbzhpgkmetvhbkyzq.supabase.co",UR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g",un=bi(zR,UR),BR=()=>{const[e,t]=w.useState(null),[r,n]=w.useState(null),[s,i]=w.useState("idle"),[o,l]=w.useState(null),[c,u]=w.useState([]),[d,h]=w.useState("skip"),[f,p]=w.useState({}),m=w.useRef(null),v=E=>{const I=E.split(".").pop().toLowerCase();return I==="csv"||I==="json"?I:null},b=E=>{const I=E.split(`
`).filter(z=>z.trim()),D=I[0].split(",").map(z=>z.trim());return I.slice(1).map(z=>{const A=z.split(",").map(M=>M.trim()),_={};return D.forEach((M,P)=>{_[M]=A[P]||""}),_})},x=E=>{try{const I=JSON.parse(E);return Array.isArray(I)?I:[I]}catch(I){return console.error("JSON parsing error:",I),[]}},y=E=>{const I=E.target.files[0];if(I){const D=v(I.name);if(!D){alert("Please select a CSV or JSON file");return}t(I);const z=new FileReader;z.onload=A=>{const _=A.target.result;n(_);const M=D==="csv"?b(_):x(_);u(M.slice(0,5))},z.readAsText(I)}},g=E=>{const I=["title","description","priority"],D=[],z=[];return E.forEach((A,_)=>{const M=I.filter(P=>!A[P]);M.length===0?D.push({...A,id:A.id||`imported-${Date.now()}-${_}`,category:A.category||"uncategorized",status:A.status||"pending",estimated_effort:A.estimated_effort||"medium",created_at:new Date().toISOString()}):z.push({item:A,reason:`Missing fields: ${M.join(", ")}`})}),{validItems:D,invalidItems:z}},k=async E=>{try{const I=E.map(P=>P.title),{data:D,error:z}=await un.from("backlog_items").select("title").in("title",I);if(z)throw z;const A=new Set(D.map(P=>P.title)),_=E.filter(P=>A.has(P.title)),M=E.filter(P=>!A.has(P.title));return{duplicates:_,unique:M}}catch(I){return console.error("Error checking duplicates:",I),{duplicates:[],unique:E}}},N=async()=>{if(!r){alert("Please select a file first");return}i("processing");try{const I=v(e.name)==="csv"?b(r):x(r),{validItems:D,invalidItems:z}=g(I);if(D.length===0){i("error"),l({success:!1,message:"No valid items to import",invalidItems:z});return}const{duplicates:A,unique:_}=await k(D);let M=_;if(A.length>0&&d==="merge")for(const P of A){const{error:O}=await un.from("backlog_items").update(P).eq("title",P.title);O&&console.error("Error updating duplicate:",O)}if(M.length>0){const{data:P,error:O}=await un.from("backlog_items").insert(M).select();if(O)throw O;i("success"),l({success:!0,imported:P.length,duplicates:A.length,invalid:z.length,message:`Successfully imported ${P.length} items`})}else i("warning"),l({success:!0,imported:0,duplicates:A.length,invalid:z.length,message:"All items were duplicates"})}catch(E){console.error("Import error:",E),i("error"),l({success:!1,message:`Import failed: ${E.message}`})}},j=(E,I)=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),I())},T=()=>{t(null),n(null),i("idle"),l(null),u([]),m.current&&(m.current.value="")};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Backlog Import Manager"}),a.jsx("p",{className:"text-gray-600",children:"Import backlog items from CSV or JSON files"})]}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 mb-6",children:[a.jsx("input",{ref:m,type:"file",id:"backlog-file-input","aria-label":"Upload CSV or JSON file",accept:".csv,.json",onChange:y,className:"hidden"}),a.jsxs("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>{var E;return(E=m.current)==null?void 0:E.click()},onKeyDown:E=>j(E,()=>{var I;return(I=m.current)==null?void 0:I.click()}),tabIndex:"0",role:"button","aria-label":"Upload file",children:[a.jsx(DE,{className:"h-12 w-12 text-gray-400 mb-3"}),a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Click to upload or drag and drop"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV or JSON files only"})]}),e&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md flex items-center",children:[e.name.endsWith(".csv")?a.jsx(He,{className:"h-5 w-5 text-blue-600 mr-2"}):a.jsx(gE,{className:"h-5 w-5 text-blue-600 mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:e.name}),a.jsx("button",{onClick:T,"aria-label":"Remove selected file",className:"ml-auto text-red-500 hover:text-red-700",children:"Remove"})]})]}),c.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Preview (First 5 items)"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:Object.keys(c[0]).map(E=>a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:E},E))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((E,I)=>a.jsx("tr",{children:Object.values(E).map((D,z)=>a.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:[String(D).substring(0,50),String(D).length>50&&"..."]},z))},I))})]})})]}),e&&a.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Import Options"}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duplicate Handling"}),a.jsxs("select",{id:"duplicate-handling-select",value:d,onChange:E=>h(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"skip",children:"Skip Duplicates"}),a.jsx("option",{value:"merge",children:"Merge/Update Existing"})]})]})})]}),e&&s==="idle"&&a.jsxs("button",{onClick:N,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center",children:[a.jsx(qa,{className:"h-5 w-5 mr-2"}),"Import Backlog Items"]}),s==="processing"&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(Nw,{className:"h-8 w-8 text-blue-600 animate-spin"}),a.jsx("span",{className:"ml-3 text-gray-700",children:"Processing import..."})]}),o&&a.jsx("div",{className:`p-4 rounded-lg ${s==="success"?"bg-green-50 border border-green-200":s==="warning"?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[s==="success"?a.jsx(fe,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}):a.jsx(zt,{className:`h-5 w-5 mt-0.5 mr-2 ${s==="warning"?"text-yellow-500":"text-red-500"}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold",children:o.message}),o.success&&a.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[a.jsxs("p",{children:[" Imported: ",o.imported," items"]}),o.duplicates>0&&a.jsxs("p",{children:[" Duplicates: ",o.duplicates," items"]}),o.invalid>0&&a.jsxs("p",{children:[" Invalid: ",o.invalid," items"]})]}),a.jsx("button",{onClick:T,className:"mt-3 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Import Another File"})]})]})})]})},VR=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(null),[o,l]=w.useState(!1),[c,u]=w.useState(!1),[d,h]=w.useState({total:0,generated:0,manual:0,verified:0});w.useEffect(()=>{f(),p()},[]);const f=async()=>{try{const{data:A,error:_}=await un.from("backlog_items").select("*").order("priority",{ascending:!0}).order("created_at",{ascending:!1});if(_)throw _;t(A||[])}catch(A){console.error("Error fetching backlog items:",A)}},p=async()=>{try{const{data:A,error:_}=await un.from("user_stories").select("id, is_generated, verification_status");if(_)throw _;const M={total:A.length,generated:A.filter(P=>P.is_generated).length,manual:A.filter(P=>!P.is_generated).length,verified:A.filter(P=>P.verification_status==="verified").length};h(M)}catch(A){console.error("Error fetching story stats:",A)}},m=async A=>{l(!0),n(A),await new Promise(M=>setTimeout(M,1500));const _={title:A.title,user_story:v(A),acceptance_criteria:j(A),technical_notes:T(A),estimated_effort:A.estimated_effort||"medium",priority:A.priority,tags:E(A),is_generated:!0,backlog_item_id:A.id,created_at:new Date().toISOString()};i(_),l(!1)},v=A=>{const _=[`As a ${b(A)}, I want to ${x(A)} so that ${g(A)}`,`As a ${b(A)}, I need ${y(A)} in order to ${k()}`,`As a ${b(A)}, I would like to ${x(A)} to ${N()}`];return _[Math.floor(Math.random()*_.length)]},b=A=>{const _=["user","administrator","developer","customer","manager"];return A.category==="admin"?"administrator":A.category==="development"?"developer":_[Math.floor(Math.random()*_.length)]},x=A=>A.title.toLowerCase().replace(/^(add|create|implement|build|develop)\s+/,""),y=A=>A.title.toLowerCase(),g=A=>{var M;const _=["improve efficiency","save time","enhance user experience","increase productivity","streamline workflows"];return((M=A.description)==null?void 0:M.substring(0,50))||_[Math.floor(Math.random()*_.length)]},k=A=>"achieve better results",N=A=>"complete tasks more efficiently",j=A=>{const _=[`The ${y(A)} should be accessible to authorized users`,"System should provide feedback on successful completion","Feature should handle error cases gracefully","Performance should meet defined SLA requirements","User interface should be intuitive and responsive"];return(A.priority==="high"||A.priority==="critical")&&(_.push("Feature should include comprehensive logging"),_.push("Security measures should be implemented")),_.slice(0,4+Math.floor(Math.random()*2))},T=A=>{const _=[];return A.category==="frontend"&&(_.push("Ensure responsive design for mobile devices"),_.push("Implement proper state management")),A.category==="backend"&&(_.push("Implement proper error handling and logging"),_.push("Ensure API endpoints follow RESTful principles")),(A.priority==="high"||A.priority==="critical")&&(_.push("Include unit tests with minimum 80% coverage"),_.push("Document API changes in technical documentation")),_},E=A=>{const _=[A.category];return A.priority&&_.push(A.priority),A.estimated_effort&&_.push(A.estimated_effort),_.filter(Boolean)},I=(A,_)=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),_())},D=async()=>{if(s)try{const{data:A,error:_}=await un.from("user_stories").insert([s]).select();if(_)throw _;await un.from("backlog_items").update({user_story_id:A[0].id}).eq("id",r.id),alert("User story saved successfully!"),i(null),n(null),f(),p()}catch(A){console.error("Error saving story:",A),alert("Failed to save user story")}},z=(A,_)=>{i(M=>({...M,[A]:_}))};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[a.jsx(Ga,{className:"h-6 w-6 mr-2 text-yellow-500"}),"AI Story Generation Engine"]}),a.jsx("p",{className:"text-gray-600",children:"Generate user stories from backlog items using AI"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:d.total}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Stories"})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.generated}),a.jsx("div",{className:"text-sm text-gray-600",children:"AI Generated"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.manual}),a.jsx("div",{className:"text-sm text-gray-600",children:"Manual"})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d.verified}),a.jsx("div",{className:"text-sm text-gray-600",children:"Verified"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Backlog Items"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.map(A=>{var _;return a.jsx("div",{onClick:()=>!o&&m(A),onKeyDown:M=>I(M,()=>!o&&m(A)),tabIndex:"0",role:"button","aria-label":`Generate story for ${A.title}`,className:`p-3 border-b cursor-pointer hover:bg-gray-50 transition-colors ${(r==null?void 0:r.id)===A.id?"bg-blue-50":""}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm",children:A.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(_=A.description)==null?void 0:_.substring(0,100),"..."]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded ${A.priority==="high"?"bg-red-100 text-red-700":A.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:A.priority}),A.user_story_id&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded flex items-center",children:[a.jsx(fe,{className:"h-3 w-3 mr-1"}),"Has Story"]})]})]}),a.jsx("button",{onClick:M=>{M.stopPropagation(),m(A)},"aria-label":"Generate story for this item",className:"ml-2 p-2 text-blue-600 hover:bg-blue-50 rounded",disabled:o,children:a.jsx(ap,{className:"h-4 w-4"})})]})},A.id)})})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Generated User Story"}),o&&a.jsxs("div",{className:"border rounded-lg p-8 flex flex-col items-center justify-center",children:[a.jsx(tr,{className:"h-8 w-8 text-blue-600 animate-spin mb-3"}),a.jsx("p",{className:"text-gray-600",children:"Generating user story..."})]}),s&&!o&&a.jsx("div",{className:"border rounded-lg p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Story"}),a.jsx("textarea",{id:"generated-user-story",value:s.user_story,onChange:A=>z("user_story",A.target.value),disabled:!c,className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acceptance Criteria"}),a.jsx("div",{className:"space-y-2",children:s.acceptance_criteria.map((A,_)=>a.jsxs("div",{className:"flex items-start",children:[a.jsx(fe,{className:"h-4 w-4 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),a.jsx("input",{type:"text",value:A,onChange:M=>{const P=[...s.acceptance_criteria];P[_]=M.target.value,z("acceptance_criteria",P)},disabled:!c,className:"flex-1 px-2 py-1 border rounded text-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]},_))})]}),s.technical_notes.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technical Notes"}),a.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.technical_notes.map((A,_)=>a.jsx("li",{className:"text-sm text-gray-600",children:A},_))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((A,_)=>a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md text-xs",children:A},_))})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[a.jsxs("button",{onClick:()=>u(!c),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 flex items-center",children:[a.jsx(SE,{className:"h-4 w-4 mr-2"}),c?"Done Editing":"Edit"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>m(r),className:"px-4 py-2 text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 flex items-center",children:[a.jsx(tr,{className:"h-4 w-4 mr-2"}),"Regenerate"]}),a.jsxs("button",{onClick:D,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center",children:[a.jsx(is,{className:"h-4 w-4 mr-2"}),"Save Story"]})]})]})]})}),!s&&!o&&a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"Select a backlog item to generate a user story"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"AI will create acceptance criteria and technical notes"})]})]})]})]})},HR=()=>{const[e,t]=w.useState({storyCompletion:0,verificationCoverage:0,testCoverage:0,criticalBugs:0,performanceMetrics:0,securityChecks:0}),[r,n]=w.useState({storyCompletion:85,verificationCoverage:80,testCoverage:70,criticalBugs:0,performanceMetrics:90,securityChecks:100}),[s,i]=w.useState("calculating"),[o,l]=w.useState(""),[c,u]=w.useState(!1),[d,h]=w.useState([]);w.useEffect(()=>{f(),p()},[]);const f=async()=>{try{const{data:g,error:k}=await un.from("user_stories").select("id, status, verification_status");if(!k){const N=g.length||1,j=g.filter(E=>E.status==="completed").length,T=g.filter(E=>E.verification_status==="verified").length;t(E=>({...E,storyCompletion:Math.round(j/N*100),verificationCoverage:Math.round(T/N*100)}))}t(N=>({...N,testCoverage:75+Math.random()*20,criticalBugs:Math.floor(Math.random()*3),performanceMetrics:85+Math.random()*10,securityChecks:Math.random()>.3?100:0})),m()}catch(g){console.error("Error fetching metrics:",g)}},p=async()=>{h([{id:1,version:"v2.1.0",date:"2024-01-15",status:"passed",metrics:{storyCompletion:92,verificationCoverage:88,testCoverage:82}},{id:2,version:"v2.0.9",date:"2024-01-08",status:"override",metrics:{storyCompletion:78,verificationCoverage:75,testCoverage:71},justification:"Critical security patch required immediate release"},{id:3,version:"v2.0.8",date:"2024-01-01",status:"passed",metrics:{storyCompletion:95,verificationCoverage:92,testCoverage:85}}])},m=()=>{const g=e.storyCompletion>=r.storyCompletion&&e.verificationCoverage>=r.verificationCoverage&&e.testCoverage>=r.testCoverage&&e.criticalBugs<=r.criticalBugs&&e.performanceMetrics>=r.performanceMetrics&&e.securityChecks>=r.securityChecks;i(g?"passed":"failed")},v=(g,k,N=!1)=>(N?g<=k:g>=k)?"text-green-600":"text-red-600",b=(g,k,N=!1)=>(N?g<=k:g>=k)?a.jsx(fe,{className:"h-5 w-5 text-green-500"}):a.jsx(qr,{className:"h-5 w-5 text-red-500"}),x=async()=>{if(!o.trim()){alert("Please provide a justification for the override");return}try{const g={metrics:e,thresholds:r,justification:o,user:"current_user",timestamp:new Date().toISOString()};console.log("Override logged:",g),alert("Release gate override approved and logged"),u(!1),l(""),i("override")}catch(g){console.error("Error logging override:",g)}},y=(g,k)=>{n(N=>({...N,[g]:parseFloat(k)}))};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[a.jsx(ai,{className:"h-6 w-6 mr-2 text-blue-600"}),"Release Gate Calculator"]}),a.jsx("p",{className:"text-gray-600",children:"Automated release readiness assessment based on completion metrics"})]}),a.jsx("div",{className:`mb-6 p-4 rounded-lg ${s==="passed"?"bg-green-50 border-2 border-green-500":s==="override"?"bg-yellow-50 border-2 border-yellow-500":s==="failed"?"bg-red-50 border-2 border-red-500":"bg-gray-50 border-2 border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[s==="passed"?a.jsx(fe,{className:"h-8 w-8 text-green-600 mr-3"}):s==="failed"?a.jsx(qr,{className:"h-8 w-8 text-red-600 mr-3"}):s==="override"?a.jsx(xt,{className:"h-8 w-8 text-yellow-600 mr-3"}):a.jsx("div",{className:"h-8 w-8 mr-3 border-4 border-gray-300 border-t-blue-600 rounded-full animate-spin"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:s==="passed"?"Release Gate: PASSED":s==="failed"?"Release Gate: FAILED":s==="override"?"Release Gate: OVERRIDE":"Calculating Gate Status..."}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s==="passed"?"All criteria met - ready for release":s==="failed"?"Some criteria not met - review required":s==="override"?"Released with override justification":"Analyzing metrics..."})]})]}),s==="failed"&&a.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 flex items-center",children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),"Override Gate"]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Story Completion"}),b(e.storyCompletion,r.storyCompletion)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.storyCompletion,r.storyCompletion)}`,children:[e.storyCompletion,"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.storyCompletion,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.storyCompletion>=r.storyCompletion?"bg-green-500":"bg-red-500"}`,style:{width:`${e.storyCompletion}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Verification Coverage"}),b(e.verificationCoverage,r.verificationCoverage)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.verificationCoverage,r.verificationCoverage)}`,children:[e.verificationCoverage,"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.verificationCoverage,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.verificationCoverage>=r.verificationCoverage?"bg-green-500":"bg-red-500"}`,style:{width:`${e.verificationCoverage}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Test Coverage"}),b(e.testCoverage,r.testCoverage)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.testCoverage,r.testCoverage)}`,children:[Math.round(e.testCoverage),"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.testCoverage,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.testCoverage>=r.testCoverage?"bg-green-500":"bg-red-500"}`,style:{width:`${e.testCoverage}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Critical Bugs"}),b(e.criticalBugs,r.criticalBugs,!0)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:`text-2xl font-bold ${v(e.criticalBugs,r.criticalBugs,!0)}`,children:e.criticalBugs}),a.jsxs("span",{className:"text-sm text-gray-500",children:[" ",r.criticalBugs]})]}),a.jsx("div",{className:"mt-2 text-xs text-gray-600",children:e.criticalBugs===0?"No critical bugs":`${e.criticalBugs} bug(s) found`})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Performance Metrics"}),b(e.performanceMetrics,r.performanceMetrics)]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:`text-2xl font-bold ${v(e.performanceMetrics,r.performanceMetrics)}`,children:[Math.round(e.performanceMetrics),"%"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.performanceMetrics,"%"]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.performanceMetrics>=r.performanceMetrics?"bg-green-500":"bg-red-500"}`,style:{width:`${e.performanceMetrics}%`}})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Security Checks"}),b(e.securityChecks,r.securityChecks)]}),a.jsx("div",{className:"flex items-baseline gap-2",children:a.jsx("span",{className:`text-2xl font-bold ${v(e.securityChecks,r.securityChecks)}`,children:e.securityChecks===100?"Passed":"Failed"})}),a.jsx("div",{className:"mt-2 text-xs text-gray-600",children:e.securityChecks===100?"All security checks passed":"Security issues detected"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Gate Thresholds"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Story Completion (%)"}),a.jsx("input",{id:"threshold-story-completion",type:"number",value:r.storyCompletion,onChange:g=>y("storyCompletion",g.target.value),className:"w-full px-3 py-1 border rounded-md",min:"0",max:"100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Verification Coverage (%)"}),a.jsx("input",{type:"number",value:r.verificationCoverage,onChange:g=>y("verificationCoverage",g.target.value),className:"w-full px-3 py-1 border rounded-md",min:"0",max:"100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Test Coverage (%)"}),a.jsx("input",{type:"number",value:r.testCoverage,onChange:g=>y("testCoverage",g.target.value),className:"w-full px-3 py-1 border rounded-md",min:"0",max:"100"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Recent Release History"}),a.jsx("div",{className:"space-y-2",children:d.map(g=>a.jsxs("div",{className:"border rounded-lg p-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(rp,{className:"h-4 w-4 text-gray-500 mr-2"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:g.version}),a.jsx("span",{className:"text-sm text-gray-500 ml-2",children:g.date})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-xs text-gray-600",children:["SC: ",g.metrics.storyCompletion,"% | VC: ",g.metrics.verificationCoverage,"% | TC: ",g.metrics.testCoverage,"%"]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${g.status==="passed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status==="passed"?"Passed":"Override"})]})]},g.id))})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Override Release Gate"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Overriding the release gate requires justification and will be logged for audit purposes."}),a.jsx("textarea",{id:"override-justification-textarea",value:o,onChange:g=>l(g.target.value),placeholder:"Enter justification for override...",className:"w-full px-3 py-2 border rounded-md mb-4",rows:4}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{onClick:x,className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:"Confirm Override"})]})]})})]})},WR=()=>{const[e,t]=w.useState("import"),r=Cn();return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"EHG Backlog Import System"}),a.jsx("p",{className:"text-gray-600",children:"Import backlog items, generate user stories, and calculate release readiness"}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"SD: fbe359b4-aa56-4740-8350-d51760de0a3b"}),a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"EHG Engineer Dashboard"})]})]}),a.jsxs("button",{onClick:()=>r("/"),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg flex items-center gap-2 transition-colors",children:[a.jsx(Tn,{className:"h-4 w-4"}),"Back to Dashboard"]})]}),a.jsxs(yI,{value:e,onValueChange:t,className:"space-y-6",children:[a.jsxs(vI,{className:"grid w-full grid-cols-3",children:[a.jsxs(bu,{value:"import",className:"flex items-center gap-2",children:[a.jsx(ii,{className:"h-4 w-4"}),"Import Backlog"]}),a.jsxs(bu,{value:"stories",className:"flex items-center gap-2",children:[a.jsx(ap,{className:"h-4 w-4"}),"Story Generation"]}),a.jsxs(bu,{value:"release",className:"flex items-center gap-2",children:[a.jsx(AE,{className:"h-4 w-4"}),"Release Gates"]})]}),a.jsx(wu,{value:"import",className:"space-y-4",children:a.jsx(BR,{})}),a.jsx(wu,{value:"stories",className:"space-y-4",children:a.jsx(VR,{})}),a.jsx(wu,{value:"release",className:"space-y-4",children:a.jsx(HR,{})})]}),a.jsxs("div",{className:"mt-12 p-6 bg-white rounded-lg shadow-sm border",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Overview"}),a.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"0"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total Backlog Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),a.jsx("div",{className:"text-sm text-gray-500",children:"AI Generated Stories"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:"0%"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Release Readiness"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"0"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Active Gates"})]})]})]})]})})};function Mk({testResult:e,onClose:t,onSuccess:r}){const[n,s]=w.useState("idle"),[i,o]=w.useState(0),[l,c]=w.useState(""),[u,d]=w.useState(null),[h,f]=w.useState(null);w.useEffect(()=>{n==="idle"&&p()},[]);const p=async()=>{try{s("analyzing"),o(10),c("Analyzing test failure and business impact...");const b={case_id:e.id||e.case_id,title:e.title,section:e.section,priority:e.priority,status:e.status||"FAIL",description:e.description},x=await fetch("/api/uat/convert-to-sd",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!x.ok)throw new Error("Failed to convert to Strategic Directive");o(40),s("generating"),c("Generating Strategic Directive components..."),await new Promise(g=>setTimeout(g,1500)),o(70),s("validating"),c("Validating quality and completeness..."),await new Promise(g=>setTimeout(g,1e3)),o(90),c("Creating submission in database...");const y=await x.json();o(100),s("complete"),c("Strategic Directive created successfully!"),f(y),setTimeout(()=>{r?r(y):t()},3e3)}catch(b){console.error("Conversion failed:",b),s("error"),d(b.message||"Failed to convert test failure to Strategic Directive"),c("")}},m=()=>{switch(n){case"analyzing":return a.jsx(Jd,{className:"h-6 w-6 text-blue-500 animate-pulse"});case"generating":return a.jsx(Ga,{className:"h-6 w-6 text-purple-500 animate-pulse"});case"validating":return a.jsx(os,{className:"h-6 w-6 text-yellow-500 animate-pulse"});case"complete":return a.jsx(fe,{className:"h-6 w-6 text-green-500"});case"error":return a.jsx(zt,{className:"h-6 w-6 text-red-500"});default:return a.jsx(He,{className:"h-6 w-6 text-gray-500"})}},v=()=>{switch(n){case"analyzing":return"from-blue-600 to-blue-500";case"generating":return"from-purple-600 to-purple-500";case"validating":return"from-yellow-600 to-yellow-500";case"complete":return"from-green-600 to-green-500";case"error":return"from-red-600 to-red-500";default:return"from-gray-600 to-gray-500"}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60] overflow-y-auto",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:`bg-gradient-to-r ${v()} text-white p-6 rounded-t-xl`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[m(),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:n==="complete"?"Strategic Directive Created!":"Creating Strategic Directive"}),a.jsx("p",{className:"text-white/90 text-sm mt-1",children:"AI-powered conversion from UAT test failure"})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Close modal",disabled:n!=="complete"&&n!=="error",children:a.jsx(rr,{className:"h-5 w-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:a.jsx("div",{className:"flex items-start gap-3",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:["Test Case: ",e.case_id]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsxs("span",{className:`text-xs px-2 py-1 rounded font-semibold ${e.priority==="critical"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":e.priority==="high"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300"}`,children:[e.priority," priority"]}),a.jsx("span",{className:"text-xs px-2 py-1 rounded font-semibold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",children:"FAILED"})]})]})})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n==="analyzing"||i>=10?"bg-blue-50 dark:bg-blue-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=10?a.jsx(fe,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}):n==="analyzing"?a.jsx(Or,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${n==="analyzing"||i>=10?"text-blue-800 dark:text-blue-300":"text-gray-500 dark:text-gray-400"}`,children:"Analyze Test Failure"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Determine business impact and strategic importance"})]})]}),a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n==="generating"||i>=40?"bg-purple-50 dark:bg-purple-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=40?a.jsx(fe,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}):n==="generating"?a.jsx(Or,{className:"h-5 w-5 text-purple-600 dark:text-purple-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${n==="generating"||i>=40?"text-purple-800 dark:text-purple-300":"text-gray-500 dark:text-gray-400"}`,children:"Generate SD Components"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Create comprehensive documentation and requirements"})]})]}),a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n==="validating"||i>=70?"bg-yellow-50 dark:bg-yellow-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=70?a.jsx(fe,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}):n==="validating"?a.jsx(Or,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${n==="validating"||i>=70?"text-yellow-800 dark:text-yellow-300":"text-gray-500 dark:text-gray-400"}`,children:"Validate Quality"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Ensure completeness and actionability"})]})]}),a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${i>=90?"bg-green-50 dark:bg-green-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[i>=90?a.jsx(fe,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):i>=70?a.jsx(Or,{className:"h-5 w-5 text-green-600 dark:text-green-400 animate-spin"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-medium ${i>=90?"text-green-800 dark:text-green-300":"text-gray-500 dark:text-gray-400"}`,children:"Create Submission"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-500",children:"Store in database and link to UAT"})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full bg-gradient-to-r ${v()} transition-all duration-500`,style:{width:`${i}%`}})}),l&&n!=="complete"&&n!=="error"&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 text-center",children:l})]}),n==="complete"&&h&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(fe,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Strategic Directive Created Successfully!"}),a.jsxs("div",{className:"space-y-1 text-sm text-green-700 dark:text-green-400",children:[a.jsxs("p",{children:[" Submission ID: ",a.jsx("code",{className:"font-mono bg-green-100 dark:bg-green-900/30 px-1 rounded",children:h.id})]}),a.jsxs("p",{children:[" SD ID: ",a.jsx("code",{className:"font-mono bg-green-100 dark:bg-green-900/30 px-1 rounded",children:h.sd_id})]}),a.jsxs("p",{children:[" AI Confidence: ",a.jsxs("span",{className:"font-semibold",children:[(h.confidence_score*100).toFixed(1),"%"]})]}),a.jsxs("p",{children:[" Status: ",a.jsx("span",{className:"font-semibold",children:"Pending Review"})]})]})]})]})}),n==="error"&&u&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(zt,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-red-800 dark:text-red-300 mb-1",children:"Conversion Failed"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:u})]})]})})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:n==="complete"?a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The Strategic Directive has been created and is pending review"}),a.jsxs("button",{onClick:()=>r(h),className:"px-6 py-2 bg-gradient-to-r from-green-600 to-green-500 text-white rounded-lg hover:from-green-700 hover:to-green-600 transition-colors flex items-center gap-2",children:["Continue",a.jsx(rc,{className:"h-4 w-4"})]})]}):n==="error"?a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"}),a.jsx("button",{onClick:p,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]}):a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[a.jsx(Or,{className:"h-5 w-5 animate-spin"}),a.jsx("span",{className:"text-sm",children:"Processing... Please wait"})]})})})]})})}const vx=bi("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function qR({testCase:e,runId:t,onClose:r,onComplete:n}){const[s,i]=w.useState(null),[o,l]=w.useState(""),[c,u]=w.useState(null),[d,h]=w.useState(!1),[f,p]=w.useState(!1),[m,v]=w.useState(!1),[b,x]=w.useState(!1),[y,g]=w.useState(null),k=w.useRef(null);w.useEffect(()=>{const I=z=>{var _;const A=(_=z.clipboardData)==null?void 0:_.items;if(A){for(const M of A)if(M.type.startsWith("image/")){z.preventDefault();const P=M.getAsFile(),O=new FileReader;O.onload=$=>{u($.target.result)},O.readAsDataURL(P);break}}},D=k.current;if(D)return D.addEventListener("paste",I),()=>D.removeEventListener("paste",I)},[]);const N=()=>{navigator.clipboard.writeText(e.id),p(!0),setTimeout(()=>p(!1),2e3)},j=()=>{const I=`Please activate the UAT sub-agent to help me execute test case ${e.id}.

UAT TEST EXECUTION REQUEST
Test ID: ${e.id}
Title: ${e.title}
Type: ${e.test_type==="manual"?"Manual":"Automated"}
Priority: ${e.priority}
Section: ${e.section.replace(/_/g," ")}

Test Description:
${e.description||"No detailed description available"}

I need the UAT sub-agent to guide me through this test by:
1. Breaking down the specific actions I should take
2. Clarifying what expected results I should see
3. Identifying any edge cases I should check
4. Warning me about common issues to watch for
5. Helping me determine if the test passes or fails

Test Environment Details:
- Application URL: http://localhost:8080
- System: EHG Application
- Current Test Case: ${e.id}

AUTOMATED EXECUTION OPTION:
You can also run this test automatically using:
\`\`\`bash
node scripts/uat-test-executor.js ${e.id}
\`\`\`

Please engage the UAT sub-agent now to begin test guidance.`;navigator.clipboard.writeText(I),v(!0),setTimeout(()=>v(!1),2e3)},T=async()=>{if(!s){alert("Please select a test result (Pass/Fail/Blocked)");return}h(!0);try{const{error:I}=await vx.from("uat_results").upsert({run_id:t,case_id:e.id,status:s,notes:o||null,evidence_url:c||null,recorded_at:new Date().toISOString()},{onConflict:"run_id,case_id"});if(I)throw I;g({result_id:crypto.randomUUID(),case_id:e.id,run_id:t,status:s,title:e.title,section:e.section,priority:e.priority,description:e.description,expected:"Test should pass as described",actual:s==="FAIL"?o:"Test executed successfully",notes:o,screenshot_url:c}),await vx.from("uat_runs").update({active_case_id:null}).eq("id",t),n(s)}catch(I){console.error("Failed to save test result:",I),alert("Failed to save test result. Please try again.")}finally{h(!1)}},E=I=>{const D=I.target.files[0];if(D&&D.type.startsWith("image/")){const z=new FileReader;z.onload=A=>{u(A.target.result)},z.readAsDataURL(D)}};return a.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:[a.jsxs("div",{ref:k,className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",tabIndex:-1,children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 dark:from-purple-700 dark:to-purple-600 text-white p-6 rounded-t-xl",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Execute Test Case"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"font-mono bg-white/20 px-2 py-1 rounded",children:e.id}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${e.priority==="critical"?"bg-red-500":e.priority==="high"?"bg-yellow-500":"bg-white/30"}`,children:e.priority}),a.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-white/30",children:e.test_type==="manual"?"Manual":"Auto"})]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(rr,{className:"h-5 w-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:e.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:e.description||"No detailed description available. Please refer to the test title for guidance."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:[a.jsx(ep,{className:"h-4 w-4"}),f?"Copied!":"Copy Test ID"]}),a.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors",children:[a.jsx(uE,{className:"h-4 w-4"}),m?"Copied!":"Copy UAT Agent Prompt"]}),a.jsxs("a",{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(tp,{className:"h-4 w-4"}),"Open Test App"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Test Result *"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>i("PASS"),className:`p-4 rounded-lg border-2 transition-all ${s==="PASS"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-green-400"}`,children:[a.jsx(fe,{className:`h-6 w-6 mx-auto mb-2 ${s==="PASS"?"text-green-600":"text-gray-400"}`}),a.jsx("span",{className:`font-semibold ${s==="PASS"?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400"}`,children:"Pass"})]}),a.jsxs("button",{onClick:()=>i("FAIL"),className:`p-4 rounded-lg border-2 transition-all ${s==="FAIL"?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 hover:border-red-400"}`,children:[a.jsx(qr,{className:`h-6 w-6 mx-auto mb-2 ${s==="FAIL"?"text-red-600":"text-gray-400"}`}),a.jsx("span",{className:`font-semibold ${s==="FAIL"?"text-red-700 dark:text-red-300":"text-gray-600 dark:text-gray-400"}`,children:"Fail"})]}),a.jsxs("button",{onClick:()=>i("BLOCKED"),className:`p-4 rounded-lg border-2 transition-all ${s==="BLOCKED"?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-gray-300 dark:border-gray-600 hover:border-yellow-400"}`,children:[a.jsx(xt,{className:`h-6 w-6 mx-auto mb-2 ${s==="BLOCKED"?"text-yellow-600":"text-gray-400"}`}),a.jsx("span",{className:`font-semibold ${s==="BLOCKED"?"text-yellow-700 dark:text-yellow-300":"text-gray-600 dark:text-gray-400"}`,children:"Blocked"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Observations & Notes"}),a.jsx("textarea",{value:o,onChange:I=>l(I.target.value),placeholder:"Describe what happened during the test, any issues found, or additional observations...",className:"w-full h-32 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Screenshot Evidence"}),c?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:c,alt:"Test screenshot",className:"w-full rounded-lg border border-gray-300 dark:border-gray-600"}),a.jsx("button",{onClick:()=>u(null),className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:a.jsx(rr,{className:"h-4 w-4"})})]}):a.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center",children:[a.jsx(Zf,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Paste screenshot (Ctrl+V) or upload an image"}),a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(fE,{className:"h-4 w-4"}),a.jsx("span",{children:"Press Ctrl+V to paste"})]}),a.jsx("span",{className:"text-gray-400",children:"or"}),a.jsxs("label",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer",children:["Browse Files",a.jsx("input",{id:"screenshot-upload-input","aria-label":"Upload screenshot file",type:"file",accept:"image/*",onChange:E,className:"hidden"})]})]})]})]}),y&&y.status==="FAIL"&&a.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"font-semibold text-indigo-800 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[a.jsx(Ga,{className:"h-5 w-5"}),"Convert to Strategic Directive"]}),a.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-400 mb-3",children:"This test failure can be automatically converted into a Strategic Directive using AI to analyze the issue and create comprehensive documentation."}),a.jsxs("ul",{className:"text-xs text-indigo-600 dark:text-indigo-500 space-y-1",children:[a.jsx("li",{children:" AI analyzes business impact and priority"}),a.jsx("li",{children:" Generates complete SD documentation"}),a.jsx("li",{children:" Links to this UAT test for traceability"}),a.jsx("li",{children:" Creates actionable requirements"})]})]}),a.jsxs("button",{onClick:()=>x(!0),className:"ml-4 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg flex items-center gap-2",children:[a.jsx(He,{className:"h-4 w-4"}),"Create SD"]})]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:" Testing Tips"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:' Click "Copy UAT Agent Prompt" to get AI assistance for this test'}),a.jsx("li",{children:" Take screenshots of any issues or important results"}),a.jsx("li",{children:" Paste screenshots directly with Ctrl+V (no need to save first)"}),a.jsx("li",{children:" Add detailed notes about what you observed"}),a.jsx("li",{children:` Mark as "Blocked" if you can't complete the test due to dependencies`})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors","aria-label":"Close modal",children:"Cancel"}),a.jsxs("button",{onClick:T,disabled:!s||d,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${s&&!d?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[d&&a.jsx(Or,{className:"h-4 w-4 animate-spin"}),d?"Saving...":"Save Test Result"]})]})})]}),b&&y&&a.jsx(Mk,{testResult:y,onClose:()=>x(!1),onSuccess:I=>{x(!1),alert(`Strategic Directive created successfully!
Submission ID: ${I.id}
SD ID: ${I.sd_id}`)}})]})}const Tp={Main:[{value:"chairman-console",label:"Chairman Console",route:"/chairman"},{value:"eva-assistant",label:"EVA Assistant",route:"/eva"},{value:"ventures",label:"Ventures",route:"/ventures"},{value:"portfolios",label:"Portfolios",route:"/portfolios"}],"AI Orchestration":[{value:"eva-dashboard",label:"EVA Dashboard",route:"/eva-dashboard"},{value:"workflows",label:"Workflows",route:"/workflows"},{value:"ai-agents",label:"AI Agents",route:"/ai-agents"},{value:"eva-knowledge-base",label:"EVA Knowledge Base",route:"/knowledge-base"}],"Analytics & Reports":[{value:"analytics",label:"Analytics",route:"/analytics"},{value:"reports",label:"Reports",route:"/reports"},{value:"insights",label:"Insights",route:"/insights"},{value:"risk-forecasting",label:"Risk Forecasting",route:"/risk-forecasting"},{value:"advanced-analytics",label:"Advanced Analytics",route:"/advanced-analytics"},{value:"mobile-companion",label:"Mobile Companion",route:"/mobile"}],Administration:[{value:"governance",label:"Governance",route:"/governance"},{value:"integration-hub",label:"Integration Hub",route:"/integrations"},{value:"enhanced-security",label:"Enhanced Security",route:"/security"},{value:"settings",label:"Settings",route:"/settings"}],"System & Authentication":[{value:"authentication",label:"Authentication & Login",route:"/login"},{value:"landing",label:"Landing Page",route:"/"}],"Cross-Cutting":[{value:"navigation",label:"Navigation & Routing"},{value:"ui-components",label:"UI Components"},{value:"forms",label:"Forms & Validation"},{value:"notifications",label:"Notifications"},{value:"dark-mode",label:"Dark Mode / Theming"},{value:"responsive",label:"Responsive Design"},{value:"accessibility",label:"Accessibility"},{value:"performance-general",label:"Performance & Loading"}],Other:[{value:"edge-cases",label:"Edge Cases"},{value:"regression",label:"Regression Tests"},{value:"exploratory",label:"Exploratory Testing"},{value:"other",label:"Other/Miscellaneous"}]},GR=bi("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function KR({onClose:e,onSave:t}){const[r,n]=w.useState({title:"",section:"",priority:"medium",test_type:"manual",description:""}),[s,i]=w.useState({}),[o,l]=w.useState(!1),[c,u]=w.useState(!1),d=m=>{const{name:v,value:b}=m.target;n(x=>({...x,[v]:b})),s[v]&&i(x=>({...x,[v]:""}))},h=()=>{const m={};return r.title.trim()||(m.title="Title is required"),r.section||(m.section="Section is required"),r.description.trim()||(m.description="Description is required"),i(m),Object.keys(m).length===0},f=()=>{const m=r.section.toUpperCase().replace(/_/g,"-"),v=Date.now().toString(36).toUpperCase();return`MANUAL-${m}-${v}`},p=async m=>{if(m.preventDefault(),!!h()){l(!0),u(!1);try{const v=f(),{error:b}=await GR.from("uat_cases").insert({id:v,section:r.section,title:r.title,priority:r.priority,test_type:r.test_type,description:r.description});if(b)throw b;u(!0),t&&t({id:v,...r}),setTimeout(()=>{n({title:"",section:"",priority:"medium",test_type:"manual",description:""}),u(!1)},2e3)}catch(v){console.error("Failed to create test case:",v),i({submit:v.message||"Failed to create test case. Please try again."})}finally{l(!1)}}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-500 dark:from-green-700 dark:to-green-600 text-white p-6 rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Create New Test Case"}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(rr,{className:"h-5 w-5"})})]})}),a.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[c&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(fe,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"text-green-800 dark:text-green-300",children:"Test case created successfully!"})]}),s.submit&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(zt,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),a.jsx("span",{className:"text-red-800 dark:text-red-300",children:s.submit})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"test-case-title",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Case Title *"}),a.jsx("input",{id:"test-case-title",type:"text",name:"title",value:r.title,onChange:d,placeholder:"Enter a descriptive title for the test case",className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 ${s.title?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-green-500"}`}),s.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.title})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"test-case-section",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Section *"}),a.jsxs("select",{id:"test-case-section",name:"section",value:r.section,onChange:d,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 ${s.section?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-green-500"}`,children:[a.jsx("option",{value:"",children:"Select a section..."}),Object.entries(Tp).map(([m,v])=>a.jsx("optgroup",{label:m,children:v.map(b=>a.jsx("option",{value:b.value,children:b.label},b.value))},m))]}),s.section&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.section})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"test-case-priority",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a.jsxs("select",{id:"test-case-priority",name:"priority",value:r.priority,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"test-case-type",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Type"}),a.jsxs("select",{id:"test-case-type",name:"test_type",value:r.test_type,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"manual",children:"Manual"}),a.jsx("option",{value:"automatic",children:"Automatic"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"test-case-description",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Description *"}),a.jsx("textarea",{id:"test-case-description",name:"description",value:r.description,onChange:d,placeholder:"Describe the steps to execute this test, expected results, and any important notes...",rows:6,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 resize-none ${s.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-green-500"}`}),s.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.description}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Include step-by-step instructions, expected outcomes, and any prerequisites"})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:" Tips for Good Test Cases"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:" Use clear, action-oriented titles"}),a.jsx("li",{children:" Include specific steps in the description"}),a.jsx("li",{children:" Define clear pass/fail criteria"}),a.jsx("li",{children:" Mark as Critical if failure blocks key functionality"}),a.jsx("li",{children:" Choose Manual for user interaction tests"})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:p,disabled:o||c,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${o||c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[o&&a.jsx(Or,{className:"h-4 w-4 animate-spin"}),c?a.jsxs(a.Fragment,{children:[a.jsx(fe,{className:"h-4 w-4"}),"Created!"]}):a.jsxs(a.Fragment,{children:[a.jsx(is,{className:"h-4 w-4"}),"Create Test Case"]})]})]})})]})})}const Pu=bi("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function JR({testCase:e,onClose:t,onSave:r,onDelete:n}){const[s,i]=w.useState({title:e.title||"",section:e.section||"",priority:e.priority||"medium",test_type:e.test_type||"manual",description:e.description||""}),[o,l]=w.useState({}),[c,u]=w.useState(!1),[d,h]=w.useState(!1),[f,p]=w.useState(!1),[m,v]=w.useState(!1),b=k=>{const{name:N,value:j}=k.target;i(T=>({...T,[N]:j})),o[N]&&l(T=>({...T,[N]:""}))},x=()=>{const k={};return s.title.trim()||(k.title="Title is required"),s.section||(k.section="Section is required"),s.description.trim()||(k.description="Description is required"),l(k),Object.keys(k).length===0},y=async k=>{if(k.preventDefault(),!!x()){u(!0),p(!1);try{const{error:N}=await Pu.from("uat_cases").update({title:s.title,section:s.section,priority:s.priority,test_type:s.test_type,description:s.description}).eq("id",e.id);if(N)throw N;p(!0),r&&r({...e,...s}),setTimeout(()=>{t()},1500)}catch(N){console.error("Failed to update test case:",N),l({submit:N.message||"Failed to update test case. Please try again."})}finally{u(!1)}}},g=async()=>{if(!m){v(!0);return}h(!0);try{await Pu.from("uat_results").delete().eq("case_id",e.id);const{error:k}=await Pu.from("uat_cases").delete().eq("id",e.id);if(k)throw k;n&&n(e.id),t()}catch(k){console.error("Failed to delete test case:",k),l({submit:k.message||"Failed to delete test case. Please try again."}),v(!1)}finally{h(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 dark:from-blue-700 dark:to-blue-600 text-white p-6 rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Edit Test Case"}),a.jsxs("p",{className:"text-blue-100 mt-1",children:["ID: ",e.id]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(rr,{className:"h-5 w-5"})})]})}),a.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[f&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(fe,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"text-green-800 dark:text-green-300",children:"Test case updated successfully!"})]}),o.submit&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(zt,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),a.jsx("span",{className:"text-red-800 dark:text-red-300",children:o.submit})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"edit-test-title",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Case Title *"}),a.jsx("input",{type:"text",id:"edit-test-title",name:"title",value:s.title,onChange:b,placeholder:"Enter a descriptive title for the test case",className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 ${o.title?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`}),o.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.title})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"edit-test-section",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Section *"}),a.jsxs("select",{id:"edit-test-section",name:"section",value:s.section,onChange:b,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 ${o.section?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`,children:[a.jsx("option",{value:"",children:"Select a section..."}),Object.entries(Tp).map(([k,N])=>a.jsx("optgroup",{label:k,children:N.map(j=>a.jsx("option",{value:j.value,children:j.label},j.value))},k))]}),o.section&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.section})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"edit-test-priority",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a.jsxs("select",{id:"edit-test-priority",name:"priority",value:s.priority,onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"edit-test-type",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Type"}),a.jsxs("select",{id:"edit-test-type",name:"test_type",value:s.test_type,onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"manual",children:"Manual"}),a.jsx("option",{value:"automatic",children:"Automatic"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"edit-test-description",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Test Description *"}),a.jsx("textarea",{id:"edit-test-description",name:"description",value:s.description,onChange:b,placeholder:"Describe the steps to execute this test, expected results, and any important notes...",rows:6,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 resize-none ${o.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`}),o.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.description}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Include step-by-step instructions, expected outcomes, and any prerequisites"})]}),m&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800 dark:text-red-300 font-semibold mb-2",children:"Are you sure you want to delete this test case?"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:"This will permanently remove the test case and all associated test results."})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("button",{type:"button",onClick:g,disabled:d,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${m?"bg-red-600 text-white hover:bg-red-700":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50"} ${d?"opacity-50 cursor-not-allowed":""}`,"aria-label":m?"Confirm delete test case":"Delete test case",children:[d&&a.jsx(Or,{className:"h-4 w-4 animate-spin"}),a.jsx(sc,{className:"h-4 w-4"}),m?"Confirm Delete":"Delete"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:y,disabled:c||f,className:`px-6 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2 ${c||f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[c&&a.jsx(Or,{className:"h-4 w-4 animate-spin"}),f?a.jsxs(a.Fragment,{children:[a.jsx(fe,{className:"h-4 w-4"}),"Saved!"]}):a.jsxs(a.Fragment,{children:[a.jsx(is,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})})]})})}function XR(){var _,M,P,O,$,R,F,S;const[e,t]=w.useState(null),[r,n]=w.useState(null),[s,i]=w.useState(null),[o,l]=w.useState({progress:[],errors:[],alerts:[]}),[c,u]=w.useState("EHG"),[d,h]=w.useState(!0),[f,p]=w.useState("progress"),[m,v]=w.useState(!1),[b,x]=w.useState(!1),[y,g]=w.useState(!1),k=async()=>{try{const K=await(await fetch("/api/testing/campaign/status")).json();t(K)}catch(U){console.error("Failed to fetch campaign status:",U)}},N=async()=>{try{const K=await(await fetch("/api/testing/campaign/apps")).json();n(K)}catch(U){console.error("Failed to fetch app counts:",U)}},j=async()=>{try{const K=await(await fetch("/api/testing/campaign/health")).json();i(K)}catch(U){console.error("Failed to fetch health:",U)}},T=async()=>{try{const[U,K,C]=await Promise.all([fetch("/api/testing/campaign/logs/progress?limit=50"),fetch("/api/testing/campaign/logs/errors?limit=50"),fetch("/api/testing/campaign/logs/alerts?limit=20")]),[re,ye,le]=await Promise.all([U.json(),K.json(),C.json()]);l({progress:re.lines||[],errors:ye.lines||[],alerts:le.lines||[]})}catch(U){console.error("Failed to fetch logs:",U)}},E=async()=>{v(!0);try{const U=await fetch("/api/testing/campaign/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetApplication:c,smokeOnly:y})});if(U.ok)setTimeout(k,2e3);else{const K=await U.json();alert(`Failed to start campaign: ${K.error}`)}}catch(U){alert(`Failed to start campaign: ${U.message}`)}finally{v(!1),x(!1)}},I=async()=>{if(confirm("Stop the testing campaign? Tests in progress will be interrupted.")){v(!0);try{const U=await fetch("/api/testing/campaign/stop",{method:"POST"});if(U.ok)setTimeout(k,1e3);else{const K=await U.json();alert(`Failed to stop campaign: ${K.error}`)}}catch(U){alert(`Failed to stop campaign: ${U.message}`)}finally{v(!1)}}},D=()=>{k(),N(),j(),T()};w.useEffect(()=>{D();const U=setInterval(D,1e4);return()=>clearInterval(U)},[]);const A=(()=>{if(!e||e.status==="not_started")return{icon:"",color:"text-gray-500",label:"Not Started"};switch(e.status){case"running":return{icon:"",color:"text-green-600",label:"HEALTHY"};case"complete":return{icon:"",color:"text-blue-600",label:"COMPLETE"};case"crashed":return{icon:"",color:"text-red-600",label:"CRASHED"};default:return{icon:"",color:"text-yellow-600",label:e.status.toUpperCase()}}})();return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden mb-6",children:[a.jsxs("button",{onClick:()=>h(!d),className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-500 dark:from-indigo-700 dark:to-indigo-600 text-white p-4 flex items-center justify-between hover:from-indigo-700 hover:to-indigo-600 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(TE,{className:"h-6 w-6"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Testing Campaign Management"}),(e==null?void 0:e.running)&&a.jsxs("span",{className:"bg-green-400/30 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[a.jsx(tc,{className:"h-4 w-4 animate-pulse"}),"Running"]})]}),d?a.jsx(nc,{className:"h-5 w-5"}):a.jsx(Lt,{className:"h-5 w-5"})]}),d&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[a.jsxs("label",{className:"flex items-center gap-2 text-base font-semibold text-gray-700 dark:text-gray-300 mb-3",children:[a.jsx(Zn,{className:"h-5 w-5"}),"Target Application"]}),a.jsxs("select",{id:"target-app-select",value:c,onChange:U=>u(U.target.value),disabled:e==null?void 0:e.running,className:"w-full px-4 py-2 border border-blue-300 dark:border-blue-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-medium text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("option",{value:"EHG",children:"EHG (Customer Application) - RECOMMENDED"}),a.jsx("option",{value:"EHG_Engineer",children:"EHG_Engineer (Dashboard)"})]}),r&&a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-blue-700 dark:text-blue-300 text-base",children:"EHG"}),a.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-base",children:[((_=r.EHG)==null?void 0:_.tested)||0,"/",((M=r.EHG)==null?void 0:M.completed)||0," tested",((P=r.EHG)==null?void 0:P.untested)>0&&a.jsxs("span",{className:"text-orange-600 dark:text-orange-400 ml-2",children:["(",r.EHG.untested," remaining)"]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300 text-base",children:"EHG_Engineer"}),a.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-base",children:[((O=r.EHG_Engineer)==null?void 0:O.tested)||0,"/",(($=r.EHG_Engineer)==null?void 0:$.completed)||0," tested",((R=r.EHG_Engineer)==null?void 0:R.untested)>0&&a.jsxs("span",{className:"text-orange-600 dark:text-orange-400 ml-2",children:["(",r.EHG_Engineer.untested," remaining)"]})]})]})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{id:"fast-mode-checkbox",type:"checkbox",checked:y,onChange:U=>g(U.target.checked),disabled:e==null?void 0:e.running,className:"w-5 h-5 text-green-600 bg-white border-green-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:" Fast Mode (Smoke Tests Only)"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:y?a.jsx(a.Fragment,{children:"5x faster (~60s per SD, smoke tests only) vs. Full testing (~5min per SD with E2E)"}):a.jsx(a.Fragment,{children:"Full testing includes unit tests + E2E tests (~5min per SD)"})})]})]})}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:A.icon}),a.jsxs("div",{children:[a.jsx("div",{className:`text-lg font-bold ${A.color}`,children:A.label}),(e==null?void 0:e.targetApplication)&&a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Testing: ",a.jsx("span",{className:"font-semibold",children:e.targetApplication})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:D,"aria-label":"Refresh campaign status",className:"p-2 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",title:"Refresh",children:a.jsx(tr,{className:"h-4 w-4"})}),e!=null&&e.running?a.jsxs("button",{onClick:I,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[a.jsx(ip,{className:"h-4 w-4"}),"Stop"]}):a.jsxs("button",{onClick:()=>x(!0),disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[a.jsx(CE,{className:"h-4 w-4"}),"Start Campaign"]})]})]}),(e==null?void 0:e.running)&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress"}),a.jsxs("span",{className:"font-semibold",children:[e.progress," (",e.percent,"%)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.percent}%`}})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Current SD"}),a.jsx("div",{className:"font-mono text-xs",children:e.currentSD||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Last Update"}),a.jsx("div",{className:"font-mono text-xs",children:e.lastUpdate?new Date(e.lastUpdate).toLocaleTimeString():"N/A"})]})]})]})]}),(s==null?void 0:s.checkpoint)&&a.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 text-base font-medium mb-1",children:[a.jsx(He,{className:"h-5 w-5"}),"Tested"]}),a.jsx("div",{className:"text-2xl font-bold",children:s.checkpoint.tested})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-base font-medium mb-1",children:[a.jsx(fe,{className:"h-5 w-5"}),"Passed"]}),a.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.checkpoint.passed}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.checkpoint.tested>0?(s.checkpoint.passed/s.checkpoint.tested*100).toFixed(1):0,"%"]})]}),a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3 border border-red-200 dark:border-red-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-base font-medium mb-1",children:[a.jsx(xt,{className:"h-5 w-5"}),"Failed"]}),a.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.checkpoint.failed}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.checkpoint.tested>0?(s.checkpoint.failed/s.checkpoint.tested*100).toFixed(1):0,"%"]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3 border border-yellow-200 dark:border-yellow-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-400 text-base font-medium mb-1",children:[a.jsx(hr,{className:"h-5 w-5"}),"Errors"]}),a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.checkpoint.errors}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.checkpoint.tested>0?(s.checkpoint.errors/s.checkpoint.tested*100).toFixed(1):0,"%"]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-600",children:["progress","errors","alerts"].map(U=>a.jsxs("button",{onClick:()=>p(U),className:`px-4 py-2 text-sm font-medium transition-colors ${f===U?"bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-600":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[U.charAt(0).toUpperCase()+U.slice(1),o[U].length>0&&a.jsx("span",{className:"ml-2 bg-gray-200 dark:bg-gray-600 px-2 py-0.5 rounded-full text-xs",children:o[U].length})]},U))}),a.jsx("div",{className:"p-4 bg-gray-900 text-gray-100 font-mono text-sm max-h-64 overflow-y-auto",children:o[f].length>0?o[f].map((U,K)=>a.jsx("div",{className:"py-1",children:U},K)):a.jsxs("div",{className:"text-gray-500 text-center py-8 text-base",children:["No ",f," logs yet"]})})]})]}),b&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Start Testing Campaign?"}),a.jsxs("div",{className:"space-y-3 mb-6 text-base",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Application:"}),a.jsx("span",{className:"font-semibold",children:c})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"SDs to test:"}),a.jsx("span",{className:"font-semibold",children:((F=r==null?void 0:r[c])==null?void 0:F.untested)||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Estimated time:"}),a.jsxs("span",{className:"font-semibold",children:["~",Math.round((((S=r==null?void 0:r[c])==null?void 0:S.untested)||0)*5/60)," hours"]})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-6 text-base",children:a.jsxs("p",{children:["This will run ",a.jsx("strong",{children:"REAL tests"})," against the"," ",a.jsx("strong",{children:c})," application at"," ",a.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 rounded text-sm",children:c==="EHG"?"/mnt/c/_EHG/ehg":"/mnt/c/_EHG/EHG_Engineer"})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:E,disabled:m,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:m?"Starting...":"Start Campaign"})]})]})})]})}function YR({runStats:e}){return e?a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-blue-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Total Tests"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-800 dark:text-gray-100",children:e.executed})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(He,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600 dark:text-blue-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-green-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Passed"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-green-600",children:e.passed})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-green-100 dark:bg-green-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(fe,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-red-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Failed"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-red-600",children:e.failed})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-red-100 dark:bg-red-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(qr,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600 dark:text-red-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3 sm:p-4 md:p-6 border-l-4 border-yellow-500",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Blocked"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-yellow-600",children:e.blocked})]}),a.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg self-end sm:self-auto",children:a.jsx(xt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-yellow-600 dark:text-yellow-400"})})]})})]}):null}function bx({testCases:e,priorityFilter:t,setPriorityFilter:r,statusFilter:n,setStatusFilter:s,sectionFilter:i,setSectionFilter:o,testTypeFilter:l,setTestTypeFilter:c,searchQuery:u,setSearchQuery:d,filtersExpanded:h,setFiltersExpanded:f,clearFilters:p,hasActiveFilters:m,filteredTestCases:v,searchInputId:b="uat-search-input"}){const x={all:e.length,PASS:e.filter(N=>N.status==="PASS").length,FAIL:e.filter(N=>N.status==="FAIL").length,BLOCKED:e.filter(N=>N.status==="BLOCKED").length,NA:e.filter(N=>N.status==="NA").length,not_tested:e.filter(N=>!N.status).length},y={all:e.length,critical:e.filter(N=>N.priority==="critical").length,high:e.filter(N=>N.priority==="high").length,medium:e.filter(N=>N.priority==="medium").length,low:e.filter(N=>N.priority==="low").length},g=N=>e.filter(j=>{if(t!=="all"&&j.priority!==t||n!=="all"&&(n==="not_tested"&&j.status||n!=="not_tested"&&j.status!==n)||l!=="all"&&j.test_type!==l)return!1;if(u){const I=u.toLowerCase();if(!j.id.toLowerCase().includes(I)&&!j.title.toLowerCase().includes(I)&&!(j.section||"").toLowerCase().includes(I))return!1}if(N==="all")return!0;const T=(j.section||"").toLowerCase(),E=N.toLowerCase();return T===E}).length,k=N=>e.filter(j=>{if(t!=="all"&&j.priority!==t||n!=="all"&&(n==="not_tested"&&j.status||n!=="not_tested"&&j.status!==n))return!1;if(i!=="all"){const T=(j.section||"").toLowerCase(),E=i.toLowerCase();if(T!==E)return!1}if(u){const T=u.toLowerCase();if(!j.id.toLowerCase().includes(T)&&!j.title.toLowerCase().includes(T)&&!(j.section||"").toLowerCase().includes(T))return!1}return N==="all"?!0:N==="automatic"?j.test_type==="automatic"||!j.test_type:N==="manual"?j.test_type==="manual":!1}).length;return a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600",children:[a.jsxs("button",{onClick:()=>f(!h),className:"w-full p-4 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_l,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),a.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:["Filters",m&&a.jsx("span",{className:"ml-2 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded-full",children:"Active"})]})]}),a.jsx(Lt,{className:`h-5 w-5 text-gray-600 dark:text-gray-400 transition-transform ${h?"rotate-180":""}`})]}),h&&a.jsxs("div",{className:"p-4 pt-0",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Priority"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>r("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${t==="all"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["All (",y.all,")"]}),a.jsxs("button",{onClick:()=>r("critical"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${t==="critical"?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:["Critical (",y.critical,")"]}),a.jsxs("button",{onClick:()=>r("high"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${t==="high"?"bg-yellow-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"}`,children:["High (",y.high,")"]}),a.jsxs("button",{onClick:()=>r("medium"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${t==="medium"?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:["Medium (",y.medium,")"]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Status"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>s("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${n==="all"?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["All (",x.all,")"]}),a.jsxs("button",{onClick:()=>s("PASS"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${n==="PASS"?"bg-green-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-green-50 dark:hover:bg-green-900/20"}`,children:["Pass (",x.PASS,")"]}),a.jsxs("button",{onClick:()=>s("FAIL"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${n==="FAIL"?"bg-red-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:["Fail (",x.FAIL,")"]}),a.jsxs("button",{onClick:()=>s("not_tested"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${n==="not_tested"?"bg-gray-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["Not Tested (",x.not_tested,")"]}),x.BLOCKED>0&&a.jsxs("button",{onClick:()=>s("BLOCKED"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${n==="BLOCKED"?"bg-yellow-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"}`,children:["Blocked (",x.BLOCKED,")"]})]})]}),a.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Section"}),a.jsxs("select",{value:i,onChange:N=>o(N.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[a.jsxs("option",{value:"all",children:["All Sections (",g("all"),")"]}),Object.entries(Tp).map(([N,j])=>a.jsx("optgroup",{label:N,children:j.map(T=>{const E=g(T.value);return a.jsxs("option",{value:T.value,children:[T.label," (",E,")"]},T.value)})},N))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase mb-2 block",children:"Test Type"}),a.jsxs("select",{value:l,onChange:N=>c(N.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[a.jsxs("option",{value:"all",children:["All Types (",k("all"),")"]}),a.jsxs("option",{value:"automatic",children:["Automatic (",k("automatic"),")"]}),a.jsxs("option",{value:"manual",children:["Manual (",k("manual"),")"]})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",id:b,"aria-label":"Search test cases",placeholder:"Search test ID, title, or section...",value:u,onChange:N=>d(N.target.value),className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"}),m&&a.jsx("button",{onClick:p,className:"px-4 py-1.5 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Clear Filters"})]}),m&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Showing ",v.length," of ",e.length," tests"]})]})]})}const QR=bi("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function wx({testCases:e,filteredTestCases:t,activeTestId:r,onOpenTestModal:n,onSetEditTestCase:s,onSetSdModalTestCase:i,onTestCaseDeleted:o,clearFilters:l,hasActiveFilters:c,showActive:u=!0}){const d=async h=>{if(window.confirm(`Are you sure you want to delete test case ${h.id}?

This will also clear any active references and delete associated results.`)){const{data:f,error:p}=await QR.rpc("delete_uat_case",{case_id_to_delete:h.id});p?alert("Failed to delete test case: "+p.message):f&&!f.success?alert("Failed to delete test case: "+f.error):o(h.id)}};return e.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(He,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"Loading test cases..."})]}):t.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(He,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No tests match your filters"}),a.jsx("button",{onClick:l,className:"mt-2 text-purple-600 dark:text-purple-400 hover:underline",children:"Clear filters"})]}):a.jsx("div",{className:"space-y-2",children:t.map(h=>a.jsx("div",{className:`border rounded-lg p-3 transition-all ${u&&r===h.id?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 shadow-md":"border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-600"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`font-semibold ${u&&r===h.id?"text-purple-700 dark:text-purple-300":"text-gray-800 dark:text-gray-200"}`,children:h.id}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${h.priority==="critical"?"bg-red-100 text-red-700":h.priority==="high"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:h.priority}),h.status&&a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${h.status==="PASS"?"bg-green-100 text-green-700":h.status==="FAIL"?"bg-red-100 text-red-700":h.status==="BLOCKED"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:h.status}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${h.test_type==="manual"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:h.test_type==="manual"?"Manual":"Auto"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:h.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Section: ",h.section]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&r===h.id?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-purple-600 dark:text-purple-400 font-semibold",children:"ACTIVE"}),a.jsx("button",{onClick:()=>n(h),className:"px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Continue Test"})]}):h.status?a.jsx("button",{onClick:()=>n(h),className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm",children:"Retest"}):a.jsx("button",{onClick:()=>n(h),className:"px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Start Test"}),h.status==="FAIL"&&a.jsxs("button",{onClick:()=>i(h),className:"px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-colors text-sm flex items-center gap-1",title:"Create Strategic Directive from this failed test using AI",children:[a.jsx(os,{className:"h-3 w-3"}),"Create SD"]}),a.jsx("button",{onClick:()=>s(h),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",title:"Edit test case",children:a.jsx(Yd,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>d(h),className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",title:"Delete test case",children:a.jsx(sc,{className:"h-4 w-4"})})]})]})},h.id))})}const Mn=bi("https://dedlbzhpgkmetvhbkyzq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g");function ZR(){const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(null),[o,l]=w.useState([]),[c,u]=w.useState(null),[d,h]=w.useState(null),[f,p]=w.useState(!0),[m,v]=w.useState(!1),[b,x]=w.useState("critical"),[y,g]=w.useState("not_tested"),[k,N]=w.useState("all"),[j,T]=w.useState("manual"),[E,I]=w.useState(""),[D,z]=w.useState(!1),[A,_]=w.useState(!1),[M,P]=w.useState(null),[O,$]=w.useState(null);w.useEffect(()=>{R(),U();const q=setInterval(()=>{F()},300*1e3);return()=>clearInterval(q)},[]),w.useEffect(()=>{if(r){S(r);const q=me(r);return()=>q.unsubscribe()}},[r]);const R=async()=>{const{data:q,error:Y}=await Mn.from("uat_runs").select("*").order("started_at",{ascending:!1});!Y&&q&&(t(q),q.length>0&&!r&&n(q[0].id)),p(!1),v(!1)},F=async()=>{v(!0),await R(),r&&await S(r)},S=async q=>{const{data:Y}=await Mn.from("v_uat_run_stats").select("*").eq("run_id",q).single();i(Y),u((Y==null?void 0:Y.active_case_id)||null),await K(q)},U=async()=>{const{data:q}=await Mn.from("uat_cases").select("*").order("sort_order",{ascending:!0}).order("section").order("priority",{ascending:!1});l(q||[])},K=async q=>{if(!q)return;const{data:Y}=await Mn.from("uat_results").select("case_id, status").eq("run_id",q),Z=new Map((Y==null?void 0:Y.map(ie=>[ie.case_id,ie.status]))||[]);l(ie=>ie.map(Ge=>({...Ge,status:Z.get(Ge.id)||null})))},C=async q=>{let Y=r;if(!Y){const{data:Z,error:ie}=await Mn.from("uat_runs").insert({app:"EHG",env_url:"http://localhost:5173",app_version:"1.0.0",browser:"Chrome",role:"Admin",notes:"UAT testing session",started_at:new Date().toISOString(),created_by:"UAT Dashboard"}).select().single();if(ie){console.error("Failed to create run:",ie);return}Y=Z.id,n(Y),t(Ge=>[Z,...Ge])}try{await Mn.from("uat_runs").update({active_case_id:q.id}).eq("id",Y),u(q.id)}catch(Z){console.warn("Could not set active test in database:",Z),u(q.id)}h({...q,runId:Y})},re=q=>{l(Y=>Y.map(Z=>Z.id===d.id?{...Z,status:q}:Z)),h(null),r&&S(r)},ye=()=>{h(null)},le=q=>{U(),_(!1)},We=q=>{U(),P(null)},ht=q=>{l(Y=>Y.filter(Z=>Z.id!==q)),P(null)},me=q=>Mn.channel(`uat-${q}`).on("postgres_changes",{event:"*",schema:"public",table:"uat_results",filter:`run_id=eq.${q}`},()=>{S(q)}).subscribe(),xe=o.filter(q=>{if(b!=="all"&&q.priority!==b||y!=="all"&&(y==="not_tested"&&q.status||y!=="not_tested"&&q.status!==y))return!1;if(k!=="all"){const Y=(q.section||"").toLowerCase(),Z=k.toLowerCase();if(Y!==Z)return!1}if(j!=="all"&&q.test_type!==j)return!1;if(E){const Y=E.toLowerCase();if(!q.id.toLowerCase().includes(Y)&&!q.title.toLowerCase().includes(Y)&&!(q.section||"").toLowerCase().includes(Y))return!1}return!0}),qe=()=>{x("all"),g("all"),N("all"),T("all"),I("")},Te=b!=="all"||y!=="all"||k!=="all"||j!=="all"||E,nr={all:o.length,PASS:o.filter(q=>q.status==="PASS").length,FAIL:o.filter(q=>q.status==="FAIL").length,BLOCKED:o.filter(q=>q.status==="BLOCKED").length,NA:o.filter(q=>q.status==="NA").length,not_tested:o.filter(q=>!q.status).length};return f?a.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 dark:border-blue-400 mx-auto mb-4"}),a.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading UAT Dashboard..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-3 sm:p-4 md:p-6",children:[a.jsx(XR,{}),a.jsx("div",{className:"mb-6 md:mb-8",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 rounded-lg shadow-lg",children:a.jsx(ai,{className:"h-8 w-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"UAT Testing Dashboard"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Monitor and manage your user acceptance tests"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all shadow-sm hover:shadow font-semibold",children:[a.jsx(sp,{className:"h-4 w-4"}),"Create Test"]}),a.jsxs("button",{onClick:F,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-md transition-shadow disabled:opacity-50",children:[a.jsx(tr,{className:`h-4 w-4 ${m?"animate-spin":""}`}),"Refresh"]})]})]})}),a.jsx(YR,{runStats:s}),s&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden mb-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 dark:from-purple-700 dark:to-purple-600 text-white p-4",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(He,{className:"h-5 w-5"}),"Test Cases",a.jsxs("span",{className:"ml-2 bg-white/20 px-2 py-1 rounded-full text-sm",children:[nr.PASS,"/",o.length," passed"]}),c&&a.jsxs("span",{className:"ml-auto bg-yellow-400/30 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[a.jsx(os,{className:"h-4 w-4"}),"Active: ",c]})]})}),a.jsx(bx,{testCases:o,priorityFilter:b,setPriorityFilter:x,statusFilter:y,setStatusFilter:g,sectionFilter:k,setSectionFilter:N,testTypeFilter:j,setTestTypeFilter:T,searchQuery:E,setSearchQuery:I,filtersExpanded:D,setFiltersExpanded:z,clearFilters:qe,hasActiveFilters:Te,filteredTestCases:xe}),a.jsx("div",{className:"p-4",children:a.jsx(wx,{testCases:o,filteredTestCases:xe,activeTestId:c,onOpenTestModal:C,onSetEditTestCase:P,onSetSdModalTestCase:$,onTestCaseDeleted:ht,clearFilters:qe,hasActiveFilters:Te,showActive:!0})})]}),!r&&o.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-center",children:'No active test run. Click "Start Test" on any test case to begin a new session.'})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 dark:from-purple-700 dark:to-purple-600 text-white p-4",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(He,{className:"h-5 w-5"}),"Available Test Cases",a.jsxs("span",{className:"ml-auto bg-white/20 px-2 py-1 rounded-full text-sm",children:[o.length," tests ready"]})]})}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600 p-4",children:a.jsx(bx,{testCases:o,priorityFilter:b,setPriorityFilter:x,statusFilter:y,setStatusFilter:g,sectionFilter:k,setSectionFilter:N,testTypeFilter:j,setTestTypeFilter:T,searchQuery:E,setSearchQuery:I,filtersExpanded:!0,setFiltersExpanded:z,clearFilters:qe,hasActiveFilters:Te,filteredTestCases:xe,searchInputId:"uat-search-no-run"})}),a.jsx("div",{className:"p-4",children:a.jsx(wx,{testCases:o,filteredTestCases:xe,activeTestId:c,onOpenTestModal:C,onSetEditTestCase:P,onSetSdModalTestCase:$,onTestCaseDeleted:ht,clearFilters:qe,hasActiveFilters:Te,showActive:!1})})]})]}),!r&&o.length===0&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-12 text-center",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading test cases..."})}),d&&a.jsx(qR,{testCase:d,runId:d.runId,onClose:ye,onComplete:re}),A&&a.jsx(KR,{onClose:()=>_(!1),onSave:le}),M&&a.jsx(JR,{testCase:M,onClose:()=>P(null),onSave:We,onDelete:ht}),O&&a.jsx(Mk,{testResult:O,onClose:()=>$(null),onSuccess:q=>{$(null),alert(`Strategic Directive created successfully!
Submission ID: ${q.id}
SD ID: ${q.sd_id}`)}})]})}const To=window.location.hostname==="localhost",Oi={log:(...e)=>{To&&console.log(...e)},error:(...e)=>{console.error(...e)},warn:(...e)=>{To&&console.warn(...e)},info:(...e)=>{To&&console.info(...e)},debug:(...e)=>{To&&console.debug(...e)}};function eD(){var k,N,j;const[e,t]=w.useState({leoProtocol:{version:"detecting...",activeRole:null,currentSD:null,currentPRD:null,phase:null},context:{usage:0,total:18e4,breakdown:{}},handoffs:[],strategicDirectives:[],prds:[],checklists:{},progress:{overall:0,byPhase:{}}}),[r,n]=w.useState(!1),[s,i]=w.useState(!1),{preferences:o}=jS(),[l,c]=Bc("checklists",{}),[u,d]=Bc("sidebarCollapsed",!1),[h,f]=Bc("compactMode",!1),p=kS("ws://localhost:3000",{onOpen:()=>{n(!0),Oi.log("Connected to dashboard server")},onMessage:T=>{try{const E=JSON.parse(T.data);E.type==="state"&&t(E.data)}catch(E){Oi.error("Error parsing WebSocket message:",E)}},onClose:()=>{n(!1),Oi.log("Disconnected from dashboard server")},onError:T=>{Oi.error("WebSocket error:",T)}});w.useEffect(()=>{fetch("/api/state").then(T=>T.json()).then(T=>{const E={...T,checklists:{...T.checklists,...l}};t(E)}).catch(T=>Oi.error("Error loading state:",T))},[]),w.useEffect(()=>{Object.keys(e.checklists).length>0&&c(e.checklists)},[e.checklists]),w.useEffect(()=>{o.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[o.theme]);const m=()=>{p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"refresh"}))},v=(T,E,I)=>{p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"updateChecklist",data:{documentId:T,itemIndex:E,checked:I}}))},b=(T,E)=>{p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"requestHandoff",data:{type:T,checklist:E}}))},x=()=>{p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"compactContext"}))},y=T=>{t(E=>({...E,leoProtocol:{...E.leoProtocol,currentSD:T}})),p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"setActiveSD",data:{sdId:T}}))},g=(T,E)=>{t(I=>({...I,strategicDirectives:I.strategicDirectives.map(D=>D.id===T?{...D,status:E}:D)})),p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"updateSDStatus",data:{sdId:T,status:E}}))};return a.jsx(mS,{children:a.jsx(oS,{children:a.jsxs(et,{path:"/",element:a.jsx(VE,{state:e,isConnected:r,isSidebarCollapsed:u,setIsSidebarCollapsed:d,isCompactMode:h,setIsCompactMode:f,isMobileMenuOpen:s,setIsMobileMenuOpen:i,updateChecklist:v,requestHandoff:b,compactContext:x,refreshData:m,setActiveSD:y}),children:[a.jsx(et,{index:!0,element:a.jsx(gu,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:y,onUpdateStatus:g,currentSD:(k=e.leoProtocol)==null?void 0:k.currentSD,isCompact:h,onRefresh:m})}),a.jsxs(et,{path:"strategic-directives",children:[a.jsx(et,{index:!0,element:a.jsx(gu,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:y,onUpdateStatus:g,currentSD:(N=e.leoProtocol)==null?void 0:N.currentSD,isCompact:h,onRefresh:m})}),a.jsx(et,{path:":id",element:a.jsx(gu,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:y,onUpdateStatus:g,currentSD:(j=e.leoProtocol)==null?void 0:j.currentSD,isCompact:h,detailMode:!0,onRefresh:m})})]}),a.jsxs(et,{path:"prds",children:[a.jsx(et,{index:!0,element:a.jsx(Yg,{prds:e.prds,isCompact:h})}),a.jsx(et,{path:":id",element:a.jsx(Yg,{prds:e.prds,isCompact:h,detailMode:!0})})]}),a.jsxs(et,{path:"backlog",children:[a.jsx(et,{index:!0,element:a.jsx(ex,{strategicDirectives:e.strategicDirectives,isCompact:h,onRefresh:m})}),a.jsx(et,{path:":id",element:a.jsx(ex,{strategicDirectives:e.strategicDirectives,isCompact:h,detailMode:!0,onRefresh:m})})]}),a.jsx(et,{path:"directive-lab",element:a.jsx(hI,{state:e,onRefresh:m,isCompact:h})}),a.jsx(et,{path:"pr-reviews",element:a.jsx(xI,{state:e,isConnected:r,refreshData:m})}),a.jsx(et,{path:"uat-tests",element:a.jsx(ZR,{})}),a.jsx(et,{path:"backlog-import",element:a.jsx(WR,{})}),a.jsx(et,{path:"*",element:a.jsx(sS,{to:"/",replace:!0})})]})})})}class tD extends jr.Component{constructor(r){super(r);pc(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});pc(this,"handleHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){window.location.hostname==="localhost"&&console.error("ErrorBoundary caught:",r,n),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(xt,{className:"w-8 h-8 text-red-500 mr-3"}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Something went wrong"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We encountered an unexpected error. The application may not work correctly."}),window.location.hostname==="localhost"&&a.jsxs("details",{className:"mb-4",children:[a.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Error details (development only)"}),a.jsxs("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto",children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(tr,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),a.jsxs("button",{onClick:this.handleHome,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(np,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}Au.createRoot(document.getElementById("root")).render(a.jsx(jr.StrictMode,{children:a.jsx(tD,{children:a.jsx(eD,{})})}));
//# sourceMappingURL=index-sPFGkXGm.js.map
