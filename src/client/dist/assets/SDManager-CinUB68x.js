import{c as W,u as Ee,a as Ce,r as o,j as t,C as R,F as A,T as U,S as oe,b as De,P as Fe,Z as O,d as Ae,X as ce,e as Oe,f as de,A as xe,g as x,h as Me,L as V,i as Te,U as qe,k as He,M as Ge,l as Be,m as Re,n as Ue,o as Ve}from"./index-DaWIMfnY.js";import{M as ge}from"./index-LAI-2XFi.js";const me=W("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),We=W("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),he=W("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);function Xe({strategicDirectives:d,onUpdateChecklist:ue,onSetActiveSD:I,currentSD:E,isCompact:r,detailMode:M,onRefresh:T,onUpdateStatus:Ie}){const{id:k}=Ee(),y=Ce(),[C,pe]=o.useState(null),[J,Z]=o.useState("list"),[n,z]=o.useState(null),[l,b]=o.useState(()=>localStorage.getItem("sd-status-filter")||"active_draft"),[Q,f]=o.useState(!1),[v,q]=o.useState(""),[D,X]=o.useState("all"),[N,K]=o.useState("all"),[ye,Y]=o.useState(null),[be,ee]=o.useState(null),[Je,Ze]=o.useState(null),[j,te]=o.useState(null),[w,fe]=o.useState({}),[H,re]=o.useState({}),[G,ae]=o.useState({});o.useEffect(()=>{localStorage.setItem("sd-status-filter",l)},[l]),o.useEffect(()=>{if(M&&k){console.log("Detail mode - Looking for SD with id:",k),console.log("Available SDs count:",d.length),d.length>0&&console.log("First few SDs:",d.slice(0,3).map(a=>({id:a.id,title:a.title})));const e=d.find(a=>a.id===k);e?(console.log("Found SD:",e.id,e.title),z(e),Z("detail"),document.title=`${e.title||e.id} - LEO Protocol Dashboard`):d.length>0?(console.warn(`SD with id '${k}' not found in ${d.length} directives, redirecting to list`),y("/strategic-directives",{replace:!0})):console.log("Waiting for strategic directives to load...")}else M||(Z("list"),z(null),document.title="Strategic Directives - LEO Protocol Dashboard")},[k,M,d,y]);const je=e=>{pe(C===e?null:e)},ke=e=>{navigator.clipboard.writeText(e),Y(e),setTimeout(()=>Y(null),2e3)},ve=async e=>{if(!(w[e]||G[e])){ae(a=>({...a,[e]:!0}));try{const a=await fetch(`/api/strategic-directives/${e}/backlog-summary`),s=await a.json();a.ok?fe(c=>({...c,[e]:s})):console.error("Failed to fetch backlog summary:",s.error)}catch(a){console.error("Error fetching backlog summary:",a)}finally{ae(a=>({...a,[e]:!1}))}}},Ne=e=>{H[e]?re(s=>({...s,[e]:!1})):(re(s=>({...s,[e]:!0})),ve(e))},we=()=>{q(""),X("all"),b("all"),K("all")},_e=v||D!=="all"||l!=="all"||N!=="all",$e=e=>{switch(e==null?void 0:e.toLowerCase()){case"critical":return"border-l-4 border-l-red-500";case"high":return"border-l-4 border-l-orange-500";case"medium":return"border-l-4 border-l-yellow-500";case"low":return"border-l-4 border-l-gray-400";default:return"border-l-4 border-l-gray-300"}},Se=e=>e===100?"bg-gradient-to-r from-green-400 to-green-600 animate-pulse":e>=76?"bg-gradient-to-r from-blue-400 to-blue-600":e>=51?"bg-gradient-to-r from-yellow-400 to-yellow-600":e>=26?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gradient-to-r from-red-400 to-red-600",se=(e,a)=>{const s=d.find(c=>c.id===e);s&&s.checklist&&s.checklist[a]&&ue(e,a,!s.checklist[a].checked)},le=async(e,a)=>{te(e);try{if(!(await fetch(`/api/strategic-directives/${e}/reorder`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({direction:a})})).ok)throw new Error("Failed to reorder");T&&await T()}catch(s){console.error("Error reordering strategic directive:",s)}finally{te(null)}},F=e=>{if(!e||!e.id){console.error("Invalid SD for navigation:",e);return}try{y(`/strategic-directives/${e.id}`)}catch(a){console.error("Navigation error:",a)}};if(J==="detail"&&n)return t.jsxs("div",{className:"p-6",children:[t.jsxs("button",{onClick:()=>y("/strategic-directives"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[t.jsx(R,{className:"w-4 h-4 mr-1"}),"Back to List"]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[t.jsx("div",{className:"text-primary-600 dark:text-primary-400 font-mono text-lg font-semibold mb-2",children:n.id}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:n.title||"Untitled"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:n.metadata&&Object.entries(n.metadata).map(([e,a])=>t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e}),t.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:typeof a=="object"?JSON.stringify(a,null,2):String(a)})]},e))}),t.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:t.jsx(ge,{children:n.content||"No content available"})}),n.checklist&&n.checklist.length>0&&t.jsxs("div",{className:"border-t pt-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Requirements Checklist"}),t.jsx("div",{className:"space-y-2",children:n.checklist.map((e,a)=>t.jsxs("label",{className:"flex items-start p-3 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.checked,onChange:()=>se(n.id,a),className:"mt-1 mr-3 w-5 h-5 text-primary-600 rounded focus:ring-primary-500"}),t.jsx("span",{className:`flex-1 ${e.checked?"line-through text-gray-500":""}`,children:e.text})]},a))})]}),n.prds&&n.prds.length>0&&t.jsxs("div",{className:"border-t pt-6 mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[t.jsx(A,{className:"w-5 h-5 mr-2 text-blue-600"}),"Product Requirements Documents (",n.prds.length,")"]}),t.jsx("div",{className:"space-y-4",children:n.prds.map(e=>t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:e.title}),t.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["ID: ",e.id]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${e.status==="approved"?"bg-green-100 text-green-800":e.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:e.status}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${e.priority==="high"?"bg-red-100 text-red-800":e.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:e.priority})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[t.jsx("strong",{children:"Phase:"})," ",e.phase]}),t.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[t.jsx("strong",{children:"Progress:"})," ",e.progress,"%"]})]}),t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[t.jsx("strong",{children:"Created:"})," ",new Date(e.createdAt).toLocaleDateString()]})})]}),t.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:t.jsxs("button",{onClick:()=>y(`/prds/${e.id}`),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center",children:["View Full PRD ",t.jsx(R,{className:"w-4 h-4 ml-1"})]})})]},e.id))})]}),n.executionSequences&&n.executionSequences.length>0&&t.jsxs("div",{className:"border-t pt-6 mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[t.jsx(U,{className:"w-5 h-5 mr-2 text-green-600"}),"Execution Sequence Steps (",n.executionSequences.length,")"]}),t.jsx("div",{className:"space-y-3",children:n.executionSequences.map(e=>t.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${e.status==="completed"?"bg-green-500 text-white":e.status==="in_progress"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:e.sequenceNumber}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:e.description}),t.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-green-700 dark:text-green-300",children:[t.jsxs("span",{children:[t.jsx("strong",{children:"Executor:"})," ",e.executorRole]}),e.completedAt&&t.jsxs("span",{children:[t.jsx("strong",{children:"Completed:"})," ",new Date(e.completedAt).toLocaleDateString()]})]})]})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${e.status==="completed"?"bg-green-100 text-green-800":e.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:e.status})]})},e.id))})]})]})]});if(J==="detail"&&!n)return t.jsx("div",{className:"p-6 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading strategic directive..."})]})});const m=d.filter(e=>{var u,p,_,$,S,L,i,P,ie,ne;let a=!0;l!=="all"&&(l==="active_draft"?a=((u=e.status)==null?void 0:u.toLowerCase())==="active"||((p=e.status)==null?void 0:p.toLowerCase())==="draft":l==="active"?a=((_=e.status)==null?void 0:_.toLowerCase())==="active":l==="draft"?a=(($=e.status)==null?void 0:$.toLowerCase())==="draft":l==="superseded"?a=((S=e.status)==null?void 0:S.toLowerCase())==="superseded":l==="completed"&&(a=((L=e.status)==null?void 0:L.toLowerCase())==="completed"));let s=!0;if(v){const B=v.toLowerCase();s=((i=e.id)==null?void 0:i.toLowerCase().includes(B))||((P=e.title)==null?void 0:P.toLowerCase().includes(B))||((ie=e.description)==null?void 0:ie.toLowerCase().includes(B))}let c=!0;D!=="all"&&(c=((ne=e.priority)==null?void 0:ne.toLowerCase())===D.toLowerCase());let h=!0;return N!=="all"&&(N==="ehg_engineer"?h=e.target_application==="EHG_ENGINEER":N==="ehg"&&(h=e.target_application==="EHG"||!e.target_application)),a&&s&&c&&h}),g=[...m].sort((e,a)=>{if(e.execution_order!==void 0&&a.execution_order!==void 0)return e.execution_order-a.execution_order;if(e.execution_order!==void 0)return-1;if(a.execution_order!==void 0)return 1;if(e.sequence_rank!==void 0&&a.sequence_rank!==void 0)return e.sequence_rank-a.sequence_rank;if(e.sequence_rank!==void 0)return-1;if(a.sequence_rank!==void 0)return 1;const s=u=>{if(!u)return 999999;const p=u.match(/SD-(\d+)/);return p?parseInt(p[1],10):999999},c=s(e.id),h=s(a.id);return c-h}),Le=()=>{switch(l){case"active_draft":return"Active & Draft";case"active":return"Active Only";case"draft":return"Draft Only";case"superseded":return"Superseded Only";case"completed":return"Completed Only";case"all":return"All Directives";default:return"Active & Draft"}},Pe=e=>(e==null?void 0:e.toLowerCase())==="completed"?t.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700 dark:bg-green-700 dark:text-green-300 transition-all duration-200 hover:scale-105",children:[t.jsx(x,{className:"w-3 h-3 mr-1"}),"Completed"]}):(e==null?void 0:e.toLowerCase())==="draft"?t.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 transition-all duration-200 hover:scale-105",children:[t.jsx(he,{className:"w-3 h-3 mr-1"}),"Draft"]}):(e==null?void 0:e.toLowerCase())==="superseded"?t.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 transition-all duration-200 hover:scale-105",children:[t.jsx(me,{className:"w-3 h-3 mr-1"}),"Superseded"]}):t.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 transition-all duration-200 hover:scale-105",children:[t.jsx(O,{className:"w-3 h-3 mr-1 animate-pulse"}),"Active"]});return t.jsxs("div",{className:r?"p-3":"p-6",children:[t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(oe,{className:"w-6 h-6 text-primary-500 animate-pulse"}),t.jsx("h1",{className:`${r?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white`,children:"Strategic Directives"})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[t.jsxs("span",{children:["Showing ",m.length," of ",d.length," directives"]}),m.filter(e=>e.rolled_triage).length>0&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full"}),t.jsxs("span",{className:"font-medium",children:[m.filter(e=>e.rolled_triage==="High").length,"H /",m.filter(e=>e.rolled_triage==="Medium").length,"M /",m.filter(e=>e.rolled_triage==="Low").length,"L /",m.filter(e=>e.rolled_triage==="Future").length,"F"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(De,{onRefresh:T,className:r?"p-1.5":"p-2"}),t.jsxs("button",{onClick:()=>y("/directive-lab"),className:`flex items-center gap-2 ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[t.jsx(Fe,{className:`${r?"w-3.5 h-3.5":"w-4 h-4"}`}),"New Directive"]})]})]}),t.jsx("div",{className:"w-full",children:(()=>{var s;const e=d.find(c=>c.id===E),a=((s=e==null?void 0:e.status)==null?void 0:s.toLowerCase())==="completed";return E&&!a?t.jsxs("div",{className:"w-full p-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg flex items-center transition-all duration-200",children:[t.jsx(O,{className:"w-4 h-4 mr-2 text-purple-600 dark:text-purple-400 animate-pulse"}),t.jsxs("span",{className:"text-purple-700 dark:text-purple-300 font-medium",children:["Currently Working On: ",(e==null?void 0:e.title)||E]})]}):t.jsxs("div",{className:"w-full p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg flex items-center transition-all duration-200",children:[t.jsx(U,{className:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"}),t.jsx("span",{className:"text-green-700 dark:text-green-300 font-medium",children:"Select a new strategic directive to work on"})]})})()}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-stretch lg:items-center",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search strategic directives...",className:"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:v,onChange:e=>q(e.target.value)}),v&&t.jsx("button",{onClick:()=>q(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(ce,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>f(!Q),className:`flex items-center gap-2 ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors`,children:[t.jsx(Oe,{className:`${r?"w-3.5 h-3.5":"w-4 h-4"}`}),Le(),t.jsx(de,{className:`${r?"w-3.5 h-3.5":"w-4 h-4"}`})]}),Q&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:t.jsxs("div",{className:"py-1",children:[t.jsxs("button",{onClick:()=>{b("active_draft"),f(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${l==="active_draft"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(xe,{className:"w-4 h-4 mr-2"}),"Active & Draft"]}),l==="active_draft"&&t.jsx(x,{className:"w-4 h-4"})]}),t.jsxs("button",{onClick:()=>{b("all"),f(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${l==="all"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(A,{className:"w-4 h-4 mr-2"}),"All Directives"]}),l==="all"&&t.jsx(x,{className:"w-4 h-4"})]}),t.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),t.jsxs("button",{onClick:()=>{b("active"),f(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${l==="active"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(xe,{className:"w-4 h-4 mr-2"}),"Active Only"]}),l==="active"&&t.jsx(x,{className:"w-4 h-4"})]}),t.jsxs("button",{onClick:()=>{b("draft"),f(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${l==="draft"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(he,{className:"w-4 h-4 mr-2"}),"Draft Only"]}),l==="draft"&&t.jsx(x,{className:"w-4 h-4"})]}),t.jsxs("button",{onClick:()=>{b("superseded"),f(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${l==="superseded"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(me,{className:"w-4 h-4 mr-2"}),"Superseded Only"]}),l==="superseded"&&t.jsx(x,{className:"w-4 h-4"})]}),t.jsxs("button",{onClick:()=>{b("completed"),f(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${l==="completed"?"bg-gray-50 dark:bg-gray-700/50 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200"}`,children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),"Completed Only"]}),l==="completed"&&t.jsx(x,{className:"w-4 h-4"})]})]})})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Priority:"}),["all","critical","high","medium","low"].map(e=>t.jsx("button",{onClick:()=>X(e),className:`px-2 py-1 text-xs rounded-full transition-all duration-200 ${D===e?e==="critical"?"bg-red-500 text-white":e==="high"?"bg-orange-500 text-white":e==="medium"?"bg-yellow-500 text-white":e==="low"?"bg-gray-500 text-white":"bg-primary-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Target:"}),[{value:"all",label:"All",icon:"ðŸ“±"},{value:"ehg_engineer",label:"EHG_Engineer",icon:"ðŸ› ï¸"},{value:"ehg",label:"EHG",icon:"ðŸš€"}].map(e=>t.jsxs("button",{onClick:()=>K(e.value),className:`px-2 py-1 text-xs rounded-full transition-all duration-200 flex items-center gap-1 ${N===e.value?e.value==="ehg_engineer"?"bg-purple-500 text-white":e.value==="ehg"?"bg-blue-500 text-white":"bg-primary-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e.value==="ehg_engineer"?"LEO Protocol development platform":e.value==="ehg"?"Business application features":"Show all strategic directives",children:[t.jsx("span",{children:e.icon}),e.label]},e.value))]}),_e&&t.jsxs("button",{onClick:we,className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full hover:bg-red-200 dark:hover:bg-red-900/50 transition-all duration-200 flex items-center gap-1",children:[t.jsx(ce,{className:"w-3 h-3"}),"Clear Filters"]})]})]})]}),m.length===0?t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[t.jsx(A,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:d.length===0?"No strategic directives found":`No ${l==="all"?"":l} directives found`})]}):t.jsx("div",{className:"space-y-4",children:g.map(e=>{var a,s,c,h,u,p,_,$,S,L;return t.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${$e(e.priority)}`,children:t.jsxs("div",{className:`${r?"p-3":"p-6"} relative group`,children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:"flex items-center mr-3",children:[t.jsx("div",{className:"text-gray-400 dark:text-gray-500 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-grab active:cursor-grabbing",children:t.jsx(We,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex flex-col gap-1 bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-1",children:[t.jsx("button",{onClick:i=>{i.stopPropagation(),le(e.id,"up")},disabled:g.indexOf(e)===0||j===e.id,className:`p-2 rounded-md transition-all duration-200 ${g.indexOf(e)===0||j===e.id?"opacity-40 cursor-not-allowed bg-gray-100 dark:bg-gray-800":"bg-white dark:bg-gray-700 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:shadow-md border border-transparent hover:border-primary-200 dark:hover:border-primary-700"}`,"aria-label":"Move up in priority",title:"Move up",children:t.jsx(Me,{className:`w-5 h-5 ${g.indexOf(e)===0||j===e.id?"text-gray-400 dark:text-gray-600":"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"}`})}),t.jsx("button",{onClick:i=>{i.stopPropagation(),le(e.id,"down")},disabled:g.indexOf(e)===g.length-1||j===e.id,className:`p-2 rounded-md transition-all duration-200 ${g.indexOf(e)===g.length-1||j===e.id?"opacity-40 cursor-not-allowed bg-gray-100 dark:bg-gray-800":"bg-white dark:bg-gray-700 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:shadow-md border border-transparent hover:border-primary-200 dark:hover:border-primary-700"}`,"aria-label":"Move down in priority",title:"Move down",children:t.jsx(de,{className:`w-5 h-5 ${g.indexOf(e)===g.length-1||j===e.id?"text-gray-400 dark:text-gray-600":"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"}`})})]})]}),t.jsx("button",{onClick:()=>je(e.id),className:"mr-3 p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/20 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 transform hover:scale-110","aria-label":C===e.id?"Collapse details":"Expand details",children:t.jsx(R,{className:`w-5 h-5 transition-transform duration-200 ease-in-out ${C===e.id?"rotate-90":""}`})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center mb-1",children:[e.execution_order&&t.jsx("span",{className:"inline-flex items-center mr-2",children:t.jsxs("span",{className:"text-sm font-bold px-2.5 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-md shadow-md",title:`Execution order (WSJF Score: ${((a=e.metadata)==null?void 0:a.wsjf_score)||"N/A"})`,children:["#",e.execution_order]})}),j===e.id&&t.jsx("span",{className:"inline-flex items-center mr-2",children:t.jsxs("span",{className:"px-2.5 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 rounded-md text-sm font-medium animate-pulse shadow-sm",children:[t.jsx(V,{className:"w-4 h-4 inline mr-1 animate-spin"}),"Updating..."]})}),t.jsxs("span",{className:"inline-flex items-center group",children:[t.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-mono text-sm font-semibold",children:e.id}),t.jsx("button",{onClick:i=>{i.stopPropagation(),ke(e.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-1",title:"Copy ID",children:ye===e.id?t.jsx(x,{className:"w-3 h-3 text-green-500"}):t.jsx(Te,{className:"w-3 h-3 text-gray-500"})})]})]}),t.jsx("h2",{className:`${r?"text-base":"text-xl"} font-semibold text-gray-900 dark:text-white ${r?"line-clamp-1":""}`,children:e.title||"Untitled"})]})]}),(((s=e.metadata)==null?void 0:s.Owner)||((c=e.metadata)==null?void 0:c.Date))&&t.jsxs("div",{className:`${r?"mt-2 gap-1":"mt-3 gap-2"} flex flex-wrap items-center`,children:[e.metadata.Owner&&t.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded flex items-center",children:[t.jsx(qe,{className:"w-3 h-3 mr-1"}),e.metadata.Owner]}),e.metadata.Date&&t.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded flex items-center",children:[t.jsx(He,{className:"w-3 h-3 mr-1"}),e.metadata.Date]})]}),e.total_items&&e.total_items>0&&t.jsxs("div",{className:`${r?"mt-2":"mt-3"} border-t border-gray-200 dark:border-gray-700 pt-3`,children:[t.jsxs("button",{onClick:()=>Ne(e.id),className:"flex items-center text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200",children:[t.jsx(Ge,{className:"w-4 h-4 mr-2"}),H[e.id]?"Hide":"Show"," backlog summary",G[e.id]&&t.jsx(V,{className:"w-4 h-4 ml-2 animate-spin"})]}),H[e.id]&&t.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:G[e.id]?t.jsxs("div",{className:"flex items-center justify-center py-4",children:[t.jsx(V,{className:"w-6 h-6 animate-spin text-blue-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Generating AI summary..."})]}):w[e.id]?t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:w[e.id].summary}),t.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[t.jsxs("span",{children:["Based on ",w[e.id].item_count," backlog items"]}),t.jsx("span",{className:"flex items-center",children:w[e.id].ai_generated?t.jsx(t.Fragment,{children:"ðŸ¤– AI Generated"}):t.jsx(t.Fragment,{children:"ðŸ“ Text Summary"})})]})]}):t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"Failed to load summary. Please try again."})})]}),t.jsxs("div",{className:`${r?"mt-2":"mt-4"}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("span",{className:`${r?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 flex items-center`,children:["Progress",e.progressTrend&&(e.progressTrend>0?t.jsx(Be,{className:"w-3 h-3 ml-1 text-green-500"}):t.jsx(Re,{className:"w-3 h-3 ml-1 text-red-500"}))]}),t.jsxs("span",{className:`${r?"text-xs":"text-sm"} font-semibold flex items-center`,children:[typeof e.progress=="object"?e.progress.total:e.progress,"%",(typeof e.progress=="object"?e.progress.total:e.progress)===100&&t.jsx(oe,{className:"w-3 h-3 ml-1 text-green-500 animate-pulse"})]})]}),t.jsx("div",{className:`w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${r?"h-2":"h-3"} shadow-inner`,children:t.jsx("div",{className:`${r?"h-2":"h-3"} rounded-full transition-all duration-1000 ease-out ${Se(typeof e.progress=="object"?e.progress.total:e.progress)}`,style:{width:`${typeof e.progress=="object"?e.progress.total:e.progress}%`,boxShadow:(typeof e.progress=="object"?e.progress.total:e.progress)===100?"0 0 10px rgba(34, 197, 94, 0.5)":"none"}})})]})]}),t.jsxs("div",{className:`${r?"ml-2":"ml-4"} flex flex-col items-end ${r?"space-y-1":"space-y-2"}`,children:[t.jsxs("div",{className:`flex ${r?"space-x-1":"space-x-2"}`,children:[t.jsx("button",{onClick:()=>F(e),className:`${r?"px-2 py-1 text-xs":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg`,children:r?"View":"View Full"}),E===e.id&&((h=e.status)==null?void 0:h.toLowerCase())!=="completed"?t.jsxs("button",{disabled:!0,className:`${r?"px-2 py-1 text-xs":"px-4 py-2"} bg-purple-600 text-white rounded flex items-center`,title:"This is the SD currently being worked on",children:[t.jsx(O,{className:`${r?"w-3 h-3":"w-4 h-4"} mr-1`}),r?"âš¡":"Working On"]}):((u=e.status)==null?void 0:u.toLowerCase())==="completed"?t.jsxs("button",{disabled:!0,className:`${r?"px-2 py-1 text-xs":"px-4 py-2"} bg-green-400 text-green-800 rounded flex items-center cursor-not-allowed`,title:"Cannot set completed directives as active",children:[t.jsx(x,{className:`${r?"w-3 h-3":"w-4 h-4"} ${r?"":"mr-1"}`}),!r&&"Completed"]}):t.jsxs("button",{onClick:()=>I&&I(e.id),className:`${r?"px-2 py-1 text-xs":"px-4 py-2"} bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center`,title:"Select this SD to work on",children:[t.jsx(O,{className:`${r?"w-3 h-3":"w-4 h-4"} ${r?"":"mr-1"} animate-pulse`}),!r&&"Start Work"]})]}),t.jsxs("div",{className:`${r?"mt-2":"mt-3"} grid ${r?"grid-cols-2 gap-1":"grid-cols-2 gap-2"} w-full`,children:[e.target_application&&t.jsx("span",{className:`${r?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded text-center ${e.target_application==="EHG_Engineer"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:r?e.target_application==="EHG_Engineer"?"Eng":"EHG":e.target_application}),t.jsx("div",{className:"flex items-center justify-center",children:be===e.id?t.jsxs("select",{value:e.status,onChange:i=>handleStatusChange(e,i.target.value),onBlur:()=>ee(null),className:`${r?"text-xs px-1 py-0.5":"text-sm px-2 py-1"} rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500`,onClick:i=>i.stopPropagation(),children:[t.jsx("option",{value:"draft",children:"Draft"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"in_progress",children:"In Progress"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"archived",children:"Archived"})]}):t.jsxs("div",{className:"flex items-center cursor-pointer group",onClick:i=>{i.stopPropagation(),ee(e.id)},children:[Pe(e.status),t.jsx(Ue,{className:`${r?"w-2 h-2":"w-3 h-3"} ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300`})]})}),e.category&&t.jsx("span",{className:`${r?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded text-center`,children:r&&e.category.length>8?e.category.substring(0,8)+"...":e.category}),(e.priority||((p=e.metadata)==null?void 0:p.Priority))&&t.jsx("span",{className:`${r?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} rounded text-center ${(e.priority||((_=e.metadata)==null?void 0:_.Priority))==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":(e.priority||(($=e.metadata)==null?void 0:$.Priority))==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:r?(e.priority||((S=e.metadata)==null?void 0:S.Priority))[0]:e.priority||((L=e.metadata)==null?void 0:L.Priority)}),t.jsxs("button",{onClick:i=>{i.stopPropagation(),y(`/backlog?sd=${e.sd_id||e.id}`)},className:`col-span-2 flex items-center justify-center ${r?"px-2 py-0.5 text-xs":"px-3 py-1 text-sm"} ${e.total_backlog_items>0||e.total_items>0||e.backlog_count>0?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800/40":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"} rounded transition-colors`,children:[t.jsx(Ve,{className:`${r?"w-3 h-3":"w-4 h-4"} mr-1`}),"Backlog",t.jsx("span",{className:`ml-1 ${r?"px-1":"px-1.5"} py-0.5 ${e.total_backlog_items>0||e.total_items>0||e.backlog_count>0?"bg-indigo-200 dark:bg-indigo-800":"bg-gray-200 dark:bg-gray-600"} rounded text-xs font-bold`,children:e.total_backlog_items||e.total_items||e.backlog_count||0})]}),e.rolled_triage&&t.jsx("span",{className:`${r?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded text-center ${e.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":e.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":e.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:r?e.rolled_triage[0]:`Triage: ${e.rolled_triage}`}),e.must_have_pct!==null&&e.must_have_pct!==void 0&&t.jsxs("span",{className:`${r?"px-1.5 py-0.5":"px-2 py-1"} text-xs bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded text-center`,children:[e.must_have_pct,"%",!r&&" Must-Have"]}),e.checklist&&e.checklist.length>0&&t.jsxs("div",{className:"col-span-2 text-sm text-gray-600 dark:text-gray-400 flex items-center justify-center",children:[t.jsx(x,{className:"w-4 h-4 mr-1"}),e.checklist.filter(i=>i.checked).length,"/",e.checklist.length]})]})]})]}),C===e.id&&t.jsxs("div",{className:"mt-6 border-t pt-6",children:[(e.h_count>0||e.m_count>0||e.l_count>0||e.future_count>0)&&t.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[t.jsx(A,{className:"w-5 h-5 mr-2 text-blue-600"}),"Backlog Items Summary"]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[e.h_count>0&&t.jsxs("div",{className:"text-center p-2 bg-red-100 dark:bg-red-900/20 rounded",children:[t.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:e.h_count}),t.jsx("p",{className:"text-xs text-red-600 dark:text-red-300",children:"High Priority"})]}),e.m_count>0&&t.jsxs("div",{className:"text-center p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded",children:[t.jsx("p",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-400",children:e.m_count}),t.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-300",children:"Medium Priority"})]}),e.l_count>0&&t.jsxs("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/20 rounded",children:[t.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:e.l_count}),t.jsx("p",{className:"text-xs text-green-600 dark:text-green-300",children:"Low Priority"})]}),e.future_count>0&&t.jsxs("div",{className:"text-center p-2 bg-gray-100 dark:bg-gray-600 rounded",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300",children:e.future_count}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Future"})]})]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total backlog items: ",(e.h_count||0)+(e.m_count||0)+(e.l_count||0)+(e.future_count||0),e.must_have_count>0&&` â€¢ Must-have: ${e.must_have_count}`]}),t.jsx("button",{onClick:()=>F(e),className:"mt-3 text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"View all backlog items â†’"})]}),e.checklist&&e.checklist.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[t.jsx(U,{className:"w-5 h-5 mr-2"}),"Requirements Checklist"]}),t.jsxs("div",{className:"space-y-2",children:[e.checklist.slice(0,5).map((i,P)=>t.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:i.checked,onChange:()=>se(e.id,P),className:"mr-3 w-4 h-4 text-primary-600 rounded"}),t.jsx("span",{className:`${i.checked?"line-through text-gray-500":""}`,children:i.text})]},P)),e.checklist&&e.checklist.length>5&&t.jsxs("button",{onClick:()=>F(e),className:"text-primary-600 hover:text-primary-700 text-sm",children:["View all ",e.checklist.length," items..."]})]})]}),t.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Content Preview"}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded max-h-64 overflow-y-auto",children:t.jsx(ge,{children:e.content.substring(0,500)+(e.content.length>500?"...":"")})}),t.jsx("button",{onClick:()=>F(e),className:"mt-3 text-primary-600 hover:text-primary-700",children:"Read full document â†’"})]})]})]})},e.id)})})]})}export{Xe as default};
//# sourceMappingURL=SDManager-CinUB68x.js.map
