var u1=Object.defineProperty;var d1=(e,t,n)=>t in e?u1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Oc=(e,t,n)=>d1(e,typeof t!="symbol"?t+"":t,n);function h1(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function f1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var By={exports:{}},nc={},Hy={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io=Symbol.for("react.element"),p1=Symbol.for("react.portal"),m1=Symbol.for("react.fragment"),g1=Symbol.for("react.strict_mode"),y1=Symbol.for("react.profiler"),x1=Symbol.for("react.provider"),v1=Symbol.for("react.context"),w1=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),k1=Symbol.for("react.memo"),j1=Symbol.for("react.lazy"),Jp=Symbol.iterator;function S1(e){return e===null||typeof e!="object"?null:(e=Jp&&e[Jp]||e["@@iterator"],typeof e=="function"?e:null)}var Wy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qy=Object.assign,Gy={};function Ai(e,t,n){this.props=e,this.context=t,this.refs=Gy,this.updater=n||Wy}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ai.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ky(){}Ky.prototype=Ai.prototype;function zh(e,t,n){this.props=e,this.context=t,this.refs=Gy,this.updater=n||Wy}var Bh=zh.prototype=new Ky;Bh.constructor=zh;qy(Bh,Ai.prototype);Bh.isPureReactComponent=!0;var Yp=Array.isArray,Xy=Object.prototype.hasOwnProperty,Hh={current:null},Jy={key:!0,ref:!0,__self:!0,__source:!0};function Yy(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Xy.call(t,r)&&!Jy.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:io,type:e,key:i,ref:a,props:s,_owner:Hh.current}}function N1(e,t){return{$$typeof:io,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wh(e){return typeof e=="object"&&e!==null&&e.$$typeof===io}function _1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qp=/\/+/g;function $c(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_1(""+e.key):t.toString(36)}function Yo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case io:case p1:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+$c(a,0):r,Yp(s)?(n="",e!=null&&(n=e.replace(Qp,"$&/")+"/"),Yo(s,t,n,"",function(u){return u})):s!=null&&(Wh(s)&&(s=N1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Qp,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Yp(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+$c(i,l);a+=Yo(i,t,n,c,s)}else if(c=S1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+$c(i,l++),a+=Yo(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ko(e,t,n){if(e==null)return e;var r=[],s=0;return Yo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function E1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dt={current:null},Qo={transition:null},P1={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Qo,ReactCurrentOwner:Hh};function Qy(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:ko,forEach:function(e,t,n){ko(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ko(e,function(){t++}),t},toArray:function(e){return ko(e,function(t){return t})||[]},only:function(e){if(!Wh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=Ai;ke.Fragment=m1;ke.Profiler=y1;ke.PureComponent=zh;ke.StrictMode=g1;ke.Suspense=b1;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P1;ke.act=Qy;ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=qy({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Hh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Xy.call(t,c)&&!Jy.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:io,type:e.type,key:s,ref:i,props:r,_owner:a}};ke.createContext=function(e){return e={$$typeof:v1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:x1,_context:e},e.Consumer=e};ke.createElement=Yy;ke.createFactory=function(e){var t=Yy.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:w1,render:e}};ke.isValidElement=Wh;ke.lazy=function(e){return{$$typeof:j1,_payload:{_status:-1,_result:e},_init:E1}};ke.memo=function(e,t){return{$$typeof:k1,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=Qo.transition;Qo.transition={};try{e()}finally{Qo.transition=t}};ke.unstable_act=Qy;ke.useCallback=function(e,t){return Dt.current.useCallback(e,t)};ke.useContext=function(e){return Dt.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return Dt.current.useDeferredValue(e)};ke.useEffect=function(e,t){return Dt.current.useEffect(e,t)};ke.useId=function(){return Dt.current.useId()};ke.useImperativeHandle=function(e,t,n){return Dt.current.useImperativeHandle(e,t,n)};ke.useInsertionEffect=function(e,t){return Dt.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return Dt.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return Dt.current.useMemo(e,t)};ke.useReducer=function(e,t,n){return Dt.current.useReducer(e,t,n)};ke.useRef=function(e){return Dt.current.useRef(e)};ke.useState=function(e){return Dt.current.useState(e)};ke.useSyncExternalStore=function(e,t,n){return Dt.current.useSyncExternalStore(e,t,n)};ke.useTransition=function(){return Dt.current.useTransition()};ke.version="18.3.1";Hy.exports=ke;var k=Hy.exports;const ao=Vh(k),C1=h1({__proto__:null,default:ao},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1=k,A1=Symbol.for("react.element"),I1=Symbol.for("react.fragment"),R1=Object.prototype.hasOwnProperty,D1=T1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L1={key:!0,ref:!0,__self:!0,__source:!0};function Zy(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)R1.call(t,r)&&!L1.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:A1,type:e,key:i,ref:a,props:s,_owner:D1.current}}nc.Fragment=I1;nc.jsx=Zy;nc.jsxs=Zy;By.exports=nc;var o=By.exports,Xu={},ex={exports:{}},an={},tx={exports:{}},nx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,z){var j=C.length;C.push(z);e:for(;0<j;){var ne=j-1>>>1,ie=C[ne];if(0<s(ie,z))C[ne]=z,C[j]=ie,j=ne;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var z=C[0],j=C.pop();if(j!==z){C[0]=j;e:for(var ne=0,ie=C.length,_=ie>>>1;ne<_;){var Se=2*(ne+1)-1,pt=C[Se],je=Se+1,wt=C[je];if(0>s(pt,j))je<ie&&0>s(wt,pt)?(C[ne]=wt,C[je]=j,ne=je):(C[ne]=pt,C[Se]=j,ne=Se);else if(je<ie&&0>s(wt,j))C[ne]=wt,C[je]=j,ne=je;else break e}}return z}function s(C,z){var j=C.sortIndex-z.sortIndex;return j!==0?j:C.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(C){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=C)r(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(u)}}function N(C){if(v=!1,x(C),!m)if(n(c)!==null)m=!0,q(E);else{var z=n(u);z!==null&&A(N,z.startTime-C)}}function E(C,z){m=!1,v&&(v=!1,y(T),T=-1),p=!0;var j=f;try{for(x(z),h=n(c);h!==null&&(!(h.expirationTime>z)||C&&!V());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var ie=ne(h.expirationTime<=z);z=e.unstable_now(),typeof ie=="function"?h.callback=ie:h===n(c)&&r(c),x(z)}else r(c);h=n(c)}if(h!==null)var _=!0;else{var Se=n(u);Se!==null&&A(N,Se.startTime-z),_=!1}return _}finally{h=null,f=j,p=!1}}var S=!1,P=null,T=-1,$=5,O=-1;function V(){return!(e.unstable_now()-O<$)}function X(){if(P!==null){var C=e.unstable_now();O=C;var z=!0;try{z=P(!0,C)}finally{z?me():(S=!1,P=null)}}else S=!1}var me;if(typeof g=="function")me=function(){g(X)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,R=D.port2;D.port1.onmessage=X,me=function(){R.postMessage(null)}}else me=function(){w(X,0)};function q(C){P=C,S||(S=!0,me())}function A(C,z){T=w(function(){C(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,q(E))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(C){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var j=f;f=z;try{return C()}finally{f=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,z){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var j=f;f=C;try{return z()}finally{f=j}},e.unstable_scheduleCallback=function(C,z,j){var ne=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ne+j:ne):j=ne,C){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=j+ie,C={id:d++,callback:z,priorityLevel:C,startTime:j,expirationTime:ie,sortIndex:-1},j>ne?(C.sortIndex=j,t(u,C),n(c)===null&&C===n(u)&&(v?(y(T),T=-1):v=!0,A(N,j-ne))):(C.sortIndex=ie,t(c,C),m||p||(m=!0,q(E))),C},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(C){var z=f;return function(){var j=f;f=z;try{return C.apply(this,arguments)}finally{f=j}}}})(nx);tx.exports=nx;var O1=tx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=k,sn=O1;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rx=new Set,Aa={};function Is(e,t){vi(e,t),vi(e+"Capture",t)}function vi(e,t){for(Aa[e]=t,e=0;e<t.length;e++)rx.add(t[e])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ju=Object.prototype.hasOwnProperty,M1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zp={},em={};function F1(e){return Ju.call(em,e)?!0:Ju.call(Zp,e)?!1:M1.test(e)?em[e]=!0:(Zp[e]=!0,!1)}function U1(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function V1(e,t,n,r){if(t===null||typeof t>"u"||U1(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lt(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var qh=/[\-:]([a-z])/g;function Gh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qh,Gh);vt[t]=new Lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qh,Gh);vt[t]=new Lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qh,Gh);vt[t]=new Lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Kh(e,t,n,r){var s=vt.hasOwnProperty(t)?vt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(V1(t,n,s,r)&&(n=null),r||s===null?F1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var yr=$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),qs=Symbol.for("react.fragment"),Xh=Symbol.for("react.strict_mode"),Yu=Symbol.for("react.profiler"),sx=Symbol.for("react.provider"),ix=Symbol.for("react.context"),Jh=Symbol.for("react.forward_ref"),Qu=Symbol.for("react.suspense"),Zu=Symbol.for("react.suspense_list"),Yh=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),ax=Symbol.for("react.offscreen"),tm=Symbol.iterator;function Wi(e){return e===null||typeof e!="object"?null:(e=tm&&e[tm]||e["@@iterator"],typeof e=="function"?e:null)}var We=Object.assign,Mc;function ia(e){if(Mc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mc=t&&t[1]||""}return`
`+Mc+e}var Fc=!1;function Uc(e,t){if(!e||Fc)return"";Fc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Fc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ia(e):""}function z1(e){switch(e.tag){case 5:return ia(e.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 2:case 15:return e=Uc(e.type,!1),e;case 11:return e=Uc(e.type.render,!1),e;case 1:return e=Uc(e.type,!0),e;default:return""}}function ed(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qs:return"Fragment";case Ws:return"Portal";case Yu:return"Profiler";case Xh:return"StrictMode";case Qu:return"Suspense";case Zu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ix:return(e.displayName||"Context")+".Consumer";case sx:return(e._context.displayName||"Context")+".Provider";case Jh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yh:return t=e.displayName||null,t!==null?t:ed(e.type)||"Memo";case Pr:t=e._payload,e=e._init;try{return ed(e(t))}catch{}}return null}function B1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ed(t);case 8:return t===Xh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ox(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function H1(e){var t=ox(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function So(e){e._valueTracker||(e._valueTracker=H1(e))}function lx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ox(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function yl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function td(e,t){var n=t.checked;return We({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nm(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Kr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cx(e,t){t=t.checked,t!=null&&Kh(e,"checked",t,!1)}function nd(e,t){cx(e,t);var n=Kr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rd(e,t.type,n):t.hasOwnProperty("defaultValue")&&rd(e,t.type,Kr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function rd(e,t,n){(t!=="number"||yl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var aa=Array.isArray;function ci(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Kr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function sd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return We({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(H(92));if(aa(n)){if(1<n.length)throw Error(H(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Kr(n)}}function ux(e,t){var n=Kr(t.value),r=Kr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function im(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function id(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var No,hx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(No=No||document.createElement("div"),No.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=No.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ia(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W1=["Webkit","ms","Moz","O"];Object.keys(da).forEach(function(e){W1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),da[t]=da[e]})});function fx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||da.hasOwnProperty(e)&&da[e]?(""+t).trim():t+"px"}function px(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=fx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var q1=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ad(e,t){if(t){if(q1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function od(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=null;function Qh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cd=null,ui=null,di=null;function am(e){if(e=co(e)){if(typeof cd!="function")throw Error(H(280));var t=e.stateNode;t&&(t=oc(t),cd(e.stateNode,e.type,t))}}function mx(e){ui?di?di.push(e):di=[e]:ui=e}function gx(){if(ui){var e=ui,t=di;if(di=ui=null,am(e),t)for(e=0;e<t.length;e++)am(t[e])}}function yx(e,t){return e(t)}function xx(){}var Vc=!1;function vx(e,t,n){if(Vc)return e(t,n);Vc=!0;try{return yx(e,t,n)}finally{Vc=!1,(ui!==null||di!==null)&&(xx(),gx())}}function Ra(e,t){var n=e.stateNode;if(n===null)return null;var r=oc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(H(231,t,typeof n));return n}var ud=!1;if(ur)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){ud=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{ud=!1}function G1(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var ha=!1,xl=null,vl=!1,dd=null,K1={onError:function(e){ha=!0,xl=e}};function X1(e,t,n,r,s,i,a,l,c){ha=!1,xl=null,G1.apply(K1,arguments)}function J1(e,t,n,r,s,i,a,l,c){if(X1.apply(this,arguments),ha){if(ha){var u=xl;ha=!1,xl=null}else throw Error(H(198));vl||(vl=!0,dd=u)}}function Rs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function om(e){if(Rs(e)!==e)throw Error(H(188))}function Y1(e){var t=e.alternate;if(!t){if(t=Rs(e),t===null)throw Error(H(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return om(s),e;if(i===r)return om(s),t;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?e:t}function bx(e){return e=Y1(e),e!==null?kx(e):null}function kx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kx(e);if(t!==null)return t;e=e.sibling}return null}var jx=sn.unstable_scheduleCallback,lm=sn.unstable_cancelCallback,Q1=sn.unstable_shouldYield,Z1=sn.unstable_requestPaint,Je=sn.unstable_now,ej=sn.unstable_getCurrentPriorityLevel,Zh=sn.unstable_ImmediatePriority,Sx=sn.unstable_UserBlockingPriority,wl=sn.unstable_NormalPriority,tj=sn.unstable_LowPriority,Nx=sn.unstable_IdlePriority,rc=null,Bn=null;function nj(e){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(rc,e,void 0,(e.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:ij,rj=Math.log,sj=Math.LN2;function ij(e){return e>>>=0,e===0?32:31-(rj(e)/sj|0)|0}var _o=64,Eo=4194304;function oa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=oa(l):(i&=a,i!==0&&(r=oa(i)))}else a=n&~s,a!==0?r=oa(a):i!==0&&(r=oa(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-An(t),s=1<<n,r|=e[n],t&=~s;return r}function aj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-An(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=aj(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function hd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _x(){var e=_o;return _o<<=1,!(_o&4194240)&&(_o=64),e}function zc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function oo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-An(t),e[t]=n}function lj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-An(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function ef(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-An(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Pe=0;function Ex(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Px,tf,Cx,Tx,Ax,fd=!1,Po=[],$r=null,Mr=null,Fr=null,Da=new Map,La=new Map,Tr=[],cj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cm(e,t){switch(e){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(t.pointerId)}}function Gi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=co(t),t!==null&&tf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function uj(e,t,n,r,s){switch(t){case"focusin":return $r=Gi($r,e,t,n,r,s),!0;case"dragenter":return Mr=Gi(Mr,e,t,n,r,s),!0;case"mouseover":return Fr=Gi(Fr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Da.set(i,Gi(Da.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,La.set(i,Gi(La.get(i)||null,e,t,n,r,s)),!0}return!1}function Ix(e){var t=xs(e.target);if(t!==null){var n=Rs(t);if(n!==null){if(t=n.tag,t===13){if(t=wx(n),t!==null){e.blockedOn=t,Ax(e.priority,function(){Cx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ld=r,n.target.dispatchEvent(r),ld=null}else return t=co(n),t!==null&&tf(t),e.blockedOn=n,!1;t.shift()}return!0}function um(e,t,n){Zo(e)&&n.delete(t)}function dj(){fd=!1,$r!==null&&Zo($r)&&($r=null),Mr!==null&&Zo(Mr)&&(Mr=null),Fr!==null&&Zo(Fr)&&(Fr=null),Da.forEach(um),La.forEach(um)}function Ki(e,t){e.blockedOn===t&&(e.blockedOn=null,fd||(fd=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,dj)))}function Oa(e){function t(s){return Ki(s,e)}if(0<Po.length){Ki(Po[0],e);for(var n=1;n<Po.length;n++){var r=Po[n];r.blockedOn===e&&(r.blockedOn=null)}}for($r!==null&&Ki($r,e),Mr!==null&&Ki(Mr,e),Fr!==null&&Ki(Fr,e),Da.forEach(t),La.forEach(t),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)Ix(n),n.blockedOn===null&&Tr.shift()}var hi=yr.ReactCurrentBatchConfig,kl=!0;function hj(e,t,n,r){var s=Pe,i=hi.transition;hi.transition=null;try{Pe=1,nf(e,t,n,r)}finally{Pe=s,hi.transition=i}}function fj(e,t,n,r){var s=Pe,i=hi.transition;hi.transition=null;try{Pe=4,nf(e,t,n,r)}finally{Pe=s,hi.transition=i}}function nf(e,t,n,r){if(kl){var s=pd(e,t,n,r);if(s===null)Qc(e,t,r,jl,n),cm(e,r);else if(uj(s,e,t,n,r))r.stopPropagation();else if(cm(e,r),t&4&&-1<cj.indexOf(e)){for(;s!==null;){var i=co(s);if(i!==null&&Px(i),i=pd(e,t,n,r),i===null&&Qc(e,t,r,jl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qc(e,t,r,null,n)}}var jl=null;function pd(e,t,n,r){if(jl=null,e=Qh(r),e=xs(e),e!==null)if(t=Rs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jl=e,null}function Rx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ej()){case Zh:return 1;case Sx:return 4;case wl:case tj:return 16;case Nx:return 536870912;default:return 16}default:return 16}}var Rr=null,rf=null,el=null;function Dx(){if(el)return el;var e,t=rf,n=t.length,r,s="value"in Rr?Rr.value:Rr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return el=s.slice(e,1<r?1-r:void 0)}function tl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Co(){return!0}function dm(){return!1}function on(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Co:dm,this.isPropagationStopped=dm,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),t}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sf=on(Ii),lo=We({},Ii,{view:0,detail:0}),pj=on(lo),Bc,Hc,Xi,sc=We({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:af,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xi&&(Xi&&e.type==="mousemove"?(Bc=e.screenX-Xi.screenX,Hc=e.screenY-Xi.screenY):Hc=Bc=0,Xi=e),Bc)},movementY:function(e){return"movementY"in e?e.movementY:Hc}}),hm=on(sc),mj=We({},sc,{dataTransfer:0}),gj=on(mj),yj=We({},lo,{relatedTarget:0}),Wc=on(yj),xj=We({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),vj=on(xj),wj=We({},Ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bj=on(wj),kj=We({},Ii,{data:0}),fm=on(kj),jj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _j(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nj[e])?!!t[e]:!1}function af(){return _j}var Ej=We({},lo,{key:function(e){if(e.key){var t=jj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:af,charCode:function(e){return e.type==="keypress"?tl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pj=on(Ej),Cj=We({},sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pm=on(Cj),Tj=We({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:af}),Aj=on(Tj),Ij=We({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rj=on(Ij),Dj=We({},sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lj=on(Dj),Oj=[9,13,27,32],of=ur&&"CompositionEvent"in window,fa=null;ur&&"documentMode"in document&&(fa=document.documentMode);var $j=ur&&"TextEvent"in window&&!fa,Lx=ur&&(!of||fa&&8<fa&&11>=fa),mm=" ",gm=!1;function Ox(e,t){switch(e){case"keyup":return Oj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $x(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gs=!1;function Mj(e,t){switch(e){case"compositionend":return $x(t);case"keypress":return t.which!==32?null:(gm=!0,mm);case"textInput":return e=t.data,e===mm&&gm?null:e;default:return null}}function Fj(e,t){if(Gs)return e==="compositionend"||!of&&Ox(e,t)?(e=Dx(),el=rf=Rr=null,Gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lx&&t.locale!=="ko"?null:t.data;default:return null}}var Uj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ym(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uj[e.type]:t==="textarea"}function Mx(e,t,n,r){mx(r),t=Sl(t,"onChange"),0<t.length&&(n=new sf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var pa=null,$a=null;function Vj(e){Xx(e,0)}function ic(e){var t=Js(e);if(lx(t))return e}function zj(e,t){if(e==="change")return t}var Fx=!1;if(ur){var qc;if(ur){var Gc="oninput"in document;if(!Gc){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),Gc=typeof xm.oninput=="function"}qc=Gc}else qc=!1;Fx=qc&&(!document.documentMode||9<document.documentMode)}function vm(){pa&&(pa.detachEvent("onpropertychange",Ux),$a=pa=null)}function Ux(e){if(e.propertyName==="value"&&ic($a)){var t=[];Mx(t,$a,e,Qh(e)),vx(Vj,t)}}function Bj(e,t,n){e==="focusin"?(vm(),pa=t,$a=n,pa.attachEvent("onpropertychange",Ux)):e==="focusout"&&vm()}function Hj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ic($a)}function Wj(e,t){if(e==="click")return ic(t)}function qj(e,t){if(e==="input"||e==="change")return ic(t)}function Gj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dn=typeof Object.is=="function"?Object.is:Gj;function Ma(e,t){if(Dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ju.call(t,s)||!Dn(e[s],t[s]))return!1}return!0}function wm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bm(e,t){var n=wm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wm(n)}}function Vx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zx(){for(var e=window,t=yl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yl(e.document)}return t}function lf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kj(e){var t=zx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Vx(n.ownerDocument.documentElement,n)){if(r!==null&&lf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=bm(n,i);var a=bm(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xj=ur&&"documentMode"in document&&11>=document.documentMode,Ks=null,md=null,ma=null,gd=!1;function km(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gd||Ks==null||Ks!==yl(r)||(r=Ks,"selectionStart"in r&&lf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ma&&Ma(ma,r)||(ma=r,r=Sl(md,"onSelect"),0<r.length&&(t=new sf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ks)))}function To(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xs={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionend:To("Transition","TransitionEnd")},Kc={},Bx={};ur&&(Bx=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function ac(e){if(Kc[e])return Kc[e];if(!Xs[e])return e;var t=Xs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bx)return Kc[e]=t[n];return e}var Hx=ac("animationend"),Wx=ac("animationiteration"),qx=ac("animationstart"),Gx=ac("transitionend"),Kx=new Map,jm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(e,t){Kx.set(e,t),Is(t,[e])}for(var Xc=0;Xc<jm.length;Xc++){var Jc=jm[Xc],Jj=Jc.toLowerCase(),Yj=Jc[0].toUpperCase()+Jc.slice(1);Zr(Jj,"on"+Yj)}Zr(Hx,"onAnimationEnd");Zr(Wx,"onAnimationIteration");Zr(qx,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(Gx,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Is("onBeforeInput",["compositionend","keypress","textInput","paste"]);Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qj=new Set("cancel close invalid load scroll toggle".split(" ").concat(la));function Sm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,J1(r,t,void 0,e),e.currentTarget=null}function Xx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Sm(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Sm(s,l,u),i=c}}}if(vl)throw e=dd,vl=!1,dd=null,e}function Le(e,t){var n=t[bd];n===void 0&&(n=t[bd]=new Set);var r=e+"__bubble";n.has(r)||(Jx(t,e,2,!1),n.add(r))}function Yc(e,t,n){var r=0;t&&(r|=4),Jx(n,e,r,t)}var Ao="_reactListening"+Math.random().toString(36).slice(2);function Fa(e){if(!e[Ao]){e[Ao]=!0,rx.forEach(function(n){n!=="selectionchange"&&(Qj.has(n)||Yc(n,!1,e),Yc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ao]||(t[Ao]=!0,Yc("selectionchange",!1,t))}}function Jx(e,t,n,r){switch(Rx(t)){case 1:var s=hj;break;case 4:s=fj;break;default:s=nf}n=s.bind(null,t,n,e),s=void 0,!ud||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Qc(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=xs(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}vx(function(){var u=i,d=Qh(n),h=[];e:{var f=Kx.get(e);if(f!==void 0){var p=sf,m=e;switch(e){case"keypress":if(tl(n)===0)break e;case"keydown":case"keyup":p=Pj;break;case"focusin":m="focus",p=Wc;break;case"focusout":m="blur",p=Wc;break;case"beforeblur":case"afterblur":p=Wc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=gj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Aj;break;case Hx:case Wx:case qx:p=vj;break;case Gx:p=Rj;break;case"scroll":p=pj;break;case"wheel":p=Lj;break;case"copy":case"cut":case"paste":p=bj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=pm}var v=(t&4)!==0,w=!v&&e==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,x;g!==null;){x=g;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,y!==null&&(N=Ra(g,y),N!=null&&v.push(Ua(g,N,x)))),w)break;g=g.return}0<v.length&&(f=new p(f,m,null,n,d),h.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==ld&&(m=n.relatedTarget||n.fromElement)&&(xs(m)||m[dr]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?xs(m):null,m!==null&&(w=Rs(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=hm,N="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=pm,N="onPointerLeave",y="onPointerEnter",g="pointer"),w=p==null?f:Js(p),x=m==null?f:Js(m),f=new v(N,g+"leave",p,n,d),f.target=w,f.relatedTarget=x,N=null,xs(d)===u&&(v=new v(y,g+"enter",m,n,d),v.target=x,v.relatedTarget=w,N=v),w=N,p&&m)t:{for(v=p,y=m,g=0,x=v;x;x=Os(x))g++;for(x=0,N=y;N;N=Os(N))x++;for(;0<g-x;)v=Os(v),g--;for(;0<x-g;)y=Os(y),x--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=Os(v),y=Os(y)}v=null}else v=null;p!==null&&Nm(h,f,p,v,!1),m!==null&&w!==null&&Nm(h,w,m,v,!0)}}e:{if(f=u?Js(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=zj;else if(ym(f))if(Fx)E=qj;else{E=Hj;var S=Bj}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Wj);if(E&&(E=E(e,u))){Mx(h,E,n,d);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&rd(f,"number",f.value)}switch(S=u?Js(u):window,e){case"focusin":(ym(S)||S.contentEditable==="true")&&(Ks=S,md=u,ma=null);break;case"focusout":ma=md=Ks=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,km(h,n,d);break;case"selectionchange":if(Xj)break;case"keydown":case"keyup":km(h,n,d)}var P;if(of)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Gs?Ox(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Lx&&n.locale!=="ko"&&(Gs||T!=="onCompositionStart"?T==="onCompositionEnd"&&Gs&&(P=Dx()):(Rr=d,rf="value"in Rr?Rr.value:Rr.textContent,Gs=!0)),S=Sl(u,T),0<S.length&&(T=new fm(T,e,null,n,d),h.push({event:T,listeners:S}),P?T.data=P:(P=$x(n),P!==null&&(T.data=P)))),(P=$j?Mj(e,n):Fj(e,n))&&(u=Sl(u,"onBeforeInput"),0<u.length&&(d=new fm("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=P))}Xx(h,t)})}function Ua(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Sl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ra(e,n),i!=null&&r.unshift(Ua(e,i,s)),i=Ra(e,t),i!=null&&r.push(Ua(e,i,s))),e=e.return}return r}function Os(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nm(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ra(n,i),c!=null&&a.unshift(Ua(n,c,l))):s||(c=Ra(n,i),c!=null&&a.push(Ua(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Zj=/\r\n?/g,eS=/\u0000|\uFFFD/g;function _m(e){return(typeof e=="string"?e:""+e).replace(Zj,`
`).replace(eS,"")}function Io(e,t,n){if(t=_m(t),_m(e)!==t&&n)throw Error(H(425))}function Nl(){}var yd=null,xd=null;function vd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,tS=typeof clearTimeout=="function"?clearTimeout:void 0,Em=typeof Promise=="function"?Promise:void 0,nS=typeof queueMicrotask=="function"?queueMicrotask:typeof Em<"u"?function(e){return Em.resolve(null).then(e).catch(rS)}:wd;function rS(e){setTimeout(function(){throw e})}function Zc(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Oa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oa(t)}function Ur(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ri=Math.random().toString(36).slice(2),Un="__reactFiber$"+Ri,Va="__reactProps$"+Ri,dr="__reactContainer$"+Ri,bd="__reactEvents$"+Ri,sS="__reactListeners$"+Ri,iS="__reactHandles$"+Ri;function xs(e){var t=e[Un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dr]||n[Un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pm(e);e!==null;){if(n=e[Un])return n;e=Pm(e)}return t}e=n,n=e.parentNode}return null}function co(e){return e=e[Un]||e[dr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Js(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function oc(e){return e[Va]||null}var kd=[],Ys=-1;function es(e){return{current:e}}function Oe(e){0>Ys||(e.current=kd[Ys],kd[Ys]=null,Ys--)}function Re(e,t){Ys++,kd[Ys]=e.current,e.current=t}var Xr={},Pt=es(Xr),Ht=es(!1),Es=Xr;function wi(e,t){var n=e.type.contextTypes;if(!n)return Xr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Wt(e){return e=e.childContextTypes,e!=null}function _l(){Oe(Ht),Oe(Pt)}function Cm(e,t,n){if(Pt.current!==Xr)throw Error(H(168));Re(Pt,t),Re(Ht,n)}function Yx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(H(108,B1(e)||"Unknown",s));return We({},n,r)}function El(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xr,Es=Pt.current,Re(Pt,e),Re(Ht,Ht.current),!0}function Tm(e,t,n){var r=e.stateNode;if(!r)throw Error(H(169));n?(e=Yx(e,t,Es),r.__reactInternalMemoizedMergedChildContext=e,Oe(Ht),Oe(Pt),Re(Pt,e)):Oe(Ht),Re(Ht,n)}var sr=null,lc=!1,eu=!1;function Qx(e){sr===null?sr=[e]:sr.push(e)}function aS(e){lc=!0,Qx(e)}function ts(){if(!eu&&sr!==null){eu=!0;var e=0,t=Pe;try{var n=sr;for(Pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}sr=null,lc=!1}catch(s){throw sr!==null&&(sr=sr.slice(e+1)),jx(Zh,ts),s}finally{Pe=t,eu=!1}}return null}var Qs=[],Zs=0,Pl=null,Cl=0,pn=[],mn=0,Ps=null,ir=1,ar="";function hs(e,t){Qs[Zs++]=Cl,Qs[Zs++]=Pl,Pl=e,Cl=t}function Zx(e,t,n){pn[mn++]=ir,pn[mn++]=ar,pn[mn++]=Ps,Ps=e;var r=ir;e=ar;var s=32-An(r)-1;r&=~(1<<s),n+=1;var i=32-An(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ir=1<<32-An(t)+s|n<<s|r,ar=i+e}else ir=1<<i|n<<s|r,ar=e}function cf(e){e.return!==null&&(hs(e,1),Zx(e,1,0))}function uf(e){for(;e===Pl;)Pl=Qs[--Zs],Qs[Zs]=null,Cl=Qs[--Zs],Qs[Zs]=null;for(;e===Ps;)Ps=pn[--mn],pn[mn]=null,ar=pn[--mn],pn[mn]=null,ir=pn[--mn],pn[mn]=null}var rn=null,tn=null,Fe=!1,Cn=null;function ev(e,t){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Am(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rn=e,tn=Ur(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rn=e,tn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ps!==null?{id:ir,overflow:ar}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rn=e,tn=null,!0):!1;default:return!1}}function jd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sd(e){if(Fe){var t=tn;if(t){var n=t;if(!Am(e,t)){if(jd(e))throw Error(H(418));t=Ur(n.nextSibling);var r=rn;t&&Am(e,t)?ev(r,n):(e.flags=e.flags&-4097|2,Fe=!1,rn=e)}}else{if(jd(e))throw Error(H(418));e.flags=e.flags&-4097|2,Fe=!1,rn=e}}}function Im(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rn=e}function Ro(e){if(e!==rn)return!1;if(!Fe)return Im(e),Fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vd(e.type,e.memoizedProps)),t&&(t=tn)){if(jd(e))throw tv(),Error(H(418));for(;t;)ev(e,t),t=Ur(t.nextSibling)}if(Im(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tn=Ur(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tn=null}}else tn=rn?Ur(e.stateNode.nextSibling):null;return!0}function tv(){for(var e=tn;e;)e=Ur(e.nextSibling)}function bi(){tn=rn=null,Fe=!1}function df(e){Cn===null?Cn=[e]:Cn.push(e)}var oS=yr.ReactCurrentBatchConfig;function Ji(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,e))}return e}function Do(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rm(e){var t=e._init;return t(e._payload)}function nv(e){function t(y,g){if(e){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=Hr(y,g),y.index=0,y.sibling=null,y}function i(y,g,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=2,g):x):(y.flags|=2,g)):(y.flags|=1048576,g)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,g,x,N){return g===null||g.tag!==6?(g=ou(x,y.mode,N),g.return=y,g):(g=s(g,x),g.return=y,g)}function c(y,g,x,N){var E=x.type;return E===qs?d(y,g,x.props.children,N,x.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Pr&&Rm(E)===g.type)?(N=s(g,x.props),N.ref=Ji(y,g,x),N.return=y,N):(N=ll(x.type,x.key,x.props,null,y.mode,N),N.ref=Ji(y,g,x),N.return=y,N)}function u(y,g,x,N){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=lu(x,y.mode,N),g.return=y,g):(g=s(g,x.children||[]),g.return=y,g)}function d(y,g,x,N,E){return g===null||g.tag!==7?(g=Ss(x,y.mode,N,E),g.return=y,g):(g=s(g,x),g.return=y,g)}function h(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ou(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case jo:return x=ll(g.type,g.key,g.props,null,y.mode,x),x.ref=Ji(y,null,g),x.return=y,x;case Ws:return g=lu(g,y.mode,x),g.return=y,g;case Pr:var N=g._init;return h(y,N(g._payload),x)}if(aa(g)||Wi(g))return g=Ss(g,y.mode,x,null),g.return=y,g;Do(y,g)}return null}function f(y,g,x,N){var E=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:l(y,g,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jo:return x.key===E?c(y,g,x,N):null;case Ws:return x.key===E?u(y,g,x,N):null;case Pr:return E=x._init,f(y,g,E(x._payload),N)}if(aa(x)||Wi(x))return E!==null?null:d(y,g,x,N,null);Do(y,x)}return null}function p(y,g,x,N,E){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(x)||null,l(g,y,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case jo:return y=y.get(N.key===null?x:N.key)||null,c(g,y,N,E);case Ws:return y=y.get(N.key===null?x:N.key)||null,u(g,y,N,E);case Pr:var S=N._init;return p(y,g,x,S(N._payload),E)}if(aa(N)||Wi(N))return y=y.get(x)||null,d(g,y,N,E,null);Do(g,N)}return null}function m(y,g,x,N){for(var E=null,S=null,P=g,T=g=0,$=null;P!==null&&T<x.length;T++){P.index>T?($=P,P=null):$=P.sibling;var O=f(y,P,x[T],N);if(O===null){P===null&&(P=$);break}e&&P&&O.alternate===null&&t(y,P),g=i(O,g,T),S===null?E=O:S.sibling=O,S=O,P=$}if(T===x.length)return n(y,P),Fe&&hs(y,T),E;if(P===null){for(;T<x.length;T++)P=h(y,x[T],N),P!==null&&(g=i(P,g,T),S===null?E=P:S.sibling=P,S=P);return Fe&&hs(y,T),E}for(P=r(y,P);T<x.length;T++)$=p(P,y,T,x[T],N),$!==null&&(e&&$.alternate!==null&&P.delete($.key===null?T:$.key),g=i($,g,T),S===null?E=$:S.sibling=$,S=$);return e&&P.forEach(function(V){return t(y,V)}),Fe&&hs(y,T),E}function v(y,g,x,N){var E=Wi(x);if(typeof E!="function")throw Error(H(150));if(x=E.call(x),x==null)throw Error(H(151));for(var S=E=null,P=g,T=g=0,$=null,O=x.next();P!==null&&!O.done;T++,O=x.next()){P.index>T?($=P,P=null):$=P.sibling;var V=f(y,P,O.value,N);if(V===null){P===null&&(P=$);break}e&&P&&V.alternate===null&&t(y,P),g=i(V,g,T),S===null?E=V:S.sibling=V,S=V,P=$}if(O.done)return n(y,P),Fe&&hs(y,T),E;if(P===null){for(;!O.done;T++,O=x.next())O=h(y,O.value,N),O!==null&&(g=i(O,g,T),S===null?E=O:S.sibling=O,S=O);return Fe&&hs(y,T),E}for(P=r(y,P);!O.done;T++,O=x.next())O=p(P,y,T,O.value,N),O!==null&&(e&&O.alternate!==null&&P.delete(O.key===null?T:O.key),g=i(O,g,T),S===null?E=O:S.sibling=O,S=O);return e&&P.forEach(function(X){return t(y,X)}),Fe&&hs(y,T),E}function w(y,g,x,N){if(typeof x=="object"&&x!==null&&x.type===qs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case jo:e:{for(var E=x.key,S=g;S!==null;){if(S.key===E){if(E=x.type,E===qs){if(S.tag===7){n(y,S.sibling),g=s(S,x.props.children),g.return=y,y=g;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Pr&&Rm(E)===S.type){n(y,S.sibling),g=s(S,x.props),g.ref=Ji(y,S,x),g.return=y,y=g;break e}n(y,S);break}else t(y,S);S=S.sibling}x.type===qs?(g=Ss(x.props.children,y.mode,N,x.key),g.return=y,y=g):(N=ll(x.type,x.key,x.props,null,y.mode,N),N.ref=Ji(y,g,x),N.return=y,y=N)}return a(y);case Ws:e:{for(S=x.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),g=s(g,x.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=lu(x,y.mode,N),g.return=y,y=g}return a(y);case Pr:return S=x._init,w(y,g,S(x._payload),N)}if(aa(x))return m(y,g,x,N);if(Wi(x))return v(y,g,x,N);Do(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,x),g.return=y,y=g):(n(y,g),g=ou(x,y.mode,N),g.return=y,y=g),a(y)):n(y,g)}return w}var ki=nv(!0),rv=nv(!1),Tl=es(null),Al=null,ei=null,hf=null;function ff(){hf=ei=Al=null}function pf(e){var t=Tl.current;Oe(Tl),e._currentValue=t}function Nd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fi(e,t){Al=e,hf=ei=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zt=!0),e.firstContext=null)}function bn(e){var t=e._currentValue;if(hf!==e)if(e={context:e,memoizedValue:t,next:null},ei===null){if(Al===null)throw Error(H(308));ei=e,Al.dependencies={lanes:0,firstContext:e}}else ei=ei.next=e;return t}var vs=null;function mf(e){vs===null?vs=[e]:vs.push(e)}function sv(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,mf(t)):(n.next=s.next,s.next=n),t.interleaved=n,hr(e,r)}function hr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cr=!1;function gf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,hr(e,n)}return s=r.interleaved,s===null?(t.next=t,mf(r)):(t.next=s.next,s.next=t),r.interleaved=t,hr(e,n)}function nl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ef(e,n)}}function Dm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Il(e,t,n,r){var s=e.updateQueue;Cr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,v=l;switch(f=t,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=We({},h,f);break e;case 2:Cr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Ts|=a,e.lanes=a,e.memoizedState=h}}function Lm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var uo={},Hn=es(uo),za=es(uo),Ba=es(uo);function ws(e){if(e===uo)throw Error(H(174));return e}function yf(e,t){switch(Re(Ba,t),Re(za,e),Re(Hn,uo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:id(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=id(t,e)}Oe(Hn),Re(Hn,t)}function ji(){Oe(Hn),Oe(za),Oe(Ba)}function av(e){ws(Ba.current);var t=ws(Hn.current),n=id(t,e.type);t!==n&&(Re(za,e),Re(Hn,n))}function xf(e){za.current===e&&(Oe(Hn),Oe(za))}var Ve=es(0);function Rl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tu=[];function vf(){for(var e=0;e<tu.length;e++)tu[e]._workInProgressVersionPrimary=null;tu.length=0}var rl=yr.ReactCurrentDispatcher,nu=yr.ReactCurrentBatchConfig,Cs=0,Be=null,ot=null,dt=null,Dl=!1,ga=!1,Ha=0,lS=0;function kt(){throw Error(H(321))}function wf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dn(e[n],t[n]))return!1;return!0}function bf(e,t,n,r,s,i){if(Cs=i,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rl.current=e===null||e.memoizedState===null?hS:fS,e=n(r,s),ga){i=0;do{if(ga=!1,Ha=0,25<=i)throw Error(H(301));i+=1,dt=ot=null,t.updateQueue=null,rl.current=pS,e=n(r,s)}while(ga)}if(rl.current=Ll,t=ot!==null&&ot.next!==null,Cs=0,dt=ot=Be=null,Dl=!1,t)throw Error(H(300));return e}function kf(){var e=Ha!==0;return Ha=0,e}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Be.memoizedState=dt=e:dt=dt.next=e,dt}function kn(){if(ot===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=dt===null?Be.memoizedState:dt.next;if(t!==null)dt=t,ot=e;else{if(e===null)throw Error(H(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},dt===null?Be.memoizedState=dt=e:dt=dt.next=e}return dt}function Wa(e,t){return typeof t=="function"?t(e):t}function ru(e){var t=kn(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Cs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,Be.lanes|=d,Ts|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Dn(r,t.memoizedState)||(zt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Be.lanes|=i,Ts|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function su(e){var t=kn(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Dn(i,t.memoizedState)||(zt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ov(){}function lv(e,t){var n=Be,r=kn(),s=t(),i=!Dn(r.memoizedState,s);if(i&&(r.memoizedState=s,zt=!0),r=r.queue,jf(dv.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,qa(9,uv.bind(null,n,r,s,t),void 0,null),ft===null)throw Error(H(349));Cs&30||cv(n,t,s)}return s}function cv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uv(e,t,n,r){t.value=n,t.getSnapshot=r,hv(t)&&fv(e)}function dv(e,t,n){return n(function(){hv(t)&&fv(e)})}function hv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dn(e,n)}catch{return!0}}function fv(e){var t=hr(e,1);t!==null&&In(t,e,1,-1)}function Om(e){var t=$n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:e},t.queue=e,e=e.dispatch=dS.bind(null,Be,e),[t.memoizedState,e]}function qa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function pv(){return kn().memoizedState}function sl(e,t,n,r){var s=$n();Be.flags|=e,s.memoizedState=qa(1|t,n,void 0,r===void 0?null:r)}function cc(e,t,n,r){var s=kn();r=r===void 0?null:r;var i=void 0;if(ot!==null){var a=ot.memoizedState;if(i=a.destroy,r!==null&&wf(r,a.deps)){s.memoizedState=qa(t,n,i,r);return}}Be.flags|=e,s.memoizedState=qa(1|t,n,i,r)}function $m(e,t){return sl(8390656,8,e,t)}function jf(e,t){return cc(2048,8,e,t)}function mv(e,t){return cc(4,2,e,t)}function gv(e,t){return cc(4,4,e,t)}function yv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xv(e,t,n){return n=n!=null?n.concat([e]):null,cc(4,4,yv.bind(null,t,e),n)}function Sf(){}function vv(e,t){var n=kn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wv(e,t){var n=kn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bv(e,t,n){return Cs&21?(Dn(n,t)||(n=_x(),Be.lanes|=n,Ts|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zt=!0),e.memoizedState=n)}function cS(e,t){var n=Pe;Pe=n!==0&&4>n?n:4,e(!0);var r=nu.transition;nu.transition={};try{e(!1),t()}finally{Pe=n,nu.transition=r}}function kv(){return kn().memoizedState}function uS(e,t,n){var r=Br(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jv(e))Sv(t,n);else if(n=sv(e,t,n,r),n!==null){var s=Rt();In(n,e,r,s),Nv(n,t,r)}}function dS(e,t,n){var r=Br(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jv(e))Sv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Dn(l,a)){var c=t.interleaved;c===null?(s.next=s,mf(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=sv(e,t,s,r),n!==null&&(s=Rt(),In(n,e,r,s),Nv(n,t,r))}}function jv(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function Sv(e,t){ga=Dl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Nv(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ef(e,n)}}var Ll={readContext:bn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},hS={readContext:bn,useCallback:function(e,t){return $n().memoizedState=[e,t===void 0?null:t],e},useContext:bn,useEffect:$m,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,sl(4194308,4,yv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sl(4194308,4,e,t)},useInsertionEffect:function(e,t){return sl(4,2,e,t)},useMemo:function(e,t){var n=$n();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$n();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=uS.bind(null,Be,e),[r.memoizedState,e]},useRef:function(e){var t=$n();return e={current:e},t.memoizedState=e},useState:Om,useDebugValue:Sf,useDeferredValue:function(e){return $n().memoizedState=e},useTransition:function(){var e=Om(!1),t=e[0];return e=cS.bind(null,e[1]),$n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Be,s=$n();if(Fe){if(n===void 0)throw Error(H(407));n=n()}else{if(n=t(),ft===null)throw Error(H(349));Cs&30||cv(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,$m(dv.bind(null,r,i,e),[e]),r.flags|=2048,qa(9,uv.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=$n(),t=ft.identifierPrefix;if(Fe){var n=ar,r=ir;n=(r&~(1<<32-An(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ha++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fS={readContext:bn,useCallback:vv,useContext:bn,useEffect:jf,useImperativeHandle:xv,useInsertionEffect:mv,useLayoutEffect:gv,useMemo:wv,useReducer:ru,useRef:pv,useState:function(){return ru(Wa)},useDebugValue:Sf,useDeferredValue:function(e){var t=kn();return bv(t,ot.memoizedState,e)},useTransition:function(){var e=ru(Wa)[0],t=kn().memoizedState;return[e,t]},useMutableSource:ov,useSyncExternalStore:lv,useId:kv,unstable_isNewReconciler:!1},pS={readContext:bn,useCallback:vv,useContext:bn,useEffect:jf,useImperativeHandle:xv,useInsertionEffect:mv,useLayoutEffect:gv,useMemo:wv,useReducer:su,useRef:pv,useState:function(){return su(Wa)},useDebugValue:Sf,useDeferredValue:function(e){var t=kn();return ot===null?t.memoizedState=e:bv(t,ot.memoizedState,e)},useTransition:function(){var e=su(Wa)[0],t=kn().memoizedState;return[e,t]},useMutableSource:ov,useSyncExternalStore:lv,useId:kv,unstable_isNewReconciler:!1};function Nn(e,t){if(e&&e.defaultProps){t=We({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function _d(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var uc={isMounted:function(e){return(e=e._reactInternals)?Rs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rt(),s=Br(e),i=lr(r,s);i.payload=t,n!=null&&(i.callback=n),t=Vr(e,i,s),t!==null&&(In(t,e,s,r),nl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rt(),s=Br(e),i=lr(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Vr(e,i,s),t!==null&&(In(t,e,s,r),nl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rt(),r=Br(e),s=lr(n,r);s.tag=2,t!=null&&(s.callback=t),t=Vr(e,s,r),t!==null&&(In(t,e,r,n),nl(t,e,r))}};function Mm(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Ma(n,r)||!Ma(s,i):!0}function _v(e,t,n){var r=!1,s=Xr,i=t.contextType;return typeof i=="object"&&i!==null?i=bn(i):(s=Wt(t)?Es:Pt.current,r=t.contextTypes,i=(r=r!=null)?wi(e,s):Xr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=uc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&uc.enqueueReplaceState(t,t.state,null)}function Ed(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},gf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=bn(i):(i=Wt(t)?Es:Pt.current,s.context=wi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(_d(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&uc.enqueueReplaceState(s,s.state,null),Il(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Si(e,t){try{var n="",r=t;do n+=z1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function iu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Pd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mS=typeof WeakMap=="function"?WeakMap:Map;function Ev(e,t,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$l||($l=!0,Md=r),Pd(e,t)},n}function Pv(e,t,n){n=lr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Pd(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Pd(e,t),typeof r!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Um(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new mS;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=CS.bind(null,e,t,n),t.then(e,e))}function Vm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zm(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=lr(-1,1),t.tag=2,Vr(n,t,1))),n.lanes|=1),e)}var gS=yr.ReactCurrentOwner,zt=!1;function At(e,t,n,r){t.child=e===null?rv(t,null,n,r):ki(t,e.child,n,r)}function Bm(e,t,n,r,s){n=n.render;var i=t.ref;return fi(t,s),r=bf(e,t,n,r,i,s),n=kf(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fr(e,t,s)):(Fe&&n&&cf(t),t.flags|=1,At(e,t,r,s),t.child)}function Hm(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!If(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Cv(e,t,i,r,s)):(e=ll(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ma,n(a,r)&&e.ref===t.ref)return fr(e,t,s)}return t.flags|=1,e=Hr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Cv(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ma(i,r)&&e.ref===t.ref)if(zt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(zt=!0);else return t.lanes=e.lanes,fr(e,t,s)}return Cd(e,t,n,r,s)}function Tv(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(ni,Zt),Zt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(ni,Zt),Zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re(ni,Zt),Zt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Re(ni,Zt),Zt|=r;return At(e,t,s,n),t.child}function Av(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cd(e,t,n,r,s){var i=Wt(n)?Es:Pt.current;return i=wi(t,i),fi(t,s),n=bf(e,t,n,r,i,s),r=kf(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fr(e,t,s)):(Fe&&r&&cf(t),t.flags|=1,At(e,t,n,s),t.child)}function Wm(e,t,n,r,s){if(Wt(n)){var i=!0;El(t)}else i=!1;if(fi(t,s),t.stateNode===null)il(e,t),_v(t,n,r),Ed(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=bn(u):(u=Wt(n)?Es:Pt.current,u=wi(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Fm(t,a,r,u),Cr=!1;var f=t.memoizedState;a.state=f,Il(t,r,a,s),c=t.memoizedState,l!==r||f!==c||Ht.current||Cr?(typeof d=="function"&&(_d(t,n,d,r),c=t.memoizedState),(l=Cr||Mm(t,n,l,r,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,iv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Nn(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=bn(c):(c=Wt(n)?Es:Pt.current,c=wi(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Fm(t,a,r,c),Cr=!1,f=t.memoizedState,a.state=f,Il(t,r,a,s);var m=t.memoizedState;l!==h||f!==m||Ht.current||Cr?(typeof p=="function"&&(_d(t,n,p,r),m=t.memoizedState),(u=Cr||Mm(t,n,u,r,f,m,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Td(e,t,n,r,i,s)}function Td(e,t,n,r,s,i){Av(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Tm(t,n,!1),fr(e,t,i);r=t.stateNode,gS.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,l,i)):At(e,t,l,i),t.memoizedState=r.state,s&&Tm(t,n,!0),t.child}function Iv(e){var t=e.stateNode;t.pendingContext?Cm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cm(e,t.context,!1),yf(e,t.containerInfo)}function qm(e,t,n,r,s){return bi(),df(s),t.flags|=256,At(e,t,n,r),t.child}var Ad={dehydrated:null,treeContext:null,retryLane:0};function Id(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rv(e,t,n){var r=t.pendingProps,s=Ve.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Re(Ve,s&1),e===null)return Sd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=fc(a,r,0,null),e=Ss(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Id(n),t.memoizedState=Ad,e):Nf(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return yS(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Hr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Hr(l,i):(i=Ss(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Id(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Ad,r}return i=e.child,e=i.sibling,r=Hr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Nf(e,t){return t=fc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lo(e,t,n,r){return r!==null&&df(r),ki(t,e.child,null,n),e=Nf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yS(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=iu(Error(H(422))),Lo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=fc({mode:"visible",children:r.children},s,0,null),i=Ss(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ki(t,e.child,null,a),t.child.memoizedState=Id(a),t.memoizedState=Ad,i);if(!(t.mode&1))return Lo(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=iu(i,r,void 0),Lo(e,t,a,r)}if(l=(a&e.childLanes)!==0,zt||l){if(r=ft,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(e,s),In(r,e,s,-1))}return Af(),r=iu(Error(H(421))),Lo(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=TS.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,tn=Ur(s.nextSibling),rn=t,Fe=!0,Cn=null,e!==null&&(pn[mn++]=ir,pn[mn++]=ar,pn[mn++]=Ps,ir=e.id,ar=e.overflow,Ps=t),t=Nf(t,r.children),t.flags|=4096,t)}function Gm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Nd(e.return,t,n)}function au(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Dv(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(At(e,t,r.children,n),r=Ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gm(e,n,t);else if(e.tag===19)Gm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Re(Ve,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Rl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),au(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Rl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}au(t,!0,n,null,i);break;case"together":au(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function il(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ts|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,n=Hr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xS(e,t,n){switch(t.tag){case 3:Iv(t),bi();break;case 5:av(t);break;case 1:Wt(t.type)&&El(t);break;case 4:yf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Re(Tl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Re(Ve,Ve.current&1),t.flags|=128,null):n&t.child.childLanes?Rv(e,t,n):(Re(Ve,Ve.current&1),e=fr(e,t,n),e!==null?e.sibling:null);Re(Ve,Ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Dv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(Ve,Ve.current),r)break;return null;case 22:case 23:return t.lanes=0,Tv(e,t,n)}return fr(e,t,n)}var Lv,Rd,Ov,$v;Lv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rd=function(){};Ov=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ws(Hn.current);var i=null;switch(n){case"input":s=td(e,s),r=td(e,r),i=[];break;case"select":s=We({},s,{value:void 0}),r=We({},r,{value:void 0}),i=[];break;case"textarea":s=sd(e,s),r=sd(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Nl)}ad(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Aa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Aa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Le("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};$v=function(e,t,n,r){n!==r&&(t.flags|=4)};function Yi(e,t){if(!Fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vS(e,t,n){var r=t.pendingProps;switch(uf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return Wt(t.type)&&_l(),jt(t),null;case 3:return r=t.stateNode,ji(),Oe(Ht),Oe(Pt),vf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ro(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Cn!==null&&(Vd(Cn),Cn=null))),Rd(e,t),jt(t),null;case 5:xf(t);var s=ws(Ba.current);if(n=t.type,e!==null&&t.stateNode!=null)Ov(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(H(166));return jt(t),null}if(e=ws(Hn.current),Ro(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Un]=t,r[Va]=i,e=(t.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(s=0;s<la.length;s++)Le(la[s],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":nm(r,i),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Le("invalid",r);break;case"textarea":sm(r,i),Le("invalid",r)}ad(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Io(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Io(r.textContent,l,e),s=["children",""+l]):Aa.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Le("scroll",r)}switch(n){case"input":So(r),rm(r,i,!0);break;case"textarea":So(r),im(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Nl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dx(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Un]=t,e[Va]=r,Lv(e,t,!1,!1),t.stateNode=e;e:{switch(a=od(n,r),n){case"dialog":Le("cancel",e),Le("close",e),s=r;break;case"iframe":case"object":case"embed":Le("load",e),s=r;break;case"video":case"audio":for(s=0;s<la.length;s++)Le(la[s],e);s=r;break;case"source":Le("error",e),s=r;break;case"img":case"image":case"link":Le("error",e),Le("load",e),s=r;break;case"details":Le("toggle",e),s=r;break;case"input":nm(e,r),s=td(e,r),Le("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=We({},r,{value:void 0}),Le("invalid",e);break;case"textarea":sm(e,r),s=sd(e,r),Le("invalid",e);break;default:s=r}ad(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?px(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hx(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ia(e,c):typeof c=="number"&&Ia(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Aa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Le("scroll",e):c!=null&&Kh(e,i,c,a))}switch(n){case"input":So(e),rm(e,r,!1);break;case"textarea":So(e),im(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Kr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ci(e,!!r.multiple,i,!1):r.defaultValue!=null&&ci(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Nl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jt(t),null;case 6:if(e&&t.stateNode!=null)$v(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(H(166));if(n=ws(Ba.current),ws(Hn.current),Ro(t)){if(r=t.stateNode,n=t.memoizedProps,r[Un]=t,(i=r.nodeValue!==n)&&(e=rn,e!==null))switch(e.tag){case 3:Io(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Io(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Un]=t,t.stateNode=r}return jt(t),null;case 13:if(Oe(Ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&tn!==null&&t.mode&1&&!(t.flags&128))tv(),bi(),t.flags|=98560,i=!1;else if(i=Ro(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(H(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[Un]=t}else bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jt(t),i=!1}else Cn!==null&&(Vd(Cn),Cn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ve.current&1?lt===0&&(lt=3):Af())),t.updateQueue!==null&&(t.flags|=4),jt(t),null);case 4:return ji(),Rd(e,t),e===null&&Fa(t.stateNode.containerInfo),jt(t),null;case 10:return pf(t.type._context),jt(t),null;case 17:return Wt(t.type)&&_l(),jt(t),null;case 19:if(Oe(Ve),i=t.memoizedState,i===null)return jt(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Yi(i,!1);else{if(lt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Rl(e),a!==null){for(t.flags|=128,Yi(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Re(Ve,Ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&Je()>Ni&&(t.flags|=128,r=!0,Yi(i,!1),t.lanes=4194304)}else{if(!r)if(e=Rl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Yi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Fe)return jt(t),null}else 2*Je()-i.renderingStartTime>Ni&&n!==1073741824&&(t.flags|=128,r=!0,Yi(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=Ve.current,Re(Ve,r?n&1|2:n&1),t):(jt(t),null);case 22:case 23:return Tf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Zt&1073741824&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function wS(e,t){switch(uf(t),t.tag){case 1:return Wt(t.type)&&_l(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ji(),Oe(Ht),Oe(Pt),vf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xf(t),null;case 13:if(Oe(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(Ve),null;case 4:return ji(),null;case 10:return pf(t.type._context),null;case 22:case 23:return Tf(),null;case 24:return null;default:return null}}var Oo=!1,St=!1,bS=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ti(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(e,t,r)}else n.current=null}function Dd(e,t,n){try{n()}catch(r){Ge(e,t,r)}}var Km=!1;function kS(e,t){if(yd=kl,e=zx(),lf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=a),f===i&&++d===r&&(c=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xd={focusedElem:e,selectionRange:n},kl=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,w=m.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Nn(t.type,v),w);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(N){Ge(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return m=Km,Km=!1,m}function ya(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dd(t,n,i)}s=s.next}while(s!==r)}}function dc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ld(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Mv(e){var t=e.alternate;t!==null&&(e.alternate=null,Mv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Un],delete t[Va],delete t[bd],delete t[sS],delete t[iS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fv(e){return e.tag===5||e.tag===3||e.tag===4}function Xm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Od(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nl));else if(r!==4&&(e=e.child,e!==null))for(Od(e,t,n),e=e.sibling;e!==null;)Od(e,t,n),e=e.sibling}function $d(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($d(e,t,n),e=e.sibling;e!==null;)$d(e,t,n),e=e.sibling}var mt=null,En=!1;function jr(e,t,n){for(n=n.child;n!==null;)Uv(e,t,n),n=n.sibling}function Uv(e,t,n){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(rc,n)}catch{}switch(n.tag){case 5:St||ti(n,t);case 6:var r=mt,s=En;mt=null,jr(e,t,n),mt=r,En=s,mt!==null&&(En?(e=mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(En?(e=mt,n=n.stateNode,e.nodeType===8?Zc(e.parentNode,n):e.nodeType===1&&Zc(e,n),Oa(e)):Zc(mt,n.stateNode));break;case 4:r=mt,s=En,mt=n.stateNode.containerInfo,En=!0,jr(e,t,n),mt=r,En=s;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Dd(n,t,a),s=s.next}while(s!==r)}jr(e,t,n);break;case 1:if(!St&&(ti(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ge(n,t,l)}jr(e,t,n);break;case 21:jr(e,t,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,jr(e,t,n),St=r):jr(e,t,n);break;default:jr(e,t,n)}}function Jm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new bS),t.forEach(function(r){var s=AS.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:mt=l.stateNode,En=!1;break e;case 3:mt=l.stateNode.containerInfo,En=!0;break e;case 4:mt=l.stateNode.containerInfo,En=!0;break e}l=l.return}if(mt===null)throw Error(H(160));Uv(i,a,s),mt=null,En=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ge(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vv(t,e),t=t.sibling}function Vv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jn(t,e),Ln(e),r&4){try{ya(3,e,e.return),dc(3,e)}catch(v){Ge(e,e.return,v)}try{ya(5,e,e.return)}catch(v){Ge(e,e.return,v)}}break;case 1:jn(t,e),Ln(e),r&512&&n!==null&&ti(n,n.return);break;case 5:if(jn(t,e),Ln(e),r&512&&n!==null&&ti(n,n.return),e.flags&32){var s=e.stateNode;try{Ia(s,"")}catch(v){Ge(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&cx(s,i),od(l,a);var u=od(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?px(s,h):d==="dangerouslySetInnerHTML"?hx(s,h):d==="children"?Ia(s,h):Kh(s,d,h,u)}switch(l){case"input":nd(s,i);break;case"textarea":ux(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ci(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ci(s,!!i.multiple,i.defaultValue,!0):ci(s,!!i.multiple,i.multiple?[]:"",!1))}s[Va]=i}catch(v){Ge(e,e.return,v)}}break;case 6:if(jn(t,e),Ln(e),r&4){if(e.stateNode===null)throw Error(H(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Ge(e,e.return,v)}}break;case 3:if(jn(t,e),Ln(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oa(t.containerInfo)}catch(v){Ge(e,e.return,v)}break;case 4:jn(t,e),Ln(e);break;case 13:jn(t,e),Ln(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pf=Je())),r&4&&Jm(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(St=(u=St)||d,jn(t,e),St=u):jn(t,e),Ln(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Z=e,d=e.child;d!==null;){for(h=Z=d;Z!==null;){switch(f=Z,p=f.child,f.tag){case 0:case 11:case 14:case 15:ya(4,f,f.return);break;case 1:ti(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Ge(r,n,v)}}break;case 5:ti(f,f.return);break;case 22:if(f.memoizedState!==null){Qm(h);continue}}p!==null?(p.return=f,Z=p):Qm(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=fx("display",a))}catch(v){Ge(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Ge(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:jn(t,e),Ln(e),r&4&&Jm(e);break;case 21:break;default:jn(t,e),Ln(e)}}function Ln(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Fv(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ia(s,""),r.flags&=-33);var i=Xm(e);$d(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Xm(e);Od(e,l,a);break;default:throw Error(H(161))}}catch(c){Ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jS(e,t,n){Z=e,zv(e)}function zv(e,t,n){for(var r=(e.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Oo;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||St;l=Oo;var u=St;if(Oo=a,(St=c)&&!u)for(Z=s;Z!==null;)a=Z,c=a.child,a.tag===22&&a.memoizedState!==null?Zm(s):c!==null?(c.return=a,Z=c):Zm(s);for(;i!==null;)Z=i,zv(i),i=i.sibling;Z=s,Oo=l,St=u}Ym(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):Ym(e)}}function Ym(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:St||dc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!St)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Nn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Lm(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lm(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Oa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}St||t.flags&512&&Ld(t)}catch(f){Ge(t,t.return,f)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Qm(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Zm(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{dc(4,t)}catch(c){Ge(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ge(t,s,c)}}var i=t.return;try{Ld(t)}catch(c){Ge(t,i,c)}break;case 5:var a=t.return;try{Ld(t)}catch(c){Ge(t,a,c)}}}catch(c){Ge(t,t.return,c)}if(t===e){Z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Z=l;break}Z=t.return}}var SS=Math.ceil,Ol=yr.ReactCurrentDispatcher,_f=yr.ReactCurrentOwner,vn=yr.ReactCurrentBatchConfig,Ne=0,ft=null,rt=null,yt=0,Zt=0,ni=es(0),lt=0,Ga=null,Ts=0,hc=0,Ef=0,xa=null,Ut=null,Pf=0,Ni=1/0,nr=null,$l=!1,Md=null,zr=null,$o=!1,Dr=null,Ml=0,va=0,Fd=null,al=-1,ol=0;function Rt(){return Ne&6?Je():al!==-1?al:al=Je()}function Br(e){return e.mode&1?Ne&2&&yt!==0?yt&-yt:oS.transition!==null?(ol===0&&(ol=_x()),ol):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:Rx(e.type)),e):1}function In(e,t,n,r){if(50<va)throw va=0,Fd=null,Error(H(185));oo(e,n,r),(!(Ne&2)||e!==ft)&&(e===ft&&(!(Ne&2)&&(hc|=n),lt===4&&Ar(e,yt)),qt(e,r),n===1&&Ne===0&&!(t.mode&1)&&(Ni=Je()+500,lc&&ts()))}function qt(e,t){var n=e.callbackNode;oj(e,t);var r=bl(e,e===ft?yt:0);if(r===0)n!==null&&lm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lm(n),t===1)e.tag===0?aS(eg.bind(null,e)):Qx(eg.bind(null,e)),nS(function(){!(Ne&6)&&ts()}),n=null;else{switch(Ex(r)){case 1:n=Zh;break;case 4:n=Sx;break;case 16:n=wl;break;case 536870912:n=Nx;break;default:n=wl}n=Jv(n,Bv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bv(e,t){if(al=-1,ol=0,Ne&6)throw Error(H(327));var n=e.callbackNode;if(pi()&&e.callbackNode!==n)return null;var r=bl(e,e===ft?yt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fl(e,r);else{t=r;var s=Ne;Ne|=2;var i=Wv();(ft!==e||yt!==t)&&(nr=null,Ni=Je()+500,js(e,t));do try{ES();break}catch(l){Hv(e,l)}while(!0);ff(),Ol.current=i,Ne=s,rt!==null?t=0:(ft=null,yt=0,t=lt)}if(t!==0){if(t===2&&(s=hd(e),s!==0&&(r=s,t=Ud(e,s))),t===1)throw n=Ga,js(e,0),Ar(e,r),qt(e,Je()),n;if(t===6)Ar(e,r);else{if(s=e.current.alternate,!(r&30)&&!NS(s)&&(t=Fl(e,r),t===2&&(i=hd(e),i!==0&&(r=i,t=Ud(e,i))),t===1))throw n=Ga,js(e,0),Ar(e,r),qt(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(H(345));case 2:fs(e,Ut,nr);break;case 3:if(Ar(e,r),(r&130023424)===r&&(t=Pf+500-Je(),10<t)){if(bl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Rt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=wd(fs.bind(null,e,Ut,nr),t);break}fs(e,Ut,nr);break;case 4:if(Ar(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-An(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SS(r/1960))-r,10<r){e.timeoutHandle=wd(fs.bind(null,e,Ut,nr),r);break}fs(e,Ut,nr);break;case 5:fs(e,Ut,nr);break;default:throw Error(H(329))}}}return qt(e,Je()),e.callbackNode===n?Bv.bind(null,e):null}function Ud(e,t){var n=xa;return e.current.memoizedState.isDehydrated&&(js(e,t).flags|=256),e=Fl(e,t),e!==2&&(t=Ut,Ut=n,t!==null&&Vd(t)),e}function Vd(e){Ut===null?Ut=e:Ut.push.apply(Ut,e)}function NS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Dn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ar(e,t){for(t&=~Ef,t&=~hc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-An(t),r=1<<n;e[n]=-1,t&=~r}}function eg(e){if(Ne&6)throw Error(H(327));pi();var t=bl(e,0);if(!(t&1))return qt(e,Je()),null;var n=Fl(e,t);if(e.tag!==0&&n===2){var r=hd(e);r!==0&&(t=r,n=Ud(e,r))}if(n===1)throw n=Ga,js(e,0),Ar(e,t),qt(e,Je()),n;if(n===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fs(e,Ut,nr),qt(e,Je()),null}function Cf(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(Ni=Je()+500,lc&&ts())}}function As(e){Dr!==null&&Dr.tag===0&&!(Ne&6)&&pi();var t=Ne;Ne|=1;var n=vn.transition,r=Pe;try{if(vn.transition=null,Pe=1,e)return e()}finally{Pe=r,vn.transition=n,Ne=t,!(Ne&6)&&ts()}}function Tf(){Zt=ni.current,Oe(ni)}function js(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tS(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(uf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_l();break;case 3:ji(),Oe(Ht),Oe(Pt),vf();break;case 5:xf(r);break;case 4:ji();break;case 13:Oe(Ve);break;case 19:Oe(Ve);break;case 10:pf(r.type._context);break;case 22:case 23:Tf()}n=n.return}if(ft=e,rt=e=Hr(e.current,null),yt=Zt=t,lt=0,Ga=null,Ef=hc=Ts=0,Ut=xa=null,vs!==null){for(t=0;t<vs.length;t++)if(n=vs[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}vs=null}return e}function Hv(e,t){do{var n=rt;try{if(ff(),rl.current=Ll,Dl){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dl=!1}if(Cs=0,dt=ot=Be=null,ga=!1,Ha=0,_f.current=null,n===null||n.return===null){lt=1,Ga=t,rt=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=yt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Vm(a);if(p!==null){p.flags&=-257,zm(p,a,l,i,t),p.mode&1&&Um(i,u,t),t=p,c=u;var m=t.updateQueue;if(m===null){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}else{if(!(t&1)){Um(i,u,t),Af();break e}c=Error(H(426))}}else if(Fe&&l.mode&1){var w=Vm(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),zm(w,a,l,i,t),df(Si(c,l));break e}}i=c=Si(c,l),lt!==4&&(lt=2),xa===null?xa=[i]:xa.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Ev(i,c,t);Dm(i,y);break e;case 1:l=c;var g=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(zr===null||!zr.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=Pv(i,l,t);Dm(i,N);break e}}i=i.return}while(i!==null)}Gv(n)}catch(E){t=E,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function Wv(){var e=Ol.current;return Ol.current=Ll,e===null?Ll:e}function Af(){(lt===0||lt===3||lt===2)&&(lt=4),ft===null||!(Ts&268435455)&&!(hc&268435455)||Ar(ft,yt)}function Fl(e,t){var n=Ne;Ne|=2;var r=Wv();(ft!==e||yt!==t)&&(nr=null,js(e,t));do try{_S();break}catch(s){Hv(e,s)}while(!0);if(ff(),Ne=n,Ol.current=r,rt!==null)throw Error(H(261));return ft=null,yt=0,lt}function _S(){for(;rt!==null;)qv(rt)}function ES(){for(;rt!==null&&!Q1();)qv(rt)}function qv(e){var t=Xv(e.alternate,e,Zt);e.memoizedProps=e.pendingProps,t===null?Gv(e):rt=t,_f.current=null}function Gv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wS(n,t),n!==null){n.flags&=32767,rt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lt=6,rt=null;return}}else if(n=vS(n,t,Zt),n!==null){rt=n;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);lt===0&&(lt=5)}function fs(e,t,n){var r=Pe,s=vn.transition;try{vn.transition=null,Pe=1,PS(e,t,n,r)}finally{vn.transition=s,Pe=r}return null}function PS(e,t,n,r){do pi();while(Dr!==null);if(Ne&6)throw Error(H(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(lj(e,i),e===ft&&(rt=ft=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$o||($o=!0,Jv(wl,function(){return pi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vn.transition,vn.transition=null;var a=Pe;Pe=1;var l=Ne;Ne|=4,_f.current=null,kS(e,n),Vv(n,e),Kj(xd),kl=!!yd,xd=yd=null,e.current=n,jS(n),Z1(),Ne=l,Pe=a,vn.transition=i}else e.current=n;if($o&&($o=!1,Dr=e,Ml=s),i=e.pendingLanes,i===0&&(zr=null),nj(n.stateNode),qt(e,Je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($l)throw $l=!1,e=Md,Md=null,e;return Ml&1&&e.tag!==0&&pi(),i=e.pendingLanes,i&1?e===Fd?va++:(va=0,Fd=e):va=0,ts(),null}function pi(){if(Dr!==null){var e=Ex(Ml),t=vn.transition,n=Pe;try{if(vn.transition=null,Pe=16>e?16:e,Dr===null)var r=!1;else{if(e=Dr,Dr=null,Ml=0,Ne&6)throw Error(H(331));var s=Ne;for(Ne|=4,Z=e.current;Z!==null;){var i=Z,a=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:ya(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var f=d.sibling,p=d.return;if(Mv(d),d===u){Z=null;break}if(f!==null){f.return=p,Z=f;break}Z=p}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Z=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Z=a;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ya(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Z=y;break e}Z=i.return}}var g=e.current;for(Z=g;Z!==null;){a=Z;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,Z=x;else e:for(a=g;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:dc(9,l)}}catch(E){Ge(l,l.return,E)}if(l===a){Z=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Z=N;break e}Z=l.return}}if(Ne=s,ts(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(rc,e)}catch{}r=!0}return r}finally{Pe=n,vn.transition=t}}return!1}function tg(e,t,n){t=Si(n,t),t=Ev(e,t,1),e=Vr(e,t,1),t=Rt(),e!==null&&(oo(e,1,t),qt(e,t))}function Ge(e,t,n){if(e.tag===3)tg(e,e,n);else for(;t!==null;){if(t.tag===3){tg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zr===null||!zr.has(r))){e=Si(n,e),e=Pv(t,e,1),t=Vr(t,e,1),e=Rt(),t!==null&&(oo(t,1,e),qt(t,e));break}}t=t.return}}function CS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Rt(),e.pingedLanes|=e.suspendedLanes&n,ft===e&&(yt&n)===n&&(lt===4||lt===3&&(yt&130023424)===yt&&500>Je()-Pf?js(e,0):Ef|=n),qt(e,t)}function Kv(e,t){t===0&&(e.mode&1?(t=Eo,Eo<<=1,!(Eo&130023424)&&(Eo=4194304)):t=1);var n=Rt();e=hr(e,t),e!==null&&(oo(e,t,n),qt(e,n))}function TS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Kv(e,n)}function AS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(t),Kv(e,n)}var Xv;Xv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)zt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zt=!1,xS(e,t,n);zt=!!(e.flags&131072)}else zt=!1,Fe&&t.flags&1048576&&Zx(t,Cl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;il(e,t),e=t.pendingProps;var s=wi(t,Pt.current);fi(t,n),s=bf(null,t,r,e,s,n);var i=kf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wt(r)?(i=!0,El(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gf(t),s.updater=uc,t.stateNode=s,s._reactInternals=t,Ed(t,r,e,n),t=Td(null,t,r,!0,i,n)):(t.tag=0,Fe&&i&&cf(t),At(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(il(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=RS(r),e=Nn(r,e),s){case 0:t=Cd(null,t,r,e,n);break e;case 1:t=Wm(null,t,r,e,n);break e;case 11:t=Bm(null,t,r,e,n);break e;case 14:t=Hm(null,t,r,Nn(r.type,e),n);break e}throw Error(H(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nn(r,s),Cd(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nn(r,s),Wm(e,t,r,s,n);case 3:e:{if(Iv(t),e===null)throw Error(H(387));r=t.pendingProps,i=t.memoizedState,s=i.element,iv(e,t),Il(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Si(Error(H(423)),t),t=qm(e,t,r,n,s);break e}else if(r!==s){s=Si(Error(H(424)),t),t=qm(e,t,r,n,s);break e}else for(tn=Ur(t.stateNode.containerInfo.firstChild),rn=t,Fe=!0,Cn=null,n=rv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),r===s){t=fr(e,t,n);break e}At(e,t,r,n)}t=t.child}return t;case 5:return av(t),e===null&&Sd(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,vd(r,s)?a=null:i!==null&&vd(r,i)&&(t.flags|=32),Av(e,t),At(e,t,a,n),t.child;case 6:return e===null&&Sd(t),null;case 13:return Rv(e,t,n);case 4:return yf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ki(t,null,r,n):At(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nn(r,s),Bm(e,t,r,s,n);case 7:return At(e,t,t.pendingProps,n),t.child;case 8:return At(e,t,t.pendingProps.children,n),t.child;case 12:return At(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Re(Tl,r._currentValue),r._currentValue=a,i!==null)if(Dn(i.value,a)){if(i.children===s.children&&!Ht.current){t=fr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=lr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Nd(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Nd(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}At(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,fi(t,n),s=bn(s),r=r(s),t.flags|=1,At(e,t,r,n),t.child;case 14:return r=t.type,s=Nn(r,t.pendingProps),s=Nn(r.type,s),Hm(e,t,r,s,n);case 15:return Cv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nn(r,s),il(e,t),t.tag=1,Wt(r)?(e=!0,El(t)):e=!1,fi(t,n),_v(t,r,s),Ed(t,r,s,n),Td(null,t,r,!0,e,n);case 19:return Dv(e,t,n);case 22:return Tv(e,t,n)}throw Error(H(156,t.tag))};function Jv(e,t){return jx(e,t)}function IS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,t,n,r){return new IS(e,t,n,r)}function If(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RS(e){if(typeof e=="function")return If(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Jh)return 11;if(e===Yh)return 14}return 2}function Hr(e,t){var n=e.alternate;return n===null?(n=xn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ll(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")If(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case qs:return Ss(n.children,s,i,t);case Xh:a=8,s|=8;break;case Yu:return e=xn(12,n,t,s|2),e.elementType=Yu,e.lanes=i,e;case Qu:return e=xn(13,n,t,s),e.elementType=Qu,e.lanes=i,e;case Zu:return e=xn(19,n,t,s),e.elementType=Zu,e.lanes=i,e;case ax:return fc(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sx:a=10;break e;case ix:a=9;break e;case Jh:a=11;break e;case Yh:a=14;break e;case Pr:a=16,r=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=xn(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Ss(e,t,n,r){return e=xn(7,e,r,t),e.lanes=n,e}function fc(e,t,n,r){return e=xn(22,e,r,t),e.elementType=ax,e.lanes=n,e.stateNode={isHidden:!1},e}function ou(e,t,n){return e=xn(6,e,null,t),e.lanes=n,e}function lu(e,t,n){return t=xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function DS(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rf(e,t,n,r,s,i,a,l,c){return e=new DS(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(i),e}function LS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Yv(e){if(!e)return Xr;e=e._reactInternals;e:{if(Rs(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var n=e.type;if(Wt(n))return Yx(e,n,t)}return t}function Qv(e,t,n,r,s,i,a,l,c){return e=Rf(n,r,!0,e,s,i,a,l,c),e.context=Yv(null),n=e.current,r=Rt(),s=Br(n),i=lr(r,s),i.callback=t??null,Vr(n,i,s),e.current.lanes=s,oo(e,s,r),qt(e,r),e}function pc(e,t,n,r){var s=t.current,i=Rt(),a=Br(s);return n=Yv(n),t.context===null?t.context=n:t.pendingContext=n,t=lr(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vr(s,t,a),e!==null&&(In(e,s,a,i),nl(e,s,a)),a}function Ul(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ng(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Df(e,t){ng(e,t),(e=e.alternate)&&ng(e,t)}function OS(){return null}var Zv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lf(e){this._internalRoot=e}mc.prototype.render=Lf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));pc(e,t,null,null)};mc.prototype.unmount=Lf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;As(function(){pc(null,e,null,null)}),t[dr]=null}};function mc(e){this._internalRoot=e}mc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tr.length&&t!==0&&t<Tr[n].priority;n++);Tr.splice(n,0,e),n===0&&Ix(e)}};function Of(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rg(){}function $S(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ul(a);i.call(u)}}var a=Qv(t,r,e,0,null,!1,!1,"",rg);return e._reactRootContainer=a,e[dr]=a.current,Fa(e.nodeType===8?e.parentNode:e),As(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ul(c);l.call(u)}}var c=Rf(e,0,!1,null,null,!1,!1,"",rg);return e._reactRootContainer=c,e[dr]=c.current,Fa(e.nodeType===8?e.parentNode:e),As(function(){pc(t,c,n,r)}),c}function yc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Ul(a);l.call(c)}}pc(t,a,e,s)}else a=$S(n,t,e,s,r);return Ul(a)}Px=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=oa(t.pendingLanes);n!==0&&(ef(t,n|1),qt(t,Je()),!(Ne&6)&&(Ni=Je()+500,ts()))}break;case 13:As(function(){var r=hr(e,1);if(r!==null){var s=Rt();In(r,e,1,s)}}),Df(e,1)}};tf=function(e){if(e.tag===13){var t=hr(e,134217728);if(t!==null){var n=Rt();In(t,e,134217728,n)}Df(e,134217728)}};Cx=function(e){if(e.tag===13){var t=Br(e),n=hr(e,t);if(n!==null){var r=Rt();In(n,e,t,r)}Df(e,t)}};Tx=function(){return Pe};Ax=function(e,t){var n=Pe;try{return Pe=e,t()}finally{Pe=n}};cd=function(e,t,n){switch(t){case"input":if(nd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=oc(r);if(!s)throw Error(H(90));lx(r),nd(r,s)}}}break;case"textarea":ux(e,n);break;case"select":t=n.value,t!=null&&ci(e,!!n.multiple,t,!1)}};yx=Cf;xx=As;var MS={usingClientEntryPoint:!1,Events:[co,Js,oc,mx,gx,Cf]},Qi={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FS={bundleType:Qi.bundleType,version:Qi.version,rendererPackageName:Qi.rendererPackageName,rendererConfig:Qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bx(e),e===null?null:e.stateNode},findFiberByHostInstance:Qi.findFiberByHostInstance||OS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mo.isDisabled&&Mo.supportsFiber)try{rc=Mo.inject(FS),Bn=Mo}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MS;an.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Of(t))throw Error(H(200));return LS(e,t,null,n)};an.createRoot=function(e,t){if(!Of(e))throw Error(H(299));var n=!1,r="",s=Zv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Rf(e,1,!1,null,null,n,!1,r,s),e[dr]=t.current,Fa(e.nodeType===8?e.parentNode:e),new Lf(t)};an.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=bx(t),e=e===null?null:e.stateNode,e};an.flushSync=function(e){return As(e)};an.hydrate=function(e,t,n){if(!gc(t))throw Error(H(200));return yc(null,e,t,!0,n)};an.hydrateRoot=function(e,t,n){if(!Of(e))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Zv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Qv(t,null,e,1,n??null,s,!1,i,a),e[dr]=t.current,Fa(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new mc(t)};an.render=function(e,t,n){if(!gc(t))throw Error(H(200));return yc(null,e,t,!1,n)};an.unmountComponentAtNode=function(e){if(!gc(e))throw Error(H(40));return e._reactRootContainer?(As(function(){yc(null,null,e,!1,function(){e._reactRootContainer=null,e[dr]=null})}),!0):!1};an.unstable_batchedUpdates=Cf;an.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!gc(n))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return yc(e,t,n,!1,r)};an.version="18.3.1-next-f1338f8080-20240426";function ew(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ew)}catch(e){console.error(e)}}ew(),ex.exports=an;var US=ex.exports,sg=US;Xu.createRoot=sg.createRoot,Xu.hydrateRoot=sg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka.apply(this,arguments)}var Lr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Lr||(Lr={}));const ig="popstate";function VS(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return zd("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vl(s)}return BS(t,n,null,e)}function He(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zS(){return Math.random().toString(36).substr(2,8)}function ag(e,t){return{usr:e.state,key:e.key,idx:t}}function zd(e,t,n,r){return n===void 0&&(n=null),Ka({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Di(t):t,{state:n,key:t&&t.key||r||zS()})}function Vl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Di(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function BS(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=Lr.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Ka({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Lr.Pop;let w=d(),y=w==null?null:w-u;u=w,c&&c({action:l,location:v.location,delta:y})}function f(w,y){l=Lr.Push;let g=zd(v.location,w,y);u=d()+1;let x=ag(g,u),N=v.createHref(g);try{a.pushState(x,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(N)}i&&c&&c({action:l,location:v.location,delta:1})}function p(w,y){l=Lr.Replace;let g=zd(v.location,w,y);u=d();let x=ag(g,u),N=v.createHref(g);a.replaceState(x,"",N),i&&c&&c({action:l,location:v.location,delta:0})}function m(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof w=="string"?w:Vl(w);return g=g.replace(/ $/,"%20"),He(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let v={get action(){return l},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ig,h),c=w,()=>{s.removeEventListener(ig,h),c=null}},createHref(w){return t(s,w)},createURL:m,encodeLocation(w){let y=m(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(w){return a.go(w)}};return v}var og;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(og||(og={}));function HS(e,t,n){return n===void 0&&(n="/"),WS(e,t,n)}function WS(e,t,n,r){let s=typeof t=="string"?Di(t):t,i=_i(s.pathname||"/",n);if(i==null)return null;let a=nw(e);qS(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=r2(i);l=t2(a[c],u)}return l}function nw(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(He(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Wr([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(He(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),nw(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:ZS(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of rw(i.path))s(i,a,c)}),t}function rw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=rw(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function qS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:e2(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GS=/^:[\w-]+$/,KS=3,XS=2,JS=1,YS=10,QS=-2,lg=e=>e==="*";function ZS(e,t){let n=e.split("/"),r=n.length;return n.some(lg)&&(r+=QS),t&&(r+=XS),n.filter(s=>!lg(s)).reduce((s,i)=>s+(GS.test(i)?KS:i===""?JS:YS),r)}function e2(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function t2(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Bd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Wr([i,h.pathname]),pathnameBase:o2(Wr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Wr([i,h.pathnameBase]))}return a}function Bd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=n2(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let v=l[h]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[h];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function n2(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),tw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function r2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return tw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _i(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function s2(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Di(e):e;return{pathname:n?n.startsWith("/")?n:i2(n,t):t,search:l2(r),hash:c2(s)}}function i2(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cu(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a2(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function $f(e,t){let n=a2(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Mf(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Di(e):(s=Ka({},e),He(!s.pathname||!s.pathname.includes("?"),cu("?","pathname","search",s)),He(!s.pathname||!s.pathname.includes("#"),cu("#","pathname","hash",s)),He(!s.search||!s.search.includes("#"),cu("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=s2(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Wr=e=>e.join("/").replace(/\/\/+/g,"/"),o2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),l2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,c2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function u2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const sw=["post","put","patch","delete"];new Set(sw);const d2=["get",...sw];new Set(d2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}const xc=k.createContext(null),iw=k.createContext(null),xr=k.createContext(null),vc=k.createContext(null),Xn=k.createContext({outlet:null,matches:[],isDataRoute:!1}),aw=k.createContext(null);function h2(e,t){let{relative:n}=t===void 0?{}:t;Li()||He(!1);let{basename:r,navigator:s}=k.useContext(xr),{hash:i,pathname:a,search:l}=wc(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Wr([r,a])),s.createHref({pathname:c,search:l,hash:i})}function Li(){return k.useContext(vc)!=null}function Jn(){return Li()||He(!1),k.useContext(vc).location}function ow(e){k.useContext(xr).static||k.useLayoutEffect(e)}function Oi(){let{isDataRoute:e}=k.useContext(Xn);return e?E2():f2()}function f2(){Li()||He(!1);let e=k.useContext(xc),{basename:t,future:n,navigator:r}=k.useContext(xr),{matches:s}=k.useContext(Xn),{pathname:i}=Jn(),a=JSON.stringify($f(s,n.v7_relativeSplatPath)),l=k.useRef(!1);return ow(()=>{l.current=!0}),k.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=Mf(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Wr([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,a,i,e])}const p2=k.createContext(null);function m2(e){let t=k.useContext(Xn).outlet;return t&&k.createElement(p2.Provider,{value:e},t)}function Ff(){let{matches:e}=k.useContext(Xn),t=e[e.length-1];return t?t.params:{}}function wc(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=k.useContext(xr),{matches:s}=k.useContext(Xn),{pathname:i}=Jn(),a=JSON.stringify($f(s,r.v7_relativeSplatPath));return k.useMemo(()=>Mf(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function g2(e,t){return y2(e,t)}function y2(e,t,n,r){Li()||He(!1);let{navigator:s}=k.useContext(xr),{matches:i}=k.useContext(Xn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Jn(),d;if(t){var h;let w=typeof t=="string"?Di(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||He(!1),d=w}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=HS(e,{pathname:p}),v=k2(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Wr([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Wr([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return t&&v?k.createElement(vc.Provider,{value:{location:Xa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Lr.Pop}},v):v}function x2(){let e=_2(),t=u2(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:s},n):null,null)}const v2=k.createElement(x2,null);class w2 extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?k.createElement(Xn.Provider,{value:this.props.routeContext},k.createElement(aw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b2(e){let{routeContext:t,match:n,children:r}=e,s=k.useContext(xc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Xn.Provider,{value:t},r)}function k2(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||He(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let p,m=!1,v=null,w=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||v2,c&&(u<0&&f===0?(P2("route-fallback"),m=!0,w=null):u===f&&(m=!0,w=h.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,f+1)),g=()=>{let x;return p?x=v:m?x=w:h.route.Component?x=k.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,k.createElement(b2,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(w2,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var lw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(lw||{}),cw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(cw||{});function j2(e){let t=k.useContext(xc);return t||He(!1),t}function S2(e){let t=k.useContext(iw);return t||He(!1),t}function N2(e){let t=k.useContext(Xn);return t||He(!1),t}function uw(e){let t=N2(),n=t.matches[t.matches.length-1];return n.route.id||He(!1),n.route.id}function _2(){var e;let t=k.useContext(aw),n=S2(),r=uw();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function E2(){let{router:e}=j2(lw.UseNavigateStable),t=uw(cw.UseNavigateStable),n=k.useRef(!1);return ow(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Xa({fromRouteId:t},i)))},[e,t])}const cg={};function P2(e,t,n){cg[e]||(cg[e]=!0)}function C2(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function T2(e){let{to:t,replace:n,state:r,relative:s}=e;Li()||He(!1);let{future:i,static:a}=k.useContext(xr),{matches:l}=k.useContext(Xn),{pathname:c}=Jn(),u=Oi(),d=Mf(t,$f(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return k.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function A2(e){return m2(e.context)}function Tt(e){He(!1)}function I2(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Lr.Pop,navigator:i,static:a=!1,future:l}=e;Li()&&He(!1);let c=t.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:c,navigator:i,static:a,future:Xa({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=Di(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=r,v=k.useMemo(()=>{let w=_i(d,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:m},navigationType:s}},[c,d,h,f,p,m,s]);return v==null?null:k.createElement(xr.Provider,{value:u},k.createElement(vc.Provider,{children:n,value:v}))}function R2(e){let{children:t,location:n}=e;return g2(Hd(t),n)}new Promise(()=>{});function Hd(e,t){t===void 0&&(t=[]);let n=[];return k.Children.forEach(e,(r,s)=>{if(!k.isValidElement(r))return;let i=[...t,s];if(r.type===k.Fragment){n.push.apply(n,Hd(r.props.children,i));return}r.type!==Tt&&He(!1),!r.props.index||!r.props.children||He(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Hd(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zl.apply(this,arguments)}function dw(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function D2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function L2(e,t){return e.button===0&&(!t||t==="_self")&&!D2(e)}const O2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],M2="6";try{window.__reactRouterVersion=M2}catch{}const F2=k.createContext({isTransitioning:!1}),U2="startTransition",ug=C1[U2];function V2(e){let{basename:t,children:n,future:r,window:s}=e,i=k.useRef();i.current==null&&(i.current=VS({window:s,v5Compat:!0}));let a=i.current,[l,c]=k.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=k.useCallback(h=>{u&&ug?ug(()=>c(h)):c(h)},[c,u]);return k.useLayoutEffect(()=>a.listen(d),[a,d]),k.useEffect(()=>C2(r),[r]),k.createElement(I2,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const z2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cr=k.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=dw(t,O2),{basename:p}=k.useContext(xr),m,v=!1;if(typeof u=="string"&&B2.test(u)&&(m=u,z2))try{let x=new URL(window.location.href),N=u.startsWith("//")?new URL(x.protocol+u):new URL(u),E=_i(N.pathname,p);N.origin===x.origin&&E!=null?u=E+N.search+N.hash:v=!0}catch{}let w=h2(u,{relative:s}),y=q2(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function g(x){r&&r(x),x.defaultPrevented||y(x)}return k.createElement("a",zl({},f,{href:m||w,onClick:v||i?r:g,ref:n,target:c}))}),H2=k.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=t,h=dw(t,$2),f=wc(c,{relative:h.relative}),p=Jn(),m=k.useContext(iw),{navigator:v,basename:w}=k.useContext(xr),y=m!=null&&G2(f)&&u===!0,g=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,x=p.pathname,N=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(x=x.toLowerCase(),N=N?N.toLowerCase():null,g=g.toLowerCase()),N&&w&&(N=_i(N,w)||N);const E=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let S=x===g||!a&&x.startsWith(g)&&x.charAt(E)==="/",P=N!=null&&(N===g||!a&&N.startsWith(g)&&N.charAt(g.length)==="/"),T={isActive:S,isPending:P,isTransitioning:y},$=S?r:void 0,O;typeof i=="function"?O=i(T):O=[i,S?"active":null,P?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(T):l;return k.createElement(cr,zl({},h,{"aria-current":$,className:O,ref:n,style:V,to:c,viewTransition:u}),typeof d=="function"?d(T):d)});var Wd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Wd||(Wd={}));var dg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dg||(dg={}));function W2(e){let t=k.useContext(xc);return t||He(!1),t}function q2(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=Oi(),u=Jn(),d=wc(e,{relative:a});return k.useCallback(h=>{if(L2(h,n)){h.preventDefault();let f=r!==void 0?r:Vl(u)===Vl(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,i,a,l])}function G2(e,t){t===void 0&&(t={});let n=k.useContext(F2);n==null&&He(!1);let{basename:r}=W2(Wd.useViewTransitionState),s=wc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=_i(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=_i(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Bd(s.pathname,a)!=null||Bd(s.pathname,i)!=null}function K2(e,t={}){const n=k.useRef(null),r=k.useRef(null),s=k.useRef(0),i=t.maxReconnectAttempts||10,a=t.reconnectDelay||3e3,l=()=>{try{n.current=new WebSocket(e),n.current.onopen=c=>{console.log("WebSocket connected"),s.current=0,t.onOpen&&t.onOpen(c)},n.current.onmessage=c=>{t.onMessage&&t.onMessage(c)},n.current.onerror=c=>{console.error("WebSocket error:",c),t.onError&&t.onError(c)},n.current.onclose=c=>{console.log("WebSocket closed"),t.onClose&&t.onClose(c),s.current<i&&(s.current++,console.log(`Reconnecting... (attempt ${s.current}/${i})`),r.current=setTimeout(()=>{l()},a))}}catch(c){console.error("Failed to create WebSocket:",c)}};return k.useEffect(()=>(l(),()=>{r.current&&clearTimeout(r.current),n.current&&n.current.close()}),[e]),n.current}function hw(e,t){const[n,r]=k.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return k.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch(i){console.error(`Error saving to localStorage key "${e}":`,i)}},[e,n]),[n,i=>{try{const a=i instanceof Function?i(n):i;r(a)}catch(a){console.error(`Error setting localStorage key "${e}":`,a)}}]}function X2(){const[e,t]=hw("leo-dashboard-preferences",{theme:"light",sidebarCollapsed:!1,refreshInterval:3e4,notifications:!0,compactView:!1});return{preferences:e,updatePreference:(r,s)=>{t(i=>({...i,[r]:s}))}}}function uu(e,t){const[n,r]=hw(`leo-dashboard-${e}`,t);return[n,r,()=>{window.localStorage.removeItem(`leo-dashboard-${e}`),r(t)}]}const Uf=k.createContext({});function Vf(e){const t=k.useRef(null);return t.current===null&&(t.current=e()),t.current}const zf=typeof window<"u",fw=zf?k.useLayoutEffect:k.useEffect,bc=k.createContext(null);function Bf(e,t){e.indexOf(t)===-1&&e.push(t)}function Hf(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const pr=(e,t,n)=>n>t?t:n<e?e:n;let Wf=()=>{};const mr={},pw=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function mw(e){return typeof e=="object"&&e!==null}const gw=e=>/^0[^.\s]+$/u.test(e);function qf(e){let t;return()=>(t===void 0&&(t=e()),t)}const wn=e=>e,J2=(e,t)=>n=>t(e(n)),ho=(...e)=>e.reduce(J2),Ja=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Gf{constructor(){this.subscriptions=[]}add(t){return Bf(this.subscriptions,t),()=>Hf(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wn=e=>e*1e3,qn=e=>e/1e3;function yw(e,t){return t?e*(1e3/t):0}const xw=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Y2=1e-7,Q2=12;function Z2(e,t,n,r,s){let i,a,l=0;do a=t+(n-t)/2,i=xw(a,r,s)-e,i>0?n=a:t=a;while(Math.abs(i)>Y2&&++l<Q2);return a}function fo(e,t,n,r){if(e===t&&n===r)return wn;const s=i=>Z2(i,0,1,e,n);return i=>i===0||i===1?i:xw(s(i),t,r)}const vw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ww=e=>t=>1-e(1-t),bw=fo(.33,1.53,.69,.99),Kf=ww(bw),kw=vw(Kf),jw=e=>(e*=2)<1?.5*Kf(e):.5*(2-Math.pow(2,-10*(e-1))),Xf=e=>1-Math.sin(Math.acos(e)),Sw=ww(Xf),Nw=vw(Xf),eN=fo(.42,0,1,1),tN=fo(0,0,.58,1),_w=fo(.42,0,.58,1),nN=e=>Array.isArray(e)&&typeof e[0]!="number",Ew=e=>Array.isArray(e)&&typeof e[0]=="number",rN={linear:wn,easeIn:eN,easeInOut:_w,easeOut:tN,circIn:Xf,circInOut:Nw,circOut:Sw,backIn:Kf,backInOut:kw,backOut:bw,anticipate:jw},sN=e=>typeof e=="string",hg=e=>{if(Ew(e)){Wf(e.length===4);const[t,n,r,s]=e;return fo(t,n,r,s)}else if(sN(e))return rN[e];return e},Fo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function iN(e,t){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){a.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,h=!1,f=!1)=>{const m=f&&s?n:r;return h&&a.add(d),m.has(d)||m.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(l=d,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const aN=40;function Pw(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=Fo.reduce((x,N)=>(x[N]=iN(i),x),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:p,postRender:m}=a,v=()=>{const x=mr.useManualTiming?s.timestamp:performance.now();n=!1,mr.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(x-s.timestamp,aN),1)),s.timestamp=x,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),p.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(v))},w=()=>{n=!0,r=!0,s.isProcessing||e(v)};return{schedule:Fo.reduce((x,N)=>{const E=a[N];return x[N]=(S,P=!1,T=!1)=>(n||w(),E.schedule(S,P,T)),x},{}),cancel:x=>{for(let N=0;N<Fo.length;N++)a[Fo[N]].cancel(x)},state:s,steps:a}}const{schedule:Ue,cancel:Jr,state:gt,steps:du}=Pw(typeof requestAnimationFrame<"u"?requestAnimationFrame:wn,!0);let cl;function oN(){cl=void 0}const Bt={now:()=>(cl===void 0&&Bt.set(gt.isProcessing||mr.useManualTiming?gt.timestamp:performance.now()),cl),set:e=>{cl=e,queueMicrotask(oN)}},Cw=e=>t=>typeof t=="string"&&t.startsWith(e),Jf=Cw("--"),lN=Cw("var(--"),Yf=e=>lN(e)?cN.test(e.split("/*")[0].trim()):!1,cN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$i={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ya={...$i,transform:e=>pr(0,1,e)},Uo={...$i,default:1},wa=e=>Math.round(e*1e5)/1e5,Qf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uN(e){return e==null}const dN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zf=(e,t)=>n=>!!(typeof n=="string"&&dN.test(n)&&n.startsWith(e)||t&&!uN(n)&&Object.prototype.hasOwnProperty.call(n,t)),Tw=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,l]=r.match(Qf);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},hN=e=>pr(0,255,e),hu={...$i,transform:e=>Math.round(hN(e))},bs={test:Zf("rgb","red"),parse:Tw("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+hu.transform(e)+", "+hu.transform(t)+", "+hu.transform(n)+", "+wa(Ya.transform(r))+")"};function fN(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const qd={test:Zf("#"),parse:fN,transform:bs.transform},po=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),_r=po("deg"),Gn=po("%"),ue=po("px"),pN=po("vh"),mN=po("vw"),fg={...Gn,parse:e=>Gn.parse(e)/100,transform:e=>Gn.transform(e*100)},ri={test:Zf("hsl","hue"),parse:Tw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gn.transform(wa(t))+", "+Gn.transform(wa(n))+", "+wa(Ya.transform(r))+")"},nt={test:e=>bs.test(e)||qd.test(e)||ri.test(e),parse:e=>bs.test(e)?bs.parse(e):ri.test(e)?ri.parse(e):qd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?bs.transform(e):ri.transform(e),getAnimatableNone:e=>{const t=nt.parse(e);return t.alpha=0,nt.transform(t)}},gN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function yN(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Qf))==null?void 0:t.length)||0)+(((n=e.match(gN))==null?void 0:n.length)||0)>0}const Aw="number",Iw="color",xN="var",vN="var(",pg="${}",wN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qa(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(wN,c=>(nt.test(c)?(r.color.push(i),s.push(Iw),n.push(nt.parse(c))):c.startsWith(vN)?(r.var.push(i),s.push(xN),n.push(c)):(r.number.push(i),s.push(Aw),n.push(parseFloat(c))),++i,pg)).split(pg);return{values:n,split:l,indexes:r,types:s}}function Rw(e){return Qa(e).values}function Dw(e){const{split:t,types:n}=Qa(e),r=t.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],s[a]!==void 0){const l=n[a];l===Aw?i+=wa(s[a]):l===Iw?i+=nt.transform(s[a]):i+=s[a]}return i}}const bN=e=>typeof e=="number"?0:nt.test(e)?nt.getAnimatableNone(e):e;function kN(e){const t=Rw(e);return Dw(e)(t.map(bN))}const Yr={test:yN,parse:Rw,createTransformer:Dw,getAnimatableNone:kN};function fu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function jN({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=fu(c,l,e+1/3),i=fu(c,l,e),a=fu(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Bl(e,t){return n=>n>0?t:e}const ze=(e,t,n)=>e+(t-e)*n,pu=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},SN=[qd,bs,ri],NN=e=>SN.find(t=>t.test(e));function mg(e){const t=NN(e);if(!t)return!1;let n=t.parse(e);return t===ri&&(n=jN(n)),n}const gg=(e,t)=>{const n=mg(e),r=mg(t);if(!n||!r)return Bl(e,t);const s={...n};return i=>(s.red=pu(n.red,r.red,i),s.green=pu(n.green,r.green,i),s.blue=pu(n.blue,r.blue,i),s.alpha=ze(n.alpha,r.alpha,i),bs.transform(s))},Gd=new Set(["none","hidden"]);function _N(e,t){return Gd.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function EN(e,t){return n=>ze(e,t,n)}function ep(e){return typeof e=="number"?EN:typeof e=="string"?Yf(e)?Bl:nt.test(e)?gg:TN:Array.isArray(e)?Lw:typeof e=="object"?nt.test(e)?gg:PN:Bl}function Lw(e,t){const n=[...e],r=n.length,s=e.map((i,a)=>ep(i)(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function PN(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=ep(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function CN(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][r[i]],l=e.values[a]??0;n[s]=l,r[i]++}return n}const TN=(e,t)=>{const n=Yr.createTransformer(t),r=Qa(e),s=Qa(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Gd.has(e)&&!s.values.length||Gd.has(t)&&!r.values.length?_N(e,t):ho(Lw(CN(r,s),s.values),n):Bl(e,t)};function Ow(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ze(e,t,n):ep(e)(e,t)}const AN=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Ue.update(t,n),stop:()=>Jr(t),now:()=>gt.isProcessing?gt.timestamp:Bt.now()}},$w=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Hl=2e4;function tp(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Hl;)t+=n,r=e.next(t);return t>=Hl?1/0:t}function IN(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(tp(r),Hl);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:qn(s)}}const RN=5;function Mw(e,t,n){const r=Math.max(t-RN,0);return yw(n-e(r),t-r)}const qe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mu=.001;function DN({duration:e=qe.duration,bounce:t=qe.bounce,velocity:n=qe.velocity,mass:r=qe.mass}){let s,i,a=1-t;a=pr(qe.minDamping,qe.maxDamping,a),e=pr(qe.minDuration,qe.maxDuration,qn(e)),a<1?(s=u=>{const d=u*a,h=d*e,f=d-n,p=Kd(u,a),m=Math.exp(-h);return mu-f/p*m},i=u=>{const h=u*a*e,f=h*n+n,p=Math.pow(a,2)*Math.pow(u,2)*e,m=Math.exp(-h),v=Kd(Math.pow(u,2),a);return(-s(u)+mu>0?-1:1)*((f-p)*m)/v}):(s=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-mu+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=ON(s,i,l);if(e=Wn(e),isNaN(c))return{stiffness:qe.stiffness,damping:qe.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const LN=12;function ON(e,t,n){let r=n;for(let s=1;s<LN;s++)r=r-e(r)/t(r);return r}function Kd(e,t){return e*Math.sqrt(1-t*t)}const $N=["duration","bounce"],MN=["stiffness","damping","mass"];function yg(e,t){return t.some(n=>e[n]!==void 0)}function FN(e){let t={velocity:qe.velocity,stiffness:qe.stiffness,damping:qe.damping,mass:qe.mass,isResolvedFromDuration:!1,...e};if(!yg(e,MN)&&yg(e,$N))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*pr(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:qe.mass,stiffness:s,damping:i}}else{const n=DN(e);t={...t,...n,mass:qe.mass},t.isResolvedFromDuration=!0}return t}function Wl(e=qe.visualDuration,t=qe.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=FN({...n,velocity:-qn(n.velocity||0)}),m=f||0,v=u/(2*Math.sqrt(c*d)),w=a-i,y=qn(Math.sqrt(c/d)),g=Math.abs(w)<5;r||(r=g?qe.restSpeed.granular:qe.restSpeed.default),s||(s=g?qe.restDelta.granular:qe.restDelta.default);let x;if(v<1){const E=Kd(y,v);x=S=>{const P=Math.exp(-v*y*S);return a-P*((m+v*y*w)/E*Math.sin(E*S)+w*Math.cos(E*S))}}else if(v===1)x=E=>a-Math.exp(-y*E)*(w+(m+y*w)*E);else{const E=y*Math.sqrt(v*v-1);x=S=>{const P=Math.exp(-v*y*S),T=Math.min(E*S,300);return a-P*((m+v*y*w)*Math.sinh(T)+E*w*Math.cosh(T))/E}}const N={calculatedDuration:p&&h||null,next:E=>{const S=x(E);if(p)l.done=E>=h;else{let P=E===0?m:0;v<1&&(P=E===0?Wn(m):Mw(x,E,S));const T=Math.abs(P)<=r,$=Math.abs(a-S)<=s;l.done=T&&$}return l.value=l.done?a:S,l},toString:()=>{const E=Math.min(tp(N),Hl),S=$w(P=>N.next(E*P).value,E,30);return E+"ms "+S},toTransition:()=>{}};return N}Wl.applyToOptions=e=>{const t=IN(e,100,Wl);return e.ease=t.ease,e.duration=Wn(t.duration),e.type="keyframes",e};function Xd({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},p=T=>l!==void 0&&T<l||c!==void 0&&T>c,m=T=>l===void 0?c:c===void 0||Math.abs(l-T)<Math.abs(c-T)?l:c;let v=n*t;const w=h+v,y=a===void 0?w:a(w);y!==w&&(v=y-h);const g=T=>-v*Math.exp(-T/r),x=T=>y+g(T),N=T=>{const $=g(T),O=x(T);f.done=Math.abs($)<=u,f.value=f.done?y:O};let E,S;const P=T=>{p(f.value)&&(E=T,S=Wl({keyframes:[f.value,m(f.value)],velocity:Mw(x,T,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:T=>{let $=!1;return!S&&E===void 0&&($=!0,N(T),P(T)),E!==void 0&&T>=E?S.next(T-E):(!$&&N(T),f)}}}function UN(e,t,n){const r=[],s=n||mr.mix||Ow,i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||wn:t;l=ho(c,l)}r.push(l)}return r}function VN(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Wf(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=UN(t,r,s),c=l.length,u=d=>{if(a&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=Ja(e[h],e[h+1],d);return l[h](f)};return n?d=>u(pr(e[0],e[i-1],d)):u}function zN(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Ja(0,t,r);e.push(ze(n,1,s))}}function BN(e){const t=[0];return zN(t,e.length-1),t}function HN(e,t){return e.map(n=>n*t)}function WN(e,t){return e.map(()=>t||_w).splice(0,e.length-1)}function ba({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=nN(r)?r.map(hg):hg(r),i={done:!1,value:t[0]},a=HN(n&&n.length===t.length?n:BN(t),e),l=VN(a,t,{ease:Array.isArray(s)?s:WN(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const qN=e=>e!==null;function np(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(qN),l=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const GN={decay:Xd,inertia:Xd,tween:ba,keyframes:ba,spring:Wl};function Fw(e){typeof e.type=="string"&&(e.type=GN[e.type])}class rp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const KN=e=>e/100;class sp extends rp{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Bt.now()&&this.tick(Bt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Fw(t);const{type:n=ba,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=t;let{keyframes:l}=t;const c=n||ba;c!==ba&&typeof l[0]!="number"&&(this.mixKeyframes=ho(KN,Ow(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=tp(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:m,onUpdate:v,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let x=this.currentTime,N=r;if(h){const T=Math.min(this.currentTime,s)/l;let $=Math.floor(T),O=T%1;!O&&T>=1&&(O=1),O===1&&$--,$=Math.min($,h+1),!!($%2)&&(f==="reverse"?(O=1-O,p&&(O-=p/l)):f==="mirror"&&(N=a)),x=pr(0,1,O)*l}const E=g?{done:!1,value:d[0]}:N.next(x);i&&(E.value=i(E.value));let{done:S}=E;!g&&c!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return P&&m!==Xd&&(E.value=np(d,this.options,w,this.speed)),v&&v(E.value),P&&this.finish(),E}then(t,n){return this.finished.then(t,n)}get duration(){return qn(this.calculatedDuration)}get time(){return qn(this.currentTime)}set time(t){var n;t=Wn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Bt.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=qn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=AN,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function XN(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const ks=e=>e*180/Math.PI,Jd=e=>{const t=ks(Math.atan2(e[1],e[0]));return Yd(t)},JN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Jd,rotateZ:Jd,skewX:e=>ks(Math.atan(e[1])),skewY:e=>ks(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Yd=e=>(e=e%360,e<0&&(e+=360),e),xg=Jd,vg=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),wg=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),YN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vg,scaleY:wg,scale:e=>(vg(e)+wg(e))/2,rotateX:e=>Yd(ks(Math.atan2(e[6],e[5]))),rotateY:e=>Yd(ks(Math.atan2(-e[2],e[0]))),rotateZ:xg,rotate:xg,skewX:e=>ks(Math.atan(e[4])),skewY:e=>ks(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Qd(e){return e.includes("scale")?1:0}function Zd(e,t){if(!e||e==="none")return Qd(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=YN,s=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=JN,s=l}if(!s)return Qd(t);const i=r[t],a=s[1].split(",").map(ZN);return typeof i=="function"?i(a):a[i]}const QN=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Zd(n,t)};function ZN(e){return parseFloat(e.trim())}const Mi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fi=new Set(Mi),bg=e=>e===$i||e===ue,e_=new Set(["x","y","z"]),t_=Mi.filter(e=>!e_.has(e));function n_(e){const t=[];return t_.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ns={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Zd(t,"x"),y:(e,{transform:t})=>Zd(t,"y")};Ns.translateX=Ns.x;Ns.translateY=Ns.y;const _s=new Set;let eh=!1,th=!1,nh=!1;function Uw(){if(th){const e=Array.from(_s).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=n_(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var l;(l=r.getValue(i))==null||l.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}th=!1,eh=!1,_s.forEach(e=>e.complete(nh)),_s.clear()}function Vw(){_s.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(th=!0)})}function r_(){nh=!0,Vw(),Uw(),nh=!1}class ip{constructor(t,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(_s.add(this),eh||(eh=!0,Ue.read(Vw),Ue.resolveKeyframes(Uw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),s&&i===void 0&&s.set(t[0])}XN(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),_s.delete(this)}cancel(){this.state==="scheduled"&&(_s.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const s_=e=>e.startsWith("--");function i_(e,t,n){s_(t)?e.style.setProperty(t,n):e.style[t]=n}const a_=qf(()=>window.ScrollTimeline!==void 0),o_={};function l_(e,t){const n=qf(e);return()=>o_[t]??n()}const zw=l_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ca=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,kg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ca([0,.65,.55,1]),circOut:ca([.55,0,1,.45]),backIn:ca([.31,.01,.66,-.59]),backOut:ca([.33,1.53,.69,.99])};function Bw(e,t){if(e)return typeof e=="function"?zw()?$w(e,t):"ease-out":Ew(e)?ca(e):Array.isArray(e)?e.map(n=>Bw(n,t)||kg.easeOut):kg[e]}function c_(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const h=Bw(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(d,f)}function Hw(e){return typeof e=="function"&&"applyToOptions"in e}function u_({type:e,...t}){return Hw(e)&&zw()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class d_ extends rp{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,Wf(typeof t.type!="string");const u=u_(t);this.animation=c_(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=np(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):i_(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return qn(Number(t))}get time(){return qn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Wn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&a_()?(this.animation.timeline=t,wn):n(this)}}const Ww={anticipate:jw,backInOut:kw,circInOut:Nw};function h_(e){return e in Ww}function f_(e){typeof e.ease=="string"&&h_(e.ease)&&(e.ease=Ww[e.ease])}const jg=10;class p_ extends d_{constructor(t){f_(t),Fw(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new sp({...a,autoplay:!1}),c=Wn(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-jg).value,l.sample(c).value,jg),l.stop()}}const Sg=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Yr.test(e)||e==="0")&&!e.startsWith("url("));function m_(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function g_(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=Sg(s,t),l=Sg(i,t);return!a||!l?!1:m_(e)||(n==="spring"||Hw(n))&&r}function rh(e){e.duration=0,e.type}const y_=new Set(["opacity","clipPath","filter","transform"]),x_=qf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v_(e){var d;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return x_()&&n&&y_.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const w_=40;class b_ extends rp{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var m;super(),this.stop=()=>{var v,w;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Bt.now();const f={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:c,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||ip;this.keyframeResolver=new p(l,(v,w,y)=>this.onKeyframesResolved(v,w,f,!y),c,u,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Bt.now(),g_(t,i,a,l)||((mr.instantAnimations||!c)&&(d==null||d(np(t,r,n))),t[0]=t[t.length-1],rh(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>w_?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!u&&v_(f)?new p_({...f,element:f.motionValue.owner.current}):new sp(f);p.finished.then(()=>this.notifyFinished()).catch(wn),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),r_()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const k_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function j_(e){const t=k_.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function qw(e,t,n=1){const[r,s]=j_(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return pw(a)?parseFloat(a):a}return Yf(s)?qw(s,t,n+1):s}function ap(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Gw=new Set(["width","height","top","left","right","bottom",...Mi]),S_={test:e=>e==="auto",parse:e=>e},Kw=e=>t=>t.test(e),Xw=[$i,ue,Gn,_r,mN,pN,S_],Ng=e=>Xw.find(Kw(e));function N_(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||gw(e):!0}const __=new Set(["brightness","contrast","saturate","opacity"]);function E_(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Qf)||[];if(!r)return e;const s=n.replace(r,"");let i=__.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const P_=/\b([a-z-]*)\(.*?\)/gu,sh={...Yr,getAnimatableNone:e=>{const t=e.match(P_);return t?t.map(E_).join(" "):e}},_g={...$i,transform:Math.round},C_={rotate:_r,rotateX:_r,rotateY:_r,rotateZ:_r,scale:Uo,scaleX:Uo,scaleY:Uo,scaleZ:Uo,skew:_r,skewX:_r,skewY:_r,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:Ya,originX:fg,originY:fg,originZ:ue},op={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,backgroundPositionX:ue,backgroundPositionY:ue,...C_,zIndex:_g,fillOpacity:Ya,strokeOpacity:Ya,numOctaves:_g},T_={...op,color:nt,backgroundColor:nt,outlineColor:nt,fill:nt,stroke:nt,borderColor:nt,borderTopColor:nt,borderRightColor:nt,borderBottomColor:nt,borderLeftColor:nt,filter:sh,WebkitFilter:sh},Jw=e=>T_[e];function Yw(e,t){let n=Jw(e);return n!==sh&&(n=Yr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const A_=new Set(["auto","none","0"]);function I_(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!A_.has(i)&&Qa(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=Yw(n,s)}class R_ extends ip{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Yf(u))){const d=qw(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Gw.has(r)||t.length!==2)return;const[s,i]=t,a=Ng(s),l=Ng(i);if(a!==l)if(bg(a)&&bg(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Ns[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||N_(t[s]))&&r.push(s);r.length&&I_(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ns[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=Ns[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function D_(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Qw=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Zw(e){return mw(e)&&"offsetHeight"in e}const Eg=30,L_=e=>!isNaN(parseFloat(e));class O_{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Bt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Bt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=L_(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Gf);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Bt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Eg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Eg);return yw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ei(e,t){return new O_(e,t)}const{schedule:lp}=Pw(queueMicrotask,!1),Sn={x:!1,y:!1};function eb(){return Sn.x||Sn.y}function $_(e){return e==="x"||e==="y"?Sn[e]?null:(Sn[e]=!0,()=>{Sn[e]=!1}):Sn.x||Sn.y?null:(Sn.x=Sn.y=!0,()=>{Sn.x=Sn.y=!1})}function tb(e,t){const n=D_(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Pg(e){return!(e.pointerType==="touch"||eb())}function M_(e,t,n={}){const[r,s,i]=tb(e,n),a=l=>{if(!Pg(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{Pg(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",a,s)}),i}const nb=(e,t)=>t?e===t?!0:nb(e,t.parentElement):!1,cp=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,F_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function U_(e){return F_.has(e.tagName)||e.tabIndex!==-1}const ul=new WeakSet;function Cg(e){return t=>{t.key==="Enter"&&e(t)}}function gu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const V_=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Cg(()=>{if(ul.has(n))return;gu(n,"down");const s=Cg(()=>{gu(n,"up")}),i=()=>gu(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Tg(e){return cp(e)&&!eb()}function z_(e,t,n={}){const[r,s,i]=tb(e,n),a=l=>{const c=l.currentTarget;if(!Tg(l))return;ul.add(c);const u=t(c,l),d=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),ul.has(c)&&ul.delete(c),Tg(p)&&typeof u=="function"&&u(p,{success:m})},h=p=>{d(p,c===window||c===document||n.useGlobalTarget||nb(c,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),Zw(l)&&(l.addEventListener("focus",u=>V_(u,s)),!U_(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function rb(e){return mw(e)&&"ownerSVGElement"in e}function B_(e){return rb(e)&&e.tagName==="svg"}const _t=e=>!!(e&&e.getVelocity),H_=[...Xw,nt,Yr],W_=e=>H_.find(Kw(e)),up=k.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class q_ extends k.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Zw(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function G_({children:e,isPresent:t,anchorX:n,root:r}){const s=k.useId(),i=k.useRef(null),a=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(up);return k.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:h,right:f}=a.current;if(t||!i.current||!c||!u)return;const p=n==="left"?`left: ${h}`:`right: ${f}`;i.current.dataset.motionPopId=s;const m=document.createElement("style");l&&(m.nonce=l);const v=r??document.head;return v.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{v.contains(m)&&v.removeChild(m)}},[t]),o.jsx(q_,{isPresent:t,childRef:i,sizeRef:a,children:k.cloneElement(e,{ref:i})})}const K_=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a,anchorX:l,root:c})=>{const u=Vf(X_),d=k.useId();let h=!0,f=k.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:n,custom:s,onExitComplete:p=>{u.set(p,!0);for(const m of u.values())if(!m)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return i&&h&&(f={...f}),k.useMemo(()=>{u.forEach((p,m)=>u.set(m,!1))},[n]),k.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),a==="popLayout"&&(e=o.jsx(G_,{isPresent:n,anchorX:l,root:c,children:e})),o.jsx(bc.Provider,{value:f,children:e})};function X_(){return new Map}function sb(e=!0){const t=k.useContext(bc);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=k.useId();k.useEffect(()=>{if(e)return s(i)},[e]);const a=k.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,a]:[!0]}const Vo=e=>e.key||"";function Ag(e){const t=[];return k.Children.forEach(e,n=>{k.isValidElement(n)&&t.push(n)}),t}const en=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[u,d]=sb(a),h=k.useMemo(()=>Ag(e),[e]),f=a&&!u?[]:h.map(Vo),p=k.useRef(!0),m=k.useRef(h),v=Vf(()=>new Map),[w,y]=k.useState(h),[g,x]=k.useState(h);fw(()=>{p.current=!1,m.current=h;for(let S=0;S<g.length;S++){const P=Vo(g[S]);f.includes(P)?v.delete(P):v.get(P)!==!0&&v.set(P,!1)}},[g,f.length,f.join("-")]);const N=[];if(h!==w){let S=[...h];for(let P=0;P<g.length;P++){const T=g[P],$=Vo(T);f.includes($)||(S.splice(P,0,T),N.push(T))}return i==="wait"&&N.length&&(S=N),x(Ag(S)),y(h),null}const{forceRender:E}=k.useContext(Uf);return o.jsx(o.Fragment,{children:g.map(S=>{const P=Vo(S),T=a&&!u?!1:h===g||f.includes(P),$=()=>{if(v.has(P))v.set(P,!0);else return;let O=!0;v.forEach(V=>{V||(O=!1)}),O&&(E==null||E(),x(m.current),a&&(d==null||d()),r&&r())};return o.jsx(K_,{isPresent:T,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:T?void 0:$,anchorX:l,children:S},P)})})},ib=k.createContext({strict:!1}),Ig={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pi={};for(const e in Ig)Pi[e]={isEnabled:t=>Ig[e].some(n=>!!t[n])};function J_(e){for(const t in e)Pi[t]={...Pi[t],...e[t]}}const Y_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ql(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Y_.has(e)}let ab=e=>!ql(e);function Q_(e){typeof e=="function"&&(ab=t=>t.startsWith("on")?!ql(t):e(t))}try{Q_(require("@emotion/is-prop-valid").default)}catch{}function Z_(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(ab(s)||n===!0&&ql(s)||!t&&!ql(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const kc=k.createContext({});function jc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Za(e){return typeof e=="string"||Array.isArray(e)}const dp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hp=["initial",...dp];function Sc(e){return jc(e.animate)||hp.some(t=>Za(e[t]))}function ob(e){return!!(Sc(e)||e.variants)}function eE(e,t){if(Sc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Za(n)?n:void 0,animate:Za(r)?r:void 0}}return e.inherit!==!1?t:{}}function tE(e){const{initial:t,animate:n}=eE(e,k.useContext(kc));return k.useMemo(()=>({initial:t,animate:n}),[Rg(t),Rg(n)])}function Rg(e){return Array.isArray(e)?e.join(" "):e}const eo={};function nE(e){for(const t in e)eo[t]=e[t],Jf(t)&&(eo[t].isCSSVariable=!0)}function lb(e,{layout:t,layoutId:n}){return Fi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!eo[e]||e==="opacity")}const rE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sE=Mi.length;function iE(e,t,n){let r="",s=!0;for(let i=0;i<sE;i++){const a=Mi[i],l=e[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=Qw(l,op[a]);if(!c){s=!1;const d=rE[a]||a;r+=`${d}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function fp(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let a=!1,l=!1;for(const c in t){const u=t[c];if(Fi.has(c)){a=!0;continue}else if(Jf(c)){s[c]=u;continue}else{const d=Qw(u,op[c]);c.startsWith("origin")?(l=!0,i[c]=d):r[c]=d}}if(t.transform||(a||n?r.transform=iE(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const pp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cb(e,t,n){for(const r in t)!_t(t[r])&&!lb(r,n)&&(e[r]=t[r])}function aE({transformTemplate:e},t){return k.useMemo(()=>{const n=pp();return fp(n,t,e),Object.assign({},n.vars,n.style)},[t])}function oE(e,t){const n=e.style||{},r={};return cb(r,n,e),Object.assign(r,aE(e,t)),r}function lE(e,t){const n={},r=oE(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const cE={offset:"stroke-dashoffset",array:"stroke-dasharray"},uE={offset:"strokeDashoffset",array:"strokeDasharray"};function dE(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?cE:uE;e[i.offset]=ue.transform(-r);const a=ue.transform(t),l=ue.transform(n);e[i.array]=`${a} ${l}`}function ub(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...l},c,u,d){if(fp(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&dE(h,s,i,a,!1)}const db=()=>({...pp(),attrs:{}}),hb=e=>typeof e=="string"&&e.toLowerCase()==="svg";function hE(e,t,n,r){const s=k.useMemo(()=>{const i=db();return ub(i,t,hb(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};cb(i,e.style,e),s.style={...i,...s.style}}return s}const fE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mp(e){return typeof e!="string"||e.includes("-")?!1:!!(fE.indexOf(e)>-1||/[A-Z]/u.test(e))}function pE(e,t,n,{latestValues:r},s,i=!1){const l=(mp(e)?hE:lE)(t,r,s,e),c=Z_(t,typeof e=="string",i),u=e!==k.Fragment?{...c,...l,ref:n}:{},{children:d}=t,h=k.useMemo(()=>_t(d)?d.get():d,[d]);return k.createElement(e,{...u,children:h})}function Dg(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function gp(e,t,n,r){if(typeof t=="function"){const[s,i]=Dg(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Dg(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function dl(e){return _t(e)?e.get():e}function mE({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:gE(n,r,s,e),renderState:t()}}function gE(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=dl(i[f]);let{initial:a,animate:l}=e;const c=Sc(e),u=ob(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;if(h&&typeof h!="boolean"&&!jc(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=gp(e,f[p]);if(m){const{transitionEnd:v,transition:w,...y}=m;for(const g in y){let x=y[g];if(Array.isArray(x)){const N=d?x.length-1:0;x=x[N]}x!==null&&(s[g]=x)}for(const g in v)s[g]=v[g]}}}return s}const fb=e=>(t,n)=>{const r=k.useContext(kc),s=k.useContext(bc),i=()=>mE(e,t,r,s);return n?i():Vf(i)};function yp(e,t,n){var i;const{style:r}=e,s={};for(const a in r)(_t(r[a])||t.style&&_t(t.style[a])||lb(a,e)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const yE=fb({scrapeMotionValuesFromProps:yp,createRenderState:pp});function pb(e,t,n){const r=yp(e,t,n);for(const s in e)if(_t(e[s])||_t(t[s])){const i=Mi.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const xE=fb({scrapeMotionValuesFromProps:pb,createRenderState:db}),vE=Symbol.for("motionComponentSymbol");function si(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function wE(e,t,n){return k.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):si(n)&&(n.current=r))},[t])}const xp=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bE="framerAppearId",mb="data-"+xp(bE),gb=k.createContext({});function kE(e,t,n,r,s){var v,w;const{visualElement:i}=k.useContext(kc),a=k.useContext(ib),l=k.useContext(bc),c=k.useContext(up).reducedMotion,u=k.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=k.useContext(gb);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&jE(u.current,n,s,h);const f=k.useRef(!1);k.useInsertionEffect(()=>{d&&f.current&&d.update(n,l)});const p=n[mb],m=k.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,p)));return fw(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),k.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,p)}),m.current=!1),d.enteringChildren=void 0)}),d}function jE(e,t,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:yb(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||l&&si(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function yb(e){if(e)return e.options.allowProjection!==!1?e.projection:yb(e.parent)}function yu(e,{forwardMotionProps:t=!1}={},n,r){n&&J_(n);const s=mp(e)?xE:yE;function i(l,c){let u;const d={...k.useContext(up),...l,layoutId:SE(l)},{isStatic:h}=d,f=tE(l),p=s(l,h);if(!h&&zf){NE();const m=_E(d);u=m.MeasureLayout,f.visualElement=kE(e,p,d,r,m.ProjectionNode)}return o.jsxs(kc.Provider,{value:f,children:[u&&f.visualElement?o.jsx(u,{visualElement:f.visualElement,...d}):null,pE(e,l,wE(p,f.visualElement,c),p,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const a=k.forwardRef(i);return a[vE]=e,a}function SE({layoutId:e}){const t=k.useContext(Uf).id;return t&&e!==void 0?t+"-"+e:e}function NE(e,t){k.useContext(ib).strict}function _E(e){const{drag:t,layout:n}=Pi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function EE(e,t){if(typeof Proxy>"u")return yu;const n=new Map,r=(i,a)=>yu(i,a,e,t),s=(i,a)=>r(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,yu(a,void 0,e,t)),n.get(a))})}function xb({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function PE({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function CE(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xu(e){return e===void 0||e===1}function ih({scale:e,scaleX:t,scaleY:n}){return!xu(e)||!xu(t)||!xu(n)}function ps(e){return ih(e)||vb(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function vb(e){return Lg(e.x)||Lg(e.y)}function Lg(e){return e&&e!=="0%"}function Gl(e,t,n){const r=e-n,s=t*r;return n+s}function Og(e,t,n,r,s){return s!==void 0&&(e=Gl(e,s,r)),Gl(e,n,r)+t}function ah(e,t=0,n=1,r,s){e.min=Og(e.min,t,n,r,s),e.max=Og(e.max,t,n,r,s)}function wb(e,{x:t,y:n}){ah(e.x,t.translate,t.scale,t.originPoint),ah(e.y,n.translate,n.scale,n.originPoint)}const $g=.999999999999,Mg=1.0000000000001;function TE(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=n[l],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ai(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,wb(e,a)),r&&ps(i.latestValues)&&ai(e,i.latestValues))}t.x<Mg&&t.x>$g&&(t.x=1),t.y<Mg&&t.y>$g&&(t.y=1)}function ii(e,t){e.min=e.min+t,e.max=e.max+t}function Fg(e,t,n,r,s=.5){const i=ze(e.min,e.max,s);ah(e,t,n,i,r)}function ai(e,t){Fg(e.x,t.x,t.scaleX,t.scale,t.originX),Fg(e.y,t.y,t.scaleY,t.scale,t.originY)}function bb(e,t){return xb(CE(e.getBoundingClientRect(),t))}function AE(e,t,n){const r=bb(e,n),{scroll:s}=t;return s&&(ii(r.x,s.offset.x),ii(r.y,s.offset.y)),r}const Ug=()=>({translate:0,scale:1,origin:0,originPoint:0}),oi=()=>({x:Ug(),y:Ug()}),Vg=()=>({min:0,max:0}),Xe=()=>({x:Vg(),y:Vg()}),oh={current:null},kb={current:!1};function IE(){if(kb.current=!0,!!zf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>oh.current=e.matches;e.addEventListener("change",t),t()}else oh.current=!1}const RE=new WeakMap;function DE(e,t,n){for(const r in t){const s=t[r],i=n[r];if(_t(s))e.addValue(r,s);else if(_t(i))e.addValue(r,Ei(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(r);e.addValue(r,Ei(a!==void 0?a:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const zg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class LE{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ip,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Bt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ue.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Sc(n),this.isVariantNode=ob(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&_t(p)&&p.set(c[f])}}mount(t){var n;this.current=t,RE.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),kb.current||IE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oh.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Jr(this.notifyUpdate),Jr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Fi.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Ue.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Pi){const n=Pi[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zg.length;r++){const s=zg[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=t[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=DE(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ei(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(pw(r)||gw(r))?r=parseFloat(r):!W_(r)&&Yr.test(n)&&(r=Yw(t,n)),this.setBaseTarget(t,_t(r)?r.get():r)),_t(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=gp(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!_t(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Gf),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){lp.render(this.render)}}class jb extends LE{constructor(){super(...arguments),this.KeyframeResolver=R_}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;_t(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Sb(e,{style:t,vars:n},r,s){const i=e.style;let a;for(a in t)i[a]=t[a];s==null||s.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function OE(e){return window.getComputedStyle(e)}class $E extends jb{constructor(){super(...arguments),this.type="html",this.renderInstance=Sb}readValueFromInstance(t,n){var r;if(Fi.has(n))return(r=this.projection)!=null&&r.isProjecting?Qd(n):QN(t,n);{const s=OE(t),i=(Jf(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return bb(t,n)}build(t,n,r){fp(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return yp(t,n,r)}}const Nb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ME(e,t,n,r){Sb(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Nb.has(s)?s:xp(s),t.attrs[s])}class FE extends jb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xe}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Fi.has(n)){const r=Jw(n);return r&&r.default||0}return n=Nb.has(n)?n:xp(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return pb(t,n,r)}build(t,n,r){ub(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){ME(t,n,r,s)}mount(t){this.isSVGTag=hb(t.tagName),super.mount(t)}}const UE=(e,t)=>mp(e)?new FE(t):new $E(t,{allowProjection:e!==k.Fragment});function mi(e,t,n){const r=e.getProps();return gp(r,t,n!==void 0?n:r.custom,e)}const lh=e=>Array.isArray(e);function VE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ei(n))}function zE(e){return lh(e)?e[e.length-1]||0:e}function BE(e,t){const n=mi(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const l=zE(i[a]);VE(e,a,l)}}function HE(e){return!!(_t(e)&&e.add)}function ch(e,t){const n=e.getValue("willChange");if(HE(n))return n.add(t);if(!n&&mr.WillChange){const r=new mr.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function _b(e){return e.props[mb]}const WE=e=>e!==null;function qE(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(WE),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const GE={type:"spring",stiffness:500,damping:25,restSpeed:10},KE=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),XE={type:"keyframes",duration:.8},JE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},YE=(e,{keyframes:t})=>t.length>2?XE:Fi.has(e)?e.startsWith("scale")?KE(t[1]):GE:JE;function QE({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const vp=(e,t,n,r={},s,i)=>a=>{const l=ap(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Wn(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};QE(l)||Object.assign(d,YE(e,d)),d.duration&&(d.duration=Wn(d.duration)),d.repeatDelay&&(d.repeatDelay=Wn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(rh(d),d.delay===0&&(h=!0)),(mr.instantAnimations||mr.skipAnimations)&&(h=!0,rh(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const f=qE(d.keyframes,l);if(f!==void 0){Ue.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new sp(d):new b_(d)};function ZE({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Eb(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(i=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),f=l[d];if(f===void 0||u&&ZE(u,d))continue;const p={delay:n,...ap(i||{},d)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===m&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const y=_b(e);if(y){const g=window.MotionHandoffAnimation(y,d,Ue);g!==null&&(p.startTime=g,v=!0)}}ch(e,d),h.start(vp(d,h,f,e.shouldReduceMotion&&Gw.has(d)?{type:!1}:p,e,v));const w=h.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{Ue.update(()=>{a&&BE(e,a)})}),c}function Pb(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),a=e.size,l=(a-1)*r;return typeof n=="function"?n(i,a):s===1?i*r:l-i*r}function uh(e,t,n={}){var c;const r=mi(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Eb(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return eP(e,t,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,a]:[a,i];return u().then(()=>d())}else return Promise.all([i(),a(n.delay)])}function eP(e,t,n=0,r=0,s=0,i=1,a){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(uh(c,t,{...a,delay:n+(typeof r=="function"?0:r)+Pb(e.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function tP(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>uh(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=uh(e,t,n);else{const s=typeof t=="function"?mi(e,t,n.custom):t;r=Promise.all(Eb(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Cb(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const nP=hp.length;function Tb(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Tb(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<nP;n++){const r=hp[n],s=e.props[r];(Za(s)||s===!1)&&(t[r]=s)}return t}const rP=[...dp].reverse(),sP=dp.length;function iP(e){return t=>Promise.all(t.map(({animation:n,options:r})=>tP(e,n,r)))}function aP(e){let t=iP(e),n=Bg(),r=!0;const s=c=>(u,d)=>{var f;const h=mi(e,d,c==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:m,...v}=h;u={...u,...v,...m}}return u};function i(c){t=c(e)}function a(c){const{props:u}=e,d=Tb(e.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let w=0;w<sP;w++){const y=rP[w],g=n[y],x=u[y]!==void 0?u[y]:d[y],N=Za(x),E=y===c?g.isActive:null;E===!1&&(m=w);let S=x===d[y]&&x!==u[y]&&N;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),g.protectedKeys={...p},!g.isActive&&E===null||!x&&!g.prevProp||jc(x)||typeof x=="boolean")continue;const P=oP(g.prevProp,x);let T=P||y===c&&g.isActive&&!S&&N||w>m&&N,$=!1;const O=Array.isArray(x)?x:[x];let V=O.reduce(s(y),{});E===!1&&(V={});const{prevResolvedValues:X={}}=g,me={...X,...V},D=A=>{T=!0,f.has(A)&&($=!0,f.delete(A)),g.needsAnimating[A]=!0;const C=e.getValue(A);C&&(C.liveStyle=!1)};for(const A in me){const C=V[A],z=X[A];if(p.hasOwnProperty(A))continue;let j=!1;lh(C)&&lh(z)?j=!Cb(C,z):j=C!==z,j?C!=null?D(A):f.add(A):C!==void 0&&f.has(A)?D(A):g.protectedKeys[A]=!0}g.prevProp=x,g.prevResolvedValues=V,g.isActive&&(p={...p,...V}),r&&e.blockInitialAnimation&&(T=!1);const R=S&&P;T&&(!R||$)&&h.push(...O.map(A=>{const C={type:y};if(typeof A=="string"&&r&&!R&&e.manuallyAnimateOnMount&&e.parent){const{parent:z}=e,j=mi(z,A);if(z.enteringChildren&&j){const{delayChildren:ne}=j.transition||{};C.delay=Pb(z.enteringChildren,e,ne)}}return{animation:A,options:C}}))}if(f.size){const w={};if(typeof u.initial!="boolean"){const y=mi(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(w.transition=y.transition)}f.forEach(y=>{const g=e.getBaseTarget(y),x=e.getValue(y);x&&(x.liveStyle=!0),w[y]=g??null}),h.push({animation:w})}let v=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=a(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Bg(),r=!0}}}function oP(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Cb(t,e):!1}function ls(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Bg(){return{animate:ls(!0),whileInView:ls(),whileHover:ls(),whileTap:ls(),whileDrag:ls(),whileFocus:ls(),exit:ls()}}class ns{constructor(t){this.isMounted=!1,this.node=t}update(){}}class lP extends ns{constructor(t){super(t),t.animationState||(t.animationState=aP(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();jc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let cP=0;class uP extends ns{constructor(){super(...arguments),this.id=cP++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const dP={animation:{Feature:lP},exit:{Feature:uP}};function to(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function mo(e){return{point:{x:e.pageX,y:e.pageY}}}const hP=e=>t=>cp(t)&&e(t,mo(t));function ka(e,t,n,r){return to(e,t,hP(n),r)}const Ab=1e-4,fP=1-Ab,pP=1+Ab,Ib=.01,mP=0-Ib,gP=0+Ib;function It(e){return e.max-e.min}function yP(e,t,n){return Math.abs(e-t)<=n}function Hg(e,t,n,r=.5){e.origin=r,e.originPoint=ze(t.min,t.max,e.origin),e.scale=It(n)/It(t),e.translate=ze(n.min,n.max,e.origin)-e.originPoint,(e.scale>=fP&&e.scale<=pP||isNaN(e.scale))&&(e.scale=1),(e.translate>=mP&&e.translate<=gP||isNaN(e.translate))&&(e.translate=0)}function ja(e,t,n,r){Hg(e.x,t.x,n.x,r?r.originX:void 0),Hg(e.y,t.y,n.y,r?r.originY:void 0)}function Wg(e,t,n){e.min=n.min+t.min,e.max=e.min+It(t)}function xP(e,t,n){Wg(e.x,t.x,n.x),Wg(e.y,t.y,n.y)}function qg(e,t,n){e.min=t.min-n.min,e.max=e.min+It(t)}function Sa(e,t,n){qg(e.x,t.x,n.x),qg(e.y,t.y,n.y)}function fn(e){return[e("x"),e("y")]}const Rb=({current:e})=>e?e.ownerDocument.defaultView:null,Gg=(e,t)=>Math.abs(e-t);function vP(e,t){const n=Gg(e.x,t.x),r=Gg(e.y,t.y);return Math.sqrt(n**2+r**2)}class Db{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=wu(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=vP(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:v}=f,{timestamp:w}=gt;this.history.push({...v,timestamp:w});const{onStart:y,onMove:g}=this.handlers;p||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=vu(p,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=wu(f.type==="pointercancel"?this.lastMoveEventInfo:vu(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,y),v&&v(f,y)},!cp(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const l=mo(t),c=vu(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=gt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,wu(c,this.history)),this.removeListeners=ho(ka(this.contextWindow,"pointermove",this.handlePointerMove),ka(this.contextWindow,"pointerup",this.handlePointerUp),ka(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Jr(this.updatePoint)}}function vu(e,t){return t?{point:t(e.point)}:e}function Kg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function wu({point:e},t){return{point:e,delta:Kg(e,Lb(t)),offset:Kg(e,wP(t)),velocity:bP(t,.1)}}function wP(e){return e[0]}function Lb(e){return e[e.length-1]}function bP(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Lb(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Wn(t)));)n--;if(!r)return{x:0,y:0};const i=qn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function kP(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ze(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ze(n,e,r.max):Math.min(e,n)),e}function Xg(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function jP(e,{top:t,left:n,bottom:r,right:s}){return{x:Xg(e.x,n,s),y:Xg(e.y,t,r)}}function Jg(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function SP(e,t){return{x:Jg(e.x,t.x),y:Jg(e.y,t.y)}}function NP(e,t){let n=.5;const r=It(e),s=It(t);return s>r?n=Ja(t.min,t.max-r,e.min):r>s&&(n=Ja(e.min,e.max-s,t.min)),pr(0,1,n)}function _P(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const dh=.35;function EP(e=dh){return e===!1?e=0:e===!0&&(e=dh),{x:Yg(e,"left","right"),y:Yg(e,"top","bottom")}}function Yg(e,t,n){return{min:Qg(e,t),max:Qg(e,n)}}function Qg(e,t){return typeof e=="number"?e:e[t]||0}const PP=new WeakMap;class CP{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(mo(h).point)},a=(h,f)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$_(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fn(y=>{let g=this.getAxisMotionValue(y).get()||0;if(Gn.test(g)){const{projection:x}=this.visualElement;if(x&&x.layout){const N=x.layout.layoutBox[y];N&&(g=It(N)*(parseFloat(g)/100))}}this.originPoint[y]=g}),v&&Ue.postRender(()=>v(h,f)),ch(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:w}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=f;if(m&&this.currentDirection===null){this.currentDirection=TP(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),w&&w(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>fn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Db(t,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Rb(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Ue.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!zo(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=kP(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&si(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=jP(r.layoutBox,t):this.constraints=!1,this.elastic=EP(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=_P(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!si(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=AE(r,s.root,this.visualElement.getTransformPagePoint());let a=SP(s.layout.layoutBox,i);if(n){const l=n(PE(a));this.hasMutatedConstraints=!!l,l&&(a=xb(l))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=fn(d=>{if(!zo(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:r?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return ch(this.visualElement,t),r.start(vp(t,r,0,n,this.visualElement,!1))}stopAnimation(){fn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){fn(n=>{const{drag:r}=this.getProps();if(!zo(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];i.set(t[n]-ze(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!si(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};fn(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=NP({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fn(a=>{if(!zo(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(ze(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;PP.set(this.visualElement,this);const t=this.visualElement.current,n=ka(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();si(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ue.read(r);const a=to(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(fn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=dh,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function zo(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function TP(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class AP extends ns{constructor(t){super(t),this.removeGroupControls=wn,this.removeListeners=wn,this.controls=new CP(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zg=e=>(t,n)=>{e&&Ue.postRender(()=>e(t,n))};class IP extends ns{constructor(){super(...arguments),this.removePointerDownListener=wn}onPointerDown(t){this.session=new Db(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Rb(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Zg(t),onStart:Zg(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Ue.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=ka(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function e0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Zi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ue.test(e))e=parseFloat(e);else return e;const n=e0(e,t.target.x),r=e0(e,t.target.y);return`${n}% ${r}%`}},RP={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Yr.parse(e);if(s.length>5)return r;const i=Yr.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=ze(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};let bu=!1;class DP extends k.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;nE(LP),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),bu&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),hl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,bu=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Ue.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),lp.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;bu=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ob(e){const[t,n]=sb(),r=k.useContext(Uf);return o.jsx(DP,{...e,layoutGroup:r,switchLayoutGroup:k.useContext(gb),isPresent:t,safeToRemove:n})}const LP={borderRadius:{...Zi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zi,borderTopRightRadius:Zi,borderBottomLeftRadius:Zi,borderBottomRightRadius:Zi,boxShadow:RP};function OP(e,t,n){const r=_t(e)?e:Ei(e);return r.start(vp("",r,t,n)),r.animation}const $P=(e,t)=>e.depth-t.depth;class MP{constructor(){this.children=[],this.isDirty=!1}add(t){Bf(this.children,t),this.isDirty=!0}remove(t){Hf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($P),this.isDirty=!1,this.children.forEach(t)}}function FP(e,t){const n=Bt.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Jr(r),e(i-t))};return Ue.setup(r,!0),()=>Jr(r)}const $b=["TopLeft","TopRight","BottomLeft","BottomRight"],UP=$b.length,t0=e=>typeof e=="string"?parseFloat(e):e,n0=e=>typeof e=="number"||ue.test(e);function VP(e,t,n,r,s,i){s?(e.opacity=ze(0,n.opacity??1,zP(r)),e.opacityExit=ze(t.opacity??1,0,BP(r))):i&&(e.opacity=ze(t.opacity??1,n.opacity??1,r));for(let a=0;a<UP;a++){const l=`border${$b[a]}Radius`;let c=r0(t,l),u=r0(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||n0(c)===n0(u)?(e[l]=Math.max(ze(t0(c),t0(u),r),0),(Gn.test(u)||Gn.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=ze(t.rotate||0,n.rotate||0,r))}function r0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const zP=Mb(0,.5,Sw),BP=Mb(.5,.95,wn);function Mb(e,t,n){return r=>r<e?0:r>t?1:n(Ja(e,t,r))}function s0(e,t){e.min=t.min,e.max=t.max}function dn(e,t){s0(e.x,t.x),s0(e.y,t.y)}function i0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function a0(e,t,n,r,s){return e-=t,e=Gl(e,1/n,r),s!==void 0&&(e=Gl(e,1/s,r)),e}function HP(e,t=0,n=1,r=.5,s,i=e,a=e){if(Gn.test(t)&&(t=parseFloat(t),t=ze(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=ze(i.min,i.max,r);e===i&&(l-=t),e.min=a0(e.min,t,n,l,s),e.max=a0(e.max,t,n,l,s)}function o0(e,t,[n,r,s],i,a){HP(e,t[n],t[r],t[s],t.scale,i,a)}const WP=["x","scaleX","originX"],qP=["y","scaleY","originY"];function l0(e,t,n,r){o0(e.x,t,WP,n?n.x:void 0,r?r.x:void 0),o0(e.y,t,qP,n?n.y:void 0,r?r.y:void 0)}function c0(e){return e.translate===0&&e.scale===1}function Fb(e){return c0(e.x)&&c0(e.y)}function u0(e,t){return e.min===t.min&&e.max===t.max}function GP(e,t){return u0(e.x,t.x)&&u0(e.y,t.y)}function d0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Ub(e,t){return d0(e.x,t.x)&&d0(e.y,t.y)}function h0(e){return It(e.x)/It(e.y)}function f0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class KP{constructor(){this.members=[]}add(t){Bf(this.members,t),t.scheduleRender()}remove(t){if(Hf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function XP(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:m}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const ku=["","X","Y","Z"],JP=1e3;let YP=0;function ju(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Vb(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=_b(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ue,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Vb(r)}function zb({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=YP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eC),this.nodes.forEach(sC),this.nodes.forEach(iC),this.nodes.forEach(tC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new MP)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Gf),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=rb(a)&&!B_(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Ue.read(()=>{h=window.innerWidth}),e(a,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=FP(f,250),hl.hasAnimatedSinceResize&&(hl.hasAnimatedSinceResize=!1,this.nodes.forEach(g0)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||uC,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=u.getProps(),y=!this.targetLayout||!Ub(this.targetLayout,p),g=!h&&f;if(this.options.layoutRoot||this.resumeFrom||g||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...ap(m,"layout"),onPlay:v,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(d,g)}else h||g0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Jr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aC),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(p0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(m0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rC),this.nodes.forEach(QP),this.nodes.forEach(ZP)):this.nodes.forEach(m0),this.clearAllSnapshots();const l=Bt.now();gt.delta=pr(0,1e3/60,l-gt.timestamp),gt.timestamp=l,gt.isProcessing=!0,du.update.process(gt),du.preRender.process(gt),du.render.process(gt),gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nC),this.sharedNodes.forEach(oC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!It(this.snapshot.measuredBox.x)&&!It(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Fb(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||ps(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),dC(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return Xe();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(hC))){const{scroll:d}=this.root;d&&(ii(l.x,d.offset.x),ii(l.y,d.offset.y))}return l}removeElementScroll(a){var c;const l=Xe();if(dn(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&dn(l,a),ii(l.x,h.offset.x),ii(l.y,h.offset.y))}return l}applyTransform(a,l=!1){const c=Xe();dn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ai(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ps(d.latestValues)&&ai(c,d.latestValues)}return ps(this.latestValues)&&ai(c,this.latestValues),c}removeTransform(a){const l=Xe();dn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!ps(u.latestValues))continue;ih(u.latestValues)&&u.updateSnapshot();const d=Xe(),h=u.measurePageBox();dn(d,h),l0(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ps(this.latestValues)&&l0(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=gt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),Sa(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xe(),this.targetWithTransforms=Xe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dn(this.target,this.layout.layoutBox),wb(this.target,this.targetDelta)):dn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),Sa(this.relativeTargetOrigin,this.target,p.target),dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ih(this.parent.latestValues)||vb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===gt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;dn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;TE(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Xe());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(i0(this.prevProjectionDelta.x,this.projectionDelta.x),i0(this.prevProjectionDelta.y,this.projectionDelta.y)),ja(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!f0(this.projectionDelta.x,this.prevProjectionDelta.x)||!f0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=oi(),this.projectionDelta=oi(),this.projectionDeltaWithTransform=oi()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=oi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Xe(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,v=p!==m,w=this.getStack(),y=!w||w.members.length<=1,g=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(cC));this.animationProgress=0;let x;this.mixTargetDelta=N=>{const E=N/1e3;y0(h.x,a.x,E),y0(h.y,a.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sa(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lC(this.relativeTarget,this.relativeTargetOrigin,f,E),x&&GP(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Xe()),dn(x,this.relativeTarget)),v&&(this.animationValues=d,VP(d,u,this.latestValues,E,g,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Jr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{hl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ei(0)),this.currentAnimation=OP(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&Bb(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Xe();const h=It(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=It(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}dn(l,c),ai(l,d),ja(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new KP),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&ju("z",a,u,this.animationValues);for(let d=0;d<ku.length;d++)ju(`rotate${ku[d]}`,a,u,this.animationValues),ju(`skew${ku[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=dl(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=dl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ps(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=XP(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),a.transform=h;const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in eo){if(d[m]===void 0)continue;const{correct:v,applyTo:w,isCSSVariable:y}=eo[m],g=h==="none"?d[m]:v(d[m],u);if(w){const x=w.length;for(let N=0;N<x;N++)a[w[N]]=g}else y?this.options.visualElement.renderState.vars[m]=g:a[m]=g}this.options.layoutId&&(a.pointerEvents=u===this?dl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(p0),this.root.sharedNodes.clear()}}}function QP(e){e.updateLayout()}function ZP(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i==="size"?fn(h=>{const f=a?t.measuredBox[h]:t.layoutBox[h],p=It(f);f.min=r[h].min,f.max=f.min+p}):Bb(i,t.layoutBox,r)&&fn(h=>{const f=a?t.measuredBox[h]:t.layoutBox[h],p=It(r[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=oi();ja(l,r,t.layoutBox);const c=oi();a?ja(c,e.applyTransform(s,!0),t.measuredBox):ja(c,r,t.layoutBox);const u=!Fb(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const m=Xe();Sa(m,t.layoutBox,f.layoutBox);const v=Xe();Sa(v,r,p.layoutBox),Ub(m,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=m,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function eC(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tC(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nC(e){e.clearSnapshot()}function p0(e){e.clearMeasurements()}function m0(e){e.isLayoutDirty=!1}function rC(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function g0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function sC(e){e.resolveTargetDelta()}function iC(e){e.calcProjection()}function aC(e){e.resetSkewAndRotation()}function oC(e){e.removeLeadSnapshot()}function y0(e,t,n){e.translate=ze(t.translate,0,n),e.scale=ze(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function x0(e,t,n,r){e.min=ze(t.min,n.min,r),e.max=ze(t.max,n.max,r)}function lC(e,t,n,r){x0(e.x,t.x,n.x,r),x0(e.y,t.y,n.y,r)}function cC(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const uC={duration:.45,ease:[.4,0,.1,1]},v0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),w0=v0("applewebkit/")&&!v0("chrome/")?Math.round:wn;function b0(e){e.min=w0(e.min),e.max=w0(e.max)}function dC(e){b0(e.x),b0(e.y)}function Bb(e,t,n){return e==="position"||e==="preserve-aspect"&&!yP(h0(t),h0(n),.2)}function hC(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const fC=zb({attachResizeListener:(e,t)=>to(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Su={current:void 0},Hb=zb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Su.current){const e=new fC({});e.mount(window),e.setOptions({layoutScroll:!0}),Su.current=e}return Su.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),pC={pan:{Feature:IP},drag:{Feature:AP,ProjectionNode:Hb,MeasureLayout:Ob}};function k0(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Ue.postRender(()=>i(t,mo(t)))}class mC extends ns{mount(){const{current:t}=this.node;t&&(this.unmount=M_(t,(n,r)=>(k0(this.node,r,"Start"),s=>k0(this.node,s,"End"))))}unmount(){}}class gC extends ns{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ho(to(this.node.current,"focus",()=>this.onFocus()),to(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function j0(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Ue.postRender(()=>i(t,mo(t)))}class yC extends ns{mount(){const{current:t}=this.node;t&&(this.unmount=z_(t,(n,r)=>(j0(this.node,r,"Start"),(s,{success:i})=>j0(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hh=new WeakMap,Nu=new WeakMap,xC=e=>{const t=hh.get(e.target);t&&t(e)},vC=e=>{e.forEach(xC)};function wC({root:e,...t}){const n=e||document;Nu.has(n)||Nu.set(n,{});const r=Nu.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(vC,{root:e,...t})),r[s]}function bC(e,t,n){const r=wC(t);return hh.set(e,n),r.observe(e),()=>{hh.delete(e),r.unobserve(e)}}const kC={some:0,all:1};class jC extends ns{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:kC[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return bC(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(SC(t,n))&&this.startObserver()}unmount(){}}function SC({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const NC={inView:{Feature:jC},tap:{Feature:yC},focus:{Feature:gC},hover:{Feature:mC}},_C={layout:{ProjectionNode:Hb,MeasureLayout:Ob}},EC={...dP,...NC,...pC,..._C},te=EE(EC,UE);var PC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const CC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K=(e,t)=>{const n=k.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...c},u)=>k.createElement("svg",{ref:u,...PC,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${CC(e)}`,...c},[...t.map(([d,h])=>k.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n},wp=K("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),vr=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Gt=K("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),TC=K("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),cs=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),fh=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),AC=K("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),IC=K("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),RC=K("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),S0=K("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),DC=K("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),LC=K("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),_u=K("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),OC=K("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),st=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),gi=K("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Vn=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),yn=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Nt=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ph=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Wb=K("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),Rn=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),bp=K("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Nc=K("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),$C=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Kl=K("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),MC=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Et=K("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),mh=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),qb=K("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Gb=K("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),FC=K("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]),kp=K("GitPullRequest",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]),UC=K("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),VC=K("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Eu=K("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),jp=K("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Tn=K("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),fl=K("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),zC=K("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),BC=K("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),HC=K("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),WC=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Kb=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),qC=K("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),N0=K("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),GC=K("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),KC=K("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Ci=K("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),_0=K("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),XC=K("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),JC=K("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Xb=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qr=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),YC=K("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),pl=K("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Jb=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),E0=K("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),QC=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),no=K("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Xl=K("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Sp=K("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),ZC=K("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),or=K("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),eT=K("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),Yb=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Or=K("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),gr=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),tT=K("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Qb=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Np=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Zb=K("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Qr=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Gr=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jl=K("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function nT({isCompact:e}){const n=Jn().pathname.split("/").filter(s=>s),r={"strategic-directives":"Strategic Directives",prds:"PRDs",handoffs:"Handoffs",context:"Context Monitor",progress:"Progress Tracker"};return o.jsxs("nav",{className:`flex items-center ${e?"py-1 px-2":"py-2 px-4"}`,children:[o.jsxs(cr,{to:"/",className:"flex items-center text-purple-100 hover:text-white transition-colors drop-shadow-sm",children:[o.jsx(jp,{className:e?"w-3 h-3":"w-4 h-4"}),o.jsx("span",{className:`${e?"ml-1 text-xs":"ml-2 text-sm"}`,children:"Dashboard"})]}),n.map((s,i)=>{const a=`/${n.slice(0,i+1).join("/")}`,l=i===n.length-1,c=r[s]||s;return o.jsxs(ao.Fragment,{children:[o.jsx(Nt,{className:`${e?"w-3 h-3 mx-1":"w-4 h-4 mx-2"} text-purple-200`}),l?o.jsx("span",{className:`${e?"text-xs":"text-sm"} font-medium text-white drop-shadow-sm`,children:c}):o.jsx(cr,{to:a,className:`${e?"text-xs":"text-sm"} text-purple-100 hover:text-white transition-colors drop-shadow-sm`,children:c})]},s)})]})}function _c({onRefresh:e,isCompact:t=!1,isCollapsed:n=!1}){const[r,s]=k.useState("idle"),[i,a]=k.useState(""),[l,c]=k.useState(null),u=async()=>{console.log("🔄 Manual Refresh: Starting database sync..."),s("refreshing"),a("Syncing with database...");try{const p=await fetch("/api/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"database"})});if(!p.ok)throw new Error("Database refresh failed");const m=await p.json();console.log("✅ Database refreshed:",m),e&&(console.log("🔄 Triggering UI refresh..."),await e()),s("complete"),a(`Refreshed: ${m.sds||0} SDs, ${m.prds||0} PRDs`),c(new Date),setTimeout(()=>{s("idle"),a("")},3e3)}catch(p){console.error("❌ Refresh Error:",p),s("error"),a(`Failed: ${p.message}`),setTimeout(()=>{s("idle"),a("")},5e3)}},d=()=>{switch(r){case"refreshing":return o.jsx(Nc,{className:"w-4 h-4 animate-spin"});case"complete":return o.jsx(st,{className:"w-4 h-4 text-green-500"});case"error":return o.jsx(vr,{className:"w-4 h-4 text-red-500"});default:return o.jsx(qr,{className:"w-4 h-4"})}},h=()=>{switch(r){case"refreshing":return"bg-blue-500 hover:bg-blue-600";case"complete":return"bg-green-500 hover:bg-green-600";case"error":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-600 hover:bg-gray-700"}},f=r==="refreshing";return o.jsxs("div",{className:"relative flex items-center",children:[o.jsxs(te.button,{onClick:u,disabled:f,className:`
          flex items-center ${n?"justify-center w-full":""} transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
          ${h()} text-white rounded hover:opacity-90
          ${n?"px-2 py-2":t?"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm":"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base"}
        `,whileHover:{scale:f?1:1.05},whileTap:{scale:f?1:.95},title:n?"Manual Refresh - Sync with database":"Manually sync with database (automatic real-time updates are active)",children:[d(),!n&&o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:`${t?"ml-1":"ml-1 sm:ml-2"} hidden xs:inline`,children:[r==="idle"&&"Manual Refresh",r==="refreshing"&&"Syncing...",r==="complete"&&"Synced!",r==="error"&&"Failed"]}),o.jsxs("span",{className:"xs:hidden ml-1",children:[r==="idle"&&"↻",r==="refreshing"&&"↻",r==="complete"&&"✓",r==="error"&&"✗"]})]})]}),o.jsx(en,{children:i&&!n&&o.jsx(te.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`
              absolute left-full ml-4 top-1/2 transform -translate-y-1/2
              text-sm px-3 py-1 rounded-lg whitespace-nowrap z-50
              ${r==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":r==="complete"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}
              ${t?"text-xs px-2 py-0.5":""}
            `,children:i})}),o.jsx(en,{children:n&&i&&o.jsxs(te.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`
              absolute left-full ml-2 top-1/2 transform -translate-y-1/2
              text-xs px-2 py-1 rounded-lg whitespace-nowrap z-50 pointer-events-none
              ${r==="error"?"bg-red-900 text-red-200":r==="complete"?"bg-green-900 text-green-200":"bg-blue-900 text-blue-200"}
            `,children:[r==="refreshing"&&"Syncing",r==="complete"&&"Done!",r==="error"&&"Error"]})}),l&&r==="idle"&&o.jsxs("div",{className:`absolute left-full ml-4 top-full mt-1 text-gray-500 dark:text-gray-400 whitespace-nowrap ${t?"text-xs":"text-sm"}`,children:["Last refresh: ",l.toLocaleTimeString()]}),o.jsx("div",{className:"absolute -top-1 -right-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-400 rounded-full animate-ping"})]})})]})}const ek=({className:e=""})=>{const t=()=>{const c=localStorage.getItem("theme");return c?c==="dark":!0},[n,r]=k.useState(t),[s,i]=k.useState(!1);k.useLayoutEffect(()=>{const c=document.documentElement;n?(c.classList.add("dark"),c.classList.remove("light"),localStorage.setItem("theme","dark")):(c.classList.remove("dark"),c.classList.add("light"),localStorage.setItem("theme","light"))},[n]),k.useEffect(()=>{const c=setTimeout(()=>{const u=document.documentElement,d=localStorage.getItem("theme");d!=="light"?(u.classList.add("dark"),u.classList.remove("light"),d||localStorage.setItem("theme","dark"),r(!0)):(u.classList.remove("dark"),u.classList.add("light"),r(!1))},10);return()=>clearTimeout(c)},[]);const a=c=>{const u=document.documentElement;c?(u.classList.add("dark"),u.classList.remove("light"),localStorage.setItem("theme","dark")):(u.classList.remove("dark"),u.classList.add("light"),localStorage.setItem("theme","light"))},l=()=>{if(s)return;i(!0);const c=!n;r(c),a(c),setTimeout(()=>i(!1),300)};return o.jsxs("button",{onClick:l,className:`
        relative flex items-center justify-center
        w-12 h-6 rounded-full transition-all duration-300 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${n?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-600"}
        ${s?"scale-95":"hover:scale-105"}
        ${e}
      `,title:n?"Switch to light mode":"Switch to dark mode","aria-label":n?"Switch to light mode":"Switch to dark mode",disabled:s,children:[o.jsx("div",{className:`
        absolute inset-0 rounded-full transition-all duration-300
        ${n?"bg-gradient-to-r from-blue-600 to-blue-500":"bg-gradient-to-r from-gray-300 to-gray-200"}
      `}),o.jsxs("div",{className:`
        relative w-5 h-5 rounded-full transition-all duration-300 ease-in-out transform
        bg-white dark:bg-gray-100 shadow-lg
        flex items-center justify-center
        ${n?"translate-x-3":"-translate-x-3"}
        ${s?"scale-90":""}
      `,children:[o.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${n?"opacity-100":"opacity-0"}
        `,children:o.jsx(KC,{className:"w-3 h-3 text-blue-600 dark:text-blue-500"})}),o.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${n?"opacity-0":"opacity-100"}
        `,children:o.jsx(ZC,{className:"w-3 h-3 text-yellow-500"})})]}),o.jsx("div",{className:`
        absolute inset-0 rounded-full opacity-0 transition-opacity duration-300
        ${n?"bg-blue-400 group-hover:opacity-20":"bg-yellow-400 group-hover:opacity-20"}
        pointer-events-none
      `})]})};function _p(){const[e,t]=k.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return k.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=s=>{t(s.matches)};if(n.addEventListener)return n.addEventListener("change",r),()=>n.removeEventListener("change",r);if(n.addListener)return n.addListener(r),()=>n.removeListener(r)},[]),e}const rT={normal:200},tk={easeOut:[0,0,.2,1],spring:{type:"spring",stiffness:300,damping:30}},sT={slideUp:{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:rT.normal/1e3,ease:tk.easeOut}}},iT={container:{animate:{transition:{staggerChildren:.05,delayChildren:.1}}}},P0=tk.spring,aT=sT.slideUp,oT=iT.container;function lT({state:e,isConnected:t,isSidebarCollapsed:n,setIsSidebarCollapsed:r,isCompactMode:s,setIsCompactMode:i,isMobileMenuOpen:a,setIsMobileMenuOpen:l,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h,setActiveSD:f}){var E;const p=_p(),m=Jn(),v=[{path:"/",icon:jp,label:"Dashboard",tooltip:"Dashboard"},{path:"/strategic-directives",icon:Et,label:"Strategic Directives",tooltip:"SDs"},{path:"/backlog",icon:Ci,label:"Backlog",tooltip:"Backlog"},{path:"/directive-lab",icon:qb,label:"Directive Lab",tooltip:"Lab"},{path:"/pr-reviews",icon:kp,label:"PR Reviews",tooltip:"PRs"}],w={expanded:{width:"16rem",transition:p?{duration:0}:P0},collapsed:{width:"4rem",transition:p?{duration:0}:P0}},y={rest:{scale:1,transition:{duration:.2}},hover:{scale:p?1:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:p?1:.98}},g={hidden:{opacity:0,x:-10,transition:{duration:.1}},visible:{opacity:1,x:0,transition:{duration:.2,delay:.5}}},x=m.pathname==="/directive-lab",N=s?"p-2 pt-16 md:pt-2":x?"p-0":"p-6 pt-20 md:pt-6";return o.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 relative",children:[o.jsx(te.button,{onClick:()=>l(!a),className:"mobile-menu-button fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg md:hidden",whileHover:{scale:p?1:1.05},whileTap:{scale:p?1:.95},children:o.jsx(en,{mode:"wait",children:a?o.jsx(te.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:p?0:.2},children:o.jsx(Gr,{className:"w-6 h-6"})},"close"):o.jsx(te.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:p?0:.2},children:o.jsx(qC,{className:"w-6 h-6"})},"menu")})}),o.jsx(en,{children:a&&o.jsx(te.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>l(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:p?0:.2}})}),o.jsxs(te.div,{className:`
          fixed md:static inset-y-0 left-0 bg-gradient-to-br from-purple-600 via-purple-700 to-blue-800 shadow-2xl 
          z-50 flex flex-col overflow-hidden transition-transform duration-300 ease-in-out
          md:transform-none backdrop-blur-xl
          ${a?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,initial:!1,animate:n?"collapsed":"expanded",variants:w,children:[o.jsxs("div",{className:`${s?"p-2":"p-4"} border-b border-purple-400/30 backdrop-blur-sm relative overflow-hidden`,children:[o.jsx(te.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:p?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:p?0:4,repeat:1/0,ease:"linear"}}),o.jsxs("div",{className:`flex items-center ${n?"justify-center":"justify-between"}`,children:[o.jsx(en,{children:!n&&o.jsx(te.h1,{className:"text-xl font-bold text-white relative z-10 drop-shadow-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:p?0:.15},children:"LEO Protocol"})}),o.jsx(te.button,{onClick:()=>r(!n),className:"hidden md:block p-1 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/10 relative z-10",title:n?"Expand sidebar":"Collapse sidebar",whileHover:{scale:p?1:1.1},whileTap:{scale:p?1:.9},children:o.jsx(te.div,{animate:{rotate:n?0:180},transition:{duration:p?0:.15},children:o.jsx(Nt,{className:"w-5 h-5"})})})]}),o.jsx(en,{children:!n&&o.jsxs(te.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:p?0:.15},children:[o.jsxs("div",{className:"mt-2 flex items-center",children:[o.jsx(te.div,{className:`w-2 h-2 rounded-full mr-2 ${t?"bg-green-500":"bg-red-500"}`,animate:{scale:t?[1,1.2,1]:1},transition:{duration:2,repeat:t?1/0:0,repeatType:"loop"}}),o.jsx("span",{className:"text-sm text-purple-100 relative z-10",children:t?"Connected":"Disconnected"})]}),o.jsxs(te.span,{className:"text-xs px-2 py-1 bg-white/20 text-white rounded-full inline-block mt-2 backdrop-blur-sm border border-white/20 relative z-10 font-medium",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:["v",((E=e.leoProtocol)==null?void 0:E.version)||"detecting..."]})]})})]}),o.jsxs("nav",{className:`flex-1 ${s?"p-2":"p-4"} relative`,children:[o.jsx(te.div,{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"20px 20px"},animate:{backgroundPosition:p?"0px 0px":["0px 0px","20px 20px","0px 0px"]},transition:{duration:p?0:20,repeat:1/0,ease:"linear"}}),o.jsx(te.ul,{className:"space-y-1",variants:oT,initial:"hidden",animate:"visible",children:v.map(({path:S,icon:P,label:T,tooltip:$},O)=>o.jsx(te.li,{variants:aT,custom:O,children:o.jsx(H2,{to:S,className:({isActive:V})=>`block ${V?"active-nav-item":""}`,onClick:()=>l(!1),children:({isActive:V})=>o.jsxs(te.div,{className:`flex items-center ${s?"p-1.5":"p-2"} rounded-lg transition-all duration-300 group relative backdrop-blur-sm ${V?"bg-white/25 text-white border border-white/30 shadow-lg backdrop-blur-md":"hover:bg-white/10 text-purple-100 hover:text-white border border-transparent hover:border-white/20"}`,variants:y,initial:"rest",whileHover:"hover",whileTap:"tap",layout:!0,children:[V&&!p&&o.jsxs(o.Fragment,{children:[o.jsx(te.div,{className:"absolute inset-0 rounded-lg bg-white/30 blur-xl",initial:{opacity:0,scale:.8},animate:{opacity:.6,scale:1},transition:{duration:.3}}),o.jsx(te.div,{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400/40 to-blue-400/40",animate:{background:["linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))","linear-gradient(to right, rgba(59, 130, 246, 0.4), rgba(168, 85, 247, 0.4))","linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]}),o.jsx(P,{className:`${s?"w-4 h-4":"w-5 h-5"} ${n?"":"mr-3"} relative z-10`}),o.jsx(en,{children:!n&&o.jsx(te.span,{className:`${s?"text-sm":""} relative z-10`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:p?0:.2},children:T})}),o.jsxs(te.span,{className:`absolute ${n?"left-full ml-2 top-1/2 transform -translate-y-1/2":"bottom-full mb-2 left-1/2 transform -translate-x-1/2"} px-2 py-1 bg-gray-900/90 backdrop-blur-md text-white text-xs rounded whitespace-nowrap pointer-events-none z-30 opacity-0 group-hover:opacity-100 transition-all duration-200 delay-300 border border-white/20 shadow-xl`,style:{visibility:"hidden"},animate:{opacity:0,visibility:"hidden"},whileHover:{opacity:1,visibility:"visible"},children:[$,o.jsx("div",{className:`absolute ${n?"right-full top-1/2 transform -translate-y-1/2 border-l-0 border-r-4 border-r-gray-900 dark:border-r-gray-700 border-t-4 border-b-4 border-t-transparent border-b-transparent":"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900 dark:border-t-gray-700 border-l-4 border-r-4 border-l-transparent border-r-transparent border-b-0"}`})]})]})})},S))})]}),o.jsxs(te.div,{className:`border-t border-purple-400/30 ${s?"p-2":"p-4"} relative backdrop-blur-sm`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[o.jsxs(te.button,{onClick:()=>i(!s),className:`w-full flex items-center ${s?"p-1.5":"p-2"} rounded-lg hover:bg-white/10 text-purple-100 hover:text-white transition-all duration-300 group relative border border-transparent hover:border-white/20 backdrop-blur-sm`,title:s?"Standard view":"Compact view",whileHover:{scale:p?1:1.02},whileTap:{scale:p?1:.98},children:[o.jsx(te.div,{animate:{rotate:s?180:0},transition:{duration:p?0:.15},children:o.jsx(GC,{className:`${s?"w-4 h-4":"w-5 h-5"} ${n?"":"mr-3"}`})}),o.jsx(en,{children:!n&&o.jsx(te.span,{className:s?"text-sm":"",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?"Standard View":"Compact View"})}),o.jsx(en,{children:n&&o.jsx(te.span,{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap pointer-events-none z-10",variants:g,initial:"hidden",whileHover:"visible",exit:"hidden",children:s?"Standard":"Compact"})})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-purple-400/30",children:o.jsx(_c,{onRefresh:h,isCompact:s,isCollapsed:n})})]})]}),o.jsxs(te.div,{className:"flex-1 flex flex-col overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:p?0:.08},style:{paddingTop:"env(safe-area-inset-top)"},children:[o.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-600 via-purple-700 to-blue-800 border-b border-purple-400/30 shadow-lg relative overflow-hidden backdrop-blur-xl",children:[o.jsx(te.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:p?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:p?0:4,repeat:1/0,ease:"linear"}}),o.jsx(te.div,{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"40px 40px"},animate:{backgroundPosition:p?"0px 0px":["0px 0px","40px 40px","0px 0px"]},transition:{duration:p?0:15,repeat:1/0,ease:"linear"}}),o.jsx("div",{className:"flex-1 relative z-10",children:o.jsx(nT,{isCompact:s})}),o.jsx("div",{className:"flex items-center px-4 py-2 relative z-10",children:o.jsx(ek,{})})]}),o.jsx("main",{className:`flex-1 overflow-y-auto ${N}`,children:o.jsx(en,{children:o.jsx(te.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:p?0:.1,ease:"easeOut"},children:o.jsx(A2,{context:{state:e,isCompactMode:s,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h}})},m.pathname)})})]})]})}var Ep={},gh={exports:{}};(function(e,t){(function(n,r){r(t)})(xt,function(n){var r=function(){return r=Object.assign||function(i){for(var a,l=1,c=arguments.length;l<c;l++)for(var u in a=arguments[l])Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u]);return i},r.apply(this,arguments)},s=function(){function i(a,l,c){var u=this;this.endVal=l,this.options=c,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(d){u.startTime||(u.startTime=d);var h=d-u.startTime;u.remaining=u.duration-h,u.useEasing?u.countDown?u.frameVal=u.startVal-u.easingFn(h,0,u.startVal-u.endVal,u.duration):u.frameVal=u.easingFn(h,u.startVal,u.endVal-u.startVal,u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(h/u.duration);var f=u.countDown?u.frameVal<u.endVal:u.frameVal>u.endVal;u.frameVal=f?u.endVal:u.frameVal,u.frameVal=Number(u.frameVal.toFixed(u.options.decimalPlaces)),u.printValue(u.frameVal),h<u.duration?u.rAF=requestAnimationFrame(u.count):u.finalEndVal!==null?u.update(u.finalEndVal):u.options.onCompleteCallback&&u.options.onCompleteCallback()},this.formatNumber=function(d){var h,f,p,m,v=d<0?"-":"";h=Math.abs(d).toFixed(u.options.decimalPlaces);var w=(h+="").split(".");if(f=w[0],p=w.length>1?u.options.decimal+w[1]:"",u.options.useGrouping){m="";for(var y=3,g=0,x=0,N=f.length;x<N;++x)u.options.useIndianSeparators&&x===4&&(y=2,g=1),x!==0&&g%y==0&&(m=u.options.separator+m),g++,m=f[N-x-1]+m;f=m}return u.options.numerals&&u.options.numerals.length&&(f=f.replace(/[0-9]/g,function(E){return u.options.numerals[+E]}),p=p.replace(/[0-9]/g,function(E){return u.options.numerals[+E]})),v+u.options.prefix+f+p+u.options.suffix},this.easeOutExpo=function(d,h,f,p){return f*(1-Math.pow(2,-10*d/p))*1024/1023+h},this.options=r(r({},this.defaults),c),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el=typeof a=="string"?document.getElementById(a):a,l=l??this.parse(this.el.innerHTML),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(l),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,a):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return u.handleScroll(u)}),window.onscroll=function(){window.onScrollFns.forEach(function(d){return d()})},this.handleScroll(this)))}return i.prototype.handleScroll=function(a){if(a&&window&&!a.once){var l=window.innerHeight+window.scrollY,c=a.el.getBoundingClientRect(),u=c.top+window.pageYOffset,d=c.top+c.height+window.pageYOffset;d<l&&d>window.scrollY&&a.paused?(a.paused=!1,setTimeout(function(){return a.start()},a.options.scrollSpyDelay),a.options.scrollSpyOnce&&(a.once=!0)):(window.scrollY>d||u>l)&&!a.paused&&a.reset()}},i.prototype.determineDirectionAndSmartEasing=function(){var a=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>a;var l=a-this.startVal;if(Math.abs(l)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=a;var c=this.countDown?1:-1;this.endVal=a+c*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=a,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},i.prototype.start=function(a){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),a&&(this.options.onCompleteCallback=a),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},i.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},i.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},i.prototype.update=function(a){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(a),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},i.prototype.printValue=function(a){var l;if(this.el){var c=this.formattingFn(a);!((l=this.options.plugin)===null||l===void 0)&&l.render?this.options.plugin.render(this.el,c):this.el.tagName==="INPUT"?this.el.value=c:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=c:this.el.innerHTML=c}},i.prototype.ensureNumber=function(a){return typeof a=="number"&&!isNaN(a)},i.prototype.validateValue=function(a){var l=Number(a);return this.ensureNumber(l)?l:(this.error="[CountUp] invalid start or end value: ".concat(a),null)},i.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},i.prototype.parse=function(a){var l=function(h){return h.replace(/([.,'  ])/g,"\\$1")},c=l(this.options.separator),u=l(this.options.decimal),d=a.replace(new RegExp(c,"g"),"").replace(new RegExp(u,"g"),".");return parseFloat(d)},i}();n.CountUp=s})})(gh,gh.exports);var cT=gh.exports;Object.defineProperty(Ep,"__esModule",{value:!0});var ht=k,uT=cT;function dT(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function C0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C0(Object(n),!0).forEach(function(r){pT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hT(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fT(e){var t=hT(e,"string");return typeof t=="symbol"?t:String(t)}function pT(e,t,n){return t=fT(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yh(){return yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yh.apply(this,arguments)}function mT(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function nk(e,t){if(e==null)return{};var n=mT(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gT(e,t){return yT(e)||dT(e,t)||xT(e,t)||vT()}function yT(e){if(Array.isArray(e))return e}function xT(e,t){if(e){if(typeof e=="string")return T0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T0(e,t)}}function T0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ht.useLayoutEffect:ht.useEffect;function _n(e){var t=ht.useRef(e);return wT(function(){t.current=e}),ht.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current.apply(void 0,r)},[])}var bT=function(t,n){var r=n.decimal,s=n.decimals,i=n.duration,a=n.easingFn,l=n.end,c=n.formattingFn,u=n.numerals,d=n.prefix,h=n.separator,f=n.start,p=n.suffix,m=n.useEasing,v=n.useGrouping,w=n.useIndianSeparators,y=n.enableScrollSpy,g=n.scrollSpyDelay,x=n.scrollSpyOnce,N=n.plugin;return new uT.CountUp(t,l,{startVal:f,duration:i,decimal:r,decimalPlaces:s,easingFn:a,formattingFn:c,numerals:u,separator:h,prefix:d,suffix:p,plugin:N,useEasing:m,useIndianSeparators:w,useGrouping:v,enableScrollSpy:y,scrollSpyDelay:g,scrollSpyOnce:x})},kT=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],jT={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},rk=function(t){var n=Object.fromEntries(Object.entries(t).filter(function($){var O=gT($,2),V=O[1];return V!==void 0})),r=ht.useMemo(function(){return Yl(Yl({},jT),n)},[t]),s=r.ref,i=r.startOnMount,a=r.enableReinitialize,l=r.delay,c=r.onEnd,u=r.onStart,d=r.onPauseResume,h=r.onReset,f=r.onUpdate,p=nk(r,kT),m=ht.useRef(),v=ht.useRef(),w=ht.useRef(!1),y=_n(function(){return bT(typeof s=="string"?s:s.current,p)}),g=_n(function($){var O=m.current;if(O&&!$)return O;var V=y();return m.current=V,V}),x=_n(function(){var $=function(){return g(!0).start(function(){c==null||c({pauseResume:N,reset:E,start:P,update:S})})};l&&l>0?v.current=setTimeout($,l*1e3):$(),u==null||u({pauseResume:N,reset:E,update:S})}),N=_n(function(){g().pauseResume(),d==null||d({reset:E,start:P,update:S})}),E=_n(function(){g().el&&(v.current&&clearTimeout(v.current),g().reset(),h==null||h({pauseResume:N,start:P,update:S}))}),S=_n(function($){g().update($),f==null||f({pauseResume:N,reset:E,start:P})}),P=_n(function(){E(),x()}),T=_n(function($){i&&($&&E(),x())});return ht.useEffect(function(){w.current?a&&T(!0):(w.current=!0,T())},[a,w,T,l,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.formattingFn]),ht.useEffect(function(){return function(){E()}},[E]),{start:P,pauseResume:N,reset:E,update:S,getCountUp:g}},ST=["className","redraw","containerProps","children","style"],NT=function(t){var n=t.className,r=t.redraw,s=t.containerProps,i=t.children,a=t.style,l=nk(t,ST),c=ht.useRef(null),u=ht.useRef(!1),d=rk(Yl(Yl({},l),{},{ref:c,startOnMount:typeof i!="function"||t.delay===0,enableReinitialize:!1})),h=d.start,f=d.reset,p=d.update,m=d.pauseResume,v=d.getCountUp,w=_n(function(){h()}),y=_n(function(N){t.preserveValue||f(),p(N)}),g=_n(function(){if(typeof t.children=="function"&&!(c.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}v()});ht.useEffect(function(){g()},[g]),ht.useEffect(function(){u.current&&y(t.end)},[t.end,y]);var x=r&&t;return ht.useEffect(function(){r&&u.current&&w()},[w,r,x]),ht.useEffect(function(){!r&&u.current&&w()},[w,r,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.className,t.formattingFn]),ht.useEffect(function(){u.current=!0},[]),typeof i=="function"?i({countUpRef:c,start:h,reset:f,update:p,pauseResume:m,getCountUp:v}):ht.createElement("span",yh({className:n,ref:c,style:a},s),typeof t.start<"u"?v().formattingFn(t.start):"")},li=Ep.default=NT;Ep.useCountUp=rk;function _T({sdId:e,onClose:t}){var d,h;const[n,r]=k.useState(null),[s,i]=k.useState(!0),[a,l]=k.useState(null);k.useEffect(()=>{c()},[e]);const c=async()=>{try{i(!0);const f=await fetch(`/api/progress/audit/${e||""}`);if(!f.ok)throw new Error("Failed to fetch audit");const p=await f.json();r(p)}catch(f){l(f.message)}finally{i(!1)}};if(s)return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})});if(a)return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[o.jsxs("p",{className:"text-red-500",children:["Error: ",a]}),o.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-gray-500 text-white rounded",children:"Close"})]})});if(!n)return null;const u=f=>f.complete?"text-green-500":f.progress>0?"text-yellow-500":"text-gray-400";return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wb,{className:"w-6 h-6 mr-2 text-blue-500"}),o.jsx("h2",{className:"text-xl font-semibold",children:"Progress Validation Audit"})]}),o.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:o.jsx(Gr,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:n.title}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Calculated Progress"}),o.jsxs("p",{className:"text-2xl font-bold",children:[n.summary.calculatedProgress,"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Phase"}),o.jsx("p",{className:"text-2xl font-bold",children:n.summary.currentPhase})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Database Status"}),o.jsx("p",{className:"text-2xl font-bold",children:n.summary.databaseStatus})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Can Complete"}),o.jsx("div",{className:"text-2xl font-bold",children:n.summary.canComplete?o.jsx(st,{className:"w-8 h-8 text-green-500"}):o.jsx(Qr,{className:"w-8 h-8 text-red-500"})})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(gr,{className:"w-5 h-5 mr-2"}),"Phase Breakdown"]}),o.jsx("div",{className:"space-y-4",children:Object.entries(n.phaseBreakdown).map(([f,p])=>o.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsxs("span",{className:`text-lg font-semibold ${u(p)}`,children:[f," Agent"]}),o.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(Weight: ",p.weight,"%)"]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("span",{className:"text-lg font-bold",children:[p.progress,"%"]}),p.complete&&o.jsx(st,{className:"w-5 h-5 text-green-500"})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3",children:o.jsx("div",{className:`h-2 rounded-full ${p.complete?"bg-green-500":"bg-blue-500"}`,style:{width:`${p.progress}%`}})}),p.checklist&&p.checklist.length>0&&o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Checklist Items:"}),o.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:p.checklist.map((m,v)=>o.jsxs("div",{className:"flex items-start text-sm",children:[m.checked?o.jsx(gi,{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}):o.jsx(Sp,{className:"w-4 h-4 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),o.jsxs("span",{className:m.checked?"text-gray-600 line-through":"",children:[m.text,m.source&&o.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",m.source,")"]})]})]},v))})]}),f==="EXEC"&&p.indicators&&o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Implementation Indicators:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(p.indicators.indicators).map(([m,v])=>o.jsxs("div",{className:"flex items-center text-sm",children:[v.status?o.jsx(st,{className:"w-4 h-4 text-green-500 mr-2"}):o.jsx(Qr,{className:"w-4 h-4 text-red-500 mr-2"}),o.jsxs("span",{children:[m,": ",v.details||"Not found"]})]},m))})]})]},f))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(DC,{className:"w-5 h-5 mr-2"}),"Progress Calculation"]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[((h=(d=n.phaseBreakdown)==null?void 0:d.PLAN)==null?void 0:h.checklist)&&n.phaseBreakdown.PLAN.checklist.filter(f=>f.text.includes("PRD created and saved")||f.text.includes("requirements mapped")||f.text.includes("specifications complete")||f.text.includes("Prerequisites verified")||f.text.includes("Risk mitigation")||f.text.includes("Context usage")).every(f=>f.checked)&&o.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded",children:[o.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:"⚠️ Progress Calculation Note:"}),o.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"The PLAN phase handoff checklist is complete (PRD created with all handoff items done), but the system is incorrectly counting implementation acceptance criteria as PLAN phase items. According to LEO Protocol v4.0, PLAN phase should be 100% complete when the PRD is created with the handoff checklist done. The actual progress should be approximately 66% (LEAD + PLAN complete)."})]}),o.jsx("p",{className:"font-mono text-sm mb-2",children:n.calculations.formula}),o.jsx("div",{className:"space-y-1",children:n.calculations.breakdown.map((f,p)=>o.jsx("p",{className:`font-mono text-sm ${f.startsWith("Total")?"font-bold text-blue-600 dark:text-blue-400":""}`,children:f},p))})]})]}),n.validation.uncompletedItems>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(Gt,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Validation Issues"]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("p",{className:"font-semibold mb-2",children:[n.validation.uncompletedItems," uncompleted items preventing completion:"]}),n.validation.details.map((f,p)=>o.jsxs("div",{className:"mb-2",children:[o.jsxs("p",{className:"font-medium text-sm",children:[f.source," (",f.phase,"): ",f.items.length," items"]}),o.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400 ml-4",children:f.items.map((m,v)=>o.jsx("li",{children:m},v))})]},p))]})]}),n.recommendations.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(Et,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),o.jsx("div",{className:"space-y-2",children:n.recommendations.map((f,p)=>o.jsxs("div",{className:`flex items-start p-3 rounded-lg ${f.includes("WARNING")?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"}`,children:[f.includes("WARNING")?o.jsx(Gt,{className:"w-5 h-5 text-red-500 mr-2 flex-shrink-0 mt-0.5"}):o.jsx(st,{className:"w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"text-sm",children:f})]},p))})]})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("p",{className:"text-xs text-gray-500",children:["Generated: ",new Date(n.timestamp).toLocaleString()]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Refresh"}),o.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Close"})]})]})]})})}function ET({strategicDirectives:e,prds:t,currentSD:n,onSetActiveSD:r,isCompact:s}){var Ot,ln,Jt,$t,J,Ye,Yn;const i=_p(),[a,l]=k.useState(!1),[c,u]=k.useState(!1),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[m,v]=k.useState(0),[w,y]=k.useState(null),[g,x]=k.useState(""),[N,E]=k.useState({}),[S,P]=k.useState(null),T=k.useRef(null),$=k.useRef(null),O=k.useRef(null);k.useEffect(()=>{function M(se){T.current&&!T.current.contains(se.target)&&l(!1)}if(a)return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[a]);const V=M=>{E(se=>({...se,[M]:!se[M]}))},X=M=>({LEAD_PLANNING:"Strategic planning and directive creation",PLAN_DESIGN:"Technical planning and PRD creation",EXEC_IMPLEMENTATION:"Implementation and development work",PLAN_VERIFICATION:"Testing and verification",LEAD_APPROVAL:"Final approval and deployment",COMPLETE:"All phases completed"})[M]||"Unknown phase",me=M=>{var be,_e,ct,Ce,cn,Qe,Te,Qn,I;if(!M)return[];const se=[];M.checklist&&M.checklist.filter(F=>!F.checked).forEach(F=>{se.push({type:"SD",text:F.text,phase:"LEAD_PLANNING"})});const re=((be=M.prds)==null?void 0:be[0])||(t==null?void 0:t.find(F=>F.directiveId===M.id||F.id===`PRD-${M.id}`))||((ct=(_e=e.find(F=>F.id===M.id))==null?void 0:_e.prds)==null?void 0:ct[0]);if(re){const b=(re.plan_checklist||[]).filter(ae=>typeof ae=="object"?!ae.checked:!0);b.length>0&&se.push({type:"PLAN_DESIGN",text:`Complete ${b.length} planning checklist items`,phase:"PLAN_DESIGN",details:b.slice(0,3).map(ae=>typeof ae=="object"?ae.text:ae)});const Y=(re.exec_checklist||[]).filter(ae=>typeof ae=="object"?!ae.checked:!0);Y.length>0&&se.push({type:"EXEC_IMPLEMENTATION",text:`Complete ${Y.length} implementation tasks`,phase:"EXEC_IMPLEMENTATION",details:Y.slice(0,3).map(ae=>typeof ae=="object"?ae.text:ae)});const ce=(re.validation_checklist||[]).filter(ae=>typeof ae=="object"?!ae.checked:!0);ce.length>0&&se.push({type:"PLAN_VERIFICATION",text:`Complete ${ce.length} verification items`,phase:"PLAN_VERIFICATION",details:ce.slice(0,3).map(ae=>typeof ae=="object"?ae.text:ae)})}return M.progress>=100&&se.length>0?(console.log("⚠️ Progress/Pending Mismatch Detected:",{sdId:M.id,sdProgress:M.progress,pendingCount:se.length,message:"SD shows 100% but has pending items - clearing pending list to match progress"}),[]):(se.length>0&&console.log("🔍 Pending Items Debug:",{sdId:M.id,sdProgress:M.progress,totalPendingItems:se.length,pendingByPhase:se.reduce((F,b)=>(F[b.phase]=(F[b.phase]||0)+1,F),{}),associatedPRDId:re==null?void 0:re.id,prdSource:re?(Ce=M.prds)!=null&&Ce[0]?"SD.prds":t!=null&&t.find(F=>F.directiveId===M.id)?"global prds prop":"strategicDirectives fallback":"none",sdChecklist:(cn=M.checklist)==null?void 0:cn.length,uncheckedSDItems:(Qe=M.checklist)==null?void 0:Qe.filter(F=>!F.checked).length,prdChecklists:re?{plan:(Te=re.plan_checklist)==null?void 0:Te.length,exec:(Qn=re.exec_checklist)==null?void 0:Qn.length,validation:(I=re.validation_checklist)==null?void 0:I.length}:null}),se)},D=(M,se,re)=>{var I,F,b,B,Y,ge,ce,ae,$e,L,U,ee,Q,G,he,fe,oe,ut,Ze,Zn,it,er,is,as,tr,wr,br,kr,pe,un,os,Hi,le,Ke,Yt,bt,Kp,Xp;if(!M)return"";const be=((I=M.checklist)==null?void 0:I.filter(ve=>!ve.checked))||[],_e=((b=(F=M.leoPhase)==null?void 0:F.validation)==null?void 0:b.details)||[],ct=((B=M.leoPhase)==null?void 0:B.remainingTasks)||[],Ce=((Y=M.leoPhase)==null?void 0:Y.phaseProgress)||{},cn=((ce=(ge=re==null?void 0:re.phaseBreakdown)==null?void 0:ge.PLAN)==null?void 0:ce.checklist)||[],Qe=cn.filter(ve=>ve.text.includes("PRD created and saved")||ve.text.includes("SD requirements mapped")||ve.text.includes("Technical specifications complete")||ve.text.includes("Prerequisites verified")||ve.text.includes("Test requirements")||ve.text.includes("Acceptance criteria")||ve.text.includes("Risk mitigation")||ve.text.includes("Context usage")||ve.text.includes("summary created")||ve.text.includes("architecture documented")||ve.text.includes("phases clearly defined")||ve.text.includes("Documentation requirements")),Te=cn.filter(ve=>!Qe.includes(ve)&&!ve.checked);return`# Strategic Directive Completion Request
Generated: ${new Date().toLocaleString()}

## Context
**Project**: LEO Protocol Dashboard Implementation
**SD ID**: ${M.id}
**Title**: ${M.title}
**Priority**: ${((ae=M.metadata)==null?void 0:ae.priority)||"Normal"}
**Owner**: ${(($e=M.metadata)==null?void 0:$e.owner)||"System Administrator"}

## Current Status
- **Overall Progress**: ${se}% complete
- **Active Phase**: ${((L=M.leoPhase)==null?void 0:L.current)||"LEAD"} Agent
- **Phase Status**: ${((U=M.leoPhase)==null?void 0:U.status)||"In Progress"}
- **Database Status**: ${((ee=M.metadata)==null?void 0:ee.Status)||"In Progress"}

## Phase Breakdown
### LEAD Phase (Strategic Planning) - ${((Q=Ce.LEAD)==null?void 0:Q.progress)||0}%
Status: ${(G=Ce.LEAD)!=null&&G.complete?"✅ Complete":"⏳ In Progress"}

### PLAN Phase (Technical Planning) - ${((he=Ce.PLAN)==null?void 0:he.progress)||0}%
Status: ${(fe=Ce.PLAN)!=null&&fe.complete?"✅ Complete":((oe=Ce.PLAN)==null?void 0:oe.progress)>0?"⏳ In Progress":"⏸️ Not Started"}

### EXEC Phase (Implementation) - ${((ut=Ce.EXEC)==null?void 0:ut.progress)||0}%
Status: ${(Ze=Ce.EXEC)!=null&&Ze.complete?"✅ Complete":((Zn=Ce.EXEC)==null?void 0:Zn.progress)>0?"⏳ In Progress":"⏸️ Not Started"}

## Remaining Tasks

### Strategic Directive Checklist (${be.length} items)
${be.length>0?be.map(ve=>`- [ ] ${ve.text}`).join(`
`):"✅ All SD checklist items complete"}

${Te.length>0?`### Implementation Tasks (EXEC Phase - ${Te.length} items)
Note: PLAN phase handoff checklist is complete. These are EXEC phase implementation acceptance criteria.
${Te.slice(0,10).map(ve=>`- [ ] ${ve.text}`).join(`
`)}
${Te.length>10?`
... and ${Te.length-10} more implementation tasks`:""}`:""}

${ct.length>0?`### Phase-Specific Tasks
${ct.map(ve=>`
**${ve.phase} Phase**: ${ve.description}
${ve.tasks?ve.tasks.map(bo=>`  - ${bo}`).join(`
`):""}`).join(`
`)}`:""}

## Validation Issues
${_e.length>0?_e.map(ve=>`- **${ve.source}** (${ve.phase}): ${ve.items.length} unchecked items`).join(`
`):"✅ No validation issues"}

${re?`## Progress Audit Analysis

### Important Note on Progress Calculation
The dashboard currently shows ${se}% overall progress. However, according to LEO Protocol v4.0:
- LEAD Phase (33.33%): ${(it=Ce.LEAD)!=null&&it.complete?"✅ COMPLETE":"In Progress"} 
- PLAN Phase (33.33%): ${(er=Ce.PLAN)!=null&&er.complete||Qe.every(ve=>ve.checked)?"✅ COMPLETE (PRD created with handoff checklist done)":"In Progress"}
- EXEC Phase (33.34%): ${((is=Ce.EXEC)==null?void 0:is.progress)>0?`In Progress (${(as=Ce.EXEC)==null?void 0:as.progress}%)`:"Not Started"}

**Actual Progress**: ${(tr=Ce.LEAD)!=null&&tr.complete&&((wr=Ce.PLAN)!=null&&wr.complete||Qe.every(ve=>ve.checked))?"66%":se+"%"} - PLAN phase should be marked complete when PRD is created with handoff checklist done.

### Calculation Breakdown
${((kr=(br=re.calculations)==null?void 0:br.breakdown)==null?void 0:kr.join(`
`))||"No calculation data available"}

### Audit Recommendations
${((pe=re.recommendations)==null?void 0:pe.length)>0?re.recommendations.map(ve=>`- ${ve}`).join(`
`):"✅ No issues found in audit"}

### Implementation Indicators
${(os=(un=re.phaseBreakdown)==null?void 0:un.EXEC)!=null&&os.indicators?Object.entries(re.phaseBreakdown.EXEC.indicators.indicators||{}).map(([ve,bo])=>`- ${ve}: ${bo.status?"✅":"❌"} ${bo.details||""}`).join(`
`):"No implementation indicators available"}
`:""}

## Next Steps
${((Hi=M.leoPhase)==null?void 0:Hi.current)==="LEAD"&&((le=Ce.LEAD)!=null&&le.complete)?`1. Create a Product Requirements Document (PRD) for technical planning
2. Perform LEAD-to-PLAN handoff`:""}
${((Ke=M.leoPhase)==null?void 0:Ke.current)==="PLAN"&&((Yt=Ce.PLAN)!=null&&Yt.complete)?`1. Begin implementation phase
2. Perform PLAN-to-EXEC handoff`:""}
${((bt=M.leoPhase)==null?void 0:bt.current)==="EXEC"&&((Kp=Ce.EXEC)!=null&&Kp.complete)?`1. Complete final testing and validation
2. Perform EXEC-to-COMPLETE handoff`:""}
${be.length>0||cn.length>0?"Priority: Complete all unchecked items listed above":""}

## Instructions
Please help me complete the remaining tasks for this Strategic Directive following LEO Protocol v4.0 standards. Focus on:
1. Completing all unchecked checklist items
2. Ensuring proper handoffs between phases
3. Maintaining documentation and test coverage
4. Following the established project patterns and conventions

${(Xp=M.metadata)!=null&&Xp.PRD?`PRD Location: ${M.metadata.PRD}`:"Note: No PRD linked yet"}

Please proceed with the implementation.`},R=n?e.find(M=>M.id===n):null,q=!R&&e.length>0?e.find(M=>{var be,_e;const se=((be=M.checklist)==null?void 0:be.filter(ct=>ct.checked).length)||0,re=((_e=M.checklist)==null?void 0:_e.length)||0;return re>0&&se<re})||e[0]:null,A=R||q;if(k.useEffect(()=>{(c||m>0)&&A&&fetch(`/api/progress/audit/${A.id}`).then(M=>M.json()).then(M=>y(M)).catch(M=>console.error("Failed to fetch audit:",M))},[c,m,A==null?void 0:A.id]),!A)return o.jsx("div",{className:`bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 border-l-4 border-gray-400 ${s?"p-3":"p-4"} mb-6 rounded-lg`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Gt,{className:`${s?"w-5 h-5":"w-6 h-6"} text-gray-500 mr-3`}),o.jsxs("div",{children:[o.jsx("h3",{className:`${s?"text-sm":"text-base"} font-semibold text-gray-700 dark:text-gray-300`,children:"No Active Strategic Directive"}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 mt-1`,children:"Create a new Strategic Directive to start tracking progress"})]})]})});const C=((Ot=A.checklist)==null?void 0:Ot.filter(M=>M.checked).length)||0,z=((ln=A.checklist)==null?void 0:ln.length)||0,j=A.progress!==void 0?A.progress:z>0?Math.round(C/z*100):0,ie=j===100?{status:"Complete",color:"text-green-700 dark:text-green-300",bgColor:"from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",borderColor:"border-green-400",progressColor:"bg-green-500",icon:st}:j>=50?{status:"In Progress",color:"text-blue-700 dark:text-blue-300",bgColor:"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",borderColor:"border-blue-400",progressColor:"bg-blue-500",icon:or}:{status:"Just Started",color:"text-amber-700 dark:text-amber-300",bgColor:"from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20",borderColor:"border-amber-400",progressColor:"bg-amber-500",icon:Rn},_=ie.icon,Se=e.filter(M=>{var re,be;if(!g.trim())return!0;const se=g.toLowerCase();return M.id.toLowerCase().includes(se)||M.title&&M.title.toLowerCase().includes(se)||((re=M.metadata)==null?void 0:re.Status)&&M.metadata.Status.toLowerCase().includes(se)||((be=M.metadata)==null?void 0:be.Priority)&&M.metadata.Priority.toLowerCase().includes(se)}),pt=()=>{l(!a),a||setTimeout(()=>{var M;(M=O.current)==null||M.focus()},100)},je=M=>{x(M.target.value)},wt=M=>{if(M.key==="Escape")l(!1),x("");else if(M.key==="Enter"&&Se.length>0){const se=Se[0];r&&se.id!==n&&(r(se.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:se.id,sd:se}}))),l(!1),x("")}};return o.jsxs("div",{className:`bg-gradient-to-r ${ie.bgColor} border-l-4 ${ie.borderColor} ${s?"p-2 sm:p-3":"p-3 sm:p-4"} mb-4 sm:mb-6 rounded-lg shadow-sm`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[o.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[o.jsx(_,{className:`${s?"w-4 sm:w-5 h-4 sm:h-5":"w-5 sm:w-6 h-5 sm:h-6"} ${ie.color} mr-2 sm:mr-3 flex-shrink-0`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"relative",ref:T,children:[o.jsxs(te.button,{onClick:pt,className:`flex items-center justify-between w-full text-left ${s?"text-xs sm:text-sm":"text-sm sm:text-base"} font-semibold ${ie.color} hover:bg-white/10 rounded px-1 sm:px-2 py-1 transition-colors min-w-0`,whileHover:{scale:i?1:1.02},whileTap:{scale:i?1:.98},"aria-label":"Select Strategic Directive","aria-expanded":a,"aria-haspopup":"listbox",children:[o.jsxs("span",{className:"truncate",children:["Active: ",A.title&&A.title!=="[Enter Strategic Directive Title]"?A.title:A.id]}),o.jsx(te.div,{animate:{rotate:a?180:0},transition:{duration:i?0:.2,ease:"easeOut"},className:"flex-shrink-0 ml-1",children:o.jsx(yn,{className:`${s?"w-3 sm:w-4 h-3 sm:h-4":"w-4 sm:w-5 h-4 sm:h-5"}`})})]}),o.jsx(en,{children:a&&e.length>0&&o.jsxs(te.div,{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-80 flex flex-col",initial:{opacity:0,y:i?0:-10,scale:i?1:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:i?0:-10,scale:i?1:.95},transition:{duration:i?0:.2,ease:"easeOut"},children:[o.jsxs("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:[o.jsx("input",{ref:O,type:"text",placeholder:"Search Strategic Directives...",value:g,onChange:je,onKeyDown:wt,className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-500 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-label":"Search Strategic Directives"}),g&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[Se.length," of ",e.length," results"]})]}),o.jsx("div",{className:"max-h-60 overflow-y-auto",children:Se.length===0&&g?o.jsxs("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-sm",children:['No Strategic Directives found for "',g,'"']}):Se.map((M,se)=>{const re=M.id===n||M.id===A.id&&!n,be=M.progress!==void 0?M.progress:0;return o.jsx("button",{onClick:()=>(r&&(r(M.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:M.id,sd:M}}))),l(!1),x(""),!1),className:`w-full text-left px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${re?"bg-primary-50 dark:bg-primary-900/20":""}`,children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center",children:[re&&o.jsx(Vn,{className:"w-4 h-4 text-primary-600 mr-2 flex-shrink-0"}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} font-medium text-gray-900 dark:text-white truncate ${re?"ml-0":"ml-6"}`,children:M.title&&M.title!=="[Enter Strategic Directive Title]"?M.title:M.id})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1 overflow-hidden",children:o.jsx(te.div,{className:`h-1 rounded-full ${be===100?"bg-green-500":be>=50?"bg-blue-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${be}%`},transition:{duration:i?0:.8,ease:"easeOut",delay:i?0:se*.1}})})}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 ml-2`,children:o.jsx(li,{end:be,duration:i?0:1,preserveValue:!0,suffix:"%"})})]}),M.leoPhase&&o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${M.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${M.leoPhase.phases.PLAN?"bg-green-500":M.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${M.leoPhase.phases.EXEC?"bg-green-500":M.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:M.leoPhase.current})]})]})})},M.id)})})]})})]}),o.jsx("p",{className:`${s?"text-xs":"text-xs sm:text-sm"} text-gray-600 dark:text-gray-400 mt-1`,children:A.leoPhase?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"font-medium",children:"LEO Protocol:"})," ",A.leoPhase.status]}):`${ie.status} • ${C} of ${z} items completed`}),A.leoPhase&&o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 mt-2",children:[o.jsxs("div",{className:`flex items-center text-xs ${A.leoPhase.phases.LEAD?"text-green-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${A.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),"LEAD"]}),o.jsxs("div",{className:`flex items-center text-xs ${A.leoPhase.phases.PLAN?"text-green-600 font-medium":A.leoPhase.current==="PLAN"?"text-blue-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${A.leoPhase.phases.PLAN?"bg-green-500":A.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),"PLAN"]}),o.jsxs("div",{className:`flex items-center text-xs ${A.leoPhase.phases.EXEC?"text-green-600 font-medium":A.leoPhase.current==="EXEC"?"text-blue-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${A.leoPhase.phases.EXEC?"bg-green-500":A.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),"EXEC"]})]})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1 sm:gap-2 flex-shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:`${s?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold ${ie.color}`,children:o.jsx(li,{end:j,duration:i?0:2,preserveValue:!0,suffix:"%"})}),((Jt=A.metadata)==null?void 0:Jt.priority)&&o.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Priority: ",A.metadata.priority]})]}),o.jsxs("div",{className:"flex gap-1 flex-wrap justify-end",children:[o.jsxs(te.button,{onClick:()=>p(!0),className:"flex items-center px-2 py-1 text-xs bg-blue-500/20 dark:bg-blue-400/20 hover:bg-blue-500/30 dark:hover:bg-blue-400/30 rounded transition-all",title:"View progress validation audit",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[o.jsx(Wb,{className:"w-3 h-3 mr-1"}),o.jsx("span",{children:"Audit"})]}),o.jsxs(te.button,{onClick:()=>u(!c),className:"flex items-center px-2 py-1 text-xs bg-purple-500/20 dark:bg-purple-400/20 hover:bg-purple-500/30 dark:hover:bg-purple-400/30 rounded transition-all",title:"Generate AI prompt for remaining tasks",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[o.jsx(Xl,{className:"w-3 h-3 mr-1"}),o.jsx("span",{children:"AI Prompt"})]})]})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3 overflow-hidden",children:o.jsx(te.div,{className:`h-3 ${ie.progressColor} rounded-full relative`,initial:{width:0},animate:{width:`${j}%`},transition:{duration:i?0:1.2,ease:"easeOut",delay:i?0:.2},children:!i&&o.jsxs(o.Fragment,{children:[o.jsx(te.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,ease:"linear"}}),o.jsx(te.div,{className:"absolute inset-0 bg-white/20 rounded-full",animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})})}),o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:`${s?"text-sm":"text-base"} font-semibold ${ie.color}`,children:["Current Phase: ",(($t=A.metadata)==null?void 0:$t["Current Phase"])||"LEAD_PLANNING"]}),o.jsxs("button",{onClick:()=>V("phaseInfo"),className:"flex items-center text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:[o.jsx(Tn,{className:"w-3 h-3 mr-1"}),"Info"]})]}),((J=A.metadata)==null?void 0:J.date)&&o.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Created: ",new Date(A.metadata.date).toLocaleDateString()]})]}),o.jsx(en,{children:N.phaseInfo&&o.jsx(te.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.2},className:"overflow-hidden",children:o.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-blue-800 dark:text-blue-200`,children:[o.jsx("strong",{children:"LEO Protocol Flow:"})," LEAD → PLAN → EXEC → VERIFICATION → APPROVAL"]}),o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-blue-700 dark:text-blue-300 mt-1`,children:X(((Ye=A.metadata)==null?void 0:Ye["Current Phase"])||"LEAD_PLANNING")})]})})}),((Yn=A.metadata)==null?void 0:Yn["Phase Progress"])&&typeof A.metadata["Phase Progress"]=="object"&&o.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(A.metadata["Phase Progress"]).map(([M,se])=>{var ct;const re=typeof se=="number"?se:parseInt(se)||0,be=re===100,_e=M===((ct=A.metadata)==null?void 0:ct["Current Phase"]);return o.jsxs("div",{className:`text-center p-2 rounded ${be?"bg-green-50 dark:bg-green-900/20":_e?"bg-blue-50 dark:bg-blue-900/20":"bg-gray-50 dark:bg-gray-800"}`,children:[o.jsx("div",{className:`${s?"text-xs":"text-sm"} font-medium ${be?"text-green-700 dark:text-green-300":_e?"text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400"}`,children:M.split("_")[0]}),o.jsx("div",{className:`${s?"text-xs":"text-sm"} font-bold ${be?"text-green-600 dark:text-green-400":_e?"text-blue-600 dark:text-blue-400":"text-gray-400"}`,children:be?o.jsx(Vn,{className:"w-4 h-4 mx-auto"}):`${re}%`})]},M)})}),(()=>{const M=me(A);return M.length===0?null:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>V("pendingWork"),className:"flex items-center justify-between w-full p-2 bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg border border-amber-200 dark:border-amber-700 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(HC,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 mr-2"}),o.jsxs("span",{className:`${s?"text-sm":"text-base"} font-medium text-amber-800 dark:text-amber-200`,children:[M.length," Pending Task",M.length>1?"s":""]})]}),o.jsx(Nt,{className:`w-4 h-4 text-amber-600 dark:text-amber-400 transform transition-transform ${N.pendingWork?"rotate-90":""}`})]}),o.jsx(en,{children:N.pendingWork&&o.jsx(te.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.3},className:"overflow-hidden",children:o.jsxs("div",{className:"space-y-2 pl-4",children:[M.slice(0,5).map((se,re)=>o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 mt-2 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-700 dark:text-gray-300`,children:se.text}),o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:[se.phase.replace("_"," ")," Phase • ",se.type]}),se.details&&se.details.length>0&&o.jsx("div",{className:"mt-1 pl-2 border-l-2 border-amber-200 dark:border-amber-700",children:se.details.map((be,_e)=>o.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:["• ",be]},_e))})]})]},re)),M.length>5&&o.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 italic pl-4`,children:["... and ",M.length-5," more items"]})]})})})]})})(),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(cr,{to:`/strategic-directives/${A.id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full transition-colors",children:[o.jsx(Et,{className:"w-3 h-3 mr-1"}),"View SD Document",o.jsx(Kl,{className:"w-3 h-3 ml-1"})]}),A.prds&&A.prds.length>0&&o.jsxs(cr,{to:`/prds/${A.prds[0].id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50 text-green-700 dark:text-green-300 rounded-full transition-colors",children:[o.jsx(Et,{className:"w-3 h-3 mr-1"}),"View PRD Document",o.jsx(Kl,{className:"w-3 h-3 ml-1"})]})]})]}),c&&o.jsxs("div",{className:"mt-4 p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Xl,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mr-2"}),o.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:"AI Prompt for Remaining Tasks"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>v(M=>M+1),className:"flex items-center px-2 py-1 text-xs bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700 rounded transition-all",title:"Refresh prompt with latest data",children:[o.jsx(qr,{className:"w-3 h-3 mr-1"}),"Refresh"]}),o.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:"×"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("pre",{ref:$,className:"bg-white dark:bg-gray-800 p-3 rounded border border-purple-200 dark:border-purple-700 text-sm overflow-x-auto whitespace-pre-wrap max-h-96 overflow-y-auto",children:D(A,j,w)},m),o.jsx("button",{onClick:()=>{var se;const M=((se=$.current)==null?void 0:se.innerText)||"";navigator.clipboard.writeText(M).then(()=>{h(!0),setTimeout(()=>h(!1),2e3)})},className:`absolute top-2 right-2 flex items-center px-2 py-1 text-xs rounded transition-all ${d?"bg-green-500 text-white":"bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700"}`,children:d?o.jsxs(o.Fragment,{children:[o.jsx(Vn,{className:"w-3 h-3 mr-1"}),"Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(bp,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Copy this prompt and paste it into Claude Code to get help completing the remaining tasks."})]}),f&&o.jsx(_T,{sdId:A.id,onClose:()=>p(!1)})]})}const PT="modulepreload",CT=function(e){return"/"+e},A0={},go=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=CT(c),c in A0)return;A0[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":PT,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},TT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>go(async()=>{const{default:r}=await Promise.resolve().then(()=>Ui);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Pp extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class I0 extends Pp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class R0 extends Pp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class D0 extends Pp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xh||(xh={}));var AT=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class IT{constructor(t,{headers:n={},customFetch:r,region:s=xh.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=TT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return AT(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a,signal:l}=n;let c={},{region:u}=n;u||(u=this.region);const d=new URL(`${this.url}/${t}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:l}).catch(w=>{throw w.name==="AbortError"?w:new I0(w)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new R0(f);if(!f.ok)throw new D0(f);let m=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return m==="application/json"?v=yield f.json():m==="application/octet-stream"?v=yield f.blob():m==="text/event-stream"?v=f:m==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new I0(s)}:{data:null,error:s,response:s instanceof D0||s instanceof R0?s.context:void 0}}})}}var Vt={},Cp={},Ec={},yo={},Pc={},Cc={},RT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ti=RT();const DT=Ti.fetch,sk=Ti.fetch.bind(Ti),ik=Ti.Headers,LT=Ti.Request,OT=Ti.Response,Ui=Object.freeze(Object.defineProperty({__proto__:null,Headers:ik,Request:LT,Response:OT,default:sk,fetch:DT},Symbol.toStringTag,{value:"Module"})),$T=f1(Ui);var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});let MT=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Tc.default=MT;var ak=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cc,"__esModule",{value:!0});const FT=ak($T),UT=ak(Tc);let VT=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=FT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,u;let d=null,h=null,f=null,p=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=g:h=JSON.parse(g))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,m="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const w=await i.text();try{d=JSON.parse(w),Array.isArray(d)&&i.status===404&&(h=[],d=null,p=200,m="OK")}catch{i.status===404&&w===""?(p=204,m="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new UT.default(d)}return{error:d,data:h,count:f,status:p,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Cc.default=VT;var zT=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pc,"__esModule",{value:!0});const BT=zT(Cc);let HT=class extends BT.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Pc.default=HT;var WT=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yo,"__esModule",{value:!0});const qT=WT(Pc);let GT=class extends qT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};yo.default=GT;var KT=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ec,"__esModule",{value:!0});const ea=KT(yo);let XT=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new ea.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ea.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ea.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ea.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ea.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ec.default=XT;var ok=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cp,"__esModule",{value:!0});const JT=ok(Ec),YT=ok(yo);let QT=class lk{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new JT.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new lk(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new YT.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Cp.default=QT;var Vi=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.PostgrestError=Vt.PostgrestBuilder=Vt.PostgrestTransformBuilder=Vt.PostgrestFilterBuilder=Vt.PostgrestQueryBuilder=Vt.PostgrestClient=void 0;const ck=Vi(Cp);Vt.PostgrestClient=ck.default;const uk=Vi(Ec);Vt.PostgrestQueryBuilder=uk.default;const dk=Vi(yo);Vt.PostgrestFilterBuilder=dk.default;const hk=Vi(Pc);Vt.PostgrestTransformBuilder=hk.default;const fk=Vi(Cc);Vt.PostgrestBuilder=fk.default;const pk=Vi(Tc);Vt.PostgrestError=pk.default;var ZT=Vt.default={PostgrestClient:ck.default,PostgrestQueryBuilder:uk.default,PostgrestFilterBuilder:dk.default,PostgrestTransformBuilder:hk.default,PostgrestBuilder:fk.default,PostgrestError:pk.default};const{PostgrestClient:e4,PostgrestQueryBuilder:lL,PostgrestFilterBuilder:cL,PostgrestTransformBuilder:uL,PostgrestBuilder:dL,PostgrestError:hL}=ZT;class t4{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const n4="2.15.5",r4=`realtime-js/${n4}`,s4="1.0.0",vh=1e4,i4=1e3,a4=100;var Na;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Na||(Na={}));var at;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(at||(at={}));var Pn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Pn||(Pn={}));var wh;(function(e){e.websocket="websocket"})(wh||(wh={}));var gs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(gs||(gs={}));class o4{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class mk{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ae||(Ae={}));const L0=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=l4(a,e,t,s),i),{})},l4=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?gk(i,a):bh(a)},gk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return h4(t,n)}switch(e){case Ae.bool:return c4(t);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return u4(t);case Ae.json:case Ae.jsonb:return d4(t);case Ae.timestamp:return f4(t);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return bh(t);default:return bh(t)}},bh=e=>e,c4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},u4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},d4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},h4=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>gk(t,l))}return e},f4=e=>typeof e=="string"?e.replace(" ","T"):e,yk=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Pu{constructor(t,n,r={},s=vh){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var O0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(O0||(O0={}));class _a{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_a.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=_a.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=_a.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),p=h.map(w=>w.presence_ref),m=d.filter(w=>p.indexOf(w.presence_ref)<0),v=h.filter(w=>f.indexOf(w.presence_ref)<0);m.length>0&&(l[u]=m),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...f)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})($0||($0={}));var Ea;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ea||(Ea={}));var rr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(rr||(rr={}));class Tp{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=at.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Pu(this,Pn.join,this.params,this.timeout),this.rejoinTimer=new mk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=at.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=at.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new _a(this),this.broadcastEndpointURL=yk(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==at.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ea.PRESENCE]&&this.bindings[Ea.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(rr.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(rr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){t==null||t(rr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,y=[];for(let g=0;g<w;g++){const x=v[g],{filter:{event:N,schema:E,table:S,filter:P}}=x,T=p&&p[g];if(T&&T.event===N&&T.schema===E&&T.table===S&&T.filter===P)y.push(Object.assign(Object.assign({},x),{id:T.id}));else{this.unsubscribe(),this.state=at.errored,t==null||t(rr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(rr.SUBSCRIBED);return}}).receive("error",p=>{this.state=at.errored,t==null||t(rr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(rr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===at.joined&&t===Ea.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=at.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Pu(this,Pn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=at.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Pu(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>a4){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Pn;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,v,w;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((w=(v=p.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(p=>p.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var m,v,w,y,g,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const N=p.id,E=(m=p.filter)===null||m===void 0?void 0:m.event;return N&&((v=n.ids)===null||v===void 0?void 0:v.includes(N))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const N=(g=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return N==="*"||N===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:v,table:w,commit_timestamp:y,type:g,errors:x}=m;f=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:y,eventType:g,new:{},old:{},errors:x}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===at.closed}_isJoined(){return this.state===at.joined}_isJoining(){return this.state===at.joining}_isLeaving(){return this.state===at.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Tp.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Pn.close,{},t)}_onError(t){this._on(Pn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=at.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=L0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=L0(t.columns,t.old_record)),n}}const Cu=()=>{},Bo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},p4=[1e3,2e3,5e3,1e4],m4=1e4,g4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class y4{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vh,this.transport=null,this.heartbeatIntervalMs=Bo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cu,this.ref=0,this.reconnectTimer=null,this.logger=Cu,this.conn=null,this.sendBuffer=[],this.serializer=new o4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>go(async()=>{const{default:l}=await Promise.resolve().then(()=>Ui);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${wh.websocket}`,this.httpEndpoint=yk(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=t4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:s4}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Na.connecting:return gs.Connecting;case Na.open:return gs.Open;case Na.closing:return gs.Closing;default:return gs.Closed}}isConnected(){return this.connectionState()===gs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Tp(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(i4,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Bo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Pn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([g4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:r4};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Pn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new mk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:vh,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Bo.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Cu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>p4[h-1]||m4,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ap extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function tt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class x4 extends Ap{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kh extends Ap{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var v4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const xk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>go(async()=>{const{default:r}=await Promise.resolve().then(()=>Ui);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},w4=()=>v4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield go(()=>Promise.resolve().then(()=>Ui),void 0)).Response:Response}),jh=e=>{if(Array.isArray(e))return e.map(n=>jh(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=jh(r)}),t},b4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ds=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Tu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),k4=(e,t,n)=>Ds(void 0,void 0,void 0,function*(){const r=yield w4();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new x4(Tu(s),i,a))}).catch(s=>{t(new kh(Tu(s),s))}):t(new kh(Tu(e),e))}),j4=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(b4(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function xo(e,t,n,r,s,i){return Ds(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,j4(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>k4(c,l,r))})})}function Ql(e,t,n,r){return Ds(this,void 0,void 0,function*(){return xo(e,"GET",t,n,r)})}function Mn(e,t,n,r,s){return Ds(this,void 0,void 0,function*(){return xo(e,"POST",t,r,s,n)})}function Sh(e,t,n,r,s){return Ds(this,void 0,void 0,function*(){return xo(e,"PUT",t,r,s,n)})}function S4(e,t,n,r){return Ds(this,void 0,void 0,function*(){return xo(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function vk(e,t,n,r,s){return Ds(this,void 0,void 0,function*(){return xo(e,"DELETE",t,r,s,n)})}var N4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class _4{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return N4(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}}var E4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class P4{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new _4(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return E4(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}}var Mt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const C4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},M0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class T4{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=xk(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Mt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},M0),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?Sh:Mn)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Mt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:M0.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Sh(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(tt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Mt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Mn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Ap("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Mt(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Mt(this,void 0,void 0,function*(){try{return{data:{path:(yield Mn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Mt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Mn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Mt(this,void 0,void 0,function*(){try{const s=yield Mn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Ql(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new P4(c,this.shouldThrowOnError)}info(t){return Mt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Ql(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:jh(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}exists(t){return Mt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield S4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r)&&r instanceof kh){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield vk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Mt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},C4),n),{prefix:t||""});return{data:yield Mn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Mt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Mn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const A4="2.12.2",I4={"X-Client-Info":`storage-js/${A4}`};var $s=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class R4{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},I4),n),this.fetch=xk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return $s(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}getBucket(t){return $s(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return $s(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return $s(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return $s(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return $s(this,void 0,void 0,function*(){try{return{data:yield vk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}}class D4 extends R4{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new T4(this.url,this.headers,t,this.fetch)}}const L4="2.58.0";let ua="";typeof Deno<"u"?ua="deno":typeof document<"u"?ua="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ua="react-native":ua="node";const O4={"X-Client-Info":`supabase-js-${ua}/${L4}`},$4={headers:O4},M4={schema:"public"},F4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},U4={};var V4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const z4=e=>{let t;return e?t=e:typeof fetch>"u"?t=sk:t=fetch,(...n)=>t(...n)},B4=()=>typeof Headers>"u"?ik:Headers,H4=(e,t,n)=>{const r=z4(n),s=B4();return(i,a)=>V4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var W4=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function q4(e){return e.endsWith("/")?e:e+"/"}function G4(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>W4(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function K4(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(q4(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const wk="2.72.0",Bs=30*1e3,Nh=3,Au=Nh*Bs,X4="http://localhost:9999",J4="supabase.auth.token",Y4={"X-Client-Info":`gotrue-js/${wk}`},_h="X-Supabase-Api-Version",bk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Q4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Z4=10*60*1e3;class Ip extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ye(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class e5 extends Ip{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function t5(e){return ye(e)&&e.name==="AuthApiError"}class kk extends Ip{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class rs extends Ip{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Er extends rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function n5(e){return ye(e)&&e.name==="AuthSessionMissingError"}class ta extends rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ho extends rs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wo extends rs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function r5(e){return ye(e)&&e.name==="AuthImplicitGrantRedirectError"}class F0 extends rs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Eh extends rs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Iu(e){return ye(e)&&e.name==="AuthRetryableFetchError"}class U0 extends rs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ph extends rs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),V0=` 	
\r=`.split(""),s5=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<V0.length;t+=1)e[V0[t].charCodeAt(0)]=-2;for(let t=0;t<Zl.length;t+=1)e[Zl[t].charCodeAt(0)]=t;return e})();function z0(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Zl[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Zl[r]),t.queuedBits-=6}}function jk(e,t,n){const r=s5[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function B0(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{o5(a,r,n)};for(let a=0;a<e.length;a+=1)jk(e.charCodeAt(a),s,i);return t.join("")}function i5(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function a5(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}i5(r,t)}}function o5(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function l5(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)jk(e.charCodeAt(s),n,r);return new Uint8Array(t)}function c5(e){const t=[];return a5(e,n=>t.push(n)),new Uint8Array(t)}function u5(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>z0(s,n,r)),z0(null,n,r),t.join("")}function d5(e){return Math.round(Date.now()/1e3)+e}function h5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const hn=()=>typeof window<"u"&&typeof document<"u",us={tested:!1,writable:!1},Sk=()=>{if(!hn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(us.tested)return us.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),us.tested=!0,us.writable=!0}catch{us.tested=!0,us.writable=!1}return us.writable};function f5(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Nk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>go(async()=>{const{default:r}=await Promise.resolve().then(()=>Ui);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},p5=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Hs=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ds=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Sr=async(e,t)=>{await e.removeItem(t)};class Ac{constructor(){this.promise=new Ac.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ac.promiseConstructor=Promise;function Ru(e){const t=e.split(".");if(t.length!==3)throw new Ph("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Q4.test(t[r]))throw new Ph("JWT not in base64url format");return{header:JSON.parse(B0(t[0])),payload:JSON.parse(B0(t[1])),signature:l5(t[2]),raw:{header:t[0],payload:t[1]}}}async function m5(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function g5(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function y5(e){return("0"+e.toString(16)).substr(-2)}function x5(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,y5).join("")}async function v5(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function w5(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await v5(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ms(e,t,n=!1){const r=x5();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Hs(e,`${t}-code-verifier`,s);const i=await w5(r);return[i,r===i?"plain":"s256"]}const b5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function k5(e){const t=e.headers.get(_h);if(!t||!t.match(b5))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function j5(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function S5(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const N5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fs(e){if(!N5.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Du(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function H0(e){return JSON.parse(JSON.stringify(e))}var _5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ms=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),E5=[502,503,504];async function W0(e){var t;if(!p5(e))throw new Eh(ms(e),0);if(E5.includes(e.status))throw new Eh(ms(e),e.status);let n;try{n=await e.json()}catch(i){throw new kk(ms(i),i)}let r;const s=k5(e);if(s&&s.getTime()>=bk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new U0(ms(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Er}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new U0(ms(n),e.status,n.weak_password.reasons);throw new e5(ms(n),e.status||500,r)}const P5=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function we(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[_h]||(i[_h]=bk["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await C5(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function C5(e,t,n,r,s,i){const a=P5(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new Eh(ms(c),0)}if(l.ok||await W0(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await W0(c)}}function On(e){var t;let n=null;R5(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=d5(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function q0(e){const t=On(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ir(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function T5(e){return{data:e,error:null}}function A5(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=_5(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function I5(e){return e}function R5(e){return e.access_token&&e.refresh_token&&e.expires_in}const Lu=["global","local","others"];var D5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class L5{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Nk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Lu[0]){if(Lu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lu.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ye(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ir})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=D5(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:A5,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ye(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ir})}catch(n){if(ye(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:I5});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ye(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Fs(t);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ir})}catch(n){if(ye(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Fs(t);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ir})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Fs(t);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ir})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Fs(t.userId);try{const{data:n,error:r}=await we(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ye(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Fs(t.userId),Fs(t.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ye(n))return{data:null,error:n};throw n}}}function G0(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function O5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Us={debug:!!(globalThis&&Sk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _k extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class $5 extends _k{}async function M5(e,t,n){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new $5(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Us.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Ek(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function F5(e){return parseInt(e,16)}function U5(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function V5(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=Ek(e.address),m=d?`${d}://${r}`:r,v=e.statement?`${e.statement}
`:"",w=`${m} wants you to sign in with your Ethereum account:
${p}

${v}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);g+=`
- ${x}`}y+=g}return`${w}
${y}`}O5();const z5={url:X4,storageKey:J4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Y4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function K0(e,t,n){return await n()}const Vs={};class ro{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ro.nextInstanceID,ro.nextInstanceID+=1,this.instanceID>0&&hn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},z5),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new L5({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Nk(s.fetch),this.lock=s.lock||K0,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:hn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=M5:this.lock=K0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Sk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=G0(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=G0(this.memoryStorage)),hn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Vs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Vs[this.storageKey]=Object.assign(Object.assign({},Vs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Vs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Vs[this.storageKey]=Object.assign(Object.assign({},Vs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${wk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=f5(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),hn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),r5(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ye(n)?{error:n}:{error:new kk("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:On}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ye(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Ms(this.storage,this.storageKey)),i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:On})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:On})}else throw new Ho("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ye(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:q0})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:q0})}else throw new Ho("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ta}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,a,l,c,u,d,h,f;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:v,wallet:w,statement:y,options:g}=t;let x;if(hn())if(typeof w=="object")x=w;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")x=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const N=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),E=await x.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Ek(E[0]);let P=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const $=await x.request({method:"eth_chainId"});P=F5($)}const T={domain:N.host,address:S,statement:y,uri:N.href,version:"1",chainId:P,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=V5(T),m=await x.request({method:"personal_sign",params:[U5(p),S]})}try{const{data:v,error:w}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:On});if(w)throw w;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new ta}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:w})}catch(v){if(ye(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,h,f,p;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:w,wallet:y,statement:g,options:x}=t;let N;if(hn())if(typeof y=="object")N=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))N=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=y}const E=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const S=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let P;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")P=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)P=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)m=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${E.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const S=await N.signMessage(new TextEncoder().encode(m),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:w,error:y}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:u5(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:On});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new ta}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(ye(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await ds(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:On});if(await Sr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ta}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(ye(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:On}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ta}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ms(this.storage,this.storageKey));const{error:h}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ho("You must provide either an email or phone number.")}catch(l){if(ye(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:On});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Ms(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:T5})}catch(i){if(ye(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Er;const{error:s}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ye(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await we(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await we(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ho("You must provide either an email or phone number and a type")}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ds(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Au:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await ds(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Du()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ir}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Er}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ir})})}catch(n){if(ye(n))return n5(n)&&(await this._removeSession(),await Sr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Er;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ms(this.storage,this.storageKey));const{data:u,error:d}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Ir});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Er;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Ru(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ye(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Er;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!hn())throw new Wo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new F0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new F0("No code detected.");const{data:g,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Wo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Bs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(ye(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ds(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(t5(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Sr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=h5(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ms(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ye(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ye(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return hn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ye(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ye(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await g5(async s=>(s>0&&await m5(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:On})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Iu(i)&&Date.now()+a-r<Bs})}catch(r){if(this._debug(n,"error",r),ye(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),hn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ds(this.storage,this.storageKey);if(s&&this.userStorage){let a=await ds(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Hs(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Du()}else if(s&&!s.user&&!s.user){const a=await ds(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Sr(this.storage,this.storageKey+"-user"),await Hs(this.storage,this.storageKey,s)):s.user=Du()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Au;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Au}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Iu(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ac;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Er;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ye(i)){const a={session:null,error:i};return Iu(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Hs(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=H0(s);await Hs(this.storage,this.storageKey,i)}else{const s=H0(n);await Hs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Sr(this.storage,this.storageKey),await Sr(this.storage,this.storageKey+"-code-verifier"),await Sr(this.storage,this.storageKey+"-user"),this.userStorage&&await Sr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&hn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Bs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Bs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Bs}ms, refresh threshold is ${Nh} ticks`),s<=Nh&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof _k)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ms(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await we(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ye(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await we(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ye(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(ye(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ye(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ru(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+Z4>s)return r;const{data:i,error:a}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};r=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Ru(r);n!=null&&n.allowExpired||j5(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const d=S5(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,c5(`${l}.${c}`)))throw new Ph("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(ye(r))return{data:null,error:r};throw r}}}ro.nextInstanceID=0;const B5=ro;class H5 extends B5{constructor(t){super(t)}}var W5=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class q5{constructor(t,n,r){var s,i,a;this.supabaseUrl=t,this.supabaseKey=n;const l=K4(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:M4,realtime:U4,auth:Object.assign(Object.assign({},F4),{storageKey:c}),global:$4},d=G4(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=H4(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new e4(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new D4(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new IT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return W5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new H5({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new y4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const G5=(e,t,n)=>new q5(e,t,n);function K5(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}K5()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const X5="https://dedlbzhpgkmetvhbkyzq.supabase.co",J5="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g",X0=G5(X5,J5,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});var Y5={};function Q5({sdKey:e,isCompact:t=!1}){const[n,r]=k.useState(null),[s,i]=k.useState(!0),[a,l]=k.useState(null);k.useEffect(()=>{if(e){c();const S=X0.channel("release-gates").on("postgres_changes",{event:"*",schema:"public",table:"sd_backlog_map",filter:`sd_id=eq.${e}`},()=>{c()}).subscribe();return()=>{S.unsubscribe()}}},[e]);async function c(){try{i(!0);const{data:S,error:P}=await X0.from("v_sd_release_gate").select("*").eq("sd_key",e).single();if(P)throw P;r(S),l(null)}catch(S){console.error("Failed to load gate data:",S),l(S.message),r(null)}finally{i(!1)}}if(!e)return null;if(s)return o.jsx("div",{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow animate-pulse`,children:o.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})});if(a||!n)return null;const{ready:u,passing_pct:d=0,passing_count:h=0,failing_count:f=0,not_run_count:p=0,total_stories:m=0,avg_coverage:v=0}=n,w=u?"text-green-500":"text-red-500",y=u?o.jsx(tT,{className:"w-5 h-5"}):o.jsx(Kb,{className:"w-5 h-5"}),g=u?"READY TO MERGE":"BLOCKED",x=u?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",N=Math.min(100,Math.max(0,d)),E=80;return o.jsxs(te.div,{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow-lg border ${x}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(no,{className:`w-5 h-5 ${w}`}),o.jsx("h3",{className:`${t?"text-sm":"text-base"} font-semibold text-gray-900 dark:text-white`,children:"Release Gate"})]}),o.jsxs("div",{className:`flex items-center gap-1 ${w}`,children:[y,o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-bold`,children:g})]})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Story Verification"}),o.jsxs("span",{className:`text-xs font-bold ${N>=E?"text-green-600":"text-amber-600"}`,children:[N.toFixed(0),"% / ",E,"%"]})]}),o.jsxs("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-gray-400 dark:bg-gray-500 z-10",style:{left:`${E}%`}}),o.jsx(te.div,{className:`h-full ${N>=E?"bg-green-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${N}%`},transition:{duration:.5,ease:"easeOut"}})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(OC,{className:"w-3 h-3 text-green-500"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-green-600 dark:text-green-400`,children:h})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Passing"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(Qr,{className:"w-3 h-3 text-red-500"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-red-600 dark:text-red-400`,children:f})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Failing"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(vr,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-gray-600 dark:text-gray-400`,children:p})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Not Run"})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gr,{className:"w-3 h-3 text-blue-500"}),o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Coverage: ",v.toFixed(0),"%"]})]}),o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Total: ",m," stories"]})]}),!u&&m>0&&o.jsx(te.div,{className:"mt-3 p-2 bg-amber-100 dark:bg-amber-900/30 rounded text-xs text-amber-800 dark:text-amber-200",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(FC,{className:"w-3 h-3"}),o.jsxs("span",{children:["Need ",Math.ceil(m*.8)-h," more passing stories to merge"]})]})}),Y5.REACT_APP_FEATURE_STORY_GATES==="false"&&o.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 italic",children:"Gates tracking only (not enforcing)"})]})}function Z5({state:e,onRefresh:t,onSetActiveSD:n,isCompact:r}){var d,h;const s=Oi(),[i,a]=k.useState({tests:{total:0,passed:0,failed:0},coverage:{lines:0,branches:0,functions:0,statements:0},git:{branch:"unknown",uncommittedChanges:0,lastCommit:""}}),l=_p();k.useEffect(()=>{fetch("/api/metrics").then(f=>f.json()).then(f=>a(f)).catch(f=>console.error("Error loading metrics:",f))},[]);const c=r?"bg-white dark:bg-gray-800 rounded-lg shadow p-2 sm:p-3":"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6",u={hidden:{opacity:0,y:l?0:10},visible:f=>({opacity:1,y:0,transition:{duration:l?0:.1,delay:l?0:f*.02}})};return o.jsxs("div",{className:r?"space-y-2 sm:space-y-3":"space-y-4 sm:space-y-6",children:[o.jsxs(te.div,{className:"flex items-center justify-between",initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.08},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(zC,{className:r?"w-5 h-5 sm:w-6 sm:h-6 mr-2":"w-6 sm:w-8 h-6 sm:h-8 mr-2 sm:mr-3"}),o.jsx("h1",{className:r?"text-xl sm:text-2xl font-bold":"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(te.button,{onClick:()=>s("/directive-lab?mode=quick"),className:`flex items-center ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,whileHover:{scale:l?1:1.05},whileTap:{scale:l?1:.95},children:[o.jsx(Zb,{className:`${r?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]}),o.jsx(_c,{onRefresh:t,isCompact:r})]})]}),o.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1},children:o.jsx(ET,{strategicDirectives:e.strategicDirectives,prds:e.prds,currentSD:(d=e.leoProtocol)==null?void 0:d.currentSD,onSetActiveSD:n,isCompact:r})}),((h=e.leoProtocol)==null?void 0:h.currentSD)&&o.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1,delay:.05},children:o.jsx(Q5,{sdKey:e.leoProtocol.currentSD,isCompact:r})}),o.jsxs("div",{className:`grid gap-${r?"2 sm:gap-3":"3 sm:gap-4"} grid-cols-1`,children:[o.jsx(te.div,{className:c,initial:"hidden",animate:"visible",custom:1,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Active Role"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold truncate":"text-xl sm:text-2xl font-bold truncate",children:e.leoProtocol.activeRole||"Awaiting SD"}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 min-w-0",children:[o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#4f9cf9"},children:["LEO v",e.leoProtocol.version]}),e.leoProtocol.lastHandoff&&o.jsxs("span",{className:`${r?"text-xs":"text-xs sm:text-sm"} text-gray-500 truncate`,children:["• ",new Date(e.leoProtocol.lastHandoff.timestamp).toLocaleTimeString()]})]})]}),o.jsx(Np,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 ${e.leoProtocol.activeRole==="LEAD"?"text-blue-500":e.leoProtocol.activeRole==="PLAN"?"text-purple-500":e.leoProtocol.activeRole==="EXEC"?"text-green-500":"text-gray-400"}`})]})}),o.jsx(te.div,{className:c,initial:"hidden",animate:"visible",custom:2,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx(cr,{to:"/strategic-directives",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strategic Directives"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:o.jsx(li,{end:e.strategicDirectives.length,duration:l?0:1.5,preserveValue:!0})}),o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#10b981"},children:[o.jsx(li,{end:e.strategicDirectives.filter(f=>{var p;return((p=f.metadata)==null?void 0:p.Status)==="Active"}).length,duration:l?0:1.2,preserveValue:!0})," Active"]})]}),o.jsx(Et,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-blue-500`})]})})}),o.jsx(te.div,{className:c,initial:"hidden",animate:"visible",custom:3,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx(cr,{to:"/backlog",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Backlog Items"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:o.jsx(li,{end:e.strategicDirectives.reduce((f,p)=>f+(p.total_backlog_items||p.total_items||p.backlog_count||0),0),duration:l?0:1.5,preserveValue:!0})}),o.jsxs("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#6366f1"},children:[o.jsx(li,{end:e.strategicDirectives.filter(f=>(f.total_backlog_items||f.total_items||f.backlog_count||0)>0).length,duration:l?0:1.2,preserveValue:!0})," SDs with items"]})]}),o.jsx(Ci,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-indigo-500`})]})})}),o.jsx(te.div,{className:c,initial:"hidden",animate:"visible",custom:4,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:o.jsx(cr,{to:"/directive-lab",className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:r?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"SDIP Submissions"}),o.jsx("p",{className:r?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:"Directive Lab"}),o.jsx("p",{className:r?"text-xs":"text-xs sm:text-sm",style:{color:"#8b5cf6"},children:"Ready to submit"})]}),o.jsx(qb,{className:`${r?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-purple-500`})]})})})]})]})}function e3(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const t3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,n3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,r3={};function J0(e,t){return(r3.jsx?n3:t3).test(e)}const s3=/[ \t\n\f\r]/g;function i3(e){return typeof e=="object"?e.type==="text"?Y0(e.value):!1:Y0(e)}function Y0(e){return e.replace(s3,"")===""}class vo{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}vo.prototype.normal={};vo.prototype.property={};vo.prototype.space=void 0;function Pk(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new vo(n,r,t)}function Ch(e){return e.toLowerCase()}class Xt{constructor(t,n){this.attribute=n,this.property=t}}Xt.prototype.attribute="";Xt.prototype.booleanish=!1;Xt.prototype.boolean=!1;Xt.prototype.commaOrSpaceSeparated=!1;Xt.prototype.commaSeparated=!1;Xt.prototype.defined=!1;Xt.prototype.mustUseProperty=!1;Xt.prototype.number=!1;Xt.prototype.overloadedBoolean=!1;Xt.prototype.property="";Xt.prototype.spaceSeparated=!1;Xt.prototype.space=void 0;let a3=0;const xe=Ls(),et=Ls(),Th=Ls(),W=Ls(),Ie=Ls(),yi=Ls(),Qt=Ls();function Ls(){return 2**++a3}const Ah=Object.freeze(Object.defineProperty({__proto__:null,boolean:xe,booleanish:et,commaOrSpaceSeparated:Qt,commaSeparated:yi,number:W,overloadedBoolean:Th,spaceSeparated:Ie},Symbol.toStringTag,{value:"Module"})),Ou=Object.keys(Ah);class Rp extends Xt{constructor(t,n,r,s){let i=-1;if(super(t,n),Q0(this,"space",s),typeof r=="number")for(;++i<Ou.length;){const a=Ou[i];Q0(this,Ou[i],(r&Ah[a])===Ah[a])}}}Rp.prototype.defined=!0;function Q0(e,t,n){n&&(e[t]=n)}function zi(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new Rp(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[Ch(r)]=r,n[Ch(i.attribute)]=r}return new vo(t,n,e.space)}const Ck=zi({properties:{ariaActiveDescendant:null,ariaAtomic:et,ariaAutoComplete:null,ariaBusy:et,ariaChecked:et,ariaColCount:W,ariaColIndex:W,ariaColSpan:W,ariaControls:Ie,ariaCurrent:null,ariaDescribedBy:Ie,ariaDetails:null,ariaDisabled:et,ariaDropEffect:Ie,ariaErrorMessage:null,ariaExpanded:et,ariaFlowTo:Ie,ariaGrabbed:et,ariaHasPopup:null,ariaHidden:et,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ie,ariaLevel:W,ariaLive:null,ariaModal:et,ariaMultiLine:et,ariaMultiSelectable:et,ariaOrientation:null,ariaOwns:Ie,ariaPlaceholder:null,ariaPosInSet:W,ariaPressed:et,ariaReadOnly:et,ariaRelevant:null,ariaRequired:et,ariaRoleDescription:Ie,ariaRowCount:W,ariaRowIndex:W,ariaRowSpan:W,ariaSelected:et,ariaSetSize:W,ariaSort:null,ariaValueMax:W,ariaValueMin:W,ariaValueNow:W,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Tk(e,t){return t in e?e[t]:t}function Ak(e,t){return Tk(e,t.toLowerCase())}const o3=zi({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yi,acceptCharset:Ie,accessKey:Ie,action:null,allow:null,allowFullScreen:xe,allowPaymentRequest:xe,allowUserMedia:xe,alt:null,as:null,async:xe,autoCapitalize:null,autoComplete:Ie,autoFocus:xe,autoPlay:xe,blocking:Ie,capture:null,charSet:null,checked:xe,cite:null,className:Ie,cols:W,colSpan:null,content:null,contentEditable:et,controls:xe,controlsList:Ie,coords:W|yi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:xe,defer:xe,dir:null,dirName:null,disabled:xe,download:Th,draggable:et,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:xe,formTarget:null,headers:Ie,height:W,hidden:Th,high:W,href:null,hrefLang:null,htmlFor:Ie,httpEquiv:Ie,id:null,imageSizes:null,imageSrcSet:null,inert:xe,inputMode:null,integrity:null,is:null,isMap:xe,itemId:null,itemProp:Ie,itemRef:Ie,itemScope:xe,itemType:Ie,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:xe,low:W,manifest:null,max:null,maxLength:W,media:null,method:null,min:null,minLength:W,multiple:xe,muted:xe,name:null,nonce:null,noModule:xe,noValidate:xe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:xe,optimum:W,pattern:null,ping:Ie,placeholder:null,playsInline:xe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:xe,referrerPolicy:null,rel:Ie,required:xe,reversed:xe,rows:W,rowSpan:W,sandbox:Ie,scope:null,scoped:xe,seamless:xe,selected:xe,shadowRootClonable:xe,shadowRootDelegatesFocus:xe,shadowRootMode:null,shape:null,size:W,sizes:null,slot:null,span:W,spellCheck:et,src:null,srcDoc:null,srcLang:null,srcSet:null,start:W,step:null,style:null,tabIndex:W,target:null,title:null,translate:null,type:null,typeMustMatch:xe,useMap:null,value:et,width:W,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ie,axis:null,background:null,bgColor:null,border:W,borderColor:null,bottomMargin:W,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:xe,declare:xe,event:null,face:null,frame:null,frameBorder:null,hSpace:W,leftMargin:W,link:null,longDesc:null,lowSrc:null,marginHeight:W,marginWidth:W,noResize:xe,noHref:xe,noShade:xe,noWrap:xe,object:null,profile:null,prompt:null,rev:null,rightMargin:W,rules:null,scheme:null,scrolling:et,standby:null,summary:null,text:null,topMargin:W,valueType:null,version:null,vAlign:null,vLink:null,vSpace:W,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:xe,disableRemotePlayback:xe,prefix:null,property:null,results:W,security:null,unselectable:null},space:"html",transform:Ak}),l3=zi({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Qt,accentHeight:W,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:W,amplitude:W,arabicForm:null,ascent:W,attributeName:null,attributeType:null,azimuth:W,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:W,by:null,calcMode:null,capHeight:W,className:Ie,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:W,diffuseConstant:W,direction:null,display:null,dur:null,divisor:W,dominantBaseline:null,download:xe,dx:null,dy:null,edgeMode:null,editable:null,elevation:W,enableBackground:null,end:null,event:null,exponent:W,externalResourcesRequired:null,fill:null,fillOpacity:W,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yi,g2:yi,glyphName:yi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:W,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:W,horizOriginX:W,horizOriginY:W,id:null,ideographic:W,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:W,k:W,k1:W,k2:W,k3:W,k4:W,kernelMatrix:Qt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:W,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:W,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:W,overlineThickness:W,paintOrder:null,panose1:null,path:null,pathLength:W,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ie,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:W,pointsAtY:W,pointsAtZ:W,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Qt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Qt,rev:Qt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Qt,requiredFeatures:Qt,requiredFonts:Qt,requiredFormats:Qt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:W,specularExponent:W,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:W,strikethroughThickness:W,string:null,stroke:null,strokeDashArray:Qt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:W,strokeOpacity:W,strokeWidth:null,style:null,surfaceScale:W,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Qt,tabIndex:W,tableValues:null,target:null,targetX:W,targetY:W,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Qt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:W,underlineThickness:W,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:W,values:null,vAlphabetic:W,vMathematical:W,vectorEffect:null,vHanging:W,vIdeographic:W,version:null,vertAdvY:W,vertOriginX:W,vertOriginY:W,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:W,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Tk}),Ik=zi({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Rk=zi({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Ak}),Dk=zi({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),c3={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},u3=/[A-Z]/g,Z0=/-[a-z]/g,d3=/^data[-\w.:]+$/i;function h3(e,t){const n=Ch(t);let r=t,s=Xt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&d3.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Z0,p3);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Z0.test(i)){let a=i.replace(u3,f3);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}s=Rp}return new s(r,t)}function f3(e){return"-"+e.toLowerCase()}function p3(e){return e.charAt(1).toUpperCase()}const m3=Pk([Ck,o3,Ik,Rk,Dk],"html"),Dp=Pk([Ck,l3,Ik,Rk,Dk],"svg");function g3(e){return e.join(" ").trim()}var Lp={},ey=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,y3=/\n/g,x3=/^\s*/,v3=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,w3=/^:\s*/,b3=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,k3=/^[;\s]*/,j3=/^\s+|\s+$/g,S3=`
`,ty="/",ny="*",ys="",N3="comment",_3="declaration",E3=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(m){var v=m.match(y3);v&&(n+=v.length);var w=m.lastIndexOf(S3);r=~w?m.length-w:r+m.length}function i(){var m={line:n,column:r};return function(v){return v.position=new a(m),u(),v}}function a(m){this.start=m,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function l(m){var v=new Error(t.source+":"+n+":"+r+": "+m);if(v.reason=m,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(m){var v=m.exec(e);if(v){var w=v[0];return s(w),e=e.slice(w.length),v}}function u(){c(x3)}function d(m){var v;for(m=m||[];v=h();)v!==!1&&m.push(v);return m}function h(){var m=i();if(!(ty!=e.charAt(0)||ny!=e.charAt(1))){for(var v=2;ys!=e.charAt(v)&&(ny!=e.charAt(v)||ty!=e.charAt(v+1));)++v;if(v+=2,ys===e.charAt(v-1))return l("End of comment missing");var w=e.slice(2,v-2);return r+=2,s(w),e=e.slice(v),r+=2,m({type:N3,comment:w})}}function f(){var m=i(),v=c(v3);if(v){if(h(),!c(w3))return l("property missing ':'");var w=c(b3),y=m({type:_3,property:ry(v[0].replace(ey,ys)),value:w?ry(w[0].replace(ey,ys)):ys});return c(k3),y}}function p(){var m=[];d(m);for(var v;v=f();)v!==!1&&(m.push(v),d(m));return m}return u(),p()};function ry(e){return e?e.replace(j3,ys):ys}var P3=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lp,"__esModule",{value:!0});Lp.default=T3;var C3=P3(E3);function T3(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,C3.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var a=i.property,l=i.value;s?t(a,l,i):l&&(n=n||{},n[a]=l)}}),n}var Ic={};Object.defineProperty(Ic,"__esModule",{value:!0});Ic.camelCase=void 0;var A3=/^--[a-zA-Z0-9_-]+$/,I3=/-([a-z])/g,R3=/^[^-]+$/,D3=/^-(webkit|moz|ms|o|khtml)-/,L3=/^-(ms)-/,O3=function(e){return!e||R3.test(e)||A3.test(e)},$3=function(e,t){return t.toUpperCase()},sy=function(e,t){return"".concat(t,"-")},M3=function(e,t){return t===void 0&&(t={}),O3(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(L3,sy):e=e.replace(D3,sy),e.replace(I3,$3))};Ic.camelCase=M3;var F3=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},U3=F3(Lp),V3=Ic;function Ih(e,t){var n={};return!e||typeof e!="string"||(0,U3.default)(e,function(r,s){r&&s&&(n[(0,V3.camelCase)(r,t)]=s)}),n}Ih.default=Ih;var z3=Ih;const B3=Vh(z3),Lk=Ok("end"),Op=Ok("start");function Ok(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function H3(e){const t=Op(e),n=Lk(e);if(t&&n)return{start:t,end:n}}function Pa(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?iy(e.position):"start"in e||"end"in e?iy(e):"line"in e||"column"in e?Rh(e):""}function Rh(e){return ay(e&&e.line)+":"+ay(e&&e.column)}function iy(e){return Rh(e&&e.start)+"-"+Rh(e&&e.end)}function ay(e){return e&&typeof e=="number"?e:1}class Ct extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(a=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=Pa(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ct.prototype.file="";Ct.prototype.name="";Ct.prototype.reason="";Ct.prototype.message="";Ct.prototype.stack="";Ct.prototype.column=void 0;Ct.prototype.line=void 0;Ct.prototype.ancestors=void 0;Ct.prototype.cause=void 0;Ct.prototype.fatal=void 0;Ct.prototype.place=void 0;Ct.prototype.ruleId=void 0;Ct.prototype.source=void 0;const $p={}.hasOwnProperty,W3=new Map,q3=/[A-Z]/g,G3=new Set(["table","tbody","thead","tfoot","tr"]),K3=new Set(["td","th"]),$k="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function X3(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=rA(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=nA(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Dp:m3,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=Mk(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function Mk(e,t,n){if(t.type==="element")return J3(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Y3(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Z3(e,t,n);if(t.type==="mdxjsEsm")return Q3(e,t);if(t.type==="root")return eA(e,t,n);if(t.type==="text")return tA(e,t)}function J3(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Dp,e.schema=s),e.ancestors.push(t);const i=Uk(e,t.tagName,!1),a=sA(e,t);let l=Fp(e,t);return G3.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!i3(c):!0})),Fk(e,a,i,t),Mp(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function Y3(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}so(e,t.position)}function Q3(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);so(e,t.position)}function Z3(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Dp,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:Uk(e,t.name,!0),a=iA(e,t),l=Fp(e,t);return Fk(e,a,i,t),Mp(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function eA(e,t,n){const r={};return Mp(r,Fp(e,t)),e.create(t,e.Fragment,r,n)}function tA(e,t){return t.value}function Fk(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Mp(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function nA(e,t,n){return r;function r(s,i,a,l){const u=Array.isArray(a.children)?n:t;return l?u(i,a,l):u(i,a)}}function rA(e,t){return n;function n(r,s,i,a){const l=Array.isArray(i.children),c=Op(r);return t(s,i,a,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function sA(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&$p.call(t.properties,s)){const i=aA(e,s,t.properties[s]);if(i){const[a,l]=i;e.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&K3.has(t.tagName)?r=l:n[a]=l}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function iA(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else so(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else so(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function Fp(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:W3;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;a=c+"-"+u,s.set(c,u+1)}}const l=Mk(e,i,a);l!==void 0&&n.push(l)}return n}function aA(e,t,n){const r=h3(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?e3(n):g3(n)),r.property==="style"){let s=typeof n=="object"?n:oA(e,String(n));return e.stylePropertyNameCase==="css"&&(s=lA(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?c3[r.property]||r.property:r.attribute,n]}}function oA(e,t){try{return B3(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new Ct("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=$k+"#cannot-parse-style-attribute",s}}function Uk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,a;for(;++i<s.length;){const l=J0(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=a}else r=J0(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return $p.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);so(e)}function so(e,t){const n=new Ct("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=$k+"#cannot-handle-mdx-estrees-without-createevaluater",n}function lA(e){const t={};let n;for(n in e)$p.call(e,n)&&(t[cA(n)]=e[n]);return t}function cA(e){let t=e.replace(q3,uA);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function uA(e){return"-"+e.toLowerCase()}const $u={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},dA={};function hA(e,t){const n=dA,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Vk(e,r,s)}function Vk(e,t,n){if(fA(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return oy(e.children,t,n)}return Array.isArray(e)?oy(e,t,n):""}function oy(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Vk(e[s],t,n);return r.join("")}function fA(e){return!!(e&&typeof e=="object")}const ly=document.createElement("i");function Up(e){const t="&"+e+";";ly.innerHTML=t;const n=ly.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Kn(e,t,n,r){const s=e.length;let i=0,a;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function gn(e,t){return e.length>0?(Kn(e,e.length,0,t),e):t}const cy={}.hasOwnProperty;function pA(e){const t={};let n=-1;for(;++n<e.length;)mA(t,e[n]);return t}function mA(e,t){let n;for(n in t){const s=(cy.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){cy.call(s,a)||(s[a]=[]);const l=i[a];gA(s[a],Array.isArray(l)?l:l?[l]:[])}}}function gA(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Kn(e,0,0,r)}function zk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function xi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zn=ss(/[A-Za-z]/),nn=ss(/[\dA-Za-z]/),yA=ss(/[#-'*+\--9=?A-Z^-~]/);function Dh(e){return e!==null&&(e<32||e===127)}const Lh=ss(/\d/),xA=ss(/[\dA-Fa-f]/),vA=ss(/[!-/:-@[-`{-~]/);function de(e){return e!==null&&e<-2}function Kt(e){return e!==null&&(e<0||e===32)}function Ee(e){return e===-2||e===-1||e===32}const wA=ss(new RegExp("\\p{P}|\\p{S}","u")),bA=ss(/\s/);function ss(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Bi(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(i===37&&nn(e.charCodeAt(n+1))&&nn(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(a=String.fromCharCode(i,l),s=1):a="�"}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function De(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(c){return Ee(c)?(e.enter(n),l(c)):t(c)}function l(c){return Ee(c)&&i++<s?(e.consume(c),l):(e.exit(n),t(c))}}const kA={tokenize:jA};function jA(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),De(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return de(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),a)}}const SA={tokenize:NA},uy={tokenize:_A};function NA(e){const t=this,n=[];let r=0,s,i,a;return l;function l(x){if(r<n.length){const N=n[r];return t.containerState=N[1],e.attempt(N[0].continuation,c,u)(x)}return u(x)}function c(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&g();const N=t.events.length;let E=N,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let P=N;for(;P<t.events.length;)t.events[P][1].end={...S},P++;return Kn(t.events,E+1,0,t.events.slice(N)),t.events.length=P,u(x)}return l(x)}function u(x){if(r===n.length){if(!s)return f(x);if(s.currentConstruct&&s.currentConstruct.concrete)return m(x);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(uy,d,h)(x)}function d(x){return s&&g(),y(r),f(x)}function h(x){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,m(x)}function f(x){return t.containerState={},e.attempt(uy,p,m)(x)}function p(x){return r++,n.push([t.currentConstruct,t.containerState]),f(x)}function m(x){if(x===null){s&&g(),y(0),e.consume(x);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),v(x)}function v(x){if(x===null){w(e.exit("chunkFlow"),!0),y(0),e.consume(x);return}return de(x)?(e.consume(x),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(x),v)}function w(x,N){const E=t.sliceStream(x);if(N&&E.push(null),x.previous=i,i&&(i.next=x),i=x,s.defineSkip(x.start),s.write(E),t.parser.lazy[x.start.line]){let S=s.events.length;for(;S--;)if(s.events[S][1].start.offset<a&&(!s.events[S][1].end||s.events[S][1].end.offset>a))return;const P=t.events.length;let T=P,$,O;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if($){O=t.events[T][1].end;break}$=!0}for(y(r),S=P;S<t.events.length;)t.events[S][1].end={...O},S++;Kn(t.events,T+1,0,t.events.slice(P)),t.events.length=S}}function y(x){let N=n.length;for(;N-- >x;){const E=n[N];t.containerState=E[1],E[0].exit.call(t,e)}n.length=x}function g(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function _A(e,t,n){return De(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function dy(e){if(e===null||Kt(e)||bA(e))return 1;if(wA(e))return 2}function Vp(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const Oh={name:"attention",resolveAll:EA,tokenize:PA};function EA(e,t){let n=-1,r,s,i,a,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},f={...e[n][1].start};hy(h,-c),hy(f,c),a={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},i={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},e[r][1].end={...a.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=gn(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=gn(u,[["enter",s,t],["enter",a,t],["exit",a,t],["enter",i,t]]),u=gn(u,Vp(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=gn(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=gn(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Kn(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function PA(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=dy(r);let i;return a;function a(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),d=dy(c),h=!d||d===2&&s||n.includes(c),f=!s||s===2&&d||n.includes(r);return u._open=!!(i===42?h:h&&(s||!f)),u._close=!!(i===42?f:f&&(d||!h)),t(c)}}function hy(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const CA={name:"autolink",tokenize:TA};function TA(e,t,n){let r=0;return s;function s(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(p){return zn(p)?(e.consume(p),a):p===64?n(p):u(p)}function a(p){return p===43||p===45||p===46||nn(p)?(r=1,l(p)):u(p)}function l(p){return p===58?(e.consume(p),r=0,c):(p===43||p===45||p===46||nn(p))&&r++<32?(e.consume(p),l):(r=0,u(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||Dh(p)?n(p):(e.consume(p),c)}function u(p){return p===64?(e.consume(p),d):yA(p)?(e.consume(p),u):n(p)}function d(p){return nn(p)?h(p):n(p)}function h(p){return p===46?(e.consume(p),r=0,d):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):f(p)}function f(p){if((p===45||nn(p))&&r++<63){const m=p===45?f:h;return e.consume(p),m}return n(p)}}const Rc={partial:!0,tokenize:AA};function AA(e,t,n){return r;function r(i){return Ee(i)?De(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||de(i)?t(i):n(i)}}const Bk={continuation:{tokenize:RA},exit:DA,name:"blockQuote",tokenize:IA};function IA(e,t,n){const r=this;return s;function s(a){if(a===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),i}return n(a)}function i(a){return Ee(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function RA(e,t,n){const r=this;return s;function s(a){return Ee(a)?De(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return e.attempt(Bk,t,n)(a)}}function DA(e){e.exit("blockQuote")}const Hk={name:"characterEscape",tokenize:LA};function LA(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return vA(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const Wk={name:"characterReference",tokenize:OA};function OA(e,t,n){const r=this;let s=0,i,a;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,a=nn,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=xA,d):(e.enter("characterReferenceValue"),i=7,a=Lh,d(h))}function d(h){if(h===59&&s){const f=e.exit("characterReferenceValue");return a===nn&&!Up(r.sliceSerialize(f))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(h)&&s++<i?(e.consume(h),d):n(h)}}const fy={partial:!0,tokenize:MA},py={concrete:!0,name:"codeFenced",tokenize:$A};function $A(e,t,n){const r=this,s={partial:!0,tokenize:E};let i=0,a=0,l;return c;function c(S){return u(S)}function u(S){const P=r.events[r.events.length-1];return i=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,l=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(S)}function d(S){return S===l?(a++,e.consume(S),d):a<3?n(S):(e.exit("codeFencedFenceSequence"),Ee(S)?De(e,h,"whitespace")(S):h(S))}function h(S){return S===null||de(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(fy,v,N)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(S))}function f(S){return S===null||de(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(S)):Ee(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),De(e,p,"whitespace")(S)):S===96&&S===l?n(S):(e.consume(S),f)}function p(S){return S===null||de(S)?h(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(S))}function m(S){return S===null||de(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(S)):S===96&&S===l?n(S):(e.consume(S),m)}function v(S){return e.attempt(s,N,w)(S)}function w(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return i>0&&Ee(S)?De(e,g,"linePrefix",i+1)(S):g(S)}function g(S){return S===null||de(S)?e.check(fy,v,N)(S):(e.enter("codeFlowValue"),x(S))}function x(S){return S===null||de(S)?(e.exit("codeFlowValue"),g(S)):(e.consume(S),x)}function N(S){return e.exit("codeFenced"),t(S)}function E(S,P,T){let $=0;return O;function O(R){return S.enter("lineEnding"),S.consume(R),S.exit("lineEnding"),V}function V(R){return S.enter("codeFencedFence"),Ee(R)?De(S,X,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):X(R)}function X(R){return R===l?(S.enter("codeFencedFenceSequence"),me(R)):T(R)}function me(R){return R===l?($++,S.consume(R),me):$>=a?(S.exit("codeFencedFenceSequence"),Ee(R)?De(S,D,"whitespace")(R):D(R)):T(R)}function D(R){return R===null||de(R)?(S.exit("codeFencedFence"),P(R)):T(R)}}}function MA(e,t,n){const r=this;return s;function s(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const Mu={name:"codeIndented",tokenize:UA},FA={partial:!0,tokenize:VA};function UA(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),De(e,i,"linePrefix",5)(u)}function i(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):de(u)?e.attempt(FA,a,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||de(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function VA(e,t,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):de(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):De(e,i,"linePrefix",5)(a)}function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):de(a)?s(a):n(a)}}const zA={name:"codeText",previous:HA,resolve:BA,tokenize:WA};function BA(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function HA(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function WA(e,t,n){let r=0,s,i;return a;function a(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(i=e.enter("codeTextSequence"),s=0,d(h)):de(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||de(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),s++,d):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",u(h))}}class qA{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&na(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),na(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),na(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);na(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);na(this.left,n.reverse())}}}function na(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function qk(e){const t={};let n=-1,r,s,i,a,l,c,u;const d=new qA(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,GA(d,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=d.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return Kn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function GA(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],u={};let d,h,f=-1,p=n,m=0,v=0;const w=[v];for(;p;){for(;e.get(++s)[1]!==p;);i.push(s),p._tokenizer||(d=r.sliceStream(p),p.next||d.push(null),h&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(v=f+1,w.push(v),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):w.pop(),f=w.length;f--;){const y=l.slice(w[f],w[f+1]),g=i.pop();c.push([g,g+y.length-1]),e.splice(g,2,y)}for(c.reverse(),f=-1;++f<c.length;)u[m+c[f][0]]=m+c[f][1],m+=c[f][1]-c[f][0]-1;return u}const KA={resolve:JA,tokenize:YA},XA={partial:!0,tokenize:QA};function JA(e){return qk(e),e}function YA(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):de(l)?e.check(XA,a,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function a(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function QA(e,t,n){const r=this;return s;function s(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),De(e,i,"linePrefix")}function i(a){if(a===null||de(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function Gk(e,t,n,r,s,i,a,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(y){return y===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(y),e.exit(i),f):y===null||y===32||y===41||Dh(y)?n(y):(e.enter(r),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function f(y){return y===62?(e.enter(i),e.consume(y),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===62?(e.exit("chunkString"),e.exit(l),f(y)):y===null||y===60||de(y)?n(y):(e.consume(y),y===92?m:p)}function m(y){return y===60||y===62||y===92?(e.consume(y),p):p(y)}function v(y){return!d&&(y===null||y===41||Kt(y))?(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(y)):d<u&&y===40?(e.consume(y),d++,v):y===41?(e.consume(y),d--,v):y===null||y===32||y===40||Dh(y)?n(y):(e.consume(y),y===92?w:v)}function w(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function Kk(e,t,n,r,s,i){const a=this;let l=0,c;return u;function u(p){return e.enter(r),e.enter(s),e.consume(p),e.exit(s),e.enter(i),d}function d(p){return l>999||p===null||p===91||p===93&&!c||p===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(p):p===93?(e.exit(i),e.enter(s),e.consume(p),e.exit(s),e.exit(r),t):de(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||de(p)||l++>999?(e.exit("chunkString"),d(p)):(e.consume(p),c||(c=!Ee(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(e.consume(p),l++,h):h(p)}}function Xk(e,t,n,r,s,i){let a;return l;function l(f){return f===34||f===39||f===40?(e.enter(r),e.enter(s),e.consume(f),e.exit(s),a=f===40?41:f,c):n(f)}function c(f){return f===a?(e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):(e.enter(i),u(f))}function u(f){return f===a?(e.exit(i),c(a)):f===null?n(f):de(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),De(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===a||f===null||de(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?h:d)}function h(f){return f===a||f===92?(e.consume(f),d):d(f)}}function Ca(e,t){let n;return r;function r(s){return de(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Ee(s)?De(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const ZA={name:"definition",tokenize:tI},eI={partial:!0,tokenize:nI};function tI(e,t,n){const r=this;let s;return i;function i(p){return e.enter("definition"),a(p)}function a(p){return Kk.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return s=xi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):n(p)}function c(p){return Kt(p)?Ca(e,u)(p):u(p)}function u(p){return Gk(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function d(p){return e.attempt(eI,h,h)(p)}function h(p){return Ee(p)?De(e,f,"whitespace")(p):f(p)}function f(p){return p===null||de(p)?(e.exit("definition"),r.parser.defined.push(s),t(p)):n(p)}}function nI(e,t,n){return r;function r(l){return Kt(l)?Ca(e,s)(l):n(l)}function s(l){return Xk(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return Ee(l)?De(e,a,"whitespace")(l):a(l)}function a(l){return l===null||de(l)?t(l):n(l)}}const rI={name:"hardBreakEscape",tokenize:sI};function sI(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return de(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const iI={name:"headingAtx",resolve:aI,tokenize:oI};function aI(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Kn(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function oI(e,t,n){let r=0;return s;function s(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(e.consume(d),a):d===null||Kt(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||de(d)?(e.exit("atxHeading"),t(d)):Ee(d)?De(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Kt(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const lI=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],my=["pre","script","style","textarea"],cI={concrete:!0,name:"htmlFlow",resolveTo:hI,tokenize:fI},uI={partial:!0,tokenize:mI},dI={partial:!0,tokenize:pI};function hI(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function fI(e,t,n){const r=this;let s,i,a,l,c;return u;function u(_){return d(_)}function d(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),h}function h(_){return _===33?(e.consume(_),f):_===47?(e.consume(_),i=!0,v):_===63?(e.consume(_),s=3,r.interrupt?t:j):zn(_)?(e.consume(_),a=String.fromCharCode(_),w):n(_)}function f(_){return _===45?(e.consume(_),s=2,p):_===91?(e.consume(_),s=5,l=0,m):zn(_)?(e.consume(_),s=4,r.interrupt?t:j):n(_)}function p(_){return _===45?(e.consume(_),r.interrupt?t:j):n(_)}function m(_){const Se="CDATA[";return _===Se.charCodeAt(l++)?(e.consume(_),l===Se.length?r.interrupt?t:X:m):n(_)}function v(_){return zn(_)?(e.consume(_),a=String.fromCharCode(_),w):n(_)}function w(_){if(_===null||_===47||_===62||Kt(_)){const Se=_===47,pt=a.toLowerCase();return!Se&&!i&&my.includes(pt)?(s=1,r.interrupt?t(_):X(_)):lI.includes(a.toLowerCase())?(s=6,Se?(e.consume(_),y):r.interrupt?t(_):X(_)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):i?g(_):x(_))}return _===45||nn(_)?(e.consume(_),a+=String.fromCharCode(_),w):n(_)}function y(_){return _===62?(e.consume(_),r.interrupt?t:X):n(_)}function g(_){return Ee(_)?(e.consume(_),g):O(_)}function x(_){return _===47?(e.consume(_),O):_===58||_===95||zn(_)?(e.consume(_),N):Ee(_)?(e.consume(_),x):O(_)}function N(_){return _===45||_===46||_===58||_===95||nn(_)?(e.consume(_),N):E(_)}function E(_){return _===61?(e.consume(_),S):Ee(_)?(e.consume(_),E):x(_)}function S(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),c=_,P):Ee(_)?(e.consume(_),S):T(_)}function P(_){return _===c?(e.consume(_),c=null,$):_===null||de(_)?n(_):(e.consume(_),P)}function T(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||Kt(_)?E(_):(e.consume(_),T)}function $(_){return _===47||_===62||Ee(_)?x(_):n(_)}function O(_){return _===62?(e.consume(_),V):n(_)}function V(_){return _===null||de(_)?X(_):Ee(_)?(e.consume(_),V):n(_)}function X(_){return _===45&&s===2?(e.consume(_),q):_===60&&s===1?(e.consume(_),A):_===62&&s===4?(e.consume(_),ne):_===63&&s===3?(e.consume(_),j):_===93&&s===5?(e.consume(_),z):de(_)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(uI,ie,me)(_)):_===null||de(_)?(e.exit("htmlFlowData"),me(_)):(e.consume(_),X)}function me(_){return e.check(dI,D,ie)(_)}function D(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),R}function R(_){return _===null||de(_)?me(_):(e.enter("htmlFlowData"),X(_))}function q(_){return _===45?(e.consume(_),j):X(_)}function A(_){return _===47?(e.consume(_),a="",C):X(_)}function C(_){if(_===62){const Se=a.toLowerCase();return my.includes(Se)?(e.consume(_),ne):X(_)}return zn(_)&&a.length<8?(e.consume(_),a+=String.fromCharCode(_),C):X(_)}function z(_){return _===93?(e.consume(_),j):X(_)}function j(_){return _===62?(e.consume(_),ne):_===45&&s===2?(e.consume(_),j):X(_)}function ne(_){return _===null||de(_)?(e.exit("htmlFlowData"),ie(_)):(e.consume(_),ne)}function ie(_){return e.exit("htmlFlow"),t(_)}}function pI(e,t,n){const r=this;return s;function s(a){return de(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function mI(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Rc,t,n)}}const gI={name:"htmlText",tokenize:yI};function yI(e,t,n){const r=this;let s,i,a;return l;function l(j){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(j),c}function c(j){return j===33?(e.consume(j),u):j===47?(e.consume(j),E):j===63?(e.consume(j),x):zn(j)?(e.consume(j),T):n(j)}function u(j){return j===45?(e.consume(j),d):j===91?(e.consume(j),i=0,m):zn(j)?(e.consume(j),g):n(j)}function d(j){return j===45?(e.consume(j),p):n(j)}function h(j){return j===null?n(j):j===45?(e.consume(j),f):de(j)?(a=h,A(j)):(e.consume(j),h)}function f(j){return j===45?(e.consume(j),p):h(j)}function p(j){return j===62?q(j):j===45?f(j):h(j)}function m(j){const ne="CDATA[";return j===ne.charCodeAt(i++)?(e.consume(j),i===ne.length?v:m):n(j)}function v(j){return j===null?n(j):j===93?(e.consume(j),w):de(j)?(a=v,A(j)):(e.consume(j),v)}function w(j){return j===93?(e.consume(j),y):v(j)}function y(j){return j===62?q(j):j===93?(e.consume(j),y):v(j)}function g(j){return j===null||j===62?q(j):de(j)?(a=g,A(j)):(e.consume(j),g)}function x(j){return j===null?n(j):j===63?(e.consume(j),N):de(j)?(a=x,A(j)):(e.consume(j),x)}function N(j){return j===62?q(j):x(j)}function E(j){return zn(j)?(e.consume(j),S):n(j)}function S(j){return j===45||nn(j)?(e.consume(j),S):P(j)}function P(j){return de(j)?(a=P,A(j)):Ee(j)?(e.consume(j),P):q(j)}function T(j){return j===45||nn(j)?(e.consume(j),T):j===47||j===62||Kt(j)?$(j):n(j)}function $(j){return j===47?(e.consume(j),q):j===58||j===95||zn(j)?(e.consume(j),O):de(j)?(a=$,A(j)):Ee(j)?(e.consume(j),$):q(j)}function O(j){return j===45||j===46||j===58||j===95||nn(j)?(e.consume(j),O):V(j)}function V(j){return j===61?(e.consume(j),X):de(j)?(a=V,A(j)):Ee(j)?(e.consume(j),V):$(j)}function X(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),s=j,me):de(j)?(a=X,A(j)):Ee(j)?(e.consume(j),X):(e.consume(j),D)}function me(j){return j===s?(e.consume(j),s=void 0,R):j===null?n(j):de(j)?(a=me,A(j)):(e.consume(j),me)}function D(j){return j===null||j===34||j===39||j===60||j===61||j===96?n(j):j===47||j===62||Kt(j)?$(j):(e.consume(j),D)}function R(j){return j===47||j===62||Kt(j)?$(j):n(j)}function q(j){return j===62?(e.consume(j),e.exit("htmlTextData"),e.exit("htmlText"),t):n(j)}function A(j){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),C}function C(j){return Ee(j)?De(e,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):z(j)}function z(j){return e.enter("htmlTextData"),a(j)}}const zp={name:"labelEnd",resolveAll:bI,resolveTo:kI,tokenize:jI},xI={tokenize:SI},vI={tokenize:NI},wI={tokenize:_I};function bI(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Kn(e,0,e.length,n),e}function kI(e,t){let n=e.length,r=0,s,i,a,l;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[a][1].end}},d={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[a-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=gn(l,e.slice(i+1,i+r+3)),l=gn(l,[["enter",d,t]]),l=gn(l,Vp(t.parser.constructs.insideSpan.null,e.slice(i+r+4,a-3),t)),l=gn(l,[["exit",d,t],e[a-2],e[a-1],["exit",u,t]]),l=gn(l,e.slice(a+1)),l=gn(l,[["exit",c,t]]),Kn(e,i,e.length,l),e}function jI(e,t,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(f){return i?i._inactive?h(f):(a=r.parser.defined.includes(xi(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):n(f)}function c(f){return f===40?e.attempt(xI,d,a?d:h)(f):f===91?e.attempt(vI,d,a?u:h)(f):a?d(f):h(f)}function u(f){return e.attempt(wI,d,h)(f)}function d(f){return t(f)}function h(f){return i._balanced=!0,n(f)}}function SI(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return Kt(h)?Ca(e,i)(h):i(h)}function i(h){return h===41?d(h):Gk(e,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return Kt(h)?Ca(e,c)(h):d(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?Xk(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return Kt(h)?Ca(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function NI(e,t,n){const r=this;return s;function s(l){return Kk.call(r,e,i,a,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(xi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function a(l){return n(l)}}function _I(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const EI={name:"labelStartImage",resolveAll:zp.resolveAll,tokenize:PI};function PI(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const CI={name:"labelStartLink",resolveAll:zp.resolveAll,tokenize:TI};function TI(e,t,n){const r=this;return s;function s(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Fu={name:"lineEnding",tokenize:AI};function AI(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),De(e,t,"linePrefix")}}const ml={name:"thematicBreak",tokenize:II};function II(e,t,n){let r=0,s;return i;function i(u){return e.enter("thematicBreak"),a(u)}function a(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||de(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Ee(u)?De(e,l,"whitespace")(u):l(u))}}const Ft={continuation:{tokenize:OI},exit:MI,name:"list",tokenize:LI},RI={partial:!0,tokenize:FI},DI={partial:!0,tokenize:$I};function LI(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return l;function l(p){const m=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Lh(p)){if(r.containerState.type||(r.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(ml,n,u)(p):u(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return n(p)}function c(p){return Lh(p)&&++a<10?(e.consume(p),c):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),u(p)):n(p)}function u(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(Rc,r.interrupt?n:d,e.attempt(RI,f,h))}function d(p){return r.containerState.initialBlankLine=!0,i++,f(p)}function h(p){return Ee(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function OI(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Rc,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,De(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!Ee(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(DI,t,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,De(e,e.attempt(Ft,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function $I(e,t,n){const r=this;return De(e,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(i):n(i)}}function MI(e){e.exit(this.containerState.type)}function FI(e,t,n){const r=this;return De(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!Ee(i)&&a&&a[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const gy={name:"setextUnderline",resolveTo:UI,tokenize:VI};function UI(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",a,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function VI(e,t,n){const r=this;let s;return i;function i(u){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),s=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Ee(u)?De(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||de(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const zI={tokenize:BI};function BI(e){const t=this,n=e.attempt(Rc,r,e.attempt(this.parser.constructs.flowInitial,s,De(e,e.attempt(this.parser.constructs.flow,s,e.attempt(KA,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const HI={resolveAll:Yk()},WI=Jk("string"),qI=Jk("text");function Jk(e){return{resolveAll:Yk(e==="text"?GI:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,a,l);return a;function a(d){return u(d)?i(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),i(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const h=s[d];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function Yk(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function GI(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,a=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const KI={42:Ft,43:Ft,45:Ft,48:Ft,49:Ft,50:Ft,51:Ft,52:Ft,53:Ft,54:Ft,55:Ft,56:Ft,57:Ft,62:Bk},XI={91:ZA},JI={[-2]:Mu,[-1]:Mu,32:Mu},YI={35:iI,42:ml,45:[gy,ml],60:cI,61:gy,95:ml,96:py,126:py},QI={38:Wk,92:Hk},ZI={[-5]:Fu,[-4]:Fu,[-3]:Fu,33:EI,38:Wk,42:Oh,60:[CA,gI],91:CI,92:[rI,Hk],93:zp,95:Oh,96:zA},eR={null:[Oh,HI]},tR={null:[42,95]},nR={null:[]},rR=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:tR,contentInitial:XI,disable:nR,document:KI,flow:YI,flowInitial:JI,insideSpan:eR,string:QI,text:ZI},Symbol.toStringTag,{value:"Module"}));function sR(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],l=[];const c={attempt:P(E),check:P(S),consume:g,enter:x,exit:N,interrupt:P(S,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:m,parser:e,previous:null,sliceSerialize:f,sliceStream:p,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function h(V){return a=gn(a,V),w(),a[a.length-1]!==null?[]:(T(t,0),u.events=Vp(i,u.events,u),u.events)}function f(V,X){return aR(p(V),X)}function p(V){return iR(a,V)}function m(){const{_bufferIndex:V,_index:X,line:me,column:D,offset:R}=r;return{_bufferIndex:V,_index:X,line:me,column:D,offset:R}}function v(V){s[V.line]=V.column,O()}function w(){let V;for(;r._index<a.length;){const X=a[r._index];if(typeof X=="string")for(V=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===V&&r._bufferIndex<X.length;)y(X.charCodeAt(r._bufferIndex));else y(X)}}function y(V){d=d(V)}function g(V){de(V)?(r.line++,r.column=1,r.offset+=V===-3?2:1,O()):V!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=V}function x(V,X){const me=X||{};return me.type=V,me.start=m(),u.events.push(["enter",me,u]),l.push(me),me}function N(V){const X=l.pop();return X.end=m(),u.events.push(["exit",X,u]),X}function E(V,X){T(V,X.from)}function S(V,X){X.restore()}function P(V,X){return me;function me(D,R,q){let A,C,z,j;return Array.isArray(D)?ie(D):"tokenize"in D?ie([D]):ne(D);function ne(je){return wt;function wt(Ot){const ln=Ot!==null&&je[Ot],Jt=Ot!==null&&je.null,$t=[...Array.isArray(ln)?ln:ln?[ln]:[],...Array.isArray(Jt)?Jt:Jt?[Jt]:[]];return ie($t)(Ot)}}function ie(je){return A=je,C=0,je.length===0?q:_(je[C])}function _(je){return wt;function wt(Ot){return j=$(),z=je,je.partial||(u.currentConstruct=je),je.name&&u.parser.constructs.disable.null.includes(je.name)?pt():je.tokenize.call(X?Object.assign(Object.create(u),X):u,c,Se,pt)(Ot)}}function Se(je){return V(z,j),R}function pt(je){return j.restore(),++C<A.length?_(A[C]):q}}}function T(V,X){V.resolveAll&&!i.includes(V)&&i.push(V),V.resolve&&Kn(u.events,X,u.events.length-X,V.resolve(u.events.slice(X),u)),V.resolveTo&&(u.events=V.resolveTo(u.events,u))}function $(){const V=m(),X=u.previous,me=u.currentConstruct,D=u.events.length,R=Array.from(l);return{from:D,restore:q};function q(){r=V,u.previous=X,u.currentConstruct=me,u.events.length=D,l=R,O()}}function O(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function iR(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}function aR(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function oR(e){const r={constructs:pA([rR,...(e||{}).extensions||[]]),content:s(kA),defined:[],document:s(SA),flow:s(zI),lazy:{},string:s(WI),text:s(qI)};return r;function s(i){return a;function a(l){return sR(r,i,l)}}}function lR(e){for(;!qk(e););return e}const yy=/[\0\t\n\r]/g;function cR(){let e=1,t="",n=!0,r;return s;function s(i,a,l){const c=[];let u,d,h,f,p;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),h=0,t="",n&&(i.charCodeAt(0)===65279&&h++,n=void 0);h<i.length;){if(yy.lastIndex=h,u=yy.exec(i),f=u&&u.index!==void 0?u.index:i.length,p=i.charCodeAt(f),!u){t=i.slice(h);break}if(p===10&&h===f&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<f&&(c.push(i.slice(h,f)),e+=f-h),p){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=f+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const uR=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dR(e){return e.replace(uR,hR)}function hR(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return zk(n.slice(i?2:1),i?16:10)}return Up(n)||e}const Qk={}.hasOwnProperty;function fR(e,t,n){return typeof t!="string"&&(n=t,t=void 0),pR(n)(lR(oR(n).document().write(cR()(e,t,!0))))}function pR(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(_e),autolinkProtocol:$,autolinkEmail:$,atxHeading:i(M),blockQuote:i(Jt),characterEscape:$,characterReference:$,codeFenced:i($t),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i($t,a),codeText:i(J,a),codeTextData:$,data:$,codeFlowValue:$,definition:i(Ye),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(Yn),hardBreakEscape:i(se),hardBreakTrailing:i(se),htmlFlow:i(re,a),htmlFlowData:$,htmlText:i(re,a),htmlTextData:$,image:i(be),label:a,link:i(_e),listItem:i(Ce),listItemValue:f,listOrdered:i(ct,h),listUnordered:i(ct),paragraph:i(cn),reference:_,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(M),strong:i(Qe),thematicBreak:i(Qn)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:ln,autolinkProtocol:Ot,blockQuote:c(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:pt,characterReferenceMarkerNumeric:pt,characterReferenceValue:je,characterReference:wt,codeFenced:c(w),codeFencedFence:v,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:O,codeIndented:c(y),codeText:c(R),codeTextData:O,data:O,definition:c(),definitionDestinationString:N,definitionLabelString:g,definitionTitleString:x,emphasis:c(),hardBreakEscape:c(X),hardBreakTrailing:c(X),htmlFlow:c(me),htmlFlowData:O,htmlText:c(D),htmlTextData:O,image:c(A),label:z,labelText:C,lineEnding:V,link:c(q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Se,resourceDestinationString:j,resourceTitleString:ne,resource:ie,setextHeading:c(T),setextHeadingLineSequence:P,setextHeadingText:S,strong:c(),thematicBreak:c()}};Zk(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(I){let F={type:"root",children:[]};const b={stack:[F],tokenStack:[],config:t,enter:l,exit:u,buffer:a,resume:d,data:n},B=[];let Y=-1;for(;++Y<I.length;)if(I[Y][1].type==="listOrdered"||I[Y][1].type==="listUnordered")if(I[Y][0]==="enter")B.push(Y);else{const ge=B.pop();Y=s(I,ge,Y)}for(Y=-1;++Y<I.length;){const ge=t[I[Y][0]];Qk.call(ge,I[Y][1].type)&&ge[I[Y][1].type].call(Object.assign({sliceSerialize:I[Y][2].sliceSerialize},b),I[Y][1])}if(b.tokenStack.length>0){const ge=b.tokenStack[b.tokenStack.length-1];(ge[1]||xy).call(b,void 0,ge[0])}for(F.position={start:Nr(I.length>0?I[0][1].start:{line:1,column:1,offset:0}),end:Nr(I.length>0?I[I.length-2][1].end:{line:1,column:1,offset:0})},Y=-1;++Y<t.transforms.length;)F=t.transforms[Y](F)||F;return F}function s(I,F,b){let B=F-1,Y=-1,ge=!1,ce,ae,$e,L;for(;++B<=b;){const U=I[B];switch(U[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{U[0]==="enter"?Y++:Y--,L=void 0;break}case"lineEndingBlank":{U[0]==="enter"&&(ce&&!L&&!Y&&!$e&&($e=B),L=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:L=void 0}if(!Y&&U[0]==="enter"&&U[1].type==="listItemPrefix"||Y===-1&&U[0]==="exit"&&(U[1].type==="listUnordered"||U[1].type==="listOrdered")){if(ce){let ee=B;for(ae=void 0;ee--;){const Q=I[ee];if(Q[1].type==="lineEnding"||Q[1].type==="lineEndingBlank"){if(Q[0]==="exit")continue;ae&&(I[ae][1].type="lineEndingBlank",ge=!0),Q[1].type="lineEnding",ae=ee}else if(!(Q[1].type==="linePrefix"||Q[1].type==="blockQuotePrefix"||Q[1].type==="blockQuotePrefixWhitespace"||Q[1].type==="blockQuoteMarker"||Q[1].type==="listItemIndent"))break}$e&&(!ae||$e<ae)&&(ce._spread=!0),ce.end=Object.assign({},ae?I[ae][1].start:U[1].end),I.splice(ae||B,0,["exit",ce,U[2]]),B++,b++}if(U[1].type==="listItemPrefix"){const ee={type:"listItem",_spread:!1,start:Object.assign({},U[1].start),end:void 0};ce=ee,I.splice(B,0,["enter",ee,U[2]]),B++,b++,$e=void 0,L=!0}}}return I[F][1]._spread=ge,b}function i(I,F){return b;function b(B){l.call(this,I(B),B),F&&F.call(this,B)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(I,F,b){this.stack[this.stack.length-1].children.push(I),this.stack.push(I),this.tokenStack.push([F,b||void 0]),I.position={start:Nr(F.start),end:void 0}}function c(I){return F;function F(b){I&&I.call(this,b),u.call(this,b)}}function u(I,F){const b=this.stack.pop(),B=this.tokenStack.pop();if(B)B[0].type!==I.type&&(F?F.call(this,I,B[0]):(B[1]||xy).call(this,I,B[0]));else throw new Error("Cannot close `"+I.type+"` ("+Pa({start:I.start,end:I.end})+"): it’s not open");b.position.end=Nr(I.end)}function d(){return hA(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(I){if(this.data.expectingFirstListItemValue){const F=this.stack[this.stack.length-2];F.start=Number.parseInt(this.sliceSerialize(I),10),this.data.expectingFirstListItemValue=void 0}}function p(){const I=this.resume(),F=this.stack[this.stack.length-1];F.lang=I}function m(){const I=this.resume(),F=this.stack[this.stack.length-1];F.meta=I}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I.replace(/(\r?\n|\r)$/g,"")}function g(I){const F=this.resume(),b=this.stack[this.stack.length-1];b.label=F,b.identifier=xi(this.sliceSerialize(I)).toLowerCase()}function x(){const I=this.resume(),F=this.stack[this.stack.length-1];F.title=I}function N(){const I=this.resume(),F=this.stack[this.stack.length-1];F.url=I}function E(I){const F=this.stack[this.stack.length-1];if(!F.depth){const b=this.sliceSerialize(I).length;F.depth=b}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function P(I){const F=this.stack[this.stack.length-1];F.depth=this.sliceSerialize(I).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function $(I){const b=this.stack[this.stack.length-1].children;let B=b[b.length-1];(!B||B.type!=="text")&&(B=Te(),B.position={start:Nr(I.start),end:void 0},b.push(B)),this.stack.push(B)}function O(I){const F=this.stack.pop();F.value+=this.sliceSerialize(I),F.position.end=Nr(I.end)}function V(I){const F=this.stack[this.stack.length-1];if(this.data.atHardBreak){const b=F.children[F.children.length-1];b.position.end=Nr(I.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(F.type)&&($.call(this,I),O.call(this,I))}function X(){this.data.atHardBreak=!0}function me(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I}function D(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I}function R(){const I=this.resume(),F=this.stack[this.stack.length-1];F.value=I}function q(){const I=this.stack[this.stack.length-1];if(this.data.inReference){const F=this.data.referenceType||"shortcut";I.type+="Reference",I.referenceType=F,delete I.url,delete I.title}else delete I.identifier,delete I.label;this.data.referenceType=void 0}function A(){const I=this.stack[this.stack.length-1];if(this.data.inReference){const F=this.data.referenceType||"shortcut";I.type+="Reference",I.referenceType=F,delete I.url,delete I.title}else delete I.identifier,delete I.label;this.data.referenceType=void 0}function C(I){const F=this.sliceSerialize(I),b=this.stack[this.stack.length-2];b.label=dR(F),b.identifier=xi(F).toLowerCase()}function z(){const I=this.stack[this.stack.length-1],F=this.resume(),b=this.stack[this.stack.length-1];if(this.data.inReference=!0,b.type==="link"){const B=I.children;b.children=B}else b.alt=F}function j(){const I=this.resume(),F=this.stack[this.stack.length-1];F.url=I}function ne(){const I=this.resume(),F=this.stack[this.stack.length-1];F.title=I}function ie(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function Se(I){const F=this.resume(),b=this.stack[this.stack.length-1];b.label=F,b.identifier=xi(this.sliceSerialize(I)).toLowerCase(),this.data.referenceType="full"}function pt(I){this.data.characterReferenceType=I.type}function je(I){const F=this.sliceSerialize(I),b=this.data.characterReferenceType;let B;b?(B=zk(F,b==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):B=Up(F);const Y=this.stack[this.stack.length-1];Y.value+=B}function wt(I){const F=this.stack.pop();F.position.end=Nr(I.end)}function Ot(I){O.call(this,I);const F=this.stack[this.stack.length-1];F.url=this.sliceSerialize(I)}function ln(I){O.call(this,I);const F=this.stack[this.stack.length-1];F.url="mailto:"+this.sliceSerialize(I)}function Jt(){return{type:"blockquote",children:[]}}function $t(){return{type:"code",lang:null,meta:null,value:""}}function J(){return{type:"inlineCode",value:""}}function Ye(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Yn(){return{type:"emphasis",children:[]}}function M(){return{type:"heading",depth:0,children:[]}}function se(){return{type:"break"}}function re(){return{type:"html",value:""}}function be(){return{type:"image",title:null,url:"",alt:null}}function _e(){return{type:"link",title:null,url:"",children:[]}}function ct(I){return{type:"list",ordered:I.type==="listOrdered",start:null,spread:I._spread,children:[]}}function Ce(I){return{type:"listItem",spread:I._spread,checked:null,children:[]}}function cn(){return{type:"paragraph",children:[]}}function Qe(){return{type:"strong",children:[]}}function Te(){return{type:"text",value:""}}function Qn(){return{type:"thematicBreak"}}}function Nr(e){return{line:e.line,column:e.column,offset:e.offset}}function Zk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Zk(e,r):mR(e,r)}}function mR(e,t){let n;for(n in t)if(Qk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function xy(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Pa({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Pa({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Pa({start:t.start,end:t.end})+") is still open")}function gR(e){const t=this;t.parser=n;function n(r){return fR(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function yR(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function xR(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function vR(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function wR(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bR(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function kR(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Bi(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function jR(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function SR(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function e1(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function NR(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return e1(e,t);const s={src:Bi(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function _R(e,t){const n={src:Bi(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function ER(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function PR(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return e1(e,t);const s={href:Bi(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function CR(e,t){const n={href:Bi(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function TR(e,t,n){const r=e.all(t),s=n?AR(n):t1(t),i={},a=[];if(typeof t.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?a.push(...d.children):a.push(d)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,u),e.applyData(t,u)}function AR(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=t1(n[r])}return t}function t1(e){const t=e.spread;return t??e.children.length>1}function IR(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function RR(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function DR(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function LR(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function OR(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Op(t.children[1]),c=Lk(t.children[t.children.length-1]);l&&c&&(a.position={start:l,end:c}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function $R(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],f={},p=a?a[c]:void 0;p&&(f.align=p);let m={type:"element",tagName:i,properties:f,children:[]};h&&(m.children=e.all(h),e.patch(h,m),m=e.applyData(h,m)),u.push(m)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function MR(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const vy=9,wy=32;function FR(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(by(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(by(t.slice(s),s>0,!1)),i.join("")}function by(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===vy||i===wy;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===vy||i===wy;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function UR(e,t){const n={type:"text",value:FR(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function VR(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const zR={blockquote:yR,break:xR,code:vR,delete:wR,emphasis:bR,footnoteReference:kR,heading:jR,html:SR,imageReference:NR,image:_R,inlineCode:ER,linkReference:PR,link:CR,listItem:TR,list:IR,paragraph:RR,root:DR,strong:LR,table:OR,tableCell:MR,tableRow:$R,text:UR,thematicBreak:VR,toml:qo,yaml:qo,definition:qo,footnoteDefinition:qo};function qo(){}const n1=-1,Dc=0,Ta=1,ec=2,Bp=3,Hp=4,Wp=5,qp=6,r1=7,s1=8,ky=typeof self=="object"?self:globalThis,BR=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case Dc:case n1:return n(a,s);case Ta:{const l=n([],s);for(const c of a)l.push(r(c));return l}case ec:{const l=n({},s);for(const[c,u]of a)l[r(c)]=r(u);return l}case Bp:return n(new Date(a),s);case Hp:{const{source:l,flags:c}=a;return n(new RegExp(l,c),s)}case Wp:{const l=n(new Map,s);for(const[c,u]of a)l.set(r(c),r(u));return l}case qp:{const l=n(new Set,s);for(const c of a)l.add(r(c));return l}case r1:{const{name:l,message:c}=a;return n(new ky[l](c),s)}case s1:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new ky[i](a),s)};return r},jy=e=>BR(new Map,e)(0),zs="",{toString:HR}={},{keys:WR}=Object,ra=e=>{const t=typeof e;if(t!=="object"||!e)return[Dc,t];const n=HR.call(e).slice(8,-1);switch(n){case"Array":return[Ta,zs];case"Object":return[ec,zs];case"Date":return[Bp,zs];case"RegExp":return[Hp,zs];case"Map":return[Wp,zs];case"Set":return[qp,zs];case"DataView":return[Ta,n]}return n.includes("Array")?[Ta,n]:n.includes("Error")?[r1,n]:[ec,n]},Go=([e,t])=>e===Dc&&(t==="function"||t==="symbol"),qR=(e,t,n,r)=>{const s=(a,l)=>{const c=r.push(a)-1;return n.set(l,c),c},i=a=>{if(n.has(a))return n.get(a);let[l,c]=ra(a);switch(l){case Dc:{let d=a;switch(c){case"bigint":l=s1,d=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([n1],a)}return s([l,d],a)}case Ta:{if(c){let f=a;return c==="DataView"?f=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(a)),s([c,[...f]],a)}const d=[],h=s([l,d],a);for(const f of a)d.push(i(f));return h}case ec:{if(c)switch(c){case"BigInt":return s([c,a.toString()],a);case"Boolean":case"Number":case"String":return s([c,a.valueOf()],a)}if(t&&"toJSON"in a)return i(a.toJSON());const d=[],h=s([l,d],a);for(const f of WR(a))(e||!Go(ra(a[f])))&&d.push([i(f),i(a[f])]);return h}case Bp:return s([l,a.toISOString()],a);case Hp:{const{source:d,flags:h}=a;return s([l,{source:d,flags:h}],a)}case Wp:{const d=[],h=s([l,d],a);for(const[f,p]of a)(e||!(Go(ra(f))||Go(ra(p))))&&d.push([i(f),i(p)]);return h}case qp:{const d=[],h=s([l,d],a);for(const f of a)(e||!Go(ra(f)))&&d.push(i(f));return h}}const{message:u}=a;return s([l,{name:c,message:u}],a)};return i},Sy=(e,{json:t,lossy:n}={})=>{const r=[];return qR(!(t||n),!!t,new Map,r)(e),r},tc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?jy(Sy(e,t)):structuredClone(e):(e,t)=>jy(Sy(e,t));function GR(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function KR(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function XR(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||GR,r=e.options.footnoteBackLabel||KR,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),f=Bi(h.toLowerCase());let p=0;const m=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++p<=v;){m.length>0&&m.push({type:"text",value:" "});let g=typeof n=="string"?n:n(c,p);typeof g=="string"&&(g={type:"text",value:g}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,p),className:["data-footnote-backref"]},children:Array.isArray(g)?g:[g]})}const w=d[d.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const g=w.children[w.children.length-1];g&&g.type==="text"?g.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...m)}else d.push(...m);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(d,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...tc(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const i1=function(e){if(e==null)return ZR;if(typeof e=="function")return Lc(e);if(typeof e=="object")return Array.isArray(e)?JR(e):YR(e);if(typeof e=="string")return QR(e);throw new Error("Expected function, string, or object as test")};function JR(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=i1(e[n]);return Lc(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function YR(e){const t=e;return Lc(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function QR(e){return Lc(t);function t(n){return n&&n.type===e}}function Lc(e){return t;function t(n,r,s){return!!(eD(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function ZR(){return!0}function eD(e){return e!==null&&typeof e=="object"&&"type"in e}const a1=[],tD=!0,Ny=!1,nD="skip";function rD(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=i1(s),a=r?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=a1,m,v,w;if((!t||i(c,u,d[d.length-1]||void 0))&&(p=sD(n(c,d)),p[0]===Ny))return p;if("children"in c&&c.children){const y=c;if(y.children&&p[0]!==nD)for(v=(r?y.children.length:-1)+a,w=d.concat(y);v>-1&&v<y.children.length;){const g=y.children[v];if(m=l(g,v,w)(),m[0]===Ny)return m;v=typeof m[1]=="number"?m[1]:v+a}}return p}}}function sD(e){return Array.isArray(e)?e:typeof e=="number"?[tD,e]:e==null?a1:[e]}function o1(e,t,n,r){let s,i,a;typeof t=="function"&&typeof n!="function"?(i=void 0,a=t,s=n):(i=t,a=n,s=r),rD(e,i,l,s);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return a(c,h,d)}}const $h={}.hasOwnProperty,iD={};function aD(e,t){const n=t||iD,r=new Map,s=new Map,i=new Map,a={...zR,...n.handlers},l={all:u,applyData:lD,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:c,options:n,patch:oD,wrap:uD};return o1(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:s,f=String(d.identifier).toUpperCase();h.has(f)||h.set(f,d)}}),l;function c(d,h){const f=d.type,p=l.handlers[f];if($h.call(l.handlers,f)&&p)return p(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in d){const{children:v,...w}=d,y=tc(w);return y.children=l.all(d),y}return tc(d)}return(l.options.unknownHandler||cD)(l,d,h)}function u(d){const h=[];if("children"in d){const f=d.children;let p=-1;for(;++p<f.length;){const m=l.one(f[p],d);if(m){if(p&&f[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=_y(m.value)),!Array.isArray(m)&&m.type==="element")){const v=m.children[0];v&&v.type==="text"&&(v.value=_y(v.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function oD(e,t){e.position&&(t.position=H3(e))}function lD(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,tc(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function cD(e,t){const n=t.data||{},r="value"in t&&!($h.call(n,"hProperties")||$h.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function uD(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function _y(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ey(e,t){const n=aD(e,t),r=n.one(e,void 0),s=XR(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function dD(e,t){return e&&"run"in e?async function(n,r){const s=Ey(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Ey(n,{file:r,...e||t})}}function Py(e){if(e)throw e}var gl=Object.prototype.hasOwnProperty,l1=Object.prototype.toString,Cy=Object.defineProperty,Ty=Object.getOwnPropertyDescriptor,Ay=function(t){return typeof Array.isArray=="function"?Array.isArray(t):l1.call(t)==="[object Array]"},Iy=function(t){if(!t||l1.call(t)!=="[object Object]")return!1;var n=gl.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&gl.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||gl.call(t,s)},Ry=function(t,n){Cy&&n.name==="__proto__"?Cy(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Dy=function(t,n){if(n==="__proto__")if(gl.call(t,n)){if(Ty)return Ty(t,n).value}else return;return t[n]},hD=function e(){var t,n,r,s,i,a,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=Dy(l,n),s=Dy(t,n),l!==s&&(d&&s&&(Iy(s)||(i=Ay(s)))?(i?(i=!1,a=r&&Ay(r)?r:[]):a=r&&Iy(r)?r:{},Ry(l,{name:n,newValue:e(d,a,s)})):typeof s<"u"&&Ry(l,{name:n,newValue:s}));return l};const Uu=Vh(hD);function Mh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function fD(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...s);function l(c,...u){const d=e[++i];let h=-1;if(c){a(c);return}for(;++h<s.length;)(u[h]===null||u[h]===void 0)&&(u[h]=s[h]);s=u,d?pD(d,l)(...u):a(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function pD(e,t){let n;return r;function r(...a){const l=e.length>a.length;let c;l&&a.push(s);try{c=e.apply(this,a)}catch(u){const d=u;if(l&&n)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(a,...l){n||(n=!0,t(a,...l))}function i(a){s(null,a)}}const Fn={basename:mD,dirname:gD,extname:yD,join:xD,sep:"/"};function mD(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');wo(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function gD(e){if(wo(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function yD(e){wo(e);let t=e.length,n=-1,r=0,s=-1,i=0,a;for(;t--;){const l=e.codePointAt(t);if(l===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function xD(...e){let t=-1,n;for(;++t<e.length;)wo(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":vD(n)}function vD(e){wo(e);const t=e.codePointAt(0)===47;let n=wD(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function wD(e,t){let n="",r=0,s=-1,i=0,a=-1,l,c;for(;++a<=e.length;){if(a<e.length)l=e.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,a):n=e.slice(s+1,a),r=a-s-1;s=a,i=0}else l===46&&i>-1?i++:i=-1}return n}function wo(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const bD={cwd:kD};function kD(){return"/"}function Fh(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function jD(e){if(typeof e=="string")e=new URL(e);else if(!Fh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return SD(e)}function SD(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Vu=["history","path","basename","stem","extname","dirname"];class c1{constructor(t){let n;t?Fh(t)?n={path:t}:typeof t=="string"||ND(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":bD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Vu.length;){const i=Vu[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Vu.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Fn.basename(this.path):void 0}set basename(t){Bu(t,"basename"),zu(t,"basename"),this.path=Fn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Fn.dirname(this.path):void 0}set dirname(t){Ly(this.basename,"dirname"),this.path=Fn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Fn.extname(this.path):void 0}set extname(t){if(zu(t,"extname"),Ly(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Fn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Fh(t)&&(t=jD(t)),Bu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Fn.basename(this.path,this.extname):void 0}set stem(t){Bu(t,"stem"),zu(t,"stem"),this.path=Fn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Ct(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function zu(e,t){if(e&&e.includes(Fn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Fn.sep+"`")}function Bu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ly(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ND(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const _D=function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},ED={}.hasOwnProperty;class Gp extends _D{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=fD()}copy(){const t=new Gp;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Uu(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(qu("data",this.frozen),this.namespace[t]=n,this):ED.call(this.namespace,t)&&this.namespace[t]||void 0:t?(qu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Ko(t),r=this.parser||this.Parser;return Hu("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Hu("process",this.parser||this.Parser),Wu("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const l=Ko(t),c=r.parse(l);r.run(c,l,function(d,h,f){if(d||!h||!f)return u(d);const p=h,m=r.stringify(p,f);TD(m)?f.value=m:f.result=m,u(d,f)});function u(d,h){d||!h?a(d):i?i(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),Hu("processSync",this.parser||this.Parser),Wu("processSync",this.compiler||this.Compiler),this.process(t,s),$y("processSync","process",n),r;function s(i,a){n=!0,Py(i),r=a}}run(t,n,r){Oy(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,l){const c=Ko(n);s.run(t,c,u);function u(d,h,f){const p=h||t;d?l(d):a?a(p):r(void 0,p,f)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),$y("runSync","run",r),s;function i(a,l){Py(a),s=l,r=!0}}stringify(t,n){this.freeze();const r=Ko(n),s=this.compiler||this.Compiler;return Wu("stringify",s),Oy(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(qu("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Uu(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];i(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===u){f=h;break}if(f===-1)r.push([u,...d]);else if(d.length>0){let[p,...m]=d;const v=r[f][1];Mh(v)&&Mh(p)&&(p=Uu(!0,v,p)),r[f]=[u,p,...m]}}}}const PD=new Gp().freeze();function Hu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Wu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function qu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Oy(e){if(!Mh(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function $y(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ko(e){return CD(e)?e:new c1(e)}function CD(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function TD(e){return typeof e=="string"||AD(e)}function AD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ID="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",My=[],Fy={allowDangerousHtml:!0},RD=/^(https?|ircs?|mailto|xmpp)$/i,DD=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Uh(e){const t=LD(e),n=OD(e);return $D(t.runSync(t.parse(n),n),e)}function LD(e){const t=e.rehypePlugins||My,n=e.remarkPlugins||My,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Fy}:Fy;return PD().use(gR).use(n).use(dD,r).use(t)}function OD(e){const t=e.children||"",n=new c1;return typeof t=="string"&&(n.value=t),n}function $D(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,a=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||MD;for(const d of DD)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+ID+d.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),o1(e,u),X3(e,{Fragment:o.Fragment,components:s,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function u(d,h,f){if(d.type==="raw"&&f&&typeof h=="number")return a?f.children.splice(h,1):f.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let p;for(p in $u)if(Object.hasOwn($u,p)&&Object.hasOwn(d.properties,p)){const m=d.properties[p],v=$u[p];(v===null||v.includes(d.tagName))&&(d.properties[p]=c(String(m||""),p,d))}}if(d.type==="element"){let p=n?!n.includes(d.tagName):i?i.includes(d.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(d,h,f)),p&&f&&typeof h=="number")return l&&d.children?f.children.splice(h,1,...d.children):f.children.splice(h,1),h}}}function MD(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||RD.test(e.slice(0,t))?e:""}function Uy({strategicDirectives:e,onUpdateChecklist:t,onSetActiveSD:n,currentSD:r,isCompact:s,detailMode:i,onRefresh:a,onUpdateStatus:l}){const{id:c}=Ff(),u=Oi(),[d,h]=k.useState(null),[f,p]=k.useState("list"),[m,v]=k.useState(null),[w,y]=k.useState(()=>localStorage.getItem("sd-filter-migration-v2")?localStorage.getItem("sd-status-filter")||"active,draft":(localStorage.setItem("sd-filter-migration-v2","true"),localStorage.setItem("sd-status-filter","active,draft"),localStorage.setItem("sd-priority-filter","critical,high"),localStorage.setItem("sd-application-filter","EHG"),"active,draft")),[g,x]=k.useState(""),[N,E]=k.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-priority-filter")||"critical,high"),[S,P]=k.useState(()=>localStorage.getItem("sd-filter-migration-v2")&&localStorage.getItem("sd-application-filter")||"EHG"),[T,$]=k.useState(null),[O,V]=k.useState(!1),[X,me]=k.useState(!1),[D,R]=k.useState(()=>{const b=localStorage.getItem("sd-sort-levels");return b?JSON.parse(b):[{field:"sequence_rank",direction:"asc",label:"Sequence Rank"}]}),[q,A]=k.useState(()=>{const b=localStorage.getItem("sd-saved-sorts");return b?JSON.parse(b):{Default:[{field:"sequence_rank",direction:"asc",label:"Sequence Rank"}],"WSJF Priority":[{field:"wsjf_score",direction:"desc",label:"WSJF Score"},{field:"status",direction:"asc",label:"Status"},{field:"created_at",direction:"desc",label:"Created Date"}],"Progress Tracking":[{field:"progress",direction:"asc",label:"Progress"},{field:"priority",direction:"desc",label:"Priority"},{field:"title",direction:"asc",label:"Title"}],"Recent Activity":[{field:"updated_at",direction:"desc",label:"Last Updated"},{field:"status",direction:"asc",label:"Status"}]}}),[C,z]=k.useState(""),[j,ne]=k.useState(!1),[ie,_]=k.useState("all"),[Se,pt]=k.useState(null),[je,wt]=k.useState(null);k.useEffect(()=>{localStorage.setItem("sd-status-filter",w)},[w]),k.useEffect(()=>{localStorage.setItem("sd-priority-filter",N)},[N]),k.useEffect(()=>{localStorage.setItem("sd-application-filter",S)},[S]),k.useEffect(()=>{localStorage.setItem("sd-sort-levels",JSON.stringify(D))},[D]),k.useEffect(()=>{localStorage.setItem("sd-saved-sorts",JSON.stringify(q))},[q]),k.useEffect(()=>{if(i&&c){console.log("Detail mode - Looking for SD with id:",c),console.log("Available SDs count:",e.length),e.length>0&&console.log("First few SDs:",e.slice(0,3).map(B=>({id:B.id,title:B.title})));const b=e.find(B=>B.id===c);b?(console.log("Found SD:",b.id,b.title),v(b),p("detail"),document.title=`${b.title||b.id} - LEO Protocol Dashboard`):e.length>0?(console.warn(`SD with id '${c}' not found in ${e.length} directives, redirecting to list`),u("/strategic-directives",{replace:!0})):console.log("Waiting for strategic directives to load...")}else i||(p("list"),v(null),document.title="Strategic Directives - LEO Protocol Dashboard")},[c,i,e,u]);const Ot=b=>{h(d===b?null:b)},ln=b=>{navigator.clipboard.writeText(b),$(b),setTimeout(()=>$(null),2e3)},Jt=()=>{x(""),E("all"),y("all"),P("all"),_("all")},$t=()=>{V(!1)},J=g||N!=="all"||w!=="all"||S!=="all"||ie!=="all",Ye=b=>{switch(b==null?void 0:b.toLowerCase()){case"critical":return"border-l-4 border-l-red-500";case"high":return"border-l-4 border-l-orange-500";case"medium":return"border-l-4 border-l-yellow-500";case"low":return"border-l-4 border-l-gray-400";default:return"border-l-4 border-l-gray-300"}},Yn=b=>b===100?"bg-gradient-to-r from-green-400 to-green-600 animate-pulse":b>=76?"bg-gradient-to-r from-blue-400 to-blue-600":b>=51?"bg-gradient-to-r from-yellow-400 to-yellow-600":b>=26?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gradient-to-r from-red-400 to-red-600",M=(b,B)=>{const Y=e.find(ge=>ge.id===b);Y&&Y.checklist&&Y.checklist[B]&&t(b,B,!Y.checklist[B].checked)},se=b=>{if(!b||!b.id){console.error("Invalid SD for navigation:",b);return}try{u(`/strategic-directives/${b.id}`)}catch(B){console.error("Navigation error:",B)}},[re,be]=k.useState({}),[_e,ct]=k.useState(new Set),[Ce,cn]=k.useState(new Set),Qe=async(b,B=!1)=>{if(!(!B&&re[b]&&re[b].summary)&&!_e.has(b)){ct(Y=>new Set(Y).add(b));try{const Y=`/api/strategic-directives/${b}/backlog-summary${B?"?force_refresh=true":""}`,ge=await fetch(Y),ce=await ge.json();ge.ok?be(ae=>({...ae,[b]:{...ce,timestamp:Date.now()}})):(console.warn(`Failed to fetch backlog summary for ${b}:`,ce.error),be(ae=>({...ae,[b]:{summary:ce.fallback||"Backlog summary unavailable.",itemCount:0,cached:!1}})))}catch(Y){console.error("Error fetching backlog summary:",Y),be(ge=>({...ge,[b]:{summary:"Unable to load backlog summary.",itemCount:0,cached:!1}}))}finally{ct(Y=>{const ge=new Set(Y);return ge.delete(b),ge})}}};if(f==="detail"&&m)return o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>u("/strategic-directives"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[o.jsx(Nt,{className:"w-4 h-4 mr-1"}),"Back to List"]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:[m.id,": ",m.title||"Untitled"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:m.metadata&&Object.entries(m.metadata).map(([b,B])=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:b}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:typeof B=="object"?JSON.stringify(B,null,2):String(B)})]},b))}),o.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:o.jsx(Uh,{children:m.content||"No content available"})}),m.checklist&&m.checklist.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Requirements Checklist"}),o.jsx("div",{className:"space-y-2",children:m.checklist.map((b,B)=>o.jsxs("label",{className:"flex items-start p-3 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:b.checked,onChange:()=>M(m.id,B),className:"mt-1 mr-3 w-5 h-5 text-primary-600 rounded focus:ring-primary-500"}),o.jsx("span",{className:`flex-1 ${b.checked?"line-through text-gray-500":""}`,children:b.text})]},B))})]}),m.prds&&m.prds.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[o.jsx(Et,{className:"w-5 h-5 mr-2 text-blue-600"}),"Product Requirements Documents (",m.prds.length,")"]}),o.jsx("div",{className:"space-y-4",children:m.prds.map(b=>o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:b.title}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["ID: ",b.id]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${b.status==="approved"?"bg-green-100 text-green-800":b.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:b.status}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${b.priority==="high"?"bg-red-100 text-red-800":b.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:b.priority})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Phase:"})," ",b.phase]}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Progress:"})," ",b.progress,"%"]})]}),o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Created:"})," ",new Date(b.createdAt).toLocaleDateString()]})})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:o.jsxs("button",{onClick:()=>u(`/prds/${b.id}`),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center",children:["View Full PRD ",o.jsx(Nt,{className:"w-4 h-4 ml-1"})]})})]},b.id))})]}),m.executionSequences&&m.executionSequences.length>0&&o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[o.jsx(or,{className:"w-5 h-5 mr-2 text-green-600"}),"Execution Sequence Steps (",m.executionSequences.length,")"]}),o.jsx("div",{className:"space-y-3",children:m.executionSequences.map(b=>o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${b.status==="completed"?"bg-green-500 text-white":b.status==="in_progress"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:b.sequenceNumber}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:b.description}),o.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-green-700 dark:text-green-300",children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Executor:"})," ",b.executorRole]}),b.completedAt&&o.jsxs("span",{children:[o.jsx("strong",{children:"Completed:"})," ",new Date(b.completedAt).toLocaleDateString()]})]})]})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${b.status==="completed"?"bg-green-100 text-green-800":b.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:b.status})]})},b.id))})]})]})]});if(f==="detail"&&!m)return o.jsx("div",{className:"p-6 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading strategic directive..."})]})});const Te=e.filter(b=>{var $e,L,U,ee,Q;let B=!0;if(w!=="all"){const G=($e=b.status)==null?void 0:$e.toLowerCase();B=(w.includes(",")?w.split(","):[w]).some(fe=>fe==="active"?G==="active":fe==="draft"?G==="draft":fe==="on_hold"?G==="on_hold":fe==="cancelled"?G==="cancelled":fe==="archived"?G==="archived"||G==="completed"||G==="complete":!1)}let Y=!0;if(g){const G=g.toLowerCase();Y=((L=b.id)==null?void 0:L.toLowerCase().includes(G))||((U=b.title)==null?void 0:U.toLowerCase().includes(G))||((ee=b.description)==null?void 0:ee.toLowerCase().includes(G))}let ge=!0;N!=="all"&&(ge=(N.includes(",")?N.split(","):[N]).some(he=>{var fe;return((fe=b.priority)==null?void 0:fe.toLowerCase())===he.toLowerCase()}));let ce=!0;S!=="all"&&(ce=b.targetApplication===S);let ae=!0;return ie!=="all"&&(ae=((Q=b.category)==null?void 0:Q.toLowerCase())===ie.toLowerCase()),B&&Y&&ge&&ce&&ae}),I=((b,B)=>[...b].sort((Y,ge)=>{var ce,ae;if(Y.is_working_on&&Y.progress>=100)return 1;if(ge.is_working_on&&ge.progress>=100)return-1;for(const $e of B){let L=Y[$e.field],U=ge[$e.field];if($e.field==="priority"){const Q={critical:1,high:2,medium:3,low:4,minimal:5};L=Q[L==null?void 0:L.toLowerCase()]||999,U=Q[U==null?void 0:U.toLowerCase()]||999}else if($e.field==="status"){const Q={active:1,draft:2,in_progress:3,pending_approval:4,completed:5};L=Q[L==null?void 0:L.toLowerCase()]||999,U=Q[U==null?void 0:U.toLowerCase()]||999}else if($e.field==="wsjf_score"){if(L==null){const Q=(ce=Y.priority)==null?void 0:ce.toLowerCase();L=Q==="critical"?100:Q==="high"?75:Q==="medium"?50:25}if(U==null){const Q=(ae=ge.priority)==null?void 0:ae.toLowerCase();U=Q==="critical"?100:Q==="high"?75:Q==="medium"?50:25}}else if($e.field==="id"){const Q=L==null?void 0:L.match(/SD-(\d+)/),G=U==null?void 0:U.match(/SD-(\d+)/);L=Q?parseInt(Q[1],10):999999,U=G?parseInt(G[1],10):999999}L==null&&(L=$e.direction==="asc"?999999:-999999),U==null&&(U=$e.direction==="asc"?999999:-999999);let ee=0;if(L<U?ee=-1:L>U&&(ee=1),ee!==0)return $e.direction==="asc"?ee:-ee}return 0}))(Te,D),F=b=>{const B=b==null?void 0:b.toLowerCase();return B==="archived"||B==="completed"||B==="complete"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 transition-all duration-200 hover:scale-105",children:[o.jsx(Ci,{className:"w-3 h-3 mr-1"}),"Archived"]}):B==="draft"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 transition-all duration-200 hover:scale-105",children:[o.jsx(_0,{className:"w-3 h-3 mr-1"}),"Draft"]}):B==="on_hold"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400 transition-all duration-200 hover:scale-105",children:[o.jsx(vr,{className:"w-3 h-3 mr-1"}),"On Hold"]}):B==="cancelled"?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 transition-all duration-200 hover:scale-105",children:[o.jsx(Gr,{className:"w-3 h-3 mr-1"}),"Cancelled"]}):o.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 transition-all duration-200 hover:scale-105",children:[o.jsx(Jl,{className:"w-3 h-3 mr-1 animate-pulse"}),"Active"]})};return o.jsxs("div",{className:s?"p-3":"p-6",children:[o.jsxs("div",{className:s?"mb-3":"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{children:o.jsxs("h1",{className:`${s?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white flex items-center`,children:[o.jsx(Xl,{className:"w-6 h-6 mr-2 text-primary-500 animate-pulse"}),"Strategic Directives"]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_c,{onRefresh:a,isCompact:s}),o.jsxs("button",{onClick:()=>u("/directive-lab?mode=quick"),className:`flex items-center ${s?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[o.jsx(Zb,{className:`${s?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]})]})]}),o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Jb,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 ${s?"w-4 h-4":"w-5 h-5"}`}),o.jsx("input",{type:"text",placeholder:"Search by ID, title, or description...",value:g,onChange:b=>x(b.target.value),className:`w-full ${s?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200`}),g&&o.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(Gr,{className:`${s?"w-4 h-4":"w-5 h-5"}`})})]}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[o.jsxs("button",{onClick:()=>V(!O),className:`flex items-center gap-2 ${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 w-full justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[O?o.jsx(yn,{className:`${s?"w-4 h-4":"w-5 h-5"}`}):o.jsx(Nt,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),o.jsx(mh,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),o.jsx("span",{className:"font-medium",children:"Filters"})]}),o.jsx("div",{className:"flex items-center",children:o.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:[Te.length," of ",e.length,Te.filter(b=>b.rolled_triage).length>0&&o.jsxs("span",{className:"ml-1",children:["(",Te.filter(b=>b.rolled_triage==="High").length,"H /",Te.filter(b=>b.rolled_triage==="Medium").length,"M /",Te.filter(b=>b.rolled_triage==="Low").length,"L /",Te.filter(b=>b.rolled_triage==="Future").length,"F)"]})]})})]}),O&&o.jsxs("div",{className:"mt-4 bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg transition-all duration-300 animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"group",children:[o.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Status"}),o.jsxs("select",{value:w,onChange:b=>y(b.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[o.jsx("option",{value:"all",children:"All Statuses"}),o.jsx("option",{value:"active,draft",children:"Active & Draft (Default)"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"draft",children:"Draft Only"}),o.jsx("option",{value:"on_hold",children:"On Hold"}),o.jsx("option",{value:"cancelled",children:"Cancelled"}),o.jsx("option",{value:"archived",children:"Archived/Completed"})]})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Priority"}),o.jsxs("select",{value:N,onChange:b=>E(b.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"critical,high",children:"Critical & High (Default)"}),o.jsx("option",{value:"critical",children:"Critical"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"})]})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Application"}),o.jsxs("select",{value:S,onChange:b=>P(b.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[o.jsx("option",{value:"all",children:"All Applications"}),o.jsx("option",{value:"EHG",children:"EHG (Default)"}),o.jsx("option",{value:"EHG_ENGINEER",children:"EHG Engineer"})]})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:`block ${s?"text-xs":"text-sm"} font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-200 group-hover:text-primary-600 dark:group-hover:text-primary-400`,children:"Category"}),o.jsxs("select",{value:ie,onChange:b=>_(b.target.value),className:`w-full ${s?"px-3 py-2 text-xs":"px-4 py-3 text-sm"} bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 shadow-sm hover:shadow-md`,children:[o.jsx("option",{value:"all",children:"All Categories"}),[...new Set(e.map(b=>b.category).filter(Boolean))].map(b=>o.jsx("option",{value:b,children:b},b))]})]})]}),o.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-600",children:[o.jsx("div",{className:"flex items-center gap-2",children:J&&o.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 flex items-center gap-1`,children:[o.jsx(mh,{className:"w-4 h-4"}),"Filtering applied"]})}),o.jsxs("div",{className:"flex items-center gap-3",children:[J&&o.jsxs("button",{onClick:Jt,className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-2 font-medium border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500`,children:[o.jsx(Gr,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Clear All"]}),o.jsxs("button",{onClick:$t,className:`${s?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"} bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg transform hover:scale-105`,children:[o.jsx(ph,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Done"]})]})]})]})]}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3 mt-3",children:[o.jsxs("button",{onClick:()=>me(!X),className:`flex items-center gap-2 ${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 w-full justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[X?o.jsx(yn,{className:`${s?"w-4 h-4":"w-5 h-5"}`}):o.jsx(Nt,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),o.jsx(AC,{className:`${s?"w-4 h-4":"w-5 h-5"}`}),o.jsx("span",{className:"font-medium",children:"Sorting"})]}),o.jsx("div",{className:"flex items-center",children:o.jsx("span",{className:`${s?"text-xs":"text-sm"} text-blue-600 dark:text-blue-400 font-medium`,children:D.map(b=>b.label).join(" → ")})})]}),X&&o.jsxs("div",{className:"mt-4 bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg transition-all duration-300 animate-in slide-in-from-top-2",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{onChange:b=>{const B=q[b.target.value];B&&R(B)},className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg`,children:[o.jsx("option",{value:"",children:"Load Preset..."}),Object.keys(q).map(b=>o.jsx("option",{value:b,children:b},b))]}),o.jsxs("button",{onClick:()=>ne(!0),className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center gap-2`,children:[o.jsx(pl,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Save Current"]}),o.jsxs("button",{onClick:()=>R([{field:"sequence_rank",direction:"asc",label:"Sequence Rank"}]),className:`${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center gap-2`,children:[o.jsx(YC,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Reset"]})]})}),o.jsx("div",{className:"space-y-3",children:D.map((b,B)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-600",children:[o.jsx(VC,{className:`${s?"w-4 h-4":"w-5 h-5"} text-gray-400 cursor-move`}),o.jsxs("span",{className:`${s?"text-xs":"text-sm"} font-medium text-gray-500 dark:text-gray-400 w-20`,children:[B===0?"Primary":B===1?"Secondary":B===2?"Tertiary":`Level ${B+1}`,":"]}),o.jsxs("select",{value:b.field,onChange:Y=>{const ge=[...D],ce={wsjf_score:"WSJF Score",priority:"Priority",status:"Status",progress:"Progress",sequence_rank:"Sequence Rank",created_at:"Created Date",updated_at:"Last Updated",title:"Title",id:"ID",readiness:"Ready Score",must_have_count:"Story Count"};ge[B]={...b,field:Y.target.value,label:ce[Y.target.value]||Y.target.value},R(ge)},className:`flex-1 ${s?"px-3 py-2 text-xs":"px-4 py-2.5 text-sm"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg`,children:[o.jsx("option",{value:"wsjf_score",children:"WSJF Score"}),o.jsx("option",{value:"priority",children:"Priority"}),o.jsx("option",{value:"status",children:"Status"}),o.jsx("option",{value:"progress",children:"Progress"}),o.jsx("option",{value:"sequence_rank",children:"Sequence Rank"}),o.jsx("option",{value:"created_at",children:"Created Date"}),o.jsx("option",{value:"updated_at",children:"Last Updated"}),o.jsx("option",{value:"title",children:"Title"}),o.jsx("option",{value:"id",children:"ID"}),o.jsx("option",{value:"readiness",children:"Ready Score"}),o.jsx("option",{value:"must_have_count",children:"Story Count"})]}),o.jsxs("button",{onClick:()=>{const Y=[...D];Y[B]={...b,direction:b.direction==="asc"?"desc":"asc"},R(Y)},className:`${s?"px-3 py-2":"px-4 py-2.5"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2`,children:[b.direction==="asc"?o.jsx(IC,{className:`${s?"w-3 h-3":"w-4 h-4"}`}):o.jsx(TC,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),o.jsx("span",{className:`${s?"text-xs":"text-sm"}`,children:b.direction==="asc"?"Ascending":"Descending"})]}),D.length>1&&o.jsx("button",{onClick:()=>{R(D.filter((Y,ge)=>ge!==B))},className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:o.jsx(Yb,{className:`${s?"w-4 h-4":"w-5 h-5"}`})})]},B))}),D.length<5&&o.jsxs("button",{onClick:()=>{R([...D,{field:"priority",direction:"desc",label:"Priority"}])},className:`mt-3 ${s?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm"} bg-white dark:bg-gray-900 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-gray-400 dark:hover:border-gray-500 w-full flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400`,children:[o.jsx(Xb,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Add Sort Level"]}),j&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Save Sort Configuration"}),o.jsx("input",{type:"text",value:C,onChange:b=>z(b.target.value),placeholder:"Enter preset name...",className:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-lg mb-4",autoFocus:!0}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>{ne(!1),z("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"}),o.jsx("button",{onClick:()=>{C&&(A({...q,[C]:D}),ne(!1),z(""))},className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:"Save"})]})]})}),o.jsx("div",{className:"flex items-center justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("button",{onClick:()=>me(!1),className:`${s?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"} bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg transform hover:scale-105`,children:[o.jsx(ph,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),"Apply Sorting"]})})]})]})]})]}),Te.length===0?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[o.jsx(Et,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e.length===0?"No strategic directives found":`No ${w==="all"?"":w} directives found`})]}):o.jsx("div",{className:"space-y-4",children:I.map(b=>{var B,Y,ge;return o.jsx("div",{className:`group bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${Ye(b.priority)}`,children:o.jsxs("div",{className:`${s?"p-3":"p-6"} relative`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>Ot(b.id),className:"mr-2 p-1 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/20 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 transform hover:scale-105","aria-label":d===b.id?"Collapse":"Expand",children:o.jsx(Nt,{className:`w-4 h-4 transition-transform duration-200 ease-in-out ${d===b.id?"rotate-90":""}`})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex items-center",children:o.jsxs("span",{className:"inline-flex items-center group",children:[o.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-mono text-lg font-bold",children:b.id}),o.jsx("button",{onClick:ce=>{ce.stopPropagation(),ln(b.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-2",title:"Copy ID",children:T===b.id?o.jsx(gi,{className:"w-3 h-3 text-green-500"}):o.jsx(bp,{className:"w-3 h-3 text-gray-500"})})]})}),o.jsx("h2",{className:`${s?"text-base":"text-xl"} font-semibold text-gray-900 dark:text-white ${s?"line-clamp-2":""}`,children:b.title||"Untitled"})]})]}),o.jsxs("div",{className:`${s?"mt-2":"mt-4"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("span",{className:`${s?"text-xs":"text-sm"} text-gray-600 dark:text-gray-400 flex items-center`,children:["Progress",b.progressTrend&&(b.progressTrend>0?o.jsx(gr,{className:"w-3 h-3 ml-1 text-green-500"}):o.jsx(Or,{className:"w-3 h-3 ml-1 text-red-500"}))]}),o.jsxs("span",{className:`${s?"text-xs":"text-sm"} font-semibold flex items-center`,children:[b.progress,"%",b.progress===100&&o.jsx(Xl,{className:"w-3 h-3 ml-1 text-green-500 animate-pulse"})]})]}),o.jsx("div",{className:`w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${s?"h-2":"h-3"} shadow-inner`,children:o.jsx("div",{className:`${s?"h-2":"h-3"} rounded-full transition-all duration-1000 ease-out ${Yn(b.progress)}`,style:{width:`${b.progress}%`,boxShadow:b.progress===100?"0 0 10px rgba(34, 197, 94, 0.5)":"none"}})})]})]}),o.jsxs("div",{className:`${s?"ml-2":"ml-4"} flex flex-col items-end ${s?"space-y-1":"space-y-2"}`,children:[o.jsx("div",{className:`flex ${s?"space-x-1":"space-x-2"}`,children:r===b.id?o.jsxs("button",{disabled:!0,className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-green-500 text-white rounded flex items-center`,children:[o.jsx(or,{className:`${s?"w-3 h-3":"w-4 h-4"} mr-1`}),s?"✓ Working":"✓ Working On"]}):o.jsxs("button",{onClick:()=>n&&n(b.id),className:`${s?"px-2 py-1 text-xs":"px-4 py-2"} bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center`,children:[o.jsx(or,{className:`${s?"w-3 h-3":"w-4 h-4"} ${s?"":"mr-1"} animate-pulse`}),s?"Work On":"Work On This"]})}),o.jsxs("div",{className:`${s?"mt-2 gap-1":"mt-3 gap-2"} flex flex-wrap items-end justify-end`,children:[o.jsxs("div",{className:"relative inline-block",children:[o.jsxs("button",{onClick:ce=>{ce.stopPropagation(),wt(je===b.id?null:b.id)},className:"group flex items-center gap-1 hover:opacity-80 transition-opacity",children:[F(b.status),o.jsx(_0,{className:"w-3 h-3 text-gray-500 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),je===b.id&&o.jsx("div",{className:"absolute left-0 mt-1 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:o.jsx("div",{className:"py-1",children:["active","draft","on_hold","cancelled","archived"].map(ce=>o.jsxs("button",{onClick:ae=>{ae.stopPropagation(),l&&l(b.id,ce),wt(null)},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between ${b.status===ce?"bg-gray-50 dark:bg-gray-700/50 text-primary-600":"text-gray-700 dark:text-gray-200"}`,children:[o.jsx("span",{className:"capitalize",children:ce}),b.status===ce&&o.jsx(gi,{className:"w-3 h-3"})]},ce))})})]}),b.targetApplication&&o.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`,children:b.targetApplication.replace("_"," ")}),o.jsxs("button",{onClick:ce=>{ce.stopPropagation(),u(`/backlog?sd=${b.sd_id||b.id}`)},className:`flex items-center ${s?"px-2 py-0.5 text-xs":"px-2 py-1 text-xs"} transition-all duration-200 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded`,title:`${b.total_backlog_items||b.total_items||b.backlog_count||0} backlog items`,children:[o.jsx(Ci,{className:`${s?"w-3 h-3":"w-4 h-4"}`}),o.jsx("span",{className:"ml-1 text-xs",children:b.total_backlog_items||b.total_items||b.backlog_count||0})]}),(b.priority||b.rolled_triage)&&o.jsx("span",{className:`${s?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`,children:s?((Y=(B=b.priority)==null?void 0:B[0])==null?void 0:Y.toUpperCase())||((ge=b.rolled_triage)==null?void 0:ge[0]):`${b.priority||b.rolled_triage}`}),b.category&&o.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:b.category})]}),b.checklist&&b.checklist.length>0&&o.jsx("div",{className:"text-sm text-gray-600",children:o.jsxs("span",{className:"flex items-center",children:[o.jsx(gi,{className:"w-4 h-4 mr-1"}),b.checklist.filter(ce=>ce.checked).length,"/",b.checklist.length]})})]})]}),b.hasBacklogItems&&o.jsxs("div",{className:`${s?"mt-3":"mt-4"} pt-3 border-t border-gray-200 dark:border-gray-700`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("button",{onClick:()=>{cn(ce=>{const ae=new Set(ce);return ae.has(b.id)?ae.delete(b.id):ae.add(b.id),ae})},className:`${s?"text-xs":"text-sm"} font-medium text-gray-700 dark:text-gray-300 flex items-center hover:text-purple-600 dark:hover:text-purple-400 transition-colors`,children:[Ce.has(b.id)?o.jsx(Nt,{className:"w-4 h-4 mr-1"}):o.jsx(yn,{className:"w-4 h-4 mr-1"}),o.jsx(S0,{className:"w-4 h-4 mr-1"}),"Backlog Overview"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[re[b.id]&&!Ce.has(b.id)&&o.jsx("button",{onClick:()=>Qe(b.id,!0),disabled:_e.has(b.id),className:`p-1 text-gray-500 hover:text-purple-600 dark:text-gray-400 dark:hover:text-purple-400 transition-colors ${_e.has(b.id)?"opacity-50 cursor-not-allowed":""}`,title:"Refresh summary",children:o.jsx(qr,{className:`w-4 h-4 ${_e.has(b.id)?"animate-spin":""}`})}),o.jsx("span",{className:`${s?"text-xs":"text-sm"} bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-2 py-1 rounded-full`,children:b.backlogItemCount})]})]}),!Ce.has(b.id)&&o.jsx(o.Fragment,{children:re[b.id]?o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:`${s?"text-xs":"text-sm"} text-gray-700 dark:text-gray-300 leading-relaxed`,children:re[b.id].summary}),(re[b.id].generated_at||re[b.id].from_database)&&o.jsx("div",{className:"flex items-center justify-between mt-2",children:o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[re[b.id].from_database&&o.jsxs(o.Fragment,{children:[o.jsx(Nc,{className:"w-3 h-3 mr-1"}),"Stored in database"]}),re[b.id].generated_at&&o.jsxs("span",{className:"ml-2",children:["Generated: ",new Date(re[b.id].generated_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})}),o.jsxs("div",{className:`flex items-center space-x-2 ${s?"text-xs":"text-sm"}`,children:[o.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["🔥 ",b.h_count," High"]}),o.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:["📋 ",b.m_count," Medium"]}),o.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["📝 ",b.l_count," Low"]}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["🔮 ",b.future_count," Future"]})]}),re[b.id].generated_at&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:["Generated: ",new Date(re[b.id].generated_at).toLocaleString()]})]}):o.jsx("div",{className:"space-y-2",children:_e.has(b.id)?o.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 flex items-center`,children:[o.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-purple-500 mr-2"}),"Generating AI summary..."]}):o.jsxs("button",{onClick:()=>Qe(b.id),className:`inline-flex items-center ${s?"text-xs px-2 py-1":"text-sm px-3 py-1"} bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/30 dark:hover:bg-purple-800/30 text-purple-800 dark:text-purple-300 rounded transition-colors`,children:[o.jsx(S0,{className:"w-3 h-3 mr-1"}),"Generate AI Summary"]})})})]}),d===b.id&&o.jsxs("div",{className:"mt-6 border-t pt-6",children:[(b.h_count>0||b.m_count>0||b.l_count>0||b.future_count>0)&&o.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[o.jsx(Et,{className:"w-4 h-4 mr-2 text-blue-600"}),"Backlog Details"]}),o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["H: ",b.h_count||0," • M: ",b.m_count||0," • L: ",b.l_count||0,b.future_count>0&&` • Future: ${b.future_count}`,b.must_have_count>0&&` • Must-have: ${b.must_have_count}`]})]})}),b.checklist&&b.checklist.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[o.jsx(or,{className:"w-5 h-5 mr-2"}),"Requirements Checklist"]}),o.jsxs("div",{className:"space-y-2",children:[b.checklist.slice(0,5).map((ce,ae)=>o.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:ce.checked,onChange:()=>M(b.id,ae),className:"mr-3 w-4 h-4 text-primary-600 rounded"}),o.jsx("span",{className:`${ce.checked?"line-through text-gray-500":""}`,children:ce.text})]},ae)),b.checklist&&b.checklist.length>5&&o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",b.checklist.length-5," more items"]})]})]}),o.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Content Preview"}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded max-h-64 overflow-y-auto",children:o.jsx(Uh,{children:b.content.substring(0,500)+(b.content.length>500?"...":"")})}),o.jsx("span",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"Full content available in detail view"})]})]}),d===b.id&&o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex flex-wrap gap-2 justify-between items-center",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.storyCount>0?o.jsxs(cr,{to:`/stories/${b.sdKey}`,className:"inline-flex items-center px-3 py-1.5 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:["📚 View ",b.storyCount," Stories"]}):o.jsx("button",{onClick:()=>generateStoriesForSD(b.sdKey),className:"inline-flex items-center px-3 py-1.5 text-sm text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 border border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-all duration-200",children:"✨ Generate Stories"}),b.checklist&&b.checklist.length>0&&o.jsxs("button",{onClick:()=>se(b),className:"inline-flex items-center px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200",children:["✅ View All ",b.checklist.length," Tasks"]}),o.jsx("button",{onClick:()=>se(b),className:"inline-flex items-center px-3 py-1.5 text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 border border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all duration-200",children:"📄 Full Document"})]}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated ",new Date(b.updatedAt).toLocaleDateString()]})]})})]})},b.id)})})]})}function Vy({prds:e,isCompact:t,detailMode:n}){const{id:r}=Ff(),s=Oi(),[i,a]=k.useState("list"),[l,c]=k.useState(null);k.useEffect(()=>{if(n&&r){const d=e.find(h=>h.id===r);d?(c(d),a("detail"),document.title=`${d.title||d.id} - LEO Protocol Dashboard`):(console.warn(`PRD with id '${r}' not found, redirecting to list`),s("/prds",{replace:!0}))}else n||(a("list"),c(null),document.title="PRDs - LEO Protocol Dashboard")},[r,n,e,s]);const u=d=>{if(!d||!d.id){console.error("Invalid PRD for navigation:",d);return}try{s(`/prds/${d.id}`)}catch(h){console.error("Navigation error:",h)}};return i==="detail"&&l?o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>s("/prds"),className:"mb-4 text-primary-600 hover:text-primary-700 flex items-center",children:[o.jsx(Nt,{className:"w-4 h-4 mr-1 rotate-180"}),"Back to PRDs"]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.title}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:l.directiveTitle&&`Strategic Directive: ${l.directiveTitle}`})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.status})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Priority"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.priority})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),o.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:l.phase})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),o.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[l.progress,"%"]})]})]}),o.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-6",children:o.jsx(Uh,{children:l.content||"No content available"})}),l.checklist&&l.checklist.length>0&&o.jsxs("div",{className:"border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Implementation Checklist"}),o.jsx("div",{className:"space-y-2",children:l.checklist.map((d,h)=>o.jsxs("div",{className:"flex items-start p-3 rounded bg-gray-50 dark:bg-gray-700",children:[d.checked?o.jsx(gi,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}):o.jsx(Sp,{className:"w-5 h-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0"}),o.jsx("span",{className:`flex-1 ${d.checked?"line-through text-gray-500":""}`,children:d.text}),d.phase&&o.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded ml-2",children:d.phase})]},h))})]})]})]}):o.jsxs("div",{className:t?"p-3":"p-6",children:[o.jsx("div",{className:t?"mb-3":"mb-6",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:`${t?"text-2xl":"text-3xl"} font-bold text-gray-900 dark:text-white`,children:"PRDs"}),o.jsx("p",{className:`text-gray-600 dark:text-gray-400 ${t?"text-sm mt-1":"mt-2"}`,children:"Product Requirements Documents - Technical implementation details"})]})})}),e.length===0?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[o.jsx(Et,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No PRDs found"})]}):o.jsx("div",{className:"space-y-4",children:e.map(d=>o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Et,{className:"w-6 h-6 text-blue-600 mt-1"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.title}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.directiveTitle&&`SD: ${d.directiveTitle}`}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:d.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.priority==="high"?"bg-red-100 text-red-800":d.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:d.priority}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Phase: ",d.phase]}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Progress: ",d.progress,"%"]})]})]})]})}),o.jsx("div",{className:"ml-4 flex flex-col items-end space-y-2",children:o.jsx("button",{onClick:()=>u(d),className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors",children:"View Full"})})]})})},d.id))})]})}const Me=({children:e,variant:t="primary",size:n="medium",disabled:r=!1,loading:s=!1,onClick:i,type:a="button",fullWidth:l=!1,icon:c,iconPosition:u="left",ariaLabel:d,className:h="",...f})=>{const p=`
    inline-flex items-center justify-center
    font-medium transition-all duration-200
    rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    min-h-[44px] min-w-[44px]
  `,m={small:"px-3 py-1.5 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"},v={primary:`
      bg-blue-600 dark:bg-blue-600 text-white dark:text-white
      hover:bg-blue-700 dark:hover:bg-blue-700 active:bg-blue-800 dark:active:bg-blue-800
      focus:ring-blue-500 dark:focus:ring-blue-400
    `,secondary:`
      bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100
      hover:bg-gray-300 dark:hover:bg-gray-600 active:bg-gray-400 dark:active:bg-gray-500
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,ghost:`
      bg-transparent dark:bg-transparent text-gray-700 dark:text-gray-300
      hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,danger:`
      bg-red-600 dark:bg-red-600 text-white dark:text-white
      hover:bg-red-700 dark:hover:bg-red-700 active:bg-red-800 dark:active:bg-red-800
      focus:ring-red-500 dark:focus:ring-red-400
    `,success:`
      bg-green-600 dark:bg-green-600 text-white dark:text-white
      hover:bg-green-700 dark:hover:bg-green-700 active:bg-green-800 dark:active:bg-green-800
      focus:ring-green-500 dark:focus:ring-green-400
    `},w=l?"w-full":"",y=`
    ${p}
    ${m[n]}
    ${v[t]}
    ${w}
    ${h}
  `.trim().replace(/\s+/g," "),g=x=>{!r&&!s&&i&&i(x)};return o.jsxs("button",{type:a,className:y,disabled:r||s,onClick:g,"aria-label":d||(typeof e=="string"?e:void 0),"aria-busy":s,"aria-disabled":r||s,...f,children:[s&&o.jsx(WC,{className:"w-4 h-4 mr-2 animate-spin"}),!s&&c&&u==="left"&&o.jsx(c,{className:"w-4 h-4 mr-2"}),e,!s&&c&&u==="right"&&o.jsx(c,{className:"w-4 h-4 ml-2"})]})},Xo=({type:e="text",label:t,name:n,value:r,onChange:s,onBlur:i,placeholder:a,required:l=!1,disabled:c=!1,error:u,success:d,helpText:h,validationPattern:f,minLength:p,maxLength:m,rows:v=4,options:w=[],autoComplete:y,className:g="",fullWidth:x=!0,showCharCount:N=!1,...E})=>{const[S,P]=k.useState(!1),[T,$]=k.useState(!1),[O,V]=k.useState("");k.useEffect(()=>{T&&f&&(new RegExp(f).test(r)?V(""):V("Invalid format"))},[r,f,T]);const D=`
    w-full px-4 py-3 
    border rounded-lg transition-all duration-200
    text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400
    min-h-[48px]
    focus:outline-none focus:ring-2 focus:ring-offset-1
    disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-60
    bg-white dark:bg-gray-700
   ${u||O?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400 focus:border-red-500 dark:focus:border-red-400":d?"border-green-500 dark:border-green-400 focus:ring-green-500 dark:focus:ring-green-400 focus:border-green-500 dark:focus:border-green-400":S?"border-blue-500 dark:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400"} ${g}`,R=()=>{P(!0)},q=_=>{P(!1),$(!0),i&&i(_)},A=_=>{s&&s(_),T||$(!0)},C=`input-${n||Math.random().toString(36).substr(2,9)}`,z=`${C}-error`,j=`${C}-help`,ne=()=>{switch(e){case"textarea":return o.jsx("textarea",{id:C,name:n,value:r,onChange:A,onFocus:R,onBlur:q,placeholder:a,required:l,disabled:c,rows:v,minLength:p,maxLength:m,className:D,"aria-invalid":!!(u||O),"aria-describedby":`${u||O?z:""} ${h?j:""}`,...E});case"select":return o.jsxs("select",{id:C,name:n,value:r,onChange:A,onFocus:R,onBlur:q,required:l,disabled:c,className:D,"aria-invalid":!!(u||O),"aria-describedby":`${u||O?z:""} ${h?j:""}`,...E,children:[o.jsx("option",{value:"",children:"Select an option"}),w.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))]});default:return o.jsx("input",{id:C,type:e,name:n,value:r,onChange:A,onFocus:R,onBlur:q,placeholder:a,required:l,disabled:c,minLength:p,maxLength:m,autoComplete:y,className:D,"aria-invalid":!!(u||O),"aria-describedby":`${u||O?z:""} ${h?j:""}`,...E})}},ie=x?"w-full":"";return o.jsxs("div",{className:`${ie} mb-4`,children:[t&&o.jsxs("label",{htmlFor:C,className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",children:[t,l&&o.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[ne(),o.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:[d&&!u&&!O&&o.jsx(Vn,{className:"w-5 h-5 text-green-500","aria-label":"Valid input"}),(u||O)&&o.jsx(Gr,{className:"w-5 h-5 text-red-500","aria-label":"Invalid input"})]})]}),N&&m&&o.jsxs("div",{className:"mt-1 text-sm text-right text-gray-500 dark:text-gray-400",children:[(r==null?void 0:r.length)||0," / ",m]}),(u||O)&&o.jsxs("div",{id:z,className:"mt-2 flex items-start text-sm text-red-600 dark:text-red-400",role:"alert",children:[o.jsx(vr,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),u||O]}),h&&!(u||O)&&o.jsxs("div",{id:j,className:"mt-2 flex items-start text-sm text-gray-600 dark:text-gray-400",children:[o.jsx(Tn,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),h]})]})},FD=({steps:e=[],currentStep:t=1,orientation:n="horizontal",showTimeEstimates:r=!0,showStepNumbers:s=!0,compact:i=!1,hideLabelsOnMobile:a=!1,onStepClick:l,className:c=""})=>{const u=(t-1)/(e.length-1)*100,d=e.reduce((y,g)=>y+(g.timeEstimate||0),0),h=e.slice(0,t-1).reduce((y,g)=>y+(g.timeEstimate||0),0),f=y=>{if(y<60)return`${y} min`;const g=Math.floor(y/60),x=y%60;return x>0?`${g}h ${x}m`:`${g}h`},p=y=>y<t-1?"completed":y===t-1?"current":y===t?"upcoming":"locked",m=(y,g)=>{switch(y){case"completed":return o.jsx(Vn,{className:"w-4 h-4"});case"current":return s?g:null;case"upcoming":return s?g:null;case"locked":return o.jsx(Kb,{className:"w-3 h-3"});default:return g}},v=y=>{const g=p(y);l&&(g==="completed"||g==="current")&&l(y+1)},w=y=>{const g=p(y);return l&&(g==="completed"||g==="current")};return n==="vertical"?o.jsxs("div",{className:`${c}`,children:[r&&!i&&o.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),o.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`},role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"})}),o.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-600 dark:text-gray-400",children:[o.jsxs("span",{children:[f(h)," completed"]}),o.jsxs("span",{children:[f(d-h)," remaining"]})]})]}),o.jsx("div",{className:"relative",children:e.map((y,g)=>{const x=p(g),N=g===e.length-1;return o.jsxs("div",{className:"flex items-start mb-8 last:mb-0",children:[!N&&o.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),o.jsx("button",{onClick:()=>v(g),disabled:!w(g),className:`
                    relative z-10 flex items-center justify-center
                    w-12 h-12 rounded-full border-2 transition-all
                    ${w(g)?"cursor-pointer":"cursor-default"}
                    ${x==="completed"?"bg-green-500 border-green-500 text-white":""}
                    ${x==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                    ${x==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                    ${x==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                  `,"aria-label":`Step ${g+1}: ${y.title} - ${x}`,children:m(x,g+1)}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("h3",{className:`
                    font-medium text-base
                    ${x==="current"?"text-blue-600":""}
                    ${x==="completed"?"text-green-600":""}
                    ${x==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),y.description&&!i&&o.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:y.description}),r&&y.timeEstimate&&o.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[o.jsx(Rn,{className:"w-3 h-3 mr-1"}),f(y.timeEstimate)]})]})]},g)})})]}):o.jsxs("div",{className:`${c}`,children:[r&&!i&&o.jsx("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Rn,{className:"w-4 h-4 mr-2 text-blue-600"}),o.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Time: ",o.jsx("span",{className:"font-medium",children:f(h)})," of"," ",o.jsx("span",{className:"font-medium",children:f(d)})]})]}),o.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"% Complete"]})]})}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-300 dark:bg-gray-600"}),o.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-blue-600 dark:bg-blue-500 transition-all duration-300",style:{width:`${u}%`}}),o.jsx("div",{className:"relative flex justify-between",children:e.map((y,g)=>{const x=p(g);return o.jsxs("div",{className:`flex flex-col items-center ${i?"flex-1":""}`,children:[o.jsxs("div",{className:"relative group",children:[o.jsx("button",{onClick:()=>v(g),disabled:!w(g),className:`
                      relative z-10 flex items-center justify-center
                      w-12 h-12 rounded-full border-2 transition-all
                      ${w(g)?"cursor-pointer hover:scale-110":"cursor-default"}
                      ${x==="completed"?"bg-green-500 border-green-500 text-white":""}
                      ${x==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                      ${x==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                      ${x==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                    `,"aria-label":`Step ${g+1}: ${y.title} - ${x}`,title:y.title,children:m(x,g+1)}),a&&o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block md:hidden z-20",children:o.jsxs("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[y.title,o.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:o.jsx("div",{className:"border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})})]}),o.jsxs("div",{className:`mt-3 text-center ${a?"hidden md:block":""}`,children:[o.jsx("p",{className:`
                    text-sm font-medium
                    ${x==="current"?"text-blue-600":""}
                    ${x==="completed"?"text-green-600":""}
                    ${x==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),r&&y.timeEstimate&&!i&&o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:f(y.timeEstimate)})]})]},g)})})]})]})},UD=({onSubmissionSelect:e,onGroupCreate:t,selectedSubmissionId:n,onSelectionChange:r,refreshTrigger:s=0})=>{const[i,a]=k.useState([]),[l,c]=k.useState(!0),[u,d]=k.useState(null),[h,f]=k.useState([]),[p,m]=k.useState(!1),[v,w]=k.useState(null),[y,g]=k.useState(!1);k.useEffect(()=>{x()},[p,s]),k.useEffect(()=>{const D=()=>{w(null),g(!1)};if(v||y)return document.addEventListener("click",D),()=>document.removeEventListener("click",D)},[v,y]);const x=async()=>{try{c(!0);const D=new URLSearchParams;p&&D.append("uncombined","true"),D.append("since","30d");const R=await fetch(`/api/sdip/submissions?${D}`);if(!R.ok)throw new Error("Failed to load submissions");const q=await R.json();a(q),d(null)}catch(D){d(D.message),a([])}finally{c(!1)}},N=D=>{const R=h.includes(D)?h.filter(q=>q!==D):[...h,D];f(R),r==null||r(R)},E=D=>{e(D)},S=(D="intelligent")=>{h.length>=2&&t(h,D)},P=async D=>{if(confirm("Are you sure you want to delete this submission?"))try{if(!(await fetch(`/api/sdip/submissions/${D}`,{method:"DELETE"})).ok)throw new Error("Failed to delete submission");a(q=>q.filter(A=>A.id!==D)),f(q=>q.filter(A=>A!==D)),n===D&&e(null)}catch(R){console.error("Error deleting submission:",R),alert("Failed to delete submission. Please try again.")}},T=D=>{const R=new Date(D),A=Math.floor((new Date-R)/(1e3*60*60));return A<1?"Just now":A<24?`${A}h ago`:A<48?"Yesterday":R.toLocaleDateString()},$=D=>{const R=D.intent_summary||D.chairman_input||D.submission_title||"Untitled Submission";return R.length>60?R.substring(0,57)+"...":R},O=D=>{var q,A,C,z,j;let R="";return((A=(q=D.synthesis)==null?void 0:q.aligned)==null?void 0:A.length)>0?R=((C=D.synthesis.aligned[0])==null?void 0:C.text)||"":(z=D.impact_analysis)!=null&&z.summary?R=D.impact_analysis.summary:(j=D.strat_tac)!=null&&j.rationale&&(R=D.strat_tac.rationale),!R&&D.chairman_input&&(R=D.chairman_input.substring(0,100)+"..."),R.length>120?R.substring(0,117)+"...":R},V=D=>{var A;const R=((A=D.impact_analysis)==null?void 0:A.affected_components)||[];if(R.length===0)return null;const q=R.find(C=>C.impact_level==="high")||R[0];return(q==null?void 0:q.name)||(q==null?void 0:q.component)||null},X=D=>{var C,z;const R=D.status||"draft",q=D.current_step||1,A=Array.isArray(D.completed_steps)?D.completed_steps:[];return R==="submitted"||((C=D.gate_status)==null?void 0:C.status)==="submitted"||(z=D.gate_status)!=null&&z.resulting_sd_id||D.resulting_sd_id?{text:"🟢 Submitted",color:"text-green-700 bg-green-100 dark:bg-green-900/20 dark:text-green-300",icon:"✓"}:R==="ready"||A.includes(7)||A.length===7&&q===7?{text:"🔵 Ready",color:"text-blue-700 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300",icon:"→"}:{text:"🟡 Draft",color:"text-yellow-700 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300",icon:"✏"}},me=D=>i.filter(R=>R.group_id===D);return l?o.jsx("div",{className:"h-full flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 text-sm",children:"Recent Submissions"}),i.length>0&&o.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded",children:i.length})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Me,{onClick:()=>m(!p),variant:p?"primary":"ghost",size:"small",icon:mh,ariaLabel:"Show uncombined only"}),h.length>=2&&o.jsxs("div",{className:"relative",children:[o.jsxs(Me,{onClick:D=>{D.stopPropagation(),g(!y)},variant:"primary",size:"small",icon:Np,children:["Combine (",h.length,")"]}),y&&o.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-20 min-w-56",children:o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 px-2",children:"Combination Method:"}),[{id:"intelligent",name:"🧠 Intelligent",desc:"AI-driven optimal combination"},{id:"chronological",name:"📅 Chronological",desc:"Preserve timeline order"},{id:"merge",name:"🔄 Smart Merge",desc:"Deduplicate and consensus"},{id:"priority",name:"⭐ Priority-based",desc:"Highest strategic impact first"},{id:"latest",name:"🕒 Latest Override",desc:"Most recent takes precedence"}].map(D=>o.jsxs("button",{onClick:R=>{R.stopPropagation(),S(D.id),g(!1)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex flex-col gap-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:D.name}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:D.desc})]},D.id))]})})]})]})]}),u&&o.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-400 flex items-start gap-2",children:[o.jsx(vr,{className:"w-5 h-5 text-red-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load submissions"}),o.jsx("p",{className:"text-red-600 text-sm",children:u}),o.jsx("button",{onClick:x,className:"mt-1 text-red-700 underline text-sm hover:no-underline",children:"Try again"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:i.length===0?o.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(Rn,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"No submissions yet"}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Create your first submission to get started with the Directive Lab"}),o.jsx("button",{onClick:()=>e(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Submission"})]}):o.jsx("div",{className:"p-2",children:i.map(D=>{const R=X(D),q=$(D),A=O(D),C=V(D),z=h.includes(D.id),j=n===D.id,ne=D.group_id?me(D.group_id):[],ie=v===D.id;return o.jsx("div",{className:`p-3 mb-2 border rounded-lg transition-all cursor-pointer ${j?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700/50"}`,onClick:()=>E(D),children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{onClick:_=>{_.stopPropagation(),N(D.id)},className:"mt-1 text-gray-400 hover:text-gray-600 transition-colors",children:z?o.jsx(gi,{className:"w-4 h-4 text-blue-600"}):o.jsx(Sp,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm leading-tight",children:q}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap font-medium ${R.color}`,children:R.text})]}),A&&o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 leading-relaxed",children:A}),C&&o.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[o.jsx(Et,{className:"w-3 h-3 text-gray-400"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Affects: ",o.jsx("span",{className:"font-medium",children:C})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:T(D.created_at)}),D.group_id&&ne.length>1&&o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),w(ie?null:D.id)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[o.jsx(BC,{className:"w-3 h-3"}),o.jsxs("span",{className:"font-medium",children:[ne.length," items"]}),o.jsx(yn,{className:`w-3 h-3 transition-transform ${ie?"rotate-180":""}`})]}),ie&&o.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-48",children:o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 px-2",children:"Linked Submissions:"}),ne.map(_=>{const Se=X(_),pt=$(_);return o.jsxs("button",{onClick:je=>{je.stopPropagation(),E(_),w(null)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex items-center justify-between gap-2",children:[o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate",children:pt}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${Se.color}`,children:Se.icon}),o.jsx(fh,{className:"w-3 h-3 text-gray-400"})]})]},_.id)})]})})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),E(D)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[o.jsx(MC,{className:"w-3 h-3"}),"View"]}),o.jsx("button",{onClick:_=>{_.stopPropagation(),P(D.id)},className:"flex items-center gap-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete submission",children:o.jsx(Yb,{className:"w-3 h-3"})})]})]})]})]})},D.id)})})}),h.length>0&&o.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-700",children:o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:[h.length," selected"]}),h.length>=2&&o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Ready to combine →"})]})})]})},VD=({isOpen:e=!0,onClose:t,selectedSubmissions:n,combineMethod:r="intelligent",onCreateGroup:s,onSuccess:i})=>{const[a,l]=k.useState(""),[c,u]=k.useState(r),[d,h]=k.useState(!1),[f,p]=k.useState(null),m=async w=>{if(w.preventDefault(),!!a.trim()){h(!0),p(null);try{const y=await fetch("/api/sdip/create-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_ids:n,group_name:a.trim(),method:c})});if(!y.ok){const x=await y.json();throw new Error(x.error||"Failed to create group")}const g=await y.json();console.log("🔗 Group created successfully:",g),i?i(g):s&&await s(g),t(),l(""),u(r)}catch(y){p(y.message)}finally{h(!1)}}};if(!e)return null;const v=[{value:"intelligent",label:"🧠 Intelligent",desc:"AI-driven optimal combination"},{value:"chronological",label:"📅 Chronological",desc:"Keep time order"},{value:"merge",label:"🔄 Merge & Dedupe",desc:"Remove duplicates"},{value:"priority",label:"⭐ Priority-based",desc:"Highest strategic impact first"},{value:"latest",label:"🕒 Latest Priority",desc:"Latest overrides"}];return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Np,{className:"w-4 h-4 text-blue-600"}),o.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Combine ",n.length," Submissions"]})]}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:o.jsx(Gr,{className:"w-4 h-4"})})]}),o.jsxs("form",{onSubmit:m,className:"p-3 space-y-3",children:[f&&o.jsxs("div",{className:"flex items-start gap-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[o.jsx(vr,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-xs",children:f})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"group-name",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name"}),o.jsx("input",{type:"text",id:"group-name",value:a,onChange:w=>l(w.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dashboard UX Improvements",required:!0,maxLength:100})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Combine Method"}),o.jsx("div",{className:"grid grid-cols-1 gap-1",children:v.map(w=>o.jsx("label",{className:`flex items-center justify-between p-2 text-xs border rounded cursor-pointer transition-colors ${c===w.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-600"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",name:"combineMethod",value:w.value,checked:c===w.value,onChange:y=>u(y.target.value),className:"text-blue-600 focus:ring-blue-500"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w.label}),o.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["— ",w.desc]})]})]})},w.value))})]}),o.jsxs("div",{className:"flex gap-2 pt-1",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:!a.trim()||d,className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 border border-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Creating...":"Combine"})]})]})]})})},zD=({impactAnalysis:e,consistencyValidation:t,submission:n})=>{var d,h,f;const[r,s]=k.useState({overview:!0,components:!1,consistency:!1,recommendations:!1,mitigation:!1});if(!e&&!t)return o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-center",children:[o.jsx(Tn,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No impact analysis available for this submission"})]});const i=p=>{s(m=>({...m,[p]:!m[p]}))},a=p=>{switch(p){case"critical":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-100",accent:"text-red-600 dark:text-red-400",icon:Gt};case"high":return{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-100",accent:"text-orange-600 dark:text-orange-400",icon:vr};case"medium":return{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-900 dark:text-yellow-100",accent:"text-yellow-600 dark:text-yellow-400",icon:Tn};case"low":return{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-100",accent:"text-green-600 dark:text-green-400",icon:st};default:return{bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",text:"text-gray-900 dark:text-gray-100",accent:"text-gray-600 dark:text-gray-400",icon:Tn}}},l=a((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)),c=l.icon,u=p=>({ui:fl,api:UC,database:Nc,authentication:no,navigation:or,performance:gr,"design-system":fl})[p]||Tn;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:`rounded-lg border ${l.bg} ${l.border} p-6`,children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("overview"),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(c,{className:`w-6 h-6 ${l.accent}`}),o.jsxs("div",{children:[o.jsx("h3",{className:`text-lg font-semibold ${l.text}`,children:"Impact Analysis Overview"}),o.jsxs("p",{className:`text-sm ${l.text} opacity-75`,children:["Risk Level: ",((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)||"unknown").toUpperCase()]})]})]}),r.overview?o.jsx(yn,{className:`w-5 h-5 ${l.accent}`}):o.jsx(Nt,{className:`w-5 h-5 ${l.accent}`})]}),r.overview&&o.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:e.impact_score}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Impact Score"})]}),o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsxs("div",{className:`text-2xl font-bold ${l.accent}`,children:[e.effort_multiplier,"x"]}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Effort Multiplier"})]}),o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:((d=e.affected_components)==null?void 0:d.length)||0}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Affected Components"})]})]}),t&&o.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[o.jsx("div",{className:`text-2xl font-bold ${t.passed?"text-green-600":"text-red-600"}`,children:t.score}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Consistency Score"})]})]})]}),(e==null?void 0:e.affected_components)&&e.affected_components.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("components"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(fl,{className:"w-5 h-5 mr-2"}),"Affected Components"]}),r.components?o.jsx(yn,{className:"w-5 h-5 text-gray-400"}):o.jsx(Nt,{className:"w-5 h-5 text-gray-400"})]}),r.components&&o.jsx("div",{className:"mt-4 space-y-3",children:e.affected_components.map((p,m)=>{const v=u(p.name),w=a(p.risk_level);return o.jsxs("div",{className:`p-4 rounded-lg border ${w.bg} ${w.border}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(v,{className:`w-5 h-5 ${w.accent}`}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-medium ${w.text}`,children:p.name}),o.jsxs("p",{className:`text-sm ${w.text} opacity-75`,children:["Risk: ",p.risk_level," • Confidence: ",Math.round((p.confidence||0)*100),"%"]})]})]})}),p.dependencies&&p.dependencies.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:`text-xs ${w.text} opacity-60 mb-1`,children:"Dependencies:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:p.dependencies.map((y,g)=>o.jsx("span",{className:`px-2 py-1 rounded text-xs ${w.accent} bg-white dark:bg-gray-700`,children:y},g))})]})]},m)})})]}),t&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("consistency"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(no,{className:"w-5 h-5 mr-2"}),"Consistency Validation",!t.passed&&o.jsx(Qr,{className:"w-5 h-5 ml-2 text-red-500"})]}),r.consistency?o.jsx(yn,{className:"w-5 h-5 text-gray-400"}):o.jsx(Nt,{className:"w-5 h-5 text-gray-400"})]}),r.consistency&&o.jsxs("div",{className:"mt-4 space-y-4",children:[o.jsxs("div",{className:`p-4 rounded-lg ${t.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[o.jsxs("div",{className:"flex items-center",children:[t.passed?o.jsx(st,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}):o.jsx(Qr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),o.jsx("span",{className:`font-medium ${t.passed?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:t.passed?"Validation Passed":"Validation Failed"})]}),t.blocking_issues&&t.blocking_issues.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Blocking Issues:"}),t.blocking_issues.map((p,m)=>o.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200 mb-1",children:["• ",p.message,p.suggestion&&o.jsxs("div",{className:"text-xs text-red-600 dark:text-red-300 ml-4 mt-1",children:["Suggestion: ",p.suggestion]})]},m))]})]}),t.category_scores&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Category Breakdown"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.category_scores).map(([p,m])=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:p.replace("_"," ")}),o.jsx("span",{className:`text-sm font-bold ${m>=70?"text-green-600":m>=50?"text-yellow-600":"text-red-600"}`,children:m})]}),o.jsx("div",{className:"mt-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all ${m>=70?"bg-green-500":m>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${m}%`}})})]},p))})]})]})]}),((e==null?void 0:e.recommendations)||(t==null?void 0:t.recommendations))&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("recommendations"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(or,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),r.recommendations?o.jsx(yn,{className:"w-5 h-5 text-gray-400"}):o.jsx(Nt,{className:"w-5 h-5 text-gray-400"})]}),r.recommendations&&o.jsxs("div",{className:"mt-4 space-y-3",children:[(h=e==null?void 0:e.recommendations)==null?void 0:h.map((p,m)=>o.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Tn,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[p.type,": ",p.description]}),p.effort_reduction&&o.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Effort reduction: ",p.effort_reduction]})]})]})},`impact-${m}`)),(f=t==null?void 0:t.recommendations)==null?void 0:f.map((p,m)=>o.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(st,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:p.message}),p.priority&&o.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs mt-1 ${p.priority==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":p.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":p.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[p.priority," priority"]})]})]})},`consistency-${m}`))]})]}),(e==null?void 0:e.mitigation_strategies)&&e.mitigation_strategies.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("mitigation"),children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[o.jsx(Jl,{className:"w-5 h-5 mr-2"}),"Mitigation Strategies"]}),r.mitigation?o.jsx(yn,{className:"w-5 h-5 text-gray-400"}):o.jsx(Nt,{className:"w-5 h-5 text-gray-400"})]}),r.mitigation&&o.jsx("div",{className:"mt-4 space-y-2",children:e.mitigation_strategies.map((p,m)=>o.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsx(Jl,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:p})]},m))})]}),(e==null?void 0:e.breaking_changes)&&e.breaking_changes.length>0&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(Gt,{className:"w-6 h-6 text-red-600 dark:text-red-400 mr-2"}),o.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Breaking Changes Detected"})]}),o.jsx("div",{className:"space-y-2",children:e.breaking_changes.map((p,m)=>o.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[o.jsxs("strong",{children:[p.type,":"]})," ",p.description,p.keyword&&o.jsxs("span",{className:"ml-2 text-xs bg-red-200 dark:bg-red-800 px-2 py-1 rounded",children:['"',p.keyword,'"']})]},m))})]})]})},BD=({type:e,level:t,showTooltip:n=!0})=>{const[r,s]=k.useState(!1),a={UI:{label:"UI",description:"User Interface complexity",colors:{HIGH:"bg-blue-600 text-white",MEDIUM:"bg-blue-400 text-white",LOW:"bg-blue-200 text-blue-900"}},DB:{label:"DB",description:"Database impact and complexity",colors:{HIGH:"bg-purple-600 text-white",MEDIUM:"bg-purple-400 text-white",LOW:"bg-purple-200 text-purple-900"}},COMPLEX:{label:"COMPLEX",description:"Overall implementation complexity",colors:{HIGH:"bg-orange-600 text-white",MEDIUM:"bg-orange-400 text-white",LOW:"bg-orange-200 text-orange-900"}},ACCESS:{label:"ACCESS",description:"Access control and permissions",colors:{HIGH:"bg-green-600 text-white",MEDIUM:"bg-green-400 text-white",LOW:"bg-green-200 text-green-900"}},SECURITY:{label:"SECURITY",description:"Security implications",colors:{HIGH:"bg-red-600 text-white",MEDIUM:"bg-red-400 text-white",LOW:"bg-red-200 text-red-900"}},PROCESS:{label:"PROCESS",description:"Business process impact",colors:{HIGH:"bg-yellow-600 text-white",MEDIUM:"bg-yellow-400 text-gray-900",LOW:"bg-yellow-200 text-yellow-900"}}}[e];if(!a)return null;const l=a.colors[t]||a.colors.LOW;return o.jsxs("div",{className:"inline-flex items-center relative",children:[o.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${l} cursor-help transition-opacity hover:opacity-90`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[a.label,":",t,n&&o.jsx(Tn,{className:"w-3 h-3 ml-1 opacity-70"})]}),n&&r&&o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",children:o.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap",children:[o.jsx("div",{className:"font-semibold",children:a.description}),o.jsxs("div",{className:"text-gray-300 mt-1",children:[t==="HIGH"&&"Significant impact - careful review needed",t==="MEDIUM"&&"Moderate impact - standard review",t==="LOW"&&"Minimal impact - routine change"]}),o.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900"})]})})]})},Gu=({badges:e})=>{if(!e)return null;const t=["UI","DB","COMPLEX","ACCESS","SECURITY","PROCESS"];return o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.map(n=>{const r=e[n];return r?o.jsx(BD,{type:n,level:r},n):null})})},Ku=e=>{const t={},n=e.toLowerCase();return(n.includes("ui")||n.includes("interface")||n.includes("component"))&&(t.UI=n.includes("complex")||n.includes("major")?"HIGH":n.includes("update")||n.includes("modify")?"MEDIUM":"LOW"),(n.includes("database")||n.includes("schema")||n.includes("migration"))&&(t.DB=n.includes("migration")||n.includes("schema")?"HIGH":n.includes("query")||n.includes("index")?"MEDIUM":"LOW"),n.includes("architecture")||n.includes("refactor")||n.includes("system")?t.COMPLEX="HIGH":n.includes("feature")||n.includes("implement")?t.COMPLEX="MEDIUM":(n.includes("fix")||n.includes("update"))&&(t.COMPLEX="LOW"),(n.includes("permission")||n.includes("role")||n.includes("access"))&&(t.ACCESS=n.includes("admin")||n.includes("role")?"HIGH":"MEDIUM"),n.includes("security")||n.includes("auth")||n.includes("encrypt")?t.SECURITY=n.includes("auth")||n.includes("encrypt")?"HIGH":"MEDIUM":(n.includes("api")||n.includes("endpoint"))&&(t.SECURITY="LOW"),(n.includes("workflow")||n.includes("process")||n.includes("business"))&&(t.PROCESS=n.includes("workflow")?"HIGH":"MEDIUM"),Object.keys(t).length===0&&(t.COMPLEX="LOW"),t},HD=({message:e,type:t="info",duration:n=5e3,onClose:r,position:s="top-right"})=>{const[i,a]=k.useState(!1),[l,c]=k.useState(!1);k.useEffect(()=>{setTimeout(()=>a(!0),10);const m=setTimeout(()=>{u()},n);return()=>clearTimeout(m)},[n]);const u=()=>{c(!0),setTimeout(()=>{a(!1),r==null||r()},300)},d={success:{icon:st,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-800 dark:text-green-200",iconColor:"text-green-600 dark:text-green-400"},error:{icon:vr,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-800 dark:text-red-200",iconColor:"text-red-600 dark:text-red-400"},warning:{icon:Gt,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",textColor:"text-yellow-800 dark:text-yellow-200",iconColor:"text-yellow-600 dark:text-yellow-400"},info:{icon:Tn,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-800 dark:text-blue-200",iconColor:"text-blue-600 dark:text-blue-400"}},h=d[t]||d.info,f=h.icon,p={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"};return o.jsx("div",{className:`
        fixed z-50 
        ${p[s]}
        transition-all duration-300 ease-in-out
        ${i&&!l?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"}
      `,children:o.jsxs("div",{className:`
          flex items-center gap-3 p-4 rounded-lg shadow-lg
          ${h.bgColor} ${h.borderColor} ${h.textColor}
          border min-w-[300px] max-w-md
        `,children:[o.jsx(f,{className:`w-5 h-5 ${h.iconColor} flex-shrink-0`}),o.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),o.jsx("button",{onClick:u,className:`${h.iconColor} hover:opacity-70 transition-opacity`,"aria-label":"Close notification",children:o.jsx(Gr,{className:"w-4 h-4"})})]})})},WD=({children:e})=>{const[t,n]=k.useState([]),r=(i,a="info",l=5e3)=>{const c=Date.now(),u={id:c,message:i,type:a,duration:l};return n(d=>[...d,u]),c},s=i=>{n(a=>a.filter(l=>l.id!==i))};return k.useEffect(()=>(window.showToast=r,()=>{delete window.showToast}),[]),o.jsxs(o.Fragment,{children:[e,o.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:t.map((i,a)=>o.jsx("div",{className:"pointer-events-auto",style:{position:"fixed",top:`${20+a*80}px`,right:"20px",transition:"all 0.3s ease-in-out"},children:o.jsx(HD,{message:i.message,type:i.type,duration:i.duration,onClose:()=>s(i.id),position:"none"})},i.id))})]})},qD=()=>{const e=(t,n="info",r=5e3)=>{if(window.showToast)return window.showToast(t,n,r);console.warn("Toast provider not found. Make sure ToastProvider is mounted.")};return{success:(t,n)=>e(t,"success",n),error:(t,n)=>e(t,"error",n),warning:(t,n)=>e(t,"warning",n),info:(t,n)=>e(t,"info",n),show:e}},GD=()=>{var $e;const e=Jn(),n=new URLSearchParams(e.search).get("mode")==="quick"?"quick":"comprehensive",[r,s]=k.useState(n),[i,a]=k.useState(1),[l,c]=k.useState(null),[u,d]=k.useState(!1),[h,f]=k.useState(null),[p,m]=k.useState(null),[v,w]=k.useState([]),[y,g]=k.useState(!1),[x,N]=k.useState("intelligent"),[E,S]=k.useState(0),[P,T]=k.useState(!1),[$,O]=k.useState("input"),[V,X]=k.useState(!1),[me,D]=k.useState(!0),[R,q]=k.useState(null),[A,C]=k.useState(null),[z,j]=k.useState({}),[ne,ie]=k.useState(!1),[_,Se]=k.useState(!1),[pt,je]=k.useState([]),[wt,Ot]=k.useState(!1),[ln,Jt]=k.useState({}),$t=qD(),[J,Ye]=k.useState({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),[Yn,M]=k.useState({}),[se,re]=k.useState({}),[be,_e]=k.useState({1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1}),ct=()=>r==="quick"?[{id:1,title:"Input",icon:N0,description:"Enter your directive idea",timeEstimate:2},{id:3,title:"Classification",icon:or,description:"Strategic or Tactical",timeEstimate:1},{id:7,title:"Confirmation",icon:st,description:"Review and submit",timeEstimate:1}]:[{id:1,title:"Input & Screenshot",icon:_u,description:"Provide feedback and optional screenshot",timeEstimate:3},{id:2,title:"Intent Confirmation",icon:or,description:"Review and confirm the extracted intent",timeEstimate:2},{id:3,title:"Classification",icon:fl,description:"Review strategic vs tactical breakdown",timeEstimate:2},{id:4,title:"Impact Analysis",icon:Gt,description:"Review application impact and consistency validation",timeEstimate:4},{id:5,title:"Synthesis Review",icon:Et,description:"Review aligned, required, and recommended items",timeEstimate:5},{id:6,title:"Questions",icon:N0,description:"Answer questions to refine the directive",timeEstimate:3},{id:7,title:"Confirmation",icon:st,description:"Review and confirm the final summary",timeEstimate:2}],Ce=L=>{if(L<i&&l){const G=({1:[2,3,4,5,6,7],2:[3,4,5,6,7],3:[4,5,6,7],4:[5,6,7],5:[6,7],6:[7]}[L]||[]).filter(he=>{switch(he){case 2:return l.intent_summary;case 3:return l.strat_tac;case 4:return l.impact_analysis;case 5:return l.synthesis;case 6:return l.questions;case 7:return l.final_summary;default:return!1}});if(G.length>0){const he={2:"Intent Summary",3:"Classification",4:"Impact Analysis",5:"Synthesis",6:"Clarifying Questions",7:"Final Summary"},fe=G.map(oe=>he[oe]).join(", ");$t.warning(`Editing Step ${L} may invalidate: ${fe}`,8e3),je(oe=>[...oe,{editedStep:L,timestamp:new Date().toISOString(),affectedSteps:G}])}}},cn=L=>r==="quick"?L===1?3:L===3?7:L:L<7?L+1:L,Qe=L=>{Ce(L),a(L)},Te=ct();k.useEffect(()=>{const L=()=>{const U=window.innerWidth<768;T(U)};return L(),window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[l]),k.useEffect(()=>{const L=setTimeout(()=>{(J.chairmanInput||J.intentSummary)&&(localStorage.setItem("directiveLab_draft",JSON.stringify(J)),m("Draft saved"),setTimeout(()=>m(null),3e3))},2e3);return()=>clearTimeout(L)},[J]),k.useEffect(()=>{const L=localStorage.getItem("directiveLab_draft");L&&(Ye(JSON.parse(L)),m("Draft restored"),setTimeout(()=>m(null),3e3))},[]),k.useEffect(()=>{if(i===3&&(l!=null&&l.id)&&!(l!=null&&l.strat_tac)){console.log("🎯 [STEP 3] Generating classification data...");const L=J.intentSummary||(l==null?void 0:l.intent_summary)||"",U=["vision","strategy","long-term","transform","innovation","competitive advantage","market position","growth","expansion","culture"],ee=["fix","bug","update","modify","adjust","correct","improve","enhance","optimize","refactor"];let Q=0,G=0;const he=L.toLowerCase();U.forEach(it=>{he.includes(it)&&(Q+=10)}),ee.forEach(it=>{he.includes(it)&&(G+=10)}),Q===0&&G===0&&(Q=50,G=50);const fe=Q+G,oe=Math.round(Q/fe*100),ut=100-oe,Ze=oe>60?"This initiative focuses on strategic goals that will shape long-term direction and capabilities.":ut>60?"This initiative addresses immediate operational needs and improvements.":"This initiative balances both strategic vision and tactical execution needs.",Zn={strat_tac:{strategic_pct:oe,tactical_pct:ut,rationale:Ze,generated_at:new Date().toISOString()}};c(it=>({...it,...Zn})),console.log("✅ [STEP 3] Classification data generated locally")}},[i,l,J.intentSummary]),k.useEffect(()=>{var L;if(i===4&&(l!=null&&l.id)&&!(l!=null&&l.impact_analysis)){console.log("🎯 [STEP 4] Generating impact analysis data...");const U=J.intentSummary||(l==null?void 0:l.intent_summary)||"",ee=U.toLowerCase(),Q={dashboard:[{name:"Dashboard",risk_level:"medium",confidence:.8,dependencies:["MetricsCard","ChartComponent"]},{name:"DashboardCard",risk_level:"low",confidence:.7,dependencies:["UI Components"]},{name:"MetricsCard",risk_level:"low",confidence:.6,dependencies:["Data Fetcher"]}],form:[{name:"Form",risk_level:"medium",confidence:.9,dependencies:["Input","Button","Validation"]},{name:"Input",risk_level:"low",confidence:.8,dependencies:["Event Handlers"]},{name:"Button",risk_level:"low",confidence:.9,dependencies:["UI Components"]},{name:"Validation",risk_level:"medium",confidence:.7,dependencies:["Form State"]}],navigation:[{name:"Navigation",risk_level:"medium",confidence:.8,dependencies:["Router","Auth Context"]},{name:"Sidebar",risk_level:"low",confidence:.7,dependencies:["Navigation"]},{name:"Menu",risk_level:"low",confidence:.6,dependencies:["Navigation"]}],table:[{name:"Table",risk_level:"medium",confidence:.8,dependencies:["Data Fetcher","Pagination"]},{name:"DataGrid",risk_level:"high",confidence:.9,dependencies:["Table","Virtual Scroller"]}],modal:[{name:"Modal",risk_level:"medium",confidence:.8,dependencies:["Portal","Focus Trap"]},{name:"Dialog",risk_level:"medium",confidence:.7,dependencies:["Modal"]},{name:"Overlay",risk_level:"low",confidence:.6,dependencies:["Portal"]}],auth:[{name:"Auth",risk_level:"high",confidence:.9,dependencies:["UserContext","Token Manager"]},{name:"Login",risk_level:"high",confidence:.8,dependencies:["Auth","Form"]},{name:"UserContext",risk_level:"high",confidence:.9,dependencies:["State Management"]}],theme:[{name:"ThemeProvider",risk_level:"medium",confidence:.8,dependencies:["CSS Variables","Context API"]},{name:"Dark Mode",risk_level:"medium",confidence:.7,dependencies:["ThemeProvider"]}],api:[{name:"API Client",risk_level:"high",confidence:.9,dependencies:["HTTP Service","Error Handler"]},{name:"Data Fetcher",risk_level:"medium",confidence:.8,dependencies:["API Client"]},{name:"WebSocket",risk_level:"high",confidence:.7,dependencies:["Connection Manager"]}]},G=[];Object.entries(Q).forEach(([pe,un])=>{(ee.includes(pe)||ee.includes(pe.replace(/[aeiou]/gi,""))||un.some(os=>ee.includes(os.name.toLowerCase())))&&G.push(...un)}),G.length===0&&G.push({name:"UI Components",risk_level:"low",confidence:.5,dependencies:["React Components"]},{name:"State Management",risk_level:"medium",confidence:.6,dependencies:["React Hooks"]},{name:"Event Handlers",risk_level:"low",confidence:.7,dependencies:["DOM Events"]});const he=["database","auth","security","payment","migration","breaking","major"],fe=["api","integration","workflow","validation","performance"];let oe="Low",ut="This change appears to be primarily cosmetic or minor functionality enhancement.";he.some(pe=>ee.includes(pe))?(oe="High",ut="This change affects critical system components that could impact security, data integrity, or core functionality."):fe.some(pe=>ee.includes(pe))&&(oe="Medium",ut="This change affects system integrations or business logic that requires careful testing and validation.");const Ze=[{category:"Design System",status:"compliant",details:"Change adheres to existing design tokens and component patterns"},{category:"Accessibility",status:oe==="High"?"review_required":"compliant",details:oe==="High"?"WCAG compliance review needed for this change":"No accessibility concerns identified"},{category:"Performance",status:ee.includes("performance")?"improvement":"neutral",details:ee.includes("performance")?"Change should improve application performance":"No significant performance impact expected"},{category:"Security",status:he.some(pe=>ee.includes(pe))?"review_required":"compliant",details:he.some(pe=>ee.includes(pe))?"Security review required before implementation":"No security concerns identified"}],Zn={database:3,migration:4,api:2,auth:3,integration:2,ui:1,style:.5,text:.5};let it=1;Object.entries(Zn).forEach(([pe,un])=>{ee.includes(pe)&&(it+=un)});const er=it<=2?"1-2 days":it<=4?"3-5 days":it<=6?"1-2 weeks":"2-4 weeks",is=Math.min(100,Math.round(G.length*10+it*5+(oe==="High"?30:oe==="Medium"?15:5))),as=Math.round(it*10)/10,tr={affected_components:G.slice(0,8),risk_level:oe.toLowerCase(),risk_rationale:ut,impact_score:is,effort_multiplier:as,estimated_effort:Math.ceil(it),estimated_timeline:er,consistency_validation:Ze,recommendations:[{type:"Testing",description:`Ensure comprehensive testing for ${G.length} affected components`,effort_reduction:"15-20%"},{type:"Documentation",description:"Update component documentation and integration guides",effort_reduction:"10-15%"}],mitigation_strategies:["Implement feature flags to control rollout","Create comprehensive test suite before deployment","Monitor performance metrics during implementation","Prepare rollback strategy for critical issues"],generated_at:new Date().toISOString()};oe==="High"&&(tr.breaking_changes=[{type:"API Change",description:"Potential modifications to component interfaces",keyword:((L=ee.match(/(auth|api|database)/))==null?void 0:L[0])||"system"}]);const wr={};Ze.forEach(pe=>{const un=pe.status==="compliant"?85:pe.status==="improvement"?95:pe.status==="review_required"?25:pe.status==="warning"?60:75;wr[pe.category.toLowerCase().replace(" ","_")]=un});const br={passed:!Ze.some(pe=>pe.status==="review_required"),blocking_issues:Ze.filter(pe=>pe.status==="review_required").map(pe=>({message:`${pe.category}: ${pe.details}`,suggestion:pe.status==="review_required"?"Consider professional review before implementation":null})),warnings:Ze.filter(pe=>pe.status==="warning"),score:Math.round(Ze.filter(pe=>pe.status==="compliant"||pe.status==="improvement").length/Ze.length*100),category_scores:wr,recommendations:Ze.filter(pe=>pe.status==="improvement"||pe.status==="compliant").map(pe=>({message:pe.details,priority:pe.status==="improvement"?"medium":"low"}))};q(tr),C(br);const kr={skeptical_assessment:[`Directive "${U.slice(0,50)}..." may have hidden complexities not immediately apparent`,"Resource estimates are often underestimated by 40-60% in similar projects","User requirements frequently change after initial implementation begins","Integration points with existing systems pose higher risk than anticipated"],potential_blockers:["Insufficient technical specifications may delay development","Dependency on external APIs or services may introduce instability","Browser compatibility issues may emerge during testing","Performance impact on larger datasets may require architectural changes"],risk_factors:{technical_debt:oe==="High"?"Significant":"Moderate",change_resistance:"Medium",rollback_difficulty:er.includes("week")?"Low":"High",maintenance_overhead:`${oe} ongoing maintenance burden expected`},recommendations:["Consider phased implementation approach to mitigate risks","Establish clear rollback procedures before deployment","Plan for 25% buffer time beyond initial estimates","Document all assumptions and validate with stakeholders"]};Jt(kr),c(pe=>({...pe,impact_analysis:tr,consistency_validation:br,critical_analysis:kr})),console.log("✅ [STEP 4] Impact analysis data generated locally"),console.log("📊 [STEP 4] Risk Level:",oe),console.log("🔍 [STEP 4] Components affected:",G.length),console.log("⏱️ [STEP 4] Estimated timeline:",er)}},[i,l,J.intentSummary]),k.useEffect(()=>{var L,U;if(i===5&&(l!=null&&l.id)&&((L=l==null?void 0:l.gate_status)!=null&&L.synthesis_reviewed&&ie(!0),!(l!=null&&l.synthesis))){console.log("🎯 [STEP 5] Generating synthesis data...");const ee=(l==null?void 0:l.intent_summary)||J.intentSummary||"",Q=(l==null?void 0:l.strat_tac)||{},G=(l==null?void 0:l.impact_analysis)||{},he=[],fe=[],oe=[];(ee.toLowerCase().includes("dark mode")||ee.toLowerCase().includes("theme"))&&(he.push("UI theming system already supports dark/light mode switching"),he.push("CSS variables are in place for theme customization")),(ee.toLowerCase().includes("dashboard")||ee.toLowerCase().includes("ui"))&&(he.push("Component architecture supports modular UI updates"),he.push("Existing design system can be extended")),Q.strategic_pct>50&&(fe.push("Architecture review and approval from technical lead"),fe.push("Comprehensive testing strategy for new features"),fe.push("Documentation updates for significant changes")),((G==null?void 0:G.risk_level)==="High"||(G==null?void 0:G.risk_level)==="Critical")&&(fe.push("Risk mitigation plan implementation"),fe.push("Rollback strategy preparation")),ee.toLowerCase().includes("performance")&&fe.push("Performance benchmarking before and after implementation"),(ee.toLowerCase().includes("security")||ee.toLowerCase().includes("auth"))&&fe.push("Security audit and penetration testing"),Q.tactical_pct>60&&(oe.push("Incremental deployment with feature flags"),oe.push("A/B testing for user-facing changes")),((U=G==null?void 0:G.affected_components)==null?void 0:U.length)>5&&(oe.push("Phased implementation to minimize disruption"),oe.push("Component isolation testing")),oe.push("User acceptance testing with stakeholder group"),oe.push("Performance monitoring post-deployment"),he.length===0&&(he.push("Existing infrastructure supports proposed changes"),he.push("Current tooling and frameworks are compatible")),fe.length===0&&(fe.push("Standard code review process"),fe.push("Unit and integration test coverage")),oe.length===0&&(oe.push("Progressive rollout strategy"),oe.push("User feedback collection mechanism"));const ut={synthesis:{aligned:he,required:fe,recommended:oe,generated_at:new Date().toISOString()}};console.log("📊 [STEP 5] Synthesis generated:",ut),c(Ze=>({...Ze,...ut}))}},[i,l,J.intentSummary]),k.useEffect(()=>{var L;if(i===6&&(l!=null&&l.id)&&(l==null?void 0:l.questions)===void 0){console.log("🎯 [STEP 6] Generating clarifying questions...");const U=(l==null?void 0:l.intent_summary)||J.intentSummary||"",ee=(l==null?void 0:l.strat_tac)||{},Q=(l==null?void 0:l.synthesis)||{},G=[];(U.toLowerCase().includes("ui")||U.toLowerCase().includes("interface"))&&(G.push({text:"What specific UI components or pages should be affected by these changes?",context:"Help us scope the implementation correctly"}),G.push({text:"Do you have any specific design preferences or brand guidelines to follow?",context:"Ensures visual consistency with your requirements"})),ee.strategic_pct>60&&(G.push({text:"What is the expected timeline for this strategic initiative?",context:"Helps with resource allocation and planning"}),G.push({text:"Are there any dependencies or prerequisites we should be aware of?",context:"Identifies potential blockers early"})),(L=Q.required)!=null&&L.some(fe=>fe.includes("performance"))&&G.push({text:"What are your specific performance targets or requirements?",context:"Define measurable success criteria"}),(U.toLowerCase().includes("data")||U.toLowerCase().includes("database"))&&G.push({text:"What data retention and backup policies should be considered?",context:"Ensures compliance with data governance"}),G.length<2&&G.push({text:"Are there any specific edge cases or scenarios we should consider?",context:"Helps identify potential issues early"});const he={questions:G.length>0?G:[],questions_generated_at:new Date().toISOString()};console.log("❓ [STEP 6] Questions generated:",he),c(fe=>({...fe,...he}))}},[i,l,J.intentSummary]),k.useEffect(()=>{var L,U,ee;if(i===7&&(l!=null&&l.id)&&!(l!=null&&l.final_summary)){console.log("🎯 [STEP 7] Generating final summary...");const Q=(l==null?void 0:l.intent_summary)||J.intentSummary||"",G=(l==null?void 0:l.strat_tac)||{},he=(l==null?void 0:l.impact_analysis)||{},fe=(l==null?void 0:l.synthesis)||{};let oe=`This directive focuses on: ${Q}. `;G.strategic_pct>60?oe+=`This is primarily a strategic initiative (${G.strategic_pct}% strategic) that will shape long-term architecture. `:oe+=`This is primarily a tactical improvement (${G.tactical_pct}% tactical) focusing on immediate enhancements. `,((L=he.affected_components)==null?void 0:L.length)>0&&(oe+=`The implementation will affect ${he.affected_components.length} components with ${he.risk_level||"moderate"} risk level. `),((U=fe.required)==null?void 0:U.length)>0&&(oe+=`Key requirements include: ${fe.required[0]}. `),((ee=fe.recommended)==null?void 0:ee.length)>0&&(oe+=`Recommended approach: ${fe.recommended[0]}. `),he.effort_estimate&&(oe+=`Estimated effort: ${he.effort_estimate}. `),oe+="Upon approval, this directive will be converted into a formal PRD and assigned to the implementation team.";const ut={final_summary:oe,final_summary_generated_at:new Date().toISOString()};console.log("📋 [STEP 7] Final summary generated:",ut),c(Ze=>({...Ze,...ut}))}},[i,l,J.intentSummary]),k.useEffect(()=>{i===2&&J.intentSummary&&setTimeout(()=>{const L=document.querySelector('textarea[name="intentSummary"]');L&&(L.style.height="auto",L.style.height=Math.min(L.scrollHeight,300)+"px")},100)},[J.intentSummary,i]);const Qn=L=>L.trim()?L.length<20?(M(U=>({...U,chairmanInput:"Please provide more detailed feedback (min 20 characters)"})),re(U=>({...U,chairmanInput:!1})),!1):(M(U=>({...U,chairmanInput:null})),re(U=>({...U,chairmanInput:!0})),!0):(M(U=>({...U,chairmanInput:"Feedback is required"})),re(U=>({...U,chairmanInput:!1})),!1),I=L=>{if(!L)return!0;try{return new URL(L),M(U=>({...U,screenshotUrl:null})),re(U=>({...U,screenshotUrl:!0})),!0}catch{return M(U=>({...U,screenshotUrl:"Please enter a valid URL"})),re(U=>({...U,screenshotUrl:!1})),!1}},F=async()=>{var L,U;if(console.log("🚀 [STEP 1] Starting feedback submission"),console.log("📄 [STEP 1] Form data:",{feedback:((L=J.chairmanInput)==null?void 0:L.substring(0,50))+"...",screenshotUrl:J.screenshotUrl}),!!Qn(J.chairmanInput)){d(!0),f(null);try{const ee=await fetch("/api/sdip/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:J.chairmanInput,screenshot_url:J.screenshotUrl})});if(!ee.ok)throw new Error("Failed to submit feedback");const Q=await ee.json();console.log("🎉 [STEP 1] Submission created successfully"),console.log("🆔 [STEP 1] Submission ID:",((U=Q.submission)==null?void 0:U.id)||Q.id),console.log("📄 [STEP 1] Full submission data:",Q);const G=Q.submission||Q;c(G),_e({...be,1:!0}),a(2),m("Feedback submitted successfully!"),localStorage.removeItem("directiveLab_draft"),G.id?(console.log("🎯 [STEP 2] Triggering intent generation for submission:",G.id),await b(G.id,2,{feedback:J.chairmanInput,chairman_input:J.chairmanInput})):console.error("⚠️ [STEP 1] No submission ID received!")}catch(ee){f(ee.message)}finally{d(!1)}}},b=async(L,U,ee)=>{console.log(`🔄 [STEP ${U}] Updating submission: ${L}`),console.log(`📦 [STEP ${U}] Step data:`,ee);try{const Q=await fetch(`/api/sdip/submissions/${L}/step/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)});if(!Q.ok)throw new Error(`Failed to update step ${U}`);const G=await Q.json();console.log(`✅ [STEP ${U}] Update successful`),console.log(`📄 [STEP ${U}] Response data:`,G);const he=G.submission||G;return c(he),U===2&&he.intent_summary&&(console.log("💡 [STEP 2] Intent summary received:",he.intent_summary.substring(0,50)+"..."),Ye({...J,intentSummary:he.intent_summary})),he}catch(Q){throw console.error(`❌ [STEP ${U}] Update failed:`,Q),console.error(`❌ [STEP ${U}] Error details:`,Q.message),f(Q.message),Q}},B=async L=>{var U,ee,Q,G,he;console.log(`🎯 [STEP ${L}] Completing step`),console.log(`📄 [STEP ${L}] Current submission:`,l),d(!0),f(null);try{if(l&&l.id&&L>1){console.log(`📦 [STEP ${L}] Preparing step data for submission: ${l.id}`);let oe={};switch(L){case 2:oe={intent_summary:J.intentSummary};break;case 3:oe={strategic_pct:((U=l.strat_tac)==null?void 0:U.strategic_pct)||50,tactical_pct:((ee=l.strat_tac)==null?void 0:ee.tactical_pct)||50,override:J.stratTacOverride};break;case 4:oe={impact_analysis:R,consistency_validation:A};break;case 5:oe={aligned:((Q=l.synthesis)==null?void 0:Q.aligned)||[],required:((G=l.synthesis)==null?void 0:G.required)||[],recommended:((he=l.synthesis)==null?void 0:he.recommended)||[],synthesis_reviewed:ne};break;case 6:oe={questions_answers:J.questionAnswers};break;case 7:oe={final_summary:l.final_summary||J.intentSummary};break}console.log(`📦 [STEP ${L}] Step data prepared:`,oe),await b(l.id,L,oe)}else console.log(`⚠️ [STEP ${L}] No submission ID, skipping update`);_e({...be,[L]:!0});const fe=cn(L);fe!==L?(a(fe),m(`Step ${L} completed!`)):(m("Directive submitted successfully!"),setTimeout(()=>{Ye({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},summaryConfirmed:!1}),a(1),_e({}),c(null),q(null),C(null)},2e3))}catch(fe){f(fe.message)}finally{d(!1)}},Y=async()=>{console.log("💾 [STEP 7] Saving submission and closing"),d(!0),f(null);try{if(l&&l.id){const L={final_summary:l.final_summary||J.intentSummary,status:"ready",completed_steps:[1,2,3,4,5,6,7]};await b(l.id,7,L),_e({...be,7:!0}),m("Submission saved successfully! You can find it in Recent Submissions."),setTimeout(()=>{Ye({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),a(1),_e({}),c(null),q(null),C(null),O("submissions")},2e3)}else throw new Error("No submission to save")}catch(L){f(L.message)}finally{d(!1)}},ge=async()=>{console.log("🚀 [STEP 7] Submitting directive to create Strategic Directive"),d(!0),f(null);try{if(l&&l.id){const ee={final_summary:l.final_summary||J.intentSummary,status:"submitted",completed_steps:[1,2,3,4,5,6,7]};await b(l.id,7,ee)}const L=await fetch("/api/sdip/create-strategic-directive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_id:l.id})});if(!L.ok){const ee=await L.json();throw new Error(ee.error||"Failed to create Strategic Directive")}const U=await L.json();_e({...be,7:!0}),m(`Strategic Directive created successfully! ID: ${U.sd_id}`),setTimeout(()=>{Ye({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),a(1),_e({}),c(null),q(null),C(null),O("submissions")},3e3)}catch(L){f(L.message)}finally{d(!1)}},ce=L=>{var U,ee,Q,G,he,fe,oe,ut,Ze,Zn,it,er,is,as,tr,wr,br,kr,pe,un,os,Hi;switch(L){case 1:return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Xo,{type:"textarea",label:"Chairman Feedback",name:"chairmanInput",value:J.chairmanInput,onChange:le=>{Ye({...J,chairmanInput:le.target.value}),Qn(le.target.value)},placeholder:"Enter your feedback about the EHG application...",required:!0,rows:5,minLength:20,maxLength:1e3,showCharCount:!0,error:Yn.chairmanInput,success:se.chairmanInput,helpText:"Provide detailed feedback about what you'd like to improve or add"}),o.jsx(Xo,{type:"url",label:"Screenshot URL",name:"screenshotUrl",value:J.screenshotUrl,onChange:le=>{Ye({...J,screenshotUrl:le.target.value}),I(le.target.value)},placeholder:"https://example.com/screenshot.png",error:Yn.screenshotUrl,success:se.screenshotUrl,helpText:"Optional: Add a screenshot URL to provide visual context",icon:_u}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Me,{onClick:F,disabled:u||!J.chairmanInput.trim(),loading:u,variant:"primary",icon:fh,iconPosition:"right",children:"Submit & Analyze"}),o.jsx(Me,{onClick:()=>{localStorage.setItem("directiveLab_draft",JSON.stringify(J)),m("Draft saved")},variant:"secondary",icon:pl,children:"Save Draft"})]})]});case 2:return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Xo,{type:"textarea",label:"Extracted Intent Summary",name:"intentSummary",value:J.intentSummary,onChange:le=>{Ye({...J,intentSummary:le.target.value}),le.target&&(le.target.style.height="auto",le.target.style.height=Math.min(le.target.scrollHeight,300)+"px")},rows:3,style:{minHeight:"80px",maxHeight:"300px",resize:"vertical",overflow:"auto"},onFocus:le=>{le.target.style.height="auto",le.target.style.height=Math.min(le.target.scrollHeight,300)+"px"},helpText:"Review and edit if needed to accurately capture your intent",success:J.intentSummary.length>0}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Me,{onClick:()=>Qe(1),variant:"ghost",icon:cs,children:"Back"}),o.jsx(Me,{onClick:()=>B(2),disabled:u||!J.intentSummary,loading:u,variant:"success",icon:Vn,children:"Confirm Intent"})]})]});case 3:return o.jsxs("div",{className:"space-y-3",children:[l!=null&&l.strat_tac?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex justify-around mb-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[((U=J.stratTacOverride)==null?void 0:U.strategic_pct)??l.strat_tac.strategic_pct,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Strategic"})]}),o.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600"}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[((ee=J.stratTacOverride)==null?void 0:ee.tactical_pct)??l.strat_tac.tactical_pct,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Tactical"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg",children:[o.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Classification Rationale:"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:((Q=J.stratTacOverride)==null?void 0:Q.rationale)||l.strat_tac.rationale})]})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(XC,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mr-2"}),o.jsx("span",{className:"font-medium text-yellow-900 dark:text-yellow-100 text-sm",children:"Adjust Classification (Optional)"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-2",children:[o.jsx("span",{children:"More Tactical"}),o.jsx("span",{children:"More Strategic"})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:((G=J.stratTacOverride)==null?void 0:G.strategic_pct)??l.strat_tac.strategic_pct,onChange:le=>{const Ke=parseInt(le.target.value),Yt=100-Ke;let bt="";Ke>70?bt="Manually classified as highly strategic - focusing on long-term architecture and business objectives.":Ke>50?bt="Manually classified as moderately strategic - balancing long-term goals with immediate improvements.":Ke>30?bt="Manually classified as balanced - containing both strategic elements and tactical improvements.":bt="Manually classified as primarily tactical - focusing on immediate fixes and improvements.",Ye({...J,stratTacOverride:{strategic_pct:Ke,tactical_pct:Yt,rationale:bt,manually_adjusted:!0,adjusted_at:new Date().toISOString()}})},className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 \r
                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 \r
                        [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer\r
                        [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 \r
                        [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none`}),o.jsxs("div",{className:"flex justify-between mt-1",children:[o.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[((he=J.stratTacOverride)==null?void 0:he.tactical_pct)??l.strat_tac.tactical_pct,"% Tactical"]}),o.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:[((fe=J.stratTacOverride)==null?void 0:fe.strategic_pct)??l.strat_tac.strategic_pct,"% Strategic"]})]})]}),J.stratTacOverride&&o.jsx(Me,{onClick:()=>{Ye({...J,stratTacOverride:null})},variant:"ghost",size:"small",icon:qr,children:"Reset to Auto-Classification"})]})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyzing strategic vs tactical breakdown..."})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Me,{onClick:()=>Qe(2),variant:"ghost",icon:cs,children:"Back"}),o.jsx(Me,{onClick:()=>B(3),disabled:u,loading:u,variant:"success",icon:Vn,children:J.stratTacOverride?"Accept Adjusted Classification":"Accept Classification"})]})]});case 4:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Application Impact Analysis"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the comprehensive analysis of how your proposed changes will affect the application, including component dependencies, risk assessment, and consistency validation."})]}),o.jsx(zD,{impactAnalysis:R,consistencyValidation:A,submission:l}),A&&!A.passed&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Qr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),o.jsx("span",{className:"font-medium text-red-900 dark:text-red-100",children:"Consistency Issues Found"})]}),o.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 mb-3",children:[((oe=A.blocking_issues)==null?void 0:oe.length)||0," blocking issues must be resolved before proceeding."]}),o.jsx("div",{className:"text-xs text-red-700 dark:text-red-300",children:"Review the Impact Analysis above for detailed recommendations and mitigation strategies."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Me,{onClick:()=>Qe(3),variant:"ghost",icon:cs,children:"Back"}),o.jsx(Me,{onClick:()=>B(4),disabled:u||A&&!A.passed,loading:u,variant:(A==null?void 0:A.passed)===!1?"secondary":"success",icon:(A==null?void 0:A.passed)===!1?Gt:Vn,children:(A==null?void 0:A.passed)===!1?"Acknowledge Risks & Continue":"Accept Impact Analysis"})]})]});case 5:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Synthesis Review"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the synthesized requirements and recommendations for your directive."})]}),l!=null&&l.synthesis?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(st,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),o.jsxs("span",{className:"font-medium text-green-900 dark:text-green-100",children:["Aligned Requirements (",((ut=l.synthesis.aligned)==null?void 0:ut.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(Ze=l.synthesis.aligned)==null?void 0:Ze.map((le,Ke)=>{const Yt=typeof le=="object"?le.badges:Ku(le),bt=typeof le=="object"?le.text:le;return o.jsx("li",{className:"text-sm text-green-800 dark:text-green-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-600 dark:text-green-400 mr-2",children:"•"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:bt}),o.jsx(Gu,{badges:Yt})]})]})},Ke)})})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Gt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),o.jsxs("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:["Required Changes (",((Zn=l.synthesis.required)==null?void 0:Zn.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(it=l.synthesis.required)==null?void 0:it.map((le,Ke)=>{const Yt=typeof le=="object"?le.badges:Ku(le),bt=typeof le=="object"?le.text:le;return o.jsx("li",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mr-2",children:"•"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:bt}),o.jsx(Gu,{badges:Yt})]})]})},Ke)})})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Tn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),o.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:["Recommended Enhancements (",((er=l.synthesis.recommended)==null?void 0:er.length)||0,")"]})]}),o.jsx("ul",{className:"space-y-2",children:(is=l.synthesis.recommended)==null?void 0:is.map((le,Ke)=>{const Yt=typeof le=="object"?le.badges:Ku(le),bt=typeof le=="object"?le.text:le;return o.jsx("li",{className:"text-sm text-blue-800 dark:text-blue-200",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:"•"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{children:bt}),o.jsx(Gu,{badges:Yt})]})]})},Ke)})})]})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Synthesizing requirements and recommendations..."})]})}),(l==null?void 0:l.synthesis)&&o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:o.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:ne,onChange:le=>ie(le.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"I have reviewed the synthesis analysis"}),o.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["I understand the aligned requirements (",((as=l.synthesis.aligned)==null?void 0:as.length)||0,"), required changes (",((tr=l.synthesis.required)==null?void 0:tr.length)||0,"), and recommended enhancements (",((wr=l.synthesis.recommended)==null?void 0:wr.length)||0,") for this directive."]})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Me,{onClick:()=>Qe(4),variant:"ghost",icon:cs,children:"Back"}),o.jsx(Me,{onClick:()=>B(5),disabled:u||!(l!=null&&l.synthesis)||!ne,loading:u,variant:"success",icon:Vn,children:"Accept Synthesis"})]})]});case 6:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Clarifying Questions"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Answer any clarifying questions about your directive to ensure accurate implementation."})]}),l!=null&&l.questions&&l.questions.length>0?o.jsx("div",{className:"space-y-3",children:l.questions.map((le,Ke)=>{var Yt;return o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start mb-2",children:[o.jsx(Eu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2 mt-0.5"}),o.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:le.text})]}),o.jsx(Xo,{type:"textarea",name:`question_${Ke}`,value:((Yt=J.questionAnswers)==null?void 0:Yt[`question_${Ke}`])||"",onChange:bt=>{Ye({...J,questionAnswers:{...J.questionAnswers,[`question_${Ke}`]:bt.target.value}})},placeholder:"Your answer...",rows:2,helpText:le.context})]},Ke)})}):(l==null?void 0:l.questions)===void 0?o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generating clarifying questions..."})]})}):o.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(st,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),o.jsx("p",{className:"text-green-800 dark:text-green-200",children:"No clarifying questions needed - your directive is clear!"})]})}),(l==null?void 0:l.questions)!==void 0&&o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:o.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:J.questionsReviewed||!1,onChange:le=>Ye({...J,questionsReviewed:le.target.checked}),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:((br=l==null?void 0:l.questions)==null?void 0:br.length)>0?"I have provided complete answers to all questions":"I confirm no additional questions are needed"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:((kr=l==null?void 0:l.questions)==null?void 0:kr.length)>0?`All ${l.questions.length} clarifying questions have been answered to provide context for implementation.`:"The directive is sufficiently clear and no additional clarification is required."})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Me,{onClick:()=>Qe(5),variant:"ghost",icon:cs,children:"Back"}),o.jsx(Me,{onClick:()=>B(6),disabled:u||!J.questionsReviewed,loading:u,variant:"success",icon:Vn,children:((pe=l==null?void 0:l.questions)==null?void 0:pe.length)>0?"Submit Answers":"Continue"})]})]});case 7:return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Final Confirmation"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the final summary and choose your next action."})]}),l!=null&&l.final_summary?o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Directive Summary"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:l.final_summary})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[((un=l.strat_tac)==null?void 0:un.strategic_pct)||0,"%"]}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Strategic"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((os=l.impact_analysis)==null?void 0:os.risk_level)||"Low"}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Risk Level"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:((Hi=l.impact_analysis)==null?void 0:Hi.effort_estimate)||"Medium"}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Effort"})]})]}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsx(Me,{onClick:()=>{navigator.clipboard.writeText(l.final_summary),$t.success("Summary copied to clipboard")},variant:"ghost",size:"small",icon:bp,children:"Copy Summary"}),o.jsx(Me,{onClick:async()=>{d(!0);try{const le=await fetch(`/api/directive-submissions/${l.id}/regenerate-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(le.ok){const Ke=await le.json();c({...l,final_summary:Ke.final_summary}),$t.success("Summary regenerated successfully")}}catch{$t.error("Failed to regenerate summary")}finally{d(!1)}},variant:"ghost",size:"small",icon:qr,disabled:u,children:"Regenerate"})]}),o.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:o.jsxs("label",{className:"flex items-start cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:J.finalConfirmed||!1,onChange:le=>Ye({...J,finalConfirmed:le.target.checked}),className:"mt-0.5 mr-2"}),o.jsx("span",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:"I confirm that this directive accurately represents my requirements."})]})})]}):o.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preparing final summary..."})]})}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Choose Your Next Action"}),o.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(pl,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Save & Close:"})," Save for later review or combine with other submissions"]})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(E0,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Submit Directive:"})," Create Strategic Directive and begin LEO Protocol workflow"]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(Me,{onClick:()=>Qe(6),variant:"ghost",icon:cs,className:"order-3 sm:order-1",children:"Back"}),o.jsxs("div",{className:"flex gap-3 order-1 sm:order-2 flex-1",children:[o.jsx(Me,{onClick:Y,disabled:u||!J.finalConfirmed,loading:u,variant:"secondary",icon:pl,className:"flex-1",children:"Save & Close"}),o.jsx(Me,{onClick:ge,disabled:u||!J.finalConfirmed,loading:u,variant:"primary",icon:E0,className:"flex-1",children:"Submit Directive"})]})]})]});default:return o.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Step content for Step ",L," coming soon..."]})}},ae=()=>o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 py-1.5 px-4",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(Me,{onClick:()=>Qe(Math.max(1,i-1)),disabled:i===1,variant:"ghost",size:"small",icon:cs,children:"Previous"}),o.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Step ",i," of ",Te.length]}),o.jsx(Me,{onClick:()=>B(i),disabled:!be[i-1]&&i>1,variant:"primary",size:"small",icon:fh,iconPosition:"right",children:"Next"})]})});return o.jsx(WD,{children:o.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(ek,{}),o.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Directive Lab"}),o.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>s("quick"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${r==="quick"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Quick Mode"}),o.jsx("button",{onClick:()=>s("comprehensive"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${r==="comprehensive"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Comprehensive"})]})]}),o.jsx(Me,{onClick:()=>X(!V),variant:"ghost",size:"small",icon:Eu,ariaLabel:"Toggle help",children:"Help"})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Step:"}),o.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:(($e=Te[i-1])==null?void 0:$e.title)||"Unknown"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",i," of ",Te.length,")"]})]})]})}),V&&o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800 px-4 py-2",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Eu,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2"}),o.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[o.jsx("p",{className:"font-medium mb-0.5",children:"Getting Started:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-blue-800 dark:text-blue-200",children:[o.jsx("li",{children:"Provide detailed feedback about what you want to improve"}),o.jsx("li",{children:"Each step builds on the previous one"}),o.jsx("li",{children:"Your progress is automatically saved"}),o.jsx("li",{children:"You can navigate back to previous steps at any time"})]})]})]})})}),p&&o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-green-800 dark:text-green-200 text-sm",children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),p]})}),h&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 px-4 py-1.5",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-red-800 dark:text-red-200 text-sm",children:[o.jsx(vr,{className:"w-4 h-4 mr-2"}),h]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx(FD,{steps:Te,currentStep:i,orientation:"horizontal",showTimeEstimates:!P,compact:!0,hideLabelsOnMobile:!0,onStepClick:Qe})})}),o.jsx(ae,{}),o.jsxs("div",{className:"flex-1 px-4 py-2 flex flex-col min-h-0",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg shadow-sm border border-gray-200 dark:border-gray-700 border-b-0 flex-shrink-0",children:o.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("button",{onClick:()=>O("input"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${$==="input"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_u,{className:"w-4 h-4"}),"Input & Screenshot"]}),$==="input"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]}),o.jsxs("button",{onClick:()=>O("submissions"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${$==="submissions"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Et,{className:"w-4 h-4"}),"Recent Submissions",l&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),$==="submissions"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]})]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-b-lg shadow-sm border border-gray-200 dark:border-gray-700 border-t-0 flex-1 relative flex flex-col overflow-hidden",children:[o.jsxs("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out flex flex-col ${$==="input"?"translate-x-0 opacity-100":"translate-x-full opacity-0 pointer-events-none"}`,children:[o.jsxs("div",{className:"mb-3 flex-shrink-0",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Te[i-1].title}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:Te[i-1].description})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:ce(i)})]}),o.jsx("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out ${$==="submissions"?"translate-x-0 opacity-100":"-translate-x-full opacity-0 pointer-events-none"}`,children:o.jsxs("div",{className:"h-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Submissions"}),o.jsx(Me,{onClick:()=>S(L=>L+1),variant:"ghost",size:"small",icon:qr,ariaLabel:"Refresh submissions"})]}),o.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:o.jsx(UD,{onSubmissionSelect:L=>{c(L),L&&setTimeout(()=>O("input"),300)},selectedSubmissionId:l==null?void 0:l.id,onSelectionChange:w,refreshTrigger:E,onGroupCreate:(L,U="intelligent")=>{w(L),N(U),g(!0)}})})]})})]})]}),y&&o.jsx(VD,{selectedSubmissions:v,combineMethod:x,onClose:()=>g(!1),onSuccess:()=>{g(!1),S(L=>L+1)}})]})})};function zy({backlogData:e=[],strategicDirectives:t=[],isCompact:n,onRefresh:r}){const{id:s}=Ff(),i=Oi(),a=Jn(),c=new URLSearchParams(a.search).get("sd"),[u,d]=k.useState({}),[h,f]=k.useState(""),[p,m]=k.useState("all"),[v,w]=k.useState(c||"all"),[y,g]=k.useState(!1),[x,N]=k.useState("all"),[E,S]=k.useState(!0),[P,T]=k.useState([]),[$,O]=k.useState({});k.useEffect(()=>{(async()=>{S(!0);try{const q=v&&v!=="all"?`/api/backlog/strategic-directives/${v}`:"/api/backlog/strategic-directives-with-items",C=await(await fetch(q)).json();if(v&&v!=="all")T(C.backlog_items||[]),O({[C.sd_id]:{sd:C,items:C.backlog_items||[]}});else{const z={};C.forEach(ne=>{z[ne.sd_id]={sd:ne,items:ne.backlog_items||[]}}),O(z);const j=C.flatMap(ne=>ne.backlog_items||[]);T(j)}}catch(q){console.error("Error loading backlog:",q)}finally{S(!1)}})()},[v]);const V=Object.entries($).reduce((R,[q,A])=>{let C=A.items;if(h){const z=h.toLowerCase();C=C.filter(j=>{var ne,ie,_,Se;return((ne=j.backlog_title)==null?void 0:ne.toLowerCase().includes(z))||((ie=j.item_description)==null?void 0:ie.toLowerCase().includes(z))||((_=j.backlog_id)==null?void 0:_.toLowerCase().includes(z))||((Se=j.my_comments)==null?void 0:Se.toLowerCase().includes(z))})}return p!=="all"&&(C=C.filter(z=>{var j;return((j=z.priority)==null?void 0:j.toLowerCase())===p.toLowerCase()})),x==="yes"?C=C.filter(z=>z.new_module===!0):x==="no"&&(C=C.filter(z=>z.new_module===!1)),C.length>0&&(R[q]={...A,items:C}),R},{}),X=R=>{if(!R)return null;const q=R.toLowerCase(),A={high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:gr},h:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:gr},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Or},m:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Or},low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Or},l:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Or},future:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-300",icon:Rn}},C=A[q]||A.low,z=C.icon;return o.jsxs("span",{className:`inline-flex items-center ${n?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${C.bg} ${C.text}`,children:[o.jsx(z,{className:"w-3 h-3 mr-1"}),R]})},me=R=>{d(q=>({...q,[R]:!q[R]}))};if(E)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading backlog..."})});const D=Object.values(V).reduce((R,q)=>R+q.items.length,0);return o.jsxs("div",{className:n?"p-3":"p-6",children:[o.jsxs("div",{className:n?"mb-3":"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ci,{className:n?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),o.jsx("h1",{className:n?"text-xl font-semibold":"text-2xl font-bold",children:"Backlog Management"}),o.jsxs("span",{className:`ml-3 ${n?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[D," items"]})]}),o.jsx(_c,{onRefresh:r,isCompact:n})]}),o.jsxs("div",{className:`flex flex-wrap gap-2 ${n?"mb-3":"mb-4"}`,children:[o.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[o.jsx(Jb,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"w-4 h-4":"w-5 h-5"} text-gray-400`}),o.jsx("input",{type:"text",value:h,onChange:R=>f(R.target.value),placeholder:"Search backlog items...",className:`w-full ${n?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),o.jsxs("select",{value:v,onChange:R=>w(R.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Strategic Directives"}),Object.values($).map(({sd:R})=>o.jsx("option",{value:R.sd_id,children:R.sd_title},R.sd_id))]}),o.jsxs("select",{value:p,onChange:R=>m(R.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"}),o.jsx("option",{value:"future",children:"Future"})]}),o.jsxs("select",{value:x,onChange:R=>N(R.target.value),className:`${n?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[o.jsx("option",{value:"all",children:"All Items"}),o.jsx("option",{value:"yes",children:"New Module"}),o.jsx("option",{value:"no",children:"Existing Module"})]}),o.jsxs("button",{onClick:()=>i("/backlog/new"),className:`flex items-center ${n?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[o.jsx(Xb,{className:`${n?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Backlog Item"]})]})]}),o.jsx("div",{className:"space-y-4",children:Object.entries(V).map(([R,{sd:q,items:A}])=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:`${n?"p-3":"p-4"} border-b border-gray-200 dark:border-gray-700`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:`${n?"text-base":"text-lg"} font-semibold text-gray-900 dark:text-white`,children:q.sd_title}),o.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:q.sd_id}),q.rolled_triage&&o.jsxs("span",{className:`text-xs px-2 py-1 rounded ${q.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":q.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":q.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:["Triage: ",q.rolled_triage]}),q.must_have_pct!==null&&o.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:[q.must_have_pct,"% Must-Have"]}),o.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:[A.length," items"]})]})]}),o.jsx("button",{onClick:()=>i(`/strategic-directives/${q.sd_id}`),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:o.jsx(Et,{className:n?"w-4 h-4":"w-5 h-5"})})]})}),o.jsx("div",{className:n?"p-2":"p-3",children:A.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No backlog items found"}):o.jsx("div",{className:"space-y-2",children:A.map(C=>o.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:o.jsxs("div",{className:`${n?"p-2":"p-3"} cursor-pointer`,onClick:()=>me(`${R}-${C.backlog_id}`),children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start flex-1",children:[o.jsx("div",{className:"mr-2 mt-1",children:u[`${R}-${C.backlog_id}`]?o.jsx(yn,{className:"w-4 h-4 text-gray-400"}):o.jsx(Nt,{className:"w-4 h-4 text-gray-400"})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"font-mono text-xs text-gray-500 dark:text-gray-400",children:C.backlog_id}),o.jsx("span",{className:`${n?"text-sm":"text-base"} font-medium text-gray-900 dark:text-white`,children:C.backlog_title}),C.new_module&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:"New Module"})]})})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[X(C.priority),C.stage_number&&o.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded",children:["Stage ",C.stage_number]})]})]}),u[`${R}-${C.backlog_id}`]&&o.jsxs("div",{className:`mt-3 ${n?"pl-5":"pl-6"} space-y-2`,children:[C.item_description&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.item_description})]}),C.my_comments&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Comments"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.my_comments})]}),C.phase&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Phase"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.phase})]}),C.description_raw&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tags"}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.description_raw})]})]})]})},`${R}-${C.backlog_id}`))})})]},R))}),Object.keys(V).length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ci,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No backlog items found matching your filters"})]})]})}function KD({metrics:e,activeCount:t,totalReviews:n}){const r=[{title:"Active Reviews",value:t,icon:wp,color:"blue",trend:null},{title:"Pass Rate",value:`${e.passRate}%`,icon:st,color:"green",trend:e.passRate>85?"up":"down",trendValue:e.passRate>85?"Good":"Needs Improvement"},{title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,icon:Rn,color:"purple",trend:e.avgTime<5e3?"up":"down",trendValue:e.avgTime<5e3?"Fast":"Slow"},{title:"False Positive Rate",value:`${e.falsePositiveRate}%`,icon:Gt,color:e.falsePositiveRate>15?"yellow":"green",trend:e.falsePositiveRate<15?"up":"down",trendValue:e.falsePositiveRate<15?"On Target":"High"},{title:"Compliance Rate",value:`${e.complianceRate}%`,icon:no,color:e.complianceRate>=95?"green":"yellow",trend:e.complianceRate>=95?"up":"down",trendValue:`${n} total reviews`}],s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:r.map((i,a)=>{const l=i.icon,c={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400"};return o.jsxs(te.div,{variants:s,initial:"hidden",animate:"visible",transition:{delay:a*.05},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:`p-2 rounded-lg ${c[i.color]}`,children:o.jsx(l,{className:"w-5 h-5"})}),i.trend&&o.jsx("div",{className:"flex items-center space-x-1",children:i.trend==="up"?o.jsx(gr,{className:"w-4 h-4 text-green-500"}):o.jsx(Or,{className:"w-4 h-4 text-red-500"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.value}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.title}),i.trendValue&&o.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:i.trendValue})]})]},i.title)})})}function XD({reviews:e,loading:t}){if(t)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return o.jsxs("div",{className:"text-center py-12",children:[o.jsx(kp,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Active Reviews"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All PR reviews have been completed or there are no PRs to review."})]});const n=a=>{switch(a){case"pending":return o.jsx(Rn,{className:"w-5 h-5 text-yellow-500"});case"passed":return o.jsx(st,{className:"w-5 h-5 text-green-500"});case"failed":return o.jsx(Qr,{className:"w-5 h-5 text-red-500"});case"warning":return o.jsx(Gt,{className:"w-5 h-5 text-orange-500"});default:return o.jsx(Rn,{className:"w-5 h-5 text-gray-500"})}},r=a=>{const c={security:no,performance:Jl,database:Nc,testing:eT}[a]||Et;return o.jsx(c,{className:"w-4 h-4"})},s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}};return o.jsx(te.div,{variants:s,initial:"hidden",animate:"visible",className:"space-y-4",children:e.map((a,l)=>o.jsxs(te.div,{variants:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[n(a.status),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["PR #",a.pr_number,": ",a.pr_title]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(Gb,{className:"w-3 h-3"}),o.jsx("span",{children:a.branch})]}),o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(Qb,{className:"w-3 h-3"}),o.jsx("span",{children:a.author})]}),a.sd_link&&o.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["SD: ",a.sd_link]}),a.prd_link&&o.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["PRD: ",a.prd_link]})]})]})]}),o.jsx("a",{href:a.github_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"View on GitHub",children:o.jsx(Kl,{className:"w-5 h-5"})})]}),a.sub_agent_reviews&&a.sub_agent_reviews.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:a.sub_agent_reviews.map(c=>o.jsxs("div",{className:`
                      flex items-center space-x-2 px-3 py-2 rounded-md text-sm
                      ${c.status==="passed"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":c.status==="failed"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}
                    `,children:[r(c.sub_agent),o.jsx("span",{className:"capitalize",children:c.sub_agent})]},c.sub_agent))})]}),a.summary&&o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.summary})}),a.issues&&a.issues.length>0&&o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-md p-3",children:[o.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:["Issues Found (",a.issues.length,")"]}),o.jsxs("ul",{className:"space-y-1",children:[a.issues.slice(0,3).map((c,u)=>o.jsxs("li",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["• ",c]},u)),a.issues.length>3&&o.jsxs("li",{className:"text-sm text-yellow-600 dark:text-yellow-500 italic",children:["... and ",a.issues.length-3," more"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{children:["Started: ",new Date(a.created_at).toLocaleTimeString()]}),a.review_time_ms&&o.jsxs("span",{children:["Duration: ",(a.review_time_ms/1e3).toFixed(1),"s"]})]}),a.status==="pending"&&o.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-600 dark:text-yellow-400",children:[o.jsx(Rn,{className:"w-3 h-3 animate-pulse"}),o.jsx("span",{children:"In Progress"})]})]})]},a.id))})}function JD({reviews:e,loading:t}){const[n,r]=k.useState(new Set);if(t)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Et,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Review History"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Review history will appear here once PR reviews are completed."})]});const s=c=>{const u=new Set(n);u.has(c)?u.delete(c):u.add(c),r(u)},i=c=>{const u={passed:{icon:st,color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",label:"Passed"},failed:{icon:Qr,color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",label:"Failed"},warning:{icon:Gt,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",label:"Warning"}},d=u[c]||u.warning,h=d.icon;return o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:[o.jsx(h,{className:"w-3 h-3 mr-1"}),d.label]})},a=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=c=>{if(!c)return"N/A";const u=c/1e3;if(u<60)return`${u.toFixed(1)}s`;const d=Math.floor(u/60),h=(u%60).toFixed(0);return`${d}m ${h}s`};return o.jsx("div",{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-md rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"PR Details"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Author"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Issues"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Links"}),o.jsx("th",{className:"relative px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(c=>{var d,h;const u=n.has(c.id);return o.jsxs(ao.Fragment,{children:[o.jsxs(te.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["PR #",c.pr_number]}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:c.pr_title}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[o.jsx(Gb,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.branch})]})]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Qb,{className:"w-4 h-4 text-gray-400 mr-2"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:c.author})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i(c.status)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((d=c.issues)==null?void 0:d.length)||0})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Rn,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{children:l(c.review_time_ms)})]}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[o.jsx(LC,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a(c.created_at)})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[c.github_url&&o.jsx("a",{href:c.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"View on GitHub",children:o.jsx(Kl,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[c.sd_link&&o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"SD"}),c.prd_link&&o.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"PRD"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>s(c.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:u?o.jsx(ph,{className:"w-5 h-5"}):o.jsx(yn,{className:"w-5 h-5"})})})]}),u&&o.jsx("tr",{className:"bg-gray-50 dark:bg-gray-900",children:o.jsx("td",{colSpan:"7",className:"px-6 py-4",children:o.jsxs("div",{className:"space-y-4",children:[c.summary&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Review Summary"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.summary})]}),c.sub_agent_reviews&&c.sub_agent_reviews.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:c.sub_agent_reviews.map(f=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[o.jsx("span",{className:"text-sm capitalize text-gray-700 dark:text-gray-300",children:f.sub_agent}),i(f.status)]},f.sub_agent))})]}),c.issues&&c.issues.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Issues Found"}),o.jsx("ul",{className:"space-y-1",children:c.issues.map((f,p)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:["• ",f]},p))})]}),c.metadata&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commit"}),o.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:((h=c.commit_sha)==null?void 0:h.substring(0,7))||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.leo_phase||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"False Positive"}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.is_false_positive?"Yes":"No"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Review ID"}),o.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:c.id.substring(0,8)})]})]})]})})})]},c.id)})})]})})}function YD({metrics:e,reviews:t}){const[n,r]=k.useState("7d"),[s,i]=k.useState("overview"),a=k.useMemo(()=>{if(!t||t.length===0)return null;const c=new Date,u={"24h":24*60*60*1e3,"7d":7*24*60*60*1e3,"30d":30*24*60*60*1e3},d=c-u[n],h=t.filter(m=>new Date(m.created_at)>=d),f={};h.forEach(m=>{const v=new Date(m.created_at).toLocaleDateString();f[v]||(f[v]={total:0,passed:0,failed:0,warnings:0}),f[v].total++,m.status==="passed"?f[v].passed++:m.status==="failed"?f[v].failed++:m.status==="warning"&&f[v].warnings++});const p={};return h.forEach(m=>{m.sub_agent_reviews&&m.sub_agent_reviews.forEach(v=>{p[v.sub_agent]||(p[v.sub_agent]={total:0,passed:0,failed:0,avgTime:[]}),p[v.sub_agent].total++,v.status==="passed"?p[v.sub_agent].passed++:p[v.sub_agent].failed++,v.review_time_ms&&p[v.sub_agent].avgTime.push(v.review_time_ms)})}),Object.keys(p).forEach(m=>{const v=p[m];v.passRate=(v.passed/v.total*100).toFixed(1),v.avgTime.length>0&&(v.avgTimeMs=v.avgTime.reduce((w,y)=>w+y,0)/v.avgTime.length)}),{dailyData:Object.entries(f).slice(-7),subAgentStats:p,totalReviews:h.length,passRate:h.length>0?(h.filter(m=>m.status==="passed").length/h.length*100).toFixed(1):0}},[t,n]),l=[{id:"compliance",title:"Compliance Rate",value:`${e.complianceRate}%`,target:"95%",status:e.complianceRate>=95?"good":"warning",description:"SD/PRD linkage compliance"},{id:"false-positive",title:"False Positive Rate",value:`${e.falsePositiveRate}%`,target:"<15%",status:e.falsePositiveRate<=15?"good":"warning",description:"Reviews marked as false positives"},{id:"avg-time",title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,target:"<5s",status:e.avgTime<5e3?"good":"warning",description:"Average time per review"},{id:"coverage",title:"Coverage",value:`${(a==null?void 0:a.totalReviews)||0}`,target:"PRs",status:"neutral",description:`Reviews in ${n}`}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Metrics"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("select",{value:n,onChange:c=>r(c.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[o.jsx("option",{value:"24h",children:"Last 24 Hours"}),o.jsx("option",{value:"7d",children:"Last 7 Days"}),o.jsx("option",{value:"30d",children:"Last 30 Days"})]}),o.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Export Metrics",children:o.jsx($C,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(c=>o.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.title}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.value})]}),o.jsx("div",{className:`
                p-2 rounded-lg
                ${c.status==="good"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":c.status==="warning"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}
              `,children:c.status==="good"?o.jsx(gr,{className:"w-4 h-4"}):c.status==="warning"?o.jsx(Or,{className:"w-4 h-4"}):o.jsx(wp,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Target: ",c.target]}),o.jsx("span",{className:"text-gray-400 dark:text-gray-500",title:c.description,children:o.jsx(Tn,{className:"w-3 h-3"})})]})]},c.id))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[o.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(RC,{className:"w-5 h-5 mr-2"}),"Daily Review Trend"]}),a!=null&&a.dailyData&&a.dailyData.length>0?o.jsxs("div",{className:"space-y-3",children:[a.dailyData.map(([c,u])=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),o.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[o.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 overflow-hidden",children:o.jsxs("div",{className:"h-full flex",children:[o.jsx("div",{className:"bg-green-500 transition-all duration-300",style:{width:`${u.passed/u.total*100}%`}}),o.jsx("div",{className:"bg-red-500 transition-all duration-300",style:{width:`${u.failed/u.total*100}%`}}),o.jsx("div",{className:"bg-yellow-500 transition-all duration-300",style:{width:`${u.warnings/u.total*100}%`}})]})}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 w-10",children:u.total})]})]},c)),o.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Passed"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Failed"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Warnings"})]})]})]}):o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available for selected period"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[o.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(JC,{className:"w-5 h-5 mr-2"}),"Sub-Agent Performance"]}),a!=null&&a.subAgentStats&&Object.keys(a.subAgentStats).length>0?o.jsx("div",{className:"space-y-3",children:Object.entries(a.subAgentStats).map(([c,u])=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:c}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[u.total," reviews"]}),o.jsxs("span",{className:`font-medium ${parseFloat(u.passRate)>=85?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:[u.passRate,"% pass"]})]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${parseFloat(u.passRate)>=85?"bg-green-500":"bg-yellow-500"}`,style:{width:`${u.passRate}%`}})}),u.avgTimeMs&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg time: ",(u.avgTimeMs/1e3).toFixed(1),"s"]})]},c))}):o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No sub-agent data available"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"System Health Summary"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),o.jsx("p",{className:`text-lg font-semibold ${e.falsePositiveRate<=15&&e.complianceRate>=95?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:e.falsePositiveRate<=15&&e.complianceRate>=95?"Healthy":"Needs Attention"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Reviews"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.totalToday})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pass Rate Trend"}),o.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(a==null?void 0:a.passRate)||e.passRate,"%",(a==null?void 0:a.passRate)>e.passRate?o.jsx(gr,{className:"w-4 h-4 ml-2 text-green-500"}):o.jsx(Or,{className:"w-4 h-4 ml-2 text-red-500"})]})]})]})]})]})}function QD({state:e,isConnected:t,refreshData:n}){const[r,s]=k.useState([]),[i,a]=k.useState({totalToday:0,passRate:0,avgTime:0,falsePositiveRate:0,complianceRate:0}),[l,c]=k.useState(!0),[u,d]=k.useState("active"),[h,f]=k.useState("all");k.useEffect(()=>{p(),m()},[]),k.useEffect(()=>{e!=null&&e.prReviews&&(e.prReviews.reviews&&s(e.prReviews.reviews),e.prReviews.metrics&&a(e.prReviews.metrics))},[e==null?void 0:e.prReviews]);const p=async()=>{try{const N=await(await fetch("/api/pr-reviews")).json();s(N||[])}catch(x){console.error("Failed to load PR reviews:",x)}finally{c(!1)}},m=async()=>{try{const N=await(await fetch("/api/pr-reviews/metrics")).json();a(N)}catch(x){console.error("Failed to load metrics:",x)}},v=async()=>{c(!0),await Promise.all([p(),m()]),c(!1)},w=r.filter(x=>x.status==="pending");r.filter(x=>x.status!=="pending");const y=h==="all"?r:r.filter(x=>x.status===h),g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(te.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kp,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"PR Reviews"}),t&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300",children:"Live"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:v,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Refresh",children:o.jsx(qr,{className:`w-5 h-5 ${l?"animate-spin":""}`})}),o.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Settings",children:o.jsx(QC,{className:"w-5 h-5"})})]})]}),o.jsx(KD,{metrics:i,activeCount:w.length,totalReviews:r.length}),o.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:o.jsx("nav",{className:"-mb-px flex space-x-8",children:["active","history","metrics"].map(x=>o.jsxs("button",{onClick:()=>d(x),className:`
                py-2 px-1 border-b-2 font-medium text-sm capitalize
                ${u===x?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
              `,children:[x==="active"&&`Active (${w.length})`,x==="history"&&"Review History",x==="metrics"&&"Metrics & Trends"]},x))})}),o.jsxs(te.div,{variants:g,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:[u==="active"&&o.jsx(XD,{reviews:w,loading:l}),u==="history"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filter:"}),o.jsxs("select",{value:h,onChange:x=>f(x.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[o.jsx("option",{value:"all",children:"All Reviews"}),o.jsx("option",{value:"passed",children:"Passed"}),o.jsx("option",{value:"failed",children:"Failed"}),o.jsx("option",{value:"warning",children:"Warnings"})]}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",y.length," reviews"]})]}),o.jsx(JD,{reviews:y.filter(x=>x.status!=="pending"),loading:l})]}),u==="metrics"&&o.jsx(YD,{metrics:i,reviews:r})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(wp,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.totalToday," reviews today"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(st,{className:"w-4 h-4 text-green-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.passRate,"% pass rate"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rn,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[(i.avgTime/1e3).toFixed(1),"s avg time"]})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:i.falsePositiveRate>15?o.jsxs("span",{className:"flex items-center space-x-1 text-sm text-yellow-600 dark:text-yellow-400",children:[o.jsx(Gt,{className:"w-4 h-4"}),o.jsx("span",{children:"High false positive rate"})]}):o.jsxs("span",{className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400",children:[o.jsx(st,{className:"w-4 h-4"}),o.jsx("span",{children:"System healthy"})]})})]})]})}const Jo=window.location.hostname==="localhost",sa={log:(...e)=>{Jo&&console.log(...e)},error:(...e)=>{console.error(...e)},warn:(...e)=>{Jo&&console.warn(...e)},info:(...e)=>{Jo&&console.info(...e)},debug:(...e)=>{Jo&&console.debug(...e)}};function ZD(){var N,E;const[e,t]=k.useState({leoProtocol:{version:"detecting...",activeRole:null,currentSD:null,currentPRD:null,phase:null},context:{usage:0,total:18e4,breakdown:{}},handoffs:[],strategicDirectives:[],prds:[],checklists:{},progress:{overall:0,byPhase:{}}}),[n,r]=k.useState(!1),[s,i]=k.useState(!1),{preferences:a}=X2(),[l,c]=uu("checklists",{}),[u,d]=uu("sidebarCollapsed",!1),[h,f]=uu("compactMode",!1),p=K2("ws://localhost:3000",{onOpen:()=>{r(!0),sa.log("Connected to dashboard server")},onMessage:S=>{try{const P=JSON.parse(S.data);P.type==="state"&&t(P.data)}catch(P){sa.error("Error parsing WebSocket message:",P)}},onClose:()=>{r(!1),sa.log("Disconnected from dashboard server")},onError:S=>{sa.error("WebSocket error:",S)}});k.useEffect(()=>{fetch("/api/state").then(S=>S.json()).then(S=>{const P={...S,checklists:{...S.checklists,...l}};t(P)}).catch(S=>sa.error("Error loading state:",S))},[]),k.useEffect(()=>{Object.keys(e.checklists).length>0&&c(e.checklists)},[e.checklists]),k.useEffect(()=>{a.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[a.theme]);const m=()=>{p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"refresh"}))},v=(S,P,T)=>{p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"updateChecklist",data:{documentId:S,itemIndex:P,checked:T}}))},w=(S,P)=>{p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"requestHandoff",data:{type:S,checklist:P}}))},y=()=>{p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"compactContext"}))},g=S=>{t(P=>({...P,leoProtocol:{...P.leoProtocol,currentSD:S}})),p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"setActiveSD",data:{sdId:S}}))},x=(S,P)=>{t(T=>({...T,strategicDirectives:T.strategicDirectives.map($=>$.id===S?{...$,status:P}:$)})),p&&p.readyState===WebSocket.OPEN&&p.send(JSON.stringify({type:"updateSDStatus",data:{sdId:S,status:P}}))};return o.jsx(V2,{children:o.jsx(R2,{children:o.jsxs(Tt,{path:"/",element:o.jsx(lT,{state:e,isConnected:n,isSidebarCollapsed:u,setIsSidebarCollapsed:d,isCompactMode:h,setIsCompactMode:f,isMobileMenuOpen:s,setIsMobileMenuOpen:i,updateChecklist:v,requestHandoff:w,compactContext:y,refreshData:m,setActiveSD:g}),children:[o.jsx(Tt,{index:!0,element:o.jsx(Z5,{state:e,onRefresh:m,onSetActiveSD:g,isCompact:h})}),o.jsxs(Tt,{path:"strategic-directives",children:[o.jsx(Tt,{index:!0,element:o.jsx(Uy,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:g,onUpdateStatus:x,currentSD:(N=e.leoProtocol)==null?void 0:N.currentSD,isCompact:h,onRefresh:m})}),o.jsx(Tt,{path:":id",element:o.jsx(Uy,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:v,onSetActiveSD:g,onUpdateStatus:x,currentSD:(E=e.leoProtocol)==null?void 0:E.currentSD,isCompact:h,detailMode:!0,onRefresh:m})})]}),o.jsxs(Tt,{path:"prds",children:[o.jsx(Tt,{index:!0,element:o.jsx(Vy,{prds:e.prds,isCompact:h})}),o.jsx(Tt,{path:":id",element:o.jsx(Vy,{prds:e.prds,isCompact:h,detailMode:!0})})]}),o.jsxs(Tt,{path:"backlog",children:[o.jsx(Tt,{index:!0,element:o.jsx(zy,{strategicDirectives:e.strategicDirectives,isCompact:h,onRefresh:m})}),o.jsx(Tt,{path:":id",element:o.jsx(zy,{strategicDirectives:e.strategicDirectives,isCompact:h,detailMode:!0,onRefresh:m})})]}),o.jsx(Tt,{path:"directive-lab",element:o.jsx(GD,{state:e,onRefresh:m,isCompact:h})}),o.jsx(Tt,{path:"pr-reviews",element:o.jsx(QD,{state:e,isConnected:n,refreshData:m})}),o.jsx(Tt,{path:"*",element:o.jsx(T2,{to:"/",replace:!0})})]})})})}class eL extends ao.Component{constructor(n){super(n);Oc(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});Oc(this,"handleHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){window.location.hostname==="localhost"&&console.error("ErrorBoundary caught:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Gt,{className:"w-8 h-8 text-red-500 mr-3"}),o.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Something went wrong"})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We encountered an unexpected error. The application may not work correctly."}),window.location.hostname==="localhost"&&o.jsxs("details",{className:"mb-4",children:[o.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Error details (development only)"}),o.jsxs("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto",children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(qr,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),o.jsxs("button",{onClick:this.handleHome,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[o.jsx(jp,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}Xu.createRoot(document.getElementById("root")).render(o.jsx(ao.StrictMode,{children:o.jsx(eL,{children:o.jsx(ZD,{})})}));
//# sourceMappingURL=index-DC3mBLMy.js.map
