const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SDManager-CinUB68x.js","assets/index-LAI-2XFi.js","assets/PRDManager-C1pXLWQs.js"])))=>i.map(i=>d[i]);
var uw=Object.defineProperty;var dw=(e,t,r)=>t in e?uw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Wl=(e,t,r)=>dw(e,typeof t!="symbol"?t+"":t,r);function hw(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var S0={exports:{}},fl={},N0={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sa=Symbol.for("react.element"),pw=Symbol.for("react.portal"),gw=Symbol.for("react.fragment"),yw=Symbol.for("react.strict_mode"),xw=Symbol.for("react.profiler"),vw=Symbol.for("react.provider"),ww=Symbol.for("react.context"),bw=Symbol.for("react.forward_ref"),kw=Symbol.for("react.suspense"),jw=Symbol.for("react.memo"),Sw=Symbol.for("react.lazy"),kf=Symbol.iterator;function Nw(e){return e===null||typeof e!="object"?null:(e=kf&&e[kf]||e["@@iterator"],typeof e=="function"?e:null)}var _0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E0=Object.assign,P0={};function ri(e,t,r){this.props=e,this.context=t,this.refs=P0,this.updater=r||_0}ri.prototype.isReactComponent={};ri.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ri.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function C0(){}C0.prototype=ri.prototype;function _d(e,t,r){this.props=e,this.context=t,this.refs=P0,this.updater=r||_0}var Ed=_d.prototype=new C0;Ed.constructor=_d;E0(Ed,ri.prototype);Ed.isPureReactComponent=!0;var jf=Array.isArray,T0=Object.prototype.hasOwnProperty,Pd={current:null},R0={key:!0,ref:!0,__self:!0,__source:!0};function A0(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)T0.call(t,n)&&!R0.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Sa,type:e,key:i,ref:o,props:s,_owner:Pd.current}}function _w(e,t){return{$$typeof:Sa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sa}function Ew(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Sf=/\/+/g;function Hl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ew(""+e.key):t.toString(36)}function fo(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Sa:case pw:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Hl(o,0):n,jf(s)?(r="",e!=null&&(r=e.replace(Sf,"$&/")+"/"),fo(s,t,r,"",function(u){return u})):s!=null&&(Cd(s)&&(s=_w(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sf,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",jf(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Hl(i,l);o+=fo(i,t,r,c,s)}else if(c=Nw(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Hl(i,l++),o+=fo(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ma(e,t,r){if(e==null)return e;var n=[],s=0;return fo(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Pw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},mo={transition:null},Cw={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:mo,ReactCurrentOwner:Pd};function D0(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ma,forEach:function(e,t,r){Ma(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ma(e,function(){t++}),t},toArray:function(e){return Ma(e,function(t){return t})||[]},only:function(e){if(!Cd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=ri;le.Fragment=gw;le.Profiler=xw;le.PureComponent=_d;le.StrictMode=yw;le.Suspense=kw;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cw;le.act=D0;le.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=E0({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Pd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)T0.call(t,c)&&!R0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Sa,type:e.type,key:s,ref:i,props:n,_owner:o}};le.createContext=function(e){return e={$$typeof:ww,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vw,_context:e},e.Consumer=e};le.createElement=A0;le.createFactory=function(e){var t=A0.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:bw,render:e}};le.isValidElement=Cd;le.lazy=function(e){return{$$typeof:Sw,_payload:{_status:-1,_result:e},_init:Pw}};le.memo=function(e,t){return{$$typeof:jw,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=mo.transition;mo.transition={};try{e()}finally{mo.transition=t}};le.unstable_act=D0;le.useCallback=function(e,t){return pt.current.useCallback(e,t)};le.useContext=function(e){return pt.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};le.useEffect=function(e,t){return pt.current.useEffect(e,t)};le.useId=function(){return pt.current.useId()};le.useImperativeHandle=function(e,t,r){return pt.current.useImperativeHandle(e,t,r)};le.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return pt.current.useMemo(e,t)};le.useReducer=function(e,t,r){return pt.current.useReducer(e,t,r)};le.useRef=function(e){return pt.current.useRef(e)};le.useState=function(e){return pt.current.useState(e)};le.useSyncExternalStore=function(e,t,r){return pt.current.useSyncExternalStore(e,t,r)};le.useTransition=function(){return pt.current.useTransition()};le.version="18.3.1";N0.exports=le;var v=N0.exports;const Na=fw(v),Tw=hw({__proto__:null,default:Na},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw=v,Aw=Symbol.for("react.element"),Dw=Symbol.for("react.fragment"),Iw=Object.prototype.hasOwnProperty,Lw=Rw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$w={key:!0,ref:!0,__self:!0,__source:!0};function I0(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Iw.call(t,n)&&!$w.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Aw,type:e,key:i,ref:o,props:s,_owner:Lw.current}}fl.Fragment=Dw;fl.jsx=I0;fl.jsxs=I0;S0.exports=fl;var a=S0.exports,Kc={},L0={exports:{}},At={},$0={exports:{}},O0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,C){var E=j.length;j.push(C);e:for(;0<E;){var M=E-1>>>1,K=j[M];if(0<s(K,C))j[M]=C,j[E]=K,E=M;else break e}}function r(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var C=j[0],E=j.pop();if(E!==C){j[0]=E;e:for(var M=0,K=j.length,G=K>>>1;M<G;){var ce=2*(M+1)-1,de=j[ce],xe=ce+1,Te=j[xe];if(0>s(de,E))xe<K&&0>s(Te,de)?(j[M]=Te,j[xe]=E,M=xe):(j[M]=de,j[ce]=E,M=ce);else if(xe<K&&0>s(Te,E))j[M]=Te,j[xe]=E,M=xe;else break e}}return C}function s(j,C){var E=j.sortIndex-C.sortIndex;return E!==0?E:j.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,x=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(j){for(var C=r(u);C!==null;){if(C.callback===null)n(u);else if(C.startTime<=j)n(u),C.sortIndex=C.expirationTime,t(c,C);else break;C=r(u)}}function k(j){if(w=!1,p(j),!x)if(r(c)!==null)x=!0,z(S);else{var C=r(u);C!==null&&O(k,C.startTime-j)}}function S(j,C){x=!1,w&&(w=!1,y(P),P=-1),m=!0;var E=f;try{for(p(C),h=r(c);h!==null&&(!(h.expirationTime>C)||j&&!Y());){var M=h.callback;if(typeof M=="function"){h.callback=null,f=h.priorityLevel;var K=M(h.expirationTime<=C);C=e.unstable_now(),typeof K=="function"?h.callback=K:h===r(c)&&n(c),p(C)}else n(c);h=r(c)}if(h!==null)var G=!0;else{var ce=r(u);ce!==null&&O(k,ce.startTime-C),G=!1}return G}finally{h=null,f=E,m=!1}}var N=!1,_=null,P=-1,$=5,R=-1;function Y(){return!(e.unstable_now()-R<$)}function Ce(){if(_!==null){var j=e.unstable_now();R=j;var C=!0;try{C=_(!0,j)}finally{C?Qe():(N=!1,_=null)}}else N=!1}var Qe;if(typeof g=="function")Qe=function(){g(Ce)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,L=I.port2;I.port1.onmessage=Ce,Qe=function(){L.postMessage(null)}}else Qe=function(){b(Ce,0)};function z(j){_=j,N||(N=!0,Qe())}function O(j,C){P=b(function(){j(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,z(S))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(j){switch(f){case 1:case 2:case 3:var C=3;break;default:C=f}var E=f;f=C;try{return j()}finally{f=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,C){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var E=f;f=j;try{return C()}finally{f=E}},e.unstable_scheduleCallback=function(j,C,E){var M=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?M+E:M):E=M,j){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=E+K,j={id:d++,callback:C,priorityLevel:j,startTime:E,expirationTime:K,sortIndex:-1},E>M?(j.sortIndex=E,t(u,j),r(c)===null&&j===r(u)&&(w?(y(P),P=-1):w=!0,O(k,E-M))):(j.sortIndex=K,t(c,j),x||m||(x=!0,z(S))),j},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(j){var C=f;return function(){var E=f;f=C;try{return j.apply(this,arguments)}finally{f=E}}}})(O0);$0.exports=O0;var Ow=$0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw=v,Rt=Ow;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M0=new Set,Xi={};function as(e,t){Hs(e,t),Hs(e+"Capture",t)}function Hs(e,t){for(Xi[e]=t,e=0;e<t.length;e++)M0.add(t[e])}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gc=Object.prototype.hasOwnProperty,Vw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nf={},_f={};function Fw(e){return Gc.call(_f,e)?!0:Gc.call(Nf,e)?!1:Vw.test(e)?_f[e]=!0:(Nf[e]=!0,!1)}function Uw(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Bw(e,t,r,n){if(t===null||typeof t>"u"||Uw(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tt[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tt[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tt[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tt[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tt[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tt[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tt[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tt[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tt[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Td=/[\-:]([a-z])/g;function Rd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Td,Rd);tt[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Td,Rd);tt[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Td,Rd);tt[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tt[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});tt.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tt[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ad(e,t,r,n){var s=tt.hasOwnProperty(t)?tt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Bw(t,r,s,n)&&(r=null),n||s===null?Fw(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Fr=Mw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Va=Symbol.for("react.element"),ws=Symbol.for("react.portal"),bs=Symbol.for("react.fragment"),Dd=Symbol.for("react.strict_mode"),Xc=Symbol.for("react.profiler"),V0=Symbol.for("react.provider"),F0=Symbol.for("react.context"),Id=Symbol.for("react.forward_ref"),Jc=Symbol.for("react.suspense"),Qc=Symbol.for("react.suspense_list"),Ld=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),U0=Symbol.for("react.offscreen"),Ef=Symbol.iterator;function gi(e){return e===null||typeof e!="object"?null:(e=Ef&&e[Ef]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,ql;function _i(e){if(ql===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ql=t&&t[1]||""}return`
`+ql+e}var Kl=!1;function Gl(e,t){if(!e||Kl)return"";Kl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Kl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?_i(e):""}function zw(e){switch(e.tag){case 5:return _i(e.type);case 16:return _i("Lazy");case 13:return _i("Suspense");case 19:return _i("SuspenseList");case 0:case 2:case 15:return e=Gl(e.type,!1),e;case 11:return e=Gl(e.type.render,!1),e;case 1:return e=Gl(e.type,!0),e;default:return""}}function Yc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bs:return"Fragment";case ws:return"Portal";case Xc:return"Profiler";case Dd:return"StrictMode";case Jc:return"Suspense";case Qc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case F0:return(e.displayName||"Context")+".Consumer";case V0:return(e._context.displayName||"Context")+".Provider";case Id:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ld:return t=e.displayName||null,t!==null?t:Yc(e.type)||"Memo";case tn:t=e._payload,e=e._init;try{return Yc(e(t))}catch{}}return null}function Ww(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yc(t);case 8:return t===Dd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function B0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hw(e){var t=B0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fa(e){e._valueTracker||(e._valueTracker=Hw(e))}function z0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=B0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ro(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Zc(e,t){var r=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Pf(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=vn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function W0(e,t){t=t.checked,t!=null&&Ad(e,"checked",t,!1)}function eu(e,t){W0(e,t);var r=vn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tu(e,t.type,r):t.hasOwnProperty("defaultValue")&&tu(e,t.type,vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cf(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function tu(e,t,r){(t!=="number"||Ro(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ei=Array.isArray;function Ms(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+vn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ru(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tf(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(D(92));if(Ei(r)){if(1<r.length)throw Error(D(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:vn(r)}}function H0(e,t){var r=vn(t.value),n=vn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Rf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function q0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?q0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ua,K0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ua=Ua||document.createElement("div"),Ua.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ua.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ji(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qw=["Webkit","ms","Moz","O"];Object.keys(Ai).forEach(function(e){qw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ai[t]=Ai[e]})});function G0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ai.hasOwnProperty(e)&&Ai[e]?(""+t).trim():t+"px"}function X0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=G0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Kw=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function su(e,t){if(t){if(Kw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function iu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=null;function $d(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ou=null,Vs=null,Fs=null;function Af(e){if(e=Pa(e)){if(typeof ou!="function")throw Error(D(280));var t=e.stateNode;t&&(t=xl(t),ou(e.stateNode,e.type,t))}}function J0(e){Vs?Fs?Fs.push(e):Fs=[e]:Vs=e}function Q0(){if(Vs){var e=Vs,t=Fs;if(Fs=Vs=null,Af(e),t)for(e=0;e<t.length;e++)Af(t[e])}}function Y0(e,t){return e(t)}function Z0(){}var Xl=!1;function eg(e,t,r){if(Xl)return e(t,r);Xl=!0;try{return Y0(e,t,r)}finally{Xl=!1,(Vs!==null||Fs!==null)&&(Z0(),Q0())}}function Qi(e,t){var r=e.stateNode;if(r===null)return null;var n=xl(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(D(231,t,typeof r));return r}var lu=!1;if(Ir)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){lu=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{lu=!1}function Gw(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Di=!1,Ao=null,Do=!1,cu=null,Xw={onError:function(e){Di=!0,Ao=e}};function Jw(e,t,r,n,s,i,o,l,c){Di=!1,Ao=null,Gw.apply(Xw,arguments)}function Qw(e,t,r,n,s,i,o,l,c){if(Jw.apply(this,arguments),Di){if(Di){var u=Ao;Di=!1,Ao=null}else throw Error(D(198));Do||(Do=!0,cu=u)}}function os(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function tg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Df(e){if(os(e)!==e)throw Error(D(188))}function Yw(e){var t=e.alternate;if(!t){if(t=os(e),t===null)throw Error(D(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Df(s),e;if(i===n)return Df(s),t;i=i.sibling}throw Error(D(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(D(189))}}if(r.alternate!==n)throw Error(D(190))}if(r.tag!==3)throw Error(D(188));return r.stateNode.current===r?e:t}function rg(e){return e=Yw(e),e!==null?ng(e):null}function ng(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ng(e);if(t!==null)return t;e=e.sibling}return null}var sg=Rt.unstable_scheduleCallback,If=Rt.unstable_cancelCallback,Zw=Rt.unstable_shouldYield,eb=Rt.unstable_requestPaint,$e=Rt.unstable_now,tb=Rt.unstable_getCurrentPriorityLevel,Od=Rt.unstable_ImmediatePriority,ig=Rt.unstable_UserBlockingPriority,Io=Rt.unstable_NormalPriority,rb=Rt.unstable_LowPriority,ag=Rt.unstable_IdlePriority,ml=null,fr=null;function nb(e){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(ml,e,void 0,(e.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:ab,sb=Math.log,ib=Math.LN2;function ab(e){return e>>>=0,e===0?32:31-(sb(e)/ib|0)|0}var Ba=64,za=4194304;function Pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lo(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Pi(l):(i&=o,i!==0&&(n=Pi(i)))}else o=r&~s,o!==0?n=Pi(o):i!==0&&(n=Pi(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-rr(t),s=1<<r,n|=e[r],t&=~s;return n}function ob(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lb(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-rr(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=ob(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function uu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function og(){var e=Ba;return Ba<<=1,!(Ba&4194240)&&(Ba=64),e}function Jl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _a(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rr(t),e[t]=r}function cb(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-rr(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Md(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-rr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var he=0;function lg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cg,Vd,ug,dg,hg,du=!1,Wa=[],un=null,dn=null,hn=null,Yi=new Map,Zi=new Map,nn=[],ub="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lf(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":Yi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(t.pointerId)}}function xi(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Pa(t),t!==null&&Vd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function db(e,t,r,n,s){switch(t){case"focusin":return un=xi(un,e,t,r,n,s),!0;case"dragenter":return dn=xi(dn,e,t,r,n,s),!0;case"mouseover":return hn=xi(hn,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Yi.set(i,xi(Yi.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Zi.set(i,xi(Zi.get(i)||null,e,t,r,n,s)),!0}return!1}function fg(e){var t=Wn(e.target);if(t!==null){var r=os(t);if(r!==null){if(t=r.tag,t===13){if(t=tg(r),t!==null){e.blockedOn=t,hg(e.priority,function(){ug(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=hu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);au=n,r.target.dispatchEvent(n),au=null}else return t=Pa(r),t!==null&&Vd(t),e.blockedOn=r,!1;t.shift()}return!0}function $f(e,t,r){po(e)&&r.delete(t)}function hb(){du=!1,un!==null&&po(un)&&(un=null),dn!==null&&po(dn)&&(dn=null),hn!==null&&po(hn)&&(hn=null),Yi.forEach($f),Zi.forEach($f)}function vi(e,t){e.blockedOn===t&&(e.blockedOn=null,du||(du=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,hb)))}function ea(e){function t(s){return vi(s,e)}if(0<Wa.length){vi(Wa[0],e);for(var r=1;r<Wa.length;r++){var n=Wa[r];n.blockedOn===e&&(n.blockedOn=null)}}for(un!==null&&vi(un,e),dn!==null&&vi(dn,e),hn!==null&&vi(hn,e),Yi.forEach(t),Zi.forEach(t),r=0;r<nn.length;r++)n=nn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<nn.length&&(r=nn[0],r.blockedOn===null);)fg(r),r.blockedOn===null&&nn.shift()}var Us=Fr.ReactCurrentBatchConfig,$o=!0;function fb(e,t,r,n){var s=he,i=Us.transition;Us.transition=null;try{he=1,Fd(e,t,r,n)}finally{he=s,Us.transition=i}}function mb(e,t,r,n){var s=he,i=Us.transition;Us.transition=null;try{he=4,Fd(e,t,r,n)}finally{he=s,Us.transition=i}}function Fd(e,t,r,n){if($o){var s=hu(e,t,r,n);if(s===null)ac(e,t,n,Oo,r),Lf(e,n);else if(db(s,e,t,r,n))n.stopPropagation();else if(Lf(e,n),t&4&&-1<ub.indexOf(e)){for(;s!==null;){var i=Pa(s);if(i!==null&&cg(i),i=hu(e,t,r,n),i===null&&ac(e,t,n,Oo,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ac(e,t,n,null,r)}}var Oo=null;function hu(e,t,r,n){if(Oo=null,e=$d(n),e=Wn(e),e!==null)if(t=os(e),t===null)e=null;else if(r=t.tag,r===13){if(e=tg(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oo=e,null}function mg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tb()){case Od:return 1;case ig:return 4;case Io:case rb:return 16;case ag:return 536870912;default:return 16}default:return 16}}var on=null,Ud=null,go=null;function pg(){if(go)return go;var e,t=Ud,r=t.length,n,s="value"in on?on.value:on.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return go=s.slice(e,1<n?1-n:void 0)}function yo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ha(){return!0}function Of(){return!1}function Dt(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ha:Of,this.isPropagationStopped=Of,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),t}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bd=Dt(ni),Ea=Pe({},ni,{view:0,detail:0}),pb=Dt(Ea),Ql,Yl,wi,pl=Pe({},Ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wi&&(wi&&e.type==="mousemove"?(Ql=e.screenX-wi.screenX,Yl=e.screenY-wi.screenY):Yl=Ql=0,wi=e),Ql)},movementY:function(e){return"movementY"in e?e.movementY:Yl}}),Mf=Dt(pl),gb=Pe({},pl,{dataTransfer:0}),yb=Dt(gb),xb=Pe({},Ea,{relatedTarget:0}),Zl=Dt(xb),vb=Pe({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),wb=Dt(vb),bb=Pe({},ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kb=Dt(bb),jb=Pe({},ni,{data:0}),Vf=Dt(jb),Sb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_b={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_b[e])?!!t[e]:!1}function zd(){return Eb}var Pb=Pe({},Ea,{key:function(e){if(e.key){var t=Sb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?yo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cb=Dt(Pb),Tb=Pe({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=Dt(Tb),Rb=Pe({},Ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Ab=Dt(Rb),Db=Pe({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ib=Dt(Db),Lb=Pe({},pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$b=Dt(Lb),Ob=[9,13,27,32],Wd=Ir&&"CompositionEvent"in window,Ii=null;Ir&&"documentMode"in document&&(Ii=document.documentMode);var Mb=Ir&&"TextEvent"in window&&!Ii,gg=Ir&&(!Wd||Ii&&8<Ii&&11>=Ii),Uf=" ",Bf=!1;function yg(e,t){switch(e){case"keyup":return Ob.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ks=!1;function Vb(e,t){switch(e){case"compositionend":return xg(t);case"keypress":return t.which!==32?null:(Bf=!0,Uf);case"textInput":return e=t.data,e===Uf&&Bf?null:e;default:return null}}function Fb(e,t){if(ks)return e==="compositionend"||!Wd&&yg(e,t)?(e=pg(),go=Ud=on=null,ks=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gg&&t.locale!=="ko"?null:t.data;default:return null}}var Ub={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ub[e.type]:t==="textarea"}function vg(e,t,r,n){J0(n),t=Mo(t,"onChange"),0<t.length&&(r=new Bd("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Li=null,ta=null;function Bb(e){Tg(e,0)}function gl(e){var t=Ns(e);if(z0(t))return e}function zb(e,t){if(e==="change")return t}var wg=!1;if(Ir){var ec;if(Ir){var tc="oninput"in document;if(!tc){var Wf=document.createElement("div");Wf.setAttribute("oninput","return;"),tc=typeof Wf.oninput=="function"}ec=tc}else ec=!1;wg=ec&&(!document.documentMode||9<document.documentMode)}function Hf(){Li&&(Li.detachEvent("onpropertychange",bg),ta=Li=null)}function bg(e){if(e.propertyName==="value"&&gl(ta)){var t=[];vg(t,ta,e,$d(e)),eg(Bb,t)}}function Wb(e,t,r){e==="focusin"?(Hf(),Li=t,ta=r,Li.attachEvent("onpropertychange",bg)):e==="focusout"&&Hf()}function Hb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gl(ta)}function qb(e,t){if(e==="click")return gl(t)}function Kb(e,t){if(e==="input"||e==="change")return gl(t)}function Gb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ir=typeof Object.is=="function"?Object.is:Gb;function ra(e,t){if(ir(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Gc.call(t,s)||!ir(e[s],t[s]))return!1}return!0}function qf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kf(e,t){var r=qf(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qf(r)}}function kg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jg(){for(var e=window,t=Ro();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ro(e.document)}return t}function Hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xb(e){var t=jg(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&kg(r.ownerDocument.documentElement,r)){if(n!==null&&Hd(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Kf(r,i);var o=Kf(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jb=Ir&&"documentMode"in document&&11>=document.documentMode,js=null,fu=null,$i=null,mu=!1;function Gf(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mu||js==null||js!==Ro(n)||(n=js,"selectionStart"in n&&Hd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$i&&ra($i,n)||($i=n,n=Mo(fu,"onSelect"),0<n.length&&(t=new Bd("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=js)))}function qa(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ss={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionend:qa("Transition","TransitionEnd")},rc={},Sg={};Ir&&(Sg=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function yl(e){if(rc[e])return rc[e];if(!Ss[e])return e;var t=Ss[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Sg)return rc[e]=t[r];return e}var Ng=yl("animationend"),_g=yl("animationiteration"),Eg=yl("animationstart"),Pg=yl("transitionend"),Cg=new Map,Xf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(e,t){Cg.set(e,t),as(t,[e])}for(var nc=0;nc<Xf.length;nc++){var sc=Xf[nc],Qb=sc.toLowerCase(),Yb=sc[0].toUpperCase()+sc.slice(1);Sn(Qb,"on"+Yb)}Sn(Ng,"onAnimationEnd");Sn(_g,"onAnimationIteration");Sn(Eg,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(Pg,"onTransitionEnd");Hs("onMouseEnter",["mouseout","mouseover"]);Hs("onMouseLeave",["mouseout","mouseover"]);Hs("onPointerEnter",["pointerout","pointerover"]);Hs("onPointerLeave",["pointerout","pointerover"]);as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));as("onBeforeInput",["compositionend","keypress","textInput","paste"]);as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ci));function Jf(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Qw(n,t,void 0,e),e.currentTarget=null}function Tg(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Jf(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Jf(s,l,u),i=c}}}if(Do)throw e=cu,Do=!1,cu=null,e}function ve(e,t){var r=t[vu];r===void 0&&(r=t[vu]=new Set);var n=e+"__bubble";r.has(n)||(Rg(t,e,2,!1),r.add(n))}function ic(e,t,r){var n=0;t&&(n|=4),Rg(r,e,n,t)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function na(e){if(!e[Ka]){e[Ka]=!0,M0.forEach(function(r){r!=="selectionchange"&&(Zb.has(r)||ic(r,!1,e),ic(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ka]||(t[Ka]=!0,ic("selectionchange",!1,t))}}function Rg(e,t,r,n){switch(mg(t)){case 1:var s=fb;break;case 4:s=mb;break;default:s=Fd}r=s.bind(null,t,r,e),s=void 0,!lu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ac(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Wn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}eg(function(){var u=i,d=$d(r),h=[];e:{var f=Cg.get(e);if(f!==void 0){var m=Bd,x=e;switch(e){case"keypress":if(yo(r)===0)break e;case"keydown":case"keyup":m=Cb;break;case"focusin":x="focus",m=Zl;break;case"focusout":x="blur",m=Zl;break;case"beforeblur":case"afterblur":m=Zl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Mf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Ab;break;case Ng:case _g:case Eg:m=wb;break;case Pg:m=Ib;break;case"scroll":m=pb;break;case"wheel":m=$b;break;case"copy":case"cut":case"paste":m=kb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ff}var w=(t&4)!==0,b=!w&&e==="scroll",y=w?f!==null?f+"Capture":null:f;w=[];for(var g=u,p;g!==null;){p=g;var k=p.stateNode;if(p.tag===5&&k!==null&&(p=k,y!==null&&(k=Qi(g,y),k!=null&&w.push(sa(g,k,p)))),b)break;g=g.return}0<w.length&&(f=new m(f,x,null,r,d),h.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==au&&(x=r.relatedTarget||r.fromElement)&&(Wn(x)||x[Lr]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=u,x=x?Wn(x):null,x!==null&&(b=os(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=u),m!==x)){if(w=Mf,k="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=Ff,k="onPointerLeave",y="onPointerEnter",g="pointer"),b=m==null?f:Ns(m),p=x==null?f:Ns(x),f=new w(k,g+"leave",m,r,d),f.target=b,f.relatedTarget=p,k=null,Wn(d)===u&&(w=new w(y,g+"enter",x,r,d),w.target=p,w.relatedTarget=b,k=w),b=k,m&&x)t:{for(w=m,y=x,g=0,p=w;p;p=hs(p))g++;for(p=0,k=y;k;k=hs(k))p++;for(;0<g-p;)w=hs(w),g--;for(;0<p-g;)y=hs(y),p--;for(;g--;){if(w===y||y!==null&&w===y.alternate)break t;w=hs(w),y=hs(y)}w=null}else w=null;m!==null&&Qf(h,f,m,w,!1),x!==null&&b!==null&&Qf(h,b,x,w,!0)}}e:{if(f=u?Ns(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=zb;else if(zf(f))if(wg)S=Kb;else{S=Hb;var N=Wb}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=qb);if(S&&(S=S(e,u))){vg(h,S,r,d);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&tu(f,"number",f.value)}switch(N=u?Ns(u):window,e){case"focusin":(zf(N)||N.contentEditable==="true")&&(js=N,fu=u,$i=null);break;case"focusout":$i=fu=js=null;break;case"mousedown":mu=!0;break;case"contextmenu":case"mouseup":case"dragend":mu=!1,Gf(h,r,d);break;case"selectionchange":if(Jb)break;case"keydown":case"keyup":Gf(h,r,d)}var _;if(Wd)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ks?yg(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(gg&&r.locale!=="ko"&&(ks||P!=="onCompositionStart"?P==="onCompositionEnd"&&ks&&(_=pg()):(on=d,Ud="value"in on?on.value:on.textContent,ks=!0)),N=Mo(u,P),0<N.length&&(P=new Vf(P,e,null,r,d),h.push({event:P,listeners:N}),_?P.data=_:(_=xg(r),_!==null&&(P.data=_)))),(_=Mb?Vb(e,r):Fb(e,r))&&(u=Mo(u,"onBeforeInput"),0<u.length&&(d=new Vf("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=_))}Tg(h,t)})}function sa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Mo(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qi(e,r),i!=null&&n.unshift(sa(e,i,s)),i=Qi(e,t),i!=null&&n.push(sa(e,i,s))),e=e.return}return n}function hs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qf(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Qi(r,i),c!=null&&o.unshift(sa(r,c,l))):s||(c=Qi(r,i),c!=null&&o.push(sa(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var ek=/\r\n?/g,tk=/\u0000|\uFFFD/g;function Yf(e){return(typeof e=="string"?e:""+e).replace(ek,`
`).replace(tk,"")}function Ga(e,t,r){if(t=Yf(t),Yf(e)!==t&&r)throw Error(D(425))}function Vo(){}var pu=null,gu=null;function yu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xu=typeof setTimeout=="function"?setTimeout:void 0,rk=typeof clearTimeout=="function"?clearTimeout:void 0,Zf=typeof Promise=="function"?Promise:void 0,nk=typeof queueMicrotask=="function"?queueMicrotask:typeof Zf<"u"?function(e){return Zf.resolve(null).then(e).catch(sk)}:xu;function sk(e){setTimeout(function(){throw e})}function oc(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ea(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ea(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function em(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ur="__reactFiber$"+si,ia="__reactProps$"+si,Lr="__reactContainer$"+si,vu="__reactEvents$"+si,ik="__reactListeners$"+si,ak="__reactHandles$"+si;function Wn(e){var t=e[ur];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Lr]||r[ur]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=em(e);e!==null;){if(r=e[ur])return r;e=em(e)}return t}e=r,r=e.parentNode}return null}function Pa(e){return e=e[ur]||e[Lr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ns(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function xl(e){return e[ia]||null}var wu=[],_s=-1;function Nn(e){return{current:e}}function we(e){0>_s||(e.current=wu[_s],wu[_s]=null,_s--)}function ye(e,t){_s++,wu[_s]=e.current,e.current=t}var wn={},ct=Nn(wn),kt=Nn(!1),ts=wn;function qs(e,t){var r=e.type.contextTypes;if(!r)return wn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function jt(e){return e=e.childContextTypes,e!=null}function Fo(){we(kt),we(ct)}function tm(e,t,r){if(ct.current!==wn)throw Error(D(168));ye(ct,t),ye(kt,r)}function Ag(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(D(108,Ww(e)||"Unknown",s));return Pe({},r,n)}function Uo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wn,ts=ct.current,ye(ct,e),ye(kt,kt.current),!0}function rm(e,t,r){var n=e.stateNode;if(!n)throw Error(D(169));r?(e=Ag(e,t,ts),n.__reactInternalMemoizedMergedChildContext=e,we(kt),we(ct),ye(ct,e)):we(kt),ye(kt,r)}var Cr=null,vl=!1,lc=!1;function Dg(e){Cr===null?Cr=[e]:Cr.push(e)}function ok(e){vl=!0,Dg(e)}function _n(){if(!lc&&Cr!==null){lc=!0;var e=0,t=he;try{var r=Cr;for(he=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Cr=null,vl=!1}catch(s){throw Cr!==null&&(Cr=Cr.slice(e+1)),sg(Od,_n),s}finally{he=t,lc=!1}}return null}var Es=[],Ps=0,Bo=null,zo=0,Mt=[],Vt=0,rs=null,Rr=1,Ar="";function Vn(e,t){Es[Ps++]=zo,Es[Ps++]=Bo,Bo=e,zo=t}function Ig(e,t,r){Mt[Vt++]=Rr,Mt[Vt++]=Ar,Mt[Vt++]=rs,rs=e;var n=Rr;e=Ar;var s=32-rr(n)-1;n&=~(1<<s),r+=1;var i=32-rr(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Rr=1<<32-rr(t)+s|r<<s|n,Ar=i+e}else Rr=1<<i|r<<s|n,Ar=e}function qd(e){e.return!==null&&(Vn(e,1),Ig(e,1,0))}function Kd(e){for(;e===Bo;)Bo=Es[--Ps],Es[Ps]=null,zo=Es[--Ps],Es[Ps]=null;for(;e===rs;)rs=Mt[--Vt],Mt[Vt]=null,Ar=Mt[--Vt],Mt[Vt]=null,Rr=Mt[--Vt],Mt[Vt]=null}var Pt=null,Et=null,be=!1,tr=null;function Lg(e,t){var r=Ut(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function nm(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pt=e,Et=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pt=e,Et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=rs!==null?{id:Rr,overflow:Ar}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ut(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Pt=e,Et=null,!0):!1;default:return!1}}function bu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ku(e){if(be){var t=Et;if(t){var r=t;if(!nm(e,t)){if(bu(e))throw Error(D(418));t=fn(r.nextSibling);var n=Pt;t&&nm(e,t)?Lg(n,r):(e.flags=e.flags&-4097|2,be=!1,Pt=e)}}else{if(bu(e))throw Error(D(418));e.flags=e.flags&-4097|2,be=!1,Pt=e}}}function sm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pt=e}function Xa(e){if(e!==Pt)return!1;if(!be)return sm(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!yu(e.type,e.memoizedProps)),t&&(t=Et)){if(bu(e))throw $g(),Error(D(418));for(;t;)Lg(e,t),t=fn(t.nextSibling)}if(sm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Et=fn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Et=null}}else Et=Pt?fn(e.stateNode.nextSibling):null;return!0}function $g(){for(var e=Et;e;)e=fn(e.nextSibling)}function Ks(){Et=Pt=null,be=!1}function Gd(e){tr===null?tr=[e]:tr.push(e)}var lk=Fr.ReactCurrentBatchConfig;function bi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(D(309));var n=r.stateNode}if(!n)throw Error(D(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!r._owner)throw Error(D(290,e))}return e}function Ja(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function im(e){var t=e._init;return t(e._payload)}function Og(e){function t(y,g){if(e){var p=y.deletions;p===null?(y.deletions=[g],y.flags|=16):p.push(g)}}function r(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function n(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=yn(y,g),y.index=0,y.sibling=null,y}function i(y,g,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<g?(y.flags|=2,g):p):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,g,p,k){return g===null||g.tag!==6?(g=pc(p,y.mode,k),g.return=y,g):(g=s(g,p),g.return=y,g)}function c(y,g,p,k){var S=p.type;return S===bs?d(y,g,p.props.children,k,p.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===tn&&im(S)===g.type)?(k=s(g,p.props),k.ref=bi(y,g,p),k.return=y,k):(k=So(p.type,p.key,p.props,null,y.mode,k),k.ref=bi(y,g,p),k.return=y,k)}function u(y,g,p,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==p.containerInfo||g.stateNode.implementation!==p.implementation?(g=gc(p,y.mode,k),g.return=y,g):(g=s(g,p.children||[]),g.return=y,g)}function d(y,g,p,k,S){return g===null||g.tag!==7?(g=Qn(p,y.mode,k,S),g.return=y,g):(g=s(g,p),g.return=y,g)}function h(y,g,p){if(typeof g=="string"&&g!==""||typeof g=="number")return g=pc(""+g,y.mode,p),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Va:return p=So(g.type,g.key,g.props,null,y.mode,p),p.ref=bi(y,null,g),p.return=y,p;case ws:return g=gc(g,y.mode,p),g.return=y,g;case tn:var k=g._init;return h(y,k(g._payload),p)}if(Ei(g)||gi(g))return g=Qn(g,y.mode,p,null),g.return=y,g;Ja(y,g)}return null}function f(y,g,p,k){var S=g!==null?g.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:l(y,g,""+p,k);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Va:return p.key===S?c(y,g,p,k):null;case ws:return p.key===S?u(y,g,p,k):null;case tn:return S=p._init,f(y,g,S(p._payload),k)}if(Ei(p)||gi(p))return S!==null?null:d(y,g,p,k,null);Ja(y,p)}return null}function m(y,g,p,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(p)||null,l(g,y,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Va:return y=y.get(k.key===null?p:k.key)||null,c(g,y,k,S);case ws:return y=y.get(k.key===null?p:k.key)||null,u(g,y,k,S);case tn:var N=k._init;return m(y,g,p,N(k._payload),S)}if(Ei(k)||gi(k))return y=y.get(p)||null,d(g,y,k,S,null);Ja(g,k)}return null}function x(y,g,p,k){for(var S=null,N=null,_=g,P=g=0,$=null;_!==null&&P<p.length;P++){_.index>P?($=_,_=null):$=_.sibling;var R=f(y,_,p[P],k);if(R===null){_===null&&(_=$);break}e&&_&&R.alternate===null&&t(y,_),g=i(R,g,P),N===null?S=R:N.sibling=R,N=R,_=$}if(P===p.length)return r(y,_),be&&Vn(y,P),S;if(_===null){for(;P<p.length;P++)_=h(y,p[P],k),_!==null&&(g=i(_,g,P),N===null?S=_:N.sibling=_,N=_);return be&&Vn(y,P),S}for(_=n(y,_);P<p.length;P++)$=m(_,y,P,p[P],k),$!==null&&(e&&$.alternate!==null&&_.delete($.key===null?P:$.key),g=i($,g,P),N===null?S=$:N.sibling=$,N=$);return e&&_.forEach(function(Y){return t(y,Y)}),be&&Vn(y,P),S}function w(y,g,p,k){var S=gi(p);if(typeof S!="function")throw Error(D(150));if(p=S.call(p),p==null)throw Error(D(151));for(var N=S=null,_=g,P=g=0,$=null,R=p.next();_!==null&&!R.done;P++,R=p.next()){_.index>P?($=_,_=null):$=_.sibling;var Y=f(y,_,R.value,k);if(Y===null){_===null&&(_=$);break}e&&_&&Y.alternate===null&&t(y,_),g=i(Y,g,P),N===null?S=Y:N.sibling=Y,N=Y,_=$}if(R.done)return r(y,_),be&&Vn(y,P),S;if(_===null){for(;!R.done;P++,R=p.next())R=h(y,R.value,k),R!==null&&(g=i(R,g,P),N===null?S=R:N.sibling=R,N=R);return be&&Vn(y,P),S}for(_=n(y,_);!R.done;P++,R=p.next())R=m(_,y,P,R.value,k),R!==null&&(e&&R.alternate!==null&&_.delete(R.key===null?P:R.key),g=i(R,g,P),N===null?S=R:N.sibling=R,N=R);return e&&_.forEach(function(Ce){return t(y,Ce)}),be&&Vn(y,P),S}function b(y,g,p,k){if(typeof p=="object"&&p!==null&&p.type===bs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Va:e:{for(var S=p.key,N=g;N!==null;){if(N.key===S){if(S=p.type,S===bs){if(N.tag===7){r(y,N.sibling),g=s(N,p.props.children),g.return=y,y=g;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===tn&&im(S)===N.type){r(y,N.sibling),g=s(N,p.props),g.ref=bi(y,N,p),g.return=y,y=g;break e}r(y,N);break}else t(y,N);N=N.sibling}p.type===bs?(g=Qn(p.props.children,y.mode,k,p.key),g.return=y,y=g):(k=So(p.type,p.key,p.props,null,y.mode,k),k.ref=bi(y,g,p),k.return=y,y=k)}return o(y);case ws:e:{for(N=p.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===p.containerInfo&&g.stateNode.implementation===p.implementation){r(y,g.sibling),g=s(g,p.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else t(y,g);g=g.sibling}g=gc(p,y.mode,k),g.return=y,y=g}return o(y);case tn:return N=p._init,b(y,g,N(p._payload),k)}if(Ei(p))return x(y,g,p,k);if(gi(p))return w(y,g,p,k);Ja(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,g!==null&&g.tag===6?(r(y,g.sibling),g=s(g,p),g.return=y,y=g):(r(y,g),g=pc(p,y.mode,k),g.return=y,y=g),o(y)):r(y,g)}return b}var Gs=Og(!0),Mg=Og(!1),Wo=Nn(null),Ho=null,Cs=null,Xd=null;function Jd(){Xd=Cs=Ho=null}function Qd(e){var t=Wo.current;we(Wo),e._currentValue=t}function ju(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Bs(e,t){Ho=e,Xd=Cs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function Wt(e){var t=e._currentValue;if(Xd!==e)if(e={context:e,memoizedValue:t,next:null},Cs===null){if(Ho===null)throw Error(D(308));Cs=e,Ho.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Hn=null;function Yd(e){Hn===null?Hn=[e]:Hn.push(e)}function Vg(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Yd(t)):(r.next=s.next,s.next=r),t.interleaved=r,$r(e,n)}function $r(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var rn=!1;function Zd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ue&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,$r(e,r)}return s=n.interleaved,s===null?(t.next=t,Yd(n)):(t.next=s.next,s.next=t),n.interleaved=t,$r(e,r)}function xo(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Md(e,r)}}function am(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qo(e,t,r,n){var s=e.updateQueue;rn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,w=l;switch(f=t,m=r,w.tag){case 1:if(x=w.payload,typeof x=="function"){h=x.call(m,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,f=typeof x=="function"?x.call(m,h,f):x,f==null)break e;h=Pe({},h,f);break e;case 2:rn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ss|=o,e.lanes=o,e.memoizedState=h}}function om(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(D(191,s));s.call(n)}}}var Ca={},mr=Nn(Ca),aa=Nn(Ca),oa=Nn(Ca);function qn(e){if(e===Ca)throw Error(D(174));return e}function eh(e,t){switch(ye(oa,t),ye(aa,e),ye(mr,Ca),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=nu(t,e)}we(mr),ye(mr,t)}function Xs(){we(mr),we(aa),we(oa)}function Ug(e){qn(oa.current);var t=qn(mr.current),r=nu(t,e.type);t!==r&&(ye(aa,e),ye(mr,r))}function th(e){aa.current===e&&(we(mr),we(aa))}var je=Nn(0);function Ko(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cc=[];function rh(){for(var e=0;e<cc.length;e++)cc[e]._workInProgressVersionPrimary=null;cc.length=0}var vo=Fr.ReactCurrentDispatcher,uc=Fr.ReactCurrentBatchConfig,ns=0,_e=null,He=null,Ge=null,Go=!1,Oi=!1,la=0,ck=0;function it(){throw Error(D(321))}function nh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ir(e[r],t[r]))return!1;return!0}function sh(e,t,r,n,s,i){if(ns=i,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vo.current=e===null||e.memoizedState===null?fk:mk,e=r(n,s),Oi){i=0;do{if(Oi=!1,la=0,25<=i)throw Error(D(301));i+=1,Ge=He=null,t.updateQueue=null,vo.current=pk,e=r(n,s)}while(Oi)}if(vo.current=Xo,t=He!==null&&He.next!==null,ns=0,Ge=He=_e=null,Go=!1,t)throw Error(D(300));return e}function ih(){var e=la!==0;return la=0,e}function lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?_e.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Ht(){if(He===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Ge===null?_e.memoizedState:Ge.next;if(t!==null)Ge=t,He=e;else{if(e===null)throw Error(D(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ge===null?_e.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function ca(e,t){return typeof t=="function"?t(e):t}function dc(e){var t=Ht(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=He,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ns&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,_e.lanes|=d,ss|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,ir(n,t.memoizedState)||(wt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,_e.lanes|=i,ss|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function hc(e){var t=Ht(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);ir(i,t.memoizedState)||(wt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Bg(){}function zg(e,t){var r=_e,n=Ht(),s=t(),i=!ir(n.memoizedState,s);if(i&&(n.memoizedState=s,wt=!0),n=n.queue,ah(qg.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ge!==null&&Ge.memoizedState.tag&1){if(r.flags|=2048,ua(9,Hg.bind(null,r,n,s,t),void 0,null),Je===null)throw Error(D(349));ns&30||Wg(r,t,s)}return s}function Wg(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Hg(e,t,r,n){t.value=r,t.getSnapshot=n,Kg(t)&&Gg(e)}function qg(e,t,r){return r(function(){Kg(t)&&Gg(e)})}function Kg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ir(e,r)}catch{return!0}}function Gg(e){var t=$r(e,1);t!==null&&nr(t,e,1,-1)}function lm(e){var t=lr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e},t.queue=e,e=e.dispatch=hk.bind(null,_e,e),[t.memoizedState,e]}function ua(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Xg(){return Ht().memoizedState}function wo(e,t,r,n){var s=lr();_e.flags|=e,s.memoizedState=ua(1|t,r,void 0,n===void 0?null:n)}function wl(e,t,r,n){var s=Ht();n=n===void 0?null:n;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,n!==null&&nh(n,o.deps)){s.memoizedState=ua(t,r,i,n);return}}_e.flags|=e,s.memoizedState=ua(1|t,r,i,n)}function cm(e,t){return wo(8390656,8,e,t)}function ah(e,t){return wl(2048,8,e,t)}function Jg(e,t){return wl(4,2,e,t)}function Qg(e,t){return wl(4,4,e,t)}function Yg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zg(e,t,r){return r=r!=null?r.concat([e]):null,wl(4,4,Yg.bind(null,t,e),r)}function oh(){}function ey(e,t){var r=Ht();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&nh(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ty(e,t){var r=Ht();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&nh(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function ry(e,t,r){return ns&21?(ir(r,t)||(r=og(),_e.lanes|=r,ss|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=r)}function uk(e,t){var r=he;he=r!==0&&4>r?r:4,e(!0);var n=uc.transition;uc.transition={};try{e(!1),t()}finally{he=r,uc.transition=n}}function ny(){return Ht().memoizedState}function dk(e,t,r){var n=gn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},sy(e))iy(t,r);else if(r=Vg(e,t,r,n),r!==null){var s=ft();nr(r,e,n,s),ay(r,t,n)}}function hk(e,t,r){var n=gn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(sy(e))iy(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,ir(l,o)){var c=t.interleaved;c===null?(s.next=s,Yd(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Vg(e,t,s,n),r!==null&&(s=ft(),nr(r,e,n,s),ay(r,t,n))}}function sy(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function iy(e,t){Oi=Go=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ay(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Md(e,r)}}var Xo={readContext:Wt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},fk={readContext:Wt,useCallback:function(e,t){return lr().memoizedState=[e,t===void 0?null:t],e},useContext:Wt,useEffect:cm,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,wo(4194308,4,Yg.bind(null,t,e),r)},useLayoutEffect:function(e,t){return wo(4194308,4,e,t)},useInsertionEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var r=lr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=lr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=dk.bind(null,_e,e),[n.memoizedState,e]},useRef:function(e){var t=lr();return e={current:e},t.memoizedState=e},useState:lm,useDebugValue:oh,useDeferredValue:function(e){return lr().memoizedState=e},useTransition:function(){var e=lm(!1),t=e[0];return e=uk.bind(null,e[1]),lr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=_e,s=lr();if(be){if(r===void 0)throw Error(D(407));r=r()}else{if(r=t(),Je===null)throw Error(D(349));ns&30||Wg(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,cm(qg.bind(null,n,i,e),[e]),n.flags|=2048,ua(9,Hg.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=lr(),t=Je.identifierPrefix;if(be){var r=Ar,n=Rr;r=(n&~(1<<32-rr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=la++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ck++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mk={readContext:Wt,useCallback:ey,useContext:Wt,useEffect:ah,useImperativeHandle:Zg,useInsertionEffect:Jg,useLayoutEffect:Qg,useMemo:ty,useReducer:dc,useRef:Xg,useState:function(){return dc(ca)},useDebugValue:oh,useDeferredValue:function(e){var t=Ht();return ry(t,He.memoizedState,e)},useTransition:function(){var e=dc(ca)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Bg,useSyncExternalStore:zg,useId:ny,unstable_isNewReconciler:!1},pk={readContext:Wt,useCallback:ey,useContext:Wt,useEffect:ah,useImperativeHandle:Zg,useInsertionEffect:Jg,useLayoutEffect:Qg,useMemo:ty,useReducer:hc,useRef:Xg,useState:function(){return hc(ca)},useDebugValue:oh,useDeferredValue:function(e){var t=Ht();return He===null?t.memoizedState=e:ry(t,He.memoizedState,e)},useTransition:function(){var e=hc(ca)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Bg,useSyncExternalStore:zg,useId:ny,unstable_isNewReconciler:!1};function Qt(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Su(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var bl={isMounted:function(e){return(e=e._reactInternals)?os(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ft(),s=gn(e),i=Dr(n,s);i.payload=t,r!=null&&(i.callback=r),t=mn(e,i,s),t!==null&&(nr(t,e,s,n),xo(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ft(),s=gn(e),i=Dr(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=mn(e,i,s),t!==null&&(nr(t,e,s,n),xo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ft(),n=gn(e),s=Dr(r,n);s.tag=2,t!=null&&(s.callback=t),t=mn(e,s,n),t!==null&&(nr(t,e,n,r),xo(t,e,n))}};function um(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!ra(r,n)||!ra(s,i):!0}function oy(e,t,r){var n=!1,s=wn,i=t.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=jt(t)?ts:ct.current,n=t.contextTypes,i=(n=n!=null)?qs(e,s):wn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function dm(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&bl.enqueueReplaceState(t,t.state,null)}function Nu(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Zd(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=jt(t)?ts:ct.current,s.context=qs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Su(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&bl.enqueueReplaceState(s,s.state,null),qo(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Js(e,t){try{var r="",n=t;do r+=zw(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function fc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function _u(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var gk=typeof WeakMap=="function"?WeakMap:Map;function ly(e,t,r){r=Dr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Qo||(Qo=!0,$u=n),_u(e,t)},r}function cy(e,t,r){r=Dr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){_u(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){_u(e,t),typeof n!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function hm(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new gk;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Tk.bind(null,e,t,r),t.then(e,e))}function fm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mm(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Dr(-1,1),t.tag=2,mn(r,t,1))),r.lanes|=1),e)}var yk=Fr.ReactCurrentOwner,wt=!1;function dt(e,t,r,n){t.child=e===null?Mg(t,null,r,n):Gs(t,e.child,r,n)}function pm(e,t,r,n,s){r=r.render;var i=t.ref;return Bs(t,s),n=sh(e,t,r,n,i,s),r=ih(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Or(e,t,s)):(be&&r&&qd(t),t.flags|=1,dt(e,t,n,s),t.child)}function gm(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!ph(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,uy(e,t,i,n,s)):(e=So(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ra,r(o,n)&&e.ref===t.ref)return Or(e,t,s)}return t.flags|=1,e=yn(i,n),e.ref=t.ref,e.return=t,t.child=e}function uy(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ra(i,n)&&e.ref===t.ref)if(wt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,Or(e,t,s)}return Eu(e,t,r,n,s)}function dy(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Rs,_t),_t|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ye(Rs,_t),_t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ye(Rs,_t),_t|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ye(Rs,_t),_t|=n;return dt(e,t,s,r),t.child}function hy(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Eu(e,t,r,n,s){var i=jt(r)?ts:ct.current;return i=qs(t,i),Bs(t,s),r=sh(e,t,r,n,i,s),n=ih(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Or(e,t,s)):(be&&n&&qd(t),t.flags|=1,dt(e,t,r,s),t.child)}function ym(e,t,r,n,s){if(jt(r)){var i=!0;Uo(t)}else i=!1;if(Bs(t,s),t.stateNode===null)bo(e,t),oy(t,r,n),Nu(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Wt(u):(u=jt(r)?ts:ct.current,u=qs(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&dm(t,o,n,u),rn=!1;var f=t.memoizedState;o.state=f,qo(t,n,o,s),c=t.memoizedState,l!==n||f!==c||kt.current||rn?(typeof d=="function"&&(Su(t,r,d,n),c=t.memoizedState),(l=rn||um(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Fg(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Qt(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Wt(c):(c=jt(r)?ts:ct.current,c=qs(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&dm(t,o,n,c),rn=!1,f=t.memoizedState,o.state=f,qo(t,n,o,s);var x=t.memoizedState;l!==h||f!==x||kt.current||rn?(typeof m=="function"&&(Su(t,r,m,n),x=t.memoizedState),(u=rn||um(t,r,u,n,f,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Pu(e,t,r,n,i,s)}function Pu(e,t,r,n,s,i){hy(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&rm(t,r,!1),Or(e,t,i);n=t.stateNode,yk.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Gs(t,e.child,null,i),t.child=Gs(t,null,l,i)):dt(e,t,l,i),t.memoizedState=n.state,s&&rm(t,r,!0),t.child}function fy(e){var t=e.stateNode;t.pendingContext?tm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tm(e,t.context,!1),eh(e,t.containerInfo)}function xm(e,t,r,n,s){return Ks(),Gd(s),t.flags|=256,dt(e,t,r,n),t.child}var Cu={dehydrated:null,treeContext:null,retryLane:0};function Tu(e){return{baseLanes:e,cachePool:null,transitions:null}}function my(e,t,r){var n=t.pendingProps,s=je.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ye(je,s&1),e===null)return ku(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Sl(o,n,0,null),e=Qn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Tu(r),t.memoizedState=Cu,e):lh(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return xk(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=yn(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=yn(l,i):(i=Qn(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Tu(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Cu,n}return i=e.child,e=i.sibling,n=yn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function lh(e,t){return t=Sl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qa(e,t,r,n){return n!==null&&Gd(n),Gs(t,e.child,null,r),e=lh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xk(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=fc(Error(D(422))),Qa(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Sl({mode:"visible",children:n.children},s,0,null),i=Qn(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Gs(t,e.child,null,o),t.child.memoizedState=Tu(o),t.memoizedState=Cu,i);if(!(t.mode&1))return Qa(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(D(419)),n=fc(i,n,void 0),Qa(e,t,o,n)}if(l=(o&e.childLanes)!==0,wt||l){if(n=Je,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$r(e,s),nr(n,e,s,-1))}return mh(),n=fc(Error(D(421))),Qa(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Rk.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Et=fn(s.nextSibling),Pt=t,be=!0,tr=null,e!==null&&(Mt[Vt++]=Rr,Mt[Vt++]=Ar,Mt[Vt++]=rs,Rr=e.id,Ar=e.overflow,rs=t),t=lh(t,n.children),t.flags|=4096,t)}function vm(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ju(e.return,t,r)}function mc(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function py(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(dt(e,t,n.children,r),n=je.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vm(e,r,t);else if(e.tag===19)vm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ye(je,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ko(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),mc(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ko(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}mc(t,!0,r,null,i);break;case"together":mc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Or(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ss|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,r=yn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=yn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function vk(e,t,r){switch(t.tag){case 3:fy(t),Ks();break;case 5:Ug(t);break;case 1:jt(t.type)&&Uo(t);break;case 4:eh(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ye(Wo,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ye(je,je.current&1),t.flags|=128,null):r&t.child.childLanes?my(e,t,r):(ye(je,je.current&1),e=Or(e,t,r),e!==null?e.sibling:null);ye(je,je.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return py(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(je,je.current),n)break;return null;case 22:case 23:return t.lanes=0,dy(e,t,r)}return Or(e,t,r)}var gy,Ru,yy,xy;gy=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ru=function(){};yy=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,qn(mr.current);var i=null;switch(r){case"input":s=Zc(e,s),n=Zc(e,n),i=[];break;case"select":s=Pe({},s,{value:void 0}),n=Pe({},n,{value:void 0}),i=[];break;case"textarea":s=ru(e,s),n=ru(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Vo)}su(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ve("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};xy=function(e,t,r,n){r!==n&&(t.flags|=4)};function ki(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function wk(e,t,r){var n=t.pendingProps;switch(Kd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return jt(t.type)&&Fo(),at(t),null;case 3:return n=t.stateNode,Xs(),we(kt),we(ct),rh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tr!==null&&(Vu(tr),tr=null))),Ru(e,t),at(t),null;case 5:th(t);var s=qn(oa.current);if(r=t.type,e!==null&&t.stateNode!=null)yy(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(D(166));return at(t),null}if(e=qn(mr.current),Xa(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ur]=t,n[ia]=i,e=(t.mode&1)!==0,r){case"dialog":ve("cancel",n),ve("close",n);break;case"iframe":case"object":case"embed":ve("load",n);break;case"video":case"audio":for(s=0;s<Ci.length;s++)ve(Ci[s],n);break;case"source":ve("error",n);break;case"img":case"image":case"link":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"input":Pf(n,i),ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ve("invalid",n);break;case"textarea":Tf(n,i),ve("invalid",n)}su(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ga(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ga(n.textContent,l,e),s=["children",""+l]):Xi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ve("scroll",n)}switch(r){case"input":Fa(n),Cf(n,i,!0);break;case"textarea":Fa(n),Rf(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Vo)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=q0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ur]=t,e[ia]=n,gy(e,t,!1,!1),t.stateNode=e;e:{switch(o=iu(r,n),r){case"dialog":ve("cancel",e),ve("close",e),s=n;break;case"iframe":case"object":case"embed":ve("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ci.length;s++)ve(Ci[s],e);s=n;break;case"source":ve("error",e),s=n;break;case"img":case"image":case"link":ve("error",e),ve("load",e),s=n;break;case"details":ve("toggle",e),s=n;break;case"input":Pf(e,n),s=Zc(e,n),ve("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Pe({},n,{value:void 0}),ve("invalid",e);break;case"textarea":Tf(e,n),s=ru(e,n),ve("invalid",e);break;default:s=n}su(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?X0(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&K0(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ji(e,c):typeof c=="number"&&Ji(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ve("scroll",e):c!=null&&Ad(e,i,c,o))}switch(r){case"input":Fa(e),Cf(e,n,!1);break;case"textarea":Fa(e),Rf(e);break;case"option":n.value!=null&&e.setAttribute("value",""+vn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ms(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ms(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Vo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)xy(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(D(166));if(r=qn(oa.current),qn(mr.current),Xa(t)){if(n=t.stateNode,r=t.memoizedProps,n[ur]=t,(i=n.nodeValue!==r)&&(e=Pt,e!==null))switch(e.tag){case 3:Ga(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ga(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ur]=t,t.stateNode=n}return at(t),null;case 13:if(we(je),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&Et!==null&&t.mode&1&&!(t.flags&128))$g(),Ks(),t.flags|=98560,i=!1;else if(i=Xa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[ur]=t}else Ks(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;at(t),i=!1}else tr!==null&&(Vu(tr),tr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?qe===0&&(qe=3):mh())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return Xs(),Ru(e,t),e===null&&na(t.stateNode.containerInfo),at(t),null;case 10:return Qd(t.type._context),at(t),null;case 17:return jt(t.type)&&Fo(),at(t),null;case 19:if(we(je),i=t.memoizedState,i===null)return at(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)ki(i,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ko(e),o!==null){for(t.flags|=128,ki(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ye(je,je.current&1|2),t.child}e=e.sibling}i.tail!==null&&$e()>Qs&&(t.flags|=128,n=!0,ki(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ko(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ki(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return at(t),null}else 2*$e()-i.renderingStartTime>Qs&&r!==1073741824&&(t.flags|=128,n=!0,ki(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,r=je.current,ye(je,n?r&1|2:r&1),t):(at(t),null);case 22:case 23:return fh(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?_t&1073741824&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function bk(e,t){switch(Kd(t),t.tag){case 1:return jt(t.type)&&Fo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xs(),we(kt),we(ct),rh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return th(t),null;case 13:if(we(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Ks()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(je),null;case 4:return Xs(),null;case 10:return Qd(t.type._context),null;case 22:case 23:return fh(),null;case 24:return null;default:return null}}var Ya=!1,ot=!1,kk=typeof WeakSet=="function"?WeakSet:Set,B=null;function Ts(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){De(e,t,n)}else r.current=null}function Au(e,t,r){try{r()}catch(n){De(e,t,n)}}var wm=!1;function jk(e,t){if(pu=$o,e=jg(),Hd(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(gu={focusedElem:e,selectionRange:r},$o=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,b=x.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?w:Qt(t.type,w),b);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(k){De(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return x=wm,wm=!1,x}function Mi(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Au(t,r,i)}s=s.next}while(s!==n)}}function kl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Du(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function vy(e){var t=e.alternate;t!==null&&(e.alternate=null,vy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ur],delete t[ia],delete t[vu],delete t[ik],delete t[ak])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wy(e){return e.tag===5||e.tag===3||e.tag===4}function bm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Iu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Vo));else if(n!==4&&(e=e.child,e!==null))for(Iu(e,t,r),e=e.sibling;e!==null;)Iu(e,t,r),e=e.sibling}function Lu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Lu(e,t,r),e=e.sibling;e!==null;)Lu(e,t,r),e=e.sibling}var Ye=null,Zt=!1;function Xr(e,t,r){for(r=r.child;r!==null;)by(e,t,r),r=r.sibling}function by(e,t,r){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(ml,r)}catch{}switch(r.tag){case 5:ot||Ts(r,t);case 6:var n=Ye,s=Zt;Ye=null,Xr(e,t,r),Ye=n,Zt=s,Ye!==null&&(Zt?(e=Ye,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ye.removeChild(r.stateNode));break;case 18:Ye!==null&&(Zt?(e=Ye,r=r.stateNode,e.nodeType===8?oc(e.parentNode,r):e.nodeType===1&&oc(e,r),ea(e)):oc(Ye,r.stateNode));break;case 4:n=Ye,s=Zt,Ye=r.stateNode.containerInfo,Zt=!0,Xr(e,t,r),Ye=n,Zt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Au(r,t,o),s=s.next}while(s!==n)}Xr(e,t,r);break;case 1:if(!ot&&(Ts(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){De(r,t,l)}Xr(e,t,r);break;case 21:Xr(e,t,r);break;case 22:r.mode&1?(ot=(n=ot)||r.memoizedState!==null,Xr(e,t,r),ot=n):Xr(e,t,r);break;default:Xr(e,t,r)}}function km(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new kk),t.forEach(function(n){var s=Ak.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Gt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,Zt=!1;break e;case 3:Ye=l.stateNode.containerInfo,Zt=!0;break e;case 4:Ye=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(Ye===null)throw Error(D(160));by(i,o,s),Ye=null,Zt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){De(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ky(t,e),t=t.sibling}function ky(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),or(e),n&4){try{Mi(3,e,e.return),kl(3,e)}catch(w){De(e,e.return,w)}try{Mi(5,e,e.return)}catch(w){De(e,e.return,w)}}break;case 1:Gt(t,e),or(e),n&512&&r!==null&&Ts(r,r.return);break;case 5:if(Gt(t,e),or(e),n&512&&r!==null&&Ts(r,r.return),e.flags&32){var s=e.stateNode;try{Ji(s,"")}catch(w){De(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&W0(s,i),iu(l,o);var u=iu(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?X0(s,h):d==="dangerouslySetInnerHTML"?K0(s,h):d==="children"?Ji(s,h):Ad(s,d,h,u)}switch(l){case"input":eu(s,i);break;case"textarea":H0(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ms(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ms(s,!!i.multiple,i.defaultValue,!0):Ms(s,!!i.multiple,i.multiple?[]:"",!1))}s[ia]=i}catch(w){De(e,e.return,w)}}break;case 6:if(Gt(t,e),or(e),n&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){De(e,e.return,w)}}break;case 3:if(Gt(t,e),or(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ea(t.containerInfo)}catch(w){De(e,e.return,w)}break;case 4:Gt(t,e),or(e);break;case 13:Gt(t,e),or(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dh=$e())),n&4&&km(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ot=(u=ot)||d,Gt(t,e),ot=u):Gt(t,e),or(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(B=e,d=e.child;d!==null;){for(h=B=d;B!==null;){switch(f=B,m=f.child,f.tag){case 0:case 11:case 14:case 15:Mi(4,f,f.return);break;case 1:Ts(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){De(n,r,w)}}break;case 5:Ts(f,f.return);break;case 22:if(f.memoizedState!==null){Sm(h);continue}}m!==null?(m.return=f,B=m):Sm(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=G0("display",o))}catch(w){De(e,e.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){De(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Gt(t,e),or(e),n&4&&km(e);break;case 21:break;default:Gt(t,e),or(e)}}function or(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(wy(r)){var n=r;break e}r=r.return}throw Error(D(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ji(s,""),n.flags&=-33);var i=bm(e);Lu(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=bm(e);Iu(e,l,o);break;default:throw Error(D(161))}}catch(c){De(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Sk(e,t,r){B=e,jy(e)}function jy(e,t,r){for(var n=(e.mode&1)!==0;B!==null;){var s=B,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ya;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ot;l=Ya;var u=ot;if(Ya=o,(ot=c)&&!u)for(B=s;B!==null;)o=B,c=o.child,o.tag===22&&o.memoizedState!==null?Nm(s):c!==null?(c.return=o,B=c):Nm(s);for(;i!==null;)B=i,jy(i),i=i.sibling;B=s,Ya=l,ot=u}jm(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,B=i):jm(e)}}function jm(e){for(;B!==null;){var t=B;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ot||kl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ot)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Qt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&om(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}om(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ea(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}ot||t.flags&512&&Du(t)}catch(f){De(t,t.return,f)}}if(t===e){B=null;break}if(r=t.sibling,r!==null){r.return=t.return,B=r;break}B=t.return}}function Sm(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var r=t.sibling;if(r!==null){r.return=t.return,B=r;break}B=t.return}}function Nm(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{kl(4,t)}catch(c){De(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){De(t,s,c)}}var i=t.return;try{Du(t)}catch(c){De(t,i,c)}break;case 5:var o=t.return;try{Du(t)}catch(c){De(t,o,c)}}}catch(c){De(t,t.return,c)}if(t===e){B=null;break}var l=t.sibling;if(l!==null){l.return=t.return,B=l;break}B=t.return}}var Nk=Math.ceil,Jo=Fr.ReactCurrentDispatcher,ch=Fr.ReactCurrentOwner,Bt=Fr.ReactCurrentBatchConfig,ue=0,Je=null,Ve=null,et=0,_t=0,Rs=Nn(0),qe=0,da=null,ss=0,jl=0,uh=0,Vi=null,xt=null,dh=0,Qs=1/0,Er=null,Qo=!1,$u=null,pn=null,Za=!1,ln=null,Yo=0,Fi=0,Ou=null,ko=-1,jo=0;function ft(){return ue&6?$e():ko!==-1?ko:ko=$e()}function gn(e){return e.mode&1?ue&2&&et!==0?et&-et:lk.transition!==null?(jo===0&&(jo=og()),jo):(e=he,e!==0||(e=window.event,e=e===void 0?16:mg(e.type)),e):1}function nr(e,t,r,n){if(50<Fi)throw Fi=0,Ou=null,Error(D(185));_a(e,r,n),(!(ue&2)||e!==Je)&&(e===Je&&(!(ue&2)&&(jl|=r),qe===4&&sn(e,et)),St(e,n),r===1&&ue===0&&!(t.mode&1)&&(Qs=$e()+500,vl&&_n()))}function St(e,t){var r=e.callbackNode;lb(e,t);var n=Lo(e,e===Je?et:0);if(n===0)r!==null&&If(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&If(r),t===1)e.tag===0?ok(_m.bind(null,e)):Dg(_m.bind(null,e)),nk(function(){!(ue&6)&&_n()}),r=null;else{switch(lg(n)){case 1:r=Od;break;case 4:r=ig;break;case 16:r=Io;break;case 536870912:r=ag;break;default:r=Io}r=Ry(r,Sy.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Sy(e,t){if(ko=-1,jo=0,ue&6)throw Error(D(327));var r=e.callbackNode;if(zs()&&e.callbackNode!==r)return null;var n=Lo(e,e===Je?et:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Zo(e,n);else{t=n;var s=ue;ue|=2;var i=_y();(Je!==e||et!==t)&&(Er=null,Qs=$e()+500,Jn(e,t));do try{Pk();break}catch(l){Ny(e,l)}while(!0);Jd(),Jo.current=i,ue=s,Ve!==null?t=0:(Je=null,et=0,t=qe)}if(t!==0){if(t===2&&(s=uu(e),s!==0&&(n=s,t=Mu(e,s))),t===1)throw r=da,Jn(e,0),sn(e,n),St(e,$e()),r;if(t===6)sn(e,n);else{if(s=e.current.alternate,!(n&30)&&!_k(s)&&(t=Zo(e,n),t===2&&(i=uu(e),i!==0&&(n=i,t=Mu(e,i))),t===1))throw r=da,Jn(e,0),sn(e,n),St(e,$e()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(D(345));case 2:Fn(e,xt,Er);break;case 3:if(sn(e,n),(n&130023424)===n&&(t=dh+500-$e(),10<t)){if(Lo(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){ft(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=xu(Fn.bind(null,e,xt,Er),t);break}Fn(e,xt,Er);break;case 4:if(sn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-rr(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=$e()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nk(n/1960))-n,10<n){e.timeoutHandle=xu(Fn.bind(null,e,xt,Er),n);break}Fn(e,xt,Er);break;case 5:Fn(e,xt,Er);break;default:throw Error(D(329))}}}return St(e,$e()),e.callbackNode===r?Sy.bind(null,e):null}function Mu(e,t){var r=Vi;return e.current.memoizedState.isDehydrated&&(Jn(e,t).flags|=256),e=Zo(e,t),e!==2&&(t=xt,xt=r,t!==null&&Vu(t)),e}function Vu(e){xt===null?xt=e:xt.push.apply(xt,e)}function _k(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ir(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t){for(t&=~uh,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-rr(t),n=1<<r;e[r]=-1,t&=~n}}function _m(e){if(ue&6)throw Error(D(327));zs();var t=Lo(e,0);if(!(t&1))return St(e,$e()),null;var r=Zo(e,t);if(e.tag!==0&&r===2){var n=uu(e);n!==0&&(t=n,r=Mu(e,n))}if(r===1)throw r=da,Jn(e,0),sn(e,t),St(e,$e()),r;if(r===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,xt,Er),St(e,$e()),null}function hh(e,t){var r=ue;ue|=1;try{return e(t)}finally{ue=r,ue===0&&(Qs=$e()+500,vl&&_n())}}function is(e){ln!==null&&ln.tag===0&&!(ue&6)&&zs();var t=ue;ue|=1;var r=Bt.transition,n=he;try{if(Bt.transition=null,he=1,e)return e()}finally{he=n,Bt.transition=r,ue=t,!(ue&6)&&_n()}}function fh(){_t=Rs.current,we(Rs)}function Jn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rk(r)),Ve!==null)for(r=Ve.return;r!==null;){var n=r;switch(Kd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Fo();break;case 3:Xs(),we(kt),we(ct),rh();break;case 5:th(n);break;case 4:Xs();break;case 13:we(je);break;case 19:we(je);break;case 10:Qd(n.type._context);break;case 22:case 23:fh()}r=r.return}if(Je=e,Ve=e=yn(e.current,null),et=_t=t,qe=0,da=null,uh=jl=ss=0,xt=Vi=null,Hn!==null){for(t=0;t<Hn.length;t++)if(r=Hn[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Hn=null}return e}function Ny(e,t){do{var r=Ve;try{if(Jd(),vo.current=Xo,Go){for(var n=_e.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Go=!1}if(ns=0,Ge=He=_e=null,Oi=!1,la=0,ch.current=null,r===null||r.return===null){qe=1,da=t,Ve=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=fm(o);if(m!==null){m.flags&=-257,mm(m,o,l,i,t),m.mode&1&&hm(i,u,t),t=m,c=u;var x=t.updateQueue;if(x===null){var w=new Set;w.add(c),t.updateQueue=w}else x.add(c);break e}else{if(!(t&1)){hm(i,u,t),mh();break e}c=Error(D(426))}}else if(be&&l.mode&1){var b=fm(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),mm(b,o,l,i,t),Gd(Js(c,l));break e}}i=c=Js(c,l),qe!==4&&(qe=2),Vi===null?Vi=[i]:Vi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=ly(i,c,t);am(i,y);break e;case 1:l=c;var g=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(pn===null||!pn.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=cy(i,l,t);am(i,k);break e}}i=i.return}while(i!==null)}Py(r)}catch(S){t=S,Ve===r&&r!==null&&(Ve=r=r.return);continue}break}while(!0)}function _y(){var e=Jo.current;return Jo.current=Xo,e===null?Xo:e}function mh(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||!(ss&268435455)&&!(jl&268435455)||sn(Je,et)}function Zo(e,t){var r=ue;ue|=2;var n=_y();(Je!==e||et!==t)&&(Er=null,Jn(e,t));do try{Ek();break}catch(s){Ny(e,s)}while(!0);if(Jd(),ue=r,Jo.current=n,Ve!==null)throw Error(D(261));return Je=null,et=0,qe}function Ek(){for(;Ve!==null;)Ey(Ve)}function Pk(){for(;Ve!==null&&!Zw();)Ey(Ve)}function Ey(e){var t=Ty(e.alternate,e,_t);e.memoizedProps=e.pendingProps,t===null?Py(e):Ve=t,ch.current=null}function Py(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=bk(r,t),r!==null){r.flags&=32767,Ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Ve=null;return}}else if(r=wk(r,t,_t),r!==null){Ve=r;return}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);qe===0&&(qe=5)}function Fn(e,t,r){var n=he,s=Bt.transition;try{Bt.transition=null,he=1,Ck(e,t,r,n)}finally{Bt.transition=s,he=n}return null}function Ck(e,t,r,n){do zs();while(ln!==null);if(ue&6)throw Error(D(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(cb(e,i),e===Je&&(Ve=Je=null,et=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Za||(Za=!0,Ry(Io,function(){return zs(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Bt.transition,Bt.transition=null;var o=he;he=1;var l=ue;ue|=4,ch.current=null,jk(e,r),ky(r,e),Xb(gu),$o=!!pu,gu=pu=null,e.current=r,Sk(r),eb(),ue=l,he=o,Bt.transition=i}else e.current=r;if(Za&&(Za=!1,ln=e,Yo=s),i=e.pendingLanes,i===0&&(pn=null),nb(r.stateNode),St(e,$e()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Qo)throw Qo=!1,e=$u,$u=null,e;return Yo&1&&e.tag!==0&&zs(),i=e.pendingLanes,i&1?e===Ou?Fi++:(Fi=0,Ou=e):Fi=0,_n(),null}function zs(){if(ln!==null){var e=lg(Yo),t=Bt.transition,r=he;try{if(Bt.transition=null,he=16>e?16:e,ln===null)var n=!1;else{if(e=ln,ln=null,Yo=0,ue&6)throw Error(D(331));var s=ue;for(ue|=4,B=e.current;B!==null;){var i=B,o=i.child;if(B.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(B=u;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:Mi(8,d,i)}var h=d.child;if(h!==null)h.return=d,B=h;else for(;B!==null;){d=B;var f=d.sibling,m=d.return;if(vy(d),d===u){B=null;break}if(f!==null){f.return=m,B=f;break}B=m}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}B=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,B=o;else e:for(;B!==null;){if(i=B,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,B=y;break e}B=i.return}}var g=e.current;for(B=g;B!==null;){o=B;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,B=p;else e:for(o=g;B!==null;){if(l=B,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kl(9,l)}}catch(S){De(l,l.return,S)}if(l===o){B=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,B=k;break e}B=l.return}}if(ue=s,_n(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(ml,e)}catch{}n=!0}return n}finally{he=r,Bt.transition=t}}return!1}function Em(e,t,r){t=Js(r,t),t=ly(e,t,1),e=mn(e,t,1),t=ft(),e!==null&&(_a(e,1,t),St(e,t))}function De(e,t,r){if(e.tag===3)Em(e,e,r);else for(;t!==null;){if(t.tag===3){Em(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(pn===null||!pn.has(n))){e=Js(r,e),e=cy(t,e,1),t=mn(t,e,1),e=ft(),t!==null&&(_a(t,1,e),St(t,e));break}}t=t.return}}function Tk(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&r,Je===e&&(et&r)===r&&(qe===4||qe===3&&(et&130023424)===et&&500>$e()-dh?Jn(e,0):uh|=r),St(e,t)}function Cy(e,t){t===0&&(e.mode&1?(t=za,za<<=1,!(za&130023424)&&(za=4194304)):t=1);var r=ft();e=$r(e,t),e!==null&&(_a(e,t,r),St(e,r))}function Rk(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Cy(e,r)}function Ak(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(D(314))}n!==null&&n.delete(t),Cy(e,r)}var Ty;Ty=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)wt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return wt=!1,vk(e,t,r);wt=!!(e.flags&131072)}else wt=!1,be&&t.flags&1048576&&Ig(t,zo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;bo(e,t),e=t.pendingProps;var s=qs(t,ct.current);Bs(t,r),s=sh(null,t,n,e,s,r);var i=ih();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(n)?(i=!0,Uo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zd(t),s.updater=bl,t.stateNode=s,s._reactInternals=t,Nu(t,n,e,r),t=Pu(null,t,n,!0,i,r)):(t.tag=0,be&&i&&qd(t),dt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(bo(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Ik(n),e=Qt(n,e),s){case 0:t=Eu(null,t,n,e,r);break e;case 1:t=ym(null,t,n,e,r);break e;case 11:t=pm(null,t,n,e,r);break e;case 14:t=gm(null,t,n,Qt(n.type,e),r);break e}throw Error(D(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qt(n,s),Eu(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qt(n,s),ym(e,t,n,s,r);case 3:e:{if(fy(t),e===null)throw Error(D(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Fg(e,t),qo(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Js(Error(D(423)),t),t=xm(e,t,n,r,s);break e}else if(n!==s){s=Js(Error(D(424)),t),t=xm(e,t,n,r,s);break e}else for(Et=fn(t.stateNode.containerInfo.firstChild),Pt=t,be=!0,tr=null,r=Mg(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ks(),n===s){t=Or(e,t,r);break e}dt(e,t,n,r)}t=t.child}return t;case 5:return Ug(t),e===null&&ku(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,yu(n,s)?o=null:i!==null&&yu(n,i)&&(t.flags|=32),hy(e,t),dt(e,t,o,r),t.child;case 6:return e===null&&ku(t),null;case 13:return my(e,t,r);case 4:return eh(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Gs(t,null,n,r):dt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qt(n,s),pm(e,t,n,s,r);case 7:return dt(e,t,t.pendingProps,r),t.child;case 8:return dt(e,t,t.pendingProps.children,r),t.child;case 12:return dt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ye(Wo,n._currentValue),n._currentValue=o,i!==null)if(ir(i.value,o)){if(i.children===s.children&&!kt.current){t=Or(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Dr(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ju(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),ju(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Bs(t,r),s=Wt(s),n=n(s),t.flags|=1,dt(e,t,n,r),t.child;case 14:return n=t.type,s=Qt(n,t.pendingProps),s=Qt(n.type,s),gm(e,t,n,s,r);case 15:return uy(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qt(n,s),bo(e,t),t.tag=1,jt(n)?(e=!0,Uo(t)):e=!1,Bs(t,r),oy(t,n,s),Nu(t,n,s,r),Pu(null,t,n,!0,e,r);case 19:return py(e,t,r);case 22:return dy(e,t,r)}throw Error(D(156,t.tag))};function Ry(e,t){return sg(e,t)}function Dk(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,r,n){return new Dk(e,t,r,n)}function ph(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ik(e){if(typeof e=="function")return ph(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Id)return 11;if(e===Ld)return 14}return 2}function yn(e,t){var r=e.alternate;return r===null?(r=Ut(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function So(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")ph(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case bs:return Qn(r.children,s,i,t);case Dd:o=8,s|=8;break;case Xc:return e=Ut(12,r,t,s|2),e.elementType=Xc,e.lanes=i,e;case Jc:return e=Ut(13,r,t,s),e.elementType=Jc,e.lanes=i,e;case Qc:return e=Ut(19,r,t,s),e.elementType=Qc,e.lanes=i,e;case U0:return Sl(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V0:o=10;break e;case F0:o=9;break e;case Id:o=11;break e;case Ld:o=14;break e;case tn:o=16,n=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Ut(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Qn(e,t,r,n){return e=Ut(7,e,n,t),e.lanes=r,e}function Sl(e,t,r,n){return e=Ut(22,e,n,t),e.elementType=U0,e.lanes=r,e.stateNode={isHidden:!1},e}function pc(e,t,r){return e=Ut(6,e,null,t),e.lanes=r,e}function gc(e,t,r){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lk(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jl(0),this.expirationTimes=Jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gh(e,t,r,n,s,i,o,l,c){return e=new Lk(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ut(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zd(i),e}function $k(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Ay(e){if(!e)return wn;e=e._reactInternals;e:{if(os(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var r=e.type;if(jt(r))return Ag(e,r,t)}return t}function Dy(e,t,r,n,s,i,o,l,c){return e=gh(r,n,!0,e,s,i,o,l,c),e.context=Ay(null),r=e.current,n=ft(),s=gn(r),i=Dr(n,s),i.callback=t??null,mn(r,i,s),e.current.lanes=s,_a(e,s,n),St(e,n),e}function Nl(e,t,r,n){var s=t.current,i=ft(),o=gn(s);return r=Ay(r),t.context===null?t.context=r:t.pendingContext=r,t=Dr(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=mn(s,t,o),e!==null&&(nr(e,s,o,i),xo(e,s,o)),o}function el(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function yh(e,t){Pm(e,t),(e=e.alternate)&&Pm(e,t)}function Ok(){return null}var Iy=typeof reportError=="function"?reportError:function(e){console.error(e)};function xh(e){this._internalRoot=e}_l.prototype.render=xh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Nl(e,t,null,null)};_l.prototype.unmount=xh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;is(function(){Nl(null,e,null,null)}),t[Lr]=null}};function _l(e){this._internalRoot=e}_l.prototype.unstable_scheduleHydration=function(e){if(e){var t=dg();e={blockedOn:null,target:e,priority:t};for(var r=0;r<nn.length&&t!==0&&t<nn[r].priority;r++);nn.splice(r,0,e),r===0&&fg(e)}};function vh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function El(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cm(){}function Mk(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=el(o);i.call(u)}}var o=Dy(t,n,e,0,null,!1,!1,"",Cm);return e._reactRootContainer=o,e[Lr]=o.current,na(e.nodeType===8?e.parentNode:e),is(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=el(c);l.call(u)}}var c=gh(e,0,!1,null,null,!1,!1,"",Cm);return e._reactRootContainer=c,e[Lr]=c.current,na(e.nodeType===8?e.parentNode:e),is(function(){Nl(t,c,r,n)}),c}function Pl(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=el(o);l.call(c)}}Nl(t,o,e,s)}else o=Mk(r,t,e,s,n);return el(o)}cg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pi(t.pendingLanes);r!==0&&(Md(t,r|1),St(t,$e()),!(ue&6)&&(Qs=$e()+500,_n()))}break;case 13:is(function(){var n=$r(e,1);if(n!==null){var s=ft();nr(n,e,1,s)}}),yh(e,1)}};Vd=function(e){if(e.tag===13){var t=$r(e,134217728);if(t!==null){var r=ft();nr(t,e,134217728,r)}yh(e,134217728)}};ug=function(e){if(e.tag===13){var t=gn(e),r=$r(e,t);if(r!==null){var n=ft();nr(r,e,t,n)}yh(e,t)}};dg=function(){return he};hg=function(e,t){var r=he;try{return he=e,t()}finally{he=r}};ou=function(e,t,r){switch(t){case"input":if(eu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=xl(n);if(!s)throw Error(D(90));z0(n),eu(n,s)}}}break;case"textarea":H0(e,r);break;case"select":t=r.value,t!=null&&Ms(e,!!r.multiple,t,!1)}};Y0=hh;Z0=is;var Vk={usingClientEntryPoint:!1,Events:[Pa,Ns,xl,J0,Q0,hh]},ji={findFiberByHostInstance:Wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fk={bundleType:ji.bundleType,version:ji.version,rendererPackageName:ji.rendererPackageName,rendererConfig:ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rg(e),e===null?null:e.stateNode},findFiberByHostInstance:ji.findFiberByHostInstance||Ok,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eo.isDisabled&&eo.supportsFiber)try{ml=eo.inject(Fk),fr=eo}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vk;At.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vh(t))throw Error(D(200));return $k(e,t,null,r)};At.createRoot=function(e,t){if(!vh(e))throw Error(D(299));var r=!1,n="",s=Iy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=gh(e,1,!1,null,null,r,!1,n,s),e[Lr]=t.current,na(e.nodeType===8?e.parentNode:e),new xh(t)};At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=rg(t),e=e===null?null:e.stateNode,e};At.flushSync=function(e){return is(e)};At.hydrate=function(e,t,r){if(!El(t))throw Error(D(200));return Pl(null,e,t,!0,r)};At.hydrateRoot=function(e,t,r){if(!vh(e))throw Error(D(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Iy;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Dy(t,null,e,1,r??null,s,!1,i,o),e[Lr]=t.current,na(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new _l(t)};At.render=function(e,t,r){if(!El(t))throw Error(D(200));return Pl(null,e,t,!1,r)};At.unmountComponentAtNode=function(e){if(!El(e))throw Error(D(40));return e._reactRootContainer?(is(function(){Pl(null,null,e,!1,function(){e._reactRootContainer=null,e[Lr]=null})}),!0):!1};At.unstable_batchedUpdates=hh;At.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!El(r))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Pl(e,t,r,!1,n)};At.version="18.3.1-next-f1338f8080-20240426";function Ly(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ly)}catch(e){console.error(e)}}Ly(),L0.exports=At;var Uk=L0.exports,Tm=Uk;Kc.createRoot=Tm.createRoot,Kc.hydrateRoot=Tm.hydrateRoot;const Bk="modulepreload",zk=function(e){return"/"+e},Rm={},ls=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=zk(c),c in Rm)return;Rm[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Bk,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ha(){return ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ha.apply(this,arguments)}var cn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(cn||(cn={}));const Am="popstate";function Wk(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Fu("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:tl(s)}return qk(t,r,null,e)}function Ee(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $y(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hk(){return Math.random().toString(36).substr(2,8)}function Dm(e,t){return{usr:e.state,key:e.key,idx:t}}function Fu(e,t,r,n){return r===void 0&&(r=null),ha({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ii(t):t,{state:r,key:t&&t.key||n||Hk()})}function tl(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ii(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function qk(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=cn.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(ha({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=cn.Pop;let b=d(),y=b==null?null:b-u;u=b,c&&c({action:l,location:w.location,delta:y})}function f(b,y){l=cn.Push;let g=Fu(w.location,b,y);u=d()+1;let p=Dm(g,u),k=w.createHref(g);try{o.pushState(p,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(k)}i&&c&&c({action:l,location:w.location,delta:1})}function m(b,y){l=cn.Replace;let g=Fu(w.location,b,y);u=d();let p=Dm(g,u),k=w.createHref(g);o.replaceState(p,"",k),i&&c&&c({action:l,location:w.location,delta:0})}function x(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof b=="string"?b:tl(b);return g=g.replace(/ $/,"%20"),Ee(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let w={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Am,h),c=b,()=>{s.removeEventListener(Am,h),c=null}},createHref(b){return t(s,b)},createURL:x,encodeLocation(b){let y=x(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(b){return o.go(b)}};return w}var Im;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Im||(Im={}));function Kk(e,t,r){return r===void 0&&(r="/"),Gk(e,t,r)}function Gk(e,t,r,n){let s=typeof t=="string"?ii(t):t,i=Ys(s.pathname||"/",r);if(i==null)return null;let o=Oy(e);Xk(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=a1(i);l=s1(o[c],u)}return l}function Oy(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ee(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=xn([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Ee(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Oy(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:r1(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of My(i.path))s(i,o,c)}),t}function My(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=My(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Xk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:n1(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Jk=/^:[\w-]+$/,Qk=3,Yk=2,Zk=1,e1=10,t1=-2,Lm=e=>e==="*";function r1(e,t){let r=e.split("/"),n=r.length;return r.some(Lm)&&(n+=t1),t&&(n+=Yk),r.filter(s=>!Lm(s)).reduce((s,i)=>s+(Jk.test(i)?Qk:i===""?Zk:e1),n)}function n1(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function s1(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Uu({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:xn([i,h.pathname]),pathnameBase:u1(xn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=xn([i,h.pathnameBase]))}return o}function Uu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=i1(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let w=l[h]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const x=l[h];return m&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function i1(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),$y(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function a1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $y(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ys(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function o1(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?ii(e):e;return{pathname:r?r.startsWith("/")?r:l1(r,t):t,search:d1(n),hash:h1(s)}}function l1(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function yc(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function c1(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function wh(e,t){let r=c1(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function bh(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=ii(e):(s=ha({},e),Ee(!s.pathname||!s.pathname.includes("?"),yc("?","pathname","search",s)),Ee(!s.pathname||!s.pathname.includes("#"),yc("#","pathname","hash",s)),Ee(!s.search||!s.search.includes("#"),yc("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=o1(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const xn=e=>e.join("/").replace(/\/\/+/g,"/"),u1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),d1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,h1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function f1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Vy=["post","put","patch","delete"];new Set(Vy);const m1=["get",...Vy];new Set(m1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fa(){return fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fa.apply(this,arguments)}const Cl=v.createContext(null),Fy=v.createContext(null),Ur=v.createContext(null),Tl=v.createContext(null),vr=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Uy=v.createContext(null);function p1(e,t){let{relative:r}=t===void 0?{}:t;ai()||Ee(!1);let{basename:n,navigator:s}=v.useContext(Ur),{hash:i,pathname:o,search:l}=Rl(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:xn([n,o])),s.createHref({pathname:c,search:l,hash:i})}function ai(){return v.useContext(Tl)!=null}function wr(){return ai()||Ee(!1),v.useContext(Tl).location}function By(e){v.useContext(Ur).static||v.useLayoutEffect(e)}function cs(){let{isDataRoute:e}=v.useContext(vr);return e?T1():g1()}function g1(){ai()||Ee(!1);let e=v.useContext(Cl),{basename:t,future:r,navigator:n}=v.useContext(Ur),{matches:s}=v.useContext(vr),{pathname:i}=wr(),o=JSON.stringify(wh(s,r.v7_relativeSplatPath)),l=v.useRef(!1);return By(()=>{l.current=!0}),v.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=bh(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:xn([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}const y1=v.createContext(null);function x1(e){let t=v.useContext(vr).outlet;return t&&v.createElement(y1.Provider,{value:e},t)}function kh(){let{matches:e}=v.useContext(vr),t=e[e.length-1];return t?t.params:{}}function Rl(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=v.useContext(Ur),{matches:s}=v.useContext(vr),{pathname:i}=wr(),o=JSON.stringify(wh(s,n.v7_relativeSplatPath));return v.useMemo(()=>bh(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function v1(e,t){return w1(e,t)}function w1(e,t,r,n){ai()||Ee(!1);let{navigator:s}=v.useContext(Ur),{matches:i}=v.useContext(vr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=wr(),d;if(t){var h;let b=typeof t=="string"?ii(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Ee(!1),d=b}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=Kk(e,{pathname:m}),w=N1(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:xn([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:xn([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&w?v.createElement(Tl.Provider,{value:{location:fa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:cn.Pop}},w):w}function b1(){let e=C1(),t=f1(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,null)}const k1=v.createElement(b1,null);class j1 extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(vr.Provider,{value:this.props.routeContext},v.createElement(Uy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S1(e){let{routeContext:t,match:r,children:n}=e,s=v.useContext(Cl);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(vr.Provider,{value:t},n)}function N1(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Ee(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=r,x=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,x=!1,w=null,b=null;r&&(m=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||k1,c&&(u<0&&f===0?(R1("route-fallback"),x=!0,b=null):u===f&&(x=!0,b=h.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),g=()=>{let p;return m?p=w:x?p=b:h.route.Component?p=v.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=d,v.createElement(S1,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:p})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?v.createElement(j1,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var zy=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(zy||{}),Wy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wy||{});function _1(e){let t=v.useContext(Cl);return t||Ee(!1),t}function E1(e){let t=v.useContext(Fy);return t||Ee(!1),t}function P1(e){let t=v.useContext(vr);return t||Ee(!1),t}function Hy(e){let t=P1(),r=t.matches[t.matches.length-1];return r.route.id||Ee(!1),r.route.id}function C1(){var e;let t=v.useContext(Uy),r=E1(),n=Hy();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function T1(){let{router:e}=_1(zy.UseNavigateStable),t=Hy(Wy.UseNavigateStable),r=v.useRef(!1);return By(()=>{r.current=!0}),v.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,fa({fromRouteId:t},i)))},[e,t])}const $m={};function R1(e,t,r){$m[e]||($m[e]=!0)}function A1(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function D1(e){let{to:t,replace:r,state:n,relative:s}=e;ai()||Ee(!1);let{future:i,static:o}=v.useContext(Ur),{matches:l}=v.useContext(vr),{pathname:c}=wr(),u=cs(),d=bh(t,wh(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return v.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function I1(e){return x1(e.context)}function Be(e){Ee(!1)}function L1(e){let{basename:t="/",children:r=null,location:n,navigationType:s=cn.Pop,navigator:i,static:o=!1,future:l}=e;ai()&&Ee(!1);let c=t.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:c,navigator:i,static:o,future:fa({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=ii(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:x="default"}=n,w=v.useMemo(()=>{let b=Ys(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:x},navigationType:s}},[c,d,h,f,m,x,s]);return w==null?null:v.createElement(Ur.Provider,{value:u},v.createElement(Tl.Provider,{children:r,value:w}))}function $1(e){let{children:t,location:r}=e;return v1(Bu(t),r)}new Promise(()=>{});function Bu(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,Bu(n.props.children,i));return}n.type!==Be&&Ee(!1),!n.props.index||!n.props.children||Ee(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Bu(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rl.apply(this,arguments)}function qy(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function O1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function M1(e,t){return e.button===0&&(!t||t==="_self")&&!O1(e)}const V1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],F1=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],U1="6";try{window.__reactRouterVersion=U1}catch{}const B1=v.createContext({isTransitioning:!1}),z1="startTransition",Om=Tw[z1];function W1(e){let{basename:t,children:r,future:n,window:s}=e,i=v.useRef();i.current==null&&(i.current=Wk({window:s,v5Compat:!0}));let o=i.current,[l,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=v.useCallback(h=>{u&&Om?Om(()=>c(h)):c(h)},[c,u]);return v.useLayoutEffect(()=>o.listen(d),[o,d]),v.useEffect(()=>A1(n),[n]),v.createElement(L1,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const H1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",q1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sr=v.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=qy(t,V1),{basename:m}=v.useContext(Ur),x,w=!1;if(typeof u=="string"&&q1.test(u)&&(x=u,H1))try{let p=new URL(window.location.href),k=u.startsWith("//")?new URL(p.protocol+u):new URL(u),S=Ys(k.pathname,m);k.origin===p.origin&&S!=null?u=S+k.search+k.hash:w=!0}catch{}let b=p1(u,{relative:s}),y=X1(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function g(p){n&&n(p),p.defaultPrevented||y(p)}return v.createElement("a",rl({},f,{href:x||b,onClick:w||i?n:g,ref:r,target:c}))}),K1=v.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=qy(t,F1),f=Rl(c,{relative:h.relative}),m=wr(),x=v.useContext(Fy),{navigator:w,basename:b}=v.useContext(Ur),y=x!=null&&J1(f)&&u===!0,g=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,p=m.pathname,k=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(p=p.toLowerCase(),k=k?k.toLowerCase():null,g=g.toLowerCase()),k&&b&&(k=Ys(k,b)||k);const S=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let N=p===g||!o&&p.startsWith(g)&&p.charAt(S)==="/",_=k!=null&&(k===g||!o&&k.startsWith(g)&&k.charAt(g.length)==="/"),P={isActive:N,isPending:_,isTransitioning:y},$=N?n:void 0,R;typeof i=="function"?R=i(P):R=[i,N?"active":null,_?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let Y=typeof l=="function"?l(P):l;return v.createElement(sr,rl({},h,{"aria-current":$,className:R,ref:r,style:Y,to:c,viewTransition:u}),typeof d=="function"?d(P):d)});var zu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zu||(zu={}));var Mm;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Mm||(Mm={}));function G1(e){let t=v.useContext(Cl);return t||Ee(!1),t}function X1(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=cs(),u=wr(),d=Rl(e,{relative:o});return v.useCallback(h=>{if(M1(h,r)){h.preventDefault();let f=n!==void 0?n:tl(u)===tl(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function J1(e,t){t===void 0&&(t={});let r=v.useContext(B1);r==null&&Ee(!1);let{basename:n}=G1(zu.useViewTransitionState),s=Rl(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Ys(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Ys(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Uu(s.pathname,o)!=null||Uu(s.pathname,i)!=null}function Q1(e,t={}){const r=v.useRef(null),n=v.useRef(null),s=v.useRef(0),i=t.maxReconnectAttempts||10,o=t.reconnectDelay||3e3,l=()=>{try{r.current=new WebSocket(e),r.current.onopen=c=>{console.log("WebSocket connected"),s.current=0,t.onOpen&&t.onOpen(c)},r.current.onmessage=c=>{t.onMessage&&t.onMessage(c)},r.current.onerror=c=>{console.error("WebSocket error:",c),t.onError&&t.onError(c)},r.current.onclose=c=>{console.log("WebSocket closed"),t.onClose&&t.onClose(c),s.current<i&&(s.current++,console.log(`Reconnecting... (attempt ${s.current}/${i})`),n.current=setTimeout(()=>{l()},o))}}catch(c){console.error("Failed to create WebSocket:",c)}};return v.useEffect(()=>(l(),()=>{n.current&&clearTimeout(n.current),r.current&&r.current.close()}),[e]),r.current}function Ky(e,t){const[r,n]=v.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return v.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(r))}catch(i){console.error(`Error saving to localStorage key "${e}":`,i)}},[e,r]),[r,i=>{try{const o=i instanceof Function?i(r):i;n(o)}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}}]}function Y1(){const[e,t]=Ky("leo-dashboard-preferences",{theme:"light",sidebarCollapsed:!1,refreshInterval:3e4,notifications:!0,compactView:!1});return{preferences:e,updatePreference:(n,s)=>{t(i=>({...i,[n]:s}))}}}function xc(e,t){const[r,n]=Ky(`leo-dashboard-${e}`,t);return[r,n,()=>{window.localStorage.removeItem(`leo-dashboard-${e}`),n(t)}]}const jh=v.createContext({});function Sh(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const Nh=typeof window<"u",Gy=Nh?v.useLayoutEffect:v.useEffect,Al=v.createContext(null);function _h(e,t){e.indexOf(t)===-1&&e.push(t)}function Eh(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Mr=(e,t,r)=>r>t?t:r<e?e:r;let Ph=()=>{};const Vr={},Xy=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Jy(e){return typeof e=="object"&&e!==null}const Qy=e=>/^0[^.\s]+$/u.test(e);function Ch(e){let t;return()=>(t===void 0&&(t=e()),t)}const zt=e=>e,Z1=(e,t)=>r=>t(e(r)),Ta=(...e)=>e.reduce(Z1),ma=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class Th{constructor(){this.subscriptions=[]}add(t){return _h(this.subscriptions,t),()=>Eh(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pr=e=>e*1e3,gr=e=>e/1e3;function Yy(e,t){return t?e*(1e3/t):0}const Zy=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,ej=1e-7,tj=12;function rj(e,t,r,n,s){let i,o,l=0;do o=t+(r-t)/2,i=Zy(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>ej&&++l<tj);return o}function Ra(e,t,r,n){if(e===t&&r===n)return zt;const s=i=>rj(i,0,1,e,r);return i=>i===0||i===1?i:Zy(s(i),t,n)}const ex=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tx=e=>t=>1-e(1-t),rx=Ra(.33,1.53,.69,.99),Rh=tx(rx),nx=ex(Rh),sx=e=>(e*=2)<1?.5*Rh(e):.5*(2-Math.pow(2,-10*(e-1))),Ah=e=>1-Math.sin(Math.acos(e)),ix=tx(Ah),ax=ex(Ah),nj=Ra(.42,0,1,1),sj=Ra(0,0,.58,1),ox=Ra(.42,0,.58,1),ij=e=>Array.isArray(e)&&typeof e[0]!="number",lx=e=>Array.isArray(e)&&typeof e[0]=="number",aj={linear:zt,easeIn:nj,easeInOut:ox,easeOut:sj,circIn:Ah,circInOut:ax,circOut:ix,backIn:Rh,backInOut:nx,backOut:rx,anticipate:sx},oj=e=>typeof e=="string",Vm=e=>{if(lx(e)){Ph(e.length===4);const[t,r,n,s]=e;return Ra(t,r,n,s)}else if(oj(e))return aj[e];return e},to=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lj(e,t){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,h=!1,f=!1)=>{const x=f&&s?r:n;return h&&o.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const cj=40;function cx(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=to.reduce((p,k)=>(p[k]=lj(i),p),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:m,postRender:x}=o,w=()=>{const p=Vr.useManualTiming?s.timestamp:performance.now();r=!1,Vr.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(p-s.timestamp,cj),1)),s.timestamp=p,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),m.process(s),x.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(w))},b=()=>{r=!0,n=!0,s.isProcessing||e(w)};return{schedule:to.reduce((p,k)=>{const S=o[k];return p[k]=(N,_=!1,P=!1)=>(r||b(),S.schedule(N,_,P)),p},{}),cancel:p=>{for(let k=0;k<to.length;k++)o[to[k]].cancel(p)},state:s,steps:o}}const{schedule:ke,cancel:bn,state:Ze,steps:vc}=cx(typeof requestAnimationFrame<"u"?requestAnimationFrame:zt,!0);let No;function uj(){No=void 0}const bt={now:()=>(No===void 0&&bt.set(Ze.isProcessing||Vr.useManualTiming?Ze.timestamp:performance.now()),No),set:e=>{No=e,queueMicrotask(uj)}},ux=e=>t=>typeof t=="string"&&t.startsWith(e),Dh=ux("--"),dj=ux("var(--"),Ih=e=>dj(e)?hj.test(e.split("/*")[0].trim()):!1,hj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,oi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},pa={...oi,transform:e=>Mr(0,1,e)},ro={...oi,default:1},Ui=e=>Math.round(e*1e5)/1e5,Lh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fj(e){return e==null}const mj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$h=(e,t)=>r=>!!(typeof r=="string"&&mj.test(r)&&r.startsWith(e)||t&&!fj(r)&&Object.prototype.hasOwnProperty.call(r,t)),dx=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,l]=n.match(Lh);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},pj=e=>Mr(0,255,e),wc={...oi,transform:e=>Math.round(pj(e))},Kn={test:$h("rgb","red"),parse:dx("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+wc.transform(e)+", "+wc.transform(t)+", "+wc.transform(r)+", "+Ui(pa.transform(n))+")"};function gj(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Wu={test:$h("#"),parse:gj,transform:Kn.transform},Aa=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Zr=Aa("deg"),yr=Aa("%"),Z=Aa("px"),yj=Aa("vh"),xj=Aa("vw"),Fm={...yr,parse:e=>yr.parse(e)/100,transform:e=>yr.transform(e*100)},As={test:$h("hsl","hue"),parse:dx("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+yr.transform(Ui(t))+", "+yr.transform(Ui(r))+", "+Ui(pa.transform(n))+")"},Me={test:e=>Kn.test(e)||Wu.test(e)||As.test(e),parse:e=>Kn.test(e)?Kn.parse(e):As.test(e)?As.parse(e):Wu.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Kn.transform(e):As.transform(e),getAnimatableNone:e=>{const t=Me.parse(e);return t.alpha=0,Me.transform(t)}},vj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wj(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Lh))==null?void 0:t.length)||0)+(((r=e.match(vj))==null?void 0:r.length)||0)>0}const hx="number",fx="color",bj="var",kj="var(",Um="${}",jj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ga(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(jj,c=>(Me.test(c)?(n.color.push(i),s.push(fx),r.push(Me.parse(c))):c.startsWith(kj)?(n.var.push(i),s.push(bj),r.push(c)):(n.number.push(i),s.push(hx),r.push(parseFloat(c))),++i,Um)).split(Um);return{values:r,split:l,indexes:n,types:s}}function mx(e){return ga(e).values}function px(e){const{split:t,types:r}=ga(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const l=r[o];l===hx?i+=Ui(s[o]):l===fx?i+=Me.transform(s[o]):i+=s[o]}return i}}const Sj=e=>typeof e=="number"?0:Me.test(e)?Me.getAnimatableNone(e):e;function Nj(e){const t=mx(e);return px(e)(t.map(Sj))}const kn={test:wj,parse:mx,createTransformer:px,getAnimatableNone:Nj};function bc(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function _j({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=bc(c,l,e+1/3),i=bc(c,l,e),o=bc(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function nl(e,t){return r=>r>0?t:e}const Se=(e,t,r)=>e+(t-e)*r,kc=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},Ej=[Wu,Kn,As],Pj=e=>Ej.find(t=>t.test(e));function Bm(e){const t=Pj(e);if(!t)return!1;let r=t.parse(e);return t===As&&(r=_j(r)),r}const zm=(e,t)=>{const r=Bm(e),n=Bm(t);if(!r||!n)return nl(e,t);const s={...r};return i=>(s.red=kc(r.red,n.red,i),s.green=kc(r.green,n.green,i),s.blue=kc(r.blue,n.blue,i),s.alpha=Se(r.alpha,n.alpha,i),Kn.transform(s))},Hu=new Set(["none","hidden"]);function Cj(e,t){return Hu.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function Tj(e,t){return r=>Se(e,t,r)}function Oh(e){return typeof e=="number"?Tj:typeof e=="string"?Ih(e)?nl:Me.test(e)?zm:Dj:Array.isArray(e)?gx:typeof e=="object"?Me.test(e)?zm:Rj:nl}function gx(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>Oh(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function Rj(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=Oh(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function Aj(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][n[i]],l=e.values[o]??0;r[s]=l,n[i]++}return r}const Dj=(e,t)=>{const r=kn.createTransformer(t),n=ga(e),s=ga(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Hu.has(e)&&!s.values.length||Hu.has(t)&&!n.values.length?Cj(e,t):Ta(gx(Aj(n,s),s.values),r):nl(e,t)};function yx(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Se(e,t,r):Oh(e)(e,t)}const Ij=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>ke.update(t,r),stop:()=>bn(t),now:()=>Ze.isProcessing?Ze.timestamp:bt.now()}},xx=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},sl=2e4;function Mh(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<sl;)t+=r,n=e.next(t);return t>=sl?1/0:t}function Lj(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(Mh(n),sl);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:gr(s)}}const $j=5;function vx(e,t,r){const n=Math.max(t-$j,0);return Yy(r-e(n),t-n)}const Ae={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jc=.001;function Oj({duration:e=Ae.duration,bounce:t=Ae.bounce,velocity:r=Ae.velocity,mass:n=Ae.mass}){let s,i,o=1-t;o=Mr(Ae.minDamping,Ae.maxDamping,o),e=Mr(Ae.minDuration,Ae.maxDuration,gr(e)),o<1?(s=u=>{const d=u*o,h=d*e,f=d-r,m=qu(u,o),x=Math.exp(-h);return jc-f/m*x},i=u=>{const h=u*o*e,f=h*r+r,m=Math.pow(o,2)*Math.pow(u,2)*e,x=Math.exp(-h),w=qu(Math.pow(u,2),o);return(-s(u)+jc>0?-1:1)*((f-m)*x)/w}):(s=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-jc+d*h},i=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=Vj(s,i,l);if(e=pr(e),isNaN(c))return{stiffness:Ae.stiffness,damping:Ae.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const Mj=12;function Vj(e,t,r){let n=r;for(let s=1;s<Mj;s++)n=n-e(n)/t(n);return n}function qu(e,t){return e*Math.sqrt(1-t*t)}const Fj=["duration","bounce"],Uj=["stiffness","damping","mass"];function Wm(e,t){return t.some(r=>e[r]!==void 0)}function Bj(e){let t={velocity:Ae.velocity,stiffness:Ae.stiffness,damping:Ae.damping,mass:Ae.mass,isResolvedFromDuration:!1,...e};if(!Wm(e,Uj)&&Wm(e,Fj))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*Mr(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ae.mass,stiffness:s,damping:i}}else{const r=Oj(e);t={...t,...r,mass:Ae.mass},t.isResolvedFromDuration=!0}return t}function il(e=Ae.visualDuration,t=Ae.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=Bj({...r,velocity:-gr(r.velocity||0)}),x=f||0,w=u/(2*Math.sqrt(c*d)),b=o-i,y=gr(Math.sqrt(c/d)),g=Math.abs(b)<5;n||(n=g?Ae.restSpeed.granular:Ae.restSpeed.default),s||(s=g?Ae.restDelta.granular:Ae.restDelta.default);let p;if(w<1){const S=qu(y,w);p=N=>{const _=Math.exp(-w*y*N);return o-_*((x+w*y*b)/S*Math.sin(S*N)+b*Math.cos(S*N))}}else if(w===1)p=S=>o-Math.exp(-y*S)*(b+(x+y*b)*S);else{const S=y*Math.sqrt(w*w-1);p=N=>{const _=Math.exp(-w*y*N),P=Math.min(S*N,300);return o-_*((x+w*y*b)*Math.sinh(P)+S*b*Math.cosh(P))/S}}const k={calculatedDuration:m&&h||null,next:S=>{const N=p(S);if(m)l.done=S>=h;else{let _=S===0?x:0;w<1&&(_=S===0?pr(x):vx(p,S,N));const P=Math.abs(_)<=n,$=Math.abs(o-N)<=s;l.done=P&&$}return l.value=l.done?o:N,l},toString:()=>{const S=Math.min(Mh(k),sl),N=xx(_=>k.next(S*_).value,S,30);return S+"ms "+N},toTransition:()=>{}};return k}il.applyToOptions=e=>{const t=Lj(e,100,il);return e.ease=t.ease,e.duration=pr(t.duration),e.type="keyframes",e};function Ku({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=P=>l!==void 0&&P<l||c!==void 0&&P>c,x=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let w=r*t;const b=h+w,y=o===void 0?b:o(b);y!==b&&(w=y-h);const g=P=>-w*Math.exp(-P/n),p=P=>y+g(P),k=P=>{const $=g(P),R=p(P);f.done=Math.abs($)<=u,f.value=f.done?y:R};let S,N;const _=P=>{m(f.value)&&(S=P,N=il({keyframes:[f.value,x(f.value)],velocity:vx(p,P,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:P=>{let $=!1;return!N&&S===void 0&&($=!0,k(P),_(P)),S!==void 0&&P>=S?N.next(P-S):(!$&&k(P),f)}}}function zj(e,t,r){const n=[],s=r||Vr.mix||yx,i=e.length-1;for(let o=0;o<i;o++){let l=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||zt:t;l=Ta(c,l)}n.push(l)}return n}function Wj(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(Ph(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=zj(t,n,s),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=ma(e[h],e[h+1],d);return l[h](f)};return r?d=>u(Mr(e[0],e[i-1],d)):u}function Hj(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=ma(0,t,n);e.push(Se(r,1,s))}}function qj(e){const t=[0];return Hj(t,e.length-1),t}function Kj(e,t){return e.map(r=>r*t)}function Gj(e,t){return e.map(()=>t||ox).splice(0,e.length-1)}function Bi({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=ij(n)?n.map(Vm):Vm(n),i={done:!1,value:t[0]},o=Kj(r&&r.length===t.length?r:qj(t),e),l=Wj(o,t,{ease:Array.isArray(s)?s:Gj(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const Xj=e=>e!==null;function Vh(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(Xj),l=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const Jj={decay:Ku,inertia:Ku,tween:Bi,keyframes:Bi,spring:il};function wx(e){typeof e.type=="string"&&(e.type=Jj[e.type])}class Fh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const Qj=e=>e/100;class Uh extends Fh{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:r}=this.options;r&&r.updatedAt!==bt.now()&&this.tick(bt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;wx(t);const{type:r=Bi,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=r||Bi;c!==Bi&&typeof l[0]!="number"&&(this.mixKeyframes=Ta(Qj,yx(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Mh(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:m,type:x,onUpdate:w,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let p=this.currentTime,k=n;if(h){const P=Math.min(this.currentTime,s)/l;let $=Math.floor(P),R=P%1;!R&&P>=1&&(R=1),R===1&&$--,$=Math.min($,h+1),!!($%2)&&(f==="reverse"?(R=1-R,m&&(R-=m/l)):f==="mirror"&&(k=o)),p=Mr(0,1,R)*l}const S=g?{done:!1,value:d[0]}:k.next(p);i&&(S.value=i(S.value));let{done:N}=S;!g&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return _&&x!==Ku&&(S.value=Vh(d,this.options,b,this.speed)),w&&w(S.value),_&&this.finish(),S}then(t,r){return this.finished.then(t,r)}get duration(){return gr(this.calculatedDuration)}get time(){return gr(this.currentTime)}set time(t){var r;t=pr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(bt.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=gr(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=Ij,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function Yj(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Gn=e=>e*180/Math.PI,Gu=e=>{const t=Gn(Math.atan2(e[1],e[0]));return Xu(t)},Zj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Gu,rotateZ:Gu,skewX:e=>Gn(Math.atan(e[1])),skewY:e=>Gn(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Xu=e=>(e=e%360,e<0&&(e+=360),e),Hm=Gu,qm=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Km=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),eS={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:qm,scaleY:Km,scale:e=>(qm(e)+Km(e))/2,rotateX:e=>Xu(Gn(Math.atan2(e[6],e[5]))),rotateY:e=>Xu(Gn(Math.atan2(-e[2],e[0]))),rotateZ:Hm,rotate:Hm,skewX:e=>Gn(Math.atan(e[4])),skewY:e=>Gn(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Ju(e){return e.includes("scale")?1:0}function Qu(e,t){if(!e||e==="none")return Ju(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=eS,s=r;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Zj,s=l}if(!s)return Ju(t);const i=n[t],o=s[1].split(",").map(rS);return typeof i=="function"?i(o):o[i]}const tS=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Qu(r,t)};function rS(e){return parseFloat(e.trim())}const li=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ci=new Set(li),Gm=e=>e===oi||e===Z,nS=new Set(["x","y","z"]),sS=li.filter(e=>!nS.has(e));function iS(e){const t=[];return sS.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Yn={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Qu(t,"x"),y:(e,{transform:t})=>Qu(t,"y")};Yn.translateX=Yn.x;Yn.translateY=Yn.y;const Zn=new Set;let Yu=!1,Zu=!1,ed=!1;function bx(){if(Zu){const e=Array.from(Zn).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=iS(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var l;(l=n.getValue(i))==null||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Zu=!1,Yu=!1,Zn.forEach(e=>e.complete(ed)),Zn.clear()}function kx(){Zn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Zu=!0)})}function aS(){ed=!0,kx(),bx(),ed=!1}class Bh{constructor(t,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Zn.add(this),Yu||(Yu=!0,ke.read(kx),ke.resolveKeyframes(bx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const l=n.readValue(r,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}Yj(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Zn.delete(this)}cancel(){this.state==="scheduled"&&(Zn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oS=e=>e.startsWith("--");function lS(e,t,r){oS(t)?e.style.setProperty(t,r):e.style[t]=r}const cS=Ch(()=>window.ScrollTimeline!==void 0),uS={};function dS(e,t){const r=Ch(e);return()=>uS[t]??r()}const jx=dS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ti=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,Xm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ti([0,.65,.55,1]),circOut:Ti([.55,0,1,.45]),backIn:Ti([.31,.01,.66,-.59]),backOut:Ti([.33,1.53,.69,.99])};function Sx(e,t){if(e)return typeof e=="function"?jx()?xx(e,t):"ease-out":lx(e)?Ti(e):Array.isArray(e)?e.map(r=>Sx(r,t)||Xm.easeOut):Xm[e]}function hS(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const h=Sx(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(d,f)}function Nx(e){return typeof e=="function"&&"applyToOptions"in e}function fS({type:e,...t}){return Nx(e)&&jx()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class mS extends Fh{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Ph(typeof t.type!="string");const u=fS(t);this.animation=hS(r,n,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=Vh(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):lS(r,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,n;const t=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return gr(Number(t))}get time(){return gr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=pr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&cS()?(this.animation.timeline=t,zt):r(this)}}const _x={anticipate:sx,backInOut:nx,circInOut:ax};function pS(e){return e in _x}function gS(e){typeof e.ease=="string"&&pS(e.ease)&&(e.ease=_x[e.ease])}const Jm=10;class yS extends mS{constructor(t){gS(t),wx(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const l=new Uh({...o,autoplay:!1}),c=pr(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-Jm).value,l.sample(c).value,Jm),l.stop()}}const Qm=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(kn.test(e)||e==="0")&&!e.startsWith("url("));function xS(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function vS(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Qm(s,t),l=Qm(i,t);return!o||!l?!1:xS(e)||(r==="spring"||Nx(r))&&n}function td(e){e.duration=0,e.type}const wS=new Set(["opacity","clipPath","filter","transform"]),bS=Ch(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function kS(e){var d;const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:i,type:o}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return bS()&&r&&wS.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&i!==0&&o!=="inertia"}const jS=40;class SS extends Fh{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var x;super(),this.stop=()=>{var w,b;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=bt.now();const f={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||Bh;this.keyframeResolver=new m(l,(w,b,y)=>this.onKeyframesResolved(w,b,f,!y),c,u,d),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=bt.now(),vS(t,i,o,l)||((Vr.instantAnimations||!c)&&(d==null||d(Vh(t,n,r))),t[0]=t[t.length-1],td(n),n.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>jS?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},m=!u&&kS(f)?new yS({...f,element:f.motionValue.owner.current}):new Uh(f);m.finished.then(()=>this.notifyFinished()).catch(zt),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),aS()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const NS=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _S(e){const t=NS.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function Ex(e,t,r=1){const[n,s]=_S(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return Xy(o)?parseFloat(o):o}return Ih(s)?Ex(s,t,r+1):s}function zh(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Px=new Set(["width","height","top","left","right","bottom",...li]),ES={test:e=>e==="auto",parse:e=>e},Cx=e=>t=>t.test(e),Tx=[oi,Z,yr,Zr,xj,yj,ES],Ym=e=>Tx.find(Cx(e));function PS(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Qy(e):!0}const CS=new Set(["brightness","contrast","saturate","opacity"]);function TS(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Lh)||[];if(!n)return e;const s=r.replace(n,"");let i=CS.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const RS=/\b([a-z-]*)\(.*?\)/gu,rd={...kn,getAnimatableNone:e=>{const t=e.match(RS);return t?t.map(TS).join(" "):e}},Zm={...oi,transform:Math.round},AS={rotate:Zr,rotateX:Zr,rotateY:Zr,rotateZ:Zr,scale:ro,scaleX:ro,scaleY:ro,scaleZ:ro,skew:Zr,skewX:Zr,skewY:Zr,distance:Z,translateX:Z,translateY:Z,translateZ:Z,x:Z,y:Z,z:Z,perspective:Z,transformPerspective:Z,opacity:pa,originX:Fm,originY:Fm,originZ:Z},Wh={borderWidth:Z,borderTopWidth:Z,borderRightWidth:Z,borderBottomWidth:Z,borderLeftWidth:Z,borderRadius:Z,radius:Z,borderTopLeftRadius:Z,borderTopRightRadius:Z,borderBottomRightRadius:Z,borderBottomLeftRadius:Z,width:Z,maxWidth:Z,height:Z,maxHeight:Z,top:Z,right:Z,bottom:Z,left:Z,padding:Z,paddingTop:Z,paddingRight:Z,paddingBottom:Z,paddingLeft:Z,margin:Z,marginTop:Z,marginRight:Z,marginBottom:Z,marginLeft:Z,backgroundPositionX:Z,backgroundPositionY:Z,...AS,zIndex:Zm,fillOpacity:pa,strokeOpacity:pa,numOctaves:Zm},DS={...Wh,color:Me,backgroundColor:Me,outlineColor:Me,fill:Me,stroke:Me,borderColor:Me,borderTopColor:Me,borderRightColor:Me,borderBottomColor:Me,borderLeftColor:Me,filter:rd,WebkitFilter:rd},Rx=e=>DS[e];function Ax(e,t){let r=Rx(e);return r!==rd&&(r=kn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const IS=new Set(["auto","none","0"]);function LS(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!IS.has(i)&&ga(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=Ax(r,s)}class $S extends Bh{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Ih(u))){const d=Ex(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Px.has(n)||t.length!==2)return;const[s,i]=t,o=Ym(s),l=Ym(i);if(o!==l)if(Gm(o)&&Gm(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Yn[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||PS(t[s]))&&n.push(s);n.length&&LS(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yn[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=Yn[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function OS(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=(r==null?void 0:r[e])??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Dx=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Ix(e){return Jy(e)&&"offsetHeight"in e}const ep=30,MS=e=>!isNaN(parseFloat(e));class VS{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const s=bt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=bt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=MS(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Th);const n=this.events[t].add(r);return t==="change"?()=>{n(),ke.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=bt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ep)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,ep);return Yy(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zs(e,t){return new VS(e,t)}const{schedule:Hh}=cx(queueMicrotask,!1),Jt={x:!1,y:!1};function Lx(){return Jt.x||Jt.y}function FS(e){return e==="x"||e==="y"?Jt[e]?null:(Jt[e]=!0,()=>{Jt[e]=!1}):Jt.x||Jt.y?null:(Jt.x=Jt.y=!0,()=>{Jt.x=Jt.y=!1})}function $x(e,t){const r=OS(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function tp(e){return!(e.pointerType==="touch"||Lx())}function US(e,t,r={}){const[n,s,i]=$x(e,r),o=l=>{if(!tp(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{tp(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const Ox=(e,t)=>t?e===t?!0:Ox(e,t.parentElement):!1,qh=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,BS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zS(e){return BS.has(e.tagName)||e.tabIndex!==-1}const _o=new WeakSet;function rp(e){return t=>{t.key==="Enter"&&e(t)}}function Sc(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const WS=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=rp(()=>{if(_o.has(r))return;Sc(r,"down");const s=rp(()=>{Sc(r,"up")}),i=()=>Sc(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function np(e){return qh(e)&&!Lx()}function HS(e,t,r={}){const[n,s,i]=$x(e,r),o=l=>{const c=l.currentTarget;if(!np(l))return;_o.add(c);const u=t(c,l),d=(m,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),_o.has(c)&&_o.delete(c),np(m)&&typeof u=="function"&&u(m,{success:x})},h=m=>{d(m,c===window||c===document||r.useGlobalTarget||Ox(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),Ix(l)&&(l.addEventListener("focus",u=>WS(u,s)),!zS(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Mx(e){return Jy(e)&&"ownerSVGElement"in e}function qS(e){return Mx(e)&&e.tagName==="svg"}const lt=e=>!!(e&&e.getVelocity),KS=[...Tx,Me,kn],GS=e=>KS.find(Cx(e)),Kh=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class XS extends v.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=Ix(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function JS({children:e,isPresent:t,anchorX:r,root:n}){const s=v.useId(),i=v.useRef(null),o=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=v.useContext(Kh);return v.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:h,right:f}=o.current;if(t||!i.current||!c||!u)return;const m=r==="left"?`left: ${h}`:`right: ${f}`;i.current.dataset.motionPopId=s;const x=document.createElement("style");l&&(x.nonce=l);const w=n??document.head;return w.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{w.contains(x)&&w.removeChild(x)}},[t]),a.jsx(XS,{isPresent:t,childRef:i,sizeRef:o,children:v.cloneElement(e,{ref:i})})}const QS=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const u=Sh(YS),d=v.useId();let h=!0,f=v.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:m=>{u.set(m,!0);for(const x of u.values())if(!x)return;n&&n()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[r,u,n]);return i&&h&&(f={...f}),v.useMemo(()=>{u.forEach((m,x)=>u.set(x,!1))},[r]),v.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(e=a.jsx(JS,{isPresent:r,anchorX:l,root:c,children:e})),a.jsx(Al.Provider,{value:f,children:e})};function YS(){return new Map}function Vx(e=!0){const t=v.useContext(Al);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=v.useId();v.useEffect(()=>{if(e)return s(i)},[e]);const o=v.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const no=e=>e.key||"";function sp(e){const t=[];return v.Children.forEach(e,r=>{v.isValidElement(r)&&t.push(r)}),t}const yt=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=Vx(o),h=v.useMemo(()=>sp(e),[e]),f=o&&!u?[]:h.map(no),m=v.useRef(!0),x=v.useRef(h),w=Sh(()=>new Map),[b,y]=v.useState(h),[g,p]=v.useState(h);Gy(()=>{m.current=!1,x.current=h;for(let N=0;N<g.length;N++){const _=no(g[N]);f.includes(_)?w.delete(_):w.get(_)!==!0&&w.set(_,!1)}},[g,f.length,f.join("-")]);const k=[];if(h!==b){let N=[...h];for(let _=0;_<g.length;_++){const P=g[_],$=no(P);f.includes($)||(N.splice(_,0,P),k.push(P))}return i==="wait"&&k.length&&(N=k),p(sp(N)),y(h),null}const{forceRender:S}=v.useContext(jh);return a.jsx(a.Fragment,{children:g.map(N=>{const _=no(N),P=o&&!u?!1:h===g||f.includes(_),$=()=>{if(w.has(_))w.set(_,!0);else return;let R=!0;w.forEach(Y=>{Y||(R=!1)}),R&&(S==null||S(),p(x.current),o&&(d==null||d()),n&&n())};return a.jsx(QS,{isPresent:P,initial:!m.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:P?void 0:$,anchorX:l,children:N},_)})})},Fx=v.createContext({strict:!1}),ip={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ei={};for(const e in ip)ei[e]={isEnabled:t=>ip[e].some(r=>!!t[r])};function ZS(e){for(const t in e)ei[t]={...ei[t],...e[t]}}const e2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function al(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||e2.has(e)}let Ux=e=>!al(e);function t2(e){typeof e=="function"&&(Ux=t=>t.startsWith("on")?!al(t):e(t))}try{t2(require("@emotion/is-prop-valid").default)}catch{}function r2(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(Ux(s)||r===!0&&al(s)||!t&&!al(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const Dl=v.createContext({});function Il(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ya(e){return typeof e=="string"||Array.isArray(e)}const Gh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xh=["initial",...Gh];function Ll(e){return Il(e.animate)||Xh.some(t=>ya(e[t]))}function Bx(e){return!!(Ll(e)||e.variants)}function n2(e,t){if(Ll(e)){const{initial:r,animate:n}=e;return{initial:r===!1||ya(r)?r:void 0,animate:ya(n)?n:void 0}}return e.inherit!==!1?t:{}}function s2(e){const{initial:t,animate:r}=n2(e,v.useContext(Dl));return v.useMemo(()=>({initial:t,animate:r}),[ap(t),ap(r)])}function ap(e){return Array.isArray(e)?e.join(" "):e}const xa={};function i2(e){for(const t in e)xa[t]=e[t],Dh(t)&&(xa[t].isCSSVariable=!0)}function zx(e,{layout:t,layoutId:r}){return ci.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!xa[e]||e==="opacity")}const a2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},o2=li.length;function l2(e,t,r){let n="",s=!0;for(let i=0;i<o2;i++){const o=li[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=Dx(l,Wh[o]);if(!c){s=!1;const d=a2[o]||o;n+=`${d}(${u}) `}r&&(t[o]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function Jh(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(ci.has(c)){o=!0;continue}else if(Dh(c)){s[c]=u;continue}else{const d=Dx(u,Wh[c]);c.startsWith("origin")?(l=!0,i[c]=d):n[c]=d}}if(t.transform||(o||r?n.transform=l2(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;n.transformOrigin=`${c} ${u} ${d}`}}const Qh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Wx(e,t,r){for(const n in t)!lt(t[n])&&!zx(n,r)&&(e[n]=t[n])}function c2({transformTemplate:e},t){return v.useMemo(()=>{const r=Qh();return Jh(r,t,e),Object.assign({},r.vars,r.style)},[t])}function u2(e,t){const r=e.style||{},n={};return Wx(n,r,e),Object.assign(n,c2(e,t)),n}function d2(e,t){const r={},n=u2(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const h2={offset:"stroke-dashoffset",array:"stroke-dasharray"},f2={offset:"strokeDashoffset",array:"strokeDasharray"};function m2(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?h2:f2;e[i.offset]=Z.transform(-n);const o=Z.transform(t),l=Z.transform(r);e[i.array]=`${o} ${l}`}function Hx(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...l},c,u,d){if(Jh(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&m2(h,s,i,o,!1)}const qx=()=>({...Qh(),attrs:{}}),Kx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function p2(e,t,r,n){const s=v.useMemo(()=>{const i=qx();return Hx(i,t,Kx(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Wx(i,e.style,e),s.style={...i,...s.style}}return s}const g2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yh(e){return typeof e!="string"||e.includes("-")?!1:!!(g2.indexOf(e)>-1||/[A-Z]/u.test(e))}function y2(e,t,r,{latestValues:n},s,i=!1){const l=(Yh(e)?p2:d2)(t,n,s,e),c=r2(t,typeof e=="string",i),u=e!==v.Fragment?{...c,...l,ref:r}:{},{children:d}=t,h=v.useMemo(()=>lt(d)?d.get():d,[d]);return v.createElement(e,{...u,children:h})}function op(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function Zh(e,t,r,n){if(typeof t=="function"){const[s,i]=op(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=op(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function Eo(e){return lt(e)?e.get():e}function x2({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:v2(r,n,s,e),renderState:t()}}function v2(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=Eo(i[f]);let{initial:o,animate:l}=e;const c=Ll(e),u=Bx(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!Il(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const x=Zh(e,f[m]);if(x){const{transitionEnd:w,transition:b,...y}=x;for(const g in y){let p=y[g];if(Array.isArray(p)){const k=d?p.length-1:0;p=p[k]}p!==null&&(s[g]=p)}for(const g in w)s[g]=w[g]}}}return s}const Gx=e=>(t,r)=>{const n=v.useContext(Dl),s=v.useContext(Al),i=()=>x2(e,t,n,s);return r?i():Sh(i)};function ef(e,t,r){var i;const{style:n}=e,s={};for(const o in n)(lt(n[o])||t.style&&lt(t.style[o])||zx(o,e)||((i=r==null?void 0:r.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=n[o]);return s}const w2=Gx({scrapeMotionValuesFromProps:ef,createRenderState:Qh});function Xx(e,t,r){const n=ef(e,t,r);for(const s in e)if(lt(e[s])||lt(t[s])){const i=li.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const b2=Gx({scrapeMotionValuesFromProps:Xx,createRenderState:qx}),k2=Symbol.for("motionComponentSymbol");function Ds(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function j2(e,t,r){return v.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Ds(r)&&(r.current=n))},[t])}const tf=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),S2="framerAppearId",Jx="data-"+tf(S2),Qx=v.createContext({});function N2(e,t,r,n,s){var w,b;const{visualElement:i}=v.useContext(Dl),o=v.useContext(Fx),l=v.useContext(Al),c=v.useContext(Kh).reducedMotion,u=v.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:i,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=v.useContext(Qx);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&_2(u.current,r,s,h);const f=v.useRef(!1);v.useInsertionEffect(()=>{d&&f.current&&d.update(r,l)});const m=r[Jx],x=v.useRef(!!m&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,m))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,m)));return Gy(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),v.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,m)}),x.current=!1),d.enteringChildren=void 0)}),d}function _2(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Yx(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&Ds(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function Yx(e){if(e)return e.options.allowProjection!==!1?e.projection:Yx(e.parent)}function Nc(e,{forwardMotionProps:t=!1}={},r,n){r&&ZS(r);const s=Yh(e)?b2:w2;function i(l,c){let u;const d={...v.useContext(Kh),...l,layoutId:E2(l)},{isStatic:h}=d,f=s2(l),m=s(l,h);if(!h&&Nh){P2();const x=C2(d);u=x.MeasureLayout,f.visualElement=N2(e,m,d,n,x.ProjectionNode)}return a.jsxs(Dl.Provider,{value:f,children:[u&&f.visualElement?a.jsx(u,{visualElement:f.visualElement,...d}):null,y2(e,l,j2(m,f.visualElement,c),m,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=v.forwardRef(i);return o[k2]=e,o}function E2({layoutId:e}){const t=v.useContext(jh).id;return t&&e!==void 0?t+"-"+e:e}function P2(e,t){v.useContext(Fx).strict}function C2(e){const{drag:t,layout:r}=ei;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function T2(e,t){if(typeof Proxy>"u")return Nc;const r=new Map,n=(i,o)=>Nc(i,o,e,t),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,Nc(o,void 0,e,t)),r.get(o))})}function Zx({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function R2({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function A2(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function _c(e){return e===void 0||e===1}function nd({scale:e,scaleX:t,scaleY:r}){return!_c(e)||!_c(t)||!_c(r)}function Un(e){return nd(e)||ev(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ev(e){return lp(e.x)||lp(e.y)}function lp(e){return e&&e!=="0%"}function ol(e,t,r){const n=e-r,s=t*n;return r+s}function cp(e,t,r,n,s){return s!==void 0&&(e=ol(e,s,n)),ol(e,r,n)+t}function sd(e,t=0,r=1,n,s){e.min=cp(e.min,t,r,n,s),e.max=cp(e.max,t,r,n,s)}function tv(e,{x:t,y:r}){sd(e.x,t.translate,t.scale,t.originPoint),sd(e.y,r.translate,r.scale,r.originPoint)}const up=.999999999999,dp=1.0000000000001;function D2(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ls(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,tv(e,o)),n&&Un(i.latestValues)&&Ls(e,i.latestValues))}t.x<dp&&t.x>up&&(t.x=1),t.y<dp&&t.y>up&&(t.y=1)}function Is(e,t){e.min=e.min+t,e.max=e.max+t}function hp(e,t,r,n,s=.5){const i=Se(e.min,e.max,s);sd(e,t,r,i,n)}function Ls(e,t){hp(e.x,t.x,t.scaleX,t.scale,t.originX),hp(e.y,t.y,t.scaleY,t.scale,t.originY)}function rv(e,t){return Zx(A2(e.getBoundingClientRect(),t))}function I2(e,t,r){const n=rv(e,r),{scroll:s}=t;return s&&(Is(n.x,s.offset.x),Is(n.y,s.offset.y)),n}const fp=()=>({translate:0,scale:1,origin:0,originPoint:0}),$s=()=>({x:fp(),y:fp()}),mp=()=>({min:0,max:0}),Le=()=>({x:mp(),y:mp()}),id={current:null},nv={current:!1};function L2(){if(nv.current=!0,!!Nh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>id.current=e.matches;e.addEventListener("change",t),t()}else id.current=!1}const $2=new WeakMap;function O2(e,t,r){for(const n in t){const s=t[n],i=r[n];if(lt(s))e.addValue(n,s);else if(lt(i))e.addValue(n,Zs(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,Zs(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const pp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class M2{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Bh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=bt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ke.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Ll(r),this.isVariantNode=Bx(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const m=h[f];c[f]!==void 0&&lt(m)&&m.set(c[f])}}mount(t){var r;this.current=t,$2.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),nv.current||L2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:id.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),bn(this.notifyUpdate),bn(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ci.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ke.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ei){const r=ei[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Le()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<pp.length;n++){const s=pp[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=O2(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Zs(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(Xy(n)||Qy(n))?n=parseFloat(n):!GS(n)&&kn.test(r)&&(n=Ax(t,r)),this.setBaseTarget(t,lt(n)?n.get():n)),lt(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var i;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=Zh(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);o&&(n=o[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!lt(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Th),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Hh.render(this.render)}}class sv extends M2{constructor(){super(...arguments),this.KeyframeResolver=$S}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;lt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function iv(e,{style:t,vars:r},n,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function V2(e){return window.getComputedStyle(e)}class F2 extends sv{constructor(){super(...arguments),this.type="html",this.renderInstance=iv}readValueFromInstance(t,r){var n;if(ci.has(r))return(n=this.projection)!=null&&n.isProjecting?Ju(r):tS(t,r);{const s=V2(t),i=(Dh(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return rv(t,r)}build(t,r,n){Jh(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return ef(t,r,n)}}const av=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function U2(e,t,r,n){iv(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(av.has(s)?s:tf(s),t.attrs[s])}class B2 extends sv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Le}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(ci.has(r)){const n=Rx(r);return n&&n.default||0}return r=av.has(r)?r:tf(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return Xx(t,r,n)}build(t,r,n){Hx(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){U2(t,r,n,s)}mount(t){this.isSVGTag=Kx(t.tagName),super.mount(t)}}const z2=(e,t)=>Yh(e)?new B2(t):new F2(t,{allowProjection:e!==v.Fragment});function Ws(e,t,r){const n=e.getProps();return Zh(n,t,r!==void 0?r:n.custom,e)}const ad=e=>Array.isArray(e);function W2(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Zs(r))}function H2(e){return ad(e)?e[e.length-1]||0:e}function q2(e,t){const r=Ws(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const l=H2(i[o]);W2(e,o,l)}}function K2(e){return!!(lt(e)&&e.add)}function od(e,t){const r=e.getValue("willChange");if(K2(r))return r.add(t);if(!r&&Vr.WillChange){const n=new Vr.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function ov(e){return e.props[Jx]}const G2=e=>e!==null;function X2(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(G2),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const J2={type:"spring",stiffness:500,damping:25,restSpeed:10},Q2=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Y2={type:"keyframes",duration:.8},Z2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eN=(e,{keyframes:t})=>t.length>2?Y2:ci.has(e)?e.startsWith("scale")?Q2(t[1]):J2:Z2;function tN({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const rf=(e,t,r,n={},s,i)=>o=>{const l=zh(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-pr(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};tN(l)||Object.assign(d,eN(e,d)),d.duration&&(d.duration=pr(d.duration)),d.repeatDelay&&(d.repeatDelay=pr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(td(d),d.delay===0&&(h=!0)),(Vr.instantAnimations||Vr.skipAnimations)&&(h=!0,td(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const f=X2(d.keyframes,l);if(f!==void 0){ke.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new Uh(d):new SS(d)};function rN({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function lv(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(i=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),f=l[d];if(f===void 0||u&&rN(u,d))continue;const m={delay:r,...zh(i||{},d)},x=h.get();if(x!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===x&&!m.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const y=ov(e);if(y){const g=window.MotionHandoffAnimation(y,d,ke);g!==null&&(m.startTime=g,w=!0)}}od(e,d),h.start(rf(d,h,f,e.shouldReduceMotion&&Px.has(d)?{type:!1}:m,e,w));const b=h.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{ke.update(()=>{o&&q2(e,o)})}),c}function cv(e,t,r,n=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),o=e.size,l=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:l-i*n}function ld(e,t,r={}){var c;const n=Ws(e,t,r.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(lv(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return nN(e,t,u,d,h,f,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(r.delay)])}function nN(e,t,r=0,n=0,s=0,i=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(ld(c,t,{...o,delay:r+(typeof n=="function"?0:n)+cv(e.variantChildren,c,n,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function sN(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>ld(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=ld(e,t,r);else{const s=typeof t=="function"?Ws(e,t,r.custom):t;n=Promise.all(lv(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function uv(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const iN=Xh.length;function dv(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?dv(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<iN;r++){const n=Xh[r],s=e.props[n];(ya(s)||s===!1)&&(t[n]=s)}return t}const aN=[...Gh].reverse(),oN=Gh.length;function lN(e){return t=>Promise.all(t.map(({animation:r,options:n})=>sN(e,r,n)))}function cN(e){let t=lN(e),r=gp(),n=!0;const s=c=>(u,d)=>{var f;const h=Ws(e,d,c==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:x,...w}=h;u={...u,...w,...x}}return u};function i(c){t=c(e)}function o(c){const{props:u}=e,d=dv(e.parent)||{},h=[],f=new Set;let m={},x=1/0;for(let b=0;b<oN;b++){const y=aN[b],g=r[y],p=u[y]!==void 0?u[y]:d[y],k=ya(p),S=y===c?g.isActive:null;S===!1&&(x=b);let N=p===d[y]&&p!==u[y]&&k;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),g.protectedKeys={...m},!g.isActive&&S===null||!p&&!g.prevProp||Il(p)||typeof p=="boolean")continue;const _=uN(g.prevProp,p);let P=_||y===c&&g.isActive&&!N&&k||b>x&&k,$=!1;const R=Array.isArray(p)?p:[p];let Y=R.reduce(s(y),{});S===!1&&(Y={});const{prevResolvedValues:Ce={}}=g,Qe={...Ce,...Y},I=O=>{P=!0,f.has(O)&&($=!0,f.delete(O)),g.needsAnimating[O]=!0;const j=e.getValue(O);j&&(j.liveStyle=!1)};for(const O in Qe){const j=Y[O],C=Ce[O];if(m.hasOwnProperty(O))continue;let E=!1;ad(j)&&ad(C)?E=!uv(j,C):E=j!==C,E?j!=null?I(O):f.add(O):j!==void 0&&f.has(O)?I(O):g.protectedKeys[O]=!0}g.prevProp=p,g.prevResolvedValues=Y,g.isActive&&(m={...m,...Y}),n&&e.blockInitialAnimation&&(P=!1);const L=N&&_;P&&(!L||$)&&h.push(...R.map(O=>{const j={type:y};if(typeof O=="string"&&n&&!L&&e.manuallyAnimateOnMount&&e.parent){const{parent:C}=e,E=Ws(C,O);if(C.enteringChildren&&E){const{delayChildren:M}=E.transition||{};j.delay=cv(C.enteringChildren,e,M)}}return{animation:O,options:j}}))}if(f.size){const b={};if(typeof u.initial!="boolean"){const y=Ws(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(b.transition=y.transition)}f.forEach(y=>{const g=e.getBaseTarget(y),p=e.getValue(y);p&&(p.liveStyle=!0),b[y]=g??null}),h.push({animation:b})}let w=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(h):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(c,u)}),r[c].isActive=u;const d=o(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=gp(),n=!0}}}function uN(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!uv(t,e):!1}function Ln(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gp(){return{animate:Ln(!0),whileInView:Ln(),whileHover:Ln(),whileTap:Ln(),whileDrag:Ln(),whileFocus:Ln(),exit:Ln()}}class En{constructor(t){this.isMounted=!1,this.node=t}update(){}}class dN extends En{constructor(t){super(t),t.animationState||(t.animationState=cN(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Il(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let hN=0;class fN extends En{constructor(){super(...arguments),this.id=hN++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const mN={animation:{Feature:dN},exit:{Feature:fN}};function va(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Da(e){return{point:{x:e.pageX,y:e.pageY}}}const pN=e=>t=>qh(t)&&e(t,Da(t));function zi(e,t,r,n){return va(e,t,pN(r),n)}const hv=1e-4,gN=1-hv,yN=1+hv,fv=.01,xN=0-fv,vN=0+fv;function ht(e){return e.max-e.min}function wN(e,t,r){return Math.abs(e-t)<=r}function yp(e,t,r,n=.5){e.origin=n,e.originPoint=Se(t.min,t.max,e.origin),e.scale=ht(r)/ht(t),e.translate=Se(r.min,r.max,e.origin)-e.originPoint,(e.scale>=gN&&e.scale<=yN||isNaN(e.scale))&&(e.scale=1),(e.translate>=xN&&e.translate<=vN||isNaN(e.translate))&&(e.translate=0)}function Wi(e,t,r,n){yp(e.x,t.x,r.x,n?n.originX:void 0),yp(e.y,t.y,r.y,n?n.originY:void 0)}function xp(e,t,r){e.min=r.min+t.min,e.max=e.min+ht(t)}function bN(e,t,r){xp(e.x,t.x,r.x),xp(e.y,t.y,r.y)}function vp(e,t,r){e.min=t.min-r.min,e.max=e.min+ht(t)}function Hi(e,t,r){vp(e.x,t.x,r.x),vp(e.y,t.y,r.y)}function Ot(e){return[e("x"),e("y")]}const mv=({current:e})=>e?e.ownerDocument.defaultView:null,wp=(e,t)=>Math.abs(e-t);function kN(e,t){const r=wp(e.x,t.x),n=wp(e.y,t.y);return Math.sqrt(r**2+n**2)}class pv{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Pc(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,x=kN(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!x)return;const{point:w}=f,{timestamp:b}=Ze;this.history.push({...w,timestamp:b});const{onStart:y,onMove:g}=this.handlers;m||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Ec(m,this.transformPagePoint),ke.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:x,onSessionEnd:w,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Pc(f.type==="pointercancel"?this.lastMoveEventInfo:Ec(m,this.transformPagePoint),this.history);this.startEvent&&x&&x(f,y),w&&w(f,y)},!qh(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const l=Da(t),c=Ec(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=Ze;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(t,Pc(c,this.history)),this.removeListeners=Ta(zi(this.contextWindow,"pointermove",this.handlePointerMove),zi(this.contextWindow,"pointerup",this.handlePointerUp),zi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),bn(this.updatePoint)}}function Ec(e,t){return t?{point:t(e.point)}:e}function bp(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Pc({point:e},t){return{point:e,delta:bp(e,gv(t)),offset:bp(e,jN(t)),velocity:SN(t,.1)}}function jN(e){return e[0]}function gv(e){return e[e.length-1]}function SN(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=gv(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>pr(t)));)r--;if(!n)return{x:0,y:0};const i=gr(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function NN(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Se(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Se(r,e,n.max):Math.min(e,r)),e}function kp(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function _N(e,{top:t,left:r,bottom:n,right:s}){return{x:kp(e.x,r,s),y:kp(e.y,t,n)}}function jp(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function EN(e,t){return{x:jp(e.x,t.x),y:jp(e.y,t.y)}}function PN(e,t){let r=.5;const n=ht(e),s=ht(t);return s>n?r=ma(t.min,t.max-n,e.min):n>s&&(r=ma(e.min,e.max-s,t.min)),Mr(0,1,r)}function CN(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const cd=.35;function TN(e=cd){return e===!1?e=0:e===!0&&(e=cd),{x:Sp(e,"left","right"),y:Sp(e,"top","bottom")}}function Sp(e,t,r){return{min:Np(e,t),max:Np(e,r)}}function Np(e,t){return typeof e=="number"?e:e[t]||0}const RN=new WeakMap;class AN{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Le(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Da(h).point)},o=(h,f)=>{const{drag:m,dragPropagation:x,onDragStart:w}=this.getProps();if(m&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=FS(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ot(y=>{let g=this.getAxisMotionValue(y).get()||0;if(yr.test(g)){const{projection:p}=this.visualElement;if(p&&p.layout){const k=p.layout.layoutBox[y];k&&(g=ht(k)*(parseFloat(g)/100))}}this.originPoint[y]=g}),w&&ke.postRender(()=>w(h,f)),od(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:x,onDirectionLock:w,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:y}=f;if(x&&this.currentDirection===null){this.currentDirection=DN(y),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),b&&b(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ot(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new pv(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:mv(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ke.postRender(()=>l(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!so(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=NN(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Ds(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=_N(n.layoutBox,t):this.constraints=!1,this.elastic=TN(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ot(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=CN(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Ds(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=I2(n,s.root,this.visualElement.getTransformPagePoint());let o=EN(s.layout.layoutBox,i);if(r){const l=r(R2(o));this.hasMutatedConstraints=!!l,l&&(o=Zx(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Ot(d=>{if(!so(d,r,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,x={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return od(this.visualElement,t),n.start(rf(t,n,0,r,this.visualElement,!1))}stopAnimation(){Ot(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ot(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ot(r=>{const{drag:n}=this.getProps();if(!so(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r];i.set(t[r]-Se(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Ds(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ot(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=PN({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ot(o=>{if(!so(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Se(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;RN.set(this.visualElement,this);const t=this.visualElement.current,r=zi(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Ds(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ke.read(n);const o=va(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ot(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=cd,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function so(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function DN(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class IN extends En{constructor(t){super(t),this.removeGroupControls=zt,this.removeListeners=zt,this.controls=new AN(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zt}unmount(){this.removeGroupControls(),this.removeListeners()}}const _p=e=>(t,r)=>{e&&ke.postRender(()=>e(t,r))};class LN extends En{constructor(){super(...arguments),this.removePointerDownListener=zt}onPointerDown(t){this.session=new pv(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mv(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:_p(t),onStart:_p(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&ke.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=zi(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Po={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ep(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Si={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Z.test(e))e=parseFloat(e);else return e;const r=Ep(e,t.target.x),n=Ep(e,t.target.y);return`${r}% ${n}%`}},$N={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=kn.parse(e);if(s.length>5)return n;const i=kn.createTransformer(e),o=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=Se(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let Cc=!1;class ON extends v.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;i2(MN),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),Cc&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Po.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,Cc=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ke.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Hh.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;Cc=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function yv(e){const[t,r]=Vx(),n=v.useContext(jh);return a.jsx(ON,{...e,layoutGroup:n,switchLayoutGroup:v.useContext(Qx),isPresent:t,safeToRemove:r})}const MN={borderRadius:{...Si,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Si,borderTopRightRadius:Si,borderBottomLeftRadius:Si,borderBottomRightRadius:Si,boxShadow:$N};function VN(e,t,r){const n=lt(e)?e:Zs(e);return n.start(rf("",n,t,r)),n.animation}const FN=(e,t)=>e.depth-t.depth;class UN{constructor(){this.children=[],this.isDirty=!1}add(t){_h(this.children,t),this.isDirty=!0}remove(t){Eh(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(FN),this.isDirty=!1,this.children.forEach(t)}}function BN(e,t){const r=bt.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(bn(n),e(i-t))};return ke.setup(n,!0),()=>bn(n)}const xv=["TopLeft","TopRight","BottomLeft","BottomRight"],zN=xv.length,Pp=e=>typeof e=="string"?parseFloat(e):e,Cp=e=>typeof e=="number"||Z.test(e);function WN(e,t,r,n,s,i){s?(e.opacity=Se(0,r.opacity??1,HN(n)),e.opacityExit=Se(t.opacity??1,0,qN(n))):i&&(e.opacity=Se(t.opacity??1,r.opacity??1,n));for(let o=0;o<zN;o++){const l=`border${xv[o]}Radius`;let c=Tp(t,l),u=Tp(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Cp(c)===Cp(u)?(e[l]=Math.max(Se(Pp(c),Pp(u),n),0),(yr.test(u)||yr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Se(t.rotate||0,r.rotate||0,n))}function Tp(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const HN=vv(0,.5,ix),qN=vv(.5,.95,zt);function vv(e,t,r){return n=>n<e?0:n>t?1:r(ma(e,t,n))}function Rp(e,t){e.min=t.min,e.max=t.max}function $t(e,t){Rp(e.x,t.x),Rp(e.y,t.y)}function Ap(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Dp(e,t,r,n,s){return e-=t,e=ol(e,1/r,n),s!==void 0&&(e=ol(e,1/s,n)),e}function KN(e,t=0,r=1,n=.5,s,i=e,o=e){if(yr.test(t)&&(t=parseFloat(t),t=Se(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Se(i.min,i.max,n);e===i&&(l-=t),e.min=Dp(e.min,t,r,l,s),e.max=Dp(e.max,t,r,l,s)}function Ip(e,t,[r,n,s],i,o){KN(e,t[r],t[n],t[s],t.scale,i,o)}const GN=["x","scaleX","originX"],XN=["y","scaleY","originY"];function Lp(e,t,r,n){Ip(e.x,t,GN,r?r.x:void 0,n?n.x:void 0),Ip(e.y,t,XN,r?r.y:void 0,n?n.y:void 0)}function $p(e){return e.translate===0&&e.scale===1}function wv(e){return $p(e.x)&&$p(e.y)}function Op(e,t){return e.min===t.min&&e.max===t.max}function JN(e,t){return Op(e.x,t.x)&&Op(e.y,t.y)}function Mp(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function bv(e,t){return Mp(e.x,t.x)&&Mp(e.y,t.y)}function Vp(e){return ht(e.x)/ht(e.y)}function Fp(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class QN{constructor(){this.members=[]}add(t){_h(this.members,t),t.scheduleRender()}remove(t){if(Eh(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YN(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:x}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),m&&(n+=`skewX(${m}deg) `),x&&(n+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Tc=["","X","Y","Z"],ZN=1e3;let e_=0;function Rc(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function kv(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=ov(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",ke,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&kv(n)}function jv({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=e_++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(n_),this.nodes.forEach(o_),this.nodes.forEach(l_),this.nodes.forEach(s_)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new UN)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Th),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Mx(o)&&!qS(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;ke.read(()=>{h=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=BN(f,250),Po.hasAnimatedSinceResize&&(Po.hasAnimatedSinceResize=!1,this.nodes.forEach(zp)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||f_,{onLayoutAnimationStart:w,onLayoutAnimationComplete:b}=u.getProps(),y=!this.targetLayout||!bv(this.targetLayout,m),g=!h&&f;if(this.options.layoutRoot||this.resumeFrom||g||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const p={...zh(x,"layout"),onPlay:w,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(p.delay=0,p.type=!1),this.startAnimation(p),this.setAnimationOrigin(d,g)}else h||zp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c_),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kv(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Up);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Bp);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(a_),this.nodes.forEach(t_),this.nodes.forEach(r_)):this.nodes.forEach(Bp),this.clearAllSnapshots();const l=bt.now();Ze.delta=Mr(0,1e3/60,l-Ze.timestamp),Ze.timestamp=l,Ze.isProcessing=!0,vc.update.process(Ze),vc.preRender.process(Ze),vc.render.process(Ze),Ze.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Hh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(i_),this.sharedNodes.forEach(u_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ht(this.snapshot.measuredBox.x)&&!ht(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!wv(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Un(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),m_(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Le();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(p_))){const{scroll:d}=this.root;d&&(Is(l.x,d.offset.x),Is(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Le();if($t(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&$t(l,o),Is(l.x,h.offset.x),Is(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Le();$t(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ls(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Un(d.latestValues)&&Ls(c,d.latestValues)}return Un(this.latestValues)&&Ls(c,this.latestValues),c}removeTransform(o){const l=Le();$t(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Un(u.latestValues))continue;nd(u.latestValues)&&u.updateSnapshot();const d=Le(),h=u.measurePageBox();$t(d,h),Lp(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Un(this.latestValues)&&Lp(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ze.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Ze.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),Hi(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Le(),this.targetWithTransforms=Le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$t(this.target,this.layout.layoutBox),tv(this.target,this.targetDelta)):$t(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),Hi(this.relativeTargetOrigin,this.target,m.target),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||nd(this.parent.latestValues)||ev(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ze.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;$t(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;D2(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Le());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ap(this.prevProjectionDelta.x,this.projectionDelta.x),Ap(this.prevProjectionDelta.y,this.projectionDelta.y)),Wi(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Fp(this.projectionDelta.x,this.prevProjectionDelta.x)||!Fp(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$s(),this.projectionDelta=$s(),this.projectionDeltaWithTransform=$s()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=$s();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Le(),m=c?c.source:void 0,x=this.layout?this.layout.source:void 0,w=m!==x,b=this.getStack(),y=!b||b.members.length<=1,g=!!(w&&!y&&this.options.crossfade===!0&&!this.path.some(h_));this.animationProgress=0;let p;this.mixTargetDelta=k=>{const S=k/1e3;Wp(h.x,o.x,S),Wp(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hi(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),d_(this.relativeTarget,this.relativeTargetOrigin,f,S),p&&JN(this.relativeTarget,p)&&(this.isProjectionDirty=!1),p||(p=Le()),$t(p,this.relativeTarget)),w&&(this.animationValues=d,WN(d,u,this.latestValues,S,g,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(bn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ke.update(()=>{Po.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zs(0)),this.currentAnimation=VN(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Sv(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Le();const h=ht(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=ht(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}$t(l,c),Ls(l,d),Wi(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new QN),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Rc("z",o,u,this.animationValues);for(let d=0;d<Tc.length;d++)Rc(`rotate${Tc[d]}`,o,u,this.animationValues),Rc(`skew${Tc[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Eo(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Eo(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Un(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=YN(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in xa){if(d[x]===void 0)continue;const{correct:w,applyTo:b,isCSSVariable:y}=xa[x],g=h==="none"?d[x]:w(d[x],u);if(b){const p=b.length;for(let k=0;k<p;k++)o[b[k]]=g}else y?this.options.visualElement.renderState.vars[x]=g:o[x]=g}this.options.layoutId&&(o.pointerEvents=u===this?Eo(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Up),this.root.sharedNodes.clear()}}}function t_(e){e.updateLayout()}function r_(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?Ot(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=ht(f);f.min=n[h].min,f.max=f.min+m}):Sv(i,t.layoutBox,n)&&Ot(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=ht(n[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=$s();Wi(l,n,t.layoutBox);const c=$s();o?Wi(c,e.applyTransform(s,!0),t.measuredBox):Wi(c,n,t.layoutBox);const u=!wv(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const x=Le();Hi(x,t.layoutBox,f.layoutBox);const w=Le();Hi(w,n,m.layoutBox),bv(x,w)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=x,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function n_(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function s_(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function i_(e){e.clearSnapshot()}function Up(e){e.clearMeasurements()}function Bp(e){e.isLayoutDirty=!1}function a_(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function zp(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function o_(e){e.resolveTargetDelta()}function l_(e){e.calcProjection()}function c_(e){e.resetSkewAndRotation()}function u_(e){e.removeLeadSnapshot()}function Wp(e,t,r){e.translate=Se(t.translate,0,r),e.scale=Se(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Hp(e,t,r,n){e.min=Se(t.min,r.min,n),e.max=Se(t.max,r.max,n)}function d_(e,t,r,n){Hp(e.x,t.x,r.x,n),Hp(e.y,t.y,r.y,n)}function h_(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const f_={duration:.45,ease:[.4,0,.1,1]},qp=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Kp=qp("applewebkit/")&&!qp("chrome/")?Math.round:zt;function Gp(e){e.min=Kp(e.min),e.max=Kp(e.max)}function m_(e){Gp(e.x),Gp(e.y)}function Sv(e,t,r){return e==="position"||e==="preserve-aspect"&&!wN(Vp(t),Vp(r),.2)}function p_(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const g_=jv({attachResizeListener:(e,t)=>va(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ac={current:void 0},Nv=jv({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ac.current){const e=new g_({});e.mount(window),e.setOptions({layoutScroll:!0}),Ac.current=e}return Ac.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),y_={pan:{Feature:LN},drag:{Feature:IN,ProjectionNode:Nv,MeasureLayout:yv}};function Xp(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&ke.postRender(()=>i(t,Da(t)))}class x_ extends En{mount(){const{current:t}=this.node;t&&(this.unmount=US(t,(r,n)=>(Xp(this.node,n,"Start"),s=>Xp(this.node,s,"End"))))}unmount(){}}class v_ extends En{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ta(va(this.node.current,"focus",()=>this.onFocus()),va(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Jp(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&ke.postRender(()=>i(t,Da(t)))}class w_ extends En{mount(){const{current:t}=this.node;t&&(this.unmount=HS(t,(r,n)=>(Jp(this.node,n,"Start"),(s,{success:i})=>Jp(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ud=new WeakMap,Dc=new WeakMap,b_=e=>{const t=ud.get(e.target);t&&t(e)},k_=e=>{e.forEach(b_)};function j_({root:e,...t}){const r=e||document;Dc.has(r)||Dc.set(r,{});const n=Dc.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(k_,{root:e,...t})),n[s]}function S_(e,t,r){const n=j_(t);return ud.set(e,r),n.observe(e),()=>{ud.delete(e),n.unobserve(e)}}const N_={some:0,all:1};class __ extends En{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:N_[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return S_(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(E_(t,r))&&this.startObserver()}unmount(){}}function E_({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const P_={inView:{Feature:__},tap:{Feature:w_},focus:{Feature:v_},hover:{Feature:x_}},C_={layout:{ProjectionNode:Nv,MeasureLayout:yv}},T_={...mN,...P_,...y_,...C_},H=T2(T_,z2);var R_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const A_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V=(e,t)=>{const r=v.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>v.createElement("svg",{ref:u,...R_,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${A_(e)}`,...c},[...t.map(([d,h])=>v.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},nf=V("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Pn=V("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),mt=V("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),$n=V("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),wa=V("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),D_=V("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Co=V("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),I_=V("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),L_=V("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ic=V("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),$_=V("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ne=V("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),_v=V("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),dr=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Tr=V("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),hr=V("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),O_=V("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ev=V("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),Ct=V("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Pv=V("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),sf=V("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),M_=V("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ll=V("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),V_=V("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qt=V("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),F_=V("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Cv=V("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Tv=V("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),U_=V("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]),af=V("GitPullRequest",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]),B_=V("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Qp=V("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),Lc=V("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),of=V("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Ft=V("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),To=V("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),z_=V("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Rv=V("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),W_=V("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),H_=V("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Av=V("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),q_=V("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Yp=V("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),K_=V("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),G_=V("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),cl=V("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),X_=V("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),J_=V("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Q_=V("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),es=V("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),$c=V("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Dv=V("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Zp=V("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Y_=V("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ba=V("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),e0=V("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Iv=V("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Z_=V("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ka=V("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),eE=V("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),tE=V("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Xn=V("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),jn=V("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),rE=V("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Lv=V("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),lf=V("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),nE=V("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),xr=V("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ia=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dd=V("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function sE({isCompact:e}){const r=wr().pathname.split("/").filter(s=>s),n={"strategic-directives":"Strategic Directives",prds:"PRDs",handoffs:"Handoffs",context:"Context Monitor",progress:"Progress Tracker"};return a.jsxs("nav",{className:`flex items-center ${e?"py-1 px-2":"py-2 px-4"}`,children:[a.jsxs(sr,{to:"/",className:"flex items-center text-purple-100 hover:text-white transition-colors drop-shadow-sm",children:[a.jsx(of,{className:e?"w-3 h-3":"w-4 h-4"}),a.jsx("span",{className:`${e?"ml-1 text-xs":"ml-2 text-sm"}`,children:"Dashboard"})]}),r.map((s,i)=>{const o=`/${r.slice(0,i+1).join("/")}`,l=i===r.length-1,c=n[s]||s;return a.jsxs(Na.Fragment,{children:[a.jsx(hr,{className:`${e?"w-3 h-3 mx-1":"w-4 h-4 mx-2"} text-purple-200`}),l?a.jsx("span",{className:`${e?"text-xs":"text-sm"} font-medium text-white drop-shadow-sm`,children:c}):a.jsx(sr,{to:o,className:`${e?"text-xs":"text-sm"} text-purple-100 hover:text-white transition-colors drop-shadow-sm`,children:c})]},s)})]})}function $l({onRefresh:e,isCompact:t=!1,isCollapsed:r=!1}){const[n,s]=v.useState("idle"),[i,o]=v.useState(""),[l,c]=v.useState(null),u=async()=>{console.log("🔄 Manual Refresh: Starting database sync..."),s("refreshing"),o("Syncing with database...");try{const m=await fetch("/api/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"database"})});if(!m.ok)throw new Error("Database refresh failed");const x=await m.json();console.log("✅ Database refreshed:",x),e&&(console.log("🔄 Triggering UI refresh..."),await e()),s("complete"),o(`Refreshed: ${x.sds||0} SDs, ${x.prds||0} PRDs`),c(new Date),setTimeout(()=>{s("idle"),o("")},3e3)}catch(m){console.error("❌ Refresh Error:",m),s("error"),o(`Failed: ${m.message}`),setTimeout(()=>{s("idle"),o("")},5e3)}},d=()=>{switch(n){case"refreshing":return a.jsx(sf,{className:"w-4 h-4 animate-spin"});case"complete":return a.jsx(Ne,{className:"w-4 h-4 text-green-500"});case"error":return a.jsx(Pn,{className:"w-4 h-4 text-red-500"});default:return a.jsx(es,{className:"w-4 h-4"})}},h=()=>{switch(n){case"refreshing":return"bg-blue-500 hover:bg-blue-600";case"complete":return"bg-green-500 hover:bg-green-600";case"error":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-600 hover:bg-gray-700"}},f=n==="refreshing";return a.jsxs("div",{className:"relative flex items-center",children:[a.jsxs(H.button,{onClick:u,disabled:f,className:`
          flex items-center ${r?"justify-center w-full":""} transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
          ${h()} text-white rounded hover:opacity-90
          ${r?"px-2 py-2":t?"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm":"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base"}
        `,whileHover:{scale:f?1:1.05},whileTap:{scale:f?1:.95},title:r?"Manual Refresh - Sync with database":"Manually sync with database (automatic real-time updates are active)",children:[d(),!r&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:`${t?"ml-1":"ml-1 sm:ml-2"} hidden xs:inline`,children:[n==="idle"&&"Manual Refresh",n==="refreshing"&&"Syncing...",n==="complete"&&"Synced!",n==="error"&&"Failed"]}),a.jsxs("span",{className:"xs:hidden ml-1",children:[n==="idle"&&"↻",n==="refreshing"&&"↻",n==="complete"&&"✓",n==="error"&&"✗"]})]})]}),a.jsx(yt,{children:i&&!r&&a.jsx(H.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`
              absolute left-full ml-4 top-1/2 transform -translate-y-1/2
              text-sm px-3 py-1 rounded-lg whitespace-nowrap z-50
              ${n==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":n==="complete"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}
              ${t?"text-xs px-2 py-0.5":""}
            `,children:i})}),a.jsx(yt,{children:r&&i&&a.jsxs(H.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`
              absolute left-full ml-2 top-1/2 transform -translate-y-1/2
              text-xs px-2 py-1 rounded-lg whitespace-nowrap z-50 pointer-events-none
              ${n==="error"?"bg-red-900 text-red-200":n==="complete"?"bg-green-900 text-green-200":"bg-blue-900 text-blue-200"}
            `,children:[n==="refreshing"&&"Syncing",n==="complete"&&"Done!",n==="error"&&"Error"]})}),l&&n==="idle"&&a.jsxs("div",{className:`absolute left-full ml-4 top-full mt-1 text-gray-500 dark:text-gray-400 whitespace-nowrap ${t?"text-xs":"text-sm"}`,children:["Last refresh: ",l.toLocaleTimeString()]}),a.jsx("div",{className:"absolute -top-1 -right-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-400 rounded-full animate-ping"})]})})]})}const $v=({className:e=""})=>{const t=()=>{const c=localStorage.getItem("theme");return c?c==="dark":!0},[r,n]=v.useState(t),[s,i]=v.useState(!1);v.useLayoutEffect(()=>{const c=document.documentElement;r?(c.classList.add("dark"),c.classList.remove("light"),localStorage.setItem("theme","dark")):(c.classList.remove("dark"),c.classList.add("light"),localStorage.setItem("theme","light"))},[r]),v.useEffect(()=>{const c=setTimeout(()=>{const u=document.documentElement,d=localStorage.getItem("theme");d!=="light"?(u.classList.add("dark"),u.classList.remove("light"),d||localStorage.setItem("theme","dark"),n(!0)):(u.classList.remove("dark"),u.classList.add("light"),n(!1))},10);return()=>clearTimeout(c)},[]);const o=c=>{const u=document.documentElement;c?(u.classList.add("dark"),u.classList.remove("light"),localStorage.setItem("theme","dark")):(u.classList.remove("dark"),u.classList.add("light"),localStorage.setItem("theme","light"))},l=()=>{if(s)return;i(!0);const c=!r;n(c),o(c),setTimeout(()=>i(!1),300)};return a.jsxs("button",{onClick:l,className:`
        relative flex items-center justify-center
        w-12 h-6 rounded-full transition-all duration-300 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${r?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-600"}
        ${s?"scale-95":"hover:scale-105"}
        ${e}
      `,title:r?"Switch to light mode":"Switch to dark mode","aria-label":r?"Switch to light mode":"Switch to dark mode",disabled:s,children:[a.jsx("div",{className:`
        absolute inset-0 rounded-full transition-all duration-300
        ${r?"bg-gradient-to-r from-blue-600 to-blue-500":"bg-gradient-to-r from-gray-300 to-gray-200"}
      `}),a.jsxs("div",{className:`
        relative w-5 h-5 rounded-full transition-all duration-300 ease-in-out transform
        bg-white dark:bg-gray-100 shadow-lg
        flex items-center justify-center
        ${r?"translate-x-3":"-translate-x-3"}
        ${s?"scale-90":""}
      `,children:[a.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${r?"opacity-100":"opacity-0"}
        `,children:a.jsx(G_,{className:"w-3 h-3 text-blue-600 dark:text-blue-500"})}),a.jsx("div",{className:`
          absolute inset-0 flex items-center justify-center
          transition-opacity duration-200
          ${r?"opacity-0":"opacity-100"}
        `,children:a.jsx(Z_,{className:"w-3 h-3 text-yellow-500"})})]}),a.jsx("div",{className:`
        absolute inset-0 rounded-full opacity-0 transition-opacity duration-300
        ${r?"bg-blue-400 group-hover:opacity-20":"bg-yellow-400 group-hover:opacity-20"}
        pointer-events-none
      `})]})};function Ol(){const[e,t]=v.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return v.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(prefers-reduced-motion: reduce)"),n=s=>{t(s.matches)};if(r.addEventListener)return r.addEventListener("change",n),()=>r.removeEventListener("change",n);if(r.addListener)return r.addListener(n),()=>r.removeListener(n)},[]),e}const iE={normal:200},Ov={easeOut:[0,0,.2,1],spring:{type:"spring",stiffness:300,damping:30}},aE={slideUp:{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:iE.normal/1e3,ease:Ov.easeOut}}},oE={container:{animate:{transition:{staggerChildren:.05,delayChildren:.1}}}},t0=Ov.spring,lE=aE.slideUp,cE=oE.container;function uE({state:e,isConnected:t,isSidebarCollapsed:r,setIsSidebarCollapsed:n,isCompactMode:s,setIsCompactMode:i,isMobileMenuOpen:o,setIsMobileMenuOpen:l,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h,setActiveSD:f}){var S;const m=Ol(),x=wr(),w=[{path:"/",icon:of,label:"Dashboard",tooltip:"Dashboard"},{path:"/strategic-directives",icon:qt,label:"Strategic Directives",tooltip:"SDs"},{path:"/backlog",icon:cl,label:"Backlog",tooltip:"Backlog"},{path:"/stories",icon:Co,label:"User Stories",tooltip:"Stories"},{path:"/directive-lab",icon:Cv,label:"Directive Lab",tooltip:"Lab"},{path:"/pr-reviews",icon:af,label:"PR Reviews",tooltip:"PRs"}],b={expanded:{width:"16rem",transition:m?{duration:0}:t0},collapsed:{width:"4rem",transition:m?{duration:0}:t0}},y={rest:{scale:1,transition:{duration:.2}},hover:{scale:m?1:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:m?1:.98}},g={hidden:{opacity:0,x:-10,transition:{duration:.1}},visible:{opacity:1,x:0,transition:{duration:.2,delay:.5}}},p=x.pathname==="/directive-lab",k=s?"p-2 pt-16 md:pt-2":p?"p-0":"p-6 pt-20 md:pt-6";return a.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 relative",children:[a.jsx(H.button,{onClick:()=>l(!o),className:"mobile-menu-button fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg md:hidden",whileHover:{scale:m?1:1.05},whileTap:{scale:m?1:.95},children:a.jsx(yt,{mode:"wait",children:o?a.jsx(H.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:m?0:.2},children:a.jsx(Ia,{className:"w-6 h-6"})},"close"):a.jsx(H.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:m?0:.2},children:a.jsx(q_,{className:"w-6 h-6"})},"menu")})}),a.jsx(yt,{children:o&&a.jsx(H.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>l(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:m?0:.2}})}),a.jsxs(H.div,{className:`
          fixed md:static inset-y-0 left-0 bg-gradient-to-br from-purple-600 via-purple-700 to-blue-800 shadow-2xl 
          z-50 flex flex-col overflow-hidden transition-transform duration-300 ease-in-out
          md:transform-none backdrop-blur-xl
          ${o?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,initial:!1,animate:r?"collapsed":"expanded",variants:b,children:[a.jsxs("div",{className:`${s?"p-2":"p-4"} border-b border-purple-400/30 backdrop-blur-sm relative overflow-hidden`,children:[a.jsx(H.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:m?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:m?0:4,repeat:1/0,ease:"linear"}}),a.jsxs("div",{className:`flex items-center ${r?"justify-center":"justify-between"}`,children:[a.jsx(yt,{children:!r&&a.jsx(H.h1,{className:"text-xl font-bold text-white relative z-10 drop-shadow-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:m?0:.15},children:"LEO Protocol"})}),a.jsx(H.button,{onClick:()=>n(!r),className:"hidden md:block p-1 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/10 relative z-10",title:r?"Expand sidebar":"Collapse sidebar",whileHover:{scale:m?1:1.1},whileTap:{scale:m?1:.9},children:a.jsx(H.div,{animate:{rotate:r?0:180},transition:{duration:m?0:.15},children:a.jsx(hr,{className:"w-5 h-5"})})})]}),a.jsx(yt,{children:!r&&a.jsxs(H.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:m?0:.15},children:[a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx(H.div,{className:`w-2 h-2 rounded-full mr-2 ${t?"bg-green-500":"bg-red-500"}`,animate:{scale:t?[1,1.2,1]:1},transition:{duration:2,repeat:t?1/0:0,repeatType:"loop"}}),a.jsx("span",{className:"text-sm text-purple-100 relative z-10",children:t?"Connected":"Disconnected"})]}),a.jsxs(H.span,{className:"text-xs px-2 py-1 bg-white/20 text-white rounded-full inline-block mt-2 backdrop-blur-sm border border-white/20 relative z-10 font-medium",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:["v",((S=e.leoProtocol)==null?void 0:S.version)||"detecting..."]})]})})]}),a.jsxs("nav",{className:`flex-1 ${s?"p-2":"p-4"} relative`,children:[a.jsx(H.div,{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"20px 20px"},animate:{backgroundPosition:m?"0px 0px":["0px 0px","20px 20px","0px 0px"]},transition:{duration:m?0:20,repeat:1/0,ease:"linear"}}),a.jsx(H.ul,{className:"space-y-1",variants:cE,initial:"hidden",animate:"visible",children:w.map(({path:N,icon:_,label:P,tooltip:$},R)=>a.jsx(H.li,{variants:lE,custom:R,children:a.jsx(K1,{to:N,className:({isActive:Y})=>`block ${Y?"active-nav-item":""}`,onClick:()=>l(!1),children:({isActive:Y})=>a.jsxs(H.div,{className:`flex items-center ${s?"p-1.5":"p-2"} rounded-lg transition-all duration-300 group relative backdrop-blur-sm ${Y?"bg-white/25 text-white border border-white/30 shadow-lg backdrop-blur-md":"hover:bg-white/10 text-purple-100 hover:text-white border border-transparent hover:border-white/20"}`,variants:y,initial:"rest",whileHover:"hover",whileTap:"tap",layout:!0,children:[Y&&!m&&a.jsxs(a.Fragment,{children:[a.jsx(H.div,{className:"absolute inset-0 rounded-lg bg-white/30 blur-xl",initial:{opacity:0,scale:.8},animate:{opacity:.6,scale:1},transition:{duration:.3}}),a.jsx(H.div,{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400/40 to-blue-400/40",animate:{background:["linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))","linear-gradient(to right, rgba(59, 130, 246, 0.4), rgba(168, 85, 247, 0.4))","linear-gradient(to right, rgba(168, 85, 247, 0.4), rgba(59, 130, 246, 0.4))"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]}),a.jsx(_,{className:`${s?"w-4 h-4":"w-5 h-5"} ${r?"":"mr-3"} relative z-10`}),a.jsx(yt,{children:!r&&a.jsx(H.span,{className:`${s?"text-sm":""} relative z-10`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:m?0:.2},children:P})}),a.jsxs(H.span,{className:`absolute ${r?"left-full ml-2 top-1/2 transform -translate-y-1/2":"bottom-full mb-2 left-1/2 transform -translate-x-1/2"} px-2 py-1 bg-gray-900/90 backdrop-blur-md text-white text-xs rounded whitespace-nowrap pointer-events-none z-30 opacity-0 group-hover:opacity-100 transition-all duration-200 delay-300 border border-white/20 shadow-xl`,style:{visibility:"hidden"},animate:{opacity:0,visibility:"hidden"},whileHover:{opacity:1,visibility:"visible"},children:[$,a.jsx("div",{className:`absolute ${r?"right-full top-1/2 transform -translate-y-1/2 border-l-0 border-r-4 border-r-gray-900 dark:border-r-gray-700 border-t-4 border-b-4 border-t-transparent border-b-transparent":"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-t-gray-900 dark:border-t-gray-700 border-l-4 border-r-4 border-l-transparent border-r-transparent border-b-0"}`})]})]})})},N))})]}),a.jsxs(H.div,{className:`border-t border-purple-400/30 ${s?"p-2":"p-4"} relative backdrop-blur-sm`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[a.jsxs(H.button,{onClick:()=>i(!s),className:`w-full flex items-center ${s?"p-1.5":"p-2"} rounded-lg hover:bg-white/10 text-purple-100 hover:text-white transition-all duration-300 group relative border border-transparent hover:border-white/20 backdrop-blur-sm`,title:s?"Standard view":"Compact view",whileHover:{scale:m?1:1.02},whileTap:{scale:m?1:.98},children:[a.jsx(H.div,{animate:{rotate:s?180:0},transition:{duration:m?0:.15},children:a.jsx(K_,{className:`${s?"w-4 h-4":"w-5 h-5"} ${r?"":"mr-3"}`})}),a.jsx(yt,{children:!r&&a.jsx(H.span,{className:s?"text-sm":"",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?"Standard View":"Compact View"})}),a.jsx(yt,{children:r&&a.jsx(H.span,{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap pointer-events-none z-10",variants:g,initial:"hidden",whileHover:"visible",exit:"hidden",children:s?"Standard":"Compact"})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-purple-400/30",children:a.jsx($l,{onRefresh:h,isCompact:s,isCollapsed:r})})]})]}),a.jsxs(H.div,{className:"flex-1 flex flex-col overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:m?0:.08},style:{paddingTop:"env(safe-area-inset-top)"},children:[a.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-600 via-purple-700 to-blue-800 border-b border-purple-400/30 shadow-lg relative overflow-hidden backdrop-blur-xl",children:[a.jsx(H.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-blue-400/20 to-purple-400/20",animate:{background:m?"linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))":["linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))","linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2))","linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2), rgba(168, 85, 247, 0.2))"]},transition:{duration:m?0:4,repeat:1/0,ease:"linear"}}),a.jsx(H.div,{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 1px, transparent 1px)",backgroundSize:"40px 40px"},animate:{backgroundPosition:m?"0px 0px":["0px 0px","40px 40px","0px 0px"]},transition:{duration:m?0:15,repeat:1/0,ease:"linear"}}),a.jsx("div",{className:"flex-1 relative z-10",children:a.jsx(sE,{isCompact:s})}),a.jsx("div",{className:"flex items-center px-4 py-2 relative z-10",children:a.jsx($v,{})})]}),a.jsx("main",{className:`flex-1 overflow-y-auto ${k}`,children:a.jsx(yt,{children:a.jsx(H.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:m?0:.1,ease:"easeOut"},children:a.jsx(I1,{context:{state:e,isCompactMode:s,updateChecklist:c,requestHandoff:u,compactContext:d,refreshData:h}})},x.pathname)})})]})]})}var cf={},hd={exports:{}};(function(e,t){(function(r,n){n(t)})(Tt,function(r){var n=function(){return n=Object.assign||function(i){for(var o,l=1,c=arguments.length;l<c;l++)for(var u in o=arguments[l])Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u]);return i},n.apply(this,arguments)},s=function(){function i(o,l,c){var u=this;this.endVal=l,this.options=c,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(d){u.startTime||(u.startTime=d);var h=d-u.startTime;u.remaining=u.duration-h,u.useEasing?u.countDown?u.frameVal=u.startVal-u.easingFn(h,0,u.startVal-u.endVal,u.duration):u.frameVal=u.easingFn(h,u.startVal,u.endVal-u.startVal,u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(h/u.duration);var f=u.countDown?u.frameVal<u.endVal:u.frameVal>u.endVal;u.frameVal=f?u.endVal:u.frameVal,u.frameVal=Number(u.frameVal.toFixed(u.options.decimalPlaces)),u.printValue(u.frameVal),h<u.duration?u.rAF=requestAnimationFrame(u.count):u.finalEndVal!==null?u.update(u.finalEndVal):u.options.onCompleteCallback&&u.options.onCompleteCallback()},this.formatNumber=function(d){var h,f,m,x,w=d<0?"-":"";h=Math.abs(d).toFixed(u.options.decimalPlaces);var b=(h+="").split(".");if(f=b[0],m=b.length>1?u.options.decimal+b[1]:"",u.options.useGrouping){x="";for(var y=3,g=0,p=0,k=f.length;p<k;++p)u.options.useIndianSeparators&&p===4&&(y=2,g=1),p!==0&&g%y==0&&(x=u.options.separator+x),g++,x=f[k-p-1]+x;f=x}return u.options.numerals&&u.options.numerals.length&&(f=f.replace(/[0-9]/g,function(S){return u.options.numerals[+S]}),m=m.replace(/[0-9]/g,function(S){return u.options.numerals[+S]})),w+u.options.prefix+f+m+u.options.suffix},this.easeOutExpo=function(d,h,f,m){return f*(1-Math.pow(2,-10*d/m))*1024/1023+h},this.options=n(n({},this.defaults),c),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el=typeof o=="string"?document.getElementById(o):o,l=l??this.parse(this.el.innerHTML),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(l),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,o):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return u.handleScroll(u)}),window.onscroll=function(){window.onScrollFns.forEach(function(d){return d()})},this.handleScroll(this)))}return i.prototype.handleScroll=function(o){if(o&&window&&!o.once){var l=window.innerHeight+window.scrollY,c=o.el.getBoundingClientRect(),u=c.top+window.pageYOffset,d=c.top+c.height+window.pageYOffset;d<l&&d>window.scrollY&&o.paused?(o.paused=!1,setTimeout(function(){return o.start()},o.options.scrollSpyDelay),o.options.scrollSpyOnce&&(o.once=!0)):(window.scrollY>d||u>l)&&!o.paused&&o.reset()}},i.prototype.determineDirectionAndSmartEasing=function(){var o=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>o;var l=o-this.startVal;if(Math.abs(l)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=o;var c=this.countDown?1:-1;this.endVal=o+c*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=o,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},i.prototype.start=function(o){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),o&&(this.options.onCompleteCallback=o),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},i.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},i.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},i.prototype.update=function(o){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(o),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},i.prototype.printValue=function(o){var l;if(this.el){var c=this.formattingFn(o);!((l=this.options.plugin)===null||l===void 0)&&l.render?this.options.plugin.render(this.el,c):this.el.tagName==="INPUT"?this.el.value=c:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=c:this.el.innerHTML=c}},i.prototype.ensureNumber=function(o){return typeof o=="number"&&!isNaN(o)},i.prototype.validateValue=function(o){var l=Number(o);return this.ensureNumber(l)?l:(this.error="[CountUp] invalid start or end value: ".concat(o),null)},i.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},i.prototype.parse=function(o){var l=function(h){return h.replace(/([.,'  ])/g,"\\$1")},c=l(this.options.separator),u=l(this.options.decimal),d=o.replace(new RegExp(c,"g"),"").replace(new RegExp(u,"g"),".");return parseFloat(d)},i}();r.CountUp=s})})(hd,hd.exports);var dE=hd.exports;Object.defineProperty(cf,"__esModule",{value:!0});var Xe=v,hE=dE;function fE(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function r0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ul(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r0(Object(r),!0).forEach(function(n){gE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pE(e){var t=mE(e,"string");return typeof t=="symbol"?t:String(t)}function gE(e,t,r){return t=pE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fd.apply(this,arguments)}function yE(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Mv(e,t){if(e==null)return{};var r=yE(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xE(e,t){return vE(e)||fE(e,t)||wE(e,t)||bE()}function vE(e){if(Array.isArray(e))return e}function wE(e,t){if(e){if(typeof e=="string")return n0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n0(e,t)}}function n0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Xe.useLayoutEffect:Xe.useEffect;function Yt(e){var t=Xe.useRef(e);return kE(function(){t.current=e}),Xe.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current.apply(void 0,n)},[])}var jE=function(t,r){var n=r.decimal,s=r.decimals,i=r.duration,o=r.easingFn,l=r.end,c=r.formattingFn,u=r.numerals,d=r.prefix,h=r.separator,f=r.start,m=r.suffix,x=r.useEasing,w=r.useGrouping,b=r.useIndianSeparators,y=r.enableScrollSpy,g=r.scrollSpyDelay,p=r.scrollSpyOnce,k=r.plugin;return new hE.CountUp(t,l,{startVal:f,duration:i,decimal:n,decimalPlaces:s,easingFn:o,formattingFn:c,numerals:u,separator:h,prefix:d,suffix:m,plugin:k,useEasing:x,useIndianSeparators:b,useGrouping:w,enableScrollSpy:y,scrollSpyDelay:g,scrollSpyOnce:p})},SE=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],NE={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},Vv=function(t){var r=Object.fromEntries(Object.entries(t).filter(function($){var R=xE($,2),Y=R[1];return Y!==void 0})),n=Xe.useMemo(function(){return ul(ul({},NE),r)},[t]),s=n.ref,i=n.startOnMount,o=n.enableReinitialize,l=n.delay,c=n.onEnd,u=n.onStart,d=n.onPauseResume,h=n.onReset,f=n.onUpdate,m=Mv(n,SE),x=Xe.useRef(),w=Xe.useRef(),b=Xe.useRef(!1),y=Yt(function(){return jE(typeof s=="string"?s:s.current,m)}),g=Yt(function($){var R=x.current;if(R&&!$)return R;var Y=y();return x.current=Y,Y}),p=Yt(function(){var $=function(){return g(!0).start(function(){c==null||c({pauseResume:k,reset:S,start:_,update:N})})};l&&l>0?w.current=setTimeout($,l*1e3):$(),u==null||u({pauseResume:k,reset:S,update:N})}),k=Yt(function(){g().pauseResume(),d==null||d({reset:S,start:_,update:N})}),S=Yt(function(){g().el&&(w.current&&clearTimeout(w.current),g().reset(),h==null||h({pauseResume:k,start:_,update:N}))}),N=Yt(function($){g().update($),f==null||f({pauseResume:k,reset:S,start:_})}),_=Yt(function(){S(),p()}),P=Yt(function($){i&&($&&S(),p())});return Xe.useEffect(function(){b.current?o&&P(!0):(b.current=!0,P())},[o,b,P,l,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.formattingFn]),Xe.useEffect(function(){return function(){S()}},[S]),{start:_,pauseResume:k,reset:S,update:N,getCountUp:g}},_E=["className","redraw","containerProps","children","style"],EE=function(t){var r=t.className,n=t.redraw,s=t.containerProps,i=t.children,o=t.style,l=Mv(t,_E),c=Xe.useRef(null),u=Xe.useRef(!1),d=Vv(ul(ul({},l),{},{ref:c,startOnMount:typeof i!="function"||t.delay===0,enableReinitialize:!1})),h=d.start,f=d.reset,m=d.update,x=d.pauseResume,w=d.getCountUp,b=Yt(function(){h()}),y=Yt(function(k){t.preserveValue||f(),m(k)}),g=Yt(function(){if(typeof t.children=="function"&&!(c.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}w()});Xe.useEffect(function(){g()},[g]),Xe.useEffect(function(){u.current&&y(t.end)},[t.end,y]);var p=n&&t;return Xe.useEffect(function(){n&&u.current&&b()},[b,n,p]),Xe.useEffect(function(){!n&&u.current&&b()},[b,n,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.className,t.formattingFn]),Xe.useEffect(function(){u.current=!0},[]),typeof i=="function"?i({countUpRef:c,start:h,reset:f,update:m,pauseResume:x,getCountUp:w}):Xe.createElement("span",fd({className:r,ref:c,style:o},s),typeof t.start<"u"?w().formattingFn(t.start):"")},Os=cf.default=EE;cf.useCountUp=Vv;function PE({sdId:e,onClose:t}){var d,h;const[r,n]=v.useState(null),[s,i]=v.useState(!0),[o,l]=v.useState(null);v.useEffect(()=>{c()},[e]);const c=async()=>{try{i(!0);const f=await fetch(`/api/progress/audit/${e||""}`);if(!f.ok)throw new Error("Failed to fetch audit");const m=await f.json();n(m)}catch(f){l(f.message)}finally{i(!1)}};if(s)return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})});if(o)return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[a.jsxs("p",{className:"text-red-500",children:["Error: ",o]}),a.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-gray-500 text-white rounded",children:"Close"})]})});if(!r)return null;const u=f=>f.complete?"text-green-500":f.progress>0?"text-yellow-500":"text-gray-400";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ev,{className:"w-6 h-6 mr-2 text-blue-500"}),a.jsx("h2",{className:"text-xl font-semibold",children:"Progress Validation Audit"})]}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:a.jsx(Ia,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:r.title}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Calculated Progress"}),a.jsxs("p",{className:"text-2xl font-bold",children:[r.summary.calculatedProgress,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Phase"}),a.jsx("p",{className:"text-2xl font-bold",children:r.summary.currentPhase})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Database Status"}),a.jsx("p",{className:"text-2xl font-bold",children:r.summary.databaseStatus})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Can Complete"}),a.jsx("div",{className:"text-2xl font-bold",children:r.summary.canComplete?a.jsx(Ne,{className:"w-8 h-8 text-green-500"}):a.jsx(xr,{className:"w-8 h-8 text-red-500"})})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[a.jsx(jn,{className:"w-5 h-5 mr-2"}),"Phase Breakdown"]}),a.jsx("div",{className:"space-y-4",children:Object.entries(r.phaseBreakdown).map(([f,m])=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsxs("span",{className:`text-lg font-semibold ${u(m)}`,children:[f," Agent"]}),a.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(Weight: ",m.weight,"%)"]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"text-lg font-bold",children:[m.progress,"%"]}),m.complete&&a.jsx(Ne,{className:"w-5 h-5 text-green-500"})]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3",children:a.jsx("div",{className:`h-2 rounded-full ${m.complete?"bg-green-500":"bg-blue-500"}`,style:{width:`${m.progress}%`}})}),m.checklist&&m.checklist.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Checklist Items:"}),a.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:m.checklist.map((x,w)=>a.jsxs("div",{className:"flex items-start text-sm",children:[x.checked?a.jsx(_v,{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}):a.jsx(Iv,{className:"w-4 h-4 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),a.jsxs("span",{className:x.checked?"text-gray-600 line-through":"",children:[x.text,x.source&&a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",x.source,")"]})]})]},w))})]}),f==="EXEC"&&m.indicators&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Implementation Indicators:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(m.indicators.indicators).map(([x,w])=>a.jsxs("div",{className:"flex items-center text-sm",children:[w.status?a.jsx(Ne,{className:"w-4 h-4 text-green-500 mr-2"}):a.jsx(xr,{className:"w-4 h-4 text-red-500 mr-2"}),a.jsxs("span",{children:[x,": ",w.details||"Not found"]})]},x))})]})]},f))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[a.jsx(I_,{className:"w-5 h-5 mr-2"}),"Progress Calculation"]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[((h=(d=r.phaseBreakdown)==null?void 0:d.PLAN)==null?void 0:h.checklist)&&r.phaseBreakdown.PLAN.checklist.filter(f=>f.text.includes("PRD created and saved")||f.text.includes("requirements mapped")||f.text.includes("specifications complete")||f.text.includes("Prerequisites verified")||f.text.includes("Risk mitigation")||f.text.includes("Context usage")).every(f=>f.checked)&&a.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded",children:[a.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:"⚠️ Progress Calculation Note:"}),a.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"The PLAN phase handoff checklist is complete (PRD created with all handoff items done), but the system is incorrectly counting implementation acceptance criteria as PLAN phase items. According to LEO Protocol v4.0, PLAN phase should be 100% complete when the PRD is created with the handoff checklist done. The actual progress should be approximately 66% (LEAD + PLAN complete)."})]}),a.jsx("p",{className:"font-mono text-sm mb-2",children:r.calculations.formula}),a.jsx("div",{className:"space-y-1",children:r.calculations.breakdown.map((f,m)=>a.jsx("p",{className:`font-mono text-sm ${f.startsWith("Total")?"font-bold text-blue-600 dark:text-blue-400":""}`,children:f},m))})]})]}),r.validation.uncompletedItems>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[a.jsx(mt,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Validation Issues"]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[a.jsxs("p",{className:"font-semibold mb-2",children:[r.validation.uncompletedItems," uncompleted items preventing completion:"]}),r.validation.details.map((f,m)=>a.jsxs("div",{className:"mb-2",children:[a.jsxs("p",{className:"font-medium text-sm",children:[f.source," (",f.phase,"): ",f.items.length," items"]}),a.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400 ml-4",children:f.items.map((x,w)=>a.jsx("li",{children:x},w))})]},m))]})]}),r.recommendations.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[a.jsx(qt,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),a.jsx("div",{className:"space-y-2",children:r.recommendations.map((f,m)=>a.jsxs("div",{className:`flex items-start p-3 rounded-lg ${f.includes("WARNING")?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"}`,children:[f.includes("WARNING")?a.jsx(mt,{className:"w-5 h-5 text-red-500 mr-2 flex-shrink-0 mt-0.5"}):a.jsx(Ne,{className:"w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-sm",children:f})]},m))})]})]}),a.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[a.jsxs("p",{className:"text-xs text-gray-500",children:["Generated: ",new Date(r.timestamp).toLocaleString()]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Refresh"}),a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Close"})]})]})]})})}function CE({strategicDirectives:e,prds:t,currentSD:r,onSetActiveSD:n,isCompact:s}){var Tn,W,rt,hi,Br,fi,zr;const i=Ol(),[o,l]=v.useState(!1),[c,u]=v.useState(!1),[d,h]=v.useState(!1),[f,m]=v.useState(!1),[x,w]=v.useState(0),[b,y]=v.useState(null),[g,p]=v.useState(""),[k,S]=v.useState({}),[N,_]=v.useState(null),[P,$]=v.useState(!1),R=v.useRef(null),Y=v.useRef(null),Ce=v.useRef(null),Qe=v.useRef(null);v.useEffect(()=>{function T(X){R.current&&!R.current.contains(X.target)&&l(!1)}if(o)return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[o]);const I=T=>{S(X=>({...X,[T]:!X[T]}))},L=T=>({LEAD_PLANNING:"Strategic planning and directive creation",PLAN_DESIGN:"Technical planning and PRD creation",EXEC_IMPLEMENTATION:"Implementation and development work",PLAN_VERIFICATION:"Testing and verification",LEAD_APPROVAL:"Final approval and deployment",COMPLETE:"All phases completed"})[T]||"Unknown phase",z=T=>{var nt,Fe,me,br,Wr,ar,Hr,It,Rn;if(!T)return[];const X=[];T.checklist&&T.checklist.filter(Re=>!Re.checked).forEach(Re=>{X.push({type:"SD",text:Re.text,phase:"LEAD_PLANNING"})});const ne=((nt=T.prds)==null?void 0:nt[0])||(t==null?void 0:t.find(Re=>Re.directiveId===T.id||Re.id===`PRD-${T.id}`))||((me=(Fe=e.find(Re=>Re.id===T.id))==null?void 0:Fe.prds)==null?void 0:me[0]);if(ne){const Kt=(ne.plan_checklist||[]).filter(F=>typeof F=="object"?!F.checked:!0);Kt.length>0&&X.push({type:"PLAN_DESIGN",text:`Complete ${Kt.length} planning checklist items`,phase:"PLAN_DESIGN",details:Kt.slice(0,3).map(F=>typeof F=="object"?F.text:F)});const kr=(ne.exec_checklist||[]).filter(F=>typeof F=="object"?!F.checked:!0);kr.length>0&&X.push({type:"EXEC_IMPLEMENTATION",text:`Complete ${kr.length} implementation tasks`,phase:"EXEC_IMPLEMENTATION",details:kr.slice(0,3).map(F=>typeof F=="object"?F.text:F)});const U=(ne.validation_checklist||[]).filter(F=>typeof F=="object"?!F.checked:!0);U.length>0&&X.push({type:"PLAN_VERIFICATION",text:`Complete ${U.length} verification items`,phase:"PLAN_VERIFICATION",details:U.slice(0,3).map(F=>typeof F=="object"?F.text:F)})}const fe=typeof T.progress=="object"?T.progress.total:T.progress;return fe>=100&&X.length>0?(console.log("⚠️ Progress/Pending Mismatch Detected:",{sdId:T.id,sdProgress:fe,pendingCount:X.length,message:"SD shows 100% but has pending items - clearing pending list to match progress"}),[]):(X.length>0&&console.log("🔍 Pending Items Debug:",{sdId:T.id,sdProgress:fe,totalPendingItems:X.length,pendingByPhase:X.reduce((Re,Kt)=>(Re[Kt.phase]=(Re[Kt.phase]||0)+1,Re),{}),associatedPRDId:ne==null?void 0:ne.id,prdSource:ne?(br=T.prds)!=null&&br[0]?"SD.prds":t!=null&&t.find(Re=>Re.directiveId===T.id)?"global prds prop":"strategicDirectives fallback":"none",sdChecklist:(Wr=T.checklist)==null?void 0:Wr.length,uncheckedSDItems:(ar=T.checklist)==null?void 0:ar.filter(Re=>!Re.checked).length,prdChecklists:ne?{plan:(Hr=ne.plan_checklist)==null?void 0:Hr.length,exec:(It=ne.exec_checklist)==null?void 0:It.length,validation:(Rn=ne.validation_checklist)==null?void 0:Rn.length}:null}),X)},O=(T,X,ne)=>{var It,Rn,Re,Kt,mi,kr,A,U,F,se,q,te,ae,J,Ke,Oe,jr,Ue,Sr,An,Dn,Nr,qr,Kr,Gr,ee,Lt,In,pi,Q,Ie,Nt,st,yf,xf,vf,wf,bf;if(!T)return"";const fe=((It=T.checklist)==null?void 0:It.filter(ie=>!ie.checked))||[],nt=((Re=(Rn=T.leoPhase)==null?void 0:Rn.validation)==null?void 0:Re.details)||[],Fe=((Kt=T.leoPhase)==null?void 0:Kt.remainingTasks)||[],me=((mi=T.leoPhase)==null?void 0:mi.phaseProgress)||{},br=((A=(kr=ne==null?void 0:ne.phaseBreakdown)==null?void 0:kr.PLAN)==null?void 0:A.checklist)||[],Wr=br.filter(ie=>ie.text.includes("PRD created and saved")||ie.text.includes("SD requirements mapped")||ie.text.includes("Technical specifications complete")||ie.text.includes("Prerequisites verified")||ie.text.includes("Test requirements")||ie.text.includes("Acceptance criteria")||ie.text.includes("Risk mitigation")||ie.text.includes("Context usage")||ie.text.includes("summary created")||ie.text.includes("architecture documented")||ie.text.includes("phases clearly defined")||ie.text.includes("Documentation requirements")),ar=br.filter(ie=>!Wr.includes(ie)&&!ie.checked);return`# Strategic Directive Completion Request
Generated: ${new Date().toLocaleString()}

## Context
**Project**: LEO Protocol Dashboard Implementation
**SD ID**: ${T.id}
**Title**: ${T.title}
**Priority**: ${((U=T.metadata)==null?void 0:U.priority)||"Normal"}
**Owner**: ${((F=T.metadata)==null?void 0:F.owner)||"System Administrator"}

## Current Status
- **Overall Progress**: ${X}% complete
- **Active Phase**: ${((se=T.leoPhase)==null?void 0:se.current)||"LEAD"} Agent
- **Phase Status**: ${((q=T.leoPhase)==null?void 0:q.status)||"In Progress"}
- **Database Status**: ${((te=T.metadata)==null?void 0:te.Status)||"In Progress"}

## Phase Breakdown
### LEAD Phase (Strategic Planning) - ${((ae=me.LEAD)==null?void 0:ae.progress)||0}%
Status: ${(J=me.LEAD)!=null&&J.complete?"✅ Complete":"⏳ In Progress"}

### PLAN Phase (Technical Planning) - ${((Ke=me.PLAN)==null?void 0:Ke.progress)||0}%
Status: ${(Oe=me.PLAN)!=null&&Oe.complete?"✅ Complete":((jr=me.PLAN)==null?void 0:jr.progress)>0?"⏳ In Progress":"⏸️ Not Started"}

### EXEC Phase (Implementation) - ${((Ue=me.EXEC)==null?void 0:Ue.progress)||0}%
Status: ${(Sr=me.EXEC)!=null&&Sr.complete?"✅ Complete":((An=me.EXEC)==null?void 0:An.progress)>0?"⏳ In Progress":"⏸️ Not Started"}

## Remaining Tasks

### Strategic Directive Checklist (${fe.length} items)
${fe.length>0?fe.map(ie=>`- [ ] ${ie.text}`).join(`
`):"✅ All SD checklist items complete"}

${ar.length>0?`### Implementation Tasks (EXEC Phase - ${ar.length} items)
Note: PLAN phase handoff checklist is complete. These are EXEC phase implementation acceptance criteria.
${ar.slice(0,10).map(ie=>`- [ ] ${ie.text}`).join(`
`)}
${ar.length>10?`
... and ${ar.length-10} more implementation tasks`:""}`:""}

${Fe.length>0?`### Phase-Specific Tasks
${Fe.map(ie=>`
**${ie.phase} Phase**: ${ie.description}
${ie.tasks?ie.tasks.map(Oa=>`  - ${Oa}`).join(`
`):""}`).join(`
`)}`:""}

## Validation Issues
${nt.length>0?nt.map(ie=>`- **${ie.source}** (${ie.phase}): ${ie.items.length} unchecked items`).join(`
`):"✅ No validation issues"}

${ne?`## Progress Audit Analysis

### Important Note on Progress Calculation
The dashboard currently shows ${X}% overall progress. However, according to LEO Protocol v4.0:
- LEAD Phase (33.33%): ${(Dn=me.LEAD)!=null&&Dn.complete?"✅ COMPLETE":"In Progress"} 
- PLAN Phase (33.33%): ${(Nr=me.PLAN)!=null&&Nr.complete||Wr.every(ie=>ie.checked)?"✅ COMPLETE (PRD created with handoff checklist done)":"In Progress"}
- EXEC Phase (33.34%): ${((qr=me.EXEC)==null?void 0:qr.progress)>0?`In Progress (${(Kr=me.EXEC)==null?void 0:Kr.progress}%)`:"Not Started"}

**Actual Progress**: ${(Gr=me.LEAD)!=null&&Gr.complete&&((ee=me.PLAN)!=null&&ee.complete||Wr.every(ie=>ie.checked))?"66%":X+"%"} - PLAN phase should be marked complete when PRD is created with handoff checklist done.

### Calculation Breakdown
${((In=(Lt=ne.calculations)==null?void 0:Lt.breakdown)==null?void 0:In.join(`
`))||"No calculation data available"}

### Audit Recommendations
${((pi=ne.recommendations)==null?void 0:pi.length)>0?ne.recommendations.map(ie=>`- ${ie}`).join(`
`):"✅ No issues found in audit"}

### Implementation Indicators
${(Ie=(Q=ne.phaseBreakdown)==null?void 0:Q.EXEC)!=null&&Ie.indicators?Object.entries(ne.phaseBreakdown.EXEC.indicators.indicators||{}).map(([ie,Oa])=>`- ${ie}: ${Oa.status?"✅":"❌"} ${Oa.details||""}`).join(`
`):"No implementation indicators available"}
`:""}

## Next Steps
${((Nt=T.leoPhase)==null?void 0:Nt.current)==="LEAD"&&((st=me.LEAD)!=null&&st.complete)?`1. Create a Product Requirements Document (PRD) for technical planning
2. Perform LEAD-to-PLAN handoff`:""}
${((yf=T.leoPhase)==null?void 0:yf.current)==="PLAN"&&((xf=me.PLAN)!=null&&xf.complete)?`1. Begin implementation phase
2. Perform PLAN-to-EXEC handoff`:""}
${((vf=T.leoPhase)==null?void 0:vf.current)==="EXEC"&&((wf=me.EXEC)!=null&&wf.complete)?`1. Complete final testing and validation
2. Perform EXEC-to-COMPLETE handoff`:""}
${fe.length>0||br.length>0?"Priority: Complete all unchecked items listed above":""}

## Instructions
Please help me complete the remaining tasks for this Strategic Directive following LEO Protocol v4.0 standards. Focus on:
1. Completing all unchecked checklist items
2. Ensuring proper handoffs between phases
3. Maintaining documentation and test coverage
4. Following the established project patterns and conventions

${(bf=T.metadata)!=null&&bf.PRD?`PRD Location: ${T.metadata.PRD}`:"Note: No PRD linked yet"}

Please proceed with the implementation.`},j=r?e.find(T=>T.id===r):null,C=!j&&e.length>0?e.find(T=>{var fe,nt;if(T.status==="completed"||T.status==="complete")return!1;const X=((fe=T.checklist)==null?void 0:fe.filter(Fe=>Fe.checked).length)||0,ne=((nt=T.checklist)==null?void 0:nt.length)||0;return ne>0&&X<ne})||e.find(T=>T.status!=="completed"&&T.status!=="complete"):null,E=j||C;if(v.useEffect(()=>{(c||x>0)&&E&&fetch(`/api/progress/audit/${E.id}`).then(T=>T.json()).then(T=>y(T)).catch(T=>console.error("Failed to fetch audit:",T))},[c,x,E==null?void 0:E.id]),!E)return a.jsx("div",{className:`bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 border-l-4 border-gray-400 ${s?"p-3":"p-4"} mb-6 rounded-lg`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(mt,{className:`${s?"w-5 h-5":"w-6 h-6"} text-gray-500 mr-3`}),a.jsxs("div",{children:[a.jsx("h3",{className:`${s?"text-sm":"text-base"} font-semibold text-gray-700 dark:text-gray-300`,children:"No Active Strategic Directive"}),a.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 mt-1`,children:"Create a new Strategic Directive to start tracking progress"})]})]})});const M=((Tn=E.checklist)==null?void 0:Tn.filter(T=>T.checked).length)||0,K=((W=E.checklist)==null?void 0:W.length)||0,G=E.progress!==void 0?typeof E.progress=="object"?E.progress.total:E.progress:K>0?Math.round(M/K*100):0,de=G===100?{status:"Complete",color:"text-green-700 dark:text-green-300",bgColor:"from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",borderColor:"border-green-400",progressColor:"bg-green-500",icon:Ne}:G>=50?{status:"In Progress",color:"text-blue-700 dark:text-blue-300",bgColor:"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",borderColor:"border-blue-400",progressColor:"bg-blue-500",icon:ka}:{status:"Just Started",color:"text-amber-700 dark:text-amber-300",bgColor:"from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20",borderColor:"border-amber-400",progressColor:"bg-amber-500",icon:Ct},xe=de.icon,Te=e.filter(T=>{var ne,fe;if(!g.trim())return!0;const X=g.toLowerCase();return T.id.toLowerCase().includes(X)||T.title&&T.title.toLowerCase().includes(X)||((ne=T.metadata)==null?void 0:ne.Status)&&T.metadata.Status.toLowerCase().includes(X)||((fe=T.metadata)==null?void 0:fe.Priority)&&T.metadata.Priority.toLowerCase().includes(X)}),ds=()=>{l(!o),o||setTimeout(()=>{var T;(T=Ce.current)==null||T.focus()},100)},gf=T=>{p(T.target.value)},zl=T=>{if(T.key==="Escape")l(!1),p("");else if(T.key==="Enter"&&Te.length>0){const X=Te[0];n&&X.id!==r&&(n(X.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:X.id,sd:X}}))),l(!1),p("")}};return a.jsxs("div",{className:`bg-gradient-to-r ${de.bgColor} border-l-4 ${de.borderColor} ${s?"p-2 sm:p-3":"p-3 sm:p-4"} mb-4 sm:mb-6 rounded-lg shadow-sm`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[a.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[a.jsx(xe,{className:`${s?"w-4 sm:w-5 h-4 sm:h-5":"w-5 sm:w-6 h-5 sm:h-6"} ${de.color} mr-2 sm:mr-3 flex-shrink-0`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"relative",ref:R,children:[a.jsxs(H.button,{onClick:ds,className:`flex items-center justify-between w-full text-left ${s?"text-xs sm:text-sm":"text-sm sm:text-base"} font-semibold ${de.color} hover:bg-white/10 rounded px-1 sm:px-2 py-1 transition-colors min-w-0`,whileHover:{scale:i?1:1.02},whileTap:{scale:i?1:.98},"aria-label":"Select Strategic Directive","aria-expanded":o,"aria-haspopup":"listbox",children:[a.jsxs("span",{className:"truncate",children:["Active: ",E.title&&E.title!=="[Enter Strategic Directive Title]"?E.title:E.id]}),a.jsx(H.div,{animate:{rotate:o?180:0},transition:{duration:i?0:.2,ease:"easeOut"},className:"flex-shrink-0 ml-1",children:a.jsx(Tr,{className:`${s?"w-3 sm:w-4 h-3 sm:h-4":"w-4 sm:w-5 h-4 sm:h-5"}`})})]}),a.jsx(yt,{children:o&&e.length>0&&a.jsxs(H.div,{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-80 flex flex-col",initial:{opacity:0,y:i?0:-10,scale:i?1:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:i?0:-10,scale:i?1:.95},transition:{duration:i?0:.2,ease:"easeOut"},children:[a.jsxs("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:[a.jsx("input",{ref:Ce,type:"text",placeholder:"Search Strategic Directives...",value:g,onChange:gf,onKeyDown:zl,className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-500 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-label":"Search Strategic Directives"}),g&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[Te.length," of ",e.length," results"]})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:Te.length===0&&g?a.jsxs("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-sm",children:['No Strategic Directives found for "',g,'"']}):Te.map((T,X)=>{const ne=T.id===r||T.id===E.id&&!r,fe=T.progress!==void 0?typeof T.progress=="object"?T.progress.total:T.progress:0;return a.jsx("button",{onClick:()=>(n&&(n(T.id),window.dispatchEvent(new CustomEvent("activeSDChanged",{detail:{sdId:T.id,sd:T}}))),l(!1),p(""),!1),className:`w-full text-left px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${ne?"bg-primary-50 dark:bg-primary-900/20":""}`,children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center",children:[ne&&a.jsx(dr,{className:"w-4 h-4 text-primary-600 mr-2 flex-shrink-0"}),a.jsx("p",{className:`${s?"text-xs":"text-sm"} font-medium text-gray-900 dark:text-white truncate ${ne?"ml-0":"ml-6"}`,children:T.title&&T.title!=="[Enter Strategic Directive Title]"?T.title:T.id})]}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1 overflow-hidden",children:a.jsx(H.div,{className:`h-1 rounded-full ${fe===100?"bg-green-500":fe>=50?"bg-blue-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${fe}%`},transition:{duration:i?0:.8,ease:"easeOut",delay:i?0:X*.1}})})}),a.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 ml-2`,children:a.jsx(Os,{end:fe,duration:i?0:1,preserveValue:!0,suffix:"%"})})]}),T.leoPhase&&a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${T.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${T.leoPhase.phases.PLAN?"bg-green-500":T.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${T.leoPhase.phases.EXEC?"bg-green-500":T.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),a.jsx("span",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:T.leoPhase.current})]})]})})},T.id)})})]})})]}),a.jsx("p",{className:`${s?"text-xs":"text-xs sm:text-sm"} text-gray-600 dark:text-gray-400 mt-1`,children:E.leoPhase?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-medium",children:"LEO Protocol:"})," ",E.leoPhase.status]}):`${de.status} • ${M} of ${K} items completed`}),E.leoPhase&&a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 mt-2",children:[a.jsxs("div",{className:`flex items-center text-xs ${E.leoPhase.phases.LEAD?"text-green-600 font-medium":"text-gray-400"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${E.leoPhase.phases.LEAD?"bg-green-500":"bg-gray-300"}`}),"LEAD"]}),a.jsxs("div",{className:`flex items-center text-xs ${E.leoPhase.phases.PLAN?"text-green-600 font-medium":E.leoPhase.current==="PLAN"?"text-blue-600 font-medium":"text-gray-400"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${E.leoPhase.phases.PLAN?"bg-green-500":E.leoPhase.current==="PLAN"?"bg-blue-500":"bg-gray-300"}`}),"PLAN"]}),a.jsxs("div",{className:`flex items-center text-xs ${E.leoPhase.phases.EXEC?"text-green-600 font-medium":E.leoPhase.current==="EXEC"?"text-blue-600 font-medium":"text-gray-400"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${E.leoPhase.phases.EXEC?"bg-green-500":E.leoPhase.current==="EXEC"?"bg-blue-500":"bg-gray-300"}`}),"EXEC"]})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1 sm:gap-2 flex-shrink-0",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`${s?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold ${de.color}`,children:a.jsx(Os,{end:G,duration:i?0:2,preserveValue:!0,suffix:"%"})}),((rt=E.metadata)==null?void 0:rt.priority)&&a.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Priority: ",E.metadata.priority]})]}),a.jsxs("div",{className:"flex gap-1 flex-wrap justify-end",children:[a.jsxs(H.button,{onClick:()=>m(!0),className:"flex items-center px-2 py-1 text-xs bg-blue-500/20 dark:bg-blue-400/20 hover:bg-blue-500/30 dark:hover:bg-blue-400/30 rounded transition-all",title:"View progress validation audit",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[a.jsx(Ev,{className:"w-3 h-3 mr-1"}),a.jsx("span",{children:"Audit"})]}),a.jsxs(H.button,{onClick:()=>u(!c),className:"flex items-center px-2 py-1 text-xs bg-purple-500/20 dark:bg-purple-400/20 hover:bg-purple-500/30 dark:hover:bg-purple-400/30 rounded transition-all",title:"Generate AI prompt for remaining tasks",whileHover:{scale:i?1:1.05,y:i?0:-1},whileTap:{scale:i?1:.95},children:[a.jsx(e0,{className:"w-3 h-3 mr-1"}),a.jsx("span",{children:"AI Prompt"})]})]})]})]}),a.jsxs("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3 overflow-hidden relative",onMouseEnter:()=>$(!0),onMouseLeave:()=>$(!1),ref:Qe,children:[a.jsx(yt,{children:P&&a.jsx(H.div,{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.2},children:a.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl border border-gray-700 min-w-[250px]",children:[a.jsxs("div",{className:"font-semibold mb-2 flex items-center",children:[a.jsx(Ft,{className:"w-3 h-3 mr-1"}),"LEO Protocol Phase Breakdown"]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-green-300",children:"LEAD Planning:"}),a.jsx("span",{className:"font-mono",children:"20%"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-blue-300",children:"PLAN Design:"}),a.jsx("span",{className:"font-mono",children:"20%"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-300",children:"EXEC Implementation:"}),a.jsx("span",{className:"font-mono",children:"30%"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-orange-300",children:"VERIFICATION:"}),a.jsx("span",{className:"font-mono",children:"15%"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-yellow-300",children:"APPROVAL:"}),a.jsx("span",{className:"font-mono",children:"15%"})]})]}),a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Current Progress:"}),a.jsxs("span",{className:"text-green-400",children:[G,"%"]})]})}),a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-l-transparent border-r-4 border-r-transparent border-t-4 border-t-gray-800 dark:border-t-gray-900"})]})})}),a.jsx(H.div,{className:`h-3 ${de.progressColor} rounded-full relative`,initial:{width:0},animate:{width:`${G}%`},transition:{duration:i?0:1.2,ease:"easeOut",delay:i?0:.2},children:!i&&a.jsxs(a.Fragment,{children:[a.jsx(H.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,ease:"linear"}}),a.jsx(H.div,{className:"absolute inset-0 bg-white/20 rounded-full",animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})})]}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`${s?"text-sm":"text-base"} font-semibold ${de.color}`,children:["Current Phase: ",((hi=E.metadata)==null?void 0:hi["Current Phase"])||"LEAD_PLANNING"]}),a.jsxs("button",{onClick:()=>I("phaseInfo"),className:"flex items-center text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:[a.jsx(Ft,{className:"w-3 h-3 mr-1"}),"Info"]})]}),((Br=E.metadata)==null?void 0:Br.date)&&a.jsxs("div",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:["Created: ",new Date(E.metadata.date).toLocaleDateString()]})]}),a.jsx(yt,{children:k.phaseInfo&&a.jsx(H.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.2},className:"overflow-hidden",children:a.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[a.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-blue-800 dark:text-blue-200`,children:[a.jsx("strong",{children:"LEO Protocol Flow:"})," LEAD → PLAN → EXEC → VERIFICATION → APPROVAL"]}),a.jsx("p",{className:`${s?"text-xs":"text-sm"} text-blue-700 dark:text-blue-300 mt-1`,children:L(((fi=E.metadata)==null?void 0:fi["Current Phase"])||"LEAD_PLANNING")})]})})}),((zr=E.metadata)==null?void 0:zr["Phase Progress"])&&typeof E.metadata["Phase Progress"]=="object"&&a.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(E.metadata["Phase Progress"]).map(([T,X])=>{var Fe;const ne=typeof X=="number"?X:parseInt(X)||0,fe=ne===100,nt=T===((Fe=E.metadata)==null?void 0:Fe["Current Phase"]);return a.jsxs("div",{className:`text-center p-2 rounded ${fe?"bg-green-50 dark:bg-green-900/20":nt?"bg-blue-50 dark:bg-blue-900/20":"bg-gray-50 dark:bg-gray-800"}`,children:[a.jsx("div",{className:`${s?"text-xs":"text-sm"} font-medium ${fe?"text-green-700 dark:text-green-300":nt?"text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400"}`,children:T.split("_")[0]}),a.jsx("div",{className:`${s?"text-xs":"text-sm"} font-bold ${fe?"text-green-600 dark:text-green-400":nt?"text-blue-600 dark:text-blue-400":"text-gray-400"}`,children:fe?a.jsx(dr,{className:"w-4 h-4 mx-auto"}):`${ne}%`})]},T)})}),(()=>{const T=z(E);return T.length===0?null:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>I("pendingWork"),className:"flex items-center justify-between w-full p-2 bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg border border-amber-200 dark:border-amber-700 transition-colors",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(W_,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 mr-2"}),a.jsxs("span",{className:`${s?"text-sm":"text-base"} font-medium text-amber-800 dark:text-amber-200`,children:[T.length," Pending Task",T.length>1?"s":""]})]}),a.jsx(hr,{className:`w-4 h-4 text-amber-600 dark:text-amber-400 transform transition-transform ${k.pendingWork?"rotate-90":""}`})]}),a.jsx(yt,{children:k.pendingWork&&a.jsx(H.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:i?0:.3},className:"overflow-hidden",children:a.jsxs("div",{className:"space-y-2 pl-4",children:[T.slice(0,5).map((X,ne)=>a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 mt-2 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`${s?"text-xs":"text-sm"} text-gray-700 dark:text-gray-300`,children:X.text}),a.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:[X.phase.replace("_"," ")," Phase • ",X.type]}),X.details&&X.details.length>0&&a.jsx("div",{className:"mt-1 pl-2 border-l-2 border-amber-200 dark:border-amber-700",children:X.details.map((fe,nt)=>a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:["• ",fe]},nt))})]})]},ne)),T.length>5&&a.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400 italic pl-4`,children:["... and ",T.length-5," more items"]})]})})})]})})(),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(sr,{to:`/strategic-directives/${E.id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full transition-colors",children:[a.jsx(qt,{className:"w-3 h-3 mr-1"}),"View SD Document",a.jsx(ll,{className:"w-3 h-3 ml-1"})]}),E.prds&&E.prds.length>0&&a.jsxs(sr,{to:`/prds/${E.prds[0].id}`,className:"inline-flex items-center px-3 py-1 text-xs bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50 text-green-700 dark:text-green-300 rounded-full transition-colors",children:[a.jsx(qt,{className:"w-3 h-3 mr-1"}),"View PRD Document",a.jsx(ll,{className:"w-3 h-3 ml-1"})]})]})]}),c&&a.jsxs("div",{className:"mt-4 p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(e0,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mr-2"}),a.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:"AI Prompt for Remaining Tasks"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>w(T=>T+1),className:"flex items-center px-2 py-1 text-xs bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700 rounded transition-all",title:"Refresh prompt with latest data",children:[a.jsx(es,{className:"w-3 h-3 mr-1"}),"Refresh"]}),a.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:"×"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("pre",{ref:Y,className:"bg-white dark:bg-gray-800 p-3 rounded border border-purple-200 dark:border-purple-700 text-sm overflow-x-auto whitespace-pre-wrap max-h-96 overflow-y-auto",children:O(E,G,b)},x),a.jsx("button",{onClick:()=>{var X;const T=((X=Y.current)==null?void 0:X.innerText)||"";navigator.clipboard.writeText(T).then(()=>{h(!0),setTimeout(()=>h(!1),2e3)})},className:`absolute top-2 right-2 flex items-center px-2 py-1 text-xs rounded transition-all ${d?"bg-green-500 text-white":"bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-700"}`,children:d?a.jsxs(a.Fragment,{children:[a.jsx(dr,{className:"w-3 h-3 mr-1"}),"Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx(Pv,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Copy this prompt and paste it into Claude Code to get help completing the remaining tasks."})]}),f&&a.jsx(PE,{sdId:E.id,onClose:()=>m(!1)})]})}const TE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ls(async()=>{const{default:n}=await Promise.resolve().then(()=>ui);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class uf extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class RE extends uf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class s0 extends uf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class i0 extends uf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var md;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(md||(md={}));var AE=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class DE{constructor(t,{headers:r={},customFetch:n,region:s=md.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=TE(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return AE(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(w=>{throw new RE(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new s0(h);if(!h.ok)throw new i0(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return m==="application/json"?x=yield h.json():m==="application/octet-stream"?x=yield h.blob():m==="text/event-stream"?x=h:m==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof i0||s instanceof s0?s.context:void 0}}})}}var vt={},df={},Ml={},La={},Vl={},Fl={},IE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ti=IE();const LE=ti.fetch,Fv=ti.fetch.bind(ti),Uv=ti.Headers,$E=ti.Request,OE=ti.Response,ui=Object.freeze(Object.defineProperty({__proto__:null,Headers:Uv,Request:$E,Response:OE,default:Fv,fetch:LE},Symbol.toStringTag,{value:"Module"})),ME=mw(ui);var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});let VE=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ul.default=VE;var Bv=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fl,"__esModule",{value:!0});const FE=Bv(ME),UE=Bv(Ul);let BE=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=FE.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,f=null,m=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=g:h=JSON.parse(g))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{d=JSON.parse(b),Array.isArray(d)&&i.status===404&&(h=[],d=null,m=200,x="OK")}catch{i.status===404&&b===""?(m=204,x="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,x="OK"),d&&this.shouldThrowOnError)throw new UE.default(d)}return{error:d,data:h,count:f,status:m,statusText:x}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Fl.default=BE;var zE=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vl,"__esModule",{value:!0});const WE=zE(Fl);let HE=class extends WE.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Vl.default=HE;var qE=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(La,"__esModule",{value:!0});const KE=qE(Vl);let GE=class extends KE.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};La.default=GE;var XE=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ml,"__esModule",{value:!0});const Ni=XE(La);let JE=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Ni.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ni.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ni.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Ni.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ni.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ml.default=JE;var zv=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(df,"__esModule",{value:!0});const QE=zv(Ml),YE=zv(La);let ZE=class Wv{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new QE.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Wv(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new YE.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};df.default=ZE;var di=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vt,"__esModule",{value:!0});vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;const Hv=di(df);vt.PostgrestClient=Hv.default;const qv=di(Ml);vt.PostgrestQueryBuilder=qv.default;const Kv=di(La);vt.PostgrestFilterBuilder=Kv.default;const Gv=di(Vl);vt.PostgrestTransformBuilder=Gv.default;const Xv=di(Fl);vt.PostgrestBuilder=Xv.default;const Jv=di(Ul);vt.PostgrestError=Jv.default;var eP=vt.default={PostgrestClient:Hv.default,PostgrestQueryBuilder:qv.default,PostgrestFilterBuilder:Kv.default,PostgrestTransformBuilder:Gv.default,PostgrestBuilder:Xv.default,PostgrestError:Jv.default};const{PostgrestClient:tP,PostgrestQueryBuilder:vT,PostgrestFilterBuilder:wT,PostgrestTransformBuilder:bT,PostgrestBuilder:kT,PostgrestError:jT}=eP;class rP{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const nP="2.15.4",sP=`realtime-js/${nP}`,iP="1.0.0",pd=1e4,aP=1e3,oP=100;var qi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(qi||(qi={}));var ze;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ze||(ze={}));var er;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(er||(er={}));var gd;(function(e){e.websocket="websocket"})(gd||(gd={}));var zn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(zn||(zn={}));class lP{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Qv{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ge;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ge||(ge={}));const a0=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=cP(o,e,t,s),i),{})},cP=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Yv(i,o):yd(o)},Yv=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return fP(t,r)}switch(e){case ge.bool:return uP(t);case ge.float4:case ge.float8:case ge.int2:case ge.int4:case ge.int8:case ge.numeric:case ge.oid:return dP(t);case ge.json:case ge.jsonb:return hP(t);case ge.timestamp:return mP(t);case ge.abstime:case ge.date:case ge.daterange:case ge.int4range:case ge.int8range:case ge.money:case ge.reltime:case ge.text:case ge.time:case ge.timestamptz:case ge.timetz:case ge.tsrange:case ge.tstzrange:return yd(t);default:return yd(t)}},yd=e=>e,uP=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},dP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},hP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},fP=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Yv(t,l))}return e},mP=e=>typeof e=="string"?e.replace(" ","T"):e,Zv=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Oc{constructor(t,r,n={},s=pd){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var o0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(o0||(o0={}));class Ki{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ki.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Ki.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ki.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),x=d.filter(b=>m.indexOf(b.presence_ref)<0),w=h.filter(b=>f.indexOf(b.presence_ref)<0);x.length>0&&(l[u]=x),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var l0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(l0||(l0={}));var Gi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Gi||(Gi={}));var Pr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Pr||(Pr={}));class hf{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Oc(this,er.join,this.params,this.timeout),this.rejoinTimer=new Qv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(er.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ki(this),this.broadcastEndpointURL=Zv(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Gi.PRESENCE]&&this.bindings[Gi.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Pr.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Pr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var x;if(this.socket.setAuth(),m===void 0){t==null||t(Pr.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(x=w==null?void 0:w.length)!==null&&x!==void 0?x:0,y=[];for(let g=0;g<b;g++){const p=w[g],{filter:{event:k,schema:S,table:N,filter:_}}=p,P=m&&m[g];if(P&&P.event===k&&P.schema===S&&P.table===N&&P.filter===_)y.push(Object.assign(Object.assign({},p),{id:P.id}));else{this.unsubscribe(),this.state=ze.errored,t==null||t(Pr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Pr.SUBSCRIBED);return}}).receive("error",m=>{this.state=ze.errored,t==null||t(Pr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Pr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ze.joined&&t===Gi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ze.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(er.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Oc(this,er.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ze.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Oc(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>oP){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=er;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var x,w,b;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(w=m.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var x,w,b,y,g,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const k=m.id,S=(x=m.filter)===null||x===void 0?void 0:x.event;return k&&((w=r.ids)===null||w===void 0?void 0:w.includes(k))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const k=(g=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return k==="*"||k===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:w,table:b,commit_timestamp:y,type:g,errors:p}=x;f=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:y,eventType:g,new:{},old:{},errors:p}),this._getPayloadRecords(x))}m.callback(f,n)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&hf.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(er.close,{},t)}_onError(t){this._on(er.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=a0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=a0(t.columns,t.old_record)),r}}const Mc=()=>{},io={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pP=[1e3,2e3,5e3,1e4],gP=1e4,yP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xP{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pd,this.transport=null,this.heartbeatIntervalMs=io.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Mc,this.ref=0,this.reconnectTimer=null,this.logger=Mc,this.conn=null,this.sendBuffer=[],this.serializer=new lP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>ls(async()=>{const{default:l}=await Promise.resolve().then(()=>ui);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${gd.websocket}`,this.httpEndpoint=Zv(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:iP}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case qi.connecting:return zn.Connecting;case qi.open:return zn.Open;case qi.closing:return zn.Closing;default:return zn.Closed}}isConnected(){return this.connectionState()===zn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new hf(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(aP,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},io.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(er.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([yP],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:sP};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(er.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Qv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},io.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:pd,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:io.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Mc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>pP[h-1]||gP,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class ff extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function We(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class vP extends ff{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xd extends ff{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var wP=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const ew=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ls(async()=>{const{default:n}=await Promise.resolve().then(()=>ui);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},bP=()=>wP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ls(()=>Promise.resolve().then(()=>ui),void 0)).Response:Response}),vd=e=>{if(Array.isArray(e))return e.map(r=>vd(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=vd(n)}),t},kP=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var us=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Vc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jP=(e,t,r)=>us(void 0,void 0,void 0,function*(){const n=yield bP();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new vP(Vc(s),i,o))}).catch(s=>{t(new xd(Vc(s),s))}):t(new xd(Vc(e),e))}),SP=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(kP(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function $a(e,t,r,n,s,i){return us(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,SP(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>jP(c,l,n))})})}function dl(e,t,r,n){return us(this,void 0,void 0,function*(){return $a(e,"GET",t,r,n)})}function cr(e,t,r,n,s){return us(this,void 0,void 0,function*(){return $a(e,"POST",t,n,s,r)})}function wd(e,t,r,n,s){return us(this,void 0,void 0,function*(){return $a(e,"PUT",t,n,s,r)})}function NP(e,t,r,n){return us(this,void 0,void 0,function*(){return $a(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function tw(e,t,r,n,s){return us(this,void 0,void 0,function*(){return $a(e,"DELETE",t,n,s,r)})}var ut=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const _P={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},c0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class EP{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=ew(s)}uploadOrUpdate(t,r,n,s){return ut(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},c0),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?wd:cr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(We(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ut(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:c0.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield wd(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(We(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ut(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield cr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new ff("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}update(t,r,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ut(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield cr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ut(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield cr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ut(this,void 0,void 0,function*(){try{const s=yield cr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}download(t,r){return ut(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield dl(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(We(l))return{data:null,error:l};throw l}})}info(t){return ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield dl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:vd(n),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}exists(t){return ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield NP(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(We(n)&&n instanceof xd){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ut(this,void 0,void 0,function*(){try{return{data:yield tw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}list(t,r,n){return ut(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},_P),r),{prefix:t||""});return{data:yield cr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}listV2(t,r){return ut(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield cr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const PP="2.11.0",CP={"X-Client-Info":`storage-js/${PP}`};var fs=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class TP{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},CP),r),this.fetch=ew(n)}listBuckets(){return fs(this,void 0,void 0,function*(){try{return{data:yield dl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(We(t))return{data:null,error:t};throw t}})}getBucket(t){return fs(this,void 0,void 0,function*(){try{return{data:yield dl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return fs(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return fs(this,void 0,void 0,function*(){try{return{data:yield wd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}emptyBucket(t){return fs(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}deleteBucket(t){return fs(this,void 0,void 0,function*(){try{return{data:yield tw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}}class RP extends TP{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new EP(this.url,this.headers,t,this.fetch)}}const AP="2.56.1";let Ri="";typeof Deno<"u"?Ri="deno":typeof document<"u"?Ri="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ri="react-native":Ri="node";const DP={"X-Client-Info":`supabase-js-${Ri}/${AP}`},IP={headers:DP},LP={schema:"public"},$P={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},OP={};var MP=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const VP=e=>{let t;return e?t=e:typeof fetch>"u"?t=Fv:t=fetch,(...r)=>t(...r)},FP=()=>typeof Headers>"u"?Uv:Headers,UP=(e,t,r)=>{const n=VP(r),s=FP();return(i,o)=>MP(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var BP=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function zP(e){return e.endsWith("/")?e:e+"/"}function WP(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>BP(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const rw="2.71.1",xs=30*1e3,bd=3,Fc=bd*xs,HP="http://localhost:9999",qP="supabase.auth.token",KP={"X-Client-Info":`gotrue-js/${rw}`},kd="X-Supabase-Api-Version",nw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},GP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,XP=10*60*1e3;class mf extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class JP extends mf{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function QP(e){return re(e)&&e.name==="AuthApiError"}class sw extends mf{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Cn extends mf{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class en extends Cn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function YP(e){return re(e)&&e.name==="AuthSessionMissingError"}class ao extends Cn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class oo extends Cn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class lo extends Cn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ZP(e){return re(e)&&e.name==="AuthImplicitGrantRedirectError"}class u0 extends Cn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jd extends Cn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Uc(e){return re(e)&&e.name==="AuthRetryableFetchError"}class d0 extends Cn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Sd extends Cn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const hl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),h0=` 	
\r=`.split(""),eC=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<h0.length;t+=1)e[h0[t].charCodeAt(0)]=-2;for(let t=0;t<hl.length;t+=1)e[hl[t].charCodeAt(0)]=t;return e})();function f0(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(hl[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(hl[n]),t.queuedBits-=6}}function iw(e,t,r){const n=eC[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function m0(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{nC(o,n,r)};for(let o=0;o<e.length;o+=1)iw(e.charCodeAt(o),s,i);return t.join("")}function tC(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function rC(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}tC(n,t)}}function nC(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function sC(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)iw(e.charCodeAt(s),r,n);return new Uint8Array(t)}function iC(e){const t=[];return rC(e,r=>t.push(r)),new Uint8Array(t)}function aC(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>f0(s,r,n)),f0(null,r,n),t.join("")}function oC(e){return Math.round(Date.now()/1e3)+e}function lC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Xt=()=>typeof window<"u"&&typeof document<"u",On={tested:!1,writable:!1},aw=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(On.tested)return On.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),On.tested=!0,On.writable=!0}catch{On.tested=!0,On.writable=!1}return On.writable};function cC(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const ow=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ls(async()=>{const{default:n}=await Promise.resolve().then(()=>ui);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},uC=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",vs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Mn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Jr=async(e,t)=>{await e.removeItem(t)};class Bl{constructor(){this.promise=new Bl.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Bl.promiseConstructor=Promise;function Bc(e){const t=e.split(".");if(t.length!==3)throw new Sd("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!GP.test(t[n]))throw new Sd("JWT not in base64url format");return{header:JSON.parse(m0(t[0])),payload:JSON.parse(m0(t[1])),signature:sC(t[2]),raw:{header:t[0],payload:t[1]}}}async function dC(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function hC(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function fC(e){return("0"+e.toString(16)).substr(-2)}function mC(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,fC).join("")}async function pC(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function gC(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await pC(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ms(e,t,r=!1){const n=mC();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await vs(e,`${t}-code-verifier`,s);const i=await gC(n);return[i,n===i?"plain":"s256"]}const yC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xC(e){const t=e.headers.get(kd);if(!t||!t.match(yC))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function vC(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function wC(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ps(e){if(!bC.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zc(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function p0(e){return JSON.parse(JSON.stringify(e))}var kC=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Bn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jC=[502,503,504];async function g0(e){var t;if(!uC(e))throw new jd(Bn(e),0);if(jC.includes(e.status))throw new jd(Bn(e),e.status);let r;try{r=await e.json()}catch(i){throw new sw(Bn(i),i)}let n;const s=xC(e);if(s&&s.getTime()>=nw["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new d0(Bn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new en}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new d0(Bn(r),e.status,r.weak_password.reasons);throw new JP(Bn(r),e.status||500,n)}const SC=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function oe(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[kd]||(i[kd]=nw["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await NC(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function NC(e,t,r,n,s,i){const o=SC(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new jd(Bn(c),0)}if(l.ok||await g0(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await g0(c)}}function _r(e){var t;let r=null;CC(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=oC(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function y0(e){const t=_r(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function an(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function _C(e){return{data:e,error:null}}function EC(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=kC(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function PC(e){return e}function CC(e){return e.access_token&&e.refresh_token&&e.expires_in}const Wc=["global","local","others"];var TC=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class RC{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=ow(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Wc[0]){if(Wc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wc.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:an})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=TC(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:EC,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:an})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:PC});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ps(t);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:an})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ps(t);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:an})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ps(t);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:an})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ps(t.userId);try{const{data:r,error:n}=await oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ps(t.userId),ps(t.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}}function x0(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function AC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const gs={debug:!!(globalThis&&aw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lw extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class DC extends lw{}async function IC(e,t,r){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),gs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new DC(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(gs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}AC();const LC={url:HP,storageKey:qP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:KP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function v0(e,t,r){return await r()}const ys={};class ja{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ja.nextInstanceID,ja.nextInstanceID+=1,this.instanceID>0&&Xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},LC),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new RC({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ow(s.fetch),this.lock=s.lock||v0,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Xt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=IC:this.lock=v0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:aw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=x0(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=x0(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=ys[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ys[this.storageKey]=Object.assign(Object.assign({},ys[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ys[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ys[this.storageKey]=Object.assign(Object.assign({},ys[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rw}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=cC(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Xt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ZP(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return re(r)?{error:r}:{error:new sw("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:_r}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await ms(this.storage,this.storageKey)),i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:x},xform:_r})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:_r})}else throw new oo("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:y0})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:y0})}else throw new oo("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ao}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,f,m;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:b,wallet:y,statement:g,options:p}=t;let k;if(Xt())if(typeof y=="object")k=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))k=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=y}const S=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const N=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),g?{statement:g}:null));let _;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")_=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)_=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)x=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),w=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${S.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const N=await k.signMessage(new TextEncoder().encode(x),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=N}}try{const{data:b,error:y}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:aC(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:_r});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ao}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(re(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Mn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:_r});if(await Jr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ao}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(re(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:_r}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ao}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ms(this.storage,this.storageKey));const{error:h}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new oo("You must provide either an email or phone number.")}catch(l){if(re(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:_r});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ms(this.storage,this.storageKey)),await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:_C})}catch(i){if(re(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new en;const{error:s}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new oo("You must provide either an email or phone number and a type")}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Mn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Fc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Mn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=zc()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:an}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:an})})}catch(r){if(re(r))return YP(r)&&(await this._removeSession(),await Jr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new en;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ms(this.storage,this.storageKey));const{data:u,error:d}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:an});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new en;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Bc(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(re(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new en;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Xt())throw new lo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new lo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new u0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new lo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new u0("No code detected.");const{data:g,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new lo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=xs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:w,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(re(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Mn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(QP(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Jr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=lC(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ms(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(re(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Xt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(re(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await hC(async s=>(s>0&&await dC(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_r})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Uc(i)&&Date.now()+o-n<xs})}catch(n){if(this._debug(r,"error",n),re(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Xt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Mn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Mn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await vs(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:zc()}else if(s&&!s.user&&!s.user){const o=await Mn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Jr(this.storage,this.storageKey+"-user"),await vs(this.storage,this.storageKey,s)):s.user=zc()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Fc;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Fc}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Uc(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Bl;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new en;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),re(i)){const o={session:null,error:i};return Uc(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await vs(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=p0(s);await vs(this.storage,this.storageKey,i)}else{const s=p0(r);await vs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Jr(this.storage,this.storageKey),await Jr(this.storage,this.storageKey+"-code-verifier"),await Jr(this.storage,this.storageKey+"-user"),this.userStorage&&await Jr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),xs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/xs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${xs}ms, refresh threshold is ${bd} ticks`),s<=bd&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof lw)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ms(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(re(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(re(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Bc(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+XP>s)return n;const{data:i,error:o}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Bc(n);r!=null&&r.allowExpired||vC(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=wC(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,iC(`${l}.${c}`)))throw new Sd("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}}ja.nextInstanceID=0;const $C=ja;class OC extends $C{constructor(t){super(t)}}var MC=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class VC{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=zP(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:LP,realtime:OP,auth:Object.assign(Object.assign({},$P),{storageKey:u}),global:IP},h=WP(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=UP(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new tP(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new RP(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new DE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return MC(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new OC({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new xP(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const FC=(e,t,r)=>new VC(e,t,r);function UC(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}UC()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const BC="https://dedlbzhpgkmetvhbkyzq.supabase.co",zC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZGxiemhwZ2ttZXR2aGJreXpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MTE5MzcsImV4cCI6MjA3MjA4NzkzN30.o-AUQPUXAobkhMfdxa5g3oDkcneXNnmwK80KfAER16g",Nd=FC(BC,zC,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});var WC={};function HC({sdKey:e,isCompact:t=!1}){const[r,n]=v.useState(null),[s,i]=v.useState(!0),[o,l]=v.useState(null);v.useEffect(()=>{if(e){c();const N=Nd.channel("release-gates").on("postgres_changes",{event:"*",schema:"public",table:"sd_backlog_map",filter:`sd_id=eq.${e}`},()=>{c()}).subscribe();return()=>{N.unsubscribe()}}},[e]);async function c(){try{i(!0);const{data:N,error:_}=await Nd.from("v_sd_release_gate").select("*").eq("sd_key",e).single();if(_)throw _;n(N),l(null)}catch(N){console.error("Failed to load gate data:",N),l(N.message),n(null)}finally{i(!1)}}if(!e)return null;if(s)return a.jsx("div",{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow animate-pulse`,children:a.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})});if(o||!r)return null;const{ready:u,passing_pct:d=0,passing_count:h=0,failing_count:f=0,not_run_count:m=0,total_stories:x=0,avg_coverage:w=0}=r,b=u?"text-green-500":"text-red-500",y=u?a.jsx(rE,{className:"w-5 h-5"}):a.jsx(Av,{className:"w-5 h-5"}),g=u?"READY TO MERGE":"BLOCKED",p=u?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",k=Math.min(100,Math.max(0,d)),S=80;return a.jsxs(H.div,{className:`${t?"p-3":"p-4"} bg-white dark:bg-gray-800 rounded-lg shadow-lg border ${p}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ba,{className:`w-5 h-5 ${b}`}),a.jsx("h3",{className:`${t?"text-sm":"text-base"} font-semibold text-gray-900 dark:text-white`,children:"Release Gate"})]}),a.jsxs("div",{className:`flex items-center gap-1 ${b}`,children:[y,a.jsx("span",{className:`${t?"text-xs":"text-sm"} font-bold`,children:g})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Story Verification"}),a.jsxs("span",{className:`text-xs font-bold ${k>=S?"text-green-600":"text-amber-600"}`,children:[k.toFixed(0),"% / ",S,"%"]})]}),a.jsxs("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-gray-400 dark:bg-gray-500 z-10",style:{left:`${S}%`}}),a.jsx(H.div,{className:`h-full ${k>=S?"bg-green-500":"bg-amber-500"}`,initial:{width:0},animate:{width:`${k}%`},transition:{duration:.5,ease:"easeOut"}})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx($_,{className:"w-3 h-3 text-green-500"}),a.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-green-600 dark:text-green-400`,children:h})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Passing"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(xr,{className:"w-3 h-3 text-red-500"}),a.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-red-600 dark:text-red-400`,children:f})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Failing"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(Pn,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:`${t?"text-xs":"text-sm"} font-semibold text-gray-600 dark:text-gray-400`,children:m})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Not Run"})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(jn,{className:"w-3 h-3 text-blue-500"}),a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Coverage: ",w.toFixed(0),"%"]})]}),a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Total: ",x," stories"]})]}),!u&&x>0&&a.jsx(H.div,{className:"mt-3 p-2 bg-amber-100 dark:bg-amber-900/30 rounded text-xs text-amber-800 dark:text-amber-200",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(U_,{className:"w-3 h-3"}),a.jsxs("span",{children:["Need ",Math.ceil(x*.8)-h," more passing stories to merge"]})]})}),WC.REACT_APP_FEATURE_STORY_GATES==="false"&&a.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 italic",children:"Gates tracking only (not enforcing)"})]})}function qC({state:e,onRefresh:t,onSetActiveSD:r,isCompact:n}){var d,h;const s=cs(),[i,o]=v.useState({tests:{total:0,passed:0,failed:0},coverage:{lines:0,branches:0,functions:0,statements:0},git:{branch:"unknown",uncommittedChanges:0,lastCommit:""}}),l=Ol();v.useEffect(()=>{fetch("/api/metrics").then(f=>f.json()).then(f=>o(f)).catch(f=>console.error("Error loading metrics:",f))},[]);const c=n?"bg-white dark:bg-gray-800 rounded-lg shadow p-2 sm:p-3":"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6",u={hidden:{opacity:0,y:l?0:10},visible:f=>({opacity:1,y:0,transition:{duration:l?0:.1,delay:l?0:f*.02}})};return a.jsxs("div",{className:n?"space-y-2 sm:space-y-3":"space-y-4 sm:space-y-6",children:[a.jsxs(H.div,{className:"flex items-center justify-between",initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.08},children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(z_,{className:n?"w-5 h-5 sm:w-6 sm:h-6 mr-2":"w-6 sm:w-8 h-6 sm:h-8 mr-2 sm:mr-3"}),a.jsx("h1",{className:n?"text-xl sm:text-2xl font-bold":"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(H.button,{onClick:()=>s("/directive-lab?mode=quick"),className:`flex items-center ${n?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,whileHover:{scale:l?1:1.05},whileTap:{scale:l?1:.95},children:[a.jsx(nE,{className:`${n?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Directive"]}),a.jsx($l,{onRefresh:t,isCompact:n})]})]}),a.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1},children:a.jsx(CE,{strategicDirectives:e.strategicDirectives,prds:e.prds,currentSD:(d=e.leoProtocol)==null?void 0:d.currentSD,onSetActiveSD:r,isCompact:n})}),((h=e.leoProtocol)==null?void 0:h.currentSD)&&a.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:l?0:.1,delay:.05},children:a.jsx(HC,{sdKey:e.leoProtocol.currentSD,isCompact:n})}),a.jsxs("div",{className:`grid gap-${n?"2 sm:gap-3":"3 sm:gap-4"} grid-cols-1`,children:[a.jsx(H.div,{className:c,initial:"hidden",animate:"visible",custom:1,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:n?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Active Role"}),a.jsx("p",{className:n?"text-lg sm:text-xl font-bold truncate":"text-xl sm:text-2xl font-bold truncate",children:e.leoProtocol.activeRole||"Awaiting SD"}),a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 min-w-0",children:[a.jsxs("p",{className:n?"text-xs":"text-xs sm:text-sm",style:{color:"#4f9cf9"},children:["LEO v",e.leoProtocol.version]}),e.leoProtocol.lastHandoff&&a.jsxs("span",{className:`${n?"text-xs":"text-xs sm:text-sm"} text-gray-500 truncate`,children:["• ",new Date(e.leoProtocol.lastHandoff.timestamp).toLocaleTimeString()]})]})]}),a.jsx(lf,{className:`${n?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 ${e.leoProtocol.activeRole==="LEAD"?"text-blue-500":e.leoProtocol.activeRole==="PLAN"?"text-purple-500":e.leoProtocol.activeRole==="EXEC"?"text-green-500":"text-gray-400"}`})]})}),a.jsx(H.div,{className:c,initial:"hidden",animate:"visible",custom:2,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:a.jsx(sr,{to:"/strategic-directives",className:"block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:n?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strategic Directives"}),a.jsx("p",{className:n?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:a.jsx(Os,{end:e.strategicDirectives.length,duration:l?0:1.5,preserveValue:!0})}),a.jsxs("p",{className:n?"text-xs":"text-xs sm:text-sm",style:{color:"#10b981"},children:[a.jsx(Os,{end:e.strategicDirectives.filter(f=>{var m;return((m=f.metadata)==null?void 0:m.Status)==="Active"}).length,duration:l?0:1.2,preserveValue:!0})," Active"]})]}),a.jsx(qt,{className:`${n?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-blue-500`})]})})}),a.jsx(H.div,{className:c,initial:"hidden",animate:"visible",custom:3,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:a.jsx(sr,{to:"/backlog",className:"block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:n?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Backlog Items"}),a.jsx("p",{className:n?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:a.jsx(Os,{end:e.strategicDirectives.reduce((f,m)=>f+(m.total_backlog_items||m.total_items||m.backlog_count||0),0),duration:l?0:1.5,preserveValue:!0})}),a.jsxs("p",{className:n?"text-xs":"text-xs sm:text-sm",style:{color:"#6366f1"},children:[a.jsx(Os,{end:e.strategicDirectives.filter(f=>(f.total_backlog_items||f.total_items||f.backlog_count||0)>0).length,duration:l?0:1.2,preserveValue:!0})," SDs with items"]})]}),a.jsx(cl,{className:`${n?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-indigo-500`})]})})}),a.jsx(H.div,{className:c,initial:"hidden",animate:"visible",custom:4,variants:u,whileHover:{scale:l?1:1.02,transition:{duration:.1}},children:a.jsx(sr,{to:"/directive-lab",className:"block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:n?"text-xs sm:text-xs text-gray-600 dark:text-gray-400":"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"SDIP Submissions"}),a.jsx("p",{className:n?"text-lg sm:text-xl font-bold":"text-xl sm:text-2xl font-bold",children:"Directive Lab"}),a.jsx("p",{className:n?"text-xs":"text-xs sm:text-sm",style:{color:"#8b5cf6"},children:"Ready to submit"})]}),a.jsx(Cv,{className:`${n?"w-6 sm:w-8 h-6 sm:h-8":"w-8 sm:w-10 h-8 sm:h-10"} flex-shrink-0 text-purple-500`})]})})})]})]})}const pe=({children:e,variant:t="primary",size:r="medium",disabled:n=!1,loading:s=!1,onClick:i,type:o="button",fullWidth:l=!1,icon:c,iconPosition:u="left",ariaLabel:d,className:h="",...f})=>{const m=`
    inline-flex items-center justify-center
    font-medium transition-all duration-200
    rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    min-h-[44px] min-w-[44px]
  `,x={small:"px-3 py-1.5 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"},w={primary:`
      bg-blue-600 dark:bg-blue-600 text-white dark:text-white
      hover:bg-blue-700 dark:hover:bg-blue-700 active:bg-blue-800 dark:active:bg-blue-800
      focus:ring-blue-500 dark:focus:ring-blue-400
    `,secondary:`
      bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100
      hover:bg-gray-300 dark:hover:bg-gray-600 active:bg-gray-400 dark:active:bg-gray-500
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,ghost:`
      bg-transparent dark:bg-transparent text-gray-700 dark:text-gray-300
      hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700
      focus:ring-gray-500 dark:focus:ring-gray-400
    `,danger:`
      bg-red-600 dark:bg-red-600 text-white dark:text-white
      hover:bg-red-700 dark:hover:bg-red-700 active:bg-red-800 dark:active:bg-red-800
      focus:ring-red-500 dark:focus:ring-red-400
    `,success:`
      bg-green-600 dark:bg-green-600 text-white dark:text-white
      hover:bg-green-700 dark:hover:bg-green-700 active:bg-green-800 dark:active:bg-green-800
      focus:ring-green-500 dark:focus:ring-green-400
    `},b=l?"w-full":"",y=`
    ${m}
    ${x[r]}
    ${w[t]}
    ${b}
    ${h}
  `.trim().replace(/\s+/g," "),g=p=>{!n&&!s&&i&&i(p)};return a.jsxs("button",{type:o,className:y,disabled:n||s,onClick:g,"aria-label":d||(typeof e=="string"?e:void 0),"aria-busy":s,"aria-disabled":n||s,...f,children:[s&&a.jsx(H_,{className:"w-4 h-4 mr-2 animate-spin"}),!s&&c&&u==="left"&&a.jsx(c,{className:"w-4 h-4 mr-2"}),e,!s&&c&&u==="right"&&a.jsx(c,{className:"w-4 h-4 ml-2"})]})},co=({type:e="text",label:t,name:r,value:n,onChange:s,onBlur:i,placeholder:o,required:l=!1,disabled:c=!1,error:u,success:d,helpText:h,validationPattern:f,minLength:m,maxLength:x,rows:w=4,options:b=[],autoComplete:y,className:g="",fullWidth:p=!0,showCharCount:k=!1,...S})=>{const[N,_]=v.useState(!1),[P,$]=v.useState(!1),[R,Y]=v.useState("");v.useEffect(()=>{P&&f&&(new RegExp(f).test(n)?Y(""):Y("Invalid format"))},[n,f,P]);const I=`
    w-full px-4 py-3 
    border rounded-lg transition-all duration-200
    text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400
    min-h-[48px]
    focus:outline-none focus:ring-2 focus:ring-offset-1
    disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-60
    bg-white dark:bg-gray-700
   ${u||R?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400 focus:border-red-500 dark:focus:border-red-400":d?"border-green-500 dark:border-green-400 focus:ring-green-500 dark:focus:ring-green-400 focus:border-green-500 dark:focus:border-green-400":N?"border-blue-500 dark:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400"} ${g}`,L=()=>{_(!0)},z=G=>{_(!1),$(!0),i&&i(G)},O=G=>{s&&s(G),P||$(!0)},j=`input-${r||Math.random().toString(36).substr(2,9)}`,C=`${j}-error`,E=`${j}-help`,M=()=>{switch(e){case"textarea":return a.jsx("textarea",{id:j,name:r,value:n,onChange:O,onFocus:L,onBlur:z,placeholder:o,required:l,disabled:c,rows:w,minLength:m,maxLength:x,className:I,"aria-invalid":!!(u||R),"aria-describedby":`${u||R?C:""} ${h?E:""}`,...S});case"select":return a.jsxs("select",{id:j,name:r,value:n,onChange:O,onFocus:L,onBlur:z,required:l,disabled:c,className:I,"aria-invalid":!!(u||R),"aria-describedby":`${u||R?C:""} ${h?E:""}`,...S,children:[a.jsx("option",{value:"",children:"Select an option"}),b.map(G=>a.jsx("option",{value:G.value,children:G.label},G.value))]});default:return a.jsx("input",{id:j,type:e,name:r,value:n,onChange:O,onFocus:L,onBlur:z,placeholder:o,required:l,disabled:c,minLength:m,maxLength:x,autoComplete:y,className:I,"aria-invalid":!!(u||R),"aria-describedby":`${u||R?C:""} ${h?E:""}`,...S})}},K=p?"w-full":"";return a.jsxs("div",{className:`${K} mb-4`,children:[t&&a.jsxs("label",{htmlFor:j,className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",children:[t,l&&a.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[M(),a.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:[d&&!u&&!R&&a.jsx(dr,{className:"w-5 h-5 text-green-500","aria-label":"Valid input"}),(u||R)&&a.jsx(Ia,{className:"w-5 h-5 text-red-500","aria-label":"Invalid input"})]})]}),k&&x&&a.jsxs("div",{className:"mt-1 text-sm text-right text-gray-500 dark:text-gray-400",children:[(n==null?void 0:n.length)||0," / ",x]}),(u||R)&&a.jsxs("div",{id:C,className:"mt-2 flex items-start text-sm text-red-600 dark:text-red-400",role:"alert",children:[a.jsx(Pn,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),u||R]}),h&&!(u||R)&&a.jsxs("div",{id:E,className:"mt-2 flex items-start text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(Ft,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),h]})]})},KC=({steps:e=[],currentStep:t=1,orientation:r="horizontal",showTimeEstimates:n=!0,showStepNumbers:s=!0,compact:i=!1,hideLabelsOnMobile:o=!1,onStepClick:l,className:c=""})=>{const u=(t-1)/(e.length-1)*100,d=e.reduce((y,g)=>y+(g.timeEstimate||0),0),h=e.slice(0,t-1).reduce((y,g)=>y+(g.timeEstimate||0),0),f=y=>{if(y<60)return`${y} min`;const g=Math.floor(y/60),p=y%60;return p>0?`${g}h ${p}m`:`${g}h`},m=y=>y<t-1?"completed":y===t-1?"current":y===t?"upcoming":"locked",x=(y,g)=>{switch(y){case"completed":return a.jsx(dr,{className:"w-4 h-4"});case"current":return s?g:null;case"upcoming":return s?g:null;case"locked":return a.jsx(Av,{className:"w-3 h-3"});default:return g}},w=y=>{const g=m(y);l&&(g==="completed"||g==="current")&&l(y+1)},b=y=>{const g=m(y);return l&&(g==="completed"||g==="current")};return r==="vertical"?a.jsxs("div",{className:`${c}`,children:[n&&!i&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),a.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`},role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"})}),a.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-600 dark:text-gray-400",children:[a.jsxs("span",{children:[f(h)," completed"]}),a.jsxs("span",{children:[f(d-h)," remaining"]})]})]}),a.jsx("div",{className:"relative",children:e.map((y,g)=>{const p=m(g),k=g===e.length-1;return a.jsxs("div",{className:"flex items-start mb-8 last:mb-0",children:[!k&&a.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),a.jsx("button",{onClick:()=>w(g),disabled:!b(g),className:`
                    relative z-10 flex items-center justify-center
                    w-12 h-12 rounded-full border-2 transition-all
                    ${b(g)?"cursor-pointer":"cursor-default"}
                    ${p==="completed"?"bg-green-500 border-green-500 text-white":""}
                    ${p==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                    ${p==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                    ${p==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                  `,"aria-label":`Step ${g+1}: ${y.title} - ${p}`,children:x(p,g+1)}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h3",{className:`
                    font-medium text-base
                    ${p==="current"?"text-blue-600":""}
                    ${p==="completed"?"text-green-600":""}
                    ${p==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),y.description&&!i&&a.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:y.description}),n&&y.timeEstimate&&a.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[a.jsx(Ct,{className:"w-3 h-3 mr-1"}),f(y.timeEstimate)]})]})]},g)})})]}):a.jsxs("div",{className:`${c}`,children:[n&&!i&&a.jsx("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ct,{className:"w-4 h-4 mr-2 text-blue-600"}),a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Time: ",a.jsx("span",{className:"font-medium",children:f(h)})," of"," ",a.jsx("span",{className:"font-medium",children:f(d)})]})]}),a.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Math.round(u),"% Complete"]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-300 dark:bg-gray-600"}),a.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-blue-600 dark:bg-blue-500 transition-all duration-300",style:{width:`${u}%`}}),a.jsx("div",{className:"relative flex justify-between",children:e.map((y,g)=>{const p=m(g);return a.jsxs("div",{className:`flex flex-col items-center ${i?"flex-1":""}`,children:[a.jsxs("div",{className:"relative group",children:[a.jsx("button",{onClick:()=>w(g),disabled:!b(g),className:`
                      relative z-10 flex items-center justify-center
                      w-12 h-12 rounded-full border-2 transition-all
                      ${b(g)?"cursor-pointer hover:scale-110":"cursor-default"}
                      ${p==="completed"?"bg-green-500 border-green-500 text-white":""}
                      ${p==="current"?"bg-blue-600 border-blue-600 text-white animate-pulse":""}
                      ${p==="upcoming"?"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400":""}
                      ${p==="locked"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500":""}
                    `,"aria-label":`Step ${g+1}: ${y.title} - ${p}`,title:y.title,children:x(p,g+1)}),o&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block md:hidden z-20",children:a.jsxs("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[y.title,a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:a.jsx("div",{className:"border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})})]}),a.jsxs("div",{className:`mt-3 text-center ${o?"hidden md:block":""}`,children:[a.jsx("p",{className:`
                    text-sm font-medium
                    ${p==="current"?"text-blue-600":""}
                    ${p==="completed"?"text-green-600":""}
                    ${p==="locked"?"text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}
                  `,children:y.title}),n&&y.timeEstimate&&!i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:f(y.timeEstimate)})]})]},g)})})]})]})},GC=({onSubmissionSelect:e,onGroupCreate:t,selectedSubmissionId:r,onSelectionChange:n,refreshTrigger:s=0})=>{const[i,o]=v.useState([]),[l,c]=v.useState(!0),[u,d]=v.useState(null),[h,f]=v.useState([]),[m,x]=v.useState(!1),[w,b]=v.useState(null),[y,g]=v.useState(!1);v.useEffect(()=>{p()},[m,s]),v.useEffect(()=>{const I=()=>{b(null),g(!1)};if(w||y)return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[w,y]);const p=async()=>{try{c(!0);const I=new URLSearchParams;m&&I.append("uncombined","true"),I.append("since","30d");const L=await fetch(`/api/sdip/submissions?${I}`);if(!L.ok)throw new Error("Failed to load submissions");const z=await L.json();o(z),d(null)}catch(I){d(I.message),o([])}finally{c(!1)}},k=I=>{const L=h.includes(I)?h.filter(z=>z!==I):[...h,I];f(L),n==null||n(L)},S=I=>{e(I)},N=(I="intelligent")=>{h.length>=2&&t(h,I)},_=async I=>{if(confirm("Are you sure you want to delete this submission?"))try{if(!(await fetch(`/api/sdip/submissions/${I}`,{method:"DELETE"})).ok)throw new Error("Failed to delete submission");o(z=>z.filter(O=>O.id!==I)),f(z=>z.filter(O=>O!==I)),r===I&&e(null)}catch(L){console.error("Error deleting submission:",L),alert("Failed to delete submission. Please try again.")}},P=I=>{const L=new Date(I),O=Math.floor((new Date-L)/(1e3*60*60));return O<1?"Just now":O<24?`${O}h ago`:O<48?"Yesterday":L.toLocaleDateString()},$=I=>{const L=I.intent_summary||I.chairman_input||I.submission_title||"Untitled Submission";return L.length>60?L.substring(0,57)+"...":L},R=I=>{var z,O,j,C,E;let L="";return((O=(z=I.synthesis)==null?void 0:z.aligned)==null?void 0:O.length)>0?L=((j=I.synthesis.aligned[0])==null?void 0:j.text)||"":(C=I.impact_analysis)!=null&&C.summary?L=I.impact_analysis.summary:(E=I.strat_tac)!=null&&E.rationale&&(L=I.strat_tac.rationale),!L&&I.chairman_input&&(L=I.chairman_input.substring(0,100)+"..."),L.length>120?L.substring(0,117)+"...":L},Y=I=>{var O;const L=((O=I.impact_analysis)==null?void 0:O.affected_components)||[];if(L.length===0)return null;const z=L.find(j=>j.impact_level==="high")||L[0];return(z==null?void 0:z.name)||(z==null?void 0:z.component)||null},Ce=I=>{var j,C;const L=I.status||"draft",z=I.current_step||1,O=Array.isArray(I.completed_steps)?I.completed_steps:[];return L==="submitted"||((j=I.gate_status)==null?void 0:j.status)==="submitted"||(C=I.gate_status)!=null&&C.resulting_sd_id||I.resulting_sd_id?{text:"🟢 Submitted",color:"text-green-700 bg-green-100 dark:bg-green-900/20 dark:text-green-300",icon:"✓"}:L==="ready"||O.includes(7)||O.length===7&&z===7?{text:"🔵 Ready",color:"text-blue-700 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300",icon:"→"}:{text:"🟡 Draft",color:"text-yellow-700 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300",icon:"✏"}},Qe=I=>i.filter(L=>L.group_id===I);return l?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 text-sm",children:"Recent Submissions"}),i.length>0&&a.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded",children:i.length})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(pe,{onClick:()=>x(!m),variant:m?"primary":"ghost",size:"small",icon:F_,ariaLabel:"Show uncombined only"}),h.length>=2&&a.jsxs("div",{className:"relative",children:[a.jsxs(pe,{onClick:I=>{I.stopPropagation(),g(!y)},variant:"primary",size:"small",icon:lf,children:["Combine (",h.length,")"]}),y&&a.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-20 min-w-56",children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 px-2",children:"Combination Method:"}),[{id:"intelligent",name:"🧠 Intelligent",desc:"AI-driven optimal combination"},{id:"chronological",name:"📅 Chronological",desc:"Preserve timeline order"},{id:"merge",name:"🔄 Smart Merge",desc:"Deduplicate and consensus"},{id:"priority",name:"⭐ Priority-based",desc:"Highest strategic impact first"},{id:"latest",name:"🕒 Latest Override",desc:"Most recent takes precedence"}].map(I=>a.jsxs("button",{onClick:L=>{L.stopPropagation(),N(I.id),g(!1)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex flex-col gap-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:I.name}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:I.desc})]},I.id))]})})]})]})]}),u&&a.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-400 flex items-start gap-2",children:[a.jsx(Pn,{className:"w-5 h-5 text-red-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load submissions"}),a.jsx("p",{className:"text-red-600 text-sm",children:u}),a.jsx("button",{onClick:p,className:"mt-1 text-red-700 underline text-sm hover:no-underline",children:"Try again"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:i.length===0?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(Ct,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"No submissions yet"}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Create your first submission to get started with the Directive Lab"}),a.jsx("button",{onClick:()=>e(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Submission"})]}):a.jsx("div",{className:"p-2",children:i.map(I=>{const L=Ce(I),z=$(I),O=R(I),j=Y(I),C=h.includes(I.id),E=r===I.id,M=I.group_id?Qe(I.group_id):[],K=w===I.id;return a.jsx("div",{className:`p-3 mb-2 border rounded-lg transition-all cursor-pointer ${E?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700/50"}`,onClick:()=>S(I),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:G=>{G.stopPropagation(),k(I.id)},className:"mt-1 text-gray-400 hover:text-gray-600 transition-colors",children:C?a.jsx(_v,{className:"w-4 h-4 text-blue-600"}):a.jsx(Iv,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm leading-tight",children:z}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap font-medium ${L.color}`,children:L.text})]}),O&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 leading-relaxed",children:O}),j&&a.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[a.jsx(qt,{className:"w-3 h-3 text-gray-400"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Affects: ",a.jsx("span",{className:"font-medium",children:j})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:P(I.created_at)}),I.group_id&&M.length>1&&a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:G=>{G.stopPropagation(),b(K?null:I.id)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[a.jsx(Rv,{className:"w-3 h-3"}),a.jsxs("span",{className:"font-medium",children:[M.length," items"]}),a.jsx(Tr,{className:`w-3 h-3 transition-transform ${K?"rotate-180":""}`})]}),K&&a.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-48",children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 px-2",children:"Linked Submissions:"}),M.map(G=>{const ce=Ce(G),de=$(G);return a.jsxs("button",{onClick:xe=>{xe.stopPropagation(),S(G),b(null)},className:"w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate",children:de}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${ce.color}`,children:ce.icon}),a.jsx(wa,{className:"w-3 h-3 text-gray-400"})]})]},G.id)})]})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:G=>{G.stopPropagation(),S(I)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[a.jsx(V_,{className:"w-3 h-3"}),"View"]}),a.jsx("button",{onClick:G=>{G.stopPropagation(),_(I.id)},className:"flex items-center gap-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete submission",children:a.jsx(tE,{className:"w-3 h-3"})})]})]})]})]})},I.id)})})}),h.length>0&&a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-700",children:a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:[h.length," selected"]}),h.length>=2&&a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Ready to combine →"})]})})]})},XC=({isOpen:e=!0,onClose:t,selectedSubmissions:r,combineMethod:n="intelligent",onCreateGroup:s,onSuccess:i})=>{const[o,l]=v.useState(""),[c,u]=v.useState(n),[d,h]=v.useState(!1),[f,m]=v.useState(null),x=async b=>{if(b.preventDefault(),!!o.trim()){h(!0),m(null);try{const y=await fetch("/api/sdip/create-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_ids:r,group_name:o.trim(),method:c})});if(!y.ok){const p=await y.json();throw new Error(p.error||"Failed to create group")}const g=await y.json();console.log("🔗 Group created successfully:",g),i?i(g):s&&await s(g),t(),l(""),u(n)}catch(y){m(y.message)}finally{h(!1)}}};if(!e)return null;const w=[{value:"intelligent",label:"🧠 Intelligent",desc:"AI-driven optimal combination"},{value:"chronological",label:"📅 Chronological",desc:"Keep time order"},{value:"merge",label:"🔄 Merge & Dedupe",desc:"Remove duplicates"},{value:"priority",label:"⭐ Priority-based",desc:"Highest strategic impact first"},{value:"latest",label:"🕒 Latest Priority",desc:"Latest overrides"}];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lf,{className:"w-4 h-4 text-blue-600"}),a.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Combine ",r.length," Submissions"]})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:a.jsx(Ia,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:x,className:"p-3 space-y-3",children:[f&&a.jsxs("div",{className:"flex items-start gap-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[a.jsx(Pn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:f})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"group-name",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Group Name"}),a.jsx("input",{type:"text",id:"group-name",value:o,onChange:b=>l(b.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dashboard UX Improvements",required:!0,maxLength:100})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Combine Method"}),a.jsx("div",{className:"grid grid-cols-1 gap-1",children:w.map(b=>a.jsx("label",{className:`flex items-center justify-between p-2 text-xs border rounded cursor-pointer transition-colors ${c===b.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-600"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"combineMethod",value:b.value,checked:c===b.value,onChange:y=>u(y.target.value),className:"text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b.label}),a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["— ",b.desc]})]})]})},b.value))})]}),a.jsxs("div",{className:"flex gap-2 pt-1",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!o.trim()||d,className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 border border-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Creating...":"Combine"})]})]})]})})},JC=({impactAnalysis:e,consistencyValidation:t,submission:r})=>{var d,h,f;const[n,s]=v.useState({overview:!0,components:!1,consistency:!1,recommendations:!1,mitigation:!1});if(!e&&!t)return a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-center",children:[a.jsx(Ft,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No impact analysis available for this submission"})]});const i=m=>{s(x=>({...x,[m]:!x[m]}))},o=m=>{switch(m){case"critical":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-100",accent:"text-red-600 dark:text-red-400",icon:mt};case"high":return{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-100",accent:"text-orange-600 dark:text-orange-400",icon:Pn};case"medium":return{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-900 dark:text-yellow-100",accent:"text-yellow-600 dark:text-yellow-400",icon:Ft};case"low":return{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-100",accent:"text-green-600 dark:text-green-400",icon:Ne};default:return{bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",text:"text-gray-900 dark:text-gray-100",accent:"text-gray-600 dark:text-gray-400",icon:Ft}}},l=o((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)),c=l.icon,u=m=>({ui:To,api:B_,database:sf,authentication:ba,navigation:ka,performance:jn,"design-system":To})[m]||Ft;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-lg border ${l.bg} ${l.border} p-6`,children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("overview"),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(c,{className:`w-6 h-6 ${l.accent}`}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-lg font-semibold ${l.text}`,children:"Impact Analysis Overview"}),a.jsxs("p",{className:`text-sm ${l.text} opacity-75`,children:["Risk Level: ",((e==null?void 0:e.risk_level)||(t==null?void 0:t.risk_level)||"unknown").toUpperCase()]})]})]}),n.overview?a.jsx(Tr,{className:`w-5 h-5 ${l.accent}`}):a.jsx(hr,{className:`w-5 h-5 ${l.accent}`})]}),n.overview&&a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:e.impact_score}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Impact Score"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:`text-2xl font-bold ${l.accent}`,children:[e.effort_multiplier,"x"]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Effort Multiplier"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${l.accent}`,children:((d=e.affected_components)==null?void 0:d.length)||0}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Affected Components"})]})]}),t&&a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`text-2xl font-bold ${t.passed?"text-green-600":"text-red-600"}`,children:t.score}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Consistency Score"})]})]})]}),(e==null?void 0:e.affected_components)&&e.affected_components.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("components"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(To,{className:"w-5 h-5 mr-2"}),"Affected Components"]}),n.components?a.jsx(Tr,{className:"w-5 h-5 text-gray-400"}):a.jsx(hr,{className:"w-5 h-5 text-gray-400"})]}),n.components&&a.jsx("div",{className:"mt-4 space-y-3",children:e.affected_components.map((m,x)=>{const w=u(m.name),b=o(m.risk_level);return a.jsxs("div",{className:`p-4 rounded-lg border ${b.bg} ${b.border}`,children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(w,{className:`w-5 h-5 ${b.accent}`}),a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${b.text}`,children:m.name}),a.jsxs("p",{className:`text-sm ${b.text} opacity-75`,children:["Risk: ",m.risk_level," • Confidence: ",Math.round((m.confidence||0)*100),"%"]})]})]})}),m.dependencies&&m.dependencies.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:`text-xs ${b.text} opacity-60 mb-1`,children:"Dependencies:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:m.dependencies.map((y,g)=>a.jsx("span",{className:`px-2 py-1 rounded text-xs ${b.accent} bg-white dark:bg-gray-700`,children:y},g))})]})]},x)})})]}),t&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("consistency"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(ba,{className:"w-5 h-5 mr-2"}),"Consistency Validation",!t.passed&&a.jsx(xr,{className:"w-5 h-5 ml-2 text-red-500"})]}),n.consistency?a.jsx(Tr,{className:"w-5 h-5 text-gray-400"}):a.jsx(hr,{className:"w-5 h-5 text-gray-400"})]}),n.consistency&&a.jsxs("div",{className:"mt-4 space-y-4",children:[a.jsxs("div",{className:`p-4 rounded-lg ${t.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[a.jsxs("div",{className:"flex items-center",children:[t.passed?a.jsx(Ne,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}):a.jsx(xr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),a.jsx("span",{className:`font-medium ${t.passed?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:t.passed?"Validation Passed":"Validation Failed"})]}),t.blocking_issues&&t.blocking_issues.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Blocking Issues:"}),t.blocking_issues.map((m,x)=>a.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200 mb-1",children:["• ",m.message,m.suggestion&&a.jsxs("div",{className:"text-xs text-red-600 dark:text-red-300 ml-4 mt-1",children:["Suggestion: ",m.suggestion]})]},x))]})]}),t.category_scores&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Category Breakdown"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.category_scores).map(([m,x])=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:m.replace("_"," ")}),a.jsx("span",{className:`text-sm font-bold ${x>=70?"text-green-600":x>=50?"text-yellow-600":"text-red-600"}`,children:x})]}),a.jsx("div",{className:"mt-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all ${x>=70?"bg-green-500":x>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${x}%`}})})]},m))})]})]})]}),((e==null?void 0:e.recommendations)||(t==null?void 0:t.recommendations))&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("recommendations"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(ka,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),n.recommendations?a.jsx(Tr,{className:"w-5 h-5 text-gray-400"}):a.jsx(hr,{className:"w-5 h-5 text-gray-400"})]}),n.recommendations&&a.jsxs("div",{className:"mt-4 space-y-3",children:[(h=e==null?void 0:e.recommendations)==null?void 0:h.map((m,x)=>a.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ft,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[m.type,": ",m.description]}),m.effort_reduction&&a.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Effort reduction: ",m.effort_reduction]})]})]})},`impact-${x}`)),(f=t==null?void 0:t.recommendations)==null?void 0:f.map((m,x)=>a.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ne,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:m.message}),m.priority&&a.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs mt-1 ${m.priority==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":m.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":m.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[m.priority," priority"]})]})]})},`consistency-${x}`))]})]}),(e==null?void 0:e.mitigation_strategies)&&e.mitigation_strategies.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i("mitigation"),children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(dd,{className:"w-5 h-5 mr-2"}),"Mitigation Strategies"]}),n.mitigation?a.jsx(Tr,{className:"w-5 h-5 text-gray-400"}):a.jsx(hr,{className:"w-5 h-5 text-gray-400"})]}),n.mitigation&&a.jsx("div",{className:"mt-4 space-y-2",children:e.mitigation_strategies.map((m,x)=>a.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx(dd,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:m})]},x))})]}),(e==null?void 0:e.breaking_changes)&&e.breaking_changes.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(mt,{className:"w-6 h-6 text-red-600 dark:text-red-400 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Breaking Changes Detected"})]}),a.jsx("div",{className:"space-y-2",children:e.breaking_changes.map((m,x)=>a.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[a.jsxs("strong",{children:[m.type,":"]})," ",m.description,m.keyword&&a.jsxs("span",{className:"ml-2 text-xs bg-red-200 dark:bg-red-800 px-2 py-1 rounded",children:['"',m.keyword,'"']})]},x))})]})]})},QC=({type:e,level:t,showTooltip:r=!0})=>{const[n,s]=v.useState(!1),o={UI:{label:"UI",description:"User Interface complexity",colors:{HIGH:"bg-blue-600 text-white",MEDIUM:"bg-blue-400 text-white",LOW:"bg-blue-200 text-blue-900"}},DB:{label:"DB",description:"Database impact and complexity",colors:{HIGH:"bg-purple-600 text-white",MEDIUM:"bg-purple-400 text-white",LOW:"bg-purple-200 text-purple-900"}},COMPLEX:{label:"COMPLEX",description:"Overall implementation complexity",colors:{HIGH:"bg-orange-600 text-white",MEDIUM:"bg-orange-400 text-white",LOW:"bg-orange-200 text-orange-900"}},ACCESS:{label:"ACCESS",description:"Access control and permissions",colors:{HIGH:"bg-green-600 text-white",MEDIUM:"bg-green-400 text-white",LOW:"bg-green-200 text-green-900"}},SECURITY:{label:"SECURITY",description:"Security implications",colors:{HIGH:"bg-red-600 text-white",MEDIUM:"bg-red-400 text-white",LOW:"bg-red-200 text-red-900"}},PROCESS:{label:"PROCESS",description:"Business process impact",colors:{HIGH:"bg-yellow-600 text-white",MEDIUM:"bg-yellow-400 text-gray-900",LOW:"bg-yellow-200 text-yellow-900"}}}[e];if(!o)return null;const l=o.colors[t]||o.colors.LOW;return a.jsxs("div",{className:"inline-flex items-center relative",children:[a.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${l} cursor-help transition-opacity hover:opacity-90`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[o.label,":",t,r&&a.jsx(Ft,{className:"w-3 h-3 ml-1 opacity-70"})]}),r&&n&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap",children:[a.jsx("div",{className:"font-semibold",children:o.description}),a.jsxs("div",{className:"text-gray-300 mt-1",children:[t==="HIGH"&&"Significant impact - careful review needed",t==="MEDIUM"&&"Moderate impact - standard review",t==="LOW"&&"Minimal impact - routine change"]}),a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900"})]})})]})},Hc=({badges:e})=>{if(!e)return null;const t=["UI","DB","COMPLEX","ACCESS","SECURITY","PROCESS"];return a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.map(r=>{const n=e[r];return n?a.jsx(QC,{type:r,level:n},r):null})})},qc=e=>{const t={},r=e.toLowerCase();return(r.includes("ui")||r.includes("interface")||r.includes("component"))&&(t.UI=r.includes("complex")||r.includes("major")?"HIGH":r.includes("update")||r.includes("modify")?"MEDIUM":"LOW"),(r.includes("database")||r.includes("schema")||r.includes("migration"))&&(t.DB=r.includes("migration")||r.includes("schema")?"HIGH":r.includes("query")||r.includes("index")?"MEDIUM":"LOW"),r.includes("architecture")||r.includes("refactor")||r.includes("system")?t.COMPLEX="HIGH":r.includes("feature")||r.includes("implement")?t.COMPLEX="MEDIUM":(r.includes("fix")||r.includes("update"))&&(t.COMPLEX="LOW"),(r.includes("permission")||r.includes("role")||r.includes("access"))&&(t.ACCESS=r.includes("admin")||r.includes("role")?"HIGH":"MEDIUM"),r.includes("security")||r.includes("auth")||r.includes("encrypt")?t.SECURITY=r.includes("auth")||r.includes("encrypt")?"HIGH":"MEDIUM":(r.includes("api")||r.includes("endpoint"))&&(t.SECURITY="LOW"),(r.includes("workflow")||r.includes("process")||r.includes("business"))&&(t.PROCESS=r.includes("workflow")?"HIGH":"MEDIUM"),Object.keys(t).length===0&&(t.COMPLEX="LOW"),t},pf=({message:e,type:t="info",duration:r=5e3,onClose:n,position:s="top-right"})=>{const[i,o]=v.useState(!1),[l,c]=v.useState(!1);v.useEffect(()=>{setTimeout(()=>o(!0),10);const x=setTimeout(()=>{u()},r);return()=>clearTimeout(x)},[r]);const u=()=>{c(!0),setTimeout(()=>{o(!1),n==null||n()},300)},d={success:{icon:Ne,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-800 dark:text-green-200",iconColor:"text-green-600 dark:text-green-400"},error:{icon:Pn,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-800 dark:text-red-200",iconColor:"text-red-600 dark:text-red-400"},warning:{icon:mt,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",textColor:"text-yellow-800 dark:text-yellow-200",iconColor:"text-yellow-600 dark:text-yellow-400"},info:{icon:Ft,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-800 dark:text-blue-200",iconColor:"text-blue-600 dark:text-blue-400"}},h=d[t]||d.info,f=h.icon,m={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"};return a.jsx("div",{className:`
        fixed z-50 
        ${m[s]}
        transition-all duration-300 ease-in-out
        ${i&&!l?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"}
      `,children:a.jsxs("div",{className:`
          flex items-center gap-3 p-4 rounded-lg shadow-lg
          ${h.bgColor} ${h.borderColor} ${h.textColor}
          border min-w-[300px] max-w-md
        `,children:[a.jsx(f,{className:`w-5 h-5 ${h.iconColor} flex-shrink-0`}),a.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),a.jsx("button",{onClick:u,className:`${h.iconColor} hover:opacity-70 transition-opacity`,"aria-label":"Close notification",children:a.jsx(Ia,{className:"w-4 h-4"})})]})})},YC=({children:e})=>{const[t,r]=v.useState([]),n=(i,o="info",l=5e3)=>{const c=Date.now(),u={id:c,message:i,type:o,duration:l};return r(d=>[...d,u]),c},s=i=>{r(o=>o.filter(l=>l.id!==i))};return v.useEffect(()=>(window.showToast=n,()=>{delete window.showToast}),[]),a.jsxs(a.Fragment,{children:[e,a.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:t.map((i,o)=>a.jsx("div",{className:"pointer-events-auto",style:{position:"fixed",top:`${20+o*80}px`,right:"20px",transition:"all 0.3s ease-in-out"},children:a.jsx(pf,{message:i.message,type:i.type,duration:i.duration,onClose:()=>s(i.id),position:"none"})},i.id))})]})},ZC=()=>{const e=(t,r="info",n=5e3)=>{if(window.showToast)return window.showToast(t,r,n);console.warn("Toast provider not found. Make sure ToastProvider is mounted.")};return{success:(t,r)=>e(t,"success",r),error:(t,r)=>e(t,"error",r),warning:(t,r)=>e(t,"warning",r),info:(t,r)=>e(t,"info",r),show:e}},eT=()=>{var kr;const e=wr(),r=new URLSearchParams(e.search).get("mode")==="quick"?"quick":"comprehensive",[n,s]=v.useState(r),[i,o]=v.useState(1),[l,c]=v.useState(null),[u,d]=v.useState(!1),[h,f]=v.useState(null),[m,x]=v.useState(null),[w,b]=v.useState([]),[y,g]=v.useState(!1),[p,k]=v.useState("intelligent"),[S,N]=v.useState(0),[_,P]=v.useState(!1),[$,R]=v.useState("input"),[Y,Ce]=v.useState(!1),[Qe,I]=v.useState(!0),[L,z]=v.useState(null),[O,j]=v.useState(null),[C,E]=v.useState({}),[M,K]=v.useState(!1),[G,ce]=v.useState(!1),[de,xe]=v.useState([]),[Te,ds]=v.useState(!1),[gf,zl]=v.useState({}),Tn=ZC(),[W,rt]=v.useState({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),[hi,Br]=v.useState({}),[fi,zr]=v.useState({}),[T,X]=v.useState({1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1}),ne=()=>n==="quick"?[{id:1,title:"Input",icon:Yp,description:"Enter your directive idea",timeEstimate:2},{id:3,title:"Classification",icon:ka,description:"Strategic or Tactical",timeEstimate:1},{id:7,title:"Confirmation",icon:Ne,description:"Review and submit",timeEstimate:1}]:[{id:1,title:"Input & Screenshot",icon:Ic,description:"Provide feedback and optional screenshot",timeEstimate:3},{id:2,title:"Intent Confirmation",icon:ka,description:"Review and confirm the extracted intent",timeEstimate:2},{id:3,title:"Classification",icon:To,description:"Review strategic vs tactical breakdown",timeEstimate:2},{id:4,title:"Impact Analysis",icon:mt,description:"Review application impact and consistency validation",timeEstimate:4},{id:5,title:"Synthesis Review",icon:qt,description:"Review aligned, required, and recommended items",timeEstimate:5},{id:6,title:"Questions",icon:Yp,description:"Answer questions to refine the directive",timeEstimate:3},{id:7,title:"Confirmation",icon:Ne,description:"Review and confirm the final summary",timeEstimate:2}],fe=A=>{if(A<i&&l){const q=({1:[2,3,4,5,6,7],2:[3,4,5,6,7],3:[4,5,6,7],4:[5,6,7],5:[6,7],6:[7]}[A]||[]).filter(te=>{switch(te){case 2:return l.intent_summary;case 3:return l.strat_tac;case 4:return l.impact_analysis;case 5:return l.synthesis;case 6:return l.questions;case 7:return l.final_summary;default:return!1}});if(q.length>0){const te={2:"Intent Summary",3:"Classification",4:"Impact Analysis",5:"Synthesis",6:"Clarifying Questions",7:"Final Summary"},ae=q.map(J=>te[J]).join(", ");Tn.warning(`Editing Step ${A} may invalidate: ${ae}`,8e3),xe(J=>[...J,{editedStep:A,timestamp:new Date().toISOString(),affectedSteps:q}])}}},nt=A=>n==="quick"?A===1?3:A===3?7:A:A<7?A+1:A,Fe=A=>{fe(A),o(A)},me=ne();v.useEffect(()=>{const A=()=>{const U=window.innerWidth<768;P(U)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[l]),v.useEffect(()=>{const A=setTimeout(()=>{(W.chairmanInput||W.intentSummary)&&(localStorage.setItem("directiveLab_draft",JSON.stringify(W)),x("Draft saved"),setTimeout(()=>x(null),3e3))},2e3);return()=>clearTimeout(A)},[W]),v.useEffect(()=>{const A=localStorage.getItem("directiveLab_draft");A&&(rt(JSON.parse(A)),x("Draft restored"),setTimeout(()=>x(null),3e3))},[]),v.useEffect(()=>{if(i===3&&(l!=null&&l.id)&&!(l!=null&&l.strat_tac)){console.log("🎯 [STEP 3] Generating classification data...");const A=W.intentSummary||(l==null?void 0:l.intent_summary)||"",U=["vision","strategy","long-term","transform","innovation","competitive advantage","market position","growth","expansion","culture"],F=["fix","bug","update","modify","adjust","correct","improve","enhance","optimize","refactor"];let se=0,q=0;const te=A.toLowerCase();U.forEach(Ue=>{te.includes(Ue)&&(se+=10)}),F.forEach(Ue=>{te.includes(Ue)&&(q+=10)}),se===0&&q===0&&(se=50,q=50);const ae=se+q,J=Math.round(se/ae*100),Ke=100-J,Oe=J>60?"This initiative focuses on strategic goals that will shape long-term direction and capabilities.":Ke>60?"This initiative addresses immediate operational needs and improvements.":"This initiative balances both strategic vision and tactical execution needs.",jr={strat_tac:{strategic_pct:J,tactical_pct:Ke,rationale:Oe,generated_at:new Date().toISOString()}};c(Ue=>({...Ue,...jr})),console.log("✅ [STEP 3] Classification data generated locally")}},[i,l,W.intentSummary]),v.useEffect(()=>{var A;if(i===4&&(l!=null&&l.id)&&!(l!=null&&l.impact_analysis)){console.log("🎯 [STEP 4] Generating impact analysis data...");const U=W.intentSummary||(l==null?void 0:l.intent_summary)||"",F=U.toLowerCase(),se={dashboard:[{name:"Dashboard",risk_level:"medium",confidence:.8,dependencies:["MetricsCard","ChartComponent"]},{name:"DashboardCard",risk_level:"low",confidence:.7,dependencies:["UI Components"]},{name:"MetricsCard",risk_level:"low",confidence:.6,dependencies:["Data Fetcher"]}],form:[{name:"Form",risk_level:"medium",confidence:.9,dependencies:["Input","Button","Validation"]},{name:"Input",risk_level:"low",confidence:.8,dependencies:["Event Handlers"]},{name:"Button",risk_level:"low",confidence:.9,dependencies:["UI Components"]},{name:"Validation",risk_level:"medium",confidence:.7,dependencies:["Form State"]}],navigation:[{name:"Navigation",risk_level:"medium",confidence:.8,dependencies:["Router","Auth Context"]},{name:"Sidebar",risk_level:"low",confidence:.7,dependencies:["Navigation"]},{name:"Menu",risk_level:"low",confidence:.6,dependencies:["Navigation"]}],table:[{name:"Table",risk_level:"medium",confidence:.8,dependencies:["Data Fetcher","Pagination"]},{name:"DataGrid",risk_level:"high",confidence:.9,dependencies:["Table","Virtual Scroller"]}],modal:[{name:"Modal",risk_level:"medium",confidence:.8,dependencies:["Portal","Focus Trap"]},{name:"Dialog",risk_level:"medium",confidence:.7,dependencies:["Modal"]},{name:"Overlay",risk_level:"low",confidence:.6,dependencies:["Portal"]}],auth:[{name:"Auth",risk_level:"high",confidence:.9,dependencies:["UserContext","Token Manager"]},{name:"Login",risk_level:"high",confidence:.8,dependencies:["Auth","Form"]},{name:"UserContext",risk_level:"high",confidence:.9,dependencies:["State Management"]}],theme:[{name:"ThemeProvider",risk_level:"medium",confidence:.8,dependencies:["CSS Variables","Context API"]},{name:"Dark Mode",risk_level:"medium",confidence:.7,dependencies:["ThemeProvider"]}],api:[{name:"API Client",risk_level:"high",confidence:.9,dependencies:["HTTP Service","Error Handler"]},{name:"Data Fetcher",risk_level:"medium",confidence:.8,dependencies:["API Client"]},{name:"WebSocket",risk_level:"high",confidence:.7,dependencies:["Connection Manager"]}]},q=[];Object.entries(se).forEach(([ee,Lt])=>{(F.includes(ee)||F.includes(ee.replace(/[aeiou]/gi,""))||Lt.some(In=>F.includes(In.name.toLowerCase())))&&q.push(...Lt)}),q.length===0&&q.push({name:"UI Components",risk_level:"low",confidence:.5,dependencies:["React Components"]},{name:"State Management",risk_level:"medium",confidence:.6,dependencies:["React Hooks"]},{name:"Event Handlers",risk_level:"low",confidence:.7,dependencies:["DOM Events"]});const te=["database","auth","security","payment","migration","breaking","major"],ae=["api","integration","workflow","validation","performance"];let J="Low",Ke="This change appears to be primarily cosmetic or minor functionality enhancement.";te.some(ee=>F.includes(ee))?(J="High",Ke="This change affects critical system components that could impact security, data integrity, or core functionality."):ae.some(ee=>F.includes(ee))&&(J="Medium",Ke="This change affects system integrations or business logic that requires careful testing and validation.");const Oe=[{category:"Design System",status:"compliant",details:"Change adheres to existing design tokens and component patterns"},{category:"Accessibility",status:J==="High"?"review_required":"compliant",details:J==="High"?"WCAG compliance review needed for this change":"No accessibility concerns identified"},{category:"Performance",status:F.includes("performance")?"improvement":"neutral",details:F.includes("performance")?"Change should improve application performance":"No significant performance impact expected"},{category:"Security",status:te.some(ee=>F.includes(ee))?"review_required":"compliant",details:te.some(ee=>F.includes(ee))?"Security review required before implementation":"No security concerns identified"}],jr={database:3,migration:4,api:2,auth:3,integration:2,ui:1,style:.5,text:.5};let Ue=1;Object.entries(jr).forEach(([ee,Lt])=>{F.includes(ee)&&(Ue+=Lt)});const Sr=Ue<=2?"1-2 days":Ue<=4?"3-5 days":Ue<=6?"1-2 weeks":"2-4 weeks",An=Math.min(100,Math.round(q.length*10+Ue*5+(J==="High"?30:J==="Medium"?15:5))),Dn=Math.round(Ue*10)/10,Nr={affected_components:q.slice(0,8),risk_level:J.toLowerCase(),risk_rationale:Ke,impact_score:An,effort_multiplier:Dn,estimated_effort:Math.ceil(Ue),estimated_timeline:Sr,consistency_validation:Oe,recommendations:[{type:"Testing",description:`Ensure comprehensive testing for ${q.length} affected components`,effort_reduction:"15-20%"},{type:"Documentation",description:"Update component documentation and integration guides",effort_reduction:"10-15%"}],mitigation_strategies:["Implement feature flags to control rollout","Create comprehensive test suite before deployment","Monitor performance metrics during implementation","Prepare rollback strategy for critical issues"],generated_at:new Date().toISOString()};J==="High"&&(Nr.breaking_changes=[{type:"API Change",description:"Potential modifications to component interfaces",keyword:((A=F.match(/(auth|api|database)/))==null?void 0:A[0])||"system"}]);const qr={};Oe.forEach(ee=>{const Lt=ee.status==="compliant"?85:ee.status==="improvement"?95:ee.status==="review_required"?25:ee.status==="warning"?60:75;qr[ee.category.toLowerCase().replace(" ","_")]=Lt});const Kr={passed:!Oe.some(ee=>ee.status==="review_required"),blocking_issues:Oe.filter(ee=>ee.status==="review_required").map(ee=>({message:`${ee.category}: ${ee.details}`,suggestion:ee.status==="review_required"?"Consider professional review before implementation":null})),warnings:Oe.filter(ee=>ee.status==="warning"),score:Math.round(Oe.filter(ee=>ee.status==="compliant"||ee.status==="improvement").length/Oe.length*100),category_scores:qr,recommendations:Oe.filter(ee=>ee.status==="improvement"||ee.status==="compliant").map(ee=>({message:ee.details,priority:ee.status==="improvement"?"medium":"low"}))};z(Nr),j(Kr);const Gr={skeptical_assessment:[`Directive "${U.slice(0,50)}..." may have hidden complexities not immediately apparent`,"Resource estimates are often underestimated by 40-60% in similar projects","User requirements frequently change after initial implementation begins","Integration points with existing systems pose higher risk than anticipated"],potential_blockers:["Insufficient technical specifications may delay development","Dependency on external APIs or services may introduce instability","Browser compatibility issues may emerge during testing","Performance impact on larger datasets may require architectural changes"],risk_factors:{technical_debt:J==="High"?"Significant":"Moderate",change_resistance:"Medium",rollback_difficulty:Sr.includes("week")?"Low":"High",maintenance_overhead:`${J} ongoing maintenance burden expected`},recommendations:["Consider phased implementation approach to mitigate risks","Establish clear rollback procedures before deployment","Plan for 25% buffer time beyond initial estimates","Document all assumptions and validate with stakeholders"]};zl(Gr),c(ee=>({...ee,impact_analysis:Nr,consistency_validation:Kr,critical_analysis:Gr})),console.log("✅ [STEP 4] Impact analysis data generated locally"),console.log("📊 [STEP 4] Risk Level:",J),console.log("🔍 [STEP 4] Components affected:",q.length),console.log("⏱️ [STEP 4] Estimated timeline:",Sr)}},[i,l,W.intentSummary]),v.useEffect(()=>{var A,U;if(i===5&&(l!=null&&l.id)&&((A=l==null?void 0:l.gate_status)!=null&&A.synthesis_reviewed&&K(!0),!(l!=null&&l.synthesis))){console.log("🎯 [STEP 5] Generating synthesis data...");const F=(l==null?void 0:l.intent_summary)||W.intentSummary||"",se=(l==null?void 0:l.strat_tac)||{},q=(l==null?void 0:l.impact_analysis)||{},te=[],ae=[],J=[];(F.toLowerCase().includes("dark mode")||F.toLowerCase().includes("theme"))&&(te.push("UI theming system already supports dark/light mode switching"),te.push("CSS variables are in place for theme customization")),(F.toLowerCase().includes("dashboard")||F.toLowerCase().includes("ui"))&&(te.push("Component architecture supports modular UI updates"),te.push("Existing design system can be extended")),se.strategic_pct>50&&(ae.push("Architecture review and approval from technical lead"),ae.push("Comprehensive testing strategy for new features"),ae.push("Documentation updates for significant changes")),((q==null?void 0:q.risk_level)==="High"||(q==null?void 0:q.risk_level)==="Critical")&&(ae.push("Risk mitigation plan implementation"),ae.push("Rollback strategy preparation")),F.toLowerCase().includes("performance")&&ae.push("Performance benchmarking before and after implementation"),(F.toLowerCase().includes("security")||F.toLowerCase().includes("auth"))&&ae.push("Security audit and penetration testing"),se.tactical_pct>60&&(J.push("Incremental deployment with feature flags"),J.push("A/B testing for user-facing changes")),((U=q==null?void 0:q.affected_components)==null?void 0:U.length)>5&&(J.push("Phased implementation to minimize disruption"),J.push("Component isolation testing")),J.push("User acceptance testing with stakeholder group"),J.push("Performance monitoring post-deployment"),te.length===0&&(te.push("Existing infrastructure supports proposed changes"),te.push("Current tooling and frameworks are compatible")),ae.length===0&&(ae.push("Standard code review process"),ae.push("Unit and integration test coverage")),J.length===0&&(J.push("Progressive rollout strategy"),J.push("User feedback collection mechanism"));const Ke={synthesis:{aligned:te,required:ae,recommended:J,generated_at:new Date().toISOString()}};console.log("📊 [STEP 5] Synthesis generated:",Ke),c(Oe=>({...Oe,...Ke}))}},[i,l,W.intentSummary]),v.useEffect(()=>{var A;if(i===6&&(l!=null&&l.id)&&(l==null?void 0:l.questions)===void 0){console.log("🎯 [STEP 6] Generating clarifying questions...");const U=(l==null?void 0:l.intent_summary)||W.intentSummary||"",F=(l==null?void 0:l.strat_tac)||{},se=(l==null?void 0:l.synthesis)||{},q=[];(U.toLowerCase().includes("ui")||U.toLowerCase().includes("interface"))&&(q.push({text:"What specific UI components or pages should be affected by these changes?",context:"Help us scope the implementation correctly"}),q.push({text:"Do you have any specific design preferences or brand guidelines to follow?",context:"Ensures visual consistency with your requirements"})),F.strategic_pct>60&&(q.push({text:"What is the expected timeline for this strategic initiative?",context:"Helps with resource allocation and planning"}),q.push({text:"Are there any dependencies or prerequisites we should be aware of?",context:"Identifies potential blockers early"})),(A=se.required)!=null&&A.some(ae=>ae.includes("performance"))&&q.push({text:"What are your specific performance targets or requirements?",context:"Define measurable success criteria"}),(U.toLowerCase().includes("data")||U.toLowerCase().includes("database"))&&q.push({text:"What data retention and backup policies should be considered?",context:"Ensures compliance with data governance"}),q.length<2&&q.push({text:"Are there any specific edge cases or scenarios we should consider?",context:"Helps identify potential issues early"});const te={questions:q.length>0?q:[],questions_generated_at:new Date().toISOString()};console.log("❓ [STEP 6] Questions generated:",te),c(ae=>({...ae,...te}))}},[i,l,W.intentSummary]),v.useEffect(()=>{var A,U,F;if(i===7&&(l!=null&&l.id)&&!(l!=null&&l.final_summary)){console.log("🎯 [STEP 7] Generating final summary...");const se=(l==null?void 0:l.intent_summary)||W.intentSummary||"",q=(l==null?void 0:l.strat_tac)||{},te=(l==null?void 0:l.impact_analysis)||{},ae=(l==null?void 0:l.synthesis)||{};let J=`This directive focuses on: ${se}. `;q.strategic_pct>60?J+=`This is primarily a strategic initiative (${q.strategic_pct}% strategic) that will shape long-term architecture. `:J+=`This is primarily a tactical improvement (${q.tactical_pct}% tactical) focusing on immediate enhancements. `,((A=te.affected_components)==null?void 0:A.length)>0&&(J+=`The implementation will affect ${te.affected_components.length} components with ${te.risk_level||"moderate"} risk level. `),((U=ae.required)==null?void 0:U.length)>0&&(J+=`Key requirements include: ${ae.required[0]}. `),((F=ae.recommended)==null?void 0:F.length)>0&&(J+=`Recommended approach: ${ae.recommended[0]}. `),te.effort_estimate&&(J+=`Estimated effort: ${te.effort_estimate}. `),J+="Upon approval, this directive will be converted into a formal PRD and assigned to the implementation team.";const Ke={final_summary:J,final_summary_generated_at:new Date().toISOString()};console.log("📋 [STEP 7] Final summary generated:",Ke),c(Oe=>({...Oe,...Ke}))}},[i,l,W.intentSummary]),v.useEffect(()=>{i===2&&W.intentSummary&&setTimeout(()=>{const A=document.querySelector('textarea[name="intentSummary"]');A&&(A.style.height="auto",A.style.height=Math.min(A.scrollHeight,300)+"px")},100)},[W.intentSummary,i]);const br=A=>A.trim()?A.length<20?(Br(U=>({...U,chairmanInput:"Please provide more detailed feedback (min 20 characters)"})),zr(U=>({...U,chairmanInput:!1})),!1):(Br(U=>({...U,chairmanInput:null})),zr(U=>({...U,chairmanInput:!0})),!0):(Br(U=>({...U,chairmanInput:"Feedback is required"})),zr(U=>({...U,chairmanInput:!1})),!1),Wr=A=>{if(!A)return!0;try{return new URL(A),Br(U=>({...U,screenshotUrl:null})),zr(U=>({...U,screenshotUrl:!0})),!0}catch{return Br(U=>({...U,screenshotUrl:"Please enter a valid URL"})),zr(U=>({...U,screenshotUrl:!1})),!1}},ar=async()=>{var A,U;if(console.log("🚀 [STEP 1] Starting feedback submission"),console.log("📄 [STEP 1] Form data:",{feedback:((A=W.chairmanInput)==null?void 0:A.substring(0,50))+"...",screenshotUrl:W.screenshotUrl}),!!br(W.chairmanInput)){d(!0),f(null);try{const F=await fetch("/api/sdip/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:W.chairmanInput,screenshot_url:W.screenshotUrl})});if(!F.ok)throw new Error("Failed to submit feedback");const se=await F.json();console.log("🎉 [STEP 1] Submission created successfully"),console.log("🆔 [STEP 1] Submission ID:",((U=se.submission)==null?void 0:U.id)||se.id),console.log("📄 [STEP 1] Full submission data:",se);const q=se.submission||se;c(q),X({...T,1:!0}),o(2),x("Feedback submitted successfully!"),localStorage.removeItem("directiveLab_draft"),q.id?(console.log("🎯 [STEP 2] Triggering intent generation for submission:",q.id),await Hr(q.id,2,{feedback:W.chairmanInput,chairman_input:W.chairmanInput})):console.error("⚠️ [STEP 1] No submission ID received!")}catch(F){f(F.message)}finally{d(!1)}}},Hr=async(A,U,F)=>{console.log(`🔄 [STEP ${U}] Updating submission: ${A}`),console.log(`📦 [STEP ${U}] Step data:`,F);try{const se=await fetch(`/api/sdip/submissions/${A}/step/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!se.ok)throw new Error(`Failed to update step ${U}`);const q=await se.json();console.log(`✅ [STEP ${U}] Update successful`),console.log(`📄 [STEP ${U}] Response data:`,q);const te=q.submission||q;return c(te),U===2&&te.intent_summary&&(console.log("💡 [STEP 2] Intent summary received:",te.intent_summary.substring(0,50)+"..."),rt({...W,intentSummary:te.intent_summary})),te}catch(se){throw console.error(`❌ [STEP ${U}] Update failed:`,se),console.error(`❌ [STEP ${U}] Error details:`,se.message),f(se.message),se}},It=async A=>{var U,F,se,q,te;console.log(`🎯 [STEP ${A}] Completing step`),console.log(`📄 [STEP ${A}] Current submission:`,l),d(!0),f(null);try{if(l&&l.id&&A>1){console.log(`📦 [STEP ${A}] Preparing step data for submission: ${l.id}`);let J={};switch(A){case 2:J={intent_summary:W.intentSummary};break;case 3:J={strategic_pct:((U=l.strat_tac)==null?void 0:U.strategic_pct)||50,tactical_pct:((F=l.strat_tac)==null?void 0:F.tactical_pct)||50,override:W.stratTacOverride};break;case 4:J={impact_analysis:L,consistency_validation:O};break;case 5:J={aligned:((se=l.synthesis)==null?void 0:se.aligned)||[],required:((q=l.synthesis)==null?void 0:q.required)||[],recommended:((te=l.synthesis)==null?void 0:te.recommended)||[],synthesis_reviewed:M};break;case 6:J={questions_answers:W.questionAnswers};break;case 7:J={final_summary:l.final_summary||W.intentSummary};break}console.log(`📦 [STEP ${A}] Step data prepared:`,J),await Hr(l.id,A,J)}else console.log(`⚠️ [STEP ${A}] No submission ID, skipping update`);X({...T,[A]:!0});const ae=nt(A);ae!==A?(o(ae),x(`Step ${A} completed!`)):(x("Directive submitted successfully!"),setTimeout(()=>{rt({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},summaryConfirmed:!1}),o(1),X({}),c(null),z(null),j(null)},2e3))}catch(ae){f(ae.message)}finally{d(!1)}},Rn=async()=>{console.log("💾 [STEP 7] Saving submission and closing"),d(!0),f(null);try{if(l&&l.id){const A={final_summary:l.final_summary||W.intentSummary,status:"ready",completed_steps:[1,2,3,4,5,6,7]};await Hr(l.id,7,A),X({...T,7:!0}),x("Submission saved successfully! You can find it in Recent Submissions."),setTimeout(()=>{rt({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),o(1),X({}),c(null),z(null),j(null),R("submissions")},2e3)}else throw new Error("No submission to save")}catch(A){f(A.message)}finally{d(!1)}},Re=async()=>{console.log("🚀 [STEP 7] Submitting directive to create Strategic Directive"),d(!0),f(null);try{if(l&&l.id){const F={final_summary:l.final_summary||W.intentSummary,status:"submitted",completed_steps:[1,2,3,4,5,6,7]};await Hr(l.id,7,F)}const A=await fetch("/api/sdip/create-strategic-directive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission_id:l.id})});if(!A.ok){const F=await A.json();throw new Error(F.error||"Failed to create Strategic Directive")}const U=await A.json();X({...T,7:!0}),x(`Strategic Directive created successfully! ID: ${U.sd_id}`),setTimeout(()=>{rt({chairmanInput:"",screenshotUrl:"",intentSummary:"",stratTacOverride:null,synthesisReviewed:!1,questionAnswers:{},finalConfirmed:!1,summaryConfirmed:!1}),o(1),X({}),c(null),z(null),j(null),R("submissions")},3e3)}catch(A){f(A.message)}finally{d(!1)}},Kt=A=>{var U,F,se,q,te,ae,J,Ke,Oe,jr,Ue,Sr,An,Dn,Nr,qr,Kr,Gr,ee,Lt,In,pi;switch(A){case 1:return a.jsxs("div",{className:"space-y-3",children:[a.jsx(co,{type:"textarea",label:"Chairman Feedback",name:"chairmanInput",value:W.chairmanInput,onChange:Q=>{rt({...W,chairmanInput:Q.target.value}),br(Q.target.value)},placeholder:"Enter your feedback about the EHG application...",required:!0,rows:5,minLength:20,maxLength:1e3,showCharCount:!0,error:hi.chairmanInput,success:fi.chairmanInput,helpText:"Provide detailed feedback about what you'd like to improve or add"}),a.jsx(co,{type:"url",label:"Screenshot URL",name:"screenshotUrl",value:W.screenshotUrl,onChange:Q=>{rt({...W,screenshotUrl:Q.target.value}),Wr(Q.target.value)},placeholder:"https://example.com/screenshot.png",error:hi.screenshotUrl,success:fi.screenshotUrl,helpText:"Optional: Add a screenshot URL to provide visual context",icon:Ic}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(pe,{onClick:ar,disabled:u||!W.chairmanInput.trim(),loading:u,variant:"primary",icon:wa,iconPosition:"right",children:"Submit & Analyze"}),a.jsx(pe,{onClick:()=>{localStorage.setItem("directiveLab_draft",JSON.stringify(W)),x("Draft saved")},variant:"secondary",icon:$c,children:"Save Draft"})]})]});case 2:return a.jsxs("div",{className:"space-y-3",children:[a.jsx(co,{type:"textarea",label:"Extracted Intent Summary",name:"intentSummary",value:W.intentSummary,onChange:Q=>{rt({...W,intentSummary:Q.target.value}),Q.target&&(Q.target.style.height="auto",Q.target.style.height=Math.min(Q.target.scrollHeight,300)+"px")},rows:3,style:{minHeight:"80px",maxHeight:"300px",resize:"vertical",overflow:"auto"},onFocus:Q=>{Q.target.style.height="auto",Q.target.style.height=Math.min(Q.target.scrollHeight,300)+"px"},helpText:"Review and edit if needed to accurately capture your intent",success:W.intentSummary.length>0}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(pe,{onClick:()=>Fe(1),variant:"ghost",icon:$n,children:"Back"}),a.jsx(pe,{onClick:()=>It(2),disabled:u||!W.intentSummary,loading:u,variant:"success",icon:dr,children:"Confirm Intent"})]})]});case 3:return a.jsxs("div",{className:"space-y-3",children:[l!=null&&l.strat_tac?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-around mb-3",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[((U=W.stratTacOverride)==null?void 0:U.strategic_pct)??l.strat_tac.strategic_pct,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Strategic"})]}),a.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[((F=W.stratTacOverride)==null?void 0:F.tactical_pct)??l.strat_tac.tactical_pct,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Tactical"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg",children:[a.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Classification Rationale:"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:((se=W.stratTacOverride)==null?void 0:se.rationale)||l.strat_tac.rationale})]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(X_,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mr-2"}),a.jsx("span",{className:"font-medium text-yellow-900 dark:text-yellow-100 text-sm",children:"Adjust Classification (Optional)"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx("span",{children:"More Tactical"}),a.jsx("span",{children:"More Strategic"})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:((q=W.stratTacOverride)==null?void 0:q.strategic_pct)??l.strat_tac.strategic_pct,onChange:Q=>{const Ie=parseInt(Q.target.value),Nt=100-Ie;let st="";Ie>70?st="Manually classified as highly strategic - focusing on long-term architecture and business objectives.":Ie>50?st="Manually classified as moderately strategic - balancing long-term goals with immediate improvements.":Ie>30?st="Manually classified as balanced - containing both strategic elements and tactical improvements.":st="Manually classified as primarily tactical - focusing on immediate fixes and improvements.",rt({...W,stratTacOverride:{strategic_pct:Ie,tactical_pct:Nt,rationale:st,manually_adjusted:!0,adjusted_at:new Date().toISOString()}})},className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 \r
                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 \r
                        [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer\r
                        [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 \r
                        [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none`}),a.jsxs("div",{className:"flex justify-between mt-1",children:[a.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[((te=W.stratTacOverride)==null?void 0:te.tactical_pct)??l.strat_tac.tactical_pct,"% Tactical"]}),a.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:[((ae=W.stratTacOverride)==null?void 0:ae.strategic_pct)??l.strat_tac.strategic_pct,"% Strategic"]})]})]}),W.stratTacOverride&&a.jsx(pe,{onClick:()=>{rt({...W,stratTacOverride:null})},variant:"ghost",size:"small",icon:es,children:"Reset to Auto-Classification"})]})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyzing strategic vs tactical breakdown..."})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(pe,{onClick:()=>Fe(2),variant:"ghost",icon:$n,children:"Back"}),a.jsx(pe,{onClick:()=>It(3),disabled:u,loading:u,variant:"success",icon:dr,children:W.stratTacOverride?"Accept Adjusted Classification":"Accept Classification"})]})]});case 4:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Application Impact Analysis"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the comprehensive analysis of how your proposed changes will affect the application, including component dependencies, risk assessment, and consistency validation."})]}),a.jsx(JC,{impactAnalysis:L,consistencyValidation:O,submission:l}),O&&!O.passed&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(xr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),a.jsx("span",{className:"font-medium text-red-900 dark:text-red-100",children:"Consistency Issues Found"})]}),a.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 mb-3",children:[((J=O.blocking_issues)==null?void 0:J.length)||0," blocking issues must be resolved before proceeding."]}),a.jsx("div",{className:"text-xs text-red-700 dark:text-red-300",children:"Review the Impact Analysis above for detailed recommendations and mitigation strategies."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(pe,{onClick:()=>Fe(3),variant:"ghost",icon:$n,children:"Back"}),a.jsx(pe,{onClick:()=>It(4),disabled:u||O&&!O.passed,loading:u,variant:(O==null?void 0:O.passed)===!1?"secondary":"success",icon:(O==null?void 0:O.passed)===!1?mt:dr,children:(O==null?void 0:O.passed)===!1?"Acknowledge Risks & Continue":"Accept Impact Analysis"})]})]});case 5:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Synthesis Review"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the synthesized requirements and recommendations for your directive."})]}),l!=null&&l.synthesis?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Ne,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),a.jsxs("span",{className:"font-medium text-green-900 dark:text-green-100",children:["Aligned Requirements (",((Ke=l.synthesis.aligned)==null?void 0:Ke.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(Oe=l.synthesis.aligned)==null?void 0:Oe.map((Q,Ie)=>{const Nt=typeof Q=="object"?Q.badges:qc(Q),st=typeof Q=="object"?Q.text:Q;return a.jsx("li",{className:"text-sm text-green-800 dark:text-green-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-green-600 dark:text-green-400 mr-2",children:"•"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:st}),a.jsx(Hc,{badges:Nt})]})]})},Ie)})})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(mt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),a.jsxs("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:["Required Changes (",((jr=l.synthesis.required)==null?void 0:jr.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(Ue=l.synthesis.required)==null?void 0:Ue.map((Q,Ie)=>{const Nt=typeof Q=="object"?Q.badges:qc(Q),st=typeof Q=="object"?Q.text:Q;return a.jsx("li",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mr-2",children:"•"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:st}),a.jsx(Hc,{badges:Nt})]})]})},Ie)})})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Ft,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),a.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:["Recommended Enhancements (",((Sr=l.synthesis.recommended)==null?void 0:Sr.length)||0,")"]})]}),a.jsx("ul",{className:"space-y-2",children:(An=l.synthesis.recommended)==null?void 0:An.map((Q,Ie)=>{const Nt=typeof Q=="object"?Q.badges:qc(Q),st=typeof Q=="object"?Q.text:Q;return a.jsx("li",{className:"text-sm text-blue-800 dark:text-blue-200",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:"•"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{children:st}),a.jsx(Hc,{badges:Nt})]})]})},Ie)})})]})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Synthesizing requirements and recommendations..."})]})}),(l==null?void 0:l.synthesis)&&a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:M,onChange:Q=>K(Q.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"I have reviewed the synthesis analysis"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["I understand the aligned requirements (",((Dn=l.synthesis.aligned)==null?void 0:Dn.length)||0,"), required changes (",((Nr=l.synthesis.required)==null?void 0:Nr.length)||0,"), and recommended enhancements (",((qr=l.synthesis.recommended)==null?void 0:qr.length)||0,") for this directive."]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(pe,{onClick:()=>Fe(4),variant:"ghost",icon:$n,children:"Back"}),a.jsx(pe,{onClick:()=>It(5),disabled:u||!(l!=null&&l.synthesis)||!M,loading:u,variant:"success",icon:dr,children:"Accept Synthesis"})]})]});case 6:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Clarifying Questions"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Answer any clarifying questions about your directive to ensure accurate implementation."})]}),l!=null&&l.questions&&l.questions.length>0?a.jsx("div",{className:"space-y-3",children:l.questions.map((Q,Ie)=>{var Nt;return a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start mb-2",children:[a.jsx(Lc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2 mt-0.5"}),a.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:Q.text})]}),a.jsx(co,{type:"textarea",name:`question_${Ie}`,value:((Nt=W.questionAnswers)==null?void 0:Nt[`question_${Ie}`])||"",onChange:st=>{rt({...W,questionAnswers:{...W.questionAnswers,[`question_${Ie}`]:st.target.value}})},placeholder:"Your answer...",rows:2,helpText:Q.context})]},Ie)})}):(l==null?void 0:l.questions)===void 0?a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generating clarifying questions..."})]})}):a.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ne,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),a.jsx("p",{className:"text-green-800 dark:text-green-200",children:"No clarifying questions needed - your directive is clear!"})]})}),(l==null?void 0:l.questions)!==void 0&&a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:W.questionsReviewed||!1,onChange:Q=>rt({...W,questionsReviewed:Q.target.checked}),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:((Kr=l==null?void 0:l.questions)==null?void 0:Kr.length)>0?"I have provided complete answers to all questions":"I confirm no additional questions are needed"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:((Gr=l==null?void 0:l.questions)==null?void 0:Gr.length)>0?`All ${l.questions.length} clarifying questions have been answered to provide context for implementation.`:"The directive is sufficiently clear and no additional clarification is required."})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(pe,{onClick:()=>Fe(5),variant:"ghost",icon:$n,children:"Back"}),a.jsx(pe,{onClick:()=>It(6),disabled:u||!W.questionsReviewed,loading:u,variant:"success",icon:dr,children:((ee=l==null?void 0:l.questions)==null?void 0:ee.length)>0?"Submit Answers":"Continue"})]})]});case 7:return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"Final Confirmation"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Review the final summary and choose your next action."})]}),l!=null&&l.final_summary?a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Directive Summary"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:l.final_summary})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[((Lt=l.strat_tac)==null?void 0:Lt.strategic_pct)||0,"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Strategic"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((In=l.impact_analysis)==null?void 0:In.risk_level)||"Low"}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Risk Level"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:((pi=l.impact_analysis)==null?void 0:pi.effort_estimate)||"Medium"}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Effort"})]})]}),a.jsxs("div",{className:"mt-4 flex gap-2",children:[a.jsx(pe,{onClick:()=>{navigator.clipboard.writeText(l.final_summary),Tn.success("Summary copied to clipboard")},variant:"ghost",size:"small",icon:Pv,children:"Copy Summary"}),a.jsx(pe,{onClick:async()=>{d(!0);try{const Q=await fetch(`/api/directive-submissions/${l.id}/regenerate-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(Q.ok){const Ie=await Q.json();c({...l,final_summary:Ie.final_summary}),Tn.success("Summary regenerated successfully")}}catch{Tn.error("Failed to regenerate summary")}finally{d(!1)}},variant:"ghost",size:"small",icon:es,disabled:u,children:"Regenerate"})]}),a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:a.jsxs("label",{className:"flex items-start cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:W.finalConfirmed||!1,onChange:Q=>rt({...W,finalConfirmed:Q.target.checked}),className:"mt-0.5 mr-2"}),a.jsx("span",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:"I confirm that this directive accurately represents my requirements."})]})})]}):a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preparing final summary..."})]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Choose Your Next Action"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx($c,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Save & Close:"})," Save for later review or combine with other submissions"]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Zp,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Submit Directive:"})," Create Strategic Directive and begin LEO Protocol workflow"]})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(pe,{onClick:()=>Fe(6),variant:"ghost",icon:$n,className:"order-3 sm:order-1",children:"Back"}),a.jsxs("div",{className:"flex gap-3 order-1 sm:order-2 flex-1",children:[a.jsx(pe,{onClick:Rn,disabled:u||!W.finalConfirmed,loading:u,variant:"secondary",icon:$c,className:"flex-1",children:"Save & Close"}),a.jsx(pe,{onClick:Re,disabled:u||!W.finalConfirmed,loading:u,variant:"primary",icon:Zp,className:"flex-1",children:"Submit Directive"})]})]})]});default:return a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Step content for Step ",A," coming soon..."]})}},mi=()=>a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 py-1.5 px-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(pe,{onClick:()=>Fe(Math.max(1,i-1)),disabled:i===1,variant:"ghost",size:"small",icon:$n,children:"Previous"}),a.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Step ",i," of ",me.length]}),a.jsx(pe,{onClick:()=>It(i),disabled:!T[i-1]&&i>1,variant:"primary",size:"small",icon:wa,iconPosition:"right",children:"Next"})]})});return a.jsx(YC,{children:a.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx($v,{}),a.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Directive Lab"}),a.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s("quick"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${n==="quick"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Quick Mode"}),a.jsx("button",{onClick:()=>s("comprehensive"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${n==="comprehensive"?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Comprehensive"})]})]}),a.jsx(pe,{onClick:()=>Ce(!Y),variant:"ghost",size:"small",icon:Lc,ariaLabel:"Toggle help",children:"Help"})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Step:"}),a.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:((kr=me[i-1])==null?void 0:kr.title)||"Unknown"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",i," of ",me.length,")"]})]})]})}),Y&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800 px-4 py-2",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Lc,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2"}),a.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[a.jsx("p",{className:"font-medium mb-0.5",children:"Getting Started:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-blue-800 dark:text-blue-200",children:[a.jsx("li",{children:"Provide detailed feedback about what you want to improve"}),a.jsx("li",{children:"Each step builds on the previous one"}),a.jsx("li",{children:"Your progress is automatically saved"}),a.jsx("li",{children:"You can navigate back to previous steps at any time"})]})]})]})})}),m&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-green-800 dark:text-green-200 text-sm",children:[a.jsx(Ne,{className:"w-4 h-4 mr-2"}),m]})}),h&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 px-4 py-1.5",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center text-red-800 dark:text-red-200 text-sm",children:[a.jsx(Pn,{className:"w-4 h-4 mr-2"}),h]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx(KC,{steps:me,currentStep:i,orientation:"horizontal",showTimeEstimates:!_,compact:!0,hideLabelsOnMobile:!0,onStepClick:Fe})})}),a.jsx(mi,{}),a.jsxs("div",{className:"flex-1 px-4 py-2 flex flex-col min-h-0",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg shadow-sm border border-gray-200 dark:border-gray-700 border-b-0 flex-shrink-0",children:a.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{onClick:()=>R("input"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${$==="input"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ic,{className:"w-4 h-4"}),"Input & Screenshot"]}),$==="input"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]}),a.jsxs("button",{onClick:()=>R("submissions"),className:`px-4 py-2.5 text-sm font-medium transition-all duration-300 ease-in-out relative ${$==="submissions"?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qt,{className:"w-4 h-4"}),"Recent Submissions",l&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),$==="submissions"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300"})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-b-lg shadow-sm border border-gray-200 dark:border-gray-700 border-t-0 flex-1 relative flex flex-col overflow-hidden",children:[a.jsxs("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out flex flex-col ${$==="input"?"translate-x-0 opacity-100":"translate-x-full opacity-0 pointer-events-none"}`,children:[a.jsxs("div",{className:"mb-3 flex-shrink-0",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:me[i-1].title}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:me[i-1].description})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:Kt(i)})]}),a.jsx("div",{className:`absolute inset-0 p-4 transition-all duration-500 ease-in-out ${$==="submissions"?"translate-x-0 opacity-100":"-translate-x-full opacity-0 pointer-events-none"}`,children:a.jsxs("div",{className:"h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Submissions"}),a.jsx(pe,{onClick:()=>N(A=>A+1),variant:"ghost",size:"small",icon:es,ariaLabel:"Refresh submissions"})]}),a.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:a.jsx(GC,{onSubmissionSelect:A=>{c(A),A&&setTimeout(()=>R("input"),300)},selectedSubmissionId:l==null?void 0:l.id,onSelectionChange:b,refreshTrigger:S,onGroupCreate:(A,U="intelligent")=>{b(A),k(U),g(!0)}})})]})})]})]}),y&&a.jsx(XC,{selectedSubmissions:w,combineMethod:p,onClose:()=>g(!1),onSuccess:()=>{g(!1),N(A=>A+1)}})]})})};function w0({backlogData:e=[],strategicDirectives:t=[],isCompact:r,onRefresh:n}){const{id:s}=kh(),i=cs(),o=wr(),c=new URLSearchParams(o.search).get("sd"),[u,d]=v.useState({}),[h,f]=v.useState(""),[m,x]=v.useState("all"),[w,b]=v.useState(c||"all"),[y,g]=v.useState(!1),[p,k]=v.useState("all"),[S,N]=v.useState(!0),[_,P]=v.useState([]),[$,R]=v.useState({});v.useEffect(()=>{(async()=>{N(!0);try{const z=w&&w!=="all"?`/api/backlog/strategic-directives/${w}`:"/api/backlog/strategic-directives-with-items",j=await(await fetch(z)).json();if(w&&w!=="all")P(j.backlog_items||[]),R({[j.sd_id]:{sd:j,items:j.backlog_items||[]}});else{const C={};j.forEach(M=>{C[M.sd_id]={sd:M,items:M.backlog_items||[]}}),R(C);const E=j.flatMap(M=>M.backlog_items||[]);P(E)}}catch(z){console.error("Error loading backlog:",z)}finally{N(!1)}})()},[w]);const Y=Object.entries($).reduce((L,[z,O])=>{let j=O.items;if(h){const C=h.toLowerCase();j=j.filter(E=>{var M,K,G,ce;return((M=E.backlog_title)==null?void 0:M.toLowerCase().includes(C))||((K=E.item_description)==null?void 0:K.toLowerCase().includes(C))||((G=E.backlog_id)==null?void 0:G.toLowerCase().includes(C))||((ce=E.my_comments)==null?void 0:ce.toLowerCase().includes(C))})}return m!=="all"&&(j=j.filter(C=>{var E;return((E=C.priority)==null?void 0:E.toLowerCase())===m.toLowerCase()})),p==="yes"?j=j.filter(C=>C.new_module===!0):p==="no"&&(j=j.filter(C=>C.new_module===!1)),j.length>0&&(L[z]={...O,items:j}),L},{}),Ce=L=>{if(!L)return null;const z=L.toLowerCase(),O={high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:jn},h:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-800 dark:text-red-400",icon:jn},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Xn},m:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-800 dark:text-yellow-400",icon:Xn},low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Xn},l:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-800 dark:text-green-400",icon:Xn},future:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-300",icon:Ct}},j=O[z]||O.low,C=j.icon;return a.jsxs("span",{className:`inline-flex items-center ${r?"px-1.5 py-0.5 text-xs":"px-2 py-1 text-xs"} font-medium rounded ${j.bg} ${j.text}`,children:[a.jsx(C,{className:"w-3 h-3 mr-1"}),L]})},Qe=L=>{d(z=>({...z,[L]:!z[L]}))};if(S)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading backlog..."})});const I=Object.values(Y).reduce((L,z)=>L+z.items.length,0);return a.jsxs("div",{className:r?"p-3":"p-6",children:[a.jsxs("div",{className:r?"mb-3":"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(cl,{className:r?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),a.jsx("h1",{className:r?"text-xl font-semibold":"text-2xl font-bold",children:"Backlog Management"}),a.jsxs("span",{className:`ml-3 ${r?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[I," items"]})]}),a.jsx($l,{onRefresh:n,isCompact:r})]}),a.jsxs("div",{className:`flex flex-wrap gap-2 ${r?"mb-3":"mb-4"}`,children:[a.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[a.jsx(Dv,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${r?"w-4 h-4":"w-5 h-5"} text-gray-400`}),a.jsx("input",{type:"text",value:h,onChange:L=>f(L.target.value),placeholder:"Search backlog items...",className:`w-full ${r?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),a.jsxs("select",{value:w,onChange:L=>b(L.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Strategic Directives"}),Object.values($).map(({sd:L})=>a.jsx("option",{value:L.sd_id,children:L.sd_title},L.sd_id))]}),a.jsxs("select",{value:m,onChange:L=>x(L.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Priorities"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"future",children:"Future"})]}),a.jsxs("select",{value:p,onChange:L=>k(L.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Items"}),a.jsx("option",{value:"yes",children:"New Module"}),a.jsx("option",{value:"no",children:"Existing Module"})]}),a.jsxs("button",{onClick:()=>i("/backlog/new"),className:`flex items-center ${r?"px-3 py-1.5 text-sm":"px-4 py-2"} bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors`,children:[a.jsx(Q_,{className:`${r?"w-4 h-4":"w-5 h-5"} mr-2`}),"New Backlog Item"]})]})]}),a.jsx("div",{className:"space-y-4",children:Object.entries(Y).map(([L,{sd:z,items:O}])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:`${r?"p-3":"p-4"} border-b border-gray-200 dark:border-gray-700`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:`${r?"text-base":"text-lg"} font-semibold text-gray-900 dark:text-white`,children:z.sd_title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:z.sd_id}),z.rolled_triage&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${z.rolled_triage==="High"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":z.rolled_triage==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":z.rolled_triage==="Low"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:["Triage: ",z.rolled_triage]}),z.must_have_pct!==null&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:[z.must_have_pct,"% Must-Have"]}),a.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:[O.length," items"]})]})]}),a.jsx("button",{onClick:()=>i(`/strategic-directives/${z.sd_id}`),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:a.jsx(qt,{className:r?"w-4 h-4":"w-5 h-5"})})]})}),a.jsx("div",{className:r?"p-2":"p-3",children:O.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No backlog items found"}):a.jsx("div",{className:"space-y-2",children:O.map(j=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:a.jsxs("div",{className:`${r?"p-2":"p-3"} cursor-pointer`,onClick:()=>Qe(`${L}-${j.backlog_id}`),children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start flex-1",children:[a.jsx("div",{className:"mr-2 mt-1",children:u[`${L}-${j.backlog_id}`]?a.jsx(Tr,{className:"w-4 h-4 text-gray-400"}):a.jsx(hr,{className:"w-4 h-4 text-gray-400"})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-mono text-xs text-gray-500 dark:text-gray-400",children:j.backlog_id}),a.jsx("span",{className:`${r?"text-sm":"text-base"} font-medium text-gray-900 dark:text-white`,children:j.backlog_title}),j.new_module&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded",children:"New Module"})]})})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[Ce(j.priority),j.stage_number&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded",children:["Stage ",j.stage_number]})]})]}),u[`${L}-${j.backlog_id}`]&&a.jsxs("div",{className:`mt-3 ${r?"pl-5":"pl-6"} space-y-2`,children:[j.item_description&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:j.item_description})]}),j.my_comments&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Comments"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:j.my_comments})]}),j.phase&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Phase"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:j.phase})]}),j.description_raw&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tags"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:j.description_raw})]})]})]})},`${L}-${j.backlog_id}`))})})]},L))}),Object.keys(Y).length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(cl,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No backlog items found matching your filters"})]})]})}function tT({metrics:e,activeCount:t,totalReviews:r}){const n=[{title:"Active Reviews",value:t,icon:nf,color:"blue",trend:null},{title:"Pass Rate",value:`${e.passRate}%`,icon:Ne,color:"green",trend:e.passRate>85?"up":"down",trendValue:e.passRate>85?"Good":"Needs Improvement"},{title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,icon:Ct,color:"purple",trend:e.avgTime<5e3?"up":"down",trendValue:e.avgTime<5e3?"Fast":"Slow"},{title:"False Positive Rate",value:`${e.falsePositiveRate}%`,icon:mt,color:e.falsePositiveRate>15?"yellow":"green",trend:e.falsePositiveRate<15?"up":"down",trendValue:e.falsePositiveRate<15?"On Target":"High"},{title:"Compliance Rate",value:`${e.complianceRate}%`,icon:ba,color:e.complianceRate>=95?"green":"yellow",trend:e.complianceRate>=95?"up":"down",trendValue:`${r} total reviews`}],s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:n.map((i,o)=>{const l=i.icon,c={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400"};return a.jsxs(H.div,{variants:s,initial:"hidden",animate:"visible",transition:{delay:o*.05},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${c[i.color]}`,children:a.jsx(l,{className:"w-5 h-5"})}),i.trend&&a.jsx("div",{className:"flex items-center space-x-1",children:i.trend==="up"?a.jsx(jn,{className:"w-4 h-4 text-green-500"}):a.jsx(Xn,{className:"w-4 h-4 text-red-500"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.value}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.title}),i.trendValue&&a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:i.trendValue})]})]},i.title)})})}function rT({reviews:e,loading:t}){if(t)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(af,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Active Reviews"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All PR reviews have been completed or there are no PRs to review."})]});const r=o=>{switch(o){case"pending":return a.jsx(Ct,{className:"w-5 h-5 text-yellow-500"});case"passed":return a.jsx(Ne,{className:"w-5 h-5 text-green-500"});case"failed":return a.jsx(xr,{className:"w-5 h-5 text-red-500"});case"warning":return a.jsx(mt,{className:"w-5 h-5 text-orange-500"});default:return a.jsx(Ct,{className:"w-5 h-5 text-gray-500"})}},n=o=>{const c={security:ba,performance:dd,database:sf,testing:eE}[o]||qt;return a.jsx(c,{className:"w-4 h-4"})},s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}};return a.jsx(H.div,{variants:s,initial:"hidden",animate:"visible",className:"space-y-4",children:e.map((o,l)=>a.jsxs(H.div,{variants:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[r(o.status),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["PR #",o.pr_number,": ",o.pr_title]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Tv,{className:"w-3 h-3"}),a.jsx("span",{children:o.branch})]}),a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Lv,{className:"w-3 h-3"}),a.jsx("span",{children:o.author})]}),o.sd_link&&a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["SD: ",o.sd_link]}),o.prd_link&&a.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["PRD: ",o.prd_link]})]})]})]}),a.jsx("a",{href:o.github_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"View on GitHub",children:a.jsx(ll,{className:"w-5 h-5"})})]}),o.sub_agent_reviews&&o.sub_agent_reviews.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:o.sub_agent_reviews.map(c=>a.jsxs("div",{className:`
                      flex items-center space-x-2 px-3 py-2 rounded-md text-sm
                      ${c.status==="passed"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":c.status==="failed"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}
                    `,children:[n(c.sub_agent),a.jsx("span",{className:"capitalize",children:c.sub_agent})]},c.sub_agent))})]}),o.summary&&a.jsx("div",{className:"mb-4",children:a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o.summary})}),o.issues&&o.issues.length>0&&a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-md p-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:["Issues Found (",o.issues.length,")"]}),a.jsxs("ul",{className:"space-y-1",children:[o.issues.slice(0,3).map((c,u)=>a.jsxs("li",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["• ",c]},u)),o.issues.length>3&&a.jsxs("li",{className:"text-sm text-yellow-600 dark:text-yellow-500 italic",children:["... and ",o.issues.length-3," more"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["Started: ",new Date(o.created_at).toLocaleTimeString()]}),o.review_time_ms&&a.jsxs("span",{children:["Duration: ",(o.review_time_ms/1e3).toFixed(1),"s"]})]}),o.status==="pending"&&a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-600 dark:text-yellow-400",children:[a.jsx(Ct,{className:"w-3 h-3 animate-pulse"}),a.jsx("span",{children:"In Progress"})]})]})]},o.id))})}function nT({reviews:e,loading:t}){const[r,n]=v.useState(new Set);if(t)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e||e.length===0)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(qt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Review History"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Review history will appear here once PR reviews are completed."})]});const s=c=>{const u=new Set(r);u.has(c)?u.delete(c):u.add(c),n(u)},i=c=>{const u={passed:{icon:Ne,color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",label:"Passed"},failed:{icon:xr,color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",label:"Failed"},warning:{icon:mt,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",label:"Warning"}},d=u[c]||u.warning,h=d.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:[a.jsx(h,{className:"w-3 h-3 mr-1"}),d.label]})},o=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=c=>{if(!c)return"N/A";const u=c/1e3;if(u<60)return`${u.toFixed(1)}s`;const d=Math.floor(u/60),h=(u%60).toFixed(0);return`${d}m ${h}s`};return a.jsx("div",{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-md rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"PR Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Author"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Issues"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Links"}),a.jsx("th",{className:"relative px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"Actions"})})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(c=>{var d,h;const u=r.has(c.id);return a.jsxs(Na.Fragment,{children:[a.jsxs(H.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["PR #",c.pr_number]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:c.pr_title}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(Tv,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.branch})]})]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Lv,{className:"w-4 h-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:c.author})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i(c.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((d=c.issues)==null?void 0:d.length)||0})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ct,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{children:l(c.review_time_ms)})]}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(L_,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:o(c.created_at)})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[c.github_url&&a.jsx("a",{href:c.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"View on GitHub",children:a.jsx(ll,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[c.sd_link&&a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"SD"}),c.prd_link&&a.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"PRD"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>s(c.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:u?a.jsx(O_,{className:"w-5 h-5"}):a.jsx(Tr,{className:"w-5 h-5"})})})]}),u&&a.jsx("tr",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsx("td",{colSpan:"7",className:"px-6 py-4",children:a.jsxs("div",{className:"space-y-4",children:[c.summary&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Review Summary"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.summary})]}),c.sub_agent_reviews&&c.sub_agent_reviews.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Agent Reviews"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:c.sub_agent_reviews.map(f=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm capitalize text-gray-700 dark:text-gray-300",children:f.sub_agent}),i(f.status)]},f.sub_agent))})]}),c.issues&&c.issues.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Issues Found"}),a.jsx("ul",{className:"space-y-1",children:c.issues.map((f,m)=>a.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:["• ",f]},m))})]}),c.metadata&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commit"}),a.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:((h=c.commit_sha)==null?void 0:h.substring(0,7))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phase"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.leo_phase||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"False Positive"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.is_false_positive?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Review ID"}),a.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:c.id.substring(0,8)})]})]})]})})})]},c.id)})})]})})}function sT({metrics:e,reviews:t}){const[r,n]=v.useState("7d"),[s,i]=v.useState("overview"),o=v.useMemo(()=>{if(!t||t.length===0)return null;const c=new Date,u={"24h":24*60*60*1e3,"7d":7*24*60*60*1e3,"30d":30*24*60*60*1e3},d=c-u[r],h=t.filter(x=>new Date(x.created_at)>=d),f={};h.forEach(x=>{const w=new Date(x.created_at).toLocaleDateString();f[w]||(f[w]={total:0,passed:0,failed:0,warnings:0}),f[w].total++,x.status==="passed"?f[w].passed++:x.status==="failed"?f[w].failed++:x.status==="warning"&&f[w].warnings++});const m={};return h.forEach(x=>{x.sub_agent_reviews&&x.sub_agent_reviews.forEach(w=>{m[w.sub_agent]||(m[w.sub_agent]={total:0,passed:0,failed:0,avgTime:[]}),m[w.sub_agent].total++,w.status==="passed"?m[w.sub_agent].passed++:m[w.sub_agent].failed++,w.review_time_ms&&m[w.sub_agent].avgTime.push(w.review_time_ms)})}),Object.keys(m).forEach(x=>{const w=m[x];w.passRate=(w.passed/w.total*100).toFixed(1),w.avgTime.length>0&&(w.avgTimeMs=w.avgTime.reduce((b,y)=>b+y,0)/w.avgTime.length)}),{dailyData:Object.entries(f).slice(-7),subAgentStats:m,totalReviews:h.length,passRate:h.length>0?(h.filter(x=>x.status==="passed").length/h.length*100).toFixed(1):0}},[t,r]),l=[{id:"compliance",title:"Compliance Rate",value:`${e.complianceRate}%`,target:"95%",status:e.complianceRate>=95?"good":"warning",description:"SD/PRD linkage compliance"},{id:"false-positive",title:"False Positive Rate",value:`${e.falsePositiveRate}%`,target:"<15%",status:e.falsePositiveRate<=15?"good":"warning",description:"Reviews marked as false positives"},{id:"avg-time",title:"Avg Review Time",value:`${(e.avgTime/1e3).toFixed(1)}s`,target:"<5s",status:e.avgTime<5e3?"good":"warning",description:"Average time per review"},{id:"coverage",title:"Coverage",value:`${(o==null?void 0:o.totalReviews)||0}`,target:"PRs",status:"neutral",description:`Reviews in ${r}`}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Metrics"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("select",{value:r,onChange:c=>n(c.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[a.jsx("option",{value:"24h",children:"Last 24 Hours"}),a.jsx("option",{value:"7d",children:"Last 7 Days"}),a.jsx("option",{value:"30d",children:"Last 30 Days"})]}),a.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Export Metrics",children:a.jsx(M_,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(c=>a.jsxs(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.value})]}),a.jsx("div",{className:`
                p-2 rounded-lg
                ${c.status==="good"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":c.status==="warning"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}
              `,children:c.status==="good"?a.jsx(jn,{className:"w-4 h-4"}):c.status==="warning"?a.jsx(Xn,{className:"w-4 h-4"}):a.jsx(nf,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Target: ",c.target]}),a.jsx("span",{className:"text-gray-400 dark:text-gray-500",title:c.description,children:a.jsx(Ft,{className:"w-3 h-3"})})]})]},c.id))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(D_,{className:"w-5 h-5 mr-2"}),"Daily Review Trend"]}),o!=null&&o.dailyData&&o.dailyData.length>0?a.jsxs("div",{className:"space-y-3",children:[o.dailyData.map(([c,u])=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 overflow-hidden",children:a.jsxs("div",{className:"h-full flex",children:[a.jsx("div",{className:"bg-green-500 transition-all duration-300",style:{width:`${u.passed/u.total*100}%`}}),a.jsx("div",{className:"bg-red-500 transition-all duration-300",style:{width:`${u.failed/u.total*100}%`}}),a.jsx("div",{className:"bg-yellow-500 transition-all duration-300",style:{width:`${u.warnings/u.total*100}%`}})]})}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 w-10",children:u.total})]})]},c)),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Passed"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Failed"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Warnings"})]})]})]}):a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available for selected period"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(J_,{className:"w-5 h-5 mr-2"}),"Sub-Agent Performance"]}),o!=null&&o.subAgentStats&&Object.keys(o.subAgentStats).length>0?a.jsx("div",{className:"space-y-3",children:Object.entries(o.subAgentStats).map(([c,u])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:c}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[u.total," reviews"]}),a.jsxs("span",{className:`font-medium ${parseFloat(u.passRate)>=85?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:[u.passRate,"% pass"]})]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${parseFloat(u.passRate)>=85?"bg-green-500":"bg-yellow-500"}`,style:{width:`${u.passRate}%`}})}),u.avgTimeMs&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg time: ",(u.avgTimeMs/1e3).toFixed(1),"s"]})]},c))}):a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No sub-agent data available"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"System Health Summary"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),a.jsx("p",{className:`text-lg font-semibold ${e.falsePositiveRate<=15&&e.complianceRate>=95?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:e.falsePositiveRate<=15&&e.complianceRate>=95?"Healthy":"Needs Attention"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Reviews"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.totalToday})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pass Rate Trend"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(o==null?void 0:o.passRate)||e.passRate,"%",(o==null?void 0:o.passRate)>e.passRate?a.jsx(jn,{className:"w-4 h-4 ml-2 text-green-500"}):a.jsx(Xn,{className:"w-4 h-4 ml-2 text-red-500"})]})]})]})]})]})}function iT({state:e,isConnected:t,refreshData:r}){const[n,s]=v.useState([]),[i,o]=v.useState({totalToday:0,passRate:0,avgTime:0,falsePositiveRate:0,complianceRate:0}),[l,c]=v.useState(!0),[u,d]=v.useState("active"),[h,f]=v.useState("all");v.useEffect(()=>{m(),x()},[]),v.useEffect(()=>{e!=null&&e.prReviews&&(e.prReviews.reviews&&s(e.prReviews.reviews),e.prReviews.metrics&&o(e.prReviews.metrics))},[e==null?void 0:e.prReviews]);const m=async()=>{try{const k=await(await fetch("/api/pr-reviews")).json();s(k||[])}catch(p){console.error("Failed to load PR reviews:",p)}finally{c(!1)}},x=async()=>{try{const k=await(await fetch("/api/pr-reviews/metrics")).json();o(k)}catch(p){console.error("Failed to load metrics:",p)}},w=async()=>{c(!0),await Promise.all([m(),x()]),c(!1)},b=n.filter(p=>p.status==="pending");n.filter(p=>p.status!=="pending");const y=h==="all"?n:n.filter(p=>p.status===h),g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(H.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(af,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"PR Reviews"}),t&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300",children:"Live"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:w,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Refresh",children:a.jsx(es,{className:`w-5 h-5 ${l?"animate-spin":""}`})}),a.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",title:"Settings",children:a.jsx(Y_,{className:"w-5 h-5"})})]})]}),a.jsx(tT,{metrics:i,activeCount:b.length,totalReviews:n.length}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:["active","history","metrics"].map(p=>a.jsxs("button",{onClick:()=>d(p),className:`
                py-2 px-1 border-b-2 font-medium text-sm capitalize
                ${u===p?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
              `,children:[p==="active"&&`Active (${b.length})`,p==="history"&&"Review History",p==="metrics"&&"Metrics & Trends"]},p))})}),a.jsxs(H.div,{variants:g,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:[u==="active"&&a.jsx(rT,{reviews:b,loading:l}),u==="history"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filter:"}),a.jsxs("select",{value:h,onChange:p=>f(p.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[a.jsx("option",{value:"all",children:"All Reviews"}),a.jsx("option",{value:"passed",children:"Passed"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"warning",children:"Warnings"})]}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",y.length," reviews"]})]}),a.jsx(nT,{reviews:y.filter(p=>p.status!=="pending"),loading:l})]}),u==="metrics"&&a.jsx(sT,{metrics:i,reviews:n})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nf,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.totalToday," reviews today"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ne,{className:"w-4 h-4 text-green-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[i.passRate,"% pass rate"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ct,{className:"w-4 h-4 text-blue-500"}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[(i.avgTime/1e3).toFixed(1),"s avg time"]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:i.falsePositiveRate>15?a.jsxs("span",{className:"flex items-center space-x-1 text-sm text-yellow-600 dark:text-yellow-400",children:[a.jsx(mt,{className:"w-4 h-4"}),a.jsx("span",{children:"High false positive rate"})]}):a.jsxs("span",{className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400",children:[a.jsx(Ne,{className:"w-4 h-4"}),a.jsx("span",{children:"System healthy"})]})})]})]})}const cw=({variant:e="text",width:t="100%",height:r="auto",className:n="",count:s=1,isCompact:i=!1})=>{const l={pulse:{opacity:Ol()?1:[.3,.6,.3],transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}},c=()=>{if(r!=="auto")return r;switch(e){case"title":return i?"24px":"32px";case"text":return i?"16px":"20px";case"button":return i?"32px":"40px";case"card":return i?"120px":"200px";case"avatar":return i?"32px":"48px";case"thumbnail":return"150px";default:return"20px"}},u=()=>{if(t!=="100%")return t;switch(e){case"title":return"60%";case"button":return"120px";case"avatar":return i?"32px":"48px";case"thumbnail":return"150px";default:return"100%"}},d=`bg-gray-200 dark:bg-gray-700 rounded ${e==="avatar"?"rounded-full":"rounded-md"}`,h=()=>a.jsx(H.div,{className:`${d} ${n}`,style:{width:u(),height:c()},animate:"pulse",variants:l});return s>1?a.jsx("div",{className:"space-y-2",children:Array.from({length:s}).map((f,m)=>a.jsx("div",{children:h()},m))}):h()};function b0({strategicDirectives:e=[],prds:t=[],isCompact:r=!1}){const{sdKey:n}=kh(),s=cs(),[i,o]=v.useState([]),[l,c]=v.useState({}),[u,d]=v.useState(null),[h,f]=v.useState([]),[m,x]=v.useState(null),[w,b]=v.useState(""),[y,g]=v.useState(n||"all"),[p,k]=v.useState({status:"all",priority:"all",prd:"all"}),[S,N]=v.useState(!0),[_,P]=v.useState(null),$={"SD-GOV-001":"SD-GOVERNANCE-001","SD-MON-001":"SD-MONITORING-001","SD-PIPE-001":"SD-PIPELINE-001","SD-VIS-001":"SD-VISION-001","SD-WSJF-001":"SD-WSJF-001","SD-2025-09-EMB":"SD-2025-09-EMB","SD-2025-PILOT-001":"SD-2025-PILOT-001","SD-PILOT-001":"SD-PILOT-001","SD-RABBIT-001":"SD-RABBIT-001"},R=Object.entries($).reduce((j,[C,E])=>(j[E]=C,j),{});v.useEffect(()=>{Ce()},[n,p,w,y]),v.useEffect(()=>{n||Y()},[n]),v.useEffect(()=>{if(n&&n!==y&&g(n),n){L();const j=e.find(C=>C.id===n||C.sd_key===n)||h.find(C=>C.sd_key===n)||{id:n,sd_key:n,title:`Strategic Directive ${n}`};d(j)}},[n,e,h,y]);async function Y(){try{const j=[],C=new Set;if(e&&e.length>0)for(const E of e){const M=E.sd_key||E.sdKey||E.id,K=E.title||`Strategic Directive ${M}`,G=[M],ce=R[M];ce&&ce!==M&&G.push(ce);for(const de of G)if(!C.has(de)){C.add(de);try{const xe=await fetch(`/api/stories?sd_key=${de}&limit=1`),Te=await xe.json();if(xe.ok&&Te.stories&&Te.stories.length>0){j.some(ds=>ds.sd_key===M)||j.push({sd_key:M,story_key:de,title:K,story_count:Te.total||Te.stories.length});break}}catch{continue}}}else{const E=Object.keys($);for(const M of E)if(!C.has(M)){C.add(M);try{const K=await fetch(`/api/stories?sd_key=${M}&limit=1`),G=await K.json();if(K.ok&&G.stories&&G.stories.length>0){const ce=$[M]||M,de=e.find(Te=>Te.sd_key===ce||Te.sdKey===ce||Te.id===ce),xe=(de==null?void 0:de.title)||`Strategic Directive ${ce}`;j.push({sd_key:ce,story_key:M,title:xe,story_count:G.total||G.stories.length})}}catch{continue}}}return f(j),j}catch(j){return console.error("Failed to load available SDs:",j),[]}}async function Ce(){N(!0);try{let j=[];if((y==="all"||!y)&&!n){let M=h;M.length===0&&(M=await Y());for(const K of M)try{const G=K.story_key||K.sd_key,ce=new URLSearchParams({sd_key:G,limit:100,offset:0});p.status!=="all"&&ce.append("status",p.status);const de=await fetch(`/api/stories?${ce}`),xe=await de.json();if(de.ok&&xe.stories){const Te=xe.stories.map(ds=>({...ds,sd_key:K.sd_key,sd_title:K.title}));j.push(...Te)}}catch(G){console.warn(`Failed to load stories for ${K.sd_key}:`,G)}}else{const M=n||y,K=new URLSearchParams({sd_key:M,limit:100,offset:0});p.status!=="all"&&K.append("status",p.status);const G=await fetch(`/api/stories?${K}`),ce=await G.json();if(!G.ok)throw new Error(ce.error||"Failed to load stories");j=ce.stories||[]}let C=Qe(j);o(C);const E={};C.forEach(M=>{const K=M.parent_id||"unassigned";E[K]||(E[K]={prd:t.find(G=>G.id===K),stories:[]}),E[K].stories.push(M)}),c(E)}catch(j){console.error("Failed to load stories:",j),P({type:"error",message:`Failed to load stories: ${j.message}`})}finally{N(!1)}}function Qe(j){let C=[...j];if(w){const E=w.toLowerCase();C=C.filter(M=>{var K,G,ce,de,xe;return((K=M.story_key)==null?void 0:K.toLowerCase().includes(E))||((G=M.title)==null?void 0:G.toLowerCase().includes(E))||((ce=M.description)==null?void 0:ce.toLowerCase().includes(E))||((de=M.acceptance_criteria)==null?void 0:de.toLowerCase().includes(E))||((xe=M.user_story)==null?void 0:xe.toLowerCase().includes(E))})}return p.priority!=="all"&&(C=C.filter(E=>{var M;return((M=E.priority)==null?void 0:M.toLowerCase())===p.priority.toLowerCase()})),C}function I(j){g(j),s(j==="all"?"/stories":`/stories/${j}`)}async function L(){try{if(!n)return;const j=await fetch(`/api/stories/gate?sd_key=${n}`),C=await j.json();j.ok?x(C):console.error("Failed to load gate status:",C.error)}catch(j){console.error("Failed to load gate status:",j)}}const z=j=>{switch(j){case"passing":return a.jsx(Ne,{className:"w-4 h-4 text-green-500"});case"failing":return a.jsx(xr,{className:"w-4 h-4 text-red-500"});case"not_run":default:return a.jsx(Ct,{className:"w-4 h-4 text-gray-400"})}},O=j=>{const C={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"};return a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C[j]||"bg-gray-100 text-gray-800"}`,children:j})};return S?a.jsx(cw,{count:5}):a.jsxs("div",{className:r?"p-3":"p-6",children:[a.jsxs("div",{className:r?"mb-3":"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Co,{className:r?"w-5 h-5 mr-2":"w-6 h-6 mr-3"}),a.jsx("h1",{className:r?"text-xl font-semibold":"text-2xl font-bold",children:"User Stories"}),a.jsxs("span",{className:`ml-3 ${r?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-gray-100 dark:bg-gray-700 rounded-full`,children:[i.length," ",y==="all"||!y?"total stories":"stories"]}),u&&y!=="all"&&a.jsxs("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:["• ",u.title]}),(y==="all"||!y)&&!n&&h.length>0&&a.jsxs("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:["• Across ",h.length," Strategic Directives"]})]}),a.jsx($l,{onRefresh:Ce,isCompact:r})]}),a.jsxs("div",{className:`flex flex-wrap gap-2 ${r?"mb-3":"mb-4"}`,children:[a.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[a.jsx(Dv,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${r?"w-4 h-4":"w-5 h-5"} text-gray-400`}),a.jsx("input",{type:"text",value:w,onChange:j=>b(j.target.value),placeholder:"Search user stories...",className:`w-full ${r?"pl-9 pr-3 py-1.5 text-sm":"pl-10 pr-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800`})]}),a.jsxs("select",{value:y,onChange:j=>I(j.target.value),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Strategic Directives"}),h.map(j=>a.jsx("option",{value:j.sd_key,children:j.title},j.sd_key))]}),a.jsxs("select",{value:p.priority,onChange:j=>k({...p,priority:j.target.value}),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Priorities"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]}),a.jsxs("select",{value:p.status,onChange:j=>k({...p,status:j.target.value}),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"passing",children:"Passing"}),a.jsx("option",{value:"failing",children:"Failing"}),a.jsx("option",{value:"not_run",children:"Not Run"})]}),Object.keys(l).length>1&&a.jsxs("select",{value:p.prd,onChange:j=>k({...p,prd:j.target.value}),className:`${r?"px-3 py-1.5 text-sm":"px-4 py-2"} border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800`,children:[a.jsx("option",{value:"all",children:"All PRDs"}),Object.entries(l).map(([j,C])=>a.jsx("option",{value:j,children:C.prd?C.prd.title:"Unassigned Stories"},j))]})]}),a.jsxs("div",{className:`bg-gradient-to-r from-primary-50 to-purple-50 dark:from-primary-900/20 dark:to-purple-900/20
                        rounded-lg p-4 mb-4 border border-primary-200 dark:border-primary-700`,children:[a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(qt,{className:"w-4 h-4 mr-2 text-primary-600"}),a.jsx("span",{className:"font-medium",children:"Strategic Directive"})]}),a.jsx(wa,{className:"w-4 h-4 mx-3 text-gray-400"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qp,{className:"w-4 h-4 mr-2 text-purple-600"}),a.jsx("span",{className:"font-medium",children:"PRDs"})]}),a.jsx(wa,{className:"w-4 h-4 mx-3 text-gray-400"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Co,{className:"w-4 h-4 mr-2 text-green-600"}),a.jsx("span",{className:"font-medium",children:"User Stories"})]})]}),m&&a.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(Ne,{className:"w-4 h-4 mr-1 text-green-500"}),m.passing_count," passing"]}),a.jsxs("span",{className:"flex items-center",children:[a.jsx(xr,{className:"w-4 h-4 mr-1 text-red-500"}),m.failing_count," failing"]}),a.jsxs("span",{className:"flex items-center",children:[a.jsx(Ct,{className:"w-4 h-4 mr-1 text-gray-400"}),m.not_run_count," not run"]})]}),a.jsx("div",{className:"flex items-center",children:m.ready?a.jsxs("span",{className:"flex items-center text-green-600 font-medium",children:[a.jsx(Ne,{className:"w-5 h-5 mr-2"}),"Release Ready (",Math.round(m.passing_count/m.total_stories*100),"%)"]}):a.jsxs("span",{className:"flex items-center text-yellow-600 font-medium",children:[a.jsx(mt,{className:"w-5 h-5 mr-2"}),"Needs ",Math.ceil(m.total_stories*.8)-m.passing_count," more passing stories"]})})]})]})]}),Object.keys(l).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(l).filter(([j])=>p.prd==="all"||p.prd===j).map(([j,C])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qp,{className:"w-5 h-5 mr-2 text-purple-500"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:C.prd?a.jsx(sr,{to:`/prds/${C.prd.id}`,className:"hover:text-primary-500 transition-colors",children:C.prd.title}):"Unassigned Stories"})]}),a.jsxs("span",{className:"text-sm text-gray-500",children:[C.stories.length," stories"]})]}),C.prd&&a.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("span",{children:["Priority: ",C.prd.priority]}),a.jsxs("span",{children:["Status: ",C.prd.status]}),a.jsxs(sr,{to:`/prds/${C.prd.id}`,className:"flex items-center text-primary-500 hover:text-primary-600",children:[a.jsx(Rv,{className:"w-3 h-3 mr-1"}),"View PRD"]})]})]}),a.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:C.stories.map((E,M)=>a.jsx(sr,{to:`/stories/${n}/${E.story_key}`,className:"block p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[z(E.verification_status),a.jsx("h3",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:E.story_title||E.backlog_title})]}),E.story_description&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:E.story_description}),a.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[a.jsx("span",{className:"text-gray-500",children:E.story_key}),O(E.priority),E.coverage_pct&&a.jsxs("span",{className:"text-gray-500",children:["Coverage: ",E.coverage_pct,"%"]})]})]}),a.jsx(hr,{className:"w-5 h-5 text-gray-400 ml-4 flex-shrink-0"})]})},E.backlog_id))})]},j))}):!S&&a.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsx(Co,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No user stories found"}),a.jsx("p",{className:"text-sm text-gray-400",children:y==="all"||!y?"User stories will appear here once PRDs are created and processed":`No stories found for ${(u==null?void 0:u.title)||"this Strategic Directive"}`})]}),_&&a.jsx(pf,{type:_.type,message:_.message,onClose:()=>P(null)})]})}function aT(){const{sdKey:e,storyKey:t}=kh(),r=cs(),[n,s]=v.useState(null),[i,o]=v.useState(!0),[l,c]=v.useState(!1),[u,d]=v.useState(null);v.useEffect(()=>{h()},[e,t]);async function h(){try{const{data:w,error:b}=await Nd.from("v_story_verification_status").select("*").eq("sd_key",e).eq("story_key",t).single();if(b)throw b;s(w)}catch(w){console.error("Failed to load story:",w),d({type:"error",message:"Failed to load story details"})}finally{o(!1)}}async function f(){c(!0);try{if((await fetch("/api/stories/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({story_keys:[t],test_run_id:"manual-"+Date.now(),build_id:"manual",status:"not_run"})})).ok)d({type:"success",message:"Verification triggered successfully"}),await h();else throw new Error("Verification request failed")}catch(w){console.error("Failed to trigger verification:",w),d({type:"error",message:"Failed to trigger verification"})}finally{c(!1)}}const m=w=>{if(!w||!w[0])return null;const b=w[0];return b.given||b.when||b.then?a.jsxs("div",{className:"space-y-2 bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[b.given&&a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"GIVEN:"}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:b.given})]}),b.when&&a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:"WHEN:"}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:b.when})]}),b.then&&a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:"THEN:"}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:b.then})]})]}):b.text||b.title?a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[b.title&&a.jsx("h4",{className:"font-semibold mb-2",children:b.title}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:b.text||b.title})]}):a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No acceptance criteria defined"})},x=w=>{const b={passing:{bg:"bg-green-100 dark:bg-green-900/50",text:"text-green-800 dark:text-green-300",icon:"✅"},failing:{bg:"bg-red-100 dark:bg-red-900/50",text:"text-red-800 dark:text-red-300",icon:"❌"},not_run:{bg:"bg-gray-100 dark:bg-gray-900/50",text:"text-gray-800 dark:text-gray-300",icon:"⏸️"}},y=b[w]||b.not_run;return a.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${y.bg} ${y.text}`,children:[y.icon," ",w]})};return i?a.jsx(cw,{count:3}):n?a.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(pe,{onClick:()=>r(`/stories/${e}`),variant:"secondary",className:"flex items-center gap-2",children:"← Back to Stories"}),a.jsxs("h1",{className:"text-2xl font-bold dark:text-white",children:["Story: ",n.story_key]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-2 dark:text-white",children:n.story_title}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("span",{children:["Priority: ",a.jsx("strong",{children:n.priority||"Medium"})]}),a.jsxs("span",{children:["Sequence: ",a.jsxs("strong",{children:["#",n.sequence_no]})]}),n.parent_id&&a.jsxs("span",{children:["Parent: ",a.jsx("strong",{children:n.parent_id})]})]})]}),a.jsxs("div",{className:"border-t pt-6 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 dark:text-white",children:"Acceptance Criteria"}),m(n.acceptance_criteria)]}),a.jsxs("div",{className:"border-t pt-6 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 dark:text-white",children:"Verification Status"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),x(n.status)]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Coverage"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:a.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${n.coverage_pct||0}%`}})}),a.jsxs("span",{className:"text-sm font-medium dark:text-white",children:[n.coverage_pct||0,"%"]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Last Run"}),a.jsx("p",{className:"font-medium dark:text-white",children:n.last_run_at?new Date(n.last_run_at).toLocaleString():"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Build ID"}),a.jsx("p",{className:"font-medium dark:text-white",children:n.build_id||"N/A"})]})]})]}),a.jsx("div",{className:"border-t pt-6 flex justify-end gap-3 dark:border-gray-700",children:a.jsx(pe,{onClick:f,disabled:l,variant:"primary",children:l?"Triggering...":"Trigger Verification"})})]}),u&&a.jsx(pf,{type:u.type,message:u.message,onClose:()=>d(null)})]}):a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Story not found"}),a.jsx(pe,{onClick:()=>r(`/stories/${e}`),className:"mt-4",children:"Back to Stories"})]})})}function oT(e,t){let r;return function(...s){const i=()=>{clearTimeout(r),e(...s)};clearTimeout(r),r=setTimeout(i,t)}}const Qr={NAVIGATION:"navigation",ACTION:"action",SEARCH:"search",AI_QUERY:"ai_query",SHORTCUT:"shortcut",RECENT:"recent"},lT=({type:e})=>{const t={navigation:"📍",action:"⚡",search:"🔍",ai_query:"🤖",shortcut:"⌨️",recent:"🕐"};return a.jsx("span",{className:"command-icon",children:t[e]||"📄"})},cT=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState(""),[s,i]=v.useState([]),[o,l]=v.useState(!1),[c,u]=v.useState(0),[d,h]=v.useState(null),f=cs(),m=v.useRef(null),x=v.useRef(null);v.useEffect(()=>{const p=k=>{(k.metaKey||k.ctrlKey)&&k.key==="k"&&(k.preventDefault(),k.stopPropagation(),t(S=>!S),e||(n(""),i([]),u(0))),k.key==="Escape"&&e&&t(!1)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e]),v.useEffect(()=>{e&&m.current&&m.current.focus()},[e]);const w=v.useCallback(oT(async p=>{if(!p||p.trim().length===0){i(b()),h(null);return}l(!0);try{const k=await fetch("/api/v1/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:p,context:{currentPath:window.location.pathname,source:"command_palette"}})});if(k.ok){const S=await k.json(),N=S.results.map(_=>({..._,type:_.content_type||Qr.SEARCH,label:_.title,action:()=>y(_)}));i(N),h(S.searchTime)}else console.error("Search failed:",k.status),i(b())}catch(k){console.error("Search error:",k),i(b())}finally{l(!1)}},300),[]),b=()=>[{type:Qr.NAVIGATION,label:"Dashboard",description:"Go to dashboard",content_id:"nav_dashboard",action:()=>f("/")},{type:Qr.NAVIGATION,label:"Portfolio",description:"View your portfolio",content_id:"nav_portfolio",action:()=>f("/portfolio")},{type:Qr.NAVIGATION,label:"Settings",description:"Application settings",content_id:"nav_settings",action:()=>f("/settings")},{type:Qr.ACTION,label:"Clear Cache",description:"Clear application cache",content_id:"cmd_clear_cache",action:async()=>{await fetch("/api/v1/search/cache/clear",{method:"POST"}),console.log("Cache cleared")}},{type:Qr.ACTION,label:"Refresh",description:"Refresh current view",content_id:"cmd_refresh",action:()=>window.location.reload()}],y=async p=>{if(console.log("Executing command:",p),r&&fetch("/api/v1/search/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:r,selectedResult:p.content_id,shownResults:s.map(k=>({id:k.content_id}))})}).catch(console.error),t(!1),n(""),i([]),p.action)p.action();else switch(p.content_type||p.type){case Qr.NAVIGATION:case"navigation":p.target_path&&f(p.target_path);break;case Qr.SEARCH:case"search":console.log("Search result selected:",p);break;default:console.log("Unknown command type:",p)}};v.useEffect(()=>{if(!e)return;const p=k=>{switch(k.key){case"ArrowDown":k.preventDefault(),u(S=>S<s.length-1?S+1:0);break;case"ArrowUp":k.preventDefault(),u(S=>S>0?S-1:s.length-1);break;case"Enter":k.preventDefault(),s[c]&&y(s[c]);break;case"Tab":k.preventDefault(),k.shiftKey?u(S=>S>0?S-1:s.length-1):u(S=>S<s.length-1?S+1:0);break}};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e,s,c]),v.useEffect(()=>{if(x.current&&s.length>0){const p=x.current.children[c];p&&p.scrollIntoView({block:"nearest",behavior:"smooth"})}},[c,s]);const g=p=>{const k=p.target.value;n(k),u(0),w(k)};return v.useEffect(()=>{e&&!r&&i(b())},[e,r]),e?a.jsx("div",{className:"command-palette-overlay",onClick:()=>t(!1),children:a.jsxs("div",{className:"command-palette",onClick:p=>p.stopPropagation(),role:"dialog","aria-label":"Command Palette","aria-modal":"true",children:[a.jsxs("div",{className:"command-palette-header",children:[a.jsx("input",{ref:m,type:"text",className:"command-palette-input",value:r,onChange:g,placeholder:"Search commands, navigate, or ask AI...","aria-label":"Command search input","aria-autocomplete":"list","aria-controls":"command-results","aria-activedescendant":`command-${c}`}),d!==null&&a.jsxs("span",{className:"search-time",children:[d,"ms"]})]}),o&&a.jsxs("div",{className:"command-palette-loading",children:[a.jsx("span",{className:"loading-spinner",children:"⏳"}),"Searching..."]}),!o&&s.length>0&&a.jsx("div",{ref:x,className:"command-palette-results",id:"command-results",role:"listbox",children:s.map((p,k)=>a.jsxs("div",{id:`command-${k}`,className:`command-result ${k===c?"selected":""}`,onClick:()=>y(p),onMouseEnter:()=>u(k),role:"option","aria-selected":k===c,children:[a.jsx(lT,{type:p.type}),a.jsxs("div",{className:"command-result-content",children:[a.jsx("div",{className:"command-result-title",children:p.label||p.title}),p.description&&a.jsx("div",{className:"command-result-description",children:p.description})]}),p.score&&a.jsxs("div",{className:"command-result-score",children:[(p.score*100).toFixed(0),"%"]})]},p.content_id||k))}),!o&&s.length===0&&r&&a.jsxs("div",{className:"command-palette-empty",children:['No results found for "',r,'"']}),a.jsxs("div",{className:"command-palette-footer",children:[a.jsxs("span",{className:"command-hint",children:[a.jsx("kbd",{children:"↑↓"})," Navigate"]}),a.jsxs("span",{className:"command-hint",children:[a.jsx("kbd",{children:"Enter"})," Select"]}),a.jsxs("span",{className:"command-hint",children:[a.jsx("kbd",{children:"Esc"})," Close"]}),a.jsxs("span",{className:"command-hint",children:[a.jsx("kbd",{children:"Cmd+K"})," Toggle"]})]})]})}):null},uo=window.location.hostname==="localhost",Yr={log:(...e)=>{uo&&console.log(...e)},error:(...e)=>{console.error(...e)},warn:(...e)=>{uo&&console.warn(...e)},info:(...e)=>{uo&&console.info(...e)},debug:(...e)=>{uo&&console.debug(...e)}},k0=v.lazy(()=>ls(()=>import("./SDManager-CinUB68x.js"),__vite__mapDeps([0,1]))),j0=v.lazy(()=>ls(()=>import("./PRDManager-C1pXLWQs.js"),__vite__mapDeps([2,1]))),ho=()=>a.jsx("div",{style:{padding:"20px",textAlign:"center"},children:a.jsx("div",{children:"Loading..."})});function uT(){var k,S;const[e,t]=v.useState({leoProtocol:{version:"detecting...",activeRole:null,currentSD:null,currentPRD:null,phase:null},context:{usage:0,total:18e4,breakdown:{}},handoffs:[],strategicDirectives:[],prds:[],checklists:{},progress:{overall:0,byPhase:{}}}),[r,n]=v.useState(!1),[s,i]=v.useState(!1),{preferences:o}=Y1(),[l,c]=xc("checklists",{}),[u,d]=xc("sidebarCollapsed",!1),[h,f]=xc("compactMode",!1),m=Q1("ws://localhost:3000",{onOpen:()=>{n(!0),Yr.log("Connected to dashboard server")},onMessage:N=>{try{const _=JSON.parse(N.data);_.type==="state"?t(_.data):_.type==="sd-reordered"&&(Yr.log("Strategic directives reordered, refreshing..."),x())}catch(_){Yr.error("Error parsing WebSocket message:",_)}},onClose:()=>{n(!1),Yr.log("Disconnected from dashboard server")},onError:N=>{Yr.error("WebSocket error:",N)}});v.useEffect(()=>{fetch("/api/state").then(N=>N.json()).then(N=>{const _={...N,checklists:{...N.checklists,...l}};t(_)}).catch(N=>Yr.error("Error loading state:",N))},[]),v.useEffect(()=>{Object.keys(e.checklists).length>0&&c(e.checklists)},[e.checklists]),v.useEffect(()=>{o.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[o.theme]);const x=()=>{fetch("/api/state").then(N=>N.json()).then(N=>{const _={...N,checklists:{...N.checklists,...l}};t(_),Yr.log("State refreshed successfully")}).catch(N=>Yr.error("Error refreshing state:",N)),m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"refresh"}))},w=(N,_,P)=>{m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"updateChecklist",data:{documentId:N,itemIndex:_,checked:P}}))},b=(N,_)=>{m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"requestHandoff",data:{type:N,checklist:_}}))},y=()=>{m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"compactContext"}))},g=N=>{t(_=>({..._,leoProtocol:{..._.leoProtocol,currentSD:N}})),m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"setActiveSD",data:{sdId:N}}))},p=(N,_)=>{t(P=>({...P,strategicDirectives:P.strategicDirectives.map($=>$.id===N?{...$,status:_}:$)})),m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"updateSDStatus",data:{sdId:N,status:_}}))};return a.jsxs(W1,{children:[a.jsx(cT,{}),a.jsx($1,{children:a.jsxs(Be,{path:"/",element:a.jsx(uE,{state:e,isConnected:r,isSidebarCollapsed:u,setIsSidebarCollapsed:d,isCompactMode:h,setIsCompactMode:f,isMobileMenuOpen:s,setIsMobileMenuOpen:i,updateChecklist:w,requestHandoff:b,compactContext:y,refreshData:x,setActiveSD:g}),children:[a.jsx(Be,{index:!0,element:a.jsx(qC,{state:e,onRefresh:x,onSetActiveSD:g,isCompact:h})}),a.jsxs(Be,{path:"strategic-directives",children:[a.jsx(Be,{index:!0,element:a.jsx(v.Suspense,{fallback:a.jsx(ho,{}),children:a.jsx(k0,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:w,onSetActiveSD:g,onUpdateStatus:p,currentSD:(k=e.leoProtocol)==null?void 0:k.currentSD,isCompact:h,onRefresh:x})})}),a.jsx(Be,{path:":id",element:a.jsx(v.Suspense,{fallback:a.jsx(ho,{}),children:a.jsx(k0,{strategicDirectives:e.strategicDirectives,onUpdateChecklist:w,onSetActiveSD:g,onUpdateStatus:p,currentSD:(S=e.leoProtocol)==null?void 0:S.currentSD,isCompact:h,detailMode:!0,onRefresh:x})})})]}),a.jsxs(Be,{path:"prds",children:[a.jsx(Be,{index:!0,element:a.jsx(v.Suspense,{fallback:a.jsx(ho,{}),children:a.jsx(j0,{prds:e.prds,isCompact:h})})}),a.jsx(Be,{path:":id",element:a.jsx(v.Suspense,{fallback:a.jsx(ho,{}),children:a.jsx(j0,{prds:e.prds,isCompact:h,detailMode:!0})})})]}),a.jsxs(Be,{path:"backlog",children:[a.jsx(Be,{index:!0,element:a.jsx(w0,{strategicDirectives:e.strategicDirectives,isCompact:h,onRefresh:x})}),a.jsx(Be,{path:":id",element:a.jsx(w0,{strategicDirectives:e.strategicDirectives,isCompact:h,detailMode:!0,onRefresh:x})})]}),a.jsxs(Be,{path:"stories",children:[a.jsx(Be,{index:!0,element:a.jsx(b0,{strategicDirectives:e.strategicDirectives,prds:e.prds,isCompact:h})}),a.jsx(Be,{path:":sdKey",element:a.jsx(b0,{strategicDirectives:e.strategicDirectives,prds:e.prds,isCompact:h})}),a.jsx(Be,{path:":sdKey/:storyKey",element:a.jsx(aT,{isCompact:h})})]}),a.jsx(Be,{path:"directive-lab",element:a.jsx(eT,{state:e,onRefresh:x,isCompact:h})}),a.jsx(Be,{path:"pr-reviews",element:a.jsx(iT,{state:e,isConnected:r,refreshData:x})}),a.jsx(Be,{path:"*",element:a.jsx(D1,{to:"/",replace:!0})})]})})]})}class dT extends Na.Component{constructor(r){super(r);Wl(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});Wl(this,"handleHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){window.location.hostname==="localhost"&&console.error("ErrorBoundary caught:",r,n),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(mt,{className:"w-8 h-8 text-red-500 mr-3"}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Something went wrong"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We encountered an unexpected error. The application may not work correctly."}),window.location.hostname==="localhost"&&a.jsxs("details",{className:"mb-4",children:[a.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Error details (development only)"}),a.jsxs("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto",children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(es,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),a.jsxs("button",{onClick:this.handleHome,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(of,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}Kc.createRoot(document.getElementById("root")).render(a.jsx(Na.StrictMode,{children:a.jsx(dT,{children:a.jsx(uT,{})})}));export{nf as A,hr as C,qt as F,H_ as L,Yp as M,Q_ as P,e0 as S,ka as T,Lv as U,Ia as X,dd as Z,cs as a,$l as b,V as c,Dv as d,F_ as e,Tr as f,_v as g,O_ as h,Pv as i,a as j,L_ as k,jn as l,Xn as m,X_ as n,cl as o,Iv as p,Tt as q,v as r,fw as s,kh as u};
//# sourceMappingURL=index-DaWIMfnY.js.map
