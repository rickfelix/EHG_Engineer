{
  "$schema": "./phase-model-config.schema.json",
  "_meta": {
    "version": "2.0.0",
    "description": "Phase-based thinking effort routing for LEO Protocol sub-agents",
    "extractedFrom": "lib/sub-agent-executor.js",
    "extractedDate": "2026-02-13",
    "philosophy": "Single model (Opus) with thinking effort levels: low (1024 tokens), medium (4096), high (16384)",
    "calibration": "Effort levels replace model tiers. All agents use Opus with varying thinking depth."
  },
  "phaseModelOverrides": {
    "LEAD": {
      "_low_effort": "Operational tasks - minimal thinking needed",
      "GITHUB": { "effort": "low", "reason": "CI/CD verification, status checks" },
      "DOCMON": { "effort": "low", "reason": "Pattern-based file structure validation" },
      "RETRO": { "effort": "low", "reason": "Pattern extraction from execution history" },
      "QUICKFIX": { "effort": "low", "reason": "Trivial edits (<50 LOC)" },

      "_medium_effort": "Moderate reasoning required",
      "VALIDATION": { "effort": "medium", "reason": "LEAD phase: strategic validation" },
      "DESIGN": { "effort": "medium", "reason": "Architecture brainstorming requires reasoning" },
      "TESTING": { "effort": "medium", "reason": "Test strategy planning" },
      "STORIES": { "effort": "medium", "reason": "User story generation needs context" },
      "API": { "effort": "medium", "reason": "API design patterns" },
      "RISK": { "effort": "medium", "reason": "Risk assessment" },
      "DEPENDENCY": { "effort": "medium", "reason": "Dependency analysis" },
      "PERFORMANCE": { "effort": "medium", "reason": "Performance planning" },
      "UAT": { "effort": "medium", "reason": "UAT planning" },
      "REGRESSION": { "effort": "medium", "reason": "Regression analysis" },

      "_high_effort": "Deep reasoning - critical analysis",
      "DATABASE": { "effort": "high", "reason": "Schema design requires deep reasoning" },
      "SECURITY": { "effort": "high", "reason": "Threat modeling - maximum thinking" },
      "RCA": { "effort": "high", "reason": "Root cause analysis needs thorough investigation" },
      "ORCHESTRATOR_CHILD": { "effort": "high", "reason": "Full SD execution requires deep context" }
    },
    "PLAN": {
      "_low_effort": "Operational tasks",
      "GITHUB": { "effort": "low", "reason": "Branch setup, basic coordination" },
      "DOCMON": { "effort": "low", "reason": "Template-based PRD compliance checks" },

      "_medium_effort": "Moderate reasoning",
      "DESIGN": { "effort": "medium", "reason": "Component architecture design" },
      "TESTING": { "effort": "medium", "reason": "E2E test plan generation" },
      "API": { "effort": "medium", "reason": "API contract design" },
      "RISK": { "effort": "medium", "reason": "Security risk assessment" },
      "DEPENDENCY": { "effort": "medium", "reason": "CVE assessment" },
      "PERFORMANCE": { "effort": "medium", "reason": "Optimization planning" },
      "RETRO": { "effort": "medium", "reason": "Retrospective analysis" },
      "UAT": { "effort": "medium", "reason": "UAT design" },
      "STORIES": { "effort": "medium", "reason": "User story elaboration" },
      "REGRESSION": { "effort": "medium", "reason": "Regression planning" },

      "_high_effort": "Deep reasoning - critical gates",
      "DATABASE": { "effort": "high", "reason": "Schema design (constraints matter)" },
      "SECURITY": { "effort": "high", "reason": "Security design review - maximum thinking" },
      "VALIDATION": { "effort": "high", "reason": "Critical duplicate detection" },
      "RCA": { "effort": "high", "reason": "Root cause analysis" },
      "ORCHESTRATOR_CHILD": { "effort": "high", "reason": "Full SD execution" }
    },
    "EXEC": {
      "_low_effort": "Operational tasks",
      "GITHUB": { "effort": "low", "reason": "PR operations, basic coordination" },
      "QUICKFIX": { "effort": "low", "reason": "Small edits and patches" },
      "DOCMON": { "effort": "low", "reason": "Documentation compliance checks" },

      "_medium_effort": "Moderate reasoning",
      "DESIGN": { "effort": "medium", "reason": "Implementation-phase architecture decisions" },
      "STORIES": { "effort": "medium", "reason": "Story-driven implementation details" },
      "API": { "effort": "medium", "reason": "API implementation validation" },
      "DEPENDENCY": { "effort": "medium", "reason": "Dependency update validation" },
      "PERFORMANCE": { "effort": "medium", "reason": "Performance optimization execution" },
      "RETRO": { "effort": "medium", "reason": "Retrospective generation" },
      "UAT": { "effort": "medium", "reason": "UAT execution" },
      "REGRESSION": { "effort": "medium", "reason": "Regression validation" },

      "_high_effort": "Deep reasoning - critical gates",
      "DATABASE": { "effort": "high", "reason": "Migration execution (careful reasoning)" },
      "SECURITY": { "effort": "high", "reason": "Security code review - maximum thinking" },
      "VALIDATION": { "effort": "high", "reason": "Final QA gate" },
      "TESTING": { "effort": "high", "reason": "E2E test execution - thorough analysis" },
      "RCA": { "effort": "high", "reason": "Root cause analysis" },
      "ORCHESTRATOR_CHILD": { "effort": "high", "reason": "Full SD execution" }
    }
  },
  "defaultModelAssignments": {
    "_description": "Fallback when phase is unknown. THINKING EFFORT STRATEGY (2026-02-13)",
    "_low_effort": "Operational",
    "GITHUB": { "effort": "low", "reason": "CI/CD operations" },
    "DOCMON": { "effort": "low", "reason": "Compliance checks" },
    "RETRO": { "effort": "low", "reason": "Pattern extraction" },
    "QUICKFIX": { "effort": "low", "reason": "Small edits" },

    "_medium_effort": "Moderate reasoning",
    "DATABASE": { "effort": "medium", "reason": "Schema work" },
    "STORIES": { "effort": "medium", "reason": "Context understanding" },
    "DESIGN": { "effort": "medium", "reason": "Design judgment" },
    "RISK": { "effort": "medium", "reason": "Risk assessment" },
    "PERFORMANCE": { "effort": "medium", "reason": "Optimization analysis" },
    "TESTING": { "effort": "medium", "reason": "Edge case detection" },
    "API": { "effort": "medium", "reason": "API design" },
    "DEPENDENCY": { "effort": "medium", "reason": "Dependency analysis" },
    "UAT": { "effort": "medium", "reason": "Structured testing" },
    "VALIDATION": { "effort": "medium", "reason": "Default validation" },
    "REGRESSION": { "effort": "medium", "reason": "Regression testing" },

    "_high_effort": "Deep reasoning",
    "SECURITY": { "effort": "high", "reason": "Always high effort for security" },
    "RCA": { "effort": "high", "reason": "Root cause analysis" },
    "ORCHESTRATOR_CHILD": { "effort": "high", "reason": "Full SD execution" }
  },
  "subAgentCategoryMapping": {
    "_description": "Sub-agent to pattern category mapping. LEO Protocol v4.3.2+ Enhancement: Enables proactive pattern injection",
    "VALIDATION": ["code_structure", "protocol", "testing"],
    "TESTING": ["testing", "deployment", "build"],
    "DATABASE": ["database", "security"],
    "SECURITY": ["security", "database"],
    "DESIGN": ["ui", "code_structure"],
    "PERFORMANCE": ["performance", "database"],
    "GITHUB": ["deployment", "build", "ci_cd"],
    "DOCMON": ["documentation", "protocol"],
    "RETRO": ["protocol", "process"],
    "UAT": ["testing", "ui"],
    "DEPENDENCY": ["deployment", "build"],
    "API": ["api", "security"],
    "STORIES": ["protocol", "requirements"],
    "RISK": ["security", "protocol"],
    "QUICKFIX": ["code_structure", "testing", "build"],
    "REGRESSION": ["refactoring", "testing", "code_structure"]
  }
}
