{
  "version": "1.0.0",
  "description": "Phase-aware and default model routing for sub-agents",
  "lastUpdated": "2025-12-27",
  "updatedBy": "Claude Code Refactoring",
  "philosophy": "HAIKU-FIRST STRATEGY - Use cheapest sufficient model, escalate only for critical reasoning",

  "phaseOverrides": {
    "LEAD": {
      "_comment": "Ideation phase - brainstorming, low-risk planning",
      "GITHUB": "haiku",
      "DOCMON": "haiku",
      "RETRO": "haiku",
      "QUICKFIX": "haiku",
      "VALIDATION": "haiku",
      "DESIGN": "sonnet",
      "TESTING": "sonnet",
      "DATABASE": "sonnet",
      "STORIES": "sonnet",
      "API": "sonnet",
      "RISK": "sonnet",
      "DEPENDENCY": "sonnet",
      "PERFORMANCE": "sonnet",
      "UAT": "sonnet",
      "SECURITY": "opus"
    },
    "PLAN": {
      "_comment": "Planning phase - design, architecture, contract definition",
      "GITHUB": "haiku",
      "DOCMON": "haiku",
      "DESIGN": "sonnet",
      "TESTING": "sonnet",
      "DATABASE": "sonnet",
      "API": "sonnet",
      "RISK": "sonnet",
      "DEPENDENCY": "sonnet",
      "PERFORMANCE": "sonnet",
      "RETRO": "sonnet",
      "UAT": "sonnet",
      "SECURITY": "opus",
      "VALIDATION": "opus",
      "STORIES": "opus"
    },
    "EXEC": {
      "_comment": "Execution phase - implementation, testing, final gates",
      "GITHUB": "haiku",
      "QUICKFIX": "haiku",
      "DESIGN": "sonnet",
      "DATABASE": "sonnet",
      "STORIES": "sonnet",
      "API": "sonnet",
      "DEPENDENCY": "sonnet",
      "PERFORMANCE": "sonnet",
      "RETRO": "sonnet",
      "DOCMON": "sonnet",
      "UAT": "sonnet",
      "SECURITY": "opus",
      "VALIDATION": "opus",
      "TESTING": "opus"
    }
  },

  "defaults": {
    "_comment": "Fallback when phase is unknown - uses most conservative assignment",
    "GITHUB": "haiku",
    "DOCMON": "haiku",
    "RETRO": "haiku",
    "QUICKFIX": "haiku",
    "DATABASE": "sonnet",
    "STORIES": "sonnet",
    "DESIGN": "sonnet",
    "RISK": "sonnet",
    "PERFORMANCE": "sonnet",
    "TESTING": "sonnet",
    "API": "sonnet",
    "DEPENDENCY": "sonnet",
    "UAT": "sonnet",
    "VALIDATION": "sonnet",
    "SECURITY": "opus"
  },

  "categoryMappings": {
    "_comment": "LEO Protocol v4.3.2+ - Sub-agent to pattern category mapping for proactive pattern injection",
    "VALIDATION": ["code_structure", "protocol", "testing"],
    "TESTING": ["testing", "deployment", "build"],
    "DATABASE": ["database", "security"],
    "SECURITY": ["security", "database"],
    "DESIGN": ["ui", "code_structure"],
    "PERFORMANCE": ["performance", "database"],
    "GITHUB": ["deployment", "build", "ci_cd"],
    "DOCMON": ["documentation", "protocol"],
    "RETRO": ["protocol", "process"],
    "UAT": ["testing", "ui"],
    "DEPENDENCY": ["deployment", "build"],
    "API": ["api", "security"],
    "STORIES": ["protocol", "requirements"],
    "RISK": ["security", "protocol"],
    "QUICKFIX": ["code_structure", "testing", "build"],
    "REGRESSION": ["refactoring", "testing", "code_structure"]
  },

  "tierDocumentation": {
    "haiku": {
      "tier": 1,
      "useCases": ["deterministic/operational tasks", "CI/CD verification", "pattern-based validation", "trivial edits (<50 LOC)"]
    },
    "sonnet": {
      "tier": 2,
      "useCases": ["mid-level reasoning", "architecture decisions", "schema design", "context understanding"]
    },
    "opus": {
      "tier": 3,
      "useCases": ["security-critical decisions", "threat modeling", "final QA gates - NEVER COMPROMISE"]
    }
  }
}
