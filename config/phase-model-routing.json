{
  "version": "2.0.0",
  "description": "Phase-aware and default model routing for sub-agents",
  "lastUpdated": "2026-02-11",
  "updatedBy": "LLM tier upgrade - quality-first strategy",
  "philosophy": "QUALITY-FIRST STRATEGY - Use most capable model where quality matters, sonnet minimum for all tasks",

  "phaseOverrides": {
    "LEAD": {
      "_comment": "Approval phase - strategic evaluation, risk assessment",
      "GITHUB": "sonnet",
      "DOCMON": "sonnet",
      "RETRO": "sonnet",
      "QUICKFIX": "sonnet",
      "VALIDATION": "sonnet",
      "DESIGN": "opus",
      "TESTING": "opus",
      "DATABASE": "opus",
      "STORIES": "opus",
      "API": "opus",
      "RISK": "opus",
      "DEPENDENCY": "opus",
      "PERFORMANCE": "opus",
      "UAT": "opus",
      "SECURITY": "opus",
      "RCA": "opus",
      "REGRESSION": "opus",
      "ORCHESTRATOR_CHILD": "sonnet"
    },
    "PLAN": {
      "_comment": "Planning phase - PRD quality determines EXEC success",
      "GITHUB": "sonnet",
      "DOCMON": "sonnet",
      "DESIGN": "opus",
      "TESTING": "opus",
      "DATABASE": "opus",
      "API": "opus",
      "RISK": "opus",
      "DEPENDENCY": "opus",
      "PERFORMANCE": "opus",
      "RETRO": "opus",
      "UAT": "opus",
      "SECURITY": "opus",
      "VALIDATION": "opus",
      "STORIES": "opus",
      "RCA": "opus",
      "REGRESSION": "opus",
      "ORCHESTRATOR_CHILD": "sonnet"
    },
    "EXEC": {
      "_comment": "Execution phase - code quality is paramount",
      "GITHUB": "sonnet",
      "QUICKFIX": "sonnet",
      "DOCMON": "sonnet",
      "DESIGN": "opus",
      "DATABASE": "opus",
      "STORIES": "opus",
      "API": "opus",
      "DEPENDENCY": "opus",
      "PERFORMANCE": "opus",
      "RETRO": "opus",
      "UAT": "opus",
      "SECURITY": "opus",
      "VALIDATION": "opus",
      "TESTING": "opus",
      "RCA": "opus",
      "REGRESSION": "opus",
      "ORCHESTRATOR_CHILD": "sonnet"
    }
  },

  "defaults": {
    "_comment": "Fallback when phase is unknown - quality-first defaults",
    "GITHUB": "sonnet",
    "DOCMON": "sonnet",
    "RETRO": "sonnet",
    "QUICKFIX": "sonnet",
    "DATABASE": "opus",
    "STORIES": "opus",
    "DESIGN": "opus",
    "RISK": "opus",
    "PERFORMANCE": "opus",
    "TESTING": "opus",
    "API": "opus",
    "DEPENDENCY": "opus",
    "UAT": "opus",
    "VALIDATION": "opus",
    "SECURITY": "opus",
    "RCA": "opus",
    "REGRESSION": "opus",
    "ORCHESTRATOR_CHILD": "sonnet"
  },

  "categoryMappings": {
    "_comment": "LEO Protocol v4.3.2+ - Sub-agent to pattern category mapping for proactive pattern injection",
    "VALIDATION": ["code_structure", "protocol", "testing"],
    "TESTING": ["testing", "deployment", "build"],
    "DATABASE": ["database", "security"],
    "SECURITY": ["security", "database"],
    "DESIGN": ["ui", "code_structure"],
    "PERFORMANCE": ["performance", "database"],
    "GITHUB": ["deployment", "build", "ci_cd"],
    "DOCMON": ["documentation", "protocol"],
    "RETRO": ["protocol", "process"],
    "UAT": ["testing", "ui"],
    "DEPENDENCY": ["deployment", "build"],
    "API": ["api", "security"],
    "STORIES": ["protocol", "requirements"],
    "RISK": ["security", "protocol"],
    "QUICKFIX": ["code_structure", "testing", "build"],
    "REGRESSION": ["refactoring", "testing", "code_structure"],
    "RCA": ["debugging", "infrastructure", "process", "cross_cutting"],
    "ORCHESTRATOR_CHILD": ["protocol", "process", "code_structure"]
  },

  "tierDocumentation": {
    "haiku": {
      "tier": 1,
      "useCases": ["Reserved for local LLM routing only (qwen3-coder:30b via Ollama)"]
    },
    "sonnet": {
      "tier": 2,
      "useCases": ["CI/CD verification", "doc field validation", "operational checks", "quick-fix analysis", "minimum tier for all sub-agents"]
    },
    "opus": {
      "tier": 3,
      "useCases": ["architecture decisions", "code quality", "security analysis", "schema design", "risk assessment", "acceptance testing", "all critical reasoning"]
    }
  }
}
